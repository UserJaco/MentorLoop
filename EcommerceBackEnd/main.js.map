{"version":3,"file":"main.js","mappings":"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M,qBAAsB,SAAQ,qEAAgB;IAMvD,YAAY,UAAsB,EAAE,QAAkB;QAClD,KAAK,CAAC,gBAAgB,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC;IAClD,CAAC;;0FARQ,qBAAqB;mHAArB,qBAAqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPa;AAEF;AACW;AACW;AACA;AACiC;AAC1B;AACgB;AACiE;AAC5F;AACwB;AAC3B;AACY;AACuB;AACS;AAChC;AACA;AACI;AACF;AACX;AAC0D;AACnC;AACX;AACrB;AAC2E;AACpB;AACZ;AACwB;AACd;AACiB;AACT;AACC;AACW;AACV;AACrD;AACwD;AACzB;AACO;AACjB;AACM;AACwC;AAClB;AAC7C;AACiC;AACG;AACoB;AACA;AAC2E;AACxE;AACG;AACiB;AACiB;AACvB;AACsC;AACb;AAClD;AAC5C;AACG;AACwB;AACnB;AACe;AACL;AAC2E;AAC7E;AACuD;AACf;AACtB;AACU;AACrB;AACkD;AACN;AACvB;AACH;AAC5B;AACkC;AACA;AACpC;AACoB;AAC4B;AACL;AACR;AACH;AACM;AACX;AACoB;AAClB;AACpB;AACK;AAC+C;AACd;AACQ;AAC/D;AACsC;AACoB;AAC/C;AAC+C;AACjF;AAC4B;AACQ;AACyC;AAChB;AACtC;AACwD;AACT;AACvC;AACM;AACG;AACqC;AACV;AACe;AACnD;AAC1B;AACI;AAC0B;AACb;AACiF;AACC;AACZ;AACkB;AAClC;AACT;AACA;AACA;AACzC;AACF;AAC4B;AAC4C;AACpF;AACgC;AACgG;AACtG;AACwC;AAC0B;AACvB;AAC0B;AAC3E;AACS;AACyB;AACgC;AAClB;AACpB;AACT;AACiB;;;;AA+MjH,MAAM,gBAAgB;;gFAAhB,gBAAgB;+GAAhB,gBAAgB;oHAJd,EAAE,YAPJ;YACL,6DAAW;YACX,2EAAgB;YAChB,o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","sources":["./$_lazy_route_resources|lazy|groupOptions: {}|namespace object","./src/app/ajs.downgrade.ts","./src/app/ajs.upgrade.ts","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/components/base-resource/base-resource.component.ts","./src/app/components/base/base.component.ts","./src/app/components/bread-crumb/bread-crumb-item/bread-crumb-item.component.ts","./src/app/components/bread-crumb/bread-crumb-item/bread-crumb-item.component.html","./src/app/components/bread-crumb/bread-crumb.component.ts","./src/app/components/bread-crumb/bread-crumb.component.html","./src/app/components/common/badges/badges.component.ts","./src/app/components/common/badges/badges.component.html","./src/app/components/common/badges/mini-badge/mini-badge.component.ts","./src/app/components/common/badges/mini-badge/mini-badge.component.html","./src/app/components/common/choose-control/choose-control.component.ts","./src/app/components/common/choose-control/choose-control.component.html","./src/app/components/common/choose-control/templates/choose-control-default-label/choose-control-default-label.component.ts","./src/app/components/common/choose-control/templates/choose-control-default-label/choose-control-default-label.component.html","./src/app/components/common/choose-control/templates/choose-control-outcome-label/choose-control-outcome-label.component.ts","./src/app/components/common/choose-control/templates/choose-control-outcome-label/choose-control-outcome-label.component.html","./src/app/components/common/choose-control/templates/choose-control-within-working-hours-label/choose-control-within-working-hours-label.component.ts","./src/app/components/common/choose-control/templates/choose-control-within-working-hours-label/choose-control-within-working-hours-label.component.html","./src/app/components/common/click-to-edit/click-to-edit.component.ts","./src/app/components/common/click-to-edit/click-to-edit.component.html","./src/app/components/common/drop-down/drop-down-item-base/drop-down-item-base.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/command-item/command-item.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/command-item/command-item.component.html","./src/app/components/common/drop-down/drop-down-menu-item-templates/default-item/default-item.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/default-item/default-item.component.html","./src/app/components/common/drop-down/drop-down-menu-item-templates/default-list-item/default-list-item.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/default-list-item/default-list-item.component.html","./src/app/components/common/drop-down/drop-down-menu-item-templates/group-boolean-operator-expression-item/group-boolean-operator-expression-item.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/group-boolean-operator-expression-item/group-boolean-operator-expression-item.component.html","./src/app/components/common/drop-down/drop-down-menu-item-templates/item-disabled/item-disabled.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/item-disabled/item-disabled.component.html","./src/app/components/common/drop-down/drop-down-menu-item-templates/outcome-action-autoname/outcome-action-autoname.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/outcome-action-autoname/outcome-action-autoname.component.html","./src/app/components/common/drop-down/drop-down-menu-item-templates/outcome-action-link/outcome-action-link.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/outcome-action-link/outcome-action-link.component.html","./src/app/components/common/drop-down/drop-down-menu-item-templates/recipient-item/recipient-item.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/recipient-item/recipient-item.component.html","./src/app/components/common/drop-down/drop-down-menu-item-templates/reference-item/reference-item.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/reference-item/reference-item.component.html","./src/app/components/common/drop-down/drop-down-menu-item-templates/reference-multi-item/reference-multi-item.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/reference-multi-item/reference-multi-item.component.html","./src/app/components/common/drop-down/drop-down-menu-item-templates/rules-destination-set-item/rules-destination-set-item.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/rules-destination-set-item/rules-destination-set-item.component.html","./src/app/components/common/drop-down/drop-down-menu-item-templates/rules-outcome-item/rules-outcome-item.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/rules-outcome-item/rules-outcome-item.component.html","./src/app/components/common/drop-down/drop-down-menu-item-templates/simple-expression-operator-item/simple-expression-operator-item.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/simple-expression-operator-item/simple-expression-operator-item.component.html","./src/app/components/common/drop-down/drop-down-menu-item-templates/smart-field-smo-filter-item/smart-field-smo-filter-item.component.ts","./src/app/components/common/drop-down/drop-down-menu-item-templates/smart-field-smo-filter-item/smart-field-smo-filter-item.component.html","./src/app/components/common/drop-down/drop-down-menu-item/drop-down-menu-item.component.ts","./src/app/components/common/drop-down/drop-down-menu-item/drop-down-menu-item.component.html","./src/app/components/common/drop-down/drop-down-menu/drop-down-menu.component.ts","./src/app/components/common/drop-down/drop-down-menu/drop-down-menu.component.html","./src/app/components/common/drop-down/drop-down.component.ts","./src/app/components/common/drop-down/drop-down.component.html","./src/app/components/common/email/email.component.ts","./src/app/components/common/email/email.component.html","./src/app/components/common/email/templates/body-template/body-template.component.ts","./src/app/components/common/email/templates/body-template/body-template.component.html","./src/app/components/common/email/templates/email-part-selector/email-part-selector.component.ts","./src/app/components/common/email/templates/email-part-selector/email-part-selector.component.html","./src/app/components/common/email/templates/recipient-icon-template/recipient-icon-template.component.ts","./src/app/components/common/email/templates/recipient-icon-template/recipient-icon-template.component.html","./src/app/components/common/email/templates/recipient-picker/recipient-picker.component.ts","./src/app/components/common/email/templates/recipient-picker/recipient-picker.component.html","./src/app/components/common/filter-control/filter-control.component.ts","./src/app/components/common/filter-control/filter-control.component.html","./src/app/components/common/grid/grid.component.ts","./src/app/components/common/grid/grid.component.html","./src/app/components/common/help-link/help-link/help-link.component.ts","./src/app/components/common/info-popup/info-popup-template.ts","./src/app/components/common/info-popup/info-popup.component.ts","./src/app/components/common/info-popup/info-popup.component.html","./src/app/components/common/input/input.component.ts","./src/app/components/common/input/input.component.html","./src/app/components/common/list-item/icon-template/icon-template.component.ts","./src/app/components/common/list-item/icon-template/icon-template.component.html","./src/app/components/common/list-item/list-item.component.ts","./src/app/components/common/list-item/list-item.component.html","./src/app/components/common/list-options/list-options.component.ts","./src/app/components/common/list-options/list-options.component.html","./src/app/components/common/output-mapper/output-mapper.component.ts","./src/app/components/common/output-mapper/output-mapper.component.html","./src/app/components/common/property-mapper/property-mapper.component.ts","./src/app/components/common/property-mapper/property-mapper.component.html","./src/app/components/common/reminder-control/reminder-control.component.ts","./src/app/components/common/reminder-control/reminder-control.component.html","./src/app/components/common/save-reference/save-reference.component.ts","./src/app/components/common/save-reference/save-reference.component.html","./src/app/components/common/scrollbar/scrollbar.component.ts","./src/app/components/common/scrollbar/scrollbar.component.html","./src/app/components/common/text-area/text-area.component.ts","./src/app/components/common/text-area/text-area.component.html","./src/app/components/common/text-box/text-box.component.ts","./src/app/components/common/text-box/text-box.component.html","./src/app/components/common/time-span/time-span.component.ts","./src/app/components/common/time-span/time-span.component.html","./src/app/components/common/toggle-switch/toggle-switch.component.ts","./src/app/components/components.module.ts","./src/app/components/config-panel/plugins/base/plugin-base/plugin-base.component.ts","./src/app/components/config-panel/plugins/base/rule-plugin-base/rule-plugin-base.component.ts","./src/app/components/config-panel/plugins/plugin-wizards/basic-steps/send-email-step/send-email-step.component.ts","./src/app/components/config-panel/plugins/plugin-wizards/basic-steps/send-email-step/send-email-step.component.html","./src/app/components/config-panel/plugins/plugin-wizards/basic-steps/set-folio-step/set-folio-step.component.ts","./src/app/components/config-panel/plugins/plugin-wizards/basic-steps/set-folio-step/set-folio-step.component.html","./src/app/components/config-panel/plugins/plugin-wizards/basic-steps/task-step/task-notification/task-notification.component.ts","./src/app/components/config-panel/plugins/plugin-wizards/basic-steps/task-step/task-notification/task-notification.component.html","./src/app/components/config-panel/plugins/plugin-wizards/custom-wizards/set-data-fields-wizard/set-data-fields-wizard.component.ts","./src/app/components/config-panel/plugins/plugin-wizards/custom-wizards/set-data-fields-wizard/set-data-fields-wizard.component.html","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/decision-step/decision-step-footer/decision-step-footer.component.ts","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/decision-step/decision-step-footer/decision-step-footer.component.html","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/decision-step/decision-step.component.ts","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/decision-step/decision-step.component.html","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/end-step/end-step.component.ts","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/end-step/end-step.component.html","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/merge-step/merge-step.component.ts","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/merge-step/merge-step.component.html","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/split-step/split-step.component.ts","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/split-step/split-step.component.html","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/start-step/process-settings-tab/process-settings-tab.component.ts","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/start-step/process-settings-tab/process-settings-tab.component.html","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/start-step/start-step.component.ts","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/start-step/start-step.component.html","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/timer-step/timer-step.component.ts","./src/app/components/config-panel/plugins/plugin-wizards/logic-steps/timer-step/timer-step.component.html","./src/app/components/config-panel/plugins/tabs/activity-settings/activity-settings.component.ts","./src/app/components/config-panel/plugins/tabs/activity-settings/activity-settings.component.html","./src/app/components/data-field-mapper/data-field-mapper.component.ts","./src/app/components/error-bar/error-bar-console/error-bar-console.component.ts","./src/app/components/error-bar/error-bar-console/error-bar-console.component.html","./src/app/components/error-bar/error-bar-notifier/error-bar-notifier.component.ts","./src/app/components/error-bar/error-bar-notifier/error-bar-notifier.component.html","./src/app/components/error-bar/error-bar.component.ts","./src/app/components/error-bar/error-bar.component.html","./src/app/components/item-references/item-references.component.ts","./src/app/components/item-references/item-references.component.html","./src/app/components/popup/action-popup/action-popup.component.ts","./src/app/components/popup/action-popup/action-popup.component.html","./src/app/components/popup/category-dialog/category-dialog.component.ts","./src/app/components/popup/category-dialog/category-dialog.component.html","./src/app/components/popup/choose-create-change-outcome/choose-create-change-outcome.component.ts","./src/app/components/popup/choose-create-change-outcome/choose-create-change-outcome.component.html","./src/app/components/popup/delete-process/delete-process.component.ts","./src/app/components/popup/delete-process/delete-process.component.html","./src/app/components/popup/hierarchy-dialog/hierarchy-dialog.component.ts","./src/app/components/popup/hierarchy-dialog/hierarchy-dialog.component.html","./src/app/components/popup/new-data-field/data-field-popup-header/data-field-popup-header.component.ts","./src/app/components/popup/new-data-field/data-field-popup-header/data-field-popup-header.component.html","./src/app/components/popup/new-data-field/new-data-field.component.ts","./src/app/components/popup/new-data-field/new-data-field.component.html","./src/app/components/popup/popup-states/popup-states.component.ts","./src/app/components/popup/popup-states/popup-states.component.html","./src/app/components/popup/popup.component.ts","./src/app/components/popup/popup.component.html","./src/app/components/popup/save-smart-field-choose-dialog/save-smart-field-choose-dialog.component.ts","./src/app/components/popup/save-smart-field-choose-dialog/save-smart-field-choose-dialog.component.html","./src/app/components/popup/user-dialog/user-dialog.component.ts","./src/app/components/popup/user-dialog/user-dialog.component.html","./src/app/components/ribbon/ribbon.component.ts","./src/app/components/ribbon/ribbon.component.html","./src/app/components/ribbon/tab-file/tab-file.component.ts","./src/app/components/ribbon/tab-file/tab-file.component.html","./src/app/components/ribbon/tab-file/tab-item-info/tab-item-info.component.ts","./src/app/components/ribbon/tab-file/tab-item-info/tab-item-info.component.html","./src/app/components/ribbon/tab-file/tab-item-options/tab-item-options.component.ts","./src/app/components/ribbon/tab-file/tab-item-options/tab-item-options.component.html","./src/app/components/ribbon/tab-home/tab-home.component.ts","./src/app/components/ribbon/tab-home/tab-home.component.html","./src/app/components/ribbon/tab-view/tab-view.component.ts","./src/app/components/ribbon/tab-view/tab-view.component.html","./src/app/components/rules-designer/associated-panels/empty-rule-designer/empty-rule-designer.component.ts","./src/app/components/rules-designer/associated-panels/empty-rule-designer/empty-rule-designer.component.html","./src/app/components/rules-designer/associated-panels/no-context-panel/no-context-panel.component.ts","./src/app/components/rules-designer/associated-panels/no-context-panel/no-context-panel.component.html","./src/app/components/rules-designer/associated-panels/panel-gutter/panel-gutter.component.ts","./src/app/components/rules-designer/associated-panels/panel-gutter/panel-gutter.component.html","./src/app/components/rules-designer/base/expression-base/expression-base.component.ts","./src/app/components/rules-designer/base/rule-base/rule-base.component.ts","./src/app/components/rules-designer/base/rule-designer-item-base/rule-designer-item-base.component.ts","./src/app/components/rules-designer/base/rule-designer-selection-base/rule-designer-selection-base.component.ts","./src/app/components/rules-designer/base/statement-base/statement-base.component.ts","./src/app/components/rules-designer/expressions/end-point/end-point.component.ts","./src/app/components/rules-designer/expressions/end-point/end-point.component.html","./src/app/components/rules-designer/expressions/filter-expression/filter-expression.component.ts","./src/app/components/rules-designer/expressions/filter-expression/filter-expression.component.html","./src/app/components/rules-designer/expressions/group-boolean-operator-expression/group-boolean-operator-expression.component.ts","./src/app/components/rules-designer/expressions/group-boolean-operator-expression/group-boolean-operator-expression.component.html","./src/app/components/rules-designer/expressions/group-expression/group-expression.component.ts","./src/app/components/rules-designer/expressions/group-expression/group-expression.component.html","./src/app/components/rules-designer/expressions/merge-expression/merge-expression.component.ts","./src/app/components/rules-designer/expressions/merge-expression/merge-expression.component.html","./src/app/components/rules-designer/expressions/simple-expression/simple-expression.component.ts","./src/app/components/rules-designer/expressions/simple-expression/simple-expression.component.html","./src/app/components/rules-designer/expressions/task-expression/task-expression.component.ts","./src/app/components/rules-designer/expressions/task-expression/task-expression.component.html","./src/app/components/rules-designer/expressions/this-response-expression/this-response-expression.component.ts","./src/app/components/rules-designer/expressions/this-response-expression/this-response-expression.component.html","./src/app/components/rules-designer/expressions/voting-response-expression/voting-response-expression.component.ts","./src/app/components/rules-designer/expressions/voting-response-expression/voting-response-expression.component.html","./src/app/components/rules-designer/rule-toolbox/rule-toolbox.component.ts","./src/app/components/rules-designer/rule-toolbox/rule-toolbox.component.html","./src/app/components/rules-designer/rules-designer.component.ts","./src/app/components/rules-designer/rules-designer.component.html","./src/app/components/rules-designer/statements/destination-set/destination-set.component.ts","./src/app/components/rules-designer/statements/destination-set/destination-set.component.html","./src/app/components/rules-designer/statements/if-then-else-statement/if-then-else-statement.component.ts","./src/app/components/rules-designer/statements/if-then-else-statement/if-then-else-statement.component.html","./src/app/components/rules-designer/statements/outcome-statement/outcome-statement.component.ts","./src/app/components/rules-designer/statements/outcome-statement/outcome-statement.component.html","./src/app/components/rules-designer/statements/return-statement/return-statement.component.ts","./src/app/components/rules-designer/statements/return-statement/return-statement.component.html","./src/app/components/rules-designer/statements/rule-statement-block/rule-statement-block.component.ts","./src/app/components/rules-designer/statements/rule-statement-block/rule-statement-block.component.html","./src/app/components/rules-designer/toolbox-trash/toolbox-trash.component.ts","./src/app/components/rules-designer/toolbox-trash/toolbox-trash.component.html","./src/app/components/smart-fields/smart-field-composer-filter/smart-field-composer-filter.component.ts","./src/app/components/smart-fields/smart-field-composer-filter/smart-field-composer-filter.component.html","./src/app/components/smart-fields/smart-field-composer-plugin/smart-field-composer-plugin.component.ts","./src/app/components/smart-fields/smart-field-composer-plugin/smart-field-composer-plugin.component.html","./src/app/components/smart-fields/smart-field-composer/smart-field-composer.component.ts","./src/app/components/smart-fields/smart-field-composer/smart-field-composer.component.html","./src/app/components/smart-fields/smart-field-container/smart-field-container.component.ts","./src/app/components/smart-fields/smart-field-container/smart-field-container.component.html","./src/app/components/spinner/spinner.component.ts","./src/app/components/spinner/spinner.component.html","./src/app/components/stack-panel/stack-panel.component.ts","./src/app/components/stack-panel/stack-panel.component.html","./src/app/components/tile-select/tile-select.component.ts","./src/app/components/tile-select/tile-select.component.html","./src/app/components/toolbox/toolbox.component.ts","./src/app/components/toolbox/toolbox.component.html","./src/app/components/wizard-popup/event-platform/data-mapper/data-mapper.component.ts","./src/app/components/wizard-popup/event-platform/data-mapper/data-mapper.component.html","./src/app/components/wizard-popup/event-platform/event-platform-add/event-platform-add.component.ts","./src/app/components/wizard-popup/event-platform/event-platform-add/event-platform-add.component.html","./src/app/components/wizard-popup/event-platform/event-platform-remove/event-platform-remove.component.ts","./src/app/components/wizard-popup/event-platform/event-platform-remove/event-platform-remove.component.html","./src/app/components/wizard-popup/event-platform/event-platform-result/event-platform-result.component.ts","./src/app/components/wizard-popup/event-platform/event-platform-result/event-platform-result.component.html","./src/app/components/wizard-popup/page/page.component.ts","./src/app/components/wizard-popup/sharepoint/create-references/create-references.component.ts","./src/app/components/wizard-popup/sharepoint/create-references/create-references.component.html","./src/app/components/wizard-popup/sharepoint/remove/remove-integration.component.ts","./src/app/components/wizard-popup/sharepoint/remove/remove-integration.component.html","./src/app/components/wizard-popup/sharepoint/start-workflow-events/start-workflow-events.component.ts","./src/app/components/wizard-popup/sharepoint/start-workflow-events/start-workflow-events.component.html","./src/app/components/wizard-popup/sharepoint/summary/summary.component.ts","./src/app/components/wizard-popup/sharepoint/summary/summary.component.html","./src/app/components/wizard-popup/smartforms/configure-form-rule/configure-form-rule.component.ts","./src/app/components/wizard-popup/smartforms/configure-form-rule/configure-form-rule.component.html","./src/app/components/wizard-popup/smartforms/configure-start-rule/configure-start-rule.component.ts","./src/app/components/wizard-popup/smartforms/configure-start-rule/configure-start-rule.component.html","./src/app/components/wizard-popup/smartforms/configure-state/configure-state.component.ts","./src/app/components/wizard-popup/smartforms/configure-state/configure-state.component.html","./src/app/components/wizard-popup/smartforms/create-smart-fields/create-smart-fields.component.ts","./src/app/components/wizard-popup/smartforms/create-smart-fields/create-smart-fields.component.html","./src/app/components/wizard-popup/smartforms/remove-integration/remove-integration.component.ts","./src/app/components/wizard-popup/smartforms/remove-integration/remove-integration.component.html","./src/app/components/wizard-popup/smartforms/smart-forms-rules/smart-forms-rules.component.ts","./src/app/components/wizard-popup/smartforms/smart-forms-rules/smart-forms-rules.component.html","./src/app/components/wizard-popup/smartforms/submit-task-action-settings/submit-task-action-settings.component.ts","./src/app/components/wizard-popup/smartforms/submit-task-action-settings/submit-task-action-settings.component.html","./src/app/components/wizard-popup/smartforms/summary-result/summary-result.component.ts","./src/app/components/wizard-popup/smartforms/summary-result/summary-result.component.html","./src/app/components/wizard-popup/smartforms/summary/smart-forms-summary.component.ts","./src/app/components/wizard-popup/smartforms/summary/smart-forms-summary.component.html","./src/app/components/wizard-popup/wizard-popup-host/wizard-popup-host.component.ts","./src/app/components/wizard-popup/wizard-popup-host/wizard-popup-host.component.html","./src/app/components/wizard-popup/workflow-integration-forms-popup/workflow-integration-forms-popup.component.ts","./src/app/components/wizard-popup/workflow-integration-forms-popup/workflow-integration-forms-popup.component.html","./src/app/custom-providers/zoneless-event-plugin-service.ts","./src/app/directives/context-menu/context-menu.directive.ts","./src/app/directives/directives.module.ts","./src/app/directives/draggable/draggable.directive.ts","./src/app/directives/droppable/droppable.directive.ts","./src/app/directives/tab-host/tab-host.directive.ts","./src/app/directives/tab-index/tab-index.directive.ts","./src/app/directives/tooltip-basic/tooltip-basic.directive.ts","./src/app/directives/tooltip-simple/tooltip-simple.directive.ts","./src/app/legacy-service-factories/drag-drop-service-factory.ts","./src/app/legacy-service-factories/resource-service-factory.ts","./src/app/legacy-service-factories/rule-plugin-service-factory.ts","./src/app/loader.ts","./src/app/pipes/pipes.module.ts","./src/app/pipes/safe/safe.pipe.ts","./src/app/services/cache/cache.service.ts","./src/app/services/canvas/canvas-service-factory.ts","./src/app/services/clipboard/clipboard-service-factory.ts","./src/app/services/command/command-service-factory.ts","./src/app/services/config-panel/config-panel-service-factory.ts","./src/app/services/configuration/configuration-service.ts","./src/app/services/context-provider/context-provider-service-factory.ts","./src/app/services/data/data-service-factory.ts","./src/app/services/designer/designer-service-factory.ts","./src/app/services/drag-drop/drag-drop.service.ts","./src/app/services/drop-down/drop-down.service.ts","./src/app/services/environment/environment-service-factory.ts","./src/app/services/event-notifier/event-notifier.service.ts","./src/app/services/external-reference/external-reference.service.ts","./src/app/services/filter-panel/filter-panel-service-factory.ts","./src/app/services/help/help-service-factory.ts","./src/app/services/identity/identity.service.ts","./src/app/services/item-provider/item-provider-service-factory.ts","./src/app/services/notification/notification-service-factory.ts","./src/app/services/object-model/object-model-service-factory.ts","./src/app/services/plugin/plugin-service-factory.ts","./src/app/services/plugins/data-type-resolver/data-type-resolver.service.ts","./src/app/services/plugins/item-references/item-references.service.ts","./src/app/services/plugins/share-point/share-point.service.ts","./src/app/services/plugins/smart-forms-integration/smart-forms-integration.service.ts","./src/app/services/popup/legacy-popup-service-factory.ts","./src/app/services/popup/popup.service.ts","./src/app/services/process/process.service.ts","./src/app/services/progress-bar/progress-bar-service-factory.ts","./src/app/services/recents/recents-service-factory.ts","./src/app/services/redirect/redirect-service-factory.ts","./src/app/services/resource/resource.service.ts","./src/app/services/ribbon-bar/ribbon-bar-service-factory.ts","./src/app/services/rich-edit/rich-edit.service.ts","./src/app/services/ruleplugin/rule-plugin-service.ts","./src/app/services/selection/selection-service-factory.ts","./src/app/services/smart-field-composer/smart-field-composer-service-factory.ts","./src/app/services/smart-field-plugin/smart-field-plugin-service-factory.ts","./src/app/services/smart-object/smart-object.service.ts","./src/app/services/tool-box/tool-box-service-factory.ts","./src/app/services/undo-redo/undo-redo-service-factory.ts","./src/app/services/user-options/user-options-service-factory.ts","./src/app/services/validation/validation-service-factory.ts","./src/app/services/workflow-integration/workflow-integration.service.ts","./src/app/services/workflow/workflow.service.ts","./src/app/shared/constants/components.ts","./src/app/shared/constants/data-types.ts","./src/app/shared/constants/email.ts","./src/app/shared/constants/events.ts","./src/app/shared/constants/general.ts","./src/app/shared/constants/list-item.ts","./src/app/shared/constants/plugins.ts","./src/app/shared/constants/rules.ts","./src/app/shared/constants/scroll-bar.ts","./src/app/shared/constants/smart-objects.ts","./src/app/shared/constants/wizard-popup.ts","./src/app/shared/control-helpers/states.ts","./src/app/shared/deferred.ts","./src/app/shared/enums/activities/activity-priority-types.ts","./src/app/shared/enums/activities/end-config.ts","./src/app/shared/enums/activities/merge-logic-types.ts","./src/app/shared/enums/activities/step-template-names.ts","./src/app/shared/enums/choose-control/choose-control-templates.ts","./src/app/shared/enums/choose-control/choose-control-types.ts","./src/app/shared/enums/deadline/deadline-options.ts","./src/app/shared/enums/drop-down/drop-down-menu-alignment.ts","./src/app/shared/enums/drop-down/drop-down-menu-item-templates.ts","./src/app/shared/enums/drop-down/drop-down-triangle-position.ts","./src/app/shared/enums/email/email-parts.ts","./src/app/shared/enums/email/priority-types.ts","./src/app/shared/enums/event-platform/event-platform-state.ts","./src/app/shared/enums/external-references/external-references.ts","./src/app/shared/enums/filter-control/filter-control-states.ts","./src/app/shared/enums/grid/column-types.ts","./src/app/shared/enums/integration/integration-action-commands.ts","./src/app/shared/enums/integration/integration-type.ts","./src/app/shared/enums/integration/share-point-events-registered-status.ts","./src/app/shared/enums/integration/sharepoint-asset-type.ts","./src/app/shared/enums/integration/sharepoint-integration-delete-status.ts","./src/app/shared/enums/integration/start-mode.ts","./src/app/shared/enums/list-item/list-item-drop-down-type.ts","./src/app/shared/enums/list/filter.ts","./src/app/shared/enums/list/order.ts","./src/app/shared/enums/model/error-severity.ts","./src/app/shared/enums/model/event-types.ts","./src/app/shared/enums/model/toastr-types.ts","./src/app/shared/enums/model/validation-types.ts","./src/app/shared/enums/model/workflow/core/configured-smart-fields/configured-smart-field-types.ts","./src/app/shared/enums/model/workflow/item-provider/smart-object-item-types.ts","./src/app/shared/enums/model/workflow/item-provider/workflow-context-browser-item-types.ts","./src/app/shared/enums/model/workflow/process/data-field-types.ts","./src/app/shared/enums/model/workflow/process/decision-option-types.ts","./src/app/shared/enums/plugin-wizard/general-item-types.ts","./src/app/shared/enums/plugin-wizard/popup-button-style-type.ts","./src/app/shared/enums/plugin-wizard/popup-state.ts","./src/app/shared/enums/popup/action-popup-template.ts","./src/app/shared/enums/popup/popup-config-states.ts","./src/app/shared/enums/popup/popup-header-template.ts","./src/app/shared/enums/popup/popup-template.ts","./src/app/shared/enums/positioning/positioning.ts","./src/app/shared/enums/process/decision-option-type-start-rule.ts","./src/app/shared/enums/property-mapper/display-modes.ts","./src/app/shared/enums/references/reference-types.ts","./src/app/shared/enums/rules/complex-operator.ts","./src/app/shared/enums/rules/outcome-item-names.ts","./src/app/shared/enums/rules/outcome-type.ts","./src/app/shared/enums/rules/recipient-types.ts","./src/app/shared/enums/rules/rule-context-handler-names.ts","./src/app/shared/enums/rules/rule-control-states.ts","./src/app/shared/enums/rules/statement-directives.ts","./src/app/shared/enums/rules/voting-left-operand-types.ts","./src/app/shared/enums/scroll-bar/scroll-bar-event-type.ts","./src/app/shared/enums/services/recents/common-contexts.ts","./src/app/shared/enums/smart-field-composer/smart-field-composer.ts","./src/app/shared/enums/text-box/text-box-constraint.ts","./src/app/shared/enums/toolset/message-types.ts","./src/app/shared/enums/user-options/user-options-tip-types.ts","./src/app/shared/models/drag-drop-data.ts","./src/app/shared/utils/date-picker.ts","./src/app/shared/utils/external-references.ts","./src/app/shared/utils/general.ts","./src/app/shared/utils/httpInterceptor.ts","./src/app/shared/utils/name-helper.ts","./src/environments/environment.ts","./src/main.ts","./src/testing/mock-legacy-services/process/mock-legacy-process-service.ts","./src/testing/mock-legacy-services/resource/mock-legacy-resource.service.ts","./src/testing/mock-services/canvas-service.ts","./src/testing/mock-services/clipboard-service.ts","./src/testing/mock-services/command-service.ts","./src/testing/mock-services/config-panel-service.ts","./src/testing/mock-services/context-provider-service.ts","./src/testing/mock-services/data-service.ts","./src/testing/mock-services/designer-service.ts","./src/testing/mock-services/drag-drop-service.ts","./src/testing/mock-services/environment-service.ts","./src/testing/mock-services/filter-panel-service.ts","./src/testing/mock-services/help-service.ts","./src/testing/mock-services/item-provider-service.ts","./src/testing/mock-services/notification-service.ts","./src/testing/mock-services/object-model-service.ts","./src/testing/mock-services/plugin-service.ts","./src/testing/mock-services/popup-service.ts","./src/testing/mock-services/progress-bar-service.ts","./src/testing/mock-services/recents-service.ts","./src/testing/mock-services/redirect-service.ts","./src/testing/mock-services/ribbon-bar-service.ts","./src/testing/mock-services/rule-plugin-service.ts","./src/testing/mock-services/selection-service.ts","./src/testing/mock-services/smart-field-composer-service.ts","./src/testing/mock-services/smart-field-plugin-service.ts","./src/testing/mock-services/tool-box-service.ts","./src/testing/mock-services/undo-redo-service.ts","./src/testing/mock-services/user-options-service.ts","./src/testing/mock-services/validation-service.ts","./src/testing/utilities/EnsureNamespaces.ts","./src/testing/utilities/mock-process.ts","./src/types/models/reminder-control/deadline-action-type.ts","./src/types/models/reminder-control/reminder-action-type.ts","./src/types/objectModel/workflow/process/k2Process/process-priority-types.ts"],"sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(() => {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = () => ([]);\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 8255;\nmodule.exports = webpackEmptyAsyncContext;","import { downgradeComponent, downgradeInjectable } from '@angular/upgrade/static';\r\nimport { TextboxComponent } from './components/common/text-box/text-box.component';\r\nimport { ErrorBarComponent } from './components/error-bar/error-bar.component';\r\nimport { RibbonComponent } from './components/ribbon/ribbon.component';\r\nimport { ToolboxComponent } from './components/toolbox/toolbox.component';\r\nimport { CreateSmartFieldsComponent } from './components/wizard-popup/smartforms/create-smart-fields/create-smart-fields.component';\r\nimport { PanelGutterComponent } from './components/rules-designer/associated-panels/panel-gutter/panel-gutter.component';\r\nimport { NoContextPanelComponent } from './components/rules-designer/associated-panels/no-context-panel/no-context-panel.component';\r\nimport { SubmitTaskActionSettingsComponent } from './components/wizard-popup/smartforms/submit-task-action-settings/submit-task-action-settings.component';\r\nimport { RulesDesignerComponent } from './components/rules-designer/rules-designer.component';\r\nimport { GroupExpressionComponent } from './components/rules-designer/expressions/group-expression/group-expression.component';\r\nimport { ConfigureStartRuleComponent } from './components/wizard-popup/smartforms/configure-start-rule/configure-start-rule.component';\r\nimport { NewDataFieldComponent } from './components/popup/new-data-field/new-data-field.component';\r\nimport { DataFieldPopupHeaderComponent } from './components/popup/new-data-field/data-field-popup-header/data-field-popup-header.component';\r\nimport { SmartFormsSummaryComponent } from './components/wizard-popup/smartforms/summary/smart-forms-summary.component';\r\nimport { SummaryResultComponent } from './components/wizard-popup/smartforms/summary-result/summary-result.component';\r\nimport { EndStepComponent } from './components/config-panel/plugins/plugin-wizards/logic-steps/end-step/end-step.component';\r\nimport { ConfigureFormRuleComponent } from './components/wizard-popup/smartforms/configure-form-rule/configure-form-rule.component';\r\nimport { SmartFormsConfigureStateComponent } from './components/wizard-popup/smartforms/configure-state/configure-state.component';\r\nimport { SmartFormsRemoveIntegrationComponent } from './components/wizard-popup/smartforms/remove-integration/remove-integration.component';\r\nimport { EventPlatFormAddComponent } from './components/wizard-popup/event-platform/event-platform-add/event-platform-add.component';\r\nimport { EventPlatformRemoveComponent } from './components/wizard-popup/event-platform/event-platform-remove/event-platform-remove.component';\r\nimport { EventPlatformResultComponent } from './components/wizard-popup/event-platform/event-platform-result/event-platform-result.component';\r\nimport { MergeStepComponent } from './components/config-panel/plugins/plugin-wizards/logic-steps/merge-step/merge-step.component';\r\nimport { SplitStepComponent } from './components/config-panel/plugins/plugin-wizards/logic-steps/split-step/split-step.component';\r\nimport { TimeSpanComponent } from './components/common/time-span/time-span.component';\r\nimport { SharepointRemoveIntegrationComponent } from './components/wizard-popup/sharepoint/remove/remove-integration.component';\r\nimport { SharePointSummaryComponent } from './components/wizard-popup/sharepoint/summary/summary.component';\r\nimport { PopupComponent } from './components/popup/popup.component';\r\nimport { CreateReferencesComponent } from './components/wizard-popup/sharepoint/create-references/create-references.component';\r\nimport { TileSelectComponent } from './components/tile-select/tile-select.component';\r\nimport { StartWorkflowEventsComponent } from './components/wizard-popup/sharepoint/start-workflow-events/start-workflow-events.component';\r\nimport { GridComponent } from './components/common/grid/grid.component';\r\nimport { DecisionStepComponent } from './components/config-panel/plugins/plugin-wizards/logic-steps/decision-step/decision-step.component';\r\nimport { DecisionStepFooterComponent } from './components/config-panel/plugins/plugin-wizards/logic-steps/decision-step/decision-step-footer/decision-step-footer.component';\r\nimport { TimerStepComponent } from './components/config-panel/plugins/plugin-wizards/logic-steps/timer-step/timer-step.component';\r\nimport { StartStepComponent } from './components/config-panel/plugins/plugin-wizards/logic-steps/start-step/start-step.component';\r\nimport { OutputMapperComponent } from './components/common/output-mapper/output-mapper.component';\r\nimport { WorkflowIntegrationFormsPopupComponent } from './components/wizard-popup/workflow-integration-forms-popup/workflow-integration-forms-popup.component';\r\nimport { NgZone } from '@angular/core';\r\nimport { EventNotifierService } from './services/event-notifier/event-notifier.service';\r\nimport { ReminderControlComponent } from './components/common/reminder-control/reminder-control.component';\r\nimport { SaveReferenceComponent } from './components/common/save-reference/save-reference.component';\r\nimport { SendEmailStepComponent } from './components/config-panel/plugins/plugin-wizards/basic-steps/send-email-step/send-email-step.component';\r\nimport { SetFolioStepComponent } from './components/config-panel/plugins/plugin-wizards/basic-steps/set-folio-step/set-folio-step.component';\r\nimport { SetDataFieldsWizardComponent } from './components/config-panel/plugins/plugin-wizards/custom-wizards/set-data-fields-wizard/set-data-fields-wizard.component';\r\nimport { ProcessSettingsTabComponent } from './components/config-panel/plugins/plugin-wizards/logic-steps/start-step/process-settings-tab/process-settings-tab.component';\r\nimport { ListOptionsComponent } from './components/common/list-options/list-options.component';\r\nimport { PropertyMapperComponent } from './components/common/property-mapper/property-mapper.component';\r\nimport { ActivitySettingsComponent } from './components/config-panel/plugins/tabs/activity-settings/activity-settings.component';\r\nimport { TaskNotificationComponent } from './components/config-panel/plugins/plugin-wizards/basic-steps/task-step/task-notification/task-notification.component';\r\n\r\nexport function downgradeComponents() {\r\n    const appName = document.location.pathname.match(/(viewflow.aspx)/i)\r\n        ? 'ViewflowApp'\r\n        : 'K2DesignerApp';\r\n\r\n    (sourceCode.k2Designer.core[appName] as angular.IModule)\r\n        .factory('angularZone', downgradeInjectable(NgZone))\r\n        .factory('eventNotifierService', downgradeInjectable(EventNotifierService))\r\n        .directive(\r\n            'k2Toolbox',\r\n            downgradeComponent({\r\n                component: ToolboxComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2Ribbon',\r\n            downgradeComponent({\r\n                component: RibbonComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2ErrorBar',\r\n            downgradeComponent({\r\n                component: ErrorBarComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2TextBox',\r\n            downgradeComponent({\r\n                component: TextboxComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2CreateSmartFields',\r\n            downgradeComponent({\r\n                component: CreateSmartFieldsComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2GroupExpression',\r\n            downgradeComponent({\r\n                component: GroupExpressionComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2PanelGutter',\r\n            downgradeComponent({\r\n                component: PanelGutterComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2NoContextPanel',\r\n            downgradeComponent({\r\n                component: NoContextPanelComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2RulesDesigner',\r\n            downgradeComponent({\r\n                component: RulesDesignerComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2SubmitTaskActionSettings',\r\n            downgradeComponent({\r\n                component: SubmitTaskActionSettingsComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2NewDataField',\r\n            downgradeComponent({\r\n                component: NewDataFieldComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2SmartformsConfigureState',\r\n            downgradeComponent({\r\n                component: SmartFormsConfigureStateComponent\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2DataFieldPopupHeader',\r\n            downgradeComponent({\r\n                component: DataFieldPopupHeaderComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2ConfigureFormRule',\r\n            downgradeComponent({\r\n                component: ConfigureFormRuleComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2ConfigureStartRule',\r\n            downgradeComponent({\r\n                component: ConfigureStartRuleComponent\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2SmartFormsSummary',\r\n            downgradeComponent({\r\n                component: SmartFormsSummaryComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2SummaryResult',\r\n            downgradeComponent({\r\n                component: SummaryResultComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2SfRemoveIntegration',\r\n            downgradeComponent({\r\n                component: SmartFormsRemoveIntegrationComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2EndStep',\r\n            downgradeComponent({\r\n                component: EndStepComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2TimeSpan',\r\n            downgradeComponent({\r\n                component: TimeSpanComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2EventPlatformAdd',\r\n            downgradeComponent({\r\n                component: EventPlatFormAddComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2EventPlatformRemove',\r\n            downgradeComponent({\r\n                component: EventPlatformRemoveComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2EventPlatformResult',\r\n            downgradeComponent({\r\n                component: EventPlatformResultComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2Popup',\r\n            downgradeComponent({\r\n                component: PopupComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2MergeStep',\r\n            downgradeComponent({\r\n                component: MergeStepComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2SplitStep',\r\n            downgradeComponent({\r\n                component: SplitStepComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2SpRemoveIntegration',\r\n            downgradeComponent({\r\n                component: SharepointRemoveIntegrationComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2SpSummary',\r\n            downgradeComponent({\r\n                component: SharePointSummaryComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2CreateReferences',\r\n            downgradeComponent({\r\n                component: CreateReferencesComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2StartWorkflowEvents',\r\n            downgradeComponent({\r\n                component: StartWorkflowEventsComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2TileSelect',\r\n            downgradeComponent({\r\n                component: TileSelectComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            //Remove downgrade until Change Review passed\r\n            'k2Grid',\r\n            downgradeComponent({\r\n                component: GridComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2DecisionStep',\r\n            downgradeComponent({\r\n                component: DecisionStepComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2DecisionStepFooter',\r\n            downgradeComponent({\r\n                component: DecisionStepFooterComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2StartStep',\r\n            downgradeComponent({\r\n                component: StartStepComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2WorkflowIntegrationFormsPopup',\r\n            downgradeComponent({\r\n                component: WorkflowIntegrationFormsPopupComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2OutputMapper',\r\n            downgradeComponent({\r\n                component: OutputMapperComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2TimerStep',\r\n            downgradeComponent({\r\n                component: TimerStepComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2ReminderControl',\r\n            downgradeComponent({\r\n                component: ReminderControlComponent,\r\n            }) as angular.IDirectiveFactory\r\n        ).directive(\r\n            'k2SendEmailStep',\r\n            downgradeComponent({\r\n                component: SendEmailStepComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2SaveReference',\r\n            downgradeComponent({\r\n                component: SaveReferenceComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2SetFolioStep',\r\n            downgradeComponent({\r\n                component: SetFolioStepComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2SetDataFieldsWizard',\r\n            downgradeComponent({\r\n                component: SetDataFieldsWizardComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2ProcessSettingsTab',\r\n            downgradeComponent({\r\n                component: ProcessSettingsTabComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2ListOptions',\r\n            downgradeComponent({\r\n                component: ListOptionsComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2PropertyMapperV2',\r\n            downgradeComponent({\r\n                component: PropertyMapperComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2ActivitySettings',\r\n            downgradeComponent({\r\n                component: ActivitySettingsComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n        .directive(\r\n            'k2TaskNotification',\r\n            downgradeComponent({\r\n                component: TaskNotificationComponent,\r\n            }) as angular.IDirectiveFactory\r\n        )\r\n    ;\r\n}\r\n","export const scopeServiceProvider = {\r\n    provide: '$scope',\r\n    useFactory: ($injector: any) => $injector.get('$scope'),\r\n    deps: ['$injector'],\r\n};\r\n\r\nexport const rootScopeServiceProvider = {\r\n    provide: '$rootScope',\r\n    useFactory: ($injector: any) => $injector.get('$rootScope'),\r\n    deps: ['$injector'],\r\n};\r\n\r\nexport const stateServiceProvider = {\r\n    provide: '$state',\r\n    useFactory: ($injector: any) => $injector.get('$state'),\r\n    deps: ['$injector'],\r\n};\r\n\r\nexport const rootElementServiceProvider = {\r\n    provide: '$rootElement',\r\n    useFactory: ($injector: any) => $injector.get('$rootElement'),\r\n    deps: ['$injector'],\r\n};\r\n\r\nexport const sceServiceProvider = {\r\n    provide: '$sce',\r\n    useFactory: ($injector: any) => $injector.get('$sce'),\r\n    deps: ['$injector'],\r\n};\r\n\r\nexport const compileServiceProvider = {\r\n    provide: '$compile',\r\n    useFactory: ($injector: any) => $injector.get('$compile'),\r\n    deps: ['$compile'],\r\n};\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: '',\r\n        loadChildren: () =>\r\n            import('./dev-harness/dev-harness.module').then(\r\n                (m) => m.DevHarnessModule\r\n            ),\r\n    },\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forRoot(routes)],\r\n    exports: [RouterModule],\r\n})\r\nexport class AppRoutingModule {}\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-root',\r\n    templateUrl: './app.component.html',\r\n    styleUrls: ['./app.component.less']\r\n})\r\nexport class AppComponent {\r\n    title = 'WorkflowDesigner';\r\n}\r\n","<h2>WorkflowDesignerUI Project</h2>\r\n<router-outlet></router-outlet>\r\n","import { HttpClientModule } from '@angular/common/http';\r\nimport { ApplicationRef, NgModule } from '@angular/core';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { setAngularJSGlobal, UpgradeModule } from '@angular/upgrade/static';\r\nimport { environment } from 'src/environments/environment';\r\nimport { downgradeComponents } from './ajs.downgrade';\r\nimport {\r\n    rootElementServiceProvider,\r\n    rootScopeServiceProvider,\r\n    sceServiceProvider,\r\n    scopeServiceProvider,\r\n    stateServiceProvider\r\n} from './ajs.upgrade';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { TextboxComponent } from './components/common/text-box/text-box.component';\r\nimport { ComponentsModule } from './components/components.module';\r\nimport { ErrorBarComponent } from './components/error-bar/error-bar.component';\r\nimport { UserDialogComponent } from './components/popup/user-dialog/user-dialog.component';\r\nimport { RibbonComponent } from './components/ribbon/ribbon.component';\r\nimport { GroupBooleanOperatorExpressionComponent } from './components/rules-designer/expressions/group-boolean-operator-expression/group-boolean-operator-expression.component';\r\nimport { ThisResponseExpressionComponent } from './components/rules-designer/expressions/this-response-expression/this-response-expression.component';\r\nimport { ToolboxComponent } from './components/toolbox/toolbox.component';\r\nimport { CreateSmartFieldsComponent } from './components/wizard-popup/smartforms/create-smart-fields/create-smart-fields.component';\r\nimport { DirectivesModule } from './directives/directives.module';\r\nimport { LegacyResourceServiceFactory } from './legacy-service-factories/resource-service-factory';\r\nimport { PipesModule } from './pipes/pipes.module';\r\nimport { CanvasServiceFactory } from './services/canvas/canvas-service-factory';\r\nimport { ClipboardServiceFactory } from './services/clipboard/clipboard-service-factory';\r\nimport { CommandServiceFactory } from './services/command/command-service-factory';\r\nimport { ConfigPanelServiceFactory } from './services/config-panel/config-panel-service-factory';\r\nimport { ContextProviderFactory } from './services/context-provider/context-provider-service-factory';\r\nimport { DataServiceFactory } from './services/data/data-service-factory';\r\nimport { DesignerServiceFactory } from './services/designer/designer-service-factory';\r\nimport { DropDownService } from './services/drop-down/drop-down.service';\r\nimport { EnvironmentServiceFactory } from './services/environment/environment-service-factory';\r\nimport { EventNotifierService } from './services/event-notifier/event-notifier.service';\r\nimport { HelpServiceFactory } from './services/help/help-service-factory';\r\nimport { IdentityService } from './services/identity/identity.service';\r\nimport { ItemProviderServiceFactory } from './services/item-provider/item-provider-service-factory';\r\nimport { NotificationServiceFactory } from './services/notification/notification-service-factory';\r\nimport { ObjectModelServiceFactory } from './services/object-model/object-model-service-factory';\r\nimport { PluginServiceFactory } from './services/plugin/plugin-service-factory';\r\nimport { PluginItemReferencesService } from './services/plugins/item-references/item-references.service';\r\nimport { SmartFormsIntegrationService } from './services/plugins/smart-forms-integration/smart-forms-integration.service';\r\nimport { ProgressBarServiceFactory } from './services/progress-bar/progress-bar-service-factory';\r\nimport { RecentsServiceFactory } from './services/recents/recents-service-factory';\r\nimport { RedirectServiceFactory } from './services/redirect/redirect-service-factory';\r\nimport { ResourceService } from './services/resource/resource.service';\r\nimport { RibbonBarServiceFactory } from './services/ribbon-bar/ribbon-bar-service-factory';\r\nimport { RulePluginService } from './services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceFactory } from './services/selection/selection-service-factory';\r\nimport { SmartFieldComposerServiceFactory } from './services/smart-field-composer/smart-field-composer-service-factory';\r\nimport { SmartFieldPluginServiceFactory } from './services/smart-field-plugin/smart-field-plugin-service-factory';\r\nimport { ToolBoxServiceFactory } from './services/tool-box/tool-box-service-factory';\r\nimport { UndoRedoServiceFactory } from './services/undo-redo/undo-redo-service-factory';\r\nimport { UserOptionsServiceFactory } from './services/user-options/user-options-service-factory';\r\nimport { ValidationServiceFactory } from './services/validation/validation-service-factory';\r\nimport { LegacyRulePluginServiceFactory } from './legacy-service-factories/rule-plugin-service-factory';\r\nimport { LegacyDragDropServiceFactory } from './legacy-service-factories/drag-drop-service-factory';\r\nimport { DragDropService } from './services/drag-drop/drag-drop.service';\r\nimport { FilterPanelServiceFactory } from './services/filter-panel/filter-panel-service-factory';\r\nimport { LegacyPopupServiceFactory } from './services/popup/legacy-popup-service-factory';\r\nimport { PopupService } from './services/popup/popup.service';\r\nimport { ProcessService } from './services/process/process.service';\r\nimport { WorkflowService } from './services/workflow/workflow.service';\r\nimport { ConfigurationService } from './services/configuration/configuration-service';\r\nimport { EVENT_MANAGER_PLUGINS } from '@angular/platform-browser';\r\nimport { ZonelessEventPluginService } from './custom-providers/zoneless-event-plugin-service';\r\n\r\ndeclare global {\r\n    interface Window {\r\n        angular: any;\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    declarations: [AppComponent],\r\n    exports: [],\r\n    imports: [\r\n        AppRoutingModule,\r\n        ComponentsModule,\r\n        DirectivesModule,\r\n        BrowserAnimationsModule,\r\n        PipesModule,\r\n        HttpClientModule,\r\n    ],\r\n    // Put global services here.\r\n    providers: [\r\n        {\r\n            provide: EVENT_MANAGER_PLUGINS,\r\n            useClass: ZonelessEventPluginService,\r\n            multi: true\r\n        },\r\n        scopeServiceProvider,\r\n        rootScopeServiceProvider,\r\n        rootElementServiceProvider,\r\n        sceServiceProvider,\r\n        stateServiceProvider,\r\n        LegacyRulePluginServiceFactory,\r\n        RulePluginService,\r\n        EnvironmentServiceFactory,\r\n        ValidationServiceFactory,\r\n        LegacyResourceServiceFactory,\r\n        LegacyDragDropServiceFactory,\r\n        DragDropService,\r\n        ValidationServiceFactory,\r\n        DataServiceFactory,\r\n        LegacyPopupServiceFactory,\r\n        PopupService,\r\n        RecentsServiceFactory,\r\n        IdentityService,\r\n        DropDownService,\r\n        EventNotifierService,\r\n        CanvasServiceFactory,\r\n        ConfigPanelServiceFactory,\r\n        NotificationServiceFactory,\r\n        ProcessService,\r\n        ObjectModelServiceFactory,\r\n        UndoRedoServiceFactory,\r\n        SmartFieldPluginServiceFactory,\r\n        SmartFieldComposerServiceFactory,\r\n        ClipboardServiceFactory,\r\n        ContextProviderFactory,\r\n        DesignerServiceFactory,\r\n        ItemProviderServiceFactory,\r\n        PluginServiceFactory,\r\n        ProgressBarServiceFactory,\r\n        RedirectServiceFactory,\r\n        RibbonBarServiceFactory,\r\n        ToolBoxServiceFactory,\r\n        UserOptionsServiceFactory,\r\n        SelectionServiceFactory,\r\n        CommandServiceFactory,\r\n        HelpServiceFactory,\r\n        SmartFormsIntegrationService,\r\n        ResourceService,\r\n        PluginItemReferencesService,\r\n        FilterPanelServiceFactory,\r\n        WorkflowService,\r\n        ConfigurationService,\r\n    ],\r\n    bootstrap: [],\r\n    schemas: [],\r\n    //This should contain the components that are referenced by angularjs templates\r\n    entryComponents: [\r\n        ToolboxComponent,\r\n        RibbonComponent,\r\n        GroupBooleanOperatorExpressionComponent,\r\n        ThisResponseExpressionComponent,\r\n        UserDialogComponent,\r\n        ErrorBarComponent,\r\n        TextboxComponent,\r\n        CreateSmartFieldsComponent,\r\n    ]\r\n})\r\nexport class AppModule {\r\n    constructor(private upgrade: UpgradeModule) { }\r\n\r\n    ngDoBootstrap(app: ApplicationRef) {\r\n        setAngularJSGlobal(window.angular);\r\n        if (environment.devHarness) {\r\n            app.bootstrap(AppComponent);\r\n        } else {\r\n            downgradeComponents();\r\n\r\n            const appName = document.location.pathname.match(/(viewflow.aspx)/i)\r\n                ? 'ViewflowApp'\r\n                : 'K2DesignerApp';\r\n\r\n            this.upgrade.bootstrap(document.body, [appName], {\r\n                strictDi: true\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { ResourceService } from '../../services/resource/resource.service';\r\n\r\n@Component({\r\n    selector: 'k2-base-resource',\r\n    template: '<p> Empty Template since it wont be used </p>'\r\n})\r\nexport class BaseResourceComponent {\r\n\r\n    constructor(protected resourceService: ResourceService) { }\r\n\r\n    /**\r\n     * Returns resource string from .resx file using name and key\r\n     *\r\n     * @param resourceName name of resx file\r\n     * @param key resource lookup key\r\n     */\r\n    getFromResx = (resourceName: string, key: string) => this.resourceService.getFromResx(resourceName, key);\r\n\r\n    /**\r\n     * Returns resource string from JSON\r\n     *\r\n     * @param key\r\n     */\r\n    getString = (key: string) => this.resourceService.getString(key);\r\n}\r\n","import { Component, Inject, OnDestroy, OnInit } from '@angular/core';\r\nimport { IValidationService } from '../../../types/services/validation/ivalidation.service';\r\nimport { IValidatedComponent } from '../../../types/validation/i-validated-component';\r\nimport { ValidationServiceToken } from '../../services/validation/validation-service-factory';\r\nimport { ErrorSeverity } from '../../shared/enums/model/error-severity';\r\nimport { EventTypes } from '../../shared/enums/model/event-types';\r\nimport { ValidationTypes } from '../../shared/enums/model/validation-types';\r\n\r\n@Component({\r\n    selector: 'k2-base',\r\n    template: '<p> Empty Template since it wont be used </p>'\r\n})\r\nexport class BaseComponent implements OnDestroy {\r\n    protected applicableValidationTypes: ValidationTypes[] = [];\r\n    protected validationOptions: {\r\n        [validationType: number]: sourceCode.k2Designer.objectModel.validationService.plugins.IValidationTypeItem;\r\n    } = {};\r\n\r\n    private validateWhen: string;\r\n    private validationListener: () => void;\r\n    private condition: () => void;\r\n\r\n    constructor(@Inject(ValidationServiceToken) private validationService: IValidationService) { }\r\n\r\n    ngOnDestroy() {\r\n        if (this.validationListener) {\r\n            this.validationListener();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the validation types and config from the attributes, and registers them for validation.\r\n     * This should be called from the constructor.\r\n     *\r\n     * @param scope\r\n     */\r\n    protected setApplicableValidationTypes(validationTypesArray: any): void {\r\n\r\n        // If there isn't any validation specified, just end.\r\n        if (!validationTypesArray) {\r\n            return;\r\n        }\r\n\r\n        if (!Array.isArray(validationTypesArray)) {\r\n            throw new Error('The validation attribute should be an array.');\r\n        }\r\n\r\n        for (const validationType of validationTypesArray) {\r\n            let validationName;\r\n            if (typeof validationType === 'string') {\r\n                validationName = validationType;\r\n            } else if (typeof validationType === 'object') {\r\n                //get the name from the key of the object\r\n                validationName = Object.keys(validationType)[0]; // The first item will be name of the validation\r\n                if (validationName === 'when') {\r\n                    this.validateWhen = validationType[validationName];\r\n                    continue;\r\n                }\r\n                this.validationOptions[ValidationTypes[validationName]] = validationType[validationName];\r\n            } else { // get this type error out of the way. From here on we can assume if not string, then object\r\n                throw new Error('The validation attribute array should be objects or strings.');\r\n            }\r\n\r\n            const validationTypeVal = ValidationTypes[validationName];\r\n\r\n            if (!validationTypeVal) {\r\n                throw new Error('Unknown validation type specified in Validation Attribute');\r\n            }\r\n\r\n            this.applicableValidationTypes.push(validationTypeVal as unknown as ValidationTypes);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Validate the model and property based on the validation types set in setApplicableValidationTypes\r\n     *\r\n     * @param model\r\n     * @param property\r\n     */\r\n    protected validate(model: sourceCode.k2Designer.objectModel.core.model.IModelObject, property: string): boolean {\r\n        if (this.applicableValidationTypes.length === 0) {\r\n            // nothing to validate, exit\r\n            return true;\r\n        }\r\n\r\n        const validationData = new sourceCode.k2Designer.objectModel.validationService.plugins.ValidatorItem();\r\n\r\n        validationData.modelObject = model;\r\n        validationData.propertyName = property;\r\n\r\n        for (const applicableValidationType of this.applicableValidationTypes) {\r\n            const validationOptions = this.validationOptions[applicableValidationType];\r\n\r\n            const validationName = ValidationTypes[applicableValidationType];\r\n            const validationItemTypeName = validationName + 'Item';\r\n            let validationConfig: sourceCode.k2Designer.objectModel.validationService.plugins.ValidationTypeItem;\r\n\r\n            if (typeof sourceCode.k2Designer.objectModel.validationService.plugins[validationItemTypeName] === 'function') {\r\n                validationConfig = new sourceCode.k2Designer.objectModel.validationService.plugins[validationItemTypeName]();\r\n            } else {\r\n                validationConfig = new sourceCode.k2Designer.objectModel.validationService.plugins.ValidationTypeItem();\r\n            }\r\n\r\n            const validationFailedMessage = validationOptions\r\n                && validationOptions.validationFailedMessage\r\n                ? validationOptions.validationFailedMessage : '-- This field is configured incorrectly --';\r\n            // replace with resource string when we get the text\r\n\r\n            const validationResourceTokens = validationOptions\r\n                && validationOptions.validationResourceTokens\r\n                ? validationOptions.validationResourceTokens : [];\r\n\r\n            //Gets the errorSeverity from validationOptions, if none specified default to error.\r\n            const validationErrorSeverity = validationOptions\r\n                && validationOptions.errorSeverity\r\n                ? validationOptions.errorSeverity : ErrorSeverity.Error;\r\n\r\n            const properties = Object.keys(validationConfig);\r\n            const validationConfigOptions: any = {};\r\n            for (const prop of properties) {\r\n                switch (prop) {\r\n                    case 'validationType':\r\n                        validationConfigOptions.validationType = applicableValidationType;\r\n                        break;\r\n                    case 'validationFailedMessage':\r\n                        validationConfigOptions.validationFailedMessage = validationFailedMessage;\r\n                        break;\r\n                    case 'validationResourceTokens':\r\n                        validationConfigOptions.validationResourceTokens = validationResourceTokens;\r\n                        break;\r\n                    case 'errorSeverity':\r\n                        validationConfigOptions.errorSeverity = validationErrorSeverity;\r\n                        break;\r\n                    default:\r\n                        validationConfigOptions[prop] = validationOptions ? validationOptions[prop] : undefined;\r\n                        break;\r\n                }\r\n            }\r\n\r\n            validationData.validationConfigs[applicableValidationType] = validationConfigOptions;\r\n        }\r\n\r\n        this.validationService.evaluate(this.applicableValidationTypes, validationData);\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Listens for property changes, and then validates the field\r\n     *\r\n     * @param model\r\n     * @param property\r\n     * @param condition\r\n     */\r\n    protected validatePropertyOnChange(model: IValidatedComponent, property: string, condition?: () => boolean) {\r\n        if (this.applicableValidationTypes.length === 0) {\r\n            // nothing to validate, exit\r\n            return true;\r\n        }\r\n        if (this.condition) {\r\n            throw new Error('only one validation watch allowed per directive');\r\n        }\r\n\r\n        if (typeof condition === 'function') {\r\n            this.condition = () => {\r\n                const result = condition();\r\n                if (result && typeof this.validationListener !== 'function') {\r\n                    this.applyPropertyListener(model, property);\r\n                    this.validate(model, property);\r\n                } else if (!result) {\r\n                    this.destroyListener();\r\n                }\r\n            };\r\n        } else {\r\n            this.applyPropertyListener(model, property);\r\n            this.validate(model, property);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Listens for array changes, and then validates the array\r\n     *\r\n     * @param model\r\n     * @param property\r\n     * @param condition\r\n     */\r\n    protected validateArrayOnChange(model: IValidatedComponent, property: string, condition?: () => boolean) {\r\n        if (this.applicableValidationTypes.length === 0) {\r\n            // nothing to validate, exit\r\n            return true;\r\n        }\r\n\r\n        if (typeof condition === 'function') {\r\n            this.condition = () => {\r\n                const result = condition();\r\n                if (result && typeof this.validationListener !== 'function') {\r\n                    this.applyArrayListener(model, property);\r\n                    this.validate(model, property);\r\n                } else if (!result) {\r\n                    this.destroyListener();\r\n                    // no more validation. Pass it all.\r\n                    this.validationService.forceAllPassValidation(model);\r\n                }\r\n            };\r\n            this.condition();\r\n        } else {\r\n            this.applyArrayListener(model, property);\r\n            this.validate(model, property);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Validates an array. Accepts the standard IArrayChangedEvent parameters.\r\n     *\r\n     * @param fieldName\r\n     * @param arrayObj\r\n     * @param name\r\n     * @param oldVal\r\n     * @param newVal\r\n     */\r\n    private onArrayListenerTriggered(property: string,\r\n        parentObj: sourceCode.k2Designer.objectModel.core.model.IModelObject,\r\n        arrayObj: sourceCode.k2Designer.objectModel.core.model.IModelObject,\r\n        name: string,\r\n        oldVal: any,\r\n        newVal: any): boolean {\r\n        // since we listened to the array, no need to compare the property to the name\r\n        this.validate(parentObj, property);\r\n        return true;\r\n    }\r\n\r\n    private applyPropertyListener(model: sourceCode.k2Designer.objectModel.core.model.IModelObject, property: string) {\r\n        if (this.validationListener) {\r\n            throw new Error('only one validation listener allowed per directive');\r\n        }\r\n\r\n        if (model && model.listen) {\r\n            this.validationListener = model.listen(EventTypes.propertyChanged, this.onPropertyListenerTriggered.bind(this, property));\r\n        }\r\n    }\r\n\r\n    private applyArrayListener(model: sourceCode.k2Designer.objectModel.core.model.IModelObject, property: string) {\r\n        if (this.validationListener) {\r\n            throw new Error('only one validation listener allowed per directive');\r\n        }\r\n\r\n        if (model && model[property] && model[property].listen) {\r\n            this.validationListener =\r\n                model[property].listen(EventTypes.arrayChanged, this.onArrayListenerTriggered.bind(this, property, model));\r\n        }\r\n    }\r\n\r\n    private destroyListener(): void {\r\n        if (typeof this.validationListener === 'function') {\r\n            this.validationListener();\r\n            this.validationListener = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Executes validate if the property that changed is the correct one. Accepts the standard IPropertyChangedEvent parameters.\r\n     *\r\n     * @param property\r\n     * @param obj\r\n     * @param name\r\n     * @param oldVal\r\n     * @param newVal\r\n     */\r\n    private onPropertyListenerTriggered(property: string,\r\n        obj: sourceCode.k2Designer.objectModel.core.model.IModelObject,\r\n        name: string,\r\n        oldVal: any,\r\n        newVal: any): boolean {\r\n        if (property === name) {\r\n            this.validate(obj, property);\r\n        }\r\n        return true;\r\n    }\r\n}\r\n","import { Component, ElementRef, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'k2-bread-crumb-item',\r\n    templateUrl: './bread-crumb-item.component.html',\r\n    styleUrls: ['./bread-crumb-item.component.less']\r\n})\r\nexport class BreadCrumbItemComponent implements OnInit {\r\n    @Input() isDropDownItem: boolean;\r\n    @Input() index: number;\r\n    @Input() crumb: IBreadCrumbItem;\r\n\r\n    constructor(private el: ElementRef<HTMLElement>) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.crumb) {\r\n            this.crumb.isOverflowed = this.isOverFlowed.bind(this);\r\n        }\r\n    }\r\n\r\n    public isOverFlowed(): boolean {\r\n        if (!this.crumb.isCrumbItem) {\r\n            return false;\r\n        }\r\n        const crumbItem = this.el.nativeElement;\r\n        const container = crumbItem.parentElement;\r\n        const childHeight = $(crumbItem.children).height();\r\n        return (container.scrollHeight !== 0) && container.scrollHeight > childHeight;\r\n    }\r\n}\r\n","<ng-container *ngIf=\"crumb && crumb.isCrumbItem\">\r\n    <div class=\"bc-item-container repeat-animation bc-has-arrow after before addCrumb\" [idx]=\"index\" style=\"margin-left:3px\">\r\n        <div *ngIf=\"!crumb.supressIcon\" class=\"bc-content title\" title=\"{{crumb.title}}\"><div [ngClass]=\"crumb.icon\"></div></div>\r\n        <div *ngIf=\"crumb.supressIcon\" class=\"bc-content title\" k2TooltipBasic>{{crumb.title}}</div>\r\n    </div>\r\n</ng-container>\r\n<ng-container *ngIf=\"crumb && !crumb.isCrumbItem\">\r\n    <li>\r\n        <div class=\"node-icon\">\r\n            <i class=\"{{crumb.icon}}\"></i>\r\n        </div>\r\n        <div class=\"node-title\" [textContent]=\"crumb.title\" k2TooltipBasic></div>\r\n    </li>\r\n</ng-container>\r\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnChanges, OnDestroy, OnInit, Output } from '@angular/core';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\r\nimport { ILegacyResourceService } from '../../../types/services/resources/i-legacy-resource.service';\r\nimport { LegacyResourceServiceToken } from '../../legacy-service-factories/resource-service-factory';\r\nimport { defaultDebounceTime } from '../../shared/constants/general';\r\nimport { isUndefinedOrNull } from '../../shared/utils/general';\r\n\r\n@Component({\r\n    selector: 'k2-bread-crumb',\r\n    templateUrl: './bread-crumb.component.html',\r\n    styleUrls: ['./bread-crumb.component.less']\r\n})\r\nexport class BreadCrumbComponent implements OnInit, OnChanges, OnDestroy {\r\n    @Input() public searchText: string;\r\n    @Input() public hideSearch = false;\r\n    @Input() public placeholderText: string;\r\n    @Input() public crumbItems: IBreadCrumbItem[];\r\n    @Input() public selectedItem: IBreadCrumbItem;\r\n    @Input() public rootText: string;\r\n    @Input() public rootIcon = 'icon icon-set-toolbox icon-size16 ic-category';\r\n    @Input() public searchInputDelay: number;\r\n    @Input() public autofocusOnInput: boolean;\r\n    @Output() public onCrumbItemSelected = new EventEmitter<IBreadCrumbItemEvent>();\r\n    @Output() public searchTextChanged = new EventEmitter<string>();\r\n\r\n    public dropDownCrumbs: IBreadCrumbItem[] = [];\r\n    public visibleCrumbs: IBreadCrumbItem[] = [];\r\n\r\n    private _window = window;\r\n    public isSearchShowing = true;\r\n    private _placeholderText: string;\r\n    private _isSmartObjectBrowser: boolean;\r\n    private searchTextSubject = new Subject<string>();\r\n    private searchTextSub: Subscription;\r\n\r\n    constructor(@Inject(LegacyResourceServiceToken) private _resourceService: ILegacyResourceService,\r\n        private el: ElementRef) {\r\n        this.searchTextSub = this.searchTextSubject.pipe(\r\n            debounceTime(1000),\r\n            distinctUntilChanged()\r\n        ).subscribe(((value: string) => {\r\n            this.searchTextChanged.emit(value);\r\n        }));\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.visibleCrumbs = [];\r\n        this.dropDownCrumbs = [];\r\n        if (this.rootText === '') this.rootText = this._resourceService.getString('breadcrumb_default_root_text');\r\n        if (this._placeholderText === '') this._placeholderText = this._resourceService.getString('breadcrumb_items_placeholder_text');\r\n        if (this.crumbItems === undefined || this.crumbItems === null) this.crumbItems = [];\r\n        if (this.crumbItems.length > 0) this.refreshCrumbs(this.crumbItems, []);\r\n\r\n        $(this.el.nativeElement).find('.bc-child-el').bind('leavedone', (): void => {\r\n            this.recalculateMaxWidth(this.visibleCrumbs.length);\r\n        });\r\n\r\n        $(this._window).on('resize', $.proxy(this.recalculateMaxHeight, this));\r\n\r\n        if (this.autofocusOnInput) this.focusInput();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.searchTextSub.unsubscribe();\r\n    }\r\n\r\n    ngOnChanges(changes) {\r\n        if (changes.crumbItems) {\r\n            this.refreshCrumbs(changes.crumbItems.currentValue, changes.crumbItems.previousValue);\r\n        }\r\n\r\n        if (changes.searchText) {\r\n            this.searchTextChanged.emit(this.searchText);\r\n        }\r\n    }\r\n\r\n    get isSmartObjectBrowser(): boolean {\r\n        return this._isSmartObjectBrowser;\r\n    }\r\n\r\n    set isSmartObjectBrowser(value: boolean) {\r\n        this._isSmartObjectBrowser = value;\r\n    }\r\n\r\n    public onSearchTextChanged(value): void {\r\n        this.searchTextSubject.next(value);\r\n    }\r\n\r\n    //if there is space left for last item to expand => recalculates it's maximum width\r\n    private recalculateMaxWidth(index: number): void {\r\n        let ret = '';\r\n\r\n        if (index > 0) {\r\n\r\n            const breadCrumbsElements = $(this.el.nativeElement).find('.bc-child-el').find('.bc-content');\r\n\r\n            if ($(breadCrumbsElements[breadCrumbsElements.length]).parent().attr('maxwidthmodified') === '1') {\r\n                return;\r\n            }\r\n\r\n            const maxWidth = $(this.el.nativeElement).find('.bc-child-el').prop('offsetWidth');\r\n\r\n            let totalChildrenLength = 0; // [ET] - we need to include 12px for each node, not just once off\r\n            for (var i = 0; i < breadCrumbsElements.length; i++) {\r\n                totalChildrenLength += breadCrumbsElements[i].offsetWidth + 15; // [ET] - 15px should be counted on each node (12 + 3), where 12px is the arrow infront\r\n            }\r\n\r\n            if (maxWidth > totalChildrenLength) {\r\n                const dif = maxWidth - totalChildrenLength - 27;\r\n                if (dif > 0) {\r\n                    ret = 'calc(50% + ' + dif + 'px)';\r\n                } else {\r\n                    ret = 'calc(50% - ' + Math.abs(dif) + 'px)';\r\n                }\r\n\r\n                $(breadCrumbsElements[i - 1]).parent().css('max-width', ret).attr('maxwidthmodified', '1');\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    public onMouseDown(evt: MouseEvent): void {\r\n        document.removeEventListener('mousedown', this.onMouseDown.bind(this), true);\r\n        if ($(evt.target).closest('.breadcrumb-node').length === 0) {\r\n            $(this.el.nativeElement).find('.breadcrumb-node').hide();\r\n        }\r\n    }\r\n\r\n    public toggleNode(): void {\r\n        $(this.el.nativeElement).find('.breadcrumb-node').toggle();\r\n\r\n        if ($(this.el.nativeElement).find('.breadcrumb-node').is(':visible')) {\r\n            document.addEventListener('mousedown', this.onMouseDown.bind(this), true);\r\n            this.recalculateMaxHeight();\r\n        }\r\n    }\r\n\r\n    public setIconSetName(): string {\r\n        return (this.searchText === undefined || this.searchText.length === 0) ? 'ribbon' : 'steps';\r\n    }\r\n\r\n    public setIconName(): string {\r\n        return (this.searchText === undefined || this.searchText.length === 0) ? 'search' : 'headerclose';\r\n    }\r\n\r\n    private recalculateMaxHeight(): void {\r\n        const menu = $(this.el.nativeElement).find(`ul[role='menu']`);\r\n        const scrollContainer = $(this.el.nativeElement).find('.breadcrumb-scroll-container');\r\n\r\n        if (menu.length > 0 && scrollContainer.length > 0) {\r\n            scrollContainer.height(menu.outerHeight());\r\n            scrollContainer.css('max-height', window.innerHeight - menu.offset().top);\r\n        }\r\n    }\r\n\r\n    private refreshCrumbs(newItems: IBreadCrumbItem[], oldItems: IBreadCrumbItem[]): void {\r\n        const oldLength = (oldItems ? oldItems.length : 0);\r\n        this.isSearchShowing = !(newItems.length > 0);\r\n        if (!newItems || newItems.length === 0) { // clicked on root\r\n            this.visibleCrumbs = [];\r\n            this.dropDownCrumbs = [];\r\n            return;\r\n        }\r\n        if (newItems.length === oldLength) // clicked on current crumb\r\n        {\r\n            return;\r\n        }\r\n        if (newItems.length < oldLength) { // clicked on a parent crumb\r\n            this.visibleCrumbs = [];\r\n            this.dropDownCrumbs = [];\r\n            this.addVisible(newItems.slice(0), true);\r\n        }\r\n        else if (newItems && newItems.length > 0) { // new item\r\n            const index = newItems.length - 1;\r\n            this.addVisible([newItems[index]], true); // Angular will not trigger addcrumb for items already in the list\r\n        }\r\n    }\r\n\r\n    private addVisible(items: IBreadCrumbItem[], addToEnd: boolean) {\r\n        if (items?.length === 0) {\r\n            return;\r\n        }\r\n        const item = items.pop();\r\n        item.index = this.crumbItems.indexOf(item);\r\n        item.isCrumbItem = true;\r\n        item.icon = null;\r\n        item.supressIcon = true;\r\n        if (!this._isSmartObjectBrowser) {\r\n            if (item.title === 'SmartObjects') {\r\n                item.icon = 'icon icon-set-steps icon-size16 ic-executesmartobject';\r\n                item.supressIcon = false;\r\n            }\r\n        }\r\n        if (addToEnd) {\r\n            this.visibleCrumbs.push(item);\r\n        } else {\r\n            this.visibleCrumbs.unshift(item);\r\n        }\r\n        setTimeout(() => {\r\n            if (item.isOverflowed()) {\r\n                this.unshiftOverflow(item);\r\n            } else {\r\n                this.addVisible(items, false);\r\n            }\r\n        }, 0);\r\n    }\r\n\r\n    private unshiftOverflow(newCrumb: IBreadCrumbItem) {\r\n        const crumb = this.visibleCrumbs.shift();\r\n        crumb.isCrumbItem = false;\r\n        if (crumb.title !== 'SmartObjects') {\r\n            crumb.icon = 'icon icon-set-toolbox icon-size16 ic-category';\r\n        }\r\n        this.dropDownCrumbs.unshift(crumb);\r\n        setTimeout(() => { // Check if the element is still overflowed after an angular cycle\r\n            let isOverflow: boolean;\r\n            if (this.visibleCrumbs.length > 0) {\r\n                isOverflow = this.visibleCrumbs[0].isOverflowed();\r\n            } else {\r\n                return;\r\n            }\r\n\r\n            if (isOverflow) {\r\n                this.unshiftOverflow(newCrumb);\r\n            } else {\r\n                const remainder = this.crumbItems.filter(value => !this.dropDownCrumbs.includes(value) && !this.visibleCrumbs.includes(value));\r\n                for (const item of remainder) {\r\n                    this.dropDownCrumbs.unshift(item);\r\n                }\r\n            }\r\n        }, 0);\r\n    }\r\n\r\n    onBlur(forced: boolean): void {\r\n        if (this.searchText) {\r\n            if (forced) {\r\n                if (this.searchText.length === 0 && this.crumbItems.length > 0) {\r\n                    this.clearSearch();\r\n                }\r\n                else {\r\n                    this.showSearch();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private showSearch(): void {\r\n        this.searchText = '';\r\n        this.isSearchShowing = true;\r\n        this.focusInput(defaultDebounceTime);\r\n    }\r\n\r\n    clearSearchAndFocusInput() {\r\n        this.clearSearch();\r\n        this.focusInput();\r\n        this.searchTextChanged.emit(this.searchText);\r\n    }\r\n\r\n    private clearSearch(): void {\r\n        this.searchText = '';\r\n        this.isSearchShowing = this.crumbItems.length > 0 ? false : true;\r\n    }\r\n\r\n    initiateSearch(): void {\r\n        if (!isUndefinedOrNull(this.searchText)) {\r\n            if (this.searchText.length > 0) {\r\n                this.clearSearch();\r\n            }\r\n            else {\r\n                this.showSearch();\r\n            }\r\n        }\r\n        else {\r\n            this.showSearch();\r\n        }\r\n\r\n        this.focusInput();\r\n    }\r\n\r\n    crmbItmClicked(itm: IBreadCrumbItem) {\r\n        this.updateBreadCrumb(itm);\r\n\r\n    }\r\n\r\n    private updateBreadCrumb(item: IBreadCrumbItem) {\r\n        if (item === null) {\r\n            this.crumbItems = [];\r\n        } else {\r\n            this.crumbItems = this.crumbItems.slice(0, item.index + 1);\r\n        }\r\n        this.onCrumbItemSelected.emit({ item, newCrumbs: this.crumbItems });\r\n    }\r\n\r\n    ddItmClicked(itm: IBreadCrumbItem) {\r\n        this.updateBreadCrumb(itm);\r\n    }\r\n\r\n    private focusInput(delay: number = 0) {\r\n        setTimeout((): void => {\r\n            const inputBox = $(this.el.nativeElement).find(`input[type='text']`)[0];\r\n            $(inputBox).focus();\r\n        }, delay);\r\n    }\r\n}\r\n","<div class=\"searchbox\">\r\n    <div [ngClass]=\"{'snap': true, 'hidden': !isSearchShowing }\" *ngIf=\"hideSearch === false\">\r\n        <div class=\"inputbox\">\r\n            <input type=\"text\"\r\n                   k2Droppable\r\n                   k2Droptypes=\"\"\r\n                   [placeholder]=\"placeholderText\"\r\n                   [(ngModel)]=\"searchText\"\r\n                   (ngModelChange)=\"onSearchTextChanged($event)\"\r\n                   [modelOptions]=\"{ debounce: searchInputDelay }\"\r\n                   (blur)=\"onBlur(false)\" />\r\n        </div>\r\n        <div class=\"actionicon\">\r\n            <i [ngClass]=\"'icon icon-set-'+setIconSetName()+' icon-size16 ic-'+setIconName()\" (click)=\"clearSearchAndFocusInput()\"></i>\r\n        </div>\r\n    </div>\r\n    <div [ngClass]=\"{ 'snap': true, 'hidden': isSearchShowing }\">\r\n        <div class=\"inputbox\" style=\"height: 24px\">\r\n            <div class=\"breadcrumber bc-child-el\">\r\n                <div class=\"hideScreen\"></div>\r\n                <div (click)=\"crmbItmClicked(null)\" class=\"bc-content parent-crumb bc-has-arrow after\" style=\"z-index: 2002;\" *ngIf=\"dropDownCrumbs.length === 0\">\r\n                    <div class=\"icon-container\">\r\n                        <i [ngClass]=\"rootIcon\"></i>\r\n                    </div>\r\n                </div>\r\n                <div class=\"bc-content bc-has-arrow after\" style=\"z-index: 2002;\" *ngIf=\"dropDownCrumbs.length > 0\" role=\"button\" (click)=\"toggleNode()\">\r\n                    <div class=\"icon-container\">\r\n                        <i class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></i>\r\n                    </div>\r\n                </div>\r\n                <div class=\"breadcrumb-node\" *ngIf=\"dropDownCrumbs.length > 0\">\r\n                    <div k2-scrollbar class=\"breadcrumb-scroll-container\">\r\n                        <ul role=\"menu\">\r\n                            <k2-bread-crumb-item *ngFor=\"let cat of dropDownCrumbs\" [crumb]=\"cat\" (click)=\"ddItmClicked(cat)\"></k2-bread-crumb-item>\r\n                            <li (click)=\"crmbItmClicked(null)\">\r\n                                <div class=\"node-icon\">\r\n                                    <i [ngClass]=\"rootIcon\"></i>\r\n                                </div>\r\n                                <div class=\"node-title\">{{rootText}}</div>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <k2-bread-crumb-item *ngFor=\"let cat of visibleCrumbs\" [crumb]=\"cat\" (click)=\"crmbItmClicked(cat)\"></k2-bread-crumb-item>\r\n            </div>\r\n        </div>\r\n        <div class=\"actionicon\" *ngIf=\"hideSearch === false\">\r\n            <i class=\"icon icon-set-ribbon icon-size16 ic-search\" (click)=\"initiateSearch()\"></i>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { IValidationService } from '../../../../types/services/validation/ivalidation.service';\r\nimport { IValidatedComponent } from '../../../../types/validation/i-validated-component';\r\nimport { ProcessService } from '../../../services/process/process.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { ValidationServiceToken } from '../../../services/validation/validation-service-factory';\r\nimport { ErrorSeverity } from '../../../shared/enums/model/error-severity';\r\nimport { isUndefinedOrNull } from '../../../shared/utils/general';\r\n\r\n@Component({\r\n    selector: 'k2-badges',\r\n    templateUrl: './badges.component.html'\r\n})\r\nexport class BadgesComponent implements OnInit, OnChanges {\r\n    @Input() public k2Model: IValidatedComponent;\r\n    @Input() public toolTipText: string;\r\n    @Input() public forceShow: boolean;\r\n    @Input() public alwaysHideBadge: boolean;\r\n    @Input() public errorSeverity: ErrorSeverity;\r\n\r\n    public severity: typeof ErrorSeverity = ErrorSeverity;\r\n\r\n    constructor(private resourceService: ResourceService,\r\n        private processService: ProcessService,\r\n        @Inject(ValidationServiceToken) private validationService: IValidationService) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        //Check if the model contains errors\r\n        if (this.k2Model?.childErrorInformation?.length > 0 ||\r\n            this.k2Model?.errorInformation?.length) {\r\n\r\n            this.setupBadge();\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.k2Model) {\r\n            this.setupBadge();\r\n        }\r\n    }\r\n\r\n    private setupBadge(): void {\r\n\r\n        this.errorSeverity = this.validationService.getErrorSeverity(this.k2Model);\r\n\r\n        const firstError = this.validationService.getFirstError(this.k2Model);\r\n\r\n        if (firstError) {\r\n\r\n            //attempt to use model object from first error to avoid [unresolved token]\r\n            //if the model cannot be found, resort to this.k2Model\r\n            let model = this.processService.root.findItem<IValidatedComponent>(firstError.reference);\r\n            if (isUndefinedOrNull(model)) {\r\n                model = this.k2Model;\r\n            }\r\n\r\n            this.toolTipText = this.resourceService.resolveTokenResourceString(firstError.errorMessage,\r\n                firstError.errorResourceTokens,\r\n                model);\r\n        }\r\n    }\r\n}\r\n","<span class=\"error-badge fadeMeIn\"\r\n      [attr.title]=\"toolTipText\"\r\n      *ngIf=\"forceShow || (!alwaysHideBadge && ((k2Model?.errorInformation?.length > 0 ) || (k2Model?.childErrorInformation?.length > 0 )))\">\r\n\r\n    <div class=\"icon icon-set-badges icon-size18\"\r\n         [class.ic-errorbadge]=\"errorSeverity !== severity.Warning\"\r\n         [class.ic-misconfiguredbadge]=\"errorSeverity === severity.Warning\"></div>\r\n</span>\r\n","import { Component, Inject, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { ILegacyResourceService } from '../../../../../types/services/resources/i-legacy-resource.service';\r\nimport { LegacyResourceServiceToken } from '../../../../legacy-service-factories/resource-service-factory';\r\nimport { ValidationServiceToken } from '../../../../services/validation/validation-service-factory';\r\n\r\n@Component({\r\n    selector: 'k2-mini-badge',\r\n    templateUrl: './mini-badge.component.html',\r\n    styleUrls: ['./mini-badge.component.less']\r\n})\r\nexport class MiniBadgeComponent implements OnInit, OnDestroy {\r\n    @Input() public k2Model?: any;\r\n    @Input() public forceShow: boolean;\r\n    @Input() public alwaysHideBadge: boolean;\r\n    @Input() public customClass?: string;\r\n    @Input() public toolTipText?: string;\r\n    public customBadgeClass?: string;\r\n    private modelChangedListener;\r\n\r\n    constructor(@Inject(ValidationServiceToken) private _validationService,\r\n        @Inject(LegacyResourceServiceToken) private _resourceService: ILegacyResourceService) { }\r\n\r\n    ngOnInit(): void {\r\n        //Check if the model contains errors\r\n        if (this.k2Model?.childErrorInformation || this.k2Model?.errorInformation) {\r\n            this.setupBadge();\r\n            this.modelChangedListener = this.k2Model.listen(sourceCode.k2Designer.objectModel.core.model.EventTypes.anythingChanged, this.setupBadge.bind(this));\r\n        }\r\n    }\r\n    ngOnDestroy(): void {\r\n        if (this.modelChangedListener) this.modelChangedListener();\r\n    }\r\n\r\n    private setupBadge(): void {\r\n        this.customBadgeClass = this.customClass + (this._validationService.getErrorSeverity(this.k2Model) === 1 ? ' mini-warning-badge' : '');\r\n        this.toolTipText = this.toolTipText ? this.toolTipText : this.getErrorMessage();\r\n    }\r\n\r\n    private getErrorMessage() {\r\n        let message = '';\r\n        if (this.k2Model && this.k2Model.errorInformation &&\r\n            this.k2Model.errorInformation.length > 0 &&\r\n            !!this.k2Model.errorInformation[0].errorMessage) {\r\n            message = this._resourceService.resolveTokenResourceString(this.k2Model.errorInformation[0].errorMessage, this.k2Model.errorInformation[0].errorResourceTokens, this.k2Model);\r\n        } else if (this.k2Model && this.k2Model.childErrorInformation &&\r\n            this.k2Model.childErrorInformation.length > 0 &&\r\n            !!this.k2Model.childErrorInformation[0].errorMessage) {\r\n            message = this._resourceService.resolveTokenResourceString(this.k2Model.childErrorInformation[0].errorMessage, this.k2Model.childErrorInformation[0].errorResourceTokens, this.k2Model);\r\n        }\r\n\r\n        return message;\r\n    }\r\n}\r\n","<label class=\"mini-badge\"\r\n       [attr.title]=\"toolTipText\"\r\n       [ngClass]=\"customBadgeClass\"\r\n       *ngIf=\"forceShow || (!alwaysHideBadge && (k2Model && ((k2Model.errorInformation?.length > 0 ) || (k2Model.childErrorInformation?.length > 0 ))))\">\r\n</label>\r\n","import { Component, Input, Output, ViewChild, EventEmitter, OnInit, OnDestroy } from '@angular/core';\r\nimport { ChooseControlTypes } from 'src/app/shared/enums/choose-control/choose-control-types';\r\nimport { ChooseControlTemplates } from 'src/app/shared/enums/choose-control/choose-control-templates';\r\nimport { ChooseControlDefaultLabelComponent } from './templates/choose-control-default-label/choose-control-default-label.component';\r\nimport { IStates } from '../../../../types/models/rules/i-states';\r\nimport { States } from '../../../shared/control-helpers/states';\r\nimport { EventNotifierService } from '../../../services/event-notifier/event-notifier.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { RadioButtonChangedEvent } from '../../../shared/constants/events';\r\nimport { IRadioEvent } from '../../../../types/events/choose-control/i-radio.event';\r\nimport { IValidatedComponent } from '../../../../types/validation/i-validated-component';\r\nimport IDropDownMenuItem from '../../../shared/enums/drop-down/drop-down-menu-item';\r\n\r\n@Component({\r\n    selector: 'k2-choose-control-v2', //TODO: rename once the AngularJS directive is deprecated\r\n    templateUrl: './choose-control.component.html',\r\n    styleUrls: ['./choose-control.component.less']\r\n})\r\nexport class ChooseControlComponent implements OnInit, OnDestroy {\r\n    //The disabled state for the input element\r\n    @Input() disabled: boolean;\r\n\r\n    //The type of selection control to use\r\n    @Input() type: ChooseControlTypes;\r\n\r\n    //The checked state for the radio button\r\n    @Input() set checked(val: boolean) {\r\n        if (val !== this._checked) {\r\n            if (this._checked !== null) { // should not emit change if it is initial value set\r\n                if (val) { // should only emit radio event if the radio value is true and not initial\r\n                    this._radioEvent?.emit({ source: this, name: this.name });\r\n                }\r\n                this.checkedChange.emit(val); // this should only fire after the radio emit\r\n            }\r\n            this._checked = val;\r\n\r\n            if (this.labelTemplate === ChooseControlTemplates.chooseControlDefaultLabel) {\r\n                this.defaultLabel?.onToggle();\r\n            }\r\n        }\r\n    }\r\n\r\n    //The group name for the input element, used to set radio group behaviour\r\n    @Input() name: string;\r\n\r\n    //Identify which label template to use\r\n    //Defaults to chooseControlDefaultLabel template if not specified\r\n    @Input() labelTemplate: ChooseControlTemplates = ChooseControlTemplates.chooseControlDefaultLabel;\r\n\r\n    //The id to use for the input tag\r\n    @Input() id: string;\r\n\r\n    //The text to display in the label\r\n    @Input() displayText: string;\r\n\r\n    //custom class to attach to the label element\r\n    @Input() customLabelClass: string;\r\n\r\n    //Should add the dynamic button\r\n    @Input() isDynamicMode: boolean;\r\n\r\n    //Called when toggle button is clicked\r\n    @Input() onToggle: () => void;\r\n\r\n    //States that determine if the control is toggled\r\n    @Input() isToggled: boolean;\r\n\r\n    //Can be set as a callback when the dynamic mode changes\r\n    @Input() dynamicModeChanged: (isToggled: boolean) => void;\r\n\r\n    //Value used for dynamic mode textbox and custom validation\r\n    @Input() modelValue: IValidatedComponent;\r\n\r\n    //Control states for styling\r\n    @Input() states: IStates = new States();\r\n\r\n    @Input() selectedValue: string;\r\n\r\n    @Input() additionalDropdownItems: IDropDownMenuItem[];\r\n\r\n    @Input() footerItems: IDropDownMenuItem[];\r\n\r\n    @Input() isDarkStyle: boolean;\r\n\r\n    //When the control is blurred\r\n    @Output() onBlurred = new EventEmitter<any>();\r\n\r\n    //When the dynamic mode is toggled\r\n    @Output() onModeToggled = new EventEmitter<any>();\r\n\r\n    //When the textbox in dynamic mode is blurred\r\n    @Output() onTextBoxBlurred = new EventEmitter<any>();\r\n\r\n    // Two way binding checked emitter\r\n    @Output() checkedChange = new EventEmitter<boolean>();\r\n\r\n    @ViewChild(ChooseControlDefaultLabelComponent) defaultLabel: ChooseControlDefaultLabelComponent;\r\n\r\n    //Enumerator types\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n    chooseControlTemplates: typeof ChooseControlTemplates = ChooseControlTemplates;\r\n\r\n    private _checked = null;\r\n    private _radioEventSub: Subscription;\r\n    private _radioEvent: EventEmitter<IRadioEvent>;\r\n\r\n    get checked(): boolean {\r\n        return this._checked;\r\n    }\r\n\r\n    constructor(private _eventNotifierService: EventNotifierService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (this.type === ChooseControlTypes.radiobutton && this.name) {\r\n            this._radioEvent = this._eventNotifierService.addEvent(RadioButtonChangedEvent);\r\n            this._radioEventSub = this._eventNotifierService.subscribe(RadioButtonChangedEvent, (event: IRadioEvent) => {\r\n                if (event.source !== this && event.name === this.name) { // changes value if another item in the radio group is selected\r\n                    this.checked = false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this._radioEventSub?.unsubscribe();\r\n    }\r\n\r\n    //Unused by any components at the moment (dynamic mode)\r\n    onModeToggle() {\r\n        this.onModeToggled.emit();\r\n    }\r\n\r\n    onTextBoxBlur() {\r\n        this.onTextBoxBlurred.emit();\r\n    }\r\n\r\n    onClick() {\r\n        if (!this.disabled) {\r\n            switch (this.type) {\r\n                case ChooseControlTypes.checkbox:\r\n                    this.checked = !this.checked;\r\n                    break;\r\n                case ChooseControlTypes.radiobutton:\r\n                    this.checked = true;\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n","<div class=\"choose-control\" [ngClass]=\"{ 'is-disabled': disabled }\">\r\n    <container-element [ngSwitch]=\"labelTemplate\">\r\n        <k2-choose-control-default-label *ngSwitchCase=\"chooseControlTemplates.chooseControlDefaultLabel\"\r\n                                         [isChecked]=\"checked\"\r\n                                         [customLabelClass]=\"customLabelClass\"\r\n                                         [isDisabled]=\"disabled\"\r\n                                         [displayText]=\"displayText\"\r\n                                         [id]=\"id\"\r\n                                         [isDynamicMode]=\"isDynamicMode\"\r\n                                         [isToggled]=\"isToggled\"\r\n                                         [modelValue]=\"modelValue\"\r\n                                         [type]=\"type\"\r\n                                         (onModeToggled)=\"onModeToggle()\"\r\n                                         (onBlurred)=\"onTextBoxBlur()\"\r\n                                         [states]=\"states\"\r\n                                         (onClick)=\"onClick()\"\r\n                                         #defaultLabel>\r\n        </k2-choose-control-default-label>\r\n        <k2-choose-control-outcome-label *ngSwitchCase=\"chooseControlTemplates.chooseControlOutcomeLabel\"\r\n                                         [isChecked]=\"checked\"\r\n                                         [customLabelClass]=\"customLabelClass\"\r\n                                         [isDisabled]=\"disabled\"\r\n                                         [displayText]=\"displayText\"\r\n                                         [id]=\"id\"\r\n                                         [isToggled]=\"isToggled\"\r\n                                         [modelValue]=\"modelValue\"\r\n                                         [type]=\"type\"\r\n                                         [states]=\"states\"\r\n                                         (onClick)=\"onClick()\">\r\n        </k2-choose-control-outcome-label>\r\n        <k2-choose-control-within-working-hours-label *ngSwitchCase=\"chooseControlTemplates.chooseControlWithinWorkingHours\"\r\n                                                      [isDynamicMode]=\"isDynamicMode\"\r\n                                                      [isChecked]=\"checked\"\r\n                                                      [selectedValue]=\"selectedValue\"\r\n                                                      [customLabelClass]=\"customLabelClass\"\r\n                                                      [additionalDropdownItems]=\"additionalDropdownItems\"\r\n                                                      [footerItems]=\"footerItems\"\r\n                                                      [isDisabled]=\"disabled\"\r\n                                                      [isDarkStyle]=\"isDarkStyle\"\r\n                                                      [isToggled]=\"isToggled\"\r\n                                                      [modelValue]=\"modelValue\"\r\n                                                      [states]=\"states\"\r\n                                                      (onClick)=\"onClick()\">\r\n        </k2-choose-control-within-working-hours-label>\r\n    </container-element>\r\n</div>\r\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { ChooseControlTypes } from 'src/app/shared/enums/choose-control/choose-control-types';\r\nimport { IStates } from '../../../../../../types/models/rules/i-states';\r\nimport { States } from '../../../../../shared/control-helpers/states';\r\n\r\n@Component({\r\n    selector: 'k2-choose-control-default-label',\r\n    templateUrl: './choose-control-default-label.component.html',\r\n    styleUrls: ['./choose-control-default-label.component.less']\r\n})\r\nexport class ChooseControlDefaultLabelComponent implements OnInit {\r\n    @Input() id: string;\r\n    @Input() displayText: string;\r\n    @Input() isChecked: boolean;\r\n    @Input() isDynamicMode: boolean;\r\n    @Input() isDisabled: boolean;\r\n    @Input() isToggled: boolean;\r\n    @Input() modelValue: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IExpression;\r\n    @Input() isEnabledValue: boolean;\r\n    @Input() customLabelClass: string;\r\n    @Input() type: ChooseControlTypes;\r\n    //Control states for styling\r\n    @Input() states: IStates = new States();\r\n\r\n    @Output() onModeToggled = new EventEmitter<boolean>();\r\n    @Output() onBlurred = new EventEmitter<any>();\r\n    @Output() onClick = new EventEmitter<void>();\r\n\r\n    widgetClass = '';\r\n    nonWidgetClass = '';\r\n    hovered = false;\r\n    types: typeof ChooseControlTypes = ChooseControlTypes;\r\n\r\n    constructor() {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    /**\r\n     * Label button click event (dynamic  mode)\r\n     * */\r\n    onToggle(): void {\r\n        this.onModeToggled.emit(this.isToggled);\r\n    }\r\n\r\n    onBlur(): void {\r\n        if (this.isEnabledValue) {\r\n            this.onBlurred.emit();\r\n        }\r\n    }\r\n\r\n    onClicked(): void {\r\n        this.onClick.emit();\r\n    }\r\n\r\n    /**\r\n     * TODO: dynamic mode not yet fully implemented for upgraded component\r\n     * No components currently use this.\r\n     **/\r\n}\r\n","<div class=\"flexrow\" (click)=\"onClicked()\">\r\n    <div class=\"control-column float\">\r\n        <label for=\"{{id}}\" class=\"choose-control-label {{states.toString()}} {{customLabelClass}}\"\r\n               (mouseover)=\"states.add('hover')\"\r\n               (mouseout)=\"states.remove('hover')\">\r\n            <span class=\"icon icon-set-controls icon-size18 {{states.toString()}}\"\r\n                  [class.ic-checkbox]=\"type === types.checkbox && !isChecked\"\r\n                  [class.ic-checkboxselected]=\"type === types.checkbox && isChecked && !isToggled\"\r\n                  [class.ic-radiobutton]=\"type === types.radiobutton && !isChecked\"\r\n                  [class.ic-radiobuttonselected]=\"type === types.radiobutton && isChecked && !isToggled\"\r\n                  [class.hoverfocused]=\"states.isExist('hover') && states.isExist('focused')\">\r\n            </span>\r\n            <span class=\"display-text\">{{displayText}}</span>\r\n        </label>\r\n    </div>\r\n\r\n    <div class=\"control-column fix\" *ngIf=\"isDynamicMode\">\r\n        <button [disabled]=\"isDisabled\"\r\n                class=\"checkbox-dynamic-button flexrow checkbox-dynamic-icons checkbox-dynamic-flex-flexChild checkbox-flex-dynamic-btn\"\r\n                (click)=\"onToggle()\"\r\n                [class.selected]=\"isToggled\"\r\n                [k2-tab-index]=\"0\">\r\n            <span class=\"icon icon-set-contextpin icon-size16 ic-contextpin\"></span>\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"flexrow\">\r\n    <!--TODO: dynamic mode not yet fully implemented for upgraded component -->\r\n    <k2-text-box *ngIf=\"isDynamicMode === true && isToggled === true\"\r\n                [k2Watermark]='getString(\"dynamicCheckboxWatermark\")'\r\n                class=\"k2-control textbox-border control-background choose-control-margin fadeMeIn\"\r\n                [k2Expression]=\"modelValue\"\r\n                (k2TextboxOnBlur)=\"onBlur()\">\r\n    </k2-text-box>\r\n</div>\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { IStates } from '../../../../../../types/models/rules/i-states';\r\nimport { IValidatedComponent } from '../../../../../../types/validation/i-validated-component';\r\nimport { ResourceService } from '../../../../../services/resource/resource.service';\r\nimport { States } from '../../../../../shared/control-helpers/states';\r\nimport { ChooseControlTypes } from '../../../../../shared/enums/choose-control/choose-control-types';\r\nimport { BaseResourceComponent } from '../../../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-choose-control-outcome-label',\r\n    templateUrl: './choose-control-outcome-label.component.html',\r\n    styleUrls: ['./choose-control-outcome-label.component.less']\r\n})\r\nexport class ChooseControlOutcomeLabelComponent extends BaseResourceComponent implements OnInit {\r\n\r\n    @Input() id: string;\r\n    @Input() displayText: string;\r\n    @Input() isChecked: boolean;\r\n    @Input() isDisabled: boolean;\r\n    @Input() isToggled: boolean;\r\n    @Input() modelValue: IValidatedComponent;\r\n    @Input() customLabelClass: string;\r\n    @Input() type: ChooseControlTypes;\r\n    //Control states for styling\r\n    @Input() states: IStates = new States();\r\n\r\n    @Output() onClick = new EventEmitter<void>();\r\n\r\n    widgetClass = '';\r\n    nonWidgetClass = '';\r\n    hovered = false;\r\n    types: typeof ChooseControlTypes = ChooseControlTypes;\r\n\r\n    constructor(protected resourceService: ResourceService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    onClicked(): void {\r\n        this.onClick.emit();\r\n    }\r\n\r\n}\r\n","<label for=\"{{id}}\" class=\"decision-outcome-usetask choose-control-label {{states.toString()}} {{customLabelClass}}\"\r\n       (mouseover)=\"states.add('hover')\"\r\n       (mouseout)=\"states.remove('hover')\"\r\n       (click)=\"onClicked()\">\r\n    <span class=\"icon icon-set-controls icon-size18 {{states.toString()}}\"\r\n          [class.ic-radiobutton]=\"type === types.radiobutton && !isChecked\"\r\n          [class.ic-radiobuttonselected]=\"type === types.radiobutton && isChecked && !isToggled\"\r\n          [class.hoverfocused]=\"states.isExist('hover') && states.isExist('focused')\">\r\n    </span>\r\n    <span class=\"display-text\" [innerHtml]=\"displayText\"></span>\r\n    <k2-badges [k2Model]=\"modelValue\" [toolTipText]='getFromResx(\"Wizards\", \"wizard_Decision_Rule_UseTask_Error_Badge\")|async'></k2-badges>\r\n</label>\r\n","import { Component, EventEmitter, Inject, Input, OnInit, Output } from '@angular/core';\r\nimport { IStates } from '../../../../../../types/models/rules/i-states';\r\nimport { IValidatedComponent } from '../../../../../../types/validation/i-validated-component';\r\nimport { ConfigurationService } from '../../../../../services/configuration/configuration-service';\r\nimport { ResourceService } from '../../../../../services/resource/resource.service';\r\nimport { UndoRedoServiceToken } from '../../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { States } from '../../../../../shared/control-helpers/states';\r\nimport IDropDownMenuItem from '../../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from '../../../../../shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from '../../../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { BaseResourceComponent } from '../../../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-choose-control-within-working-hours-label',\r\n    templateUrl: './choose-control-within-working-hours-label.component.html',\r\n    styleUrls: ['./choose-control-within-working-hours-label.component.less']\r\n})\r\nexport class ChooseControlWithinWorkingHoursLabelComponent extends BaseResourceComponent implements OnInit {\r\n    @Input() isChecked: boolean;\r\n    @Input() isDisabled: boolean;\r\n    @Input() isToggled: boolean;\r\n    @Input() isDynamicMode: boolean;\r\n    @Input() selectedValue: string;\r\n    @Input() additionalDropdownItems: IDropDownMenuItem[];\r\n    @Input() footerItems: IDropDownMenuItem[];\r\n    @Input() isDarkStyle: boolean;\r\n    @Input() modelValue: IValidatedComponent;\r\n    @Input() customLabelClass: string;\r\n    //Control states for styling\r\n    @Input() states: IStates = new States();\r\n\r\n    @Output() onClick = new EventEmitter<void>();\r\n\r\n    dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    dropdownMenuItemTemplates: typeof DropdownMenuItemTemplates = DropdownMenuItemTemplates;\r\n\r\n    workingHoursUrl: string;\r\n\r\n    constructor(resourceService: ResourceService,\r\n        @Inject(UndoRedoServiceToken) private undoRedoService: IUndoRedoService,\r\n        private configurationService: ConfigurationService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.workingHoursUrl = this.configurationService.getWorkingHoursUrl();\r\n    }\r\n\r\n    onClicked(): void {\r\n        this.onClick.emit();\r\n    }\r\n\r\n    itemSelected(): void {\r\n        this.undoRedoService.addUndoMarker();\r\n    }\r\n}\r\n","<label class=\"decision-outcome-usetask choose-control-label {{states.toString()}} {{customLabelClass}}\"\r\n       (mouseover)=\"states.add('hover')\"\r\n       (mouseleave)=\"states.remove('hover')\">\r\n    <span *ngIf=\"!isDarkStyle\" class=\"icon icon-set-controls icon-size18 {{states.toString()}}\" (click)=\"onClicked()\"\r\n          [ngClass]=\"{'ic-checkboxselected' : isChecked, 'ic-checkbox': !isChecked, 'hoverfocused': states.isExist('hover') && states.isExist('focused')}\">\r\n    </span>\r\n    <span *ngIf=\"isDarkStyle\" class=\"icon icon-set-controls icon-size18 {{states.toString()}}dark\" (click)=\"onClicked()\"\r\n          [ngClass]=\"{'ic-checkboxselecteddark' : isChecked, 'ic-checkboxdark': !isChecked, 'hoverfocused': states.isExist('hover') && states.isExist('focused')}\">\r\n    </span>\r\n    <span class=\"display-text\">\r\n        {{getFromResx('Resources', 'general_Within')|async}}\r\n        <a [class.disable-link]=\"isDisabled\" class=\"hyperlink-control primary\" target=\"_blank\" href=\"{{workingHoursUrl}}\">\r\n            {{getFromResx('Resources', 'general_WorkingHours')|async}}\r\n        </a>\r\n        <span [class.disable-link]=\"isDisabled !== true\" class=\"hyperlink-control primary\" style=\"cursor: default;\">\r\n            {{getFromResx('Resources', 'general_WorkingHours')|async}}\r\n        </span>\r\n        {{getFromResx('Resources', 'general_Only')|async}}\r\n        <span *ngIf=\"isDynamicMode\">\r\n            {{getFromResx('Resources', 'within_this_time_zone')|async}}\r\n        </span>\r\n        <k2-drop-down class=\"dropdown-inline\"\r\n                      [class.disable-link]=\"isDisabled\"\r\n                      *ngIf=\"!isDynamicMode\"\r\n                      [menuItems]=\"additionalDropdownItems\"\r\n                      [selectedItemKey]=\"selectedItemKey\"\r\n                      [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                      (onItemSelected)=\"itemSelected($event)\"\r\n                      [customMenuClass]=\"dd-zone-select\"\r\n                      [innerItemComponent]=\"dropdownMenuItemTemplates.OutcomeActionLink\"\r\n                      [footerItems]=\"footerItems\">\r\n            <a class=\"hyperlink-control primary\" title=\"selectedValue\">\r\n                {{selectedValue}}\r\n            </a>\r\n            <a role=\"button\" class=\"icon icon-set-interactive icon-size12 ic-dropdown display-text-ddicon\">\r\n            </a>\r\n        </k2-drop-down>\r\n        <span *ngIf=\"isDynamicMode\" [class.disable-link]=\"isDisabled !== true\" class=\"hyperlink-control primary\" style=\"cursor: default;\">\r\n            {{selectedValue}}\r\n        </span>\r\n        <span *ngIf=\"isDynamicMode\" [class.disable-link]=\"isDisabled !== true\">\r\n            <a role=\"button\" class=\"icon icon-set-interactive icon-size12 ic-dropdown display-text-ddicon\">\r\n            </a>\r\n        </span>\r\n    </span>\r\n</label>\r\n<div *ngIf=\"isDynamicMode\" class=\"dynamic-textbox-container\">\r\n    <k2-text-box class=\"k2-control control-background textbox-border dynamic-mode\"\r\n                 [k2Expression]=\"modelValue\"\r\n                 [k2Watermark]=\"getFromResx('Wizards', 'general_TypeDrop')|async\">\r\n    </k2-text-box>\r\n    <k2-drop-down class=\"dynamic-mode pull-right\"\r\n                  [menuItems]=\"additionalDropdownItems\"\r\n                  [selectedItemKey]=\"selectedItemKey\"\r\n                  [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                  (onItemSelected)=\"itemSelected($event)\"\r\n                  [customMenuClass]=\"dd-zone-select\"\r\n                  [innerItemComponent]=\"dropdownMenuItemTemplates.OutcomeActionLink\"\r\n                  [footerItems]=\"footerItems\">\r\n        <span class=\"dynamic-link-container\">\r\n            <a class=\"hyperlink-control primary\" title=\"{{selectedValue}}\">\r\n                {{selectedValue}}\r\n            </a>\r\n            <a role=\"button\" class=\"icon icon-set-interactive icon-size12 ic-dropdown display-text-ddicon drop-down\">\r\n            </a>\r\n        </span>\r\n    </k2-drop-down>\r\n</div>\r\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnInit, Output, ViewChild, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\r\nimport { DragDropService } from '../../../services/drag-drop/drag-drop.service';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\nimport { keyCodes } from '../../../shared/constants/general';\r\n\r\n@Component({\r\n    selector: 'k2-click-to-edit',\r\n    templateUrl: './click-to-edit.component.html',\r\n    styleUrls: ['./click-to-edit.component.less']\r\n})\r\nexport class ClickToEditComponent implements OnChanges {\r\n    @Input() public highlight: string;\r\n    @Input() public model: string;\r\n    @Input() public onEditFinished: Function;\r\n    @Input() public edit: boolean;\r\n\r\n    @Output() public modelChange = new EventEmitter<string>();\r\n    @Output() public cancelled = new EventEmitter<void>();\r\n    @Output() public editChange = new EventEmitter<boolean>();\r\n\r\n    @ViewChild('input') input: ElementRef<HTMLInputElement>;\r\n\r\n    tempValue: string;\r\n\r\n    constructor(protected sanitizer: DomSanitizer,\r\n        private _dragDropService: DragDropService,\r\n        @Inject(UndoRedoServiceToken) private _undoRedoService) { }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.highlight) {\r\n            this.onHighlight();\r\n        }\r\n        if (changes.edit?.currentValue) { // if it is in the changes list and true\r\n            this.tempValue = this.model; // set the temp value\r\n            this._dragDropService.disable();\r\n            setTimeout(() => {\r\n                this.input.nativeElement.select(); // select entire text\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * highlights the string to display, if highlight search string has been supplied\r\n     */\r\n    public onHighlight(): string | SafeHtml {\r\n        const val = this.model;\r\n        if (!this.highlight) return this.model;\r\n        const unsafe: string = val.replace(new RegExp(this.highlight, 'gi'), '<span class=\\'search-highlight\\'>$&</span>');\r\n        return this.sanitizer.bypassSecurityTrustHtml(unsafe); // angular dom sanitizer would remove/convert all the html unless it is bypassed.\r\n    }\r\n\r\n    public onClicked(): void {\r\n        this.tempValue = this.model;\r\n        this.edit = true;\r\n        this.editChange.emit(true);\r\n        this._dragDropService.disable();\r\n\r\n        this.input?.nativeElement?.focus();\r\n        setTimeout(() => {\r\n            this.input?.nativeElement?.focus();\r\n        });\r\n    }\r\n\r\n    public persist(): void {\r\n        this.edit = false;\r\n        this.editChange.emit(false);\r\n        this._dragDropService.enable();\r\n        if (typeof this.onEditFinished === 'function') {\r\n            const old = this.model;\r\n            this.model = this.tempValue;\r\n\r\n            const ok = this.onEditFinished(old, this.model);\r\n            if (!ok) {\r\n                this._undoRedoService.undo();\r\n                this.model = old;\r\n            }\r\n            this._undoRedoService.addUndoMarker();\r\n            this.modelChange.emit(this.model);\r\n        }\r\n        else {\r\n            this._undoRedoService.addUndoMarker();\r\n            this.model = this.tempValue;\r\n            this.modelChange.emit(this.model);\r\n        }\r\n    }\r\n\r\n    onKeyDown($event: KeyboardEvent): boolean {\r\n        switch ($event.keyCode) {\r\n            case keyCodes.ESCAPE:\r\n                $event.stopPropagation();\r\n                this.tempValue = this.model;\r\n                this.cancelled.emit();\r\n                return false;\r\n            case keyCodes.TAB:\r\n            case keyCodes.ENTER: this.persist();\r\n                break;\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n","<span [ngClass]=\"{'editMode' : edit}\" k2-tooltip-basic class=\"click-to-edit-parent\">\r\n    <span (click)=\"onClicked()\" class=\"click-to-edit\" *ngIf=\"!edit\" [innerHTML]=\"onHighlight()\"></span>\r\n    <input #input class=\"click-to-edit-text-area\"\r\n           style=\"display:block\"\r\n           *ngIf=\"edit\"\r\n           (keydown)=\"onKeyDown($event)\"\r\n           (blur)=\"persist()\"\r\n           [(ngModel)]=\"tempValue\" maxlength=\"128\" />\r\n</span>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport IDropDownMenuItem from '../../../../shared/enums/drop-down/drop-down-menu-item';\r\n\r\n@Component({\r\n    selector: 'drop-down-item-base',\r\n    templateUrl: './drop-down-item-base.component.html',\r\n    styleUrls: ['./drop-down-item-base.component.less']\r\n})\r\nexport class DropDownItemBaseComponent implements OnInit {\r\n    @Input() isFirst: boolean;\r\n    @Input() isLast: boolean;\r\n    @Input() item: IDropDownMenuItem;\r\n    @Input() isMultiSelect = false;\r\n\r\n    public dropdownHover: boolean;\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    getItemTitle(item: IDropDownMenuItem): string {\r\n        if (item?.titleBinding?.objectReference && item.titleBinding.propertyName?.length) {\r\n            return item.titleBinding.objectReference[item.titleBinding.propertyName];\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { DropDownItemBaseComponent } from '../../drop-down-item-base/drop-down-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-command-item',\r\n    templateUrl: './command-item.component.html',\r\n    styleUrls: ['./command-item.component.less']\r\n})\r\nexport class CommandItemComponent extends DropDownItemBaseComponent implements OnInit {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"control-row fix\">\r\n    <div class=\"flexrow\">\r\n        <div class=\"control-column fixed\" *ngIf=\"item.icon && item.icon.length > 0\">\r\n            <div class=\"flexrow k2-drop-down-item-icon vertical command-dropdown-icon-background \">\r\n                <span class=\"icon icon-size16 {{item.icon}}\" [ngClass]=\"{'selected': dropdownHover}\"></span>\r\n            </div>\r\n        </div>\r\n        <span class=\"k2-drop-down-item-text control-column float\" k2TooltipBasic=\"\">\r\n            {{item.title || getItemTitle(item)}}\r\n        </span>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { DropDownItemBaseComponent } from '../../drop-down-item-base/drop-down-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-default-item',\r\n    templateUrl: './default-item.component.html',\r\n    styleUrls: ['./default-item.component.less']\r\n})\r\nexport class DefaultItemComponent extends DropDownItemBaseComponent implements OnInit {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n}\r\n","<div class=\"control-row fix icon-mode-filled\">\r\n    <div class=\"flexrow \">\r\n        <div class=\"control-column fixed\" *ngIf=\"item.icon\">\r\n            <div class=\"flexrow k2-drop-down-item-icon vertical default-dropdown-icon-background\">\r\n                <span *ngIf=\"!item.isIconSvg\"\r\n                    [class]=\"' icon ' + item.icon\" \r\n                    [class.selected]=\"dropdownHover\" \r\n                    [class.icon-size16]=\"item.icon.indexOf('icon-size') < 0 || item.icon.indexOf('icon-size16') > -1\">\r\n                </span>\r\n                <svg class=\"icon icon-size24\" *ngIf=\"item.isIconSvg\">\r\n                    <use [attr.xlink:href]=\"'App_Themes/Designer/_svg/steps_medium.svg#'+item.icon\" />\r\n                </svg>\r\n            </div>\r\n        </div>\r\n        <span class=\"k2-drop-down-item-text control-column float\" k2TooltipBasic=\"\">\r\n            {{item.title || getItemTitle(item)}}\r\n        </span>\r\n        <!-- single selection -->\r\n        <div class=\"control-column fixed\" *ngIf=\"item.isSelected && !isMultiSelect\">\r\n            <div class=\"flexrow k2-drop-down-checked-icon vertical\">\r\n                <span class=\"icon icon-set-dropdownset icon-size16 ic-selectedrowindicator\" [ngClass]=\"{'hover' : dropdownHover}\"></span>\r\n            </div>\r\n        </div>\r\n        <!-- multiple selection -->\r\n        <div class=\"control-column fixed\" *ngIf=\"isMultiSelect && item.hideCheckbox !== true\">\r\n            <div class=\"flexrow k2-drop-down-checked-icon vertical\">\r\n                <span class=\"icon icon-set-controls icon-size18\"\r\n                      [ngClass]=\"{'ic-checkboxselected': item.isSelected, 'ic-checkbox': !item.isSelected, 'alt': dropdownHover, 'disabled': item.isDisabled}\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { DropDownItemBaseComponent } from '../../drop-down-item-base/drop-down-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-default-list-item',\r\n    templateUrl: './default-list-item.component.html',\r\n    styleUrls: ['./default-list-item.component.less']\r\n})\r\nexport class DefaultListItemComponent extends DropDownItemBaseComponent implements OnInit {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"control-row fix\">\r\n    <div class=\"flexrow\">\r\n        <div class=\"control-column fixed\" *ngIf=\"item.icon\">\r\n            <div class=\"flexrow k2-drop-down-item-icon vertical\">\r\n                <span [class]=\"'icon icon-size16 ' + item.icon\"\r\n                      [class.selected]=\"dropdownHover\"\r\n                      [class.alt]=\"dropdownHover\"></span>\r\n            </div>\r\n        </div>\r\n        <span class=\"k2-drop-down-item-text control-column float\" k2TooltipBasic=\"\">\r\n            {{item.title || getItemTitle(item)}}\r\n        </span>\r\n        <div class=\"control-column fixed\" *ngIf=\"item.isSelected\">\r\n            <div class=\"flexrow k2-drop-down-checked-icon vertical\">\r\n                <span class=\"icon icon-set-dropdownset icon-size16 ic-selectedrowindicator\" [ngClass]=\"{'hover' : dropdownHover}\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit, EventEmitter, Output } from '@angular/core';\r\nimport { DropDownItemBaseComponent } from '../../drop-down-item-base/drop-down-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-group-boolean-operator-expression-item',\r\n    templateUrl: './group-boolean-operator-expression-item.component.html',\r\n    styleUrls: ['./group-boolean-operator-expression-item.component.less']\r\n})\r\nexport class GroupBooleanOperatorExpressionItemComponent extends DropDownItemBaseComponent implements OnInit {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n\r\n}\r\n","<div class=\"control-row fix\">\r\n    <div class=\"flexrow group-boolean-expression-item\">\r\n        <div class=\"control-column fixed\" *ngIf=\"item.icon\">\r\n            <div class=\"flexrow k2-drop-down-item-icon vertical\">\r\n                <span class=\"{{item.icon}}\" [ngClass]=\"{'hover': dropdownHover }\"></span>\r\n            </div>\r\n        </div>\r\n\r\n        <span class=\"k2-drop-down-item-text control-column float\" k2TooltipBasic=\"\">\r\n            {{item.title || getItemTitle(item)}}\r\n        </span>\r\n\r\n        <div class=\"control-column fixed\" *ngIf=\"item.isSelected\">\r\n            <div class=\"flexrow k2-drop-down-checked-icon vertical\">\r\n                <span class=\"icon icon-set-dropdownset icon-size16 ic-selectedrowindicator\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { DropDownItemBaseComponent } from '../../drop-down-item-base/drop-down-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-item-disabled',\r\n    templateUrl: './item-disabled.component.html',\r\n    styleUrls: ['./item-disabled.component.less']\r\n})\r\nexport class ItemDisabledComponent extends DropDownItemBaseComponent implements OnInit {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"control-row fix item-disabled\">\r\n    <div class=\"flexrow\">\r\n        <div class=\"control-column fixed\" *ngIf=\"item.icon && item.icon.length > 0\">\r\n            <div class=\"flexrow k2-drop-down-item-icon vertical default-dropdown-icon-background\">\r\n                <span class=\"icon icon-size16 {{item.icon}}\" [ngClass]=\"{'selected': dropdownHover}\"></span>\r\n            </div>\r\n        </div>\r\n        <span class=\"k2-drop-down-item-text control-column float\" k2TooltipBasic=\"\">\r\n            {{item.title || getItemTitle(item)}}\r\n        </span>\r\n        <div class=\"control-column fixed\" *ngIf=\"item.isSelected\">\r\n            <div class=\"flexrow k2-drop-down-checked-icon vertical\">\r\n                <span class=\"icon icon-set-dropdownset icon-size16 ic-selectedrowindicator\" [ngClass]=\"{'hover': dropdownHover}\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { DropDownItemBaseComponent } from '../../drop-down-item-base/drop-down-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-outcome-action-autoname',\r\n    templateUrl: './outcome-action-autoname.component.html',\r\n    styleUrls: ['./outcome-action-autoname.component.less']\r\n})\r\nexport class OutcomeActionAutonameComponent extends DropDownItemBaseComponent implements OnInit {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"control-row fix\">\r\n    <div class=\"flexrow outcome-dropdown\">\r\n        <div class=\"control-column fixed\">\r\n            <div class=\"flexrow vertical unlinked-checkbox\">\r\n                <span class=\"icon icon-set-checkbox icon-size18\" [ngClass]=\"item.isSelected ? 'ic-checked': 'ic-unchecked'\"></span>\r\n            </div>\r\n        </div>\r\n        <input type=\"text\" disabled class=\"control-column float\" value=\"{{item.title}}\" />\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { DropDownItemBaseComponent } from '../../drop-down-item-base/drop-down-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-outcome-action-link-item',\r\n    templateUrl: './outcome-action-link.component.html',\r\n    styleUrls: ['./outcome-action-link.component.less']\r\n})\r\nexport class OutcomeActionLinkComponent extends DropDownItemBaseComponent implements OnInit {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"control-row fix\">\r\n\r\n    <div class=\"flexrow outcome-dropdown\">\r\n        <div class=\"control-column fixed\" *ngIf=\"item.icon\">\r\n            <div class=\"flexrow k2-drop-down-item-icon vertical voting-icon-background {{item.additionalValueProperty}}\">\r\n                <span class=\"icon {{item.icon}}\"></span>\r\n            </div>\r\n        </div>\r\n\r\n        <span class=\"k2-drop-down-item-text control-column float\" k2TooltipBasic=\"\">\r\n            {{item.title || getItemTitle(item)}}\r\n        </span>\r\n\r\n        <div class=\"control-column fixed\" *ngIf=\"item.isSelected\">\r\n            <div class=\"flexrow k2-drop-down-checked-icon vertical\">\r\n                <span class=\"icon icon-set-dropdownset icon-size16 ic-selectedrowindicator\" [class.hover]=\"dropdownHover\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { DropDownItemBaseComponent } from '../../drop-down-item-base/drop-down-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-recipient-item',\r\n    templateUrl: './recipient-item.component.html',\r\n    styleUrls: ['./recipient-item.component.less']\r\n})\r\nexport class RecipientItemComponent extends DropDownItemBaseComponent implements OnInit {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div>\r\n    <div class=\"item-icon item-icon-background data-type\" *ngIf=\"item.icon\">\r\n        <span class=\"icon icon-size16 {{item.icon}}\"></span>\r\n    </div>\r\n    <div class=\"item-main\">\r\n        {{item.title || getItemTitle(item)}}\r\n    </div>\r\n    <div class=\"item-icon\" *ngIf=\"item.isSelected\">\r\n        <span class=\"icon icon-set-dropdownset icon-size16 ic-selectedrowindicator\"></span>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { DropDownItemBaseComponent } from '../../drop-down-item-base/drop-down-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-reference-item',\r\n    templateUrl: './reference-item.component.html',\r\n    styleUrls: ['./reference-item.component.less']\r\n})\r\nexport class ReferenceItemComponent extends DropDownItemBaseComponent implements OnInit {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"control-row fix\">\r\n    <div class=\"flexrow\">\r\n        <div class=\"control-column fixed\">\r\n            <div class=\"flexrow k2-drop-down-item-icon vertical reference-item-dropdown-icon-background\">\r\n                <span class=\"icon icon-size16 {{item.icon}}\"></span>\r\n            </div>\r\n        </div>\r\n        <span class=\"k2-drop-down-item-text control-column float\" k2TooltipBasic=\"\">\r\n            {{item.title || getItemTitle(item)}}\r\n        </span>\r\n        <div class=\"control-column fixed\" *ngIf=\"item.isSelected\">\r\n            <div class=\"flexrow k2-drop-down-checked-icon vertical\">\r\n                <span class=\"icon icon-set-dropdownset icon-size16 ic-selectedrowindicator\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { DropDownItemBaseComponent } from '../../drop-down-item-base/drop-down-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-reference-multi-item',\r\n    templateUrl: './reference-multi-item.component.html',\r\n    styleUrls: ['./reference-multi-item.component.less']\r\n})\r\nexport class ReferenceMultiItemComponent extends DropDownItemBaseComponent implements OnInit {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"control-row fix\">\r\n    <div class=\"flexrow\">\r\n        <div class=\"control-column fixed\">\r\n            <div class=\"flexrow k2-drop-down-item-icon vertical reference-item-dropdown-icon-background\">\r\n                <span class=\"icon icon-size16 {{item.icon}}\"></span>\r\n            </div>\r\n        </div>\r\n        <span class=\"k2-drop-down-item-text control-column float\" k2TooltipBasic=\"\">\r\n            {{item.title || getItemTitle(item)}}\r\n        </span>\r\n        <div class=\"control-column fixed\" *ngIf=\"item.isSelected\">\r\n            <div class=\"flexrow k2-drop-down-checked-icon vertical\">\r\n                <span class=\"icon icon-set-dropdownset icon-size16 ic-selectedrowindicator\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { DropDownItemBaseComponent } from '../../drop-down-item-base/drop-down-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-rules-destination-set-item',\r\n    templateUrl: './rules-destination-set-item.component.html',\r\n    styleUrls: ['./rules-destination-set-item.component.less']\r\n})\r\nexport class RulesDestinationSetItemComponent extends DropDownItemBaseComponent implements OnInit {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"control-row fix\">\r\n    <div class=\"flexrow\">\r\n        <span class=\"k2-drop-down-item-text control-column float\" k2TooltipBasic=\"\">\r\n            {{item.title || getItemTitle(item)}}\r\n        </span>\r\n        <div class=\"control-column fixed\" *ngIf=\"item.isSelected\">\r\n            <div class=\"flexrow k2-drop-down-checked-icon vertical\">\r\n                <span class=\"icon icon-set-dropdownset icon-size16 ic-selectedrowindicator\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { DropDownItemBaseComponent } from '../../drop-down-item-base/drop-down-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-rules-outcome-item',\r\n    templateUrl: './rules-outcome-item.component.html',\r\n    styleUrls: ['./rules-outcome-item.component.less']\r\n})\r\nexport class RulesOutcomeItemComponent extends DropDownItemBaseComponent implements OnInit {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"control-row fix\">\r\n    <div class=\"flexrow rule-designer-outcome-menu-item\"\r\n         [ngClass]=\"{'last' : isLast, 'first' : isFirst, 'hover' : dropdownHover }\">\r\n        <div class=\"control-column fixed\" *ngIf=\"item.icon\">\r\n            <div class=\"flexrow k2-drop-down-item-icon vertical\"\r\n                 [ngClass]=\"{'singleRecipient' : item.titleBinding && item.titleBinding.objectReference ? item.titleBinding.objectReference.isRecipient : false}\">\r\n                <span class=\"icon icon-set-picker icon-size24 {{item.icon}}\"></span>\r\n            </div>\r\n        </div>\r\n        <span [ngClass]=\"{'invalid' : item.additionalValueProperty ? item.additionalValueProperty.invalid : false}\"\r\n              class=\"k2-drop-down-item-text control-column float\" k2TooltipBasic=\"\">\r\n            {{item.title || getItemTitle(item)}}\r\n        </span>\r\n        <!-- single selection -->\r\n        <div class=\"control-column fixed\" *ngIf=\"item.isSelected && !isMultiSelect\">\r\n            <div class=\"flexrow k2-drop-down-checked-icon vertical\">\r\n                <span class=\"icon icon-set-dropdownset icon-size16 ic-selectedrowindicator\" [ngClass]=\"{'hover' : dropdownHover}\"></span>\r\n            </div>\r\n        </div>\r\n        <!-- multiple selection -->\r\n        <div class=\"control-column fixed\" *ngIf=\"isMultiSelect\">\r\n            <div class=\"flexrow k2-drop-down-checked-icon vertical\">\r\n                <span class=\"icon icon-set-controls icon-size18\"\r\n                      [ngClass]=\"{'ic-checkboxselected': item.isSelected, 'ic-checkbox': !item.isSelected, 'alt': hoverItem, 'disabled': item.additionalValueProperty?.invalid}\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { DropDownItemBaseComponent } from '../../drop-down-item-base/drop-down-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-simple-expression-operator-item',\r\n    templateUrl: './simple-expression-operator-item.component.html',\r\n    styleUrls: ['./simple-expression-operator-item.component.less']\r\n})\r\nexport class SimpleExpressionOperatorItemComponent extends DropDownItemBaseComponent implements OnInit {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"control-row fix\">\r\n    <div class=\"flexrow\">\r\n        <div class=\"control-column fixed\" *ngIf=\"item.icon && item.icon.length > 0\">\r\n            <div class=\"flexrow k2-drop-down-item-icon vertical default-dropdown-icon-background\">\r\n                <span class=\"icon icon-size16 {{item.icon}}\" [ngClass]=\"{'selected': dropdownHover}\"></span>\r\n            </div>\r\n        </div>\r\n        <span class=\"k2-drop-down-item-text control-column float\" k2TooltipBasic=\"\">\r\n            {{item.title || getItemTitle(item)}}\r\n        </span>\r\n        <div class=\"control-column fixed\" *ngIf=\"item.isSelected\">\r\n            <div class=\"flexrow k2-drop-down-checked-icon vertical\">\r\n                <span class=\"icon icon-set-dropdownset icon-size16 ic-selectedrowindicator\" [ngClass]=\"{'hover': dropdownHover}\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { DropDownItemBaseComponent } from '../../drop-down-item-base/drop-down-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-smart-field-smo-filter-item',\r\n    templateUrl: './smart-field-smo-filter-item.component.html',\r\n    styleUrls: ['./smart-field-smo-filter-item.component.less']\r\n})\r\nexport class SmartFieldSmoFilterItemComponent extends DropDownItemBaseComponent implements OnInit {\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"control-row fix\">\r\n    <div class=\"flexrow\">\r\n        <div class=\"control-column fixed\" *ngIf=\"item.icon && item.icon.length > 0\">\r\n            <div class=\"flexrow k2-drop-down-item-icon vertical default-dropdown-icon-background\">\r\n                <span class=\"icon icon-size16 {{item.icon}}\"></span>\r\n            </div>\r\n        </div>\r\n        <span class=\"k2-drop-down-item-text control-column float\" k2TooltipBasic=\"\">\r\n            {{item.title || getItemTitle(item)}}\r\n        </span>\r\n        <div class=\"control-column fixed\" *ngIf=\"item.isSelected\">\r\n            <div class=\"flexrow k2-drop-down-checked-icon vertical\">\r\n                <span class=\"icon icon-set-dropdownset icon-size16 ic-selectedrowindicator\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Input, OnInit, Output, EventEmitter, HostBinding, HostListener } from '@angular/core';\r\nimport { DropdownMenuItemTemplates } from 'src/app/shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport IDropDownMenuItem from '../../../../shared/enums/drop-down/drop-down-menu-item';\r\n\r\n@Component({\r\n    selector: '[k2DropDownMenuItem]',\r\n    templateUrl: './drop-down-menu-item.component.html',\r\n})\r\nexport class DropDownMenuItemComponent implements OnInit {\r\n\r\n    @Input() isFirst: boolean;\r\n    @Input() isLast: boolean;\r\n    @Input() isMultiSelect: boolean;\r\n    @Input() item: IDropDownMenuItem;\r\n    @Input() innerItemComponent: DropdownMenuItemTemplates;\r\n\r\n    @Output()\r\n    public onItemSelected: EventEmitter<IDropDownMenuItem>\r\n                        = new EventEmitter<IDropDownMenuItem>();\r\n\r\n    @HostBinding('class.separator')\r\n    private isSeparator = false;\r\n\r\n    @HostBinding('class.disabled')\r\n    private isDisabled = false;\r\n\r\n    @HostBinding('class.hover')\r\n    public dropdownHover: boolean;\r\n\r\n    public dropdownMenuItemTemplates: typeof DropdownMenuItemTemplates = DropdownMenuItemTemplates;\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit(): void {\r\n        this.isSeparator = this.item.isSeparator;\r\n        this.isDisabled = this.item.isDisabled;\r\n    }\r\n\r\n    @HostListener('mouseup', ['$event'])\r\n    selectItem(evt): void{\r\n        evt.stopPropagation();\r\n\r\n        if(typeof this.item.onSelected === 'function'){\r\n            this.item.onSelected(this.item);\r\n        }\r\n\r\n        this.onItemSelected.emit(this.item);\r\n    }\r\n\r\n    @HostListener('mouseenter')\r\n    onMouseEnter() {\r\n        this.dropdownHover = true;\r\n    }\r\n\r\n    @HostListener('mouseleave')\r\n    onMouseLeave() {\r\n        this.dropdownHover = false;\r\n    }\r\n\r\n}\r\n","<ng-container *ngIf=\"!item.templateRef\">\r\n    <container-element [ngSwitch]=\"innerItemComponent\">\r\n        <k2-command-item *ngSwitchCase=\"dropdownMenuItemTemplates.Command\" [item]=\"item\" [isMultiSelect]=\"isMultiSelect\">\r\n        </k2-command-item>\r\n        <k2-group-boolean-operator-expression-item *ngSwitchCase=\"dropdownMenuItemTemplates.GroupBooleanOperatorExpression\" [item]=\"item\" [isMultiSelect]=\"isMultiSelect\">\r\n        </k2-group-boolean-operator-expression-item>\r\n        <k2-item-disabled *ngSwitchCase=\"dropdownMenuItemTemplates.Disabled\" [item]=\"item\" [isMultiSelect]=\"isMultiSelect\">\r\n        </k2-item-disabled>\r\n        <k2-outcome-action-autoname *ngSwitchCase=\"dropdownMenuItemTemplates.OutcomeActionAutoname\" [item]=\"item\" [isMultiSelect]=\"isMultiSelect\">\r\n        </k2-outcome-action-autoname>\r\n        <k2-outcome-action-link-item *ngSwitchCase=\"dropdownMenuItemTemplates.OutcomeActionLink\" [item]=\"item\" [isMultiSelect]=\"isMultiSelect\">\r\n        </k2-outcome-action-link-item>\r\n        <k2-reference-item *ngSwitchCase=\"dropdownMenuItemTemplates.Reference\" [item]=\"item\" [isMultiSelect]=\"isMultiSelect\">\r\n        </k2-reference-item>\r\n        <k2-reference-multi-item *ngSwitchCase=\"dropdownMenuItemTemplates.ReferenceMulti\" [item]=\"item\" [isMultiSelect]=\"isMultiSelect\">\r\n        </k2-reference-multi-item>\r\n        <k2-rules-destination-set-item *ngSwitchCase=\"dropdownMenuItemTemplates.RulesDestinationSet\" [item]=\"item\" [isMultiSelect]=\"isMultiSelect\">\r\n        </k2-rules-destination-set-item>\r\n        <k2-rules-outcome-item *ngSwitchCase=\"dropdownMenuItemTemplates.RulesOutcome\" [item]=\"item\" [isMultiSelect]=\"isMultiSelect\" [isFirst]=\"isFirst\" [isLast]=\"isLast\">\r\n        </k2-rules-outcome-item>\r\n        <k2-simple-expression-operator-item *ngSwitchCase=\"dropdownMenuItemTemplates.SimpleExpressionOperator\" [item]=\"item\" [isMultiSelect]=\"isMultiSelect\">\r\n        </k2-simple-expression-operator-item>\r\n        <k2-smart-field-smo-filter-item *ngSwitchCase=\"dropdownMenuItemTemplates.SmartFieldSmoFilter\" [item]=\"item\" [isMultiSelect]=\"isMultiSelect\">\r\n        </k2-smart-field-smo-filter-item>\r\n        <k2-default-list-item *ngSwitchCase=\"dropdownMenuItemTemplates.DefaultListItem\" [item]=\"item\" [isMultiSelect]=\"isMultiSelect\">\r\n        </k2-default-list-item>\r\n        <k2-recipient-item *ngSwitchCase=\"dropdownMenuItemTemplates.Recipient\" [item]=\"item\" [isMultiSelect]=\"isMultiSelect\">\r\n        </k2-recipient-item>\r\n        <k2-default-item *ngSwitchDefault [item]=\"item\" [isMultiSelect]=\"isMultiSelect\">\r\n        </k2-default-item>\r\n    </container-element>\r\n</ng-container>\r\n<ng-container *ngIf=\"item.templateRef\">\r\n    <ng-container *ngTemplateOutlet=\"item.templateRef; context: { $implicit: this }\">\r\n    </ng-container>\r\n</ng-container>\r\n","import { ChangeDetectorRef, Component, ElementRef, EventEmitter, HostListener, Inject, Input, NgZone, OnChanges, OnDestroy, OnInit, Output, Renderer2, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { DropDownService } from 'src/app/services/drop-down/drop-down.service';\r\nimport { DropDownMenuAlignment } from 'src/app/shared/enums/drop-down/drop-down-menu-alignment';\r\nimport { DropdownMenuItemTemplates } from 'src/app/shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from 'src/app/shared/enums/drop-down/drop-down-triangle-position';\r\nimport { shortUid } from '../../../../shared/utils/general';\r\nimport IDropDownMenuItem from '../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { fromEvent, Subject, Subscription } from 'rxjs';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport { defaultDebounceTime } from '../../../../shared/constants/general';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { ScrollEvent } from '../../../../../types/events/scrollbar/scroll.event';\r\nimport { scrollbar } from '../../../../shared/constants/scroll-bar';\r\nimport { IEnvironmentService } from 'src/types/services/environment/i-environment-service';\r\nimport { EnvironmentServiceToken } from 'src/app/services/environment/environment-service-factory';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { BaseResourceComponent } from '../../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-drop-down-menu',\r\n    templateUrl: './drop-down-menu.component.html',\r\n    styleUrls: ['./drop-down-menu.component.less']\r\n})\r\nexport class DropDownMenuComponent extends BaseResourceComponent implements OnInit, OnChanges, OnDestroy {\r\n\r\n    @Input() selectedItems: IDropDownMenuItem[] = [];\r\n    @Input() customMenuClass: string;\r\n    @Input() states: any[] = [];\r\n    @Input() footerItems: IDropDownMenuItem[] = [];\r\n    @Input() isMenuExpanded = false;\r\n    @Input() isMultiSelect = false;\r\n    @Input() parentDropdown: HTMLElement;\r\n    @Input() menuAlignment: DropDownMenuAlignment = DropDownMenuAlignment.centered;\r\n    @Input() trianglePosition: DropDownMenuTrianglePosition = null;\r\n    @Input() innerItemComponent: DropdownMenuItemTemplates;\r\n    @Input() emptyStateTemplate = '';\r\n    @Input() searchText: string;\r\n    @Input() menuAlignElement: HTMLElement;\r\n    @Input() set menuItems(val: IDropDownMenuItem[] | (() => IDropDownMenuItem[])) {\r\n        if (typeof (val) === 'function') {\r\n            this._retrieveMenuItems = val;\r\n        } else {\r\n            this._menuItems = val;\r\n        }\r\n    };\r\n\r\n    get menuItems(): IDropDownMenuItem[] {\r\n        return this._menuItems;\r\n    }\r\n\r\n    @Output() onItemSelected: EventEmitter<IDropDownMenuItem> = new EventEmitter<IDropDownMenuItem>();\r\n    @Output() isMenuExpandedChange = new EventEmitter<boolean>();\r\n\r\n    @ViewChild('menu') menuElement: ElementRef;\r\n\r\n    public dropdownHover: boolean;\r\n    public k2DropdownPositioning: any = {\r\n        'z-index': '10000000',\r\n        position: 'absolute',\r\n        top: '-5px',\r\n        'min-width': '0px'\r\n    };\r\n\r\n    public menuIndex = -1;\r\n    public menuId = '';\r\n\r\n    private _menuItems: IDropDownMenuItem[] = [];\r\n    private _retrieveMenuItems: () => IDropDownMenuItem[];\r\n    private _outsideClickListener: () => void;\r\n    private _menuPositionSubscription: Subscription;\r\n    private _scrollEventSubscription: Subscription;\r\n    private _menuElementMoved = false;\r\n    //default top position for rendering menu off-screen\r\n    private defaultTop = -10000;\r\n\r\n    private get _triangleHeight() {\r\n        return !!this.trianglePosition ? 11 : 1;\r\n    }\r\n\r\n    constructor(public element: ElementRef,\r\n        private _renderer: Renderer2,\r\n        private _changeRef: ChangeDetectorRef,\r\n        private _dropDownService: DropDownService,\r\n        private _eventService: EventNotifierService,\r\n        private _zone: NgZone,\r\n        @Inject(EnvironmentServiceToken) private environmentService: IEnvironmentService,\r\n        protected resourceService: ResourceService) {\r\n        super(resourceService);\r\n    };\r\n\r\n    ngOnInit(): void {\r\n        this.menuIndex = this._dropDownService.registerMenu(this);\r\n        this.menuId = `dd_${shortUid()}_${this.menuIndex}`;\r\n        this.menuAlignElement = this.menuAlignElement || this.parentDropdown;\r\n\r\n        // Wrap event listener outside angular zone to prevent angular change detection from causing performance hit\r\n        this._zone.runOutsideAngular(() => {\r\n            // Window resize event\r\n            this._menuPositionSubscription = fromEvent(window, 'resize')\r\n                .pipe(debounceTime(defaultDebounceTime))\r\n                .subscribe(() => {\r\n                    this._rePositionMenu();\r\n                });\r\n        });\r\n\r\n        //Note - this event gets triggered from scrollbar.component and legacy k2Scrollbar\r\n        this._scrollEventSubscription = this._eventService.subscribe(scrollbar.events.scrollEvent, (event: ScrollEvent) => {\r\n            if (!event?.source?.nativeElement?.className ||\r\n                event?.source?.nativeElement?.className?.indexOf('k2-dropdown') === -1) {\r\n                //Only collapse if not the dropdown's scrollbar\r\n                this.collapseMenu();\r\n            }\r\n        });\r\n\r\n        //Set the event notifier service in legacy environment service, so that it can be used to notify from legacy scrollbar\r\n        this.environmentService.eventNotifierService = this._eventService;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this._dropDownService.deRegisterMenu(this);\r\n        if (this._menuElementMoved) {\r\n            //Because this element has been moved outside container, it does not automatically get cleaned up on destroy\r\n            document.getElementById(this.menuId)?.closest('k2-drop-down-menu').remove();\r\n        }\r\n        this._menuPositionSubscription?.unsubscribe();\r\n        this._scrollEventSubscription?.unsubscribe();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.menuAlignElement && this.isMenuExpanded) {\r\n            this._rePositionMenu();\r\n        }\r\n    }\r\n\r\n    selectItem(item: IDropDownMenuItem): void {\r\n        if (!item.isSeparator && !item.isDisabled) {\r\n            if (!this.isMultiSelect) {\r\n                this.collapseMenu();\r\n            } else {\r\n                setTimeout(() => { // update position once the dom has been updated\r\n                    this._rePositionMenu();\r\n                }, 0);\r\n            }\r\n\r\n            this.setSelectedItems(item);\r\n            this.onItemSelected.emit(item);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This method is called to execute when a Dropdown Item is selected to determine the selected item's key to change its altered state to the opposite\r\n     */\r\n    private setSelectedItems(selectedDropdownItem: IDropDownMenuItem): void {\r\n        if (selectedDropdownItem?.ignoreUpdateSelection !== true) {\r\n\r\n            if (this.isMultiSelect !== true) {\r\n                for (let i = 0; i < this.selectedItems.length; i++) {\r\n                    this.selectedItems[i].isSelected = false;\r\n                }\r\n\r\n                this.selectedItems.length = 0;\r\n                selectedDropdownItem.isSelected = true;\r\n                this.selectedItems.push(selectedDropdownItem);\r\n\r\n                //Set the selection state of the items\r\n                for (let i = 0; i < this.menuItems.length; i++) {\r\n                    if (this.menuItems[i].key && this.menuItems[i].key !== 'browse' && this.menuItems[i].key !== 'seperator') {\r\n                        this.menuItems[i].isSelected = this.menuItems[i].key === selectedDropdownItem.key;\r\n                    }\r\n                }\r\n\r\n                this.footerItems.forEach((i: IDropDownMenuItem) => { i.isSelected = selectedDropdownItem.key === i.key; });\r\n            } else {\r\n                if (selectedDropdownItem.isSelected) {\r\n                    selectedDropdownItem.isSelected = false;\r\n                    this.selectedItems.splice(this.selectedItems.indexOf(selectedDropdownItem), 1);\r\n                } else {\r\n                    selectedDropdownItem.isSelected = true;\r\n                    this.selectedItems.push(selectedDropdownItem);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private _rePositionMenu = (): void => {\r\n        if (!this.isMenuExpanded) return;\r\n\r\n        this._updatePosition();\r\n        this._checkPopupVerticalLocation();\r\n    };\r\n\r\n    private _checkPopupVerticalLocation = (): void => {\r\n\r\n        const pageHeight: number = window.innerHeight;\r\n\r\n        const menuElement = this.menuElement.nativeElement as HTMLElement;\r\n        //Drop-down parent control\r\n        const parentPosition = (this.menuAlignElement as HTMLElement).getBoundingClientRect();\r\n        //Drop-down menu element that opens up\r\n        const menuPosition = menuElement.getBoundingClientRect();\r\n        //Top position of parent drop-down element\r\n        const parentElementTop = parentPosition.top;\r\n        //Height of drop-down menu element that opens up\r\n        const menuElementHeight = menuPosition.height;\r\n        //Height of parent drop-down element\r\n        const parentHeight = parentPosition.height;\r\n\r\n        if (parentElementTop + menuElementHeight + parentHeight < pageHeight) {\r\n            //There is space, no need to flip\r\n            return;\r\n        }\r\n\r\n        const spaceBottom = pageHeight - parentElementTop;\r\n        const spaceTop = parentElementTop - this._triangleHeight - parentHeight;\r\n\r\n        //Is there more space top or bottom of dropdown element?\r\n        if (spaceTop > spaceBottom) {\r\n            //Display above\r\n            this.k2DropdownPositioning.top = (parentElementTop - this._triangleHeight - menuElementHeight - 2) + 'px';\r\n\r\n            if (this.menuAlignment === DropDownMenuAlignment.centered) {\r\n                this.flipTriangle(true, menuElement, this.trianglePosition);\r\n            }\r\n            else {\r\n                menuElement.classList.add('with-border');\r\n            }\r\n        }\r\n        else {\r\n            this.flipTriangle(false, menuElement, this.trianglePosition);\r\n        }\r\n\r\n    };\r\n\r\n    private _updatePosition = (): void => {\r\n        const targetPosition = (this.menuAlignElement as HTMLElement).getBoundingClientRect();\r\n        const menuElement = this.menuElement.nativeElement as HTMLElement;\r\n        const menuPosition = menuElement.getBoundingClientRect();\r\n\r\n        if (this.menuAlignment === DropDownMenuAlignment.centered) {\r\n            const newOffsetTop = targetPosition.top + targetPosition.height;\r\n            const width = menuPosition.width < targetPosition.width ? targetPosition.width : menuPosition.width;\r\n            this.k2DropdownPositioning.top = newOffsetTop + 2 + this._triangleHeight + 'px';\r\n            this.k2DropdownPositioning['min-width'] = targetPosition.width + 'px';\r\n\r\n            switch (this.trianglePosition) {\r\n                case 'left':\r\n                    menuElement.classList.add('k2-dropdown-before-arrow-left');\r\n                    this.k2DropdownPositioning.left = targetPosition.left + 'px';\r\n                    break;\r\n\r\n                case 'right':\r\n                    menuElement.classList.add('k2-dropdown-before-arrow-right');\r\n                    this.k2DropdownPositioning.left = (targetPosition.left - width + targetPosition.width + 1) + 'px';\r\n                    break;\r\n\r\n                case 'center':\r\n                    menuElement.classList.add('k2-dropdown-before-arrow-center');\r\n                default:\r\n                    this.k2DropdownPositioning.left = (targetPosition.left + (targetPosition.width / 2) - (width / 2)) + 'px';\r\n                    break;\r\n            }\r\n\r\n        } else if (this.menuAlignment === DropDownMenuAlignment.leftEdge) {\r\n            this.k2DropdownPositioning.top = targetPosition.top + targetPosition.height + 1 + 'px';\r\n            this.k2DropdownPositioning.left = targetPosition.left + 'px';\r\n            this.k2DropdownPositioning['min-width'] = targetPosition.width + 'px';\r\n        } else if (this.menuAlignment === DropDownMenuAlignment.rightEdge) {\r\n            const newOffsetTop = targetPosition.top + targetPosition.height;\r\n            this.k2DropdownPositioning.top = newOffsetTop + 2 + this._triangleHeight + 'px';\r\n            const width = menuPosition.width < targetPosition.width ? targetPosition.width : menuPosition.width;\r\n            this.k2DropdownPositioning.left = (targetPosition.left + targetPosition.width - width) + 'px';\r\n            this.k2DropdownPositioning['min-width'] = targetPosition.width + 'px';\r\n        }\r\n\r\n        //Ensure triangle is pointing upward\r\n        this.flipTriangle(false, menuElement, this.trianglePosition);\r\n    };\r\n\r\n    private setDefaultPosition(): void {\r\n        const menuElement = this.menuElement.nativeElement;\r\n        const targetElement = this.menuAlignElement;\r\n\r\n        //Clear dropdown position css class\r\n        menuElement?.classList.remove('k2-dropdown-before-arrow-left');\r\n        menuElement?.classList.remove('k2-dropdown-before-arrow-right');\r\n        menuElement?.classList.remove('k2-dropdown-before-arrow-center');\r\n        menuElement?.classList.remove('k2-dropdown-after-arrow-left');\r\n        menuElement?.classList.remove('k2-dropdown-after-arrow-right');\r\n        menuElement?.classList.remove('k2-dropdown-after-arrow-center');\r\n\r\n        this.k2DropdownPositioning.top = this.defaultTop + 'px';\r\n        this.k2DropdownPositioning['min-width'] = targetElement.offsetWidth + 'px';\r\n    }\r\n\r\n    private flipTriangle = (flipToBottom: boolean, element: HTMLElement, trianglePosition: string): void => {\r\n\r\n        if (flipToBottom) {\r\n            if (trianglePosition === DropDownMenuTrianglePosition.left) {\r\n                element.classList.remove('k2-dropdown-before-arrow-left');\r\n                element.classList.add('k2-dropdown-after-arrow-left');\r\n            } else if (trianglePosition === DropDownMenuTrianglePosition.right) {\r\n                element.classList.remove('k2-dropdown-before-arrow-right');\r\n                element.classList.add('k2-dropdown-after-arrow-right');\r\n            } else if (trianglePosition === DropDownMenuTrianglePosition.center) {\r\n                element.classList.remove('k2-dropdown-before-arrow-center');\r\n                element.classList.add('k2-dropdown-after-arrow-center');\r\n            }\r\n        } else {\r\n            if (trianglePosition === DropDownMenuTrianglePosition.left) {\r\n                element.classList.remove('k2-dropdown-after-arrow-left');\r\n                element.classList.add('k2-dropdown-before-arrow-left');\r\n            } else if (trianglePosition === DropDownMenuTrianglePosition.right) {\r\n                element.classList.remove('k2-dropdown-after-arrow-right');\r\n                element.classList.add('k2-dropdown-before-arrow-right');\r\n            } else if (trianglePosition === DropDownMenuTrianglePosition.center) {\r\n                element.classList.remove('k2-dropdown-after-arrow-center');\r\n                element.classList.add('k2-dropdown-before-arrow-center');\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * MouseUp listener to just stop propagation. Otherwise it will bubble through to the closeMenu mouseup event on the document\r\n     * Close all other dropdown menus\r\n     *\r\n     * @param evt mouseup event\r\n     */\r\n    @HostListener('mouseup', ['$event'])\r\n    onMouseUp(evt) {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n    }\r\n\r\n    toggleMenu(): void {\r\n        if (!this.isMenuExpanded) {\r\n            this.expandMenu();\r\n        } else {\r\n            this.collapseMenu();\r\n        }\r\n    }\r\n\r\n    expandMenu(): void {\r\n        if (!this.isMenuExpanded) {\r\n            this._dropDownService.collapseAllExcept(this);\r\n            if (this._retrieveMenuItems) this._menuItems = this._retrieveMenuItems();\r\n\r\n            this.isMenuExpanded = true;\r\n            this.isMenuExpandedChange.emit(this.isMenuExpanded);\r\n            this.moveMenuElement();\r\n\r\n            this.setDefaultPosition();\r\n            this.whenDropdownRenderedExecute(() => {\r\n\r\n                this._updatePosition();\r\n                this._checkPopupVerticalLocation();\r\n\r\n                // Listener on the document to close the menu when the user clicks outside it.\r\n                this._outsideClickListener = this._renderer.listen('document', 'mouseup', (evt) => {\r\n                    if (this.element.nativeElement !== evt?.target) {\r\n                        this.collapseMenu();\r\n                    }\r\n                });\r\n            }, this.menuElement.nativeElement);\r\n        }\r\n    }\r\n\r\n    collapseMenu(): void {\r\n        // remove the listener when the menu is collapsed to avoid eventListener pollution\r\n        if (typeof this._outsideClickListener === 'function') {\r\n            this._outsideClickListener();\r\n        }\r\n        if (this.isMenuExpanded) {\r\n            //Do not emit change event for menu that was already collapsed\r\n            this.isMenuExpanded = false;\r\n            this.isMenuExpandedChange.emit(this.isMenuExpanded);\r\n        }\r\n    }\r\n\r\n    private whenDropdownRenderedExecute(callback: Function, element: HTMLElement) {\r\n        if (callback) {\r\n            setTimeout(() => {\r\n                if (!document.body.contains(element) || element.offsetWidth === 0) {\r\n                    this.whenDropdownRenderedExecute(callback, element);\r\n                    return;\r\n                }\r\n                callback();\r\n                this._changeRef.markForCheck();\r\n            });\r\n        }\r\n    }\r\n\r\n    private moveMenuElement(): void {\r\n        //Only do this with the first open of the dropdown\r\n        if (!this._menuElementMoved) {\r\n            //Move menu element to body to enable it to display over container elements\r\n            document.body.appendChild(this.element.nativeElement);\r\n            this._menuElementMoved = true;\r\n        }\r\n    }\r\n}\r\n","<div class=\"dropdown-menu-element\" [id]=\"menuId\">\r\n    <div class=\"k2-dropdown-container {{customMenuClass}} {{states.toString()}}\" [ngStyle]=\"k2DropdownPositioning\"\r\n         [class.empty-list]=\"!menuItems?.length && emptyStateTemplate\"\r\n         [class.hidden]=\"!isMenuExpanded\"\r\n         #menu>\r\n        <div class=\"scrollme k2-dropdown-max-height\" k2-scrollbar>\r\n            <div class=\"k2-dropdown k2-drop-down-scroll-element\">\r\n                <ul *ngIf=\"menuItems?.length > 0 && (!searchText || searchText.length === 0)\" class=\"menu-items-list\">\r\n                    <li k2DropDownMenuItem\r\n                        *ngFor=\"let item of menuItems; first as isFirst; last as isLast\"\r\n                        class=\"k2-drop-down-item menu-item\"\r\n                        [item]=\"item\"\r\n                        (onItemSelected)=\"selectItem(item)\"\r\n                        [isMultiSelect]=\"isMultiSelect\"\r\n                        [innerItemComponent]=\"item.innerItemComponent || innerItemComponent\"\r\n                        [isFirst]=\"isFirst\"\r\n                        [isLast]=\"isLast\">\r\n                    </li>\r\n                </ul>\r\n                <div *ngIf=\"menuItems?.length === 0 && emptyStateTemplate.length > 0\"\r\n                     class=\"empty-state\"\r\n                     [innerHTML]=\"emptyStateTemplate\">\r\n                </div>\r\n                <div *ngIf=\"menuItems?.length === 0 && !emptyStateTemplate\"\r\n                     class=\"empty-state\">\r\n                    {{getString('control_dropdown_no_items_to_show')}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"k2-dropdown-footer\" *ngIf=\"footerItems?.length > 0\">\r\n            <ul>\r\n                <li k2DropDownMenuItem *ngFor=\"let item of footerItems\"\r\n                    class=\"k2-drop-down-item menu-item\"\r\n                    [item]=\"item\"\r\n                    (onItemSelected)=\"selectItem(item)\" \r\n                    [isMultiSelect]=\"isMultiSelect\"\r\n                    [innerItemComponent]=\"item.innerItemComponent || innerItemComponent\">\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, ElementRef, EventEmitter, HostListener, Input, OnChanges, Output, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { DropDownMenuAlignment } from 'src/app/shared/enums/drop-down/drop-down-menu-alignment';\r\nimport { DropdownMenuItemTemplates } from 'src/app/shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from 'src/app/shared/enums/drop-down/drop-down-triangle-position';\r\nimport IDropDownMenuItem from '../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropDownMenuComponent } from './drop-down-menu/drop-down-menu.component';\r\n\r\n@Component({\r\n    selector: 'k2-drop-down',\r\n    templateUrl: './drop-down.component.html',\r\n    styleUrls: ['./drop-down.component.less']\r\n})\r\nexport class DropDownComponent implements OnChanges {\r\n\r\n    @ViewChild(DropDownMenuComponent) dropdownMenu: DropDownMenuComponent;\r\n\r\n    public isMenuExpanded = false;\r\n    @Input() menuItems: IDropDownMenuItem[] | (() => IDropDownMenuItem[]) = [];\r\n    @Input() isMultiSelect = false;\r\n    @Input() footerItems: IDropDownMenuItem[] = [];\r\n    @Input() customMenuClass: string;\r\n    @Input() emptyStateTemplate = '';\r\n    @Input() menuAlignElement: ElementRef;\r\n\r\n    /**\r\n     * Formerly called dropDownType: number;\r\n     * Used to determine how the dropdown is displayed. DropDownMenuAlignment.centered (formerly 0) for button and\r\n     * centered dropdown and DropDownMenuAlignment.leftEdge (formerly 1) for a dropdown which aligns itself to the parent button's parent\r\n     * Use this in the ts to use enum in template: public dropDownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n     */\r\n    @Input() menuAlignment: DropDownMenuAlignment = DropDownMenuAlignment.centered;\r\n    @Input() trianglePosition: DropDownMenuTrianglePosition = null;\r\n    @Input() innerItemComponent: DropdownMenuItemTemplates;\r\n    @Input() selectedItemKey: string;\r\n\r\n    @Output() onItemSelected: EventEmitter<IDropDownMenuItem> = new EventEmitter<IDropDownMenuItem>();\r\n    @Output() menuOpened = new EventEmitter<any>();\r\n    @Output() menuClosed = new EventEmitter<any>();\r\n\r\n    public dropDownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    public dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n\r\n    private _menuElementMoved = false;\r\n\r\n    constructor(public el: ElementRef) {\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.isMenuExpanded) {\r\n            if (changes.isMenuExpanded.currentValue && changes.isMenuExpanded.currentValue !== changes.isMenuExpanded.previousValue) {\r\n                if (this.isMenuExpanded) {\r\n                    this.menuOpened.emit();\r\n                } else {\r\n                    this.menuClosed.emit();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    @HostListener('mouseup', ['$event'])\r\n    toggleMenu(evt): void {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        this.dropdownMenu.toggleMenu();\r\n    }\r\n\r\n    selectItem(item: IDropDownMenuItem): void {\r\n        this.onItemSelected.emit(item);\r\n    }\r\n\r\n    collapseMenu(){\r\n        this.dropdownMenu.collapseMenu();\r\n    }\r\n\r\n    public static get separator(): IDropDownMenuItem {\r\n        return {\r\n            key: 'separator',\r\n            isSeparator: true\r\n        } as IDropDownMenuItem;\r\n    }\r\n}\r\n","<div class=\"drop-down-container\">\r\n    <span class=\"k2-dropdown k2-dropdown-parent\">\r\n        <ng-content></ng-content>\r\n    </span>\r\n    <div>\r\n        <k2-drop-down-menu [(isMenuExpanded)]=\"isMenuExpanded\"\r\n                           [menuItems]=\"menuItems\"\r\n                           [isMultiSelect]=\"isMultiSelect\"\r\n                           (onItemSelected)=\"selectItem($event)\"\r\n                           [parentDropdown]=\"el.nativeElement\"\r\n                           [menuAlignment]=\"menuAlignment\"\r\n                           [trianglePosition]=\"trianglePosition\"\r\n                           [innerItemComponent]=\"innerItemComponent\"\r\n                           [footerItems]=\"footerItems\"\r\n                           [customMenuClass]=\"customMenuClass\"\r\n                           [emptyStateTemplate]=\"emptyStateTemplate\"\r\n                           [menuAlignElement]=\"menuAlignElement\">\r\n        </k2-drop-down-menu>\r\n    </div>\r\n</div>\r\n","import { Component, EventEmitter, Inject, Input, OnInit, Output, TemplateRef, ViewChild } from '@angular/core';\r\nimport { IModelArray } from '../../../../types/models/base/i-model-array';\r\nimport { IExpression } from '../../../../types/models/core/configured-smart-fields/i-expression';\r\nimport { IRecentsService } from '../../../../types/services/recents/i-recents-service';\r\nimport { IRecipientValidationOptions } from '../../../../types/validation/i-recipient-validation-options';\r\nimport { ProcessService } from '../../../services/process/process.service';\r\nimport { RecentsServiceToken } from '../../../services/recents/recents-service-factory';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { RichEditService } from '../../../services/rich-edit/rich-edit.service';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ComponentIdMapping } from '../../../shared/constants/components';\r\nimport { EmailConstants } from '../../../shared/constants/email';\r\nimport { keyCodes } from '../../../shared/constants/general';\r\nimport { ChooseControlTypes } from '../../../shared/enums/choose-control/choose-control-types';\r\nimport { DropDownMenuAlignment } from '../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from '../../../shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from '../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { EmailParts } from '../../../shared/enums/email/email-parts';\r\nimport { PriorityTypes } from '../../../shared/enums/email/priority-types';\r\nimport { ListItemDropDownType } from '../../../shared/enums/list-item/list-item-drop-down-type';\r\nimport { TextBoxConstraint } from '../../../shared/enums/text-box/text-box-constraint';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\nimport workflowConfiguredSmartField = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields; // can only use this for interfaces\r\nimport coreConfiguredSmartField = sourceCode.k2Designer.objectModel.core.configuredSmartFields; // can only use this for interfaces\r\n\r\n@Component({\r\n    selector: 'k2-email',\r\n    templateUrl: './email.component.html',\r\n    styleUrls: ['./email.component.less']\r\n})\r\nexport class EmailComponent extends BaseResourceComponent implements OnInit {\r\n    @ViewChild('userTemplate') userDropDownTemplate: TemplateRef<any>;\r\n\r\n    @Input() emailPartDisableList: EmailParts[] = [];\r\n    @Input() emailPartHideList: EmailParts[] = [];\r\n    @Input() emailPartReadOnlyList: EmailParts[] = [];\r\n\r\n    @Input() from: IExpression;\r\n    @Input() to: IModelArray<IExpression>;\r\n    @Input() cc: IModelArray<IExpression>;\r\n    @Input() bcc: IModelArray<IExpression>;\r\n    @Input() attachments: IModelArray<IExpression>;\r\n    @Input() subject: IExpression;\r\n    @Input() body: IExpression;\r\n    @Input() priority: PriorityTypes;\r\n    @Input() shouldAllowCustomTemplate: boolean = true;\r\n    /**\r\n     * Validation for recipient fields\r\n     */\r\n    @Input() validation: IRecipientValidationOptions = {};\r\n\r\n    /**\r\n     * Should list of users in recipient picker contain Originator/Originator's Manager?\r\n     */\r\n    @Input() shouldIncludeOriginatorUsers: boolean = false;\r\n\r\n    @Output() fromChange = new EventEmitter<IExpression>();\r\n    @Output() toChange = new EventEmitter<IModelArray<IExpression>>();\r\n    @Output() ccChange = new EventEmitter<IModelArray<IExpression>>();\r\n    @Output() bccChange = new EventEmitter<IModelArray<IExpression>>();\r\n    @Output() attachmentsChange = new EventEmitter<IModelArray<IExpression>>();\r\n    @Output() priorityChange = new EventEmitter<PriorityTypes>();\r\n    @Output() emailPartHideListChange = new EventEmitter<EmailParts[]>();\r\n\r\n    mailPriorityItems: IDropDownMenuItem[];\r\n    get selectedPriority() {\r\n        return this.mailPriorityItems?.find((item: IDropDownMenuItem) => item.isSelected);\r\n    }\r\n\r\n    emailParts = EmailParts;\r\n    listItemDropDownType = ListItemDropDownType;\r\n    dropdownMenuItemTemplates = DropdownMenuItemTemplates;\r\n    originatorEmail: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.WorkflowContextField;\r\n    originatorManagerEmail: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.WorkflowContextField;\r\n    emailPartDropdownItems: IDropDownMenuItem[] = [];\r\n    dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n\r\n    selectedField: IExpression;\r\n    chooseControlTypes = ChooseControlTypes;\r\n    textBoxConstraints = TextBoxConstraint;\r\n    keyCodes = keyCodes;\r\n\r\n    get shouldShowFrom(): boolean {\r\n        return !this.emailPartDisableList.includes(EmailParts.From)\r\n            && !this.emailPartHideList.includes(EmailParts.From)\r\n            && !!this.from;\r\n    }\r\n    set shouldShowFrom(val: boolean) {\r\n        if (val && this.emailPartHideList.includes(EmailParts.From)) {\r\n            this.emailPartHideList.splice(this.emailPartHideList.indexOf(EmailParts.From), 1);\r\n            this.emailPartHideListChange.emit(this.emailPartHideList);\r\n        } else if (val === false && !this.emailPartHideList.includes(EmailParts.From)) {\r\n            this.emailPartHideList.push(EmailParts.From);\r\n            this.emailPartHideListChange.emit(this.emailPartHideList);\r\n        }\r\n    }\r\n\r\n    get shouldShowCc() {\r\n        return !this.emailPartHideList.includes(EmailParts.Cc);\r\n    }\r\n    set shouldShowCc(val: boolean) {\r\n        if (val && this.emailPartHideList.includes(EmailParts.Cc)) {\r\n            this.emailPartHideList.splice(this.emailPartHideList.indexOf(EmailParts.Cc), 1);\r\n            if (!this.cc.length) {\r\n                this.cc.push(sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance());\r\n            }\r\n            this.emailPartHideListChange.emit(this.emailPartHideList);\r\n        } else if (val === false && !this.emailPartHideList.includes(EmailParts.Cc)) {\r\n            this.emailPartHideList.push(EmailParts.Cc);\r\n            this.cc.clear();\r\n            this.emailPartHideListChange.emit(this.emailPartHideList);\r\n        }\r\n    }\r\n\r\n    get shouldShowBcc() {\r\n        return !this.emailPartHideList.includes(EmailParts.Bcc);\r\n    }\r\n    set shouldShowBcc(val: boolean) {\r\n        if (val && this.emailPartHideList.includes(EmailParts.Bcc)) {\r\n            this.emailPartHideList.splice(this.emailPartHideList.indexOf(EmailParts.Bcc), 1);\r\n            if (!this.bcc.length) {\r\n                this.bcc.push(sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance());\r\n            }\r\n            this.emailPartHideListChange.emit(this.emailPartHideList);\r\n        } else if (val === false && !this.emailPartHideList.includes(EmailParts.Bcc)) {\r\n            this.emailPartHideList.push(EmailParts.Bcc);\r\n            this.bcc.clear();\r\n            this.emailPartHideListChange.emit(this.emailPartHideList);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns true if any recipient (to/cc/bcc) / from field is displayed\r\n     */\r\n    get shouldShowAnyUserField() {\r\n        return this.shouldShowFrom || !this.emailPartDisableList.includes(EmailParts.To) || this.shouldShowCc ||\r\n            this.shouldShowBcc;\r\n    }\r\n\r\n    constructor(resourceService: ResourceService,\r\n        @Inject(UndoRedoServiceToken) private undoRedoService: IUndoRedoService,\r\n        private processService: ProcessService,\r\n        @Inject(RecentsServiceToken) private recentsService: IRecentsService) {\r\n        super(resourceService);\r\n        undoRedoService.listen(() => {\r\n            this.selectedField = undefined;\r\n        });\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.originatorEmail = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.WorkflowContextField.createInstance({\r\n            fieldName: sourceCode.k2Designer.services.core.EnvironmentService.ORIGINATOREMAILWORKFLOWCONTEXTFIELDNAME,\r\n            title: this.resourceService.getString(`user_task_step_recipient_originator_context_field_email`),\r\n            customTitle: this.resourceService.getString(`user_task_step_recipient_originator`),\r\n            parentName: this.resourceService.getString(`workflow_originator_field_parent_name`),\r\n            internalId: 1,\r\n            componentId: ComponentIdMapping.k2WorkflowContextField,\r\n        });\r\n\r\n        this.originatorManagerEmail = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.WorkflowContextField.createInstance({\r\n            fieldName: sourceCode.k2Designer.services.core.EnvironmentService.ORIGINATORMANAGEREMAILWORKFLOWCONTEXTFIELDNAME,\r\n            title: this.resourceService.getString(`user_task_step_recipient_originator_context_field_email`),\r\n            customTitle: this.resourceService.getString(`user_task_step_recipient_originator_manager`),\r\n            parentName: this.resourceService.getString(`workflow_originator_manager_field_parent_name`),\r\n            internalId: 1,\r\n            componentId: ComponentIdMapping.k2WorkflowContextField,\r\n        });\r\n\r\n        this.populatePriorityList();\r\n        this.recentsService.registerContext(`RecentlySelectedUsers`, 10);\r\n        this.setEmailPartDropdownItems();\r\n    }\r\n\r\n    populatePriorityList() {\r\n        this.mailPriorityItems = [];\r\n        this.mailPriorityItems.push({\r\n            key: PriorityTypes.low.toString(),\r\n            icon: `icon-set-dropdownset ic-priority_low`,\r\n            isSeparator: false,\r\n            title: this.resourceService.getString(`priority_low`),\r\n            isSelected: this.priority === PriorityTypes.low\r\n        } as IDropDownMenuItem);\r\n\r\n        this.mailPriorityItems.push({\r\n            key: PriorityTypes.med.toString(),\r\n            icon: `icon-set-dropdownset ic-priority_medium`,\r\n            isSeparator: false,\r\n            title: this.resourceService.getString(`priority_med`),\r\n            isSelected: this.priority === PriorityTypes.med || !this.priority\r\n        } as IDropDownMenuItem);\r\n\r\n        this.mailPriorityItems.push({\r\n            key: PriorityTypes.high.toString(),\r\n            icon: `icon-set-dropdownset ic-priority_high`,\r\n            isSeparator: false,\r\n            title: this.resourceService.getString(`priority_high`),\r\n            isSelected: this.priority === PriorityTypes.high\r\n        } as IDropDownMenuItem);\r\n    }\r\n\r\n    addAttachment(): void {\r\n        this.undoRedoService.addUndoMarker(`--emailController: add attachment--`);\r\n        this.attachments.push(sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n            smartFields: []\r\n        }));\r\n    }\r\n\r\n    deleteAttachment() {\r\n        if (this.selectedField && this.attachments.includes(this.selectedField)) {\r\n            this.undoRedoService.addUndoMarker(`--emailController: delete attachment--`);\r\n            this.selectedField.removeFromModelArray();\r\n            this.selectedField = undefined;\r\n        }\r\n    }\r\n\r\n    addTo(): void {\r\n        this.undoRedoService.addUndoMarker(`--emailController: add to--`);\r\n        this.to.push(sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance());\r\n    }\r\n\r\n    addCC(): void {\r\n        this.undoRedoService.addUndoMarker(`--emailController: add cc--`);\r\n        this.cc.push(sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance());\r\n    }\r\n\r\n    addBCC(): void {\r\n        this.undoRedoService.addUndoMarker(`--emailController: add bcc--`);\r\n        this.bcc.push(sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance());\r\n    }\r\n\r\n    deleteRecipient() {\r\n        this.undoRedoService.addUndoMarker(`--emailController: delete recipient--`);\r\n        this.selectedField.removeFromModelArray();\r\n        if (!this.bcc?.length) {\r\n            this.emailPartHideList.push(EmailParts.Bcc);\r\n        }\r\n        if (!this.cc?.length) {\r\n            this.emailPartHideList.push(EmailParts.Cc);\r\n        }\r\n        if (!this.to?.length) {\r\n            this.to.push(sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance());\r\n        }\r\n        this.selectedField = undefined;\r\n    }\r\n\r\n    toggle(userExpression: IExpression): void {\r\n        if (userExpression.isDynamic !== true && userExpression.smartFields.length > 1) {\r\n            userExpression.smartFields.clear();\r\n        }\r\n        else if (userExpression.isDynamic &&\r\n            userExpression.smartFields?.length === 1 &&\r\n            userExpression.smartFields[0].instanceOf(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.UserField.implementor)\r\n        ) {\r\n            const text: workflowConfiguredSmartField.IUserField = userExpression.smartFields[0];\r\n            userExpression.smartFields.clear();\r\n            userExpression.smartFields.push(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                text: text.email || text.systemName\r\n            }));\r\n        }\r\n        else if (!userExpression.isDynamic &&\r\n            userExpression.smartFields?.length === 1 &&\r\n            userExpression.smartFields[0].instanceOf(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.implementor)\r\n        ) {\r\n            const recents =\r\n                this.recentsService.getItems(`RecentlySelectedUsers`) as workflowConfiguredSmartField.IUserField[];\r\n            const field = userExpression.smartFields[0] as workflowConfiguredSmartField.ITextField;\r\n            userExpression.smartFields.clear();\r\n            for (const recentUser of recents) {\r\n                if (field.text === recentUser.email\r\n                    || field.text === recentUser.systemName) {\r\n                    userExpression.smartFields.push(\r\n                        sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.UserField.createInstance({\r\n                            title: recentUser.displayName,\r\n                            email: recentUser.email,\r\n                            displayName: recentUser.displayName,\r\n                            systemName: recentUser.systemName,\r\n                            identityType: (recentUser as any).type.toString(),\r\n                            returnType: sourceCode.k2Designer.objectModel.core.configuredSmartFields.ConfiguredSmartFieldTypes.userEmail\r\n                        })\r\n                    );\r\n                }\r\n            }\r\n        }\r\n        else if (userExpression.smartFields?.length === 1) {\r\n            const smartfield = userExpression.smartFields[0];\r\n            /*For the Originator's Email and Originator's Manager's Email fields,\r\n             * we want them to resolve to `Originator` and `Originator's Manager` when dynamic is toggled off */\r\n            if (smartfield.instanceOf(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.WorkflowContextField.implementor)\r\n                && (((smartfield as workflowConfiguredSmartField.IWorkflowContextField).fieldName === EmailConstants.OriginatorEmail) ||\r\n                    ((smartfield as workflowConfiguredSmartField.IWorkflowContextField).fieldName === EmailConstants.OriginatorManagerEmail)\r\n                )) {\r\n                this.ensureBuiltInRecipientEmailCustomTitle((smartfield as workflowConfiguredSmartField.IWorkflowContextField));\r\n            }\r\n            /*For all other Workflow SmartFields, we want them to resolve to the `Choose Recipient...`\r\n             * watermark and badge the dropdown when dynamic is toggled off */\r\n            // eslint-disable-next-line max-len\r\n            else if (smartfield.instanceOf(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.WorkflowContextField.implementor)\r\n            ) {\r\n                userExpression.smartFields.clear();\r\n            }\r\n            //From address is a special case that we want to resolve, so we don't clear the SmartFields\r\n            else if (smartfield.instanceOf(sourceCode.k2Designer.objectModel.core.configuredSmartFields.ConfiguredSmartField.implementor)\r\n                && ((smartfield as coreConfiguredSmartField.IConfiguredSmartField).title === EmailConstants.FromAddress)) { }\r\n            //Do not clear if this is a Group Email SmartField.\r\n            else if (sourceCode.k2Designer.utilities.smartObjects.isEmailForGroupUsersField(this.processService as any, smartfield)) {\r\n                smartfield.customTitle =\r\n                    sourceCode.k2Designer.utilities.smartObjects.getGroupDisplayName(this.processService as any, smartfield);\r\n            }\r\n            //Clear all other SmartFields\r\n            else if (smartfield.instanceOf(sourceCode.k2Designer.objectModel.core.configuredSmartFields.ConfiguredSmartField.implementor)\r\n            ) {\r\n                userExpression.smartFields.clear();\r\n            }\r\n        }\r\n    }\r\n\r\n    prioritySelected(item: IDropDownMenuItem) {\r\n        this.priority = parseInt(item.key, 10);\r\n        this.priorityChange.emit(this.priority);\r\n    }\r\n\r\n    emailPartSelected(item: IDropDownMenuItem) {\r\n        switch (item.key) {\r\n            case EmailParts.From.toString(): this.shouldShowFrom = item.isSelected;\r\n                break;\r\n            case EmailParts.Bcc.toString(): this.shouldShowBcc = item.isSelected;\r\n                break;\r\n            case EmailParts.Cc.toString(): this.shouldShowCc = item.isSelected;\r\n                break;\r\n        }\r\n    }\r\n\r\n    private ensureBuiltInRecipientEmailCustomTitle(workflowContextField: workflowConfiguredSmartField.IWorkflowContextField): void {\r\n        if (workflowContextField.fieldName ===\r\n            sourceCode.k2Designer.services.core.EnvironmentService.ORIGINATOREMAILWORKFLOWCONTEXTFIELDNAME) {\r\n            workflowContextField.customTitle = this.resourceService.getString(`user_task_step_recipient_originator`);\r\n        }\r\n        else if (workflowContextField.fieldName ===\r\n            sourceCode.k2Designer.services.core.EnvironmentService.ORIGINATORMANAGEREMAILWORKFLOWCONTEXTFIELDNAME) {\r\n            workflowContextField.customTitle = this.resourceService.getString(`user_task_step_recipient_originator_manager`);\r\n        }\r\n    }\r\n\r\n    private setEmailPartDropdownItems(): void {\r\n        this.emailPartDropdownItems = [];\r\n        if (!this.emailPartDisableList.includes(this.emailParts.From)) {\r\n            //From\r\n            this.emailPartDropdownItems.push({\r\n                title: this.getFromResx('Wizards', 'wizard_Task_Notification_Label_From_sm').value,\r\n                key: this.emailParts.From.toString(),\r\n                isSelected: this.shouldShowFrom\r\n            });\r\n        }\r\n        if (!this.emailPartDisableList.includes(this.emailParts.Cc)) {\r\n            //CC\r\n            this.emailPartDropdownItems.push({\r\n                title: this.getFromResx('Wizards', 'wizard_Task_Notification_Label_Cc_sm').value,\r\n                key: this.emailParts.Cc.toString(),\r\n                isSelected: this.shouldShowCc\r\n            });\r\n        }\r\n        if (!this.emailPartDisableList.includes(this.emailParts.Bcc)) {\r\n            //BCC\r\n            this.emailPartDropdownItems.push({\r\n                title: this.getFromResx('Wizards', 'wizard_Task_Notification_Label_Bcc_sm').value,\r\n                key: this.emailParts.Bcc.toString(),\r\n                isSelected: this.shouldShowBcc\r\n            });\r\n        }\r\n    }\r\n}\r\n","<!-- E-mail -->\r\n<div class=\"content-section\" *ngIf=\"shouldShowAnyUserField\">\r\n    <div class=\"section-content\">\r\n        <!-- From -->\r\n        <div *ngIf=\"shouldShowFrom\">\r\n            <div class=\"content-row\">\r\n                <div class=\"label-control-label\">{{getFromResx(\"Wizards\", \"wizard_Email_Label_From\") | async}}</div>\r\n                <div class=\"email-label-control-space\">&nbsp;</div>\r\n                <k2-recipient-picker [validationOptions]=\"validation?.from\"\r\n                                     classRepeatSpace=\"k2-list-item-repeat-label-spacing\"\r\n                                     [recipientModel]=\"from\"\r\n                                     [emailPart]=\"emailParts.From\"\r\n                                     (onNotificationToggled)=\"toggle($event)\"\r\n                                     [shouldIncludeOriginatorUsers]=\"shouldIncludeOriginatorUsers\"\r\n                                     (onRecipientSelected)=\"selectedField = $event\">\r\n                </k2-recipient-picker>\r\n            </div>\r\n            <div class=\"content-row-separator\"></div>\r\n        </div>\r\n\r\n        <!-- TO -->\r\n        <div *ngIf=\"!emailPartDisableList.includes(emailParts.To)\">\r\n            <div class=\"content-row\">\r\n                <div class=\"content-row-separator\"></div>\r\n                <div class=\"label-control-label\"> {{getFromResx(\"Wizards\", \"wizard_Email_Label_To\") | async}} </div>\r\n                <div class=\"email-label-control-space\">\r\n                    <k2-email-part-selector [dropdownItems]=\"emailPartDropdownItems\"\r\n                                            (emailPartSelected)=\"emailPartSelected($event)\">\r\n                    </k2-email-part-selector>\r\n                </div>\r\n                <k2-recipient-picker *ngFor=\"let toItem of to\"\r\n                                     [validationOptions]=\"validation?.to\"\r\n                                     classRepeatSpace=\"k2-list-item-repeat-label-spacing\"\r\n                                     [recipientModel]=\"toItem\"\r\n                                     [emailPart]=\"emailParts.To\"\r\n                                     (onNotificationToggled)=\"toggle($event)\"\r\n                                     [shouldIncludeOriginatorUsers]=\"shouldIncludeOriginatorUsers\"\r\n                                     (onRecipientSelected)=\"selectedField = $event\">\r\n                </k2-recipient-picker>\r\n            </div>\r\n            <div class=\"content-row row-top-separator\">\r\n                <a class=\"row-right-gutter hyperlink-control primary k2-list-item-repeat-label-spacing add\" (click)=\"addTo()\">\r\n                    {{getFromResx('Wizards','wizard_Email_AddLink_Add') | async}}\r\n                </a>\r\n            </div>\r\n            <div class=\"content-row-separator\"></div>\r\n        </div>\r\n\r\n        <!-- CC -->\r\n        <ng-container *ngIf=\"!emailPartDisableList.includes(emailParts.Cc)\">\r\n            <div *ngIf=\"shouldShowCc\">\r\n                <div class=\"content-row-separator\"></div>\r\n                <div class=\"content-row\">\r\n                    <div class=\"label-control-label\">{{getFromResx(\"Wizards\", \"wizard_Email_Label_CC\") | async}}</div>\r\n                    <div class=\"email-label-control-space\">&nbsp;</div>\r\n                    <k2-recipient-picker *ngFor=\"let ccItem of cc\"\r\n                                         [validationOptions]=\"validation?.cc\"\r\n                                         classRepeatSpace=\"k2-list-item-repeat-label-spacing\"\r\n                                         [recipientModel]=\"ccItem\"\r\n                                         [emailPart]=\"emailParts.Cc\"\r\n                                         (onNotificationToggled)=\"toggle($event)\"\r\n                                         [shouldIncludeOriginatorUsers]=\"shouldIncludeOriginatorUsers\"\r\n                                         (onRecipientSelected)=\"selectedField = $event\">\r\n                    </k2-recipient-picker>\r\n                </div>\r\n                <div class=\"content-row row-top-separator\">\r\n                    <a class=\"row-right-gutter hyperlink-control primary k2-list-item-repeat-label-spacing add\" (click)=\"addCC()\">\r\n                        {{getFromResx('Wizards','wizard_Email_AddLink_Add') | async}}\r\n                    </a>\r\n                </div>\r\n                <div class=\"content-row-separator\"></div>\r\n            </div>\r\n        </ng-container>\r\n\r\n        <!-- BCC -->\r\n        <ng-container *ngIf=\"!emailPartDisableList.includes(emailParts.Bcc)\">\r\n            <div *ngIf=\"shouldShowBcc\">\r\n                <div class=\"content-row-separator\"></div>\r\n                <div class=\"content-row\">\r\n                    <div class=\"label-control-label\">{{getFromResx(\"Wizards\", \"wizard_Task_Notification_Label_Bcc\") | async}}</div>\r\n                    <div class=\"email-label-control-space\">&nbsp;</div>\r\n                    <k2-recipient-picker *ngFor=\"let bccItem of bcc\"\r\n                                         [validationOptions]=\"validation?.bcc\"\r\n                                         classRepeatSpace=\"k2-list-item-repeat-label-spacing\"\r\n                                         [recipientModel]=\"bccItem\"\r\n                                         [emailPart]=\"emailParts.Bcc\"\r\n                                         (onNotificationToggled)=\"toggle($event)\"\r\n                                         [shouldIncludeOriginatorUsers]=\"shouldIncludeOriginatorUsers\"\r\n                                         (onRecipientSelected)=\"selectedField = $event\">\r\n                    </k2-recipient-picker>\r\n                </div>\r\n                <div class=\"content-row row-top-separator\">\r\n                    <a class=\"row-right-gutter hyperlink-control primary k2-list-item-repeat-label-spacing add\" (click)=\"addBCC()\">\r\n                        {{getFromResx('Wizards','wizard_Email_AddLink_Add') | async}}\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n\r\n        <div class=\"content-row add-delete-row no-margin\">\r\n            <div class=\"trash\" (click)=\"deleteRecipient()\"\r\n                 *ngIf=\"selectedField?.getParentModel().length > 1 && !attachments.includes(selectedField)\">\r\n                <span class=\"icon icon-set-buttons icon-size24 ic-bin_button {{hoverClass}}\"\r\n                      (mouseenter)=\"hoverClass = 'disabled'\"\r\n                      (mouseleave)=\"hoverClass = ''\"></span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"content-section-separator\"></div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<!-- Subject -->\r\n<div class=\"content-section\" *ngIf=\"!emailPartDisableList.includes(emailParts.Subject)\">\r\n    <div class=\"section-heading subject\">\r\n        {{getFromResx(\"Wizards\", \"wizard_Email_Label_Subject\") | async}}\r\n        <div *ngIf=\"emailPartDisableList.includes(emailParts.To)\"\r\n             class=\"email-send-types-popup dd-right-arrow-container\">\r\n            <k2-email-part-selector [dropdownItems]=\"emailPartDropdownItems\"\r\n                                    (emailPartSelected)=\"emailPartSelected($event)\">\r\n            </k2-email-part-selector>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"section-content-separator\"></div>\r\n\r\n    <div class=\"section-content\">\r\n        <div class=\"content-row\">\r\n            <k2-text-box class=\"k2-control control-background textbox-border\"\r\n                         [k2Expression]=\"subject\"\r\n                         k2Watermark=\"{{getFromResx('Wizards', 'general_TypeDrop') | async}}\"\r\n                         [enabled]=\"shouldAllowCustomTemplate\">\r\n            </k2-text-box>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"content-section-separator\"></div>\r\n\r\n<!-- Body -->\r\n<div class=\"content-section\" *ngIf=\"!emailPartDisableList.includes(emailParts.Body)\">\r\n    <div class=\"section-heading\">\r\n        {{getFromResx(\"Wizards\", \"wizard_Email_Label_Body\") | async}}\r\n    </div>\r\n\r\n    <div class=\"section-content-separator\"></div>\r\n\r\n    <k2-body-template [(body)]=\"body\" [isEnabled]=\"shouldAllowCustomTemplate\"></k2-body-template>\r\n</div>\r\n\r\n<div class=\"content-section-separator\"></div>\r\n\r\n<!-- Attachments -->\r\n<div class=\"content-section attachment-section\" *ngIf=\"!emailPartDisableList.includes(emailParts.Attachments)\">\r\n    <div class=\"section-heading\">\r\n        {{getFromResx(\"Wizards\", \"wizard_Email_Label_Attachment\") | async}}\r\n    </div>\r\n\r\n    <div class=\"section-content-separator\"></div>\r\n\r\n    <div class=\"section-content\">\r\n        <div class=\"content-row\">\r\n            <div *ngFor=\"let attachment of attachments\" (click)=\"selectedField = attachment\">\r\n                <k2-list-item class=\"k2-list-item-attachment\"\r\n                              [isEditable]=\"true\"\r\n                              [shouldAllowDrop]=\"true\"\r\n                              [listItemModel]=\"attachment\"\r\n                              [isSelectable]=\"true\"\r\n                              [isSelected]=\"selectedField === attachment\"\r\n                              (listItemSelected)=\"selectedField = attachment\"\r\n                              [textBoxConstraint]=\"textBoxConstraints.DropOnly\"\r\n                              watermark=\"{{getFromResx('Wizards', 'general_Drop') | async}}\">\r\n                </k2-list-item>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"content-row center\" [ngClass]=\"{ 'k2-list-item-actions-placeholder-container': !attachments?.length }\"\r\n             *ngIf=\"!attachments?.length\">\r\n            <div class=\"add-delete-row margin-top\">\r\n                <div class=\"btn k2-btn k2-btn-add\" (click)=\"addAttachment()\">\r\n                    <a class=\"hyperlink-control primary\">\r\n                        {{getFromResx(\"Wizards\", \"wizard_Email_Label_AddAttachment\") | async}}\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"content-row center add-delete-row\" *ngIf=\"attachments?.length\">\r\n            <div class=\"btn k2-btn k2-btn-add\" (click)=\"addAttachment()\">\r\n                <span class=\"icon icon-set-buttons icon-size24 ic-add_button\"></span>\r\n            </div>\r\n            <div class=\"trash bin\" (click)=\"deleteAttachment()\" *ngIf=\"attachments.includes(selectedField)\">\r\n                <span class=\"icon icon-set-buttons icon-size24 ic-bin_button {{hoverClass}}\" (mouseenter)=\"hoverClass = 'disabled'\" (mouseleave)=\"hoverClass = ''\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- Priority -->\r\n<div *ngIf=\"!emailPartDisableList.includes(emailParts.Priority)\" class=\"content-section\">\r\n    <div class=\"section-heading\">\r\n        {{getFromResx(\"Wizards\", \"wizard_Email_Label_Priority\") | async}}\r\n        <div class=\"content-row-separator\"></div>\r\n    </div>\r\n    <div class=\"content-section\">\r\n        <div class=\"content-row priority\">\r\n            <k2-drop-down class=\"k2-dropdown-parent\"\r\n                          drop-down-type=\"1\"\r\n                          [menuItems]=\"mailPriorityItems\"\r\n                          (onItemSelected)=\"prioritySelected($event)\"\r\n                          select-multiple-items=\"false\"\r\n                          icon-container=\"true\"\r\n                          filled-item=\"true\">\r\n                <div class=\"k2-dd-flexChild k2-dd-rowParent k2-dd-container k2-control control-background k2-dropdown-div icon-container\">\r\n                    <div class=\"k2-dd-icon\"><span class=\"icon-dd icon icon-set-indicators icon-size16 {{selectedPriority?.icon}}\"></span></div>\r\n                    <div class=\"k2-dd-flexChild k2-dd-text\">{{selectedPriority?.title}}</div>\r\n                    <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                        <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                    </div>\r\n                </div>\r\n            </k2-drop-down>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { IExpression } from '../../../../../../types/models/core/configured-smart-fields/i-expression';\r\nimport { IEnvironmentService, IPluginStateChangedCallback } from '../../../../../../types/services/environment/i-environment-service';\r\nimport { IPluginService } from '../../../../../../types/services/plugin/i-plugin-service';\r\nimport { EnvironmentServiceToken } from '../../../../../services/environment/environment-service-factory';\r\nimport { PluginServiceToken } from '../../../../../services/plugin/plugin-service-factory';\r\nimport { ResourceService } from '../../../../../services/resource/resource.service';\r\nimport { RichEditService } from '../../../../../services/rich-edit/rich-edit.service';\r\nimport { SmartFieldComposerServiceToken } from '../../../../../services/smart-field-composer/smart-field-composer-service-factory';\r\nimport { keyCodes } from '../../../../../shared/constants/general';\r\nimport { plugins } from '../../../../../shared/constants/plugins';\r\nimport { BaseResourceComponent } from '../../../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-body-template',\r\n    templateUrl: './body-template.component.html',\r\n    styleUrls: ['./body-template.component.less']\r\n})\r\nexport class BodyTemplateComponent extends BaseResourceComponent implements OnInit, OnDestroy {\r\n\r\n    @Input() body: IExpression;\r\n    @Input() isEnabled: boolean;\r\n\r\n    isRichEdit: boolean;\r\n    keyCodes = keyCodes;\r\n    btnInsertFieldClass: string = '';\r\n\r\n    private panelStateChangeRemover: IPluginStateChangedCallback;\r\n\r\n    constructor(resourceService: ResourceService,\r\n        @Inject(PluginServiceToken) private pluginService: IPluginService,\r\n        @Inject(EnvironmentServiceToken) private environmentService: IEnvironmentService,\r\n        @Inject(SmartFieldComposerServiceToken) private smoComposerService: ISmartFieldComposerService,\r\n        private richEditService: RichEditService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.isRichEdit = this.environmentService.activeStudioItem.pluginStates[plugins.panels.emailBody] === plugins.panels.states.expanded;\r\n        this.panelStateChangeRemover = this.environmentService.listenActiveStudioItemPluginStateChanged(this.panelStateChanged.bind(this));\r\n        if (this.body?.smartFields?.length) {\r\n            this.richEditService.setContext(`EmailEventMailBody`, this.body);\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.environmentService.removeActiveStudioItemPluginStateChangedListener(this.panelStateChangeRemover);\r\n    }\r\n\r\n    toggleRichTextEditor(): void {\r\n        this.pluginService.toggleState(plugins.panels.emailBody);\r\n\r\n        if (!this.isRichEdit) {\r\n            this.smoComposerService.closeAll();\r\n        }\r\n    }\r\n\r\n    toggleContextBrowser(): void {\r\n        this.pluginService.toggleState(plugins.panels.contextBrowser);\r\n    }\r\n\r\n    clearBody(): void {\r\n        this.body.smartFields.clear();\r\n\r\n        (this.body as sourceCode.k2Designer.objectModel.core.configuredSmartFields.IExpressionExtended)\r\n            .notifyChange(null);\r\n    }\r\n\r\n    /**\r\n     * Update the display of rich text editor depending on if the email body panel is expanded or collapsed\r\n     * \r\n     * @param pluginName\r\n     */\r\n    private panelStateChanged(pluginName?: string): void {\r\n        if (pluginName === plugins.panels.emailBody) {\r\n            this.isRichEdit = this.environmentService.activeStudioItem.pluginStates[plugins.panels.emailBody] === plugins.panels.states.expanded;\r\n        }\r\n    }\r\n}\r\n","<div class=\"email-rich-textbox section-content\">\r\n\r\n    <div class=\"content-row textbox-border\" *ngIf=\"!isRichEdit\">\r\n        <div class=\"rich-textbox-body-border\">\r\n            <k2-text-box class=\"k2-control control-background rich-textbox-body\"\r\n                         [k2Expression]=\"body\"\r\n                         k2Watermark=\"{{getFromResx('Wizards', 'general_TypeDrop') | async}}\"\r\n                         [enabled]=\"isEnabled\">\r\n            </k2-text-box>\r\n        </div>\r\n        <div class=\"rich-textbox-command\" [class.is-disabled]=\"!isEnabled\" k2-tab-index>\r\n            <a href=\"javascript:void(0)\" class=\"pull-right hyperlink-control secondary\"\r\n               tabindex=\"{{ isEnabled || isRichEdit ? '-1' : ''}}\"\r\n               (click)=\"clearBody()\"\r\n               (keypress)=\"$event.keyCode === keyCodes.SPACE ? clearBody() : void(0)\">\r\n                {{getFromResx('Wizards', 'general_Clear') | async}}\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <div class=\"rich-textbox-overlay content-row rich-textbox-body-border in-rich-editing\" *ngIf=\"isRichEdit\">\r\n        <span>{{getFromResx('Wizards', 'general_overlay_EditingText') | async}}</span>\r\n        <a href=\"javascript:void(0)\" class=\"hyperlink-control primary\" k2-tab-index (click)=\"toggleRichTextEditor()\">\r\n            {{getFromResx('Wizards', 'general_overlay_Done') | async}}\r\n        </a>\r\n    </div>\r\n\r\n    <div class=\"content-row\" [class.is-disabled]=\"!isEnabled \" k2-tab-index>\r\n        <a href=\"javascript:void(0)\" class=\"pull-left hyperlink-control secondary\" (click)=\"toggleRichTextEditor()\"\r\n           tabindex=\"{{ isEnabled ? '-1' : '' }}\">\r\n            <span *ngIf=\"!isRichEdit\">{{getFromResx('Wizards', 'general_EditText') | async}}</span>\r\n            <span *ngIf=\"isRichEdit\">{{getFromResx('Wizards', 'general_Close_TextEditor') | async}}</span>\r\n        </a>\r\n        <a href=\"javascript:void(0)\" class=\"pull-right hyperlink-control secondary btn-context-broswer\"\r\n           tabindex=\"{{ isEnabled ? '-1' : '' }}\"\r\n           (click)=\"toggleContextBrowser()\"\r\n           (mouseenter)=\"btnInsertFieldClass='hover'\" (mouseleave)=\"btnInsertFieldClass=''\">\r\n            <span>{{getFromResx('Wizards', 'general_insertField') | async}}</span>\r\n            <i class=\"icon icon-size16 icon-set-buttons ic-contextbrowserbutton {{btnInsertFieldClass}}\"></i>\r\n        </a>\r\n    </div>\r\n</div>\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { DropDownMenuAlignment } from '../../../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../../../shared/enums/drop-down/drop-down-menu-item';\r\n\r\n@Component({\r\n    selector: 'k2-email-part-selector',\r\n    templateUrl: './email-part-selector.component.html',\r\n    styleUrls: ['./email-part-selector.component.less']\r\n})\r\nexport class EmailPartSelectorComponent implements OnInit {\r\n\r\n    @Input() dropdownItems: IDropDownMenuItem[] = [];\r\n\r\n    @Output() emailPartSelected = new EventEmitter<IDropDownMenuItem>();\r\n\r\n    dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    onEmailPartSelected(item: IDropDownMenuItem): void {\r\n        this.emailPartSelected.emit(item);\r\n    }\r\n}\r\n","<k2-drop-down class=\"k2-dropdown-parent\"\r\n              [menuItems]=\"dropdownItems\"\r\n              [isMultiSelect]=\"true\"\r\n              [menuAlignment]=\"dropdownMenuAlignment.rightEdge\"\r\n              (onItemSelected)=\"onEmailPartSelected($event)\"\r\n              customMenuClass=\"dd-email-parts-menu\">\r\n    <div class=\"k2-dd-flexChild k2-control k2-dropdown-div icon-container dd-right-arrow\">\r\n        <div class=\"k2-dd-icon\">\r\n            <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n        </div>\r\n    </div>\r\n</k2-drop-down>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'k2-recipient-icon-template',\r\n    templateUrl: './recipient-icon-template.component.html',\r\n    styleUrls: ['./recipient-icon-template.component.less']\r\n})\r\nexport class RecipientIconTemplateComponent implements OnInit {\r\n\r\n    /**\r\n     * Template context\r\n     */\r\n    @Input() context: any;\r\n\r\n    @Input() isFromEditable: boolean;\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"control-column fixed\">\r\n    <div class=\"flexrow list-item-icons vertical\"\r\n         [class.recipientIcon]=\"!(context.listItemIconData.iconClass.contains('ic-user') || context.listItemIconData.iconClass.contains('ic-roles') || context.listItemIconData.iconClass.contains('ic-group'))\"\r\n         (mouseenter)=\"context.recipientIconHover = true\"\r\n         (mouseleave)=\"context.recipientIconHover = false\">\r\n        <div *ngIf=\"!isFromEditable\" class=\"flexrow vertical\">\r\n            <span [ngClass]=\"context.listItemIconData.iconClass || 'icon icon-set-picker icon-size24 ic-recipientnondynamic'\"></span>\r\n        </div>\r\n        <div *ngIf=\"isFromEditable\">\r\n            <span [ngClass]=\"context.listItemIconData.iconClass || 'icon icon-set-dropdownset icon-size24 ic-recipientdynamic'\"></span>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { AfterViewInit, Component, EventEmitter, Inject, Input, OnChanges, OnInit, Output, SimpleChanges, TemplateRef, ViewChild } from '@angular/core';\r\nimport { IConfiguredSmartField } from '../../../../../../types/models/core/configured-smart-fields/i-configured-smart-field';\r\nimport { IExpression } from '../../../../../../types/models/core/configured-smart-fields/i-expression';\r\nimport { IEnvironmentService } from '../../../../../../types/services/environment/i-environment-service';\r\nimport { IRecentsService } from '../../../../../../types/services/recents/i-recents-service';\r\nimport { EnvironmentServiceToken } from '../../../../../services/environment/environment-service-factory';\r\nimport { PopupService } from '../../../../../services/popup/popup.service';\r\nimport { RecentsServiceToken } from '../../../../../services/recents/recents-service-factory';\r\nimport { ResourceService } from '../../../../../services/resource/resource.service';\r\nimport { SmartObjectService } from '../../../../../services/smart-object/smart-object.service';\r\nimport { UndoRedoServiceToken } from '../../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ComponentIdMapping } from '../../../../../shared/constants/components';\r\nimport IDropDownMenuItem from '../../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { EmailParts } from '../../../../../shared/enums/email/email-parts';\r\nimport { ListItemDropDownType } from '../../../../../shared/enums/list-item/list-item-drop-down-type';\r\nimport { ConfiguredSmartFieldTypes } from '../../../../../shared/enums/model/workflow/core/configured-smart-fields/configured-smart-field-types';\r\nimport { WorkflowContextBrowserItemTypes } from '../../../../../shared/enums/model/workflow/item-provider/workflow-context-browser-item-types';\r\nimport { BaseResourceComponent } from '../../../../base-resource/base-resource.component';\r\nimport workflowConfiguredSmartField = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields; // can only use this for interfaces\r\nimport coreConfiguredSmartField = sourceCode.k2Designer.objectModel.core.configuredSmartFields; // can only use this for interfaces\r\n\r\n@Component({\r\n    selector: 'k2-recipient-picker',\r\n    templateUrl: './recipient-picker.component.html',\r\n    styleUrls: ['./recipient-picker.component.less']\r\n})\r\nexport class RecipientPickerComponent extends BaseResourceComponent implements OnInit, OnChanges, AfterViewInit {\r\n    @ViewChild('userTemplate') userDropDownTemplate: TemplateRef<any>;\r\n\r\n    @Input() validationOptions: IValidationOptions[];\r\n    @Input() classRepeatSpace: string = 'k2-list-item-repeat-label-spacing';\r\n    @Input() recipientModel: IExpression;\r\n    @Input() emailPart: EmailParts = EmailParts.To;\r\n    /**\r\n     * To indicate if users dropdown should include Originator and Orignator's Manager users by default\r\n     */\r\n    @Input() shouldIncludeOriginatorUsers: boolean = false;\r\n    @Output() onNotificationToggled: EventEmitter<IExpression> = new EventEmitter<IExpression>();\r\n    @Output() onRecipientSelected: EventEmitter<IExpression> = new EventEmitter<IExpression>();\r\n\r\n    listItemDropDownType: typeof ListItemDropDownType = ListItemDropDownType;\r\n    originatorEmail: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.WorkflowContextField;\r\n    originatorManagerEmail: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.WorkflowContextField;\r\n    userDropDownItems: IDropDownMenuItem[] = [];\r\n    pickerDropDownItems: IDropDownMenuItem[] = [];\r\n    selectedField: IExpression;\r\n    /**\r\n     * Return types per email type\r\n     */\r\n    emailPartReturnTypes: string[];\r\n    chooseWatermark: string;\r\n\r\n    constructor(resourceService: ResourceService,\r\n        private smartObjectService: SmartObjectService,\r\n        @Inject(EnvironmentServiceToken) private envService: IEnvironmentService,\r\n        @Inject(RecentsServiceToken) private recentsService: IRecentsService,\r\n        @Inject(UndoRedoServiceToken) private undoRedoService: IUndoRedoService,\r\n        private popupService: PopupService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.originatorEmail = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.WorkflowContextField.createInstance({\r\n            fieldName: sourceCode.k2Designer.services.core.EnvironmentService.ORIGINATOREMAILWORKFLOWCONTEXTFIELDNAME,\r\n            title: this.resourceService.getString(`user_task_step_recipient_originator_context_field_email`),\r\n            customTitle: this.resourceService.getString(`user_task_step_recipient_originator`),\r\n            parentName: this.resourceService.getString(`workflow_originator_field_parent_name`),\r\n            internalId: 1,\r\n            componentId: ComponentIdMapping.k2WorkflowContextField,\r\n        });\r\n\r\n        this.originatorManagerEmail = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.WorkflowContextField.createInstance({\r\n            fieldName: sourceCode.k2Designer.services.core.EnvironmentService.ORIGINATORMANAGEREMAILWORKFLOWCONTEXTFIELDNAME,\r\n            title: this.resourceService.getString(`user_task_step_recipient_originator_context_field_email`),\r\n            customTitle: this.resourceService.getString(`user_task_step_recipient_originator_manager`),\r\n            parentName: this.resourceService.getString(`workflow_originator_manager_field_parent_name`),\r\n            internalId: 1,\r\n            componentId: ComponentIdMapping.k2WorkflowContextField,\r\n        });\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.recipientModel?.currentValue) {\r\n            this.pickerDropDownItems = this.getUserListFor(this.recipientModel);\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.userDropDownItems = this.getUserDropDownList();\r\n        this.pickerDropDownItems = this.getUserListFor(this.recipientModel);\r\n        if (this.emailPart === EmailParts.From) {\r\n            this.emailPartReturnTypes = ['Users'];\r\n            this.chooseWatermark = 'wizard_task_destination_sets_choose_sender';\r\n        } else {\r\n            this.emailPartReturnTypes = ['Users', 'Groups'];\r\n            this.chooseWatermark = 'wizard_task_destination_sets_choose';\r\n        }\r\n    }\r\n\r\n    getIcon(destinationExpression: IExpression): string {\r\n        return this.smartObjectService.getDestinationIcon(destinationExpression);\r\n    }\r\n\r\n    getUserListFor(expression: IExpression): IDropDownMenuItem[] {\r\n        if (!expression) {\r\n            return []\r\n        }\r\n\r\n        const shouldShowGroups = this.emailPart !== EmailParts.From\r\n        const ddList: IDropDownMenuItem[] = this.userDropDownItems.filter((item) => !item.additionalValueProperty\r\n            || item.additionalValueProperty.type === WorkflowContextBrowserItemTypes.identityUser\r\n            || (item.additionalValueProperty.type === WorkflowContextBrowserItemTypes.identityGroup && shouldShowGroups))\r\n            .map(x => ({ ...x }));\r\n\r\n        const smartField: workflowConfiguredSmartField.IUserField =\r\n            expression.smartFields?.length ? expression.smartFields[0] : null;\r\n        for (const item of ddList) {\r\n            item.templateRef = this.userDropDownTemplate;\r\n            if (!item.icon) {\r\n                switch (item.additionalValueProperty.type) {\r\n                    case (WorkflowContextBrowserItemTypes.identityUser):\r\n                        item.icon = 'ic-user';\r\n                        break;\r\n                    case (WorkflowContextBrowserItemTypes.identityGroup):\r\n                        item.icon = 'ic-group';\r\n                        break;\r\n                    case (WorkflowContextBrowserItemTypes.identityRole):\r\n                        item.icon = 'ic-role';\r\n                        break;\r\n                }\r\n            }\r\n            item.isSelected = (smartField?.customTitle || smartField?.displayName) === (item.title);\r\n            item.onSelected = (ddItem: IDropDownMenuItem) => {\r\n                let sfItem: IConfiguredSmartField;\r\n                switch (item.additionalValueProperty?.type) {\r\n                    case (WorkflowContextBrowserItemTypes.identityUser):\r\n                        sfItem = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.UserField.createInstance({\r\n                            title: item.key,\r\n                            displayName: item.title,\r\n                            email: item.additionalValueProperty.email,\r\n                            systemName: item.additionalValueProperty.systemName,\r\n                            returnType: ConfiguredSmartFieldTypes.userEmail\r\n                        });\r\n                        break;\r\n                    case (WorkflowContextBrowserItemTypes.identityGroup):\r\n                        sfItem = this.smartObjectService.wrapEmailForGroupUsersField(\r\n                            item.additionalValueProperty.displayName,\r\n                            item.additionalValueProperty.systemName,\r\n                            item.additionalValueProperty.label);\r\n                        break;\r\n                    default:\r\n                        if (item.key === 'Originator') {\r\n                            sfItem = this.originatorEmail;\r\n                        } else if (item.key === 'ProcessOriginatorManager') {\r\n                            sfItem = this.originatorManagerEmail;\r\n                        }\r\n                        break;\r\n                }\r\n\r\n                this.selectUser(expression, sfItem);\r\n            };\r\n        }\r\n        return ddList;\r\n    }\r\n\r\n    preventPropagation(e: MouseEvent) {\r\n        e.stopPropagation();\r\n        return false;\r\n    }\r\n\r\n    getUserDropDownList() {\r\n        const items: IDropDownMenuItem[] = [];\r\n\r\n        if (this.shouldIncludeOriginatorUsers) {\r\n            items.push(<IDropDownMenuItem>{\r\n                title: this.resourceService.getString(`user_task_step_recipient_originator`),\r\n                key: `Originator`,\r\n                icon: `icon-set-picker ic-recipientnondynamic`,\r\n            });\r\n\r\n            items.push(<IDropDownMenuItem>{\r\n                title: this.resourceService.getString(`user_task_step_recipient_originator_manager`),\r\n                key: `ProcessOriginatorManager`,\r\n                icon: `icon-set-picker ic-recipientnondynamic`,\r\n            });\r\n        }\r\n\r\n        const listOfRecentUser: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IUserField[] = this.getRecentlySelectedUsers();\r\n\r\n        for (const recentUser of listOfRecentUser) {\r\n            items.push(<IDropDownMenuItem>{\r\n                title: recentUser.displayName,\r\n                key: recentUser.displayName,\r\n                additionalValueProperty: recentUser\r\n            });\r\n        }\r\n\r\n        return items;\r\n    }\r\n\r\n    browseUser(expression: IExpression, returnTypes: string[]): void {\r\n        this.popupService.showUserDialog((item, cancelled) => {\r\n            if (!cancelled) {\r\n                let itemToAdd = null;\r\n\r\n                if (item.type === WorkflowContextBrowserItemTypes.identityGroup) {\r\n                    itemToAdd = this.smartObjectService\r\n                        .wrapEmailForGroupUsersField(item.displayName,\r\n                            item.systemName,\r\n                            item.label);\r\n                }\r\n                else {\r\n                    itemToAdd = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.UserField\r\n                        .createInstance({\r\n                            title: item.displayName,\r\n                            email: item.email,\r\n                            displayName: item.displayName,\r\n                            systemName: item.systemName,\r\n                            identityType: item.type.toString(),\r\n                            returnType: sourceCode.k2Designer.objectModel.core.configuredSmartFields.ConfiguredSmartFieldTypes.userEmail\r\n                        });\r\n                }\r\n\r\n                this.selectUser(expression, itemToAdd);\r\n                if (!this.userDropDownItems.find(\r\n                    (existingItem) => existingItem.additionalValueProperty &&\r\n                        (existingItem.additionalValueProperty?.systemName === item.systemName))) {\r\n                    this.recentsService.addItem(\r\n                        sourceCode.k2Designer.services.studio.RecentsService.COMMONCONTEXTS.RecentlySelectedUsers,\r\n                        item, `systemName`);\r\n                    this.userDropDownItems.push({\r\n                        title: item.displayName,\r\n                        key: item.displayName,\r\n                        additionalValueProperty: item\r\n                    } as IDropDownMenuItem);\r\n                }\r\n            }\r\n        }, returnTypes);\r\n    }\r\n\r\n    toggle(userExpression: IExpression): void {\r\n        this.onNotificationToggled.emit(userExpression);\r\n    }\r\n\r\n    recipientSelected(selectedRecipient: IExpression): void {\r\n        this.selectedField = selectedRecipient;\r\n        this.onRecipientSelected.emit(selectedRecipient);\r\n    }\r\n\r\n    private getRecentlySelectedUsers() {\r\n        let items = [];\r\n        if (this.recentsService.itemCount(`RecentlySelectedUsers`) > 0) {\r\n            items = this.recentsService.getItems(`RecentlySelectedUsers`, 10);\r\n        }\r\n        return items;\r\n    }\r\n\r\n\r\n    private selectUser(expression: IExpression, item: IConfiguredSmartField): void {\r\n        if (expression.smartFields) {\r\n            this.undoRedoService.addUndoMarker(`--emailController: select user--`);\r\n\r\n            expression.isDynamic = false;\r\n            expression.smartFields.clear();\r\n            expression.smartFields.push(item);\r\n            (expression as coreConfiguredSmartField.IExpressionExtended)\r\n                .notifyChange(this);\r\n        }\r\n\r\n    }\r\n}\r\n","<ng-template #recipientLeftIconTemplate let-icon>\r\n    <k2-recipient-icon-template [context]=\"icon\"></k2-recipient-icon-template>\r\n</ng-template>\r\n\r\n<ng-template #userTemplate let-dropdownitem>\r\n    <div class=\"control-row fix\">\r\n        <div class=\"flexrow\">\r\n            <div class=\"control-column fixed\">\r\n                <div class=\"flexrow k2-drop-down-item-icon vertical\"\r\n                     (click)=\"preventPropagation($event)\"\r\n                     [class.workflow-dropdown-icon-background]=\"!dropdownitem.item.additionalValueProperty\"\r\n                     [class.user-dropdown-icon-background]=\"!!dropdownitem.item.additionalValueProperty\">\r\n                    <span class=\"icon icon-size24 {{dropdownitem.item.icon}}\" [class.icon-set-steps]=\"dropdownitem.item.additionalValueProperty\" [class.selected]=\"dropdownitem.hover\"></span>\r\n                </div>\r\n            </div>\r\n\r\n            <span class=\"k2-drop-down-item-text control-column float\" k2-tooltip-basic [innerHTML]=\"dropdownitem.item.title\"></span>\r\n\r\n            <div class=\"control-column fixed\" *ngIf=\"dropdownitem.item.isSelected\">\r\n                <div class=\"flexrow k2-drop-down-item-icon vertical\">\r\n                    <span class=\"icon icon-set-dropdownset icon-size16 ic-selectedrowindicator\"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n\r\n<k2-list-item [class]=\"classRepeatSpace\"\r\n              [validation]=\"validationOptions\"\r\n              [listItemDropDownType]=\"listItemDropDownType.picker\"\r\n              [listItemModel]=\"recipientModel\"\r\n              [isSelectable]=\"true\"\r\n              [isSelected]=\"selectedField === recipientModel\"\r\n              [leftIconData]=\"{iconClass: getIcon(recipientModel), iconTemplate: recipientLeftIconTemplate}\"\r\n              [menuItems]=\"pickerDropDownItems\"\r\n              (listItemSelected)=\"recipientSelected(recipientModel)\"\r\n              [shouldHideBrowseButton]=\"false\"\r\n              (textBoxButtonClicked)=\"browseUser(recipientModel, emailPartReturnTypes)\"\r\n              [shouldShowToggleTextbox]=\"true\"\r\n              (toggleTextBoxButtonClicked)=\"toggle(recipientModel)\"\r\n              [shouldAllowDrop]=\"recipientModel?.isDynamic\"\r\n              [isEditable]=\"recipientModel?.isDynamic\"\r\n              watermark=\"{{getFromResx('Wizards', chooseWatermark) | async}}\"\r\n              k2-tab-index>\r\n</k2-list-item>\r\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnInit, Output } from '@angular/core';\r\nimport { IEnvironmentService } from '../../../../types/services/environment/i-environment-service';\r\nimport { IRulePluginService } from '../../../../types/services/rules/i-rule-plugin.service';\r\nimport { EnvironmentServiceToken } from '../../../services/environment/environment-service-factory';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\nimport IDropDownMenuItem from '../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { FilterControlStates } from '../../../shared/enums/filter-control/filter-control-states';\r\nimport { EventTypes } from '../../../shared/enums/model/event-types';\r\nimport { isUndefinedOrNull } from '../../../shared/utils/general';\r\nimport { RulePluginService } from '../../../services/ruleplugin/rule-plugin-service';\r\n\r\n@Component({\r\n    selector: 'k2-filter-control',\r\n    templateUrl: './filter-control.component.html',\r\n    styleUrls: ['./filter-control.component.less']\r\n})\r\n\r\nexport class FilterControlComponent implements OnInit {\r\n    @Input() public k2DeleteStep: boolean;\r\n    @Input() public configuredFilter: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredFilter;\r\n    @Input() public properties: IDropDownMenuItem[];\r\n    @Input() public externalDefinitionParent: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectMethodField;\r\n    @Input() public initialStateDescription: string;\r\n\r\n    @Output() public openConditionalPanel: EventEmitter<any> = new EventEmitter();\r\n    @Output() public closeConditionalPanel: EventEmitter<any> = new EventEmitter();\r\n\r\n    public state: FilterControlStates;\r\n    public filterControlStates: typeof FilterControlStates = FilterControlStates;\r\n    public hoverClass: string;\r\n    public selectedModel: {\r\n        item: any;\r\n        index: number;\r\n    };\r\n\r\n    private _expressionsChangedListener: sourceCode.k2Designer.objectModel.core.model.IEventRemover;\r\n\r\n    constructor(protected rootElement: ElementRef,\r\n        @Inject(EnvironmentServiceToken) protected environmentService: IEnvironmentService,\r\n        @Inject(UndoRedoServiceToken) protected undoRedoService: IUndoRedoService,\r\n        protected rulePluginService: RulePluginService,\r\n        protected resourceService: ResourceService) { }\r\n\r\n    ngOnInit(): void {\r\n        this.hoverClass = '';\r\n\r\n        this.configuredFilter = this.configuredFilter || sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredFilter.createInstance({\r\n            expressions: []\r\n        });\r\n\r\n        this.state = this.configuredFilter && this.configuredFilter.expressions.length > 0 ? FilterControlStates.Normal : FilterControlStates.Initial;\r\n\r\n        if (this.state === FilterControlStates.Normal) {\r\n            for (let e = 0; e < this.configuredFilter.expressions.length; e++) {\r\n                if (this.configuredFilter.expressions[e].instanceOf(sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredComplexLogicalGroupExpression.implementor)) {\r\n                    this.state = FilterControlStates.Complex;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.properties = this.properties || [];\r\n\r\n        this.selectedModel = {\r\n            item: null,\r\n            index: null\r\n        };\r\n\r\n        this._expressionsChangedListener =\r\n            this.configuredFilter.expressions.listen(EventTypes.anyArrayChanged, this.onExpressionsChanged.bind(this));\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (this._expressionsChangedListener) {\r\n            this._expressionsChangedListener();\r\n        }\r\n    }\r\n\r\n    getFromResx = (resourceName: string, key: string) => this.resourceService.getFromResx(resourceName, key);\r\n\r\n    /**\r\n     * Function called when the add filter link is clicked\r\n     */\r\n    public addFilterClicked(): void {\r\n        this.state = FilterControlStates.Normal;\r\n\r\n        this.undoRedoService.addUndoMarker('--Filter Control: add filter clicked--');\r\n\r\n        if (this.configuredFilter.expressions.length > 0) {\r\n\r\n            const newOperator = this.rulePluginService.createOperator('GroupBooleanOperator') as sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredGroupOperator;\r\n\r\n            newOperator.configureForFilterControl = true;\r\n\r\n            this.configuredFilter.expressions.push(newOperator);\r\n        }\r\n\r\n        this.configuredFilter.expressions.push(<sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression>this.rulePluginService.createExpression('FilterExpression'));\r\n\r\n        this.selectedModel.item = this.configuredFilter.expressions[this.configuredFilter.expressions.length - 1];\r\n        this.selectedModel.index = this.configuredFilter.expressions.length - 1;\r\n\r\n        this.focusTextbox();\r\n    }\r\n\r\n    /**\r\n     * This function sets focus on textbox as soon as a new row is added\r\n     */\r\n    protected focusTextbox() {\r\n        // The reason this is done, is in order to set the execution of the method to after the scope was updated by angular, since there is no\r\n        // callback on agular to subcribe to.\r\n        setTimeout((): void => {\r\n            const selectedRow = this.rootElement.nativeElement.getElementsByClassName('.expression-repeat')[this.selectedModel.index];\r\n\r\n            if (selectedRow) {\r\n                selectedRow.getElementByClassName('.k2-text-box-watermark').click();\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Function called when the add filter link is clicked\r\n     */\r\n    public removeFilterRow(model?: any): void {\r\n\r\n        const k2Model = isUndefinedOrNull(model)\r\n            ? this.selectedModel.item\r\n            : model;\r\n\r\n        if (k2Model) {\r\n            this.undoRedoService.addUndoMarker('--k2FilterControl: delete filter expression--');\r\n\r\n            const parent = (<sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredSimpleExpression>k2Model)\r\n                .getParentModel<sourceCode.k2Designer.objectModel.core.model.IModelArray<sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredSimpleExpression>>();\r\n            const index = parent.indexOf(k2Model);\r\n\r\n            if (parent.length < 2) {\r\n                k2Model.removeFromModelArray();\r\n            }\r\n            else {\r\n\r\n                //Remove this section only after the operator has been removed\r\n                k2Model.removeFromModelArray();\r\n\r\n                const groupOpertorOf = function(index: number,\r\n                    expressions: sourceCode.k2Designer.objectModel.core.model.IModelArray<sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredSimpleExpression>) {\r\n\r\n                    if (index > expressions.length - 1) {\r\n                        index -= 1;\r\n                    }\r\n                    return expressions[index].directive === 'k2-group-boolean-operator-expression' ? expressions[index] : undefined;\r\n                };\r\n\r\n                const operatorToBeRemove: any = groupOpertorOf(index, parent);\r\n                if (operatorToBeRemove) {\r\n                    operatorToBeRemove.removeFromModelArray();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Function called when advanced condition is clicked\r\n     */\r\n    public setContext(): void {\r\n        this.state = this.state !== FilterControlStates.Condition ? FilterControlStates.Condition : FilterControlStates.Complex;\r\n\r\n        if (this.state === 'condition') {\r\n            if (this.openConditionalPanel) {\r\n                this.openConditionalPanel.emit();\r\n            }\r\n        } else {\r\n            if (this.closeConditionalPanel) {\r\n                this.closeConditionalPanel.emit();\r\n            }\r\n\r\n            let groupingFound = false;\r\n\r\n            for (let e = 0; e < this.configuredFilter.expressions.length; e++) {\r\n                if (this.configuredFilter.expressions[e].instanceOf(sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredComplexLogicalGroupExpression.implementor)) {\r\n                    groupingFound = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (!groupingFound) {\r\n                this.state = FilterControlStates.Normal;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Function called to reset the filter once it was in complex mode\r\n     */\r\n    public resetFilter(): void {\r\n        this.state = FilterControlStates.Initial;\r\n        this.configuredFilter.expressions.length = 0;\r\n    }\r\n\r\n    /**\r\n     * Used to determine if the filter is open\r\n     */\r\n    public isPanelOpen(): boolean {\r\n        const isPanelOpen: boolean = this.environmentService.activeStudioItem.pluginStates.filterPanel === 'expanded';\r\n\r\n        if (!isPanelOpen) {\r\n            this.updateState();\r\n        }\r\n\r\n        return isPanelOpen;\r\n    }\r\n\r\n    /**\r\n     * Update state of the control based on the expressions object\r\n     */\r\n    private updateState(): void {\r\n        let groupingFound = false;\r\n\r\n        for (let e = 0; e < this.configuredFilter.expressions.length; e++) {\r\n            if (this.configuredFilter.expressions[e].instanceOf(sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredComplexLogicalGroupExpression.implementor)) {\r\n                groupingFound = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!groupingFound) {\r\n            this.state = FilterControlStates.Normal;\r\n        } else {\r\n            this.state = FilterControlStates.Complex;\r\n        }\r\n    }\r\n\r\n    public onExpressionsChanged() {\r\n        if (this.configuredFilter.expressions.length === 0) {\r\n            this.state = FilterControlStates.Initial;\r\n        }\r\n        else {\r\n            //re-assign state of the scope.\r\n            this.updateState();\r\n\r\n            if (!isUndefinedOrNull(this.selectedModel.item)) {\r\n                if (this.selectedModel.item.getReference() === 'root') {\r\n                    this.selectedModel.index = null;\r\n                    this.selectedModel.item = null;\r\n\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    public addHoverClass(): void {\r\n        this.hoverClass = 'disabled';\r\n    }\r\n\r\n    public removeHoverClass(): void {\r\n        this.hoverClass = '';\r\n    }\r\n}\r\n","<div class=\"k2-filter-control\">\r\n    <div class=\"initial-state\" *ngIf=\"state === filterControlStates.Initial\">\r\n        <div class=\"hyperlink-control primary\" (click)=\"addFilterClicked()\">\r\n            {{getFromResx('Controls', 'filterControl_add_filter')|async}}\r\n        </div>\r\n        <div class=\"description\" [ngClass]=\"{ 'delete-step' : k2DeleteStep === true }\" *ngIf=\"initialStateDescription && initialStateDescription.length > 0\">\r\n            {{initialStateDescription}}\r\n        </div>\r\n    </div>\r\n    <div class=\"normal-state\" *ngIf=\"state === filterControlStates.Normal\">\r\n        <div class=\"content\">\r\n            <k2-group-expression [nested]=\"true\"\r\n                                 [alternateColour]=\"false\"\r\n                                 class=\"ruleFadeIn\"\r\n                                 [k2Model]=\"configuredFilter\"\r\n                                 [leftItems]=\"properties\"\r\n                                 [selectedK2Model]=\"selectedModel\"\r\n                                 [sortable]=\"true\"\r\n                                 [externalDefinitionParent]=\"externalDefinitionParent\"></k2-group-expression>\r\n        </div>\r\n        <div class=\"footer\">\r\n            <div class=\"add-delete-row\">\r\n                <div class=\"hyperlink-control primary advanced-condition\" *ngIf=\"false\" (click)=\"setContext()\">\r\n                   {{getFromResx('Controls', 'filterControl_advanced_condition')|async}}\r\n                </div>\r\n                <div class=\"btn k2-btn k2-btn-add\" [ngClass]=\"{ 'add-condition' : false }\" (click)=\"addFilterClicked()\">\r\n                    <span class=\"icon icon-set-buttons icon-size24 ic-add_button\"></span>\r\n                </div>\r\n                <div class=\"trash bin ui-droppable\" *ngIf=\"selectedModel && selectedModel.item\">\r\n                    <div class=\"icon icon-set-buttons icon-size24 ic-bin_button {{hoverClass}}\" (mouseenter)=\"addHoverClass()\" (mouseleave)=\"removeHoverClass()\" (click)=\"removeFilterRow()\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"condition-state\" *ngIf=\"state === filterControlStates.Condition && isPanelOpen()\">\r\n        <div>\r\n            <span class=\"icon icon-set-edittoolbox_popover16 icon-size16 ic-editdisabled disabled\"></span>\r\n           {{getFromResx('Controls', 'filterControl_editing')|async}}\r\n        </div>\r\n        <div class=\"hyperlink-control primary\" (click)=\"setContext()\">\r\n           {{getFromResx('Controls', 'filterControl_done')|async}}\r\n        </div>\r\n    </div>\r\n    <div class=\"complex-state\" *ngIf=\"state === filterControlStates.Complex\">\r\n        <span class=\"icon icon-set-conditionsdropdown icon-size64 ic-complex\"></span>\r\n        <div>\r\n           {{getFromResx('Controls', 'filterControl_complex')|async}}\r\n        </div>\r\n        <div class=\"open-reset\">\r\n            <div class=\"hyperlink-control primary\" (click)=\"setContext()\">\r\n               {{getFromResx('Controls', 'filterControl_open_in_conditions')|async}}\r\n            </div>\r\n            <div class=\"hyperlink-control secondary reset\" (click)=\"resetFilter()\">\r\n               {{getFromResx('Controls', 'filterControl_reset')|async}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { extend } from 'angular';\r\nimport { IGridCell } from '../../../../types/models/grid/i-grid-cell';\r\nimport { IGridRow } from '../../../../types/models/grid/i-grid-row';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { ColumnTypes } from '../../../shared/enums/grid/column-types';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-grid',\r\n    templateUrl: './grid.component.html',\r\n    styleUrls: ['./grid.component.less']\r\n})\r\nexport class GridComponent extends BaseResourceComponent implements OnInit {\r\n\r\n    @Input() public fixedRows: number;\r\n    @Input() public valuesAreReverted: boolean;\r\n    @Input() public parameterNameEditable: boolean;\r\n    @Input() public headerText: string;\r\n    @Input() public rows: any[];\r\n    @Input() public cells: string[];\r\n    @Input() public selectedRow: IGridRow;\r\n\r\n    @Output() public setSelectedRow = new EventEmitter<IGridRow>();\r\n\r\n    public typeDropPlaceholder: string;\r\n\r\n    private _toArrayMapping: any;\r\n\r\n    constructor(private _resourceService: ResourceService) {\r\n        super(_resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.typeDropPlaceholder = this._resourceService.getString('general_type_drop');\r\n\r\n        if (this.cells && this.cells.length) {\r\n\r\n            this._toArrayMapping = {};\r\n\r\n            for (let i = 0; i < this.cells.length; i++) {\r\n\r\n                this._toArrayMapping[this.cells[i]] = undefined;\r\n            }\r\n        }\r\n    }\r\n\r\n    public selectRow(row: IGridRow, rowIndex: number): void {\r\n\r\n        if (this.fixedRows - 1 < rowIndex) {\r\n            this.selectedRow = row;\r\n            this.setSelectedRow.emit(this.selectedRow);\r\n        }\r\n        else {\r\n            this.selectedRow = null;\r\n        }\r\n    }\r\n\r\n    public isTextbox(cell: IGridCell): boolean {\r\n        if (!cell.type || (cell.type === ColumnTypes.complexText || cell.type === ColumnTypes.simpleText)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public getCells(row: IGridRow): IGridCell[] {\r\n        if (Array.isArray(row)) {\r\n            return <IGridCell[]>(<any>row);\r\n        }\r\n\r\n        if (row instanceof sourceCode.k2Designer.objectModel.core.model.ModelBase) {\r\n            return (<sourceCode.k2Designer.objectModel.core.model.ModelBase>(<any>row)).toArray(this._toArrayMapping);\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    get columnCount(): number {\r\n        if (this.rows && this.rows.length) {\r\n            return this.getCells(this.rows[0]).length;\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n\r\n    public onBlur(): void {\r\n        this.selectedRow = null;\r\n    }\r\n\r\n}\r\n","<div class=\"k2-grid\">\r\n    <div class=\"grid-heading\" *ngIf=\"headerText\">\r\n        <div class=\"icon-heading\">\r\n            <span class=\"icon icon-set-steps icon-size24 ic-form\"></span>\r\n        </div>\r\n        <div class=\"text-heading\">{{headerText}}</div>\r\n    </div>\r\n    <div class=\"grid-row fadeMeIn\"\r\n         *ngFor=\"let row of rows;let $rowindex=index; let $last=last\"\r\n         (click)=\"selectRow(row, $rowindex);\"\r\n         (blur)=\"onBlur()\"\r\n         [ngClass]=\"{ 'not-last' : !$last, 'selected' : selectedRow == row, 'is-last-row' : $last }\">\r\n        <div class=\"grid-cell\" *ngFor=\"let cell of getCells(row);let $columnindex=index; let $first=first\"\r\n             [ngClass]=\"{ 'fixed': ((fixedRows > 0) && ($rowindex < fixedRows)) || ((parameterNameEditable === false) && ($columnindex % 2) == 0), 'left-border': !$first }\"\r\n             [ngStyle]=\"{ 'width': 'calc(' + (100 / columnCount) + '% - 1px)' }\">\r\n            <ul *ngIf=\"cell.type === 'tworows'\">\r\n                <li>\r\n                    <label>{{valuesAreReverted?cell.smartFields[0].customTitle:cell.smartFields[0].text}}</label>\r\n                </li>\r\n                <li class=\"sub-text\">\r\n                    <label>{{valuesAreReverted?cell.smartFields[0].text:cell.smartFields[0].customTitle}}</label>\r\n                </li>\r\n            </ul>\r\n            <div [attr.disabled]=\"(fixedRows > 0) && ($rowindex < fixedRows)\">\r\n                <k2-text-box class=\"k2-control control-background\" [ngClass]=\"{ 'selected' : selectedRow == row }\" *ngIf=\"isTextbox(cell)\"\r\n                             [k2Watermark]=\"(((fixedRows > 0) && ($rowindex < fixedRows)) || ((parameterNameEditable === false) && ($columnindex % 2) == 0))?'': typeDropPlaceholder\"\r\n                             [k2Expression]=\"cell\"></k2-text-box>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Directive, ElementRef, Injector, Input } from '@angular/core';\r\nimport { UpgradeComponent } from '@angular/upgrade/static';\r\n\r\n@Directive({\r\n    selector: 'k2-help-link'\r\n    //Extending old upgraded directive (directives/k2HelpLink/k2HelpLink)\r\n})\r\nexport class HelpLinkComponent extends UpgradeComponent {\r\n\r\n    @Input() helpLinkText: string;\r\n    @Input() k2ContextId: string;\r\n    @Input() k2ExactLocation: string;\r\n    @Input() helpLinkUrl: string;\r\n\r\n    constructor(elementRef: ElementRef, injector: Injector) {\r\n        super('k2HelpLink', elementRef, injector);\r\n    }\r\n\r\n}\r\n","import { Directive, InjectionToken } from '@angular/core';\r\n\r\n/**\r\n * Injection token that can be used to reference instances of `InfoPopupTemplate`. It serves as\r\n * alternative token to the actual `InfoPopupTemplate` class which could cause unnecessary\r\n * retention of the class and its directive metadata.\r\n */\r\nexport const INFO_POPUP_TEMPLATE = new InjectionToken<InfoPopupTemplate>('K2InfoPopupTemplate');\r\n\r\n/** Used to flag tab labels for use with the portal directive */\r\n@Directive({\r\n    selector: '[k2-info-popup-template], [K2InfoPopupTemplate]',\r\n    providers: [{ provide: INFO_POPUP_TEMPLATE, useExisting: InfoPopupTemplate }],\r\n})\r\nexport class InfoPopupTemplate { }\r\n","import { Component, ContentChild, ElementRef, Inject, Input, OnInit, TemplateRef, ViewChild } from '@angular/core';\r\nimport { IPosition } from '../../../../types/models/positioning/i-position';\r\nimport { IUserOptions } from '../../../../types/services/user-options/i-user-options-service';\r\nimport { UserOptionsServiceToken } from '../../../services/user-options/user-options-service-factory';\r\nimport { Positioning } from '../../../shared/enums/positioning/positioning';\r\nimport { UserOptionsTipTypes } from '../../../shared/enums/user-options/user-options-tip-types';\r\nimport { InfoPopupTemplate } from './info-popup-template';\r\n\r\n@Component({\r\n    selector: 'k2-info-popup',\r\n    templateUrl: './info-popup.component.html',\r\n    styleUrls: ['./info-popup.component.less']\r\n})\r\nexport class InfoPopupComponent implements OnInit {\r\n    @Input() popupClass: string;\r\n    @Input() position: Positioning = Positioning.left;\r\n    @Input() showOnCreate = false;\r\n    @Input() forceHideWhenNoPosition = false;\r\n    @Input() target: HTMLElement;\r\n    @Input() location: ClientRect;\r\n    @Input() gotItType: UserOptionsTipTypes;\r\n\r\n    isOpen = false;\r\n    hasBeenOpened: boolean;\r\n    imageResolution = window.devicePixelRatio < 2 ? '1x' : '2x';\r\n\r\n    @ContentChild(InfoPopupTemplate, { read: TemplateRef }) template: TemplateRef<any>;\r\n\r\n    private _popupEl: ElementRef;\r\n    get popupEl(): ElementRef<HTMLElement> {\r\n        return this._popupEl;\r\n    }\r\n    @ViewChild('popup') set popupEl(val: ElementRef<HTMLElement>) {\r\n        if (val) {\r\n            this._popupEl = val;\r\n            this.refreshPosition();\r\n        }\r\n    }\r\n\r\n    constructor(protected _el: ElementRef<HTMLElement>, @Inject(UserOptionsServiceToken) private userOptionsService: IUserOptions) { }\r\n\r\n    ngOnInit(): void {\r\n        if (this.showOnCreate) {\r\n            this.isOpen = true;\r\n        }\r\n    }\r\n\r\n    refreshPosition() {\r\n        const popupHtml = this.popupEl ? this.popupEl.nativeElement : this._el.nativeElement;\r\n        let targetPosition: any;\r\n\r\n        if (this.location) {\r\n            targetPosition = this.location;\r\n        }\r\n        else if (popupHtml) {\r\n            targetPosition = this.target ? this.target.getBoundingClientRect() : this._el.nativeElement.getBoundingClientRect();\r\n        }\r\n\r\n        if (targetPosition.height === 0 && targetPosition.width === 0 && this.forceHideWhenNoPosition) {\r\n            this.close(false);\r\n            return;\r\n        }\r\n\r\n        if (targetPosition && popupHtml) {\r\n            let arrowPosition: string;\r\n            const pos = {\r\n                top: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                left: 0\r\n            } as IPosition;\r\n\r\n            switch (this.position) {\r\n                case Positioning.top:\r\n                    arrowPosition = 'arrow-bottom';\r\n                    pos.top = targetPosition.top - popupHtml.getBoundingClientRect().height - 25;\r\n                    pos.left; targetPosition.left + (targetPosition.width - popupHtml.getBoundingClientRect().width) / 2;\r\n                    break;\r\n                case Positioning.bottom:\r\n                    arrowPosition = 'arrow-top';\r\n                    pos.top = targetPosition.bottom + 25;\r\n                    pos.left; targetPosition.left + (targetPosition.width - popupHtml.getBoundingClientRect().width) / 2;\r\n                    break;\r\n                case Positioning.left:\r\n                    arrowPosition = 'arrow-right';\r\n                    pos.top = (targetPosition.top + (targetPosition.height / 2) - (popupHtml.getBoundingClientRect().height / 2)) - 18; // 18 less to align the triangle position\r\n                    pos.left = (targetPosition.left - popupHtml.getBoundingClientRect().width - 25);\r\n                    break;\r\n                case Positioning.right:\r\n                    arrowPosition = 'arrow-left';\r\n                    pos.top = (targetPosition.top + (targetPosition.height / 2) - (popupHtml.getBoundingClientRect().height / 2)) - 18; // 18 less to align the triangle position\r\n                    pos.left = targetPosition.right + 25;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            popupHtml.style.top = pos.top + 'px';\r\n            popupHtml.style.left = pos.left + 'px';\r\n            popupHtml.classList.add(arrowPosition);\r\n        }\r\n    }\r\n\r\n    close(neverShowAgain?: boolean): void {\r\n        this.isOpen = false;\r\n        if (neverShowAgain && this.gotItType) {\r\n            this.userOptionsService.setTipValue(this.gotItType, false);\r\n        }\r\n    }\r\n\r\n    open(targetPosition?: ClientRect) {\r\n        if (this.userOptionsService.userOptions.tips[this.gotItType]) {\r\n            if (targetPosition) {\r\n                this.location = targetPosition;\r\n            }\r\n            this.isOpen = true;\r\n        }\r\n    }\r\n}\r\n","<div class=\"info-popup-host\" *ngIf=\"isOpen\">\r\n    <div class=\"info-popup\" [ngClass]=\"popupClass\" #popup>\r\n        <div class=\"text-right\">\r\n            <button class=\"btn-close\" (click)=\"close(false)\">\r\n                <i class=\"icon icon-set-close icon-size16 close16_normal\"></i>\r\n            </button>\r\n        </div>\r\n        <div class=\"content\">\r\n            <ng-container *ngTemplateOutlet=\"template; context: { $implicit: this }\"></ng-container>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { IValidationService } from '../../../../types/services/validation/ivalidation.service';\r\nimport { ClipboardServiceToken } from '../../../services/clipboard/clipboard-service-factory';\r\nimport { CommandServiceToken } from '../../../services/command/command-service-factory';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../services/validation/validation-service-factory';\r\nimport { BaseComponent } from '../../base/base.component';\r\n\r\n@Component({\r\n    selector: 'k2-input',\r\n    templateUrl: './input.component.html',\r\n    styleUrls: ['./input.component.less']\r\n})\r\nexport class InputComponent extends BaseComponent implements OnInit, OnDestroy {\r\n    @Input() public value: any;             // previously textValue\r\n    @Input() public validationTypes: any;\r\n    @Input() public validationModel: any;\r\n    @Input() public validationProperty: string;\r\n    @Input() public parentObject: sourceCode.k2Designer.objectModel.core.model.IModelObject;\r\n    @Input() public showCustomBadge: boolean;\r\n    @Input() public alwaysHideBadge = false;\r\n    @Input() public customBadgeModel: sourceCode.k2Designer.objectModel.core.model.IModelObject;\r\n\r\n    @Input() public placeholder: string;\r\n    @Input() public maxLength: number;\r\n    @Input() public isDisabled = false;\r\n    @Input() public shouldIgnoreFocus = false;\r\n    @Input() public isReadOnly = false;\r\n\r\n    @Output() public k2Change = new EventEmitter<string>();\r\n    @Output() public k2Focus = new EventEmitter<any>();\r\n    @Output() public k2Blur = new EventEmitter<any>();\r\n    //The two-way binding output for the input 'value'. This needs to be emitted on change for two-way binding to work.\r\n    @Output() public valueChange = new EventEmitter<string>();\r\n    //Event to indicate key pressed\r\n    @Output() public keyPressed = new EventEmitter<KeyboardEvent>();\r\n\r\n    @ViewChild('input') inputElement: ElementRef<HTMLInputElement>;\r\n\r\n    constructor(@Inject(ValidationServiceToken) validationService: IValidationService,\r\n        @Inject(UndoRedoServiceToken) private undoRedoService: IUndoRedoService,\r\n        @Inject(CommandServiceToken) private commandService: ICommandService,\r\n        @Inject(ClipboardServiceToken) private clipboardService: IClipboardService,\r\n        private resourceService: ResourceService) {\r\n        super(validationService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (!this.validationTypes) {\r\n            this.validationTypes = [];\r\n        }\r\n        if (this.validationModel && this.validationProperty) {\r\n            this.validatePropertyOnChange(this.validationModel, this.validationProperty);\r\n        }\r\n        this.setApplicableValidationTypes(this.validationTypes);\r\n\r\n        //Default watermark\r\n        this.placeholder = this.placeholder || this.getString('textbox_watermark_type');\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n\r\n    }\r\n\r\n    public onFocus(ev?: FocusEvent): void {\r\n        if (!this.shouldIgnoreFocus) {\r\n            this.clipboardService.setCurrentContext('input');\r\n            this.commandService.setCurrentContext();\r\n            this.k2Focus.emit(ev);\r\n        }\r\n    }\r\n\r\n    public onBlur(ev): void {\r\n        if (!this.shouldIgnoreFocus) {\r\n            this.k2Blur.emit(ev);\r\n        }\r\n    }\r\n\r\n    public onEditorDrop(event: DragEvent): void {\r\n        if (event.stopPropagation) event.stopPropagation();\r\n        if (event.preventDefault) event.preventDefault();\r\n    }\r\n\r\n    public onModelChanged(val: string): void {\r\n        if (this.undoRedoService.isEnabled()) {\r\n            this.undoRedoService.addUndoMarker('--k2Input: changed text--');\r\n        }\r\n\r\n        this.k2Change.emit(val);\r\n        this.valueChange.emit(val);\r\n    }\r\n\r\n    /**\r\n     * Focus this textbox\r\n     */\r\n    public doFocus() {\r\n        this.inputElement.nativeElement.focus();\r\n        //cast to any because we only really need the target property of FocusEvent\r\n        this.onFocus({ target: this.inputElement.nativeElement } as any);\r\n    }\r\n\r\n    /**\r\n     * key press event handler\r\n     * key press only gets triggered by input that changes text\r\n     *\r\n     * @param event\r\n     */\r\n    onKeyPress(event: KeyboardEvent): boolean {\r\n        this.keyPressed.emit(event);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Returns resource string from JSON\r\n     *\r\n     * @param key\r\n     */\r\n    getString = (key: string) => this.resourceService.getString(key);\r\n}\r\n","<div style=\"position: relative\" class=\"contents\">\r\n    <input #input\r\n           type=\"text\"\r\n           K2Droppable\r\n           [k2Droptypes]=\"\"\r\n           [maxlength]=\"maxLength\"\r\n           [ngModel]=\"value\"\r\n           (ngModelChange)=\"onModelChanged($event)\"\r\n           k2-tab-index\r\n           [placeholder]=\"placeholder\"\r\n           [disabled]=\"isDisabled\"\r\n           [readonly]=\"isReadOnly\"\r\n           (focus)=\"onFocus($event)\"\r\n           (blur)=\"onBlur($event)\"\r\n           (keypress)=\"onKeyPress($event)\"/>\r\n    <k2-badges *ngIf=\"validationModel\" [k2Model]=\"validationModel\"></k2-badges>\r\n    <k2-badges [forceShow]=\"showCustomBadge\" [k2Model]=\"customBadgeModel\" [alwaysHideBadge]=\"alwaysHideBadge\"></k2-badges>\r\n</div>\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { IListItemIconData } from '../../../../../types/uiComponents/list-item/i-list-item-icon-data';\r\n\r\n@Component({\r\n    selector: 'k2-list-item-icon-template',\r\n    templateUrl: './icon-template.component.html',\r\n    styleUrls: ['./icon-template.component.less']\r\n})\r\nexport class IconTemplateComponent implements OnInit {\r\n\r\n    /**\r\n     * Data to describe how the icon template should render\r\n     * isVertical: if true, will add class 'vertical' to the flexRow div\r\n     * isWrappedInContentDiv: if true, will wrap the flexRow div inside a fixed content div\r\n     * customClassFlexRow: custom class to add to flexRow div (only adds if specified)\r\n     * iconClass: specific css class for icon\r\n     * backgroundColor: if specified, will add an inline background-color of specified value to flexRow div\r\n     */\r\n    @Input() listItemIconData: IListItemIconData = {\r\n        isVertical: false,\r\n        isWrappedInContentDiv: false,\r\n        customClassFlexRow: '',\r\n        iconClass: '',\r\n        backgroundColor: ''\r\n    };\r\n\r\n    @Output() iconClicked: EventEmitter<EventTarget> = new EventEmitter<EventTarget>();\r\n\r\n    get templateContext() {\r\n        return { $implicit: this };\r\n    }\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    onIconClicked(event: MouseEvent): void {\r\n        this.iconClicked.emit(event.target);\r\n    }\r\n}\r\n","<!--\r\n    To use this component with a custom template, simply set the icontemplate inside the listItemIconData. If it is not set, it will use default.\r\n    To use the context inside the icon component, use let-icon and icon.iconproperty inside your template\r\n-->\r\n<ng-container *ngIf=\"!listItemIconData.isWrappedInContentDiv\">\r\n    <ng-container *ngTemplateOutlet=\"listItemIconData?.iconTemplate || defaultIconContent; context: templateContext\">\r\n\r\n    </ng-container>\r\n</ng-container>\r\n<div *ngIf=\"listItemIconData.isWrappedInContentDiv\" class=\"control-column fixed\">\r\n    <ng-container *ngTemplateOutlet=\"listItemIconData?.iconTemplate || defaultIconContent; context: templateContext\"></ng-container>\r\n</div>\r\n\r\n<ng-template #defaultIconContent>\r\n    <div class=\"flexrow list-item-icons\"\r\n         [class]=\"listItemIconData.customClassFlexRow || ''\"\r\n         [class.vertical]=\"listItemIconData.isVertical\"\r\n         [style.background-color]=\"listItemIconData.backgroundColor || null\"\r\n         (click)=\"onIconClicked($event)\">\r\n        <span [class]=\"'icon ' + (listItemIconData.iconClass || '')\"></span>\r\n        <svg class=\"icon icon-size24\" *ngIf=\"listItemIconData.isIconSvg\">\r\n            <use [attr.xlink:href]=\"'App_Themes/Designer/_svg/steps_medium.svg#'+ (listItemIconData.iconClass || '')\" />\r\n        </svg>\r\n    </div>\r\n</ng-template>\r\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnChanges, OnInit, Output, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { DropDownMenuAlignment } from 'src/app/shared/enums/drop-down/drop-down-menu-alignment';\r\nimport { DropDownMenuTrianglePosition } from 'src/app/shared/enums/drop-down/drop-down-triangle-position';\r\nimport { IExpression } from '../../../../types/models/core/configured-smart-fields/i-expression';\r\nimport { IValidationService } from '../../../../types/services/validation/ivalidation.service';\r\nimport { IListItemIconData } from '../../../../types/uiComponents/list-item/i-list-item-icon-data';\r\nimport { ClipboardServiceToken } from '../../../services/clipboard/clipboard-service-factory';\r\nimport { CommandServiceToken } from '../../../services/command/command-service-factory';\r\nimport { DragDropService } from '../../../services/drag-drop/drag-drop.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../services/validation/validation-service-factory';\r\nimport { listItemCommands } from '../../../shared/constants/list-item';\r\nimport IDropDownMenuItem from '../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from '../../../shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { ListItemDropDownType } from '../../../shared/enums/list-item/list-item-drop-down-type';\r\nimport { TextBoxConstraint } from '../../../shared/enums/text-box/text-box-constraint';\r\nimport { isUndefinedOrNull, propertyMatchesInObjectArray } from '../../../shared/utils/general';\r\nimport { findUniqueNameForListArray } from '../../../shared/utils/name-helper';\r\nimport { BaseComponent } from '../../base/base.component';\r\nimport { InputComponent } from '../input/input.component';\r\nimport { TextboxComponent } from '../text-box/text-box.component';\r\n\r\n@Component({\r\n    selector: 'k2-list-item',\r\n    templateUrl: './list-item.component.html',\r\n    styleUrls: ['./list-item.component.less']\r\n})\r\nexport class ListItemComponent extends BaseComponent implements OnInit, OnChanges {\r\n\r\n    /**\r\n     * INPUT FLAGS\r\n     * -----------\r\n     */\r\n    /**\r\n     * Custom CSS class for List-Item component main element\r\n     */\r\n    @Input() customClass = '';\r\n    /**\r\n     * Property to determine if item is disabled\r\n     */\r\n    @Input() isDisabled = false;\r\n    /**\r\n     * Determines whether the List Item kan be edited (typing into a text box)\r\n     */\r\n    @Input() isEditable = false;\r\n    @Input() isEditing = false;\r\n    /**\r\n     * If true, a required indicator will be added to left of item\r\n     */\r\n    @Input() isRequired = false;\r\n    /**\r\n     * If true, item will add a blue selection indicator around it if \"selected\" property is true\r\n     */\r\n    @Input() isSelectable = false;\r\n    /**\r\n     * Indicates if the item should display a selected state or not\r\n     */\r\n    @Input() isSelected = false;\r\n    @Input() isTextBoxFocused = false;\r\n    /**\r\n     * If true, the item will display a sortable drag handle on the right\r\n     */\r\n    @Input() isSortable = false;\r\n    /**\r\n     * If true, the toggle button will be displayed on right of textbox (switch between read-only and edit mode)\r\n     */\r\n    @Input() shouldShowToggleTextbox = false;\r\n    /**\r\n     * If true, the add/remove toggle button that enables/disables is displayed\r\n     */\r\n    @Input() shouldShowToggleEnabled = false;\r\n    @Input() isDraggable = false;\r\n    /**\r\n     * If true, a K2 Textbox will be rendered if editable true\r\n     * If false, an input will be rendered if editable true\r\n     */\r\n    @Input() shouldAllowDrop = false;\r\n    @Input() shouldAlwaysHideBadge = false;\r\n    @Input() shouldFocusOnCreate = false;\r\n    @Input() shouldForceFocus = false;\r\n    @Input() shouldHideBrowseButton = false;\r\n    /**\r\n     * If true, a dropdown arrow will be rendered on right of item\r\n     */\r\n    @Input() shouldShowDropDown = false;\r\n    /**\r\n     * Setting to display text below the list item.\r\n     */\r\n    @Input() shouldShowView = false;\r\n\r\n    /**\r\n     * Dropdown menu item template\r\n     */\r\n    @Input() dropDownMenuItemTemplate: DropdownMenuItemTemplates = DropdownMenuItemTemplates.DefaultListItem;\r\n    /**\r\n     * Watermark for dropdown or textbox placeholder\r\n     */\r\n    @Input() watermark = '';\r\n    @Input() emptyDropDownTemplate = '';\r\n    @Input() footerItems: IDropDownMenuItem[] = [];\r\n    @Input() leftIconData: IListItemIconData = null;\r\n    /**\r\n     * Object model associated with this list item - either an expression or string\r\n     */\r\n    @Input() listItemModel: IExpression | string;\r\n    @Input() listItemDropDownType: ListItemDropDownType = ListItemDropDownType.custom;\r\n    @Input() menuItems: IDropDownMenuItem[] = [];\r\n    @Input() rightIconData: IListItemIconData = null;\r\n    /**\r\n     * Sub text that must be displayed underneath text box\r\n     */\r\n    @Input() subText: string;\r\n    @Input() subTextTooltip = '';\r\n    @Input() tabIndexValue = 0;\r\n    @Input() textBoxConstraint: TextBoxConstraint = TextBoxConstraint.None;\r\n    /**\r\n     * Name of property on the model that returns the text field for this list item\r\n     */\r\n    @Input() textProperty = '';\r\n    /**\r\n     * Before the item text is set, it will be validated against this model if specified\r\n     */\r\n    @Input() validationArray: sourceCode.k2Designer.objectModel.core.model.IModelArray<any>;\r\n    /**\r\n     * Name of a view to display below the list item.\r\n     */\r\n    @Input() viewName = '';\r\n\r\n    /**\r\n     * Types of validation to perform on model by BaseComponent parent\r\n     */\r\n    @Input() validation: IValidationOptions[] = [];\r\n\r\n    /**\r\n     * Is the label/input with no dropdown read-only\r\n     */\r\n    @Input() isReadonly = false;\r\n\r\n    /**\r\n     * EVENTS / OUTPUT\r\n     * ---------------\r\n     */\r\n\r\n    /**\r\n     * Bind to the drop down item selected event\r\n     */\r\n    @Output() dropDownItemSelected: EventEmitter<IDropDownMenuItem> = new EventEmitter<IDropDownMenuItem>();\r\n    /**\r\n     * Bind to the content toggled enabled/disabled state changed event\r\n     */\r\n    @Output() enabledStateToggled: EventEmitter<void> = new EventEmitter<void>();\r\n    /**\r\n     * Bind to list item control clicked event (selectListItem)\r\n     */\r\n    @Output() listItemSelected: EventEmitter<EventTarget> = new EventEmitter<EventTarget>();\r\n    /**\r\n     * Bind to the content texbox button clicked event\r\n     */\r\n    @Output() textBoxButtonClicked: EventEmitter<void> = new EventEmitter<void>();\r\n    /**\r\n     * Bind to the content right icon button clicked event\r\n     */\r\n    @Output() rightIconClicked: EventEmitter<EventTarget> = new EventEmitter<EventTarget>();\r\n    /**\r\n     * Bind to text box blur event\r\n     */\r\n    @Output() textBoxBlurred: EventEmitter<EventTarget> = new EventEmitter<EventTarget>();\r\n    /**\r\n     * Bind to text box focus event\r\n     */\r\n    @Output() textBoxFocused: EventEmitter<EventTarget> = new EventEmitter<EventTarget>();\r\n    /**\r\n     * Bind to the toggle button clicked event (toggleTextBox)\r\n     */\r\n    @Output() toggleTextBoxButtonClicked: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n    @Output() itemTextChange: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() inputClicked: EventEmitter<void> = new EventEmitter<void>();\r\n    @Output() inputKeyPressed: EventEmitter<number> = new EventEmitter<number>();\r\n\r\n    @ViewChild('input') simpleTextInput: InputComponent;\r\n    @ViewChild('noDropInput') noDropInput: ElementRef<HTMLInputElement>;\r\n    @ViewChild('textbox') textbox: TextboxComponent;\r\n\r\n    /**\r\n     * State of the toggling (only relevant if shouldToggleEnabled is true)\r\n     */\r\n    isToggleEnabled = false;\r\n    listItemHover = false;\r\n    buttonHover = false;\r\n    menuActive = false;\r\n    isDraggableOnHover = false;\r\n\r\n    dropdownMenuItemTemplate: typeof DropdownMenuItemTemplates = DropdownMenuItemTemplates;\r\n    dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n\r\n    get shouldShowLeftIcon(): boolean {\r\n        const shouldShow = this.leftIconData\r\n            && !(this.shouldShowDropDown && ((this.isToggleEnabled && !this.shouldAllowDrop) || (!this.isToggleEnabled && !this.isEditable)));\r\n        return shouldShow;\r\n    }\r\n\r\n    constructor(private _dragDropService: DragDropService,\r\n        private _resourceService: ResourceService,\r\n        @Inject(ValidationServiceToken) private _validationService: IValidationService,\r\n        @Inject(UndoRedoServiceToken) private _undoRedoService: IUndoRedoService,\r\n        @Inject(ClipboardServiceToken) private _clipBoardService: IClipboardService,\r\n        @Inject(CommandServiceToken) private _commandService: ICommandService,\r\n        private _rootElement: ElementRef) {\r\n        super(_validationService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n\r\n        this.setApplicableValidationTypes(this.validation);\r\n        if (this.validation?.length) super.validateArrayOnChange(this.listItemModel as IExpression, 'smartFields', null);\r\n\r\n        if (this.shouldFocusOnCreate) {\r\n            $(this._rootElement.nativeElement).focus();\r\n        }\r\n\r\n        this._ensureWatermark();\r\n\r\n        this._createDropdownCommand();\r\n    }\r\n\r\n    ngOnChanges(change: SimpleChanges) {\r\n        if (change?.isSelected) {\r\n            if (change.isSelected.previousValue && !change.isSelected.currentValue && this.isTextBoxFocused) {\r\n                this.isTextBoxFocused = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Indicates whether a drag operation is in progress\r\n     */\r\n    get isDragging(): boolean {\r\n        return this._dragDropService.isBusyDragging;\r\n    }\r\n\r\n    /**\r\n     * Gets the text value of the model, from its text property\r\n     */\r\n    get itemText(): string {\r\n        if (this.listItemModel && this.textProperty) {\r\n            return this.listItemModel[this.textProperty];\r\n        }\r\n        return '';\r\n    }\r\n\r\n    /**\r\n     * Sets the text value of the model's text property\r\n     */\r\n    set itemText(val: string) {\r\n        //TODO: Test undo/redo with this, the old k2ListItem directive had an elaborate workaround with timeouts for undo/redo here\r\n        if (this.textProperty !== '' && !isUndefinedOrNull(this.listItemModel[this.textProperty])) {\r\n            this.listItemModel[this.textProperty] = val;\r\n        }\r\n    }\r\n\r\n    modelChanged(inputChanged: string, val: string): void {\r\n        if (inputChanged === 'itemText') {\r\n            //set item text\r\n            this.itemText = val;\r\n            this.itemTextChange.emit(val);\r\n        }\r\n    }\r\n\r\n    get itemTitle(): string {\r\n        let result = '';\r\n        if (this.listItemModel) {\r\n            //Use model with text property if specified\r\n            if (this.textProperty) {\r\n                result = this.listItemModel[this.textProperty];\r\n            } else {\r\n                const expression = this.listItemModel as sourceCode.k2Designer.objectModel.core.configuredSmartFields.IExpressionExtended;\r\n                if (expression?.smartFields?.length > 0) {\r\n                    if (expression.smartFields[0].customTitle) {\r\n                        result = expression.smartFields[0].customTitle;\r\n                    }\r\n                    else {\r\n                        result = expression.smartFields[0].title;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Gets list item model as type IExpression\r\n     * */\r\n    get expressionModel(): sourceCode.k2Designer.objectModel.core.configuredSmartFields.IExpression {\r\n        return (this.listItemModel as sourceCode.k2Designer.objectModel.core.configuredSmartFields.IExpression) || null;\r\n    }\r\n\r\n    /**\r\n     * List item selected event\r\n     *\r\n     * @param event\r\n     */\r\n    selectListItem(event: MouseEvent): void {\r\n        this.listItemSelected.emit(event?.target);\r\n    }\r\n\r\n    /**\r\n     * Textbox toggled event\r\n     * */\r\n    toggleTextbox = (): void => {\r\n        const expression = this.listItemModel as sourceCode.k2Designer.objectModel.core.configuredSmartFields.IExpression;\r\n        if (!isUndefinedOrNull(expression)) {\r\n            this._undoRedoService.addUndoMarker('--k2ListItem: toggle expression isDynamic group --');\r\n\r\n            expression.isDynamic = !expression.isDynamic;\r\n        }\r\n\r\n        this._ensureWatermark();\r\n\r\n        this.toggleTextBoxButtonClicked.emit();\r\n    };\r\n\r\n    /**\r\n     * Toggle between enable/disable state.\r\n     */\r\n    toggleEnableState(): void {\r\n\r\n        this.isDisabled = !this.isDisabled;\r\n\r\n        this.enabledStateToggled.emit();\r\n    }\r\n\r\n    /**\r\n     * Textbox focused event\r\n     * */\r\n    onTextboxFocus(event: FocusEvent): void {\r\n\r\n        this._clipBoardService.setCurrentContext();\r\n        this._commandService.setCurrentContext();\r\n\r\n        if (this.shouldAllowDrop) {\r\n            const rootEl = $(this._rootElement.nativeElement);\r\n            rootEl.find('.k2-text-box-focused').removeClass('k2-text-box-focused');\r\n            rootEl.addClass('k2-text-box-focused');\r\n        }\r\n\r\n        this.isTextBoxFocused = true;\r\n\r\n        this.textBoxFocused.emit(event.target);\r\n    }\r\n\r\n    /**\r\n     * Textbox blurred event\r\n     * */\r\n    onTextboxBlur(event: FocusEvent): void {\r\n        const shouldApplyValidation = this.validationArray?.length > 0;\r\n        let isValidationPassed = true;\r\n\r\n        if (shouldApplyValidation) {\r\n            if (this.textProperty) {\r\n                if (shouldApplyValidation) {\r\n                    //If title is empty, set back to original title\r\n                    const originalTitle = (this.listItemModel as any).originalTitle;\r\n                    if (this.itemText === '' && originalTitle) {\r\n                        this.itemText = originalTitle;\r\n                    }\r\n\r\n                    //Because the list item model is bound, the validation array values will be updated as textbox value is updated\r\n                    //The item matching the itemText will always exist in the array, validate for more than 1 match:\r\n                    if (propertyMatchesInObjectArray(this.validationArray, this.textProperty, this.itemText) > 1) {\r\n                        this.itemText = findUniqueNameForListArray(this.validationArray,\r\n                            this.textProperty,\r\n                            this.itemText,\r\n                            this.listItemModel, false);\r\n                        isValidationPassed = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (isValidationPassed) {\r\n            this.isTextBoxFocused = false;\r\n            this.textBoxBlurred.emit(event.target);\r\n        } else {\r\n            //don't blur if validation failed\r\n            (event.target as HTMLElement).focus();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Event was emitted from child ListItemContent to ListItem to indicate that\r\n     * its textbox button was clicked.\r\n     * Need to emit to the List Item's parent\r\n     * */\r\n    onRightIconClicked = (target: EventTarget): void => {\r\n        this.rightIconClicked.emit(target);\r\n    };\r\n\r\n    /**\r\n     * Event was emitted from child ListItemContent to ListItem to indicate that\r\n     * its textbox button was clicked.\r\n     * Need to emit to the List Item's parent\r\n     * */\r\n    onTextBoxButtonClicked = (): void => {\r\n        this.textBoxButtonClicked.emit();\r\n    };\r\n\r\n    /**\r\n     * Event was emitted from child ListItemContent dropdown to ListItem to indicate that\r\n     * its dropdown item was selected.\r\n     * Need to emit to the List Item's parent\r\n     * */\r\n    onDropDownItemSelected = (item: IDropDownMenuItem) => {\r\n        this.dropDownItemSelected.emit(item);\r\n    };\r\n\r\n    /**\r\n     * Show tooltip for textbox if text overflows\r\n     *\r\n     * @param event\r\n     */\r\n    applyOverflowTooltip(event: MouseEvent): void {\r\n        const input = event.target as HTMLInputElement;\r\n        if (this._isOverflown(input)) {\r\n            input.setAttribute('title', input.value);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Removes textbox tooltip\r\n     *\r\n     * @param event\r\n     */\r\n    removeOverflowTooltip(event: MouseEvent): void {\r\n        const input = $(event.target);\r\n        input.removeAttr('title');\r\n    }\r\n\r\n    /**\r\n     * Input label clicked event\r\n     * */\r\n    onInputLabelClicked(): void {\r\n        this.inputClicked.emit();\r\n    }\r\n\r\n    onInputKeyPressed(event: KeyboardEvent): void {\r\n        this.inputKeyPressed.emit(event.keyCode);\r\n    }\r\n\r\n    getFromResx = (resourceName: string, key: string) => this._resourceService.getFromResx(resourceName, key);\r\n\r\n    private _isOverflown(element: HTMLElement): boolean {\r\n        return element.offsetWidth < element.scrollWidth;\r\n    }\r\n\r\n    /**\r\n     * Ensures that a constraint without a default watermark is handled appropriately\r\n     */\r\n    private _ensureWatermark(): void {\r\n        if (this.watermark.length > 0) {\r\n            //use custom specified watermark\r\n            return;\r\n        }\r\n\r\n        //Default dropdown watermark\r\n        if (this.shouldShowDropDown && !this.shouldAllowDrop && this.watermark === '') {\r\n            this.watermark = this._resourceService.getString('general_choose');\r\n        }\r\n        else if (!this.shouldShowDropDown || this.shouldAllowDrop) {\r\n            //Textbox watermark, set to default type drop or according to constraint\r\n            if (this.textBoxConstraint === TextBoxConstraint.None) {\r\n                this.watermark = this.shouldAllowDrop === false ?\r\n                    this._resourceService.getString('textbox_watermark_type') :\r\n                    this._resourceService.getString('textbox_watermark_droptype');\r\n            } else {\r\n\r\n                if (this.shouldAllowDrop) {\r\n                    switch (this.textBoxConstraint) {\r\n                        case TextBoxConstraint.DropOnly: {\r\n                            this.watermark = this._resourceService.getString('textbox_watermark_droponly');\r\n                        } break;\r\n                        case TextBoxConstraint.DropSelect: {\r\n                            this.watermark = this._resourceService.getString('textbox_watermark_dropselect');\r\n                        } break;\r\n                        default: {\r\n                            this.watermark = this._resourceService.getString('textbox_watermark_droptype');\r\n                        }\r\n                    }\r\n                } else {\r\n                    switch (this.textBoxConstraint) {\r\n                        case TextBoxConstraint.DropSelect: {\r\n                            this.watermark = this._resourceService.getString('textbox_watermark_select');\r\n                        } break;\r\n                        default: {\r\n                            this.watermark = this._resourceService.getString('textbox_watermark_type');\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This the a factory method. It creates a predefined implementation of dropdown with command type of list item.\r\n     *\r\n     * @param listItemControlType\r\n     */\r\n    private _createDropdownCommand() {\r\n        switch (this.listItemDropDownType) {\r\n            case ListItemDropDownType.toggle:\r\n                this.shouldShowDropDown = true;\r\n                this.isToggleEnabled = true;\r\n                this.shouldHideBrowseButton = true;\r\n\r\n                this.footerItems.push({\r\n                    title: this._resourceService.getString('control_PickerControl_Item_TypeConstructMyOwn'),\r\n                    key: listItemCommands.toggle.key,\r\n                    icon: listItemCommands.toggle.icon,\r\n                    innerItemComponent: DropdownMenuItemTemplates.Command,\r\n                    onSelected: this.toggleTextbox\r\n                });\r\n\r\n                break;\r\n            case ListItemDropDownType.browse:\r\n                this.shouldShowDropDown = true;\r\n                this.isToggleEnabled = false;\r\n                this.shouldHideBrowseButton = false;\r\n\r\n                this.footerItems.push({\r\n                    title: this._resourceService.getString('control_PickerControl_Item_Browse'),\r\n                    key: listItemCommands.browse.key,\r\n                    icon: listItemCommands.browse.icon,\r\n                    innerItemComponent: DropdownMenuItemTemplates.Command,\r\n                    onSelected: this.onTextBoxButtonClicked\r\n                });\r\n\r\n                break;\r\n            case ListItemDropDownType.picker:\r\n                this.shouldShowDropDown = true;\r\n                this.isToggleEnabled = true;\r\n                this.shouldHideBrowseButton = false;\r\n\r\n                this.footerItems.push({\r\n                    title: this._resourceService.getString('control_PickerControl_Item_Browse'),\r\n                    key: listItemCommands.browse.key,\r\n                    icon: listItemCommands.browse.icon,\r\n                    innerItemComponent: DropdownMenuItemTemplates.Command,\r\n                    onSelected: this.onTextBoxButtonClicked\r\n                });\r\n\r\n                this.footerItems.push({\r\n                    title: this._resourceService.getString('control_PickerControl_Item_TypeConstructMyOwn'),\r\n                    key: listItemCommands.toggle.key,\r\n                    icon: listItemCommands.toggle.icon,\r\n                    innerItemComponent: DropdownMenuItemTemplates.Command,\r\n                    onSelected: this.toggleTextbox\r\n                });\r\n\r\n                break;\r\n            default:\r\n            //Custom type: footer or command items must be specified by component using list-item menuItems or footerItems inputs\r\n                break;\r\n        }\r\n    }\r\n}\r\n","<div class=\"control-row fix k2-list-item-container {{customClass}}\"\r\n     (mousedown)=\"selectListItem($event)\"\r\n     (mouseenter)=\"listItemHover = true\"\r\n     (mouseleave)=\"listItemHover = false\"\r\n     [class.selected]=\"isSelected\"\r\n     [class.dragging]=\"isDragging\"\r\n     [class.dynamicMode]=\"shouldAllowDrop\"\r\n     [class.editing]=\"isEditing\"\r\n     [class.sortable]=\"isSortable\"\r\n     [class.unsortable]=\"!isSortable\"\r\n     [class.forcefocus]=\"shouldForceFocus || isTextBoxFocused\"\r\n     [class.disabled]=\"!isEditable\">\r\n\r\n    <div class=\"flexrow\">\r\n        <div class=\"control-column fixed selectable\" *ngIf=\"isSelectable\">\r\n            <div class=\"flexrow vertical\" [class.selected]=\"isSelected\"></div>\r\n        </div>\r\n        <div class=\"control-column float\" [ngClass]=\"{ 'disabled': isDisabled, 'enabled': !isDisabled }\">\r\n\r\n            <!-- #region List Item Content Template -->\r\n            <div class=\"flexrow k2-list-item k2-dropdown-target\">\r\n\r\n                <!-- REQUIRED INDICATOR -->\r\n                <!-- To be specced -->\r\n                <div class=\"control-column fixed\" *ngIf=\"isRequired\">\r\n                    <div class=\"flexrow required-icon vertical\">\r\n                        <span class=\"icon sprite-no-icon16\"></span>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- LEFT ICON (Optional, For input only, not dropdown) -->\r\n                <!-- All styles & content defined inside the template -->\r\n                <k2-list-item-icon-template [listItemIconData]=\"leftIconData\"\r\n                                            *ngIf=\"shouldShowLeftIcon\">\r\n                </k2-list-item-icon-template>\r\n\r\n                <!-- *** INPUT/TEXT/LABEL(with dropdown function) AREA *** -->\r\n                <div class=\"control-column float\">\r\n\r\n                    <!-- label with no drop-down -->\r\n                    <input type=\"text\"\r\n                           [placeholder]='watermark || (getFromResx(\"Wizards\", \"general_TypeHere\")|async)'\r\n                           [class.k2-input-with-sub-text]=\"subText && subText.length > 0 && !isEditing\"\r\n                           *ngIf=\"!shouldShowDropDown && !shouldAllowDrop\"\r\n                           (blur)=\"onTextboxBlur($event)\"\r\n                           (focus)=\"onTextboxFocus($event)\"\r\n                           [disabled]=\"isDisabled\"\r\n                           (click)=\"onInputLabelClicked($event)\"\r\n                           [ngModel]=\"itemText\"\r\n                           (ngModelChange)=\"modelChanged('itemText', $event)\"\r\n                           k2-tab-index\r\n                           [readonly]=\"isReadonly\"\r\n                           (mouseenter)=\"applyOverflowTooltip($event)\"\r\n                           (mouseleave)=\"removeOverflowTooltip($event)\"\r\n                           #noDropInput />\r\n\r\n                    <!-- label with dropdown that opens when clicking on the label -->\r\n                    <k2-drop-down *ngIf=\"shouldShowDropDown && ((isToggleEnabled && !shouldAllowDrop) || (!isToggleEnabled && !isEditable))\"\r\n                                  (click)=\"onInputLabelClicked()\"\r\n                                  class=\"k2-dropdown-parent task-condition-dropdown\"\r\n                                  [menuItems]=\"menuItems\"\r\n                                  [footerItems]=\"footerItems\"\r\n                                  [menuAlignment]=\"dropdownMenuAlignment.leftEdge\"\r\n                                  (onItemSelected)=\"onDropDownItemSelected($event)\"\r\n                                  [innerItemComponent]=\"dropDownMenuItemTemplate\"\r\n                                  [emptyStateTemplate]=\"emptyDropDownTemplate\"\r\n                                  [customMenuClass]=\"'labelWithDropDown' + menuActive? ' menu-active' : ''\">\r\n                        <div class=\"dropdown-placeholder flexrow\">\r\n                            <!-- LEFT ICON (Optional, For dropdown with input) -->\r\n                            <!-- All styles & content defined inside the template -->\r\n                            <k2-list-item-icon-template [listItemIconData]=\"leftIconData\" *ngIf=\"leftIconData\"></k2-list-item-icon-template>\r\n\r\n                            <input k2-tab-index class=\"k2-dd-flexChild k2-dd-text\"\r\n                                   type=\"text\"\r\n                                   disabled\r\n                                   [(ngModel)]=\"itemTitle\"\r\n                                   [placeholder]=\"watermark\"\r\n                                   (mouseenter)=\"applyOverflowTooltip($event)\"\r\n                                   (mouseleave)=\"removeOverflowTooltip($event)\" />\r\n                            <div class=\"k2-dd-flexChild k2-dd-dd-sprite dropDownArrowContainer\">\r\n                                <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                            </div>\r\n                        </div>\r\n                    </k2-drop-down>\r\n\r\n                    <!-- sub text -->\r\n                    <input class=\"sub-text\"\r\n                           (blur)=\"onTextboxBlur($event)\"\r\n                           disabled\r\n                           *ngIf=\"subText && !isEditing\"\r\n                           type=\"text\"\r\n                           [readonly]=\"isReadonly\"\r\n                           [(ngModel)]=\"subText\"\r\n                           [title]=\"subTextTooltip\"\r\n                           [placeholder]='watermark || (getFromResx(\"Wizards\", \"general_TypeHere\")|async)'\r\n                           k2-tab-index\r\n                           (mouseenter)=\"applyOverflowTooltip($event)\"\r\n                           (mouseleave)=\"removeOverflowTooltip($event)\" />\r\n\r\n                    <!-- simple input textbox -->\r\n                    <k2-input #input\r\n                              *ngIf=\"isEditable && !shouldAllowDrop\"\r\n                              [class.k2-input-with-sub-text]=\"subText && !isEditing\"\r\n                              (k2Blur)=\"onTextboxBlur($event)\"\r\n                              (k2Change)=\"modelChanged('itemText', $event)\"\r\n                              (k2Focus)=\"onTextboxFocus($event)\"\r\n                              [placeholder]='watermark || (getFromResx(\"Wizards\", \"general_TypeHere\")|async)'\r\n                              [(value)]=\"itemText\"\r\n                              [isReadonly]=\"isReadonly\"\r\n                              class=\"simpleTextBox\"\r\n                              k2-tab-index=\"0\"\r\n                              (keyPressed)=\"onInputKeyPressed($event)\"></k2-input>\r\n\r\n                    <!-- complex k2 textbox -->\r\n                    <k2-text-box #textbox \r\n                                class=\"text-box complexTextBox\"\r\n                                [ngClass]=\"{ 'k2-text-box-with-sub-text': subText && subText.length > 0 && !isEditing, 'editing' : isEditing}\"\r\n                                (k2ButtonClicked)=\"onTextBoxButtonClicked($event)\"\r\n                                (k2TextboxOnBlur)=\"onTextboxBlur($event)\"\r\n                                (k2TextboxOnFocus)=\"onTextboxFocus($event)\"\r\n                                (k2TextboxOnDrop)=\"selectListItem($event)\"\r\n                                [k2ShowBrowseButton]=\"isToggleEnabled && !shouldHideBrowseButton\"\r\n                                *ngIf=\"shouldAllowDrop\"\r\n                                [enabled]=\"isEditable\"\r\n                                [(k2Expression)]=\"listItemModel\"\r\n                                [k2Watermark]=\"watermark\"\r\n                                [textConstraint]=\"textBoxConstraint\"\r\n                                [k2CanDrop]=\"shouldAllowDrop\"\r\n                                [alwaysHideBadge]=\"true\">\r\n                    </k2-text-box>\r\n                </div>\r\n                <!-- RIGHT ICON (Optional) -->\r\n                <!-- All styles & content defined inside the template -->\r\n                <k2-list-item-icon-template *ngIf=\"rightIconData\" (iconClicked)=\"onRightIconClicked($event)\" [listItemIconData]=\"rightIconData\"></k2-list-item-icon-template>\r\n\r\n                <div class=\"control-column fixed\" *ngIf=\"isDraggable\">\r\n                    <div class=\"flexrow list-item-icons vertical\">\r\n                        <span class=\"icon sprite-no-icon16\"></span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"control-column fixed sortable-drag-handle\" *ngIf=\"isSortable\">\r\n                    <div class=\"flexrow vertical list-item-drag-handle\">\r\n                        <span class=\"icon icon-set-steps icon-size16 ic-draghandle\"\r\n                            [class.hover]=\"isDraggableOnHover\"\r\n                            (mouseenter)=\"isDraggableOnHover = true\"\r\n                            (mouseleave)=\"isDraggableOnHover = false\"\r\n                            style=\"cursor: all-scroll;\"></span>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <!-- #endregion List Item Content Template -->\r\n\r\n        </div>\r\n        <div class=\"control-column fixed selectable\" *ngIf=\"isSelectable\">\r\n            <div class=\"flexrow vertical\" [class.selected]=\"isSelected\"></div>\r\n        </div>\r\n        <ng-container *ngIf=\"shouldShowToggleTextbox\">\r\n            <div class=\"control-column fixed\">\r\n                <button class=\"k2-list-item-dynamic-button flexrow list-item-icons k2-picker-flex-flexChild k2-picker-flex-dynamic-btn\"\r\n                        (mouseenter)=\"buttonHover = true\"\r\n                        (mouseleave)=\"buttonHover = false\"\r\n                        (click)=\"toggleTextbox()\" \r\n                        [class.selected]=\"shouldAllowDrop\" \r\n                        k2-tab-index=\"0\">\r\n                    <span class=\"icon icon-set-buttons icon-size16 ic-dynamicedit\"\r\n                          [class.hover]=\"buttonHover\"\r\n                          [class.selected]=\"shouldAllowDrop && !buttonHover\"></span>\r\n                </button>\r\n            </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"shouldShowToggleEnabled\">\r\n            <div class=\"control-column fixed\"\r\n                (click)=\"toggleEnableState()\" style=\"height: 34px\">\r\n                <div class=\"flexrow list-item-icons vertical toggle-content\" tabindex=\"0\" k2-tab-index>\r\n                    <span class=\"icon icon-set-buttons icon-size16\"\r\n                        [class.ic-addreference]=\"isDisabled\"\r\n                        [class.ic-removereference]=\"!isDisabled\"></span>\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n    </div>\r\n\r\n    <div class=\"show-from flexrow\" *ngIf=\"shouldShowView\">\r\n        <label>{{getFromResx(\"Wizards\", \"wizard_wfi_create_smart_From\")|async}} <i class=\"icon icon-set-filetypes icon-size16 ic-view\"></i>{{viewName}}&nbsp;{{getFromResx(\"Wizards\", \"wizard_wfi_create_smart_View\")|async}}</label>\r\n    </div>\r\n    <k2-badges [class.badge-item]=\"isToggleEnabled\"\r\n               [k2Model]=\"listItemModel\"\r\n               [alwaysHideBadge]=\"shouldAlwaysHideBadge\"></k2-badges>\r\n</div>\r\n","import { Component, Inject, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { ISmartObjectMethodField } from '../../../../types/models/core/external-reference-definitions/smart-objects/i-smart-object-method-field';\r\nimport { ISelectedOrderByProperty } from '../../../../types/models/list-options/i-selected-order-by-property';\r\nimport { ISmartObjectListOptions } from '../../../../types/models/list-options/i-smartobject-list-options';\r\nimport { IUIValueCollection } from '../../../../types/models/ui-values/i-ui-values';\r\nimport { IValidationService } from '../../../../types/services/validation/ivalidation.service';\r\nimport { IValidatedComponent } from '../../../../types/validation/i-validated-component';\r\nimport { ProcessService } from '../../../services/process/process.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../services/validation/validation-service-factory';\r\nimport { ChooseControlTypes } from '../../../shared/enums/choose-control/choose-control-types';\r\nimport { DropDownMenuAlignment } from '../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropDownMenuTrianglePosition } from '../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { ExternalReferenceState } from '../../../shared/enums/external-references/external-references';\r\nimport { ListFilter } from '../../../shared/enums/list/filter';\r\nimport { ListOrder } from '../../../shared/enums/list/order';\r\nimport { ExternalReferenceUtilities } from '../../../shared/utils/external-references';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-list-options',\r\n    templateUrl: './list-options.component.html',\r\n    styleUrls: ['./list-options.component.less']\r\n})\r\nexport class ListOptionsComponent extends BaseResourceComponent implements OnInit, OnChanges {\r\n    @Input() properties: IDropDownMenuItem[];\r\n    @Input() configuredListOptions: ISmartObjectListOptions;\r\n    @Input() savedUIValues: sourceCode.k2Designer.objectModel.core.model.IModelDictionary<IUIValueCollection>;\r\n    @Input() externalDefinitionParent: ISmartObjectMethodField;\r\n\r\n    resources: { [key: string]: string } = {};\r\n    selectedFilterItem: IDropDownMenuItem;\r\n    isOpen: boolean;\r\n    filterItems: IDropDownMenuItem[];\r\n    selectedProperty: ISelectedOrderByProperty;\r\n    listOrder = ListOrder;\r\n\r\n    dropDownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n\r\n    private filterItemTitles: { [key: string]: string } = {\r\n        all: this.getString('list_option_all'),\r\n        first: this.getString('list_option_first'),\r\n        last: this.getString('list_option_last'),\r\n        index: this.getString('list_option_index')\r\n    };\r\n    private textTimeOut = null;\r\n    private textSetDelay = 200;\r\n\r\n    constructor(resourceService: ResourceService,\r\n        private processService: ProcessService,\r\n        @Inject(ValidationServiceToken) private validationService: IValidationService,\r\n        @Inject(UndoRedoServiceToken) private undoRedoService: IUndoRedoService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.resources = {\r\n            listOptionsHeader: this.getString('list_option_header'),\r\n            listOptionsSubheader: this.getString('list_option_subheader'),\r\n            listOptionsOrderedBy: this.getString('list_option_ordered_by'),\r\n            listOptionsAscending: this.getString('list_option_ascending'),\r\n            listOptionsDescending: this.getString('list_option_descending'),\r\n        };\r\n\r\n        if (!this.selectedFilterItem) {\r\n            const filterItemKey: string = this.configuredListOptions?.filterOption ? this.configuredListOptions.filterOption : 'all';\r\n\r\n            this.selectedFilterItem = {\r\n                key: filterItemKey,\r\n                title: this.filterItemTitles[filterItemKey],\r\n                isSelected: true\r\n            };\r\n        }\r\n\r\n        if (this.savedUIValues) {\r\n            if (this.savedUIValues.isOpen) {\r\n                this.isOpen = this.savedUIValues.isOpen.smartFields[0].text === 'true';\r\n            } else {\r\n                this.isOpen = false;\r\n                this.savedUIValues.add('isOpen', sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                    smartFields: [\r\n                        sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                            text: this.isOpen?.toString()\r\n                        })\r\n                    ]\r\n                }));\r\n            }\r\n        }\r\n\r\n        this.filterItems = [\r\n            {\r\n                key: ListFilter.All,\r\n                title: this.getString('list_option_all'),\r\n                isSelected: this.selectedFilterItem?.key === ListFilter.All\r\n            },\r\n            {\r\n                key: ListFilter.First,\r\n                title: this.getString('list_option_first'),\r\n                isSelected: this.selectedFilterItem?.key === ListFilter.First\r\n            },\r\n            {\r\n                key: ListFilter.Last,\r\n                title: this.getString('list_option_last'),\r\n                isSelected: this.selectedFilterItem?.key === ListFilter.Last\r\n            },\r\n            {\r\n                key: ListFilter.Index,\r\n                title: this.getString('list_option_index'),\r\n                isSelected: this.selectedFilterItem?.key === ListFilter.Index\r\n            }\r\n        ];\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.properties) {\r\n            this.onPropertiesChanged();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Event that fires when the accordian is clicked\r\n     */\r\n    onAccordionClicked(): void {\r\n        this.isOpen = !this.isOpen;\r\n        this.savedUIValues.isOpen.smartFields[0].text = this.isOpen.toString();\r\n    }\r\n\r\n    /**\r\n     * Event fired when a filter item is selected\r\n     */\r\n    onFilterItemSelected = (item: IDropDownMenuItem): void => {\r\n        this.undoRedoService.addCustomObjectUndoEvent(this, ['selectedFilterItem'], '-- onFilterItemSelected: reverting scope selected filter item');\r\n        this.undoRedoService.addCustomObjectUndoEvent(this.configuredListOptions,\r\n            ['filterOption', 'index'], '-- onFilterItemSelected: reverting scope configuredListOptions (filterOption and index)');\r\n\r\n        this.selectedFilterItem = item;\r\n        this.configuredListOptions.filterOption = item.key;\r\n\r\n        if (item.key === 'index') {\r\n            this.configuredListOptions.index = 1;\r\n        } else {\r\n            this.configuredListOptions.index = null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Ensures index is not empty if index is enabled (defaults to 1)\r\n     */\r\n    onIndexBlur(): void {\r\n        if (this.selectedFilterItem.key === 'index' &&\r\n            (!this.configuredListOptions.index ||\r\n                isNaN(parseInt(this.configuredListOptions.index.toString(), 10)))) {\r\n            this.configuredListOptions.index = 1;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Event fired when a property is selected\r\n     */\r\n    onPropertySelected = (item: IDropDownMenuItem): void => {\r\n        const wasInError: boolean = this.selectedProperty?.hasError;\r\n\r\n        this.selectedProperty = item as ISelectedOrderByProperty;\r\n        this.configuredListOptions.orderedByProperty = ExternalReferenceUtilities.getExternalDefinitionToken(this.externalDefinitionParent, item.key, true);\r\n\r\n        //Validation:\r\n        this.selectedProperty.hasError = false;\r\n        this.selectedProperty.errorMessage = '';\r\n\r\n        if (item.metaData &&\r\n            item.metaData.state === ExternalReferenceState.Missing &&\r\n            this.configuredListOptions.errorInformation?.length &&\r\n            this.configuredListOptions.errorInformation[0].errorMessage) {\r\n            //Get and set error information\r\n            this.selectedProperty.hasError = true;\r\n            this.selectedProperty.errorMessage = this.resourceService.resolveTokenResourceString(\r\n                this.configuredListOptions.errorInformation[0].errorMessage,\r\n                this.configuredListOptions.errorInformation[0].errorResourceTokens,\r\n                this.configuredListOptions\r\n            );\r\n            //Remove missing property from collection\r\n            for (let i: number = this.properties.length - 1; i >= 0; i--) {\r\n                if (this.properties[i].key === this.selectedProperty.key) {\r\n                    this.properties.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n        } else if (wasInError) {\r\n            //Current selected property is valid, but previous selected property was a missing value in error\r\n            const reEvalRef = this.configuredListOptions.getReference();\r\n            const objToReEval =\r\n                this.configuredListOptions.getRoot<sourceCode.k2Designer.objectModel.core.model.ModelObject>().findItem<IValidatedComponent>(reEvalRef);\r\n            this.validationService.reevaluateErrors(objToReEval.errorInformation, true);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Allows only number to be types in the textbox\r\n     *\r\n     * @param event\r\n     */\r\n    allowOnlyNumbers(event: KeyboardEvent): void {\r\n        // only numeric input accepted\r\n        if (event.keyCode < 48 || event.keyCode > 57) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        //add undo/redo functionality to input control on k2ListItem\r\n        if (!this.textTimeOut) {\r\n            //add marker for initial value of itemtext - used to bring undo stack back to default value\r\n            this.undoRedoService.addUndoMarker('-----change text value normal-----');\r\n        }\r\n        else {\r\n            //clear timeout if set is hit again this ensures only 1 timeout that will eventually occur to add undo marker\r\n            clearTimeout(this.textTimeOut);\r\n            this.textTimeOut = null;\r\n        }\r\n\r\n        //add a marker after a certain amount of time of no user interaction - default 200ms\r\n        this.textTimeOut = setTimeout(() => {\r\n            if (this.configuredListOptions.index !== (event.target as any).value) {\r\n                this.undoRedoService.addUndoMarker('-----change text value async-----');\r\n            }\r\n            else {\r\n                clearTimeout(this.textTimeOut);\r\n                this.textTimeOut = null;\r\n            }\r\n        }, this.textSetDelay);\r\n    }\r\n\r\n    /**\r\n     * Called when the orderber by checkbox is checked to update model value\r\n     *\r\n     * @param value\r\n     */\r\n    orderByChecked(value: boolean): void {\r\n        this.configuredListOptions.orderedBy = value;\r\n    }\r\n\r\n    /**\r\n     * Called when a radio button is clicked to set the sort direction\r\n     *\r\n     * @param direction\r\n     */\r\n    setDirection(direction: string): void {\r\n        this.configuredListOptions.direction = direction;\r\n    }\r\n\r\n    /**\r\n     * Called to update the properties collection when input is changed\r\n     */\r\n    private onPropertiesChanged() {\r\n        if (this.properties?.length && this.configuredListOptions) {\r\n            if (!this.configuredListOptions.orderedByProperty?.length) {\r\n                this.onPropertySelected(this.properties[0]);\r\n            } else {\r\n                const resolvedToken: string =\r\n                    ExternalReferenceUtilities.resolveExternalReferenceToken(this.configuredListOptions.orderedByProperty, this.processService);\r\n\r\n                for (const property of this.properties) {\r\n                    //Either it equals the resolve value or it equals the original reference value\r\n                    //The key can be a reference or a propertyName, need to account for both\r\n                    if (property.key === resolvedToken\r\n                        || property.key === this.configuredListOptions.orderedByProperty) {\r\n                        this.onPropertySelected(property);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","<div class=\"list-options\">\r\n    <div>\r\n        <a href=\"javascript:void(0)\" class=\"heading no-border hyperlink-control secondary\"\r\n           (click)=\"onAccordionClicked()\">\r\n            <span>{{resources.listOptionsHeader}}</span>\r\n            <i class=\"right-icon icon icon-set-panel icon-size16\"\r\n               [class.ic-arrowexpanded]=\"!isOpen\"\r\n               [class.ic-arrowcollapsed]=\"isOpen\">\r\n            </i>\r\n        </a>\r\n    </div>\r\n    <div [hidden]=\"isOpen\">\r\n        <div class=\"separator\"></div>\r\n        <div class=\"sub-heading\">\r\n            {{resources.listOptionsSubheader}}\r\n        </div>\r\n        <div class=\"separator\"></div>\r\n        <div class=\"content\" *ngIf=\"configuredListOptions\">\r\n            <div class=\"filter\">\r\n                <k2-drop-down class=\"filter-dropdown\"\r\n                              [menuAlignment]=\"dropDownMenuAlignment.centered\"\r\n                              [menuItems]=\"filterItems\"\r\n                              (onItemSelected)=\"onFilterItemSelected($event)\"\r\n                              [trianglePosition]=\"dropDownMenuTrianglePosition.right\">\r\n                    <div class=\"desc-content\">\r\n                        <div class=\"desc-content-text\">{{selectedFilterItem.title}}</div>\r\n                    </div>\r\n                    <div class=\"icon-content-dd\">\r\n                        <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                    </div>\r\n                </k2-drop-down>\r\n                <k2-input [maxLength]=\"9\"\r\n                          class=\"index\"\r\n                          [class.is-disabled]=\"selectedFilterItem.key !== 'index'\"\r\n                          [(value)]=\"configuredListOptions.index\"\r\n                          (keyPressed)=\"allowOnlyNumbers($event)\"\r\n                          (k2Blur)=\"onIndexBlur()\"></k2-input>\r\n            </div>\r\n            <div class=\"separator\"></div>\r\n            <div class=\"order\">\r\n                <div class=\"order-by\">\r\n                    <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                                          [displayText]=\"resources.listOptionsOrderedBy\"\r\n                                          (checkedChange)=\"orderByChecked($event)\"\r\n                                          [checked]=\"configuredListOptions.orderedBy\"\r\n                                          [id]=\"'orderedBy'\">\r\n                    </k2-choose-control-v2>\r\n                </div>\r\n                <div class=\"order-by-property\">\r\n                    <k2-drop-down class=\"property-dropdown\" [class.is-disabled]=\"!configuredListOptions.orderedBy\"\r\n                                  [menuAlignment]=\"dropDownMenuAlignment.centered\"\r\n                                  [menuItems]=\"properties\"\r\n                                  (onItemSelected)=\"onPropertySelected($event)\"\r\n                                  [trianglePosition]=\"dropDownMenuTrianglePosition.right\">\r\n                        <div class=\"icon-content\">\r\n                            <span class=\"icon icon-set-datatypes icon-size16 ic-{{selectedProperty?.icon}}\"></span>\r\n                        </div>\r\n                        <div class=\"desc-content\">\r\n                            <div class=\"desc-content-text\">{{selectedProperty?.title}}</div>\r\n                        </div>\r\n                        <div class=\"icon-content-dd\">\r\n                            <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                        </div>\r\n                        <k2-badges class=\"badge-item\"\r\n                                   [forceShow]=\"selectedProperty?.hasError\"\r\n                                   [toolTipText]=\"selectedProperty?.errorMessage\">\r\n                        </k2-badges>\r\n                    </k2-drop-down>\r\n                </div>\r\n            </div>\r\n            <div class=\"separator\"></div>\r\n            <div class=\"direction\" [class.is-disabled]=\"configuredListOptions.orderedBy !== true\">\r\n                <div class=\"direction-radio\">\r\n                    <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                          [displayText]=\"resources.listOptionsAscending\"\r\n                                          [checked]=\"configuredListOptions.direction === listOrder.Ascending\"\r\n                                          id=\"rdbAsc\"\r\n                                          name=\"grpDirection\"\r\n                                          (click)=\"setDirection(listOrder.Ascending)\">\r\n                    </k2-choose-control-v2>\r\n                </div>\r\n                <div class=\"direction-radio\">\r\n                    <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                          [displayText]=\"resources.listOptionsDescending\"\r\n                                          [checked]=\"configuredListOptions.direction === listOrder.Descending\"\r\n                                          id=\"rdbDesc\"\r\n                                          name=\"grpDirection\"\r\n                                          (click)=\"setDirection(listOrder.Descending)\">\r\n                    </k2-choose-control-v2>\r\n                </div>\r\n            </div>\r\n            <div class=\"separator\"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, Input, OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { IDataField } from '../../../../types/models/data-field/i-data-field';\r\nimport { IK2OutputMapper } from '../../../../types/models/output-mapper/i-output-mapper';\r\nimport { IK2OutputMapperRow } from '../../../../types/models/output-mapper/i-output-mapper-row';\r\nimport { IExpression } from '../../../../types/models/core/configured-smart-fields/i-expression';\r\nimport { IEnvironmentService } from '../../../../types/services/environment/i-environment-service';\r\nimport { IValidatedComponent } from '../../../../types/validation/i-validated-component';\r\nimport { EnvironmentServiceToken } from '../../../services/environment/environment-service-factory';\r\nimport { DataTypeResolverService } from '../../../services/plugins/data-type-resolver/data-type-resolver.service';\r\nimport { PopupService } from '../../../services/popup/popup.service';\r\nimport { ProcessService } from '../../../services/process/process.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../services/validation/validation-service-factory';\r\nimport { DropDownMenuAlignment } from '../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropDownMenuTrianglePosition } from '../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { DataFieldTypes } from '../../../shared/enums/model/workflow/process/data-field-types';\r\nimport { findUniqueName } from '../../../shared/utils/name-helper';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\nimport { DropDownComponent } from '../drop-down/drop-down.component';\r\nimport { IValidationService } from '../../../../types/services/validation/ivalidation.service';\r\nimport { EventTypes } from '../../../shared/enums/model/event-types';\r\nimport { dataTypes } from '../../../shared/constants/data-types';\r\nimport { ITextSmartField } from '../../../../types/models/core/configured-smart-fields/i-text-field';\r\n\r\n@Component({\r\n    selector: 'k2-output-mapper',\r\n    templateUrl: './output-mapper.component.html',\r\n    styleUrls: ['./output-mapper.component.less']\r\n})\r\nexport class OutputMapperComponent extends BaseResourceComponent implements OnInit, OnChanges, OnDestroy {\r\n    @Input() public headingData: IK2OutputMapper;\r\n    @Input() public savedProperties: sourceCode.k2Designer.objectModel.core.model.IModelDictionary<IExpression>;\r\n    //All available properties for output mapper\r\n    @Input() public availableProperties: IK2OutputMapperRow[];\r\n\r\n    public resources: { [key: string]: string } = {};\r\n    public workflowName: string;\r\n    //Output mappings from available properties that were selected\r\n    public selectedProperties: IK2OutputMapperRow[] = [];\r\n    public rowDropdownFocus: boolean;\r\n    public rowValueControlFocus: boolean;\r\n    public outputMapperSingleDropdownRowFields: IDropDownMenuItem[];\r\n    public selectedItemKey: string;\r\n    public outputMapperSingleDropdownFields: IDropDownMenuItem[];\r\n    public dataFieldItems: IDropDownMenuItem[];\r\n    public selectedRowIndex: number;\r\n    public rowSelected = false;\r\n    public dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    public dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    public hoverClass = '';\r\n    //Available output mappings per row, with key of selected row\r\n    //Each row has to exclude all selected properties, except its own selected property\r\n    public availableOutputMappingsForSelectedRow: { [key: string]: IDropDownMenuItem[] } = {};\r\n    public availableDataFieldsForSelectedRow: {\r\n        [key: string]: {\r\n            items: IDropDownMenuItem[];\r\n            footerItems: IDropDownMenuItem[];\r\n        };\r\n    } = {};\r\n    //A list of all available properties for addding or removal (selected or unselected)\r\n    public availableOutputMappings: IDropDownMenuItem[];\r\n\r\n    private selectedRowItem: IK2OutputMapperRow;\r\n    private eventRemover: sourceCode.k2Designer.objectModel.core.model.IEventRemover;\r\n\r\n    constructor(public resourceService: ResourceService,\r\n        @Inject(EnvironmentServiceToken) private envService: IEnvironmentService,\r\n        @Inject(ValidationServiceToken) private validationService: IValidationService,\r\n        private processService: ProcessService,\r\n        private popupService: PopupService,\r\n        @Inject(UndoRedoServiceToken) private undoRedoService: IUndoRedoService,\r\n        private dataTypeResolverService: DataTypeResolverService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.resources = {\r\n            generalSubWorkflow: this.resourceService.getString('general_subworkflow'),\r\n            generalThisWorkflow: this.resourceService.getString('general_this_workflow'),\r\n            controlPropertyMapperNoProperties: this.resourceService.getString('control_property_mapper_no_properties'),\r\n        };\r\n\r\n        this.workflowName = this.envService.activeStudioItem.title;\r\n\r\n        this.setupDataFieldDropdownItems();\r\n        this.setupAvailableOutputMappingsForRows();\r\n\r\n        //Update datafields collection when datafields are changed\r\n        this.eventRemover =\r\n            this.processService.root.configuration.dataFields.listen(EventTypes.anythingChanged, this.onDataFieldsChanged);\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        //Available and selected properties are set with ajax calls on parent,\r\n        //need to update the input mappings when these are changed externally\r\n        if (changes.availableProperties || changes.savedProperties) {\r\n            this.setupAvailableOutputMappingsForRows();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (typeof this.eventRemover === 'function') {\r\n            this.eventRemover();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Build up the dictionary of output key-value mappings that is loaded from saved values\r\n     * */\r\n    setupAvailableOutputMappingsForRows(): void {\r\n        this.availableOutputMappingsForSelectedRow = {};\r\n\r\n        this.selectedProperties = [];\r\n\r\n        this.availableProperties.forEach(availableProperty => {\r\n            const key = availableProperty.key;\r\n            const selectedProp = this.selectedProperties.find(s => s.key === key);\r\n            //This property was previously configured and saved, but not in selected properties\r\n            if (this.savedProperties && this.savedProperties[key] && !selectedProp) {\r\n                this.selectedProperties.push(availableProperty);\r\n            }\r\n\r\n            //Add all available properties for this selected property row:\r\n            this.availableProperties.forEach(prop => {\r\n                //exclude system field such as loop step index/result\r\n                //exclude other already selected properties (except current selected row)\r\n                const isThisAvailableProperty = availableProperty.key === prop.key;\r\n                const shouldAdd = !prop.systemField && !availableProperty.systemField &&\r\n                    (isThisAvailableProperty || !this.selectedProperties.find(s => s.key === prop.key));\r\n\r\n                if (shouldAdd) {\r\n                    this.availableOutputMappingsForSelectedRow[key] = this.availableOutputMappingsForSelectedRow[key] || [];\r\n                    this.availableOutputMappingsForSelectedRow[key].push(\r\n                        {\r\n                            key: prop.key,\r\n                            icon: 'icon icon-set-datatypes icon-size16 ic-' + prop.typeIcon.toLowerCase(),\r\n                            isSeparator: false,\r\n                            isDisabled: false,\r\n                            title: prop.rowTitle,\r\n                            isSelected: isThisAvailableProperty\r\n                        } as IDropDownMenuItem\r\n                    );\r\n                }\r\n            });\r\n        });\r\n\r\n        //New row should contain all available output mappings that can be either added / removed:\r\n        this.availableOutputMappings = [];\r\n        this.availableProperties.forEach(availableProperty => {\r\n            //Only list available properties that are not in selected properties and not system field\r\n            if (!availableProperty.systemField) {\r\n                const isSelected = !!this.selectedProperties.find(s => s.key === availableProperty.key);\r\n                this.availableOutputMappings.push(\r\n                    {\r\n                        key: availableProperty.key,\r\n                        icon: 'icon icon-set-datatypes icon-size16 ic-' + availableProperty.typeIcon.toLowerCase(),\r\n                        title: availableProperty.rowTitle,\r\n                        isSelected\r\n                    } as IDropDownMenuItem\r\n                );\r\n            }\r\n        });\r\n\r\n        this.setupAvailableDataFieldsForSelectedRows();\r\n    }\r\n\r\n    private setupAvailableDataFieldsForSelectedRows(): void {\r\n        this.availableDataFieldsForSelectedRow = {};\r\n\r\n        if (!this.dataFieldItems) {\r\n            this.setupDataFieldDropdownItems();\r\n        }\r\n\r\n        this.selectedProperties?.forEach(selectedProperty => {\r\n            const key = selectedProperty.key;\r\n            this.availableDataFieldsForSelectedRow[key] = { items: [], footerItems: [] };\r\n            this.availableDataFieldsForSelectedRow[key].items = $.extend(true, [], this.dataFieldItems?.slice()); //deep clone array\r\n            //If a datafield has been selected and saved, set item selected\r\n            const savedExpression = this.savedProperties[key];\r\n            if (savedExpression?.smartFields?.length > 0) {\r\n                let dataFieldPath = savedExpression.smartFields[0].designTimeValue;\r\n                //Get datafield from dataFieldItems by quickpath (to ensure title, type etc is latest)\r\n                let dataField: IDropDownMenuItem = null;\r\n                let itemToSelect: IDropDownMenuItem = null;\r\n                if (dataFieldPath) {\r\n                    itemToSelect = this.availableDataFieldsForSelectedRow[key].items.find(d => d.key === dataFieldPath);\r\n                } else {\r\n                    //Smartfield designTimeValue is not saved when KPRX loaded, need to find datafield by title\r\n                    itemToSelect = this.availableDataFieldsForSelectedRow[key].items.find(d => d.title === savedExpression.smartFields[0].text);\r\n                    dataFieldPath = itemToSelect? itemToSelect.key : '';\r\n                }\r\n                dataField = dataFieldPath ? this.dataFieldItems?.find(d => d.key === dataFieldPath) : null;\r\n                selectedProperty.value = savedExpression;\r\n\r\n                if (itemToSelect) {\r\n                    itemToSelect.isSelected = true;\r\n                    //update selected item:\r\n                    selectedProperty.valueTitle = dataField?.title || itemToSelect.title;\r\n                    selectedProperty.valueTypeIcon = dataField?.icon || itemToSelect.icon;\r\n                }\r\n                if (!dataField) {\r\n                    //Datafield has been deleted, do validation\r\n                    this.processService.raiseReferenceError(savedExpression.smartFields[0], savedExpression.smartFields[0].text, dataFieldPath);\r\n                    //Use old saved title to display in dropdown\r\n                    selectedProperty.valueTitle = savedExpression.smartFields[0].text;\r\n                    selectedProperty.valueTypeIcon = dataTypes.icons.default; //we do not know the type, default to text\r\n                }\r\n            }\r\n            this.availableDataFieldsForSelectedRow[key].footerItems = this.getDataFieldsDdFooterItems(key);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Adds or removes a row from selected output mappings\r\n     *\r\n     * @param item\r\n     */\r\n    addOrRemoveSelectedOutputMapping(item: IDropDownMenuItem) {\r\n        let keyToRemove = '';\r\n        if (!item.isSelected && this.availableOutputMappingsForSelectedRow[item.key]) {\r\n            //Remove\r\n            const removeIndex = this.selectedProperties?.indexOf(this.selectedProperties?.find(s => s.key === item.key));\r\n            if (removeIndex >= 0) {\r\n                this.selectedProperties.splice(removeIndex, 1);\r\n                keyToRemove = item.key;\r\n            }\r\n        } else {\r\n            //Add\r\n            const property = this.availableProperties.find(a => a.key === item.key);\r\n\r\n            //Ensure correct icon\r\n            property.typeIcon = property.typeIcon?.toLocaleLowerCase() || dataTypes.icons.default;\r\n\r\n            //Required properties should be added to the top of the list\r\n            //TODO: Verify if this really matters (cannot find how properties/datafields could be required)\r\n            if (property.required) {\r\n                //get index of last required property\r\n                const requiredProps = this.selectedProperties.filter(p => p.required);\r\n                let lastRequiredPropIndex = 0;\r\n                if (requiredProps?.length > 0) {\r\n                    lastRequiredPropIndex = this.selectedProperties.indexOf(requiredProps[requiredProps.length - 1]);\r\n                }\r\n                //insert selected required property at top of list, but underneath other required properties\r\n                this.selectedProperties.splice(lastRequiredPropIndex, 0, property);\r\n            } else {\r\n                this.selectedProperties.push(property);\r\n            }\r\n        }\r\n\r\n        //Refresh saved properties\r\n        this.updateSavedProperties(keyToRemove);\r\n\r\n        //Refresh list of available and selected output mappings for rows:\r\n        this.setupAvailableOutputMappingsForRows();\r\n    }\r\n\r\n    /**\r\n     * Selected output mapping key has changed\r\n     * Update all other dropdowns with available properties\r\n     *\r\n     * @param item\r\n     */\r\n    updateSelectedOutputMapping(item: IDropDownMenuItem, previousKey: string) {\r\n        //Clear errors on the datafield smartfield\r\n        if (this.savedProperties[previousKey]?.smartFields?.length > 0 &&\r\n            this.savedProperties[previousKey].smartFields[0].errorInformation?.length > 0) {\r\n            this.validationService.forceAllPassValidation(this.savedProperties[previousKey].smartFields[0]);\r\n        }\r\n\r\n        //Remove previously selected item from selected items collection\r\n        const removeIndex = this.selectedProperties?.indexOf(this.selectedProperties?.find(s => s.key === previousKey));\r\n        if (removeIndex >= 0) {\r\n            this.selectedProperties.splice(removeIndex, 1);\r\n        }\r\n\r\n        //Add newly selected item to  selected items collection\r\n        const property = this.availableProperties.find(a => a.key === item.key);\r\n        this.selectedProperties.splice(removeIndex, 0, property);\r\n        //Reset the value for that available property to not set\r\n        property.value = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n            smartFields: []\r\n        });\r\n\r\n        //Refresh saved properties\r\n        this.updateSavedProperties(previousKey);\r\n\r\n        //Refresh list of available and selected output mappings for rows:\r\n        this.setupAvailableOutputMappingsForRows();\r\n    }\r\n\r\n\r\n    /**\r\n     * Method is called when a row is clicked\r\n     */\r\n    mapperRowSelected(index: number): void {\r\n        this.selectedRowItem = this.selectedProperties[index];\r\n        this.rowSelected = !this.selectedRowItem.locked;\r\n        this.rowDropdownFocus = false;\r\n        this.rowValueControlFocus = false;\r\n        this.selectedRowIndex = index;\r\n    }\r\n\r\n    /**\r\n     * Method is used to delete a mapper row\r\n     */\r\n    deleteMapperRow(): void {\r\n        this.selectedProperties[this.selectedRowIndex].altered = false;\r\n        const selectedKey = this.selectedRowItem.key;\r\n\r\n        //Clear errors on the datafield smartfield\r\n        if (this.savedProperties[selectedKey]?.smartFields?.length > 0 &&\r\n            this.savedProperties[selectedKey].smartFields[0].errorInformation.length > 0) {\r\n            this.validationService.forceAllPassValidation(this.savedProperties[selectedKey].smartFields[0]);\r\n        }\r\n        this.savedProperties.remove(selectedKey);\r\n\r\n        this.selectedProperties.splice(this.selectedRowIndex, 1);\r\n\r\n        if (this.selectedRowItem.value.errorInformation.length > 0) {\r\n            const idx: number = this.availableProperties.indexOf(this.selectedRowItem);\r\n            if (idx > -1) {\r\n                this.availableProperties.splice(idx, 1);\r\n\r\n                this.validationService.reevaluateErrors\r\n                (this.savedProperties.getLogicalParentModel<IValidatedComponent>().childErrorInformation,\r\n                    true);\r\n            }\r\n        }\r\n\r\n        this.rowSelected = false;\r\n        this.selectedRowIndex = -1;\r\n        this.selectedItemKey = '';\r\n\r\n        //Refresh saved properties\r\n        this.updateSavedProperties(this.selectedRowItem.key);\r\n\r\n        //Refresh list of available and selected output mappings for rows:\r\n        this.setupAvailableOutputMappingsForRows();\r\n    }\r\n\r\n    /**\r\n     * Populates the value dropdown items (<right> value of the <left> output mapping)\r\n     * with all available datafields\r\n     * */\r\n    setupDataFieldDropdownItems(): IDropDownMenuItem[] {\r\n        this.dataFieldItems = [];\r\n        const dataFields = this.processService.root?.configuration?.dataFields || [];\r\n\r\n        for (let d = 0; d < dataFields.length; d++) {\r\n            if (!dataFields[d].systemField) {\r\n                this.dataFieldItems.push({\r\n                    icon: this.getIconFromType(dataFields[d].type.toString()),\r\n                    key: dataFields[d].getReference(),\r\n                    title: dataFields[d].title,\r\n                    metaData: {\r\n                        valueItemIcon: '',\r\n                        valueItemTitle: ''\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        return this.dataFieldItems;\r\n    }\r\n\r\n    /**\r\n     * Aligns saved output mappings and their values with the selection changes\r\n     *\r\n     * @param keyToRemove - optional, key to remove if saved property was updated to use another key\r\n     */\r\n    private updateSavedProperties(keyToRemove: string = ''): void {\r\n        this.selectedProperties.forEach(selectedProperty => {\r\n            if (this.savedProperties[selectedProperty.key]) {\r\n                this.savedProperties[selectedProperty.key] = selectedProperty.value;\r\n            } else {\r\n                this.savedProperties.add(selectedProperty.key, selectedProperty.value);\r\n            }\r\n        });\r\n\r\n        if (keyToRemove.length > 0 && this.savedProperties[keyToRemove]) {\r\n            this.savedProperties.remove(keyToRemove);\r\n        }\r\n    }\r\n\r\n    private setIconFromRowValue(selectedProperty: IK2OutputMapperRow): void {\r\n        selectedProperty.valueTypeIcon = '';\r\n\r\n        if (selectedProperty.value?.smartFields?.length) {\r\n            this.setupDataFieldDropdownItems();\r\n            for (let i = 0; i < this.dataFieldItems.length; i++) {\r\n                if (this.dataFieldItems[i].key === selectedProperty.value.smartFields[0].designTimeValue\r\n                    || this.dataFieldItems[i].title === (selectedProperty.value.smartFields[0] as ITextSmartField).text) {\r\n\r\n                    selectedProperty.valueTypeIcon = this.dataFieldItems[i].icon;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private setSelectedItemTitleDropdown(item: IK2OutputMapperRow): void {\r\n        if (this.selectedRowItem?.value?.smartFields?.length) {\r\n            this.setupDataFieldDropdownItems();\r\n            for (let i = 0; i < this.dataFieldItems.length; i++) {\r\n                if (this.dataFieldItems[i].key === this.selectedRowItem.value.smartFields[0].designTimeValue) {\r\n                    if (this.dataFieldItems[i].title !== (this.selectedRowItem.value.smartFields[0] as ITextSmartField).text) {\r\n                        (this.selectedRowItem.value.smartFields[0] as ITextSmartField).text = this.dataFieldItems[i].title;\r\n                    }\r\n\r\n                    item.valueTitle = this.dataFieldItems[i].title;\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (this.selectedRowItem.value.smartFields.length === 1) {\r\n                item.valueTitle = (this.selectedRowItem.value.smartFields[0] as ITextSmartField).text;\r\n                return;\r\n            }\r\n        }\r\n\r\n        item.valueTitle = '';\r\n    }\r\n\r\n    /**\r\n     * When datafield is selected, update saved row\r\n     *\r\n     * @param item\r\n     * @param selectedKey\r\n     */\r\n    onDataFieldSelected(item: IDropDownMenuItem, selectedKey: string) {\r\n        if (item.ignoreUpdateSelection) return; //footer item (create new)\r\n\r\n        //Clear errors on the datafield smartfield\r\n        if (this.savedProperties[selectedKey]?.smartFields?.length > 0 &&\r\n            this.savedProperties[selectedKey].smartFields[0].errorInformation.length > 0) {\r\n            this.validationService.forceAllPassValidation(this.savedProperties[selectedKey].smartFields[0]);\r\n        }\r\n\r\n        const savedValue = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n            smartFields:\r\n                [\r\n                    sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                        text: item.title,\r\n                        designTimeValue: item.key\r\n                    })\r\n                ]\r\n        });\r\n\r\n        //Only need to update the one changed saved property's value\r\n        this.updateSavedRowWithDatafieldTitle(savedValue, selectedKey);\r\n        this.setDataFieldIconAndTitle(selectedKey);\r\n\r\n    }\r\n\r\n    private setDataFieldIconAndTitle(selectedKey: string): void {\r\n        const selectedProperty = this.selectedProperties.find(p => p.key === selectedKey);\r\n        if (selectedProperty) {\r\n            this.setIconFromRowValue(selectedProperty);\r\n            this.setSelectedItemTitleDropdown(selectedProperty);\r\n        }\r\n    }\r\n\r\n    private updateSavedRowWithDatafieldTitle(savedValue: IExpression, selectedKey: string) {\r\n        if (this.savedProperties[selectedKey]) {\r\n            this.savedProperties[selectedKey] = savedValue;\r\n        } else {\r\n            this.savedProperties.add(selectedKey, savedValue);\r\n        }\r\n\r\n        this.selectedRowItem.value = savedValue;\r\n    }\r\n\r\n    private getIconFromType(typeOfIcon: string): string {\r\n        const iconType: string = this.dataTypeResolverService.getSpriteClassFromDataType(typeOfIcon);\r\n        return `icon-set-datatypes ic-${iconType}`;\r\n    }\r\n\r\n    private getDataFieldsDdFooterItems(rowKey: string): IDropDownMenuItem[] {\r\n        const dataFieldsFooterItems: IDropDownMenuItem[] = [];\r\n        // add separator and 'create new' item\r\n        dataFieldsFooterItems.push(DropDownComponent.separator);\r\n\r\n        dataFieldsFooterItems.push({\r\n            key: rowKey,\r\n            icon: 'icon-set-steps ic-dataevent',\r\n            title: this.resourceService.getString('workflow_dataFields_createNew'),\r\n            ignoreUpdateSelection: true,\r\n            onSelected: this.showNewDataFieldRowPopup.bind(this)\r\n        });\r\n\r\n        return dataFieldsFooterItems;\r\n    }\r\n\r\n    private showNewDataFieldRowPopup(item: IDropDownMenuItem): void {\r\n\r\n        const rootConfig = this.processService.root.configuration;\r\n\r\n        rootConfig.dataFields.push\r\n        (sourceCode.k2Designer.objectModel.workflow.process.k2Process.DataField.createInstance({\r\n            title: this.getNewDataFieldTitle(),\r\n            type: DataFieldTypes.string,\r\n            isEmptyValue: true\r\n        }));\r\n\r\n        item.isSelected = false;\r\n\r\n        this.popupService.showDataFieldPopup(\r\n            rootConfig,\r\n            rootConfig.dataFields[rootConfig.dataFields.length - 1],\r\n            this.onNewDataFieldCreated.bind(this, item.key),\r\n            this.onCancelNewDataField.bind(this, rootConfig.dataFields[rootConfig.dataFields.length - 1], item.key),\r\n            this);\r\n    }\r\n\r\n    private getNewDataFieldTitle(): string {\r\n        const defaultName: string = this.resourceService.getString('workflow_dataFields_defaultFieldName');\r\n\r\n        return findUniqueName(this.processService.root.configuration.dataFields, 'title', defaultName);\r\n    }\r\n\r\n    private onCancelNewDataField(dataField: IDataField, rowKey: string) {\r\n        dataField.removeFromModelArray();\r\n        //Set selected value back\r\n        const oldDataFieldKey = this.savedProperties[rowKey]?.smartFields[0]?.designTimeValue;\r\n        if (oldDataFieldKey) {\r\n            const itemToSelect = this.dataFieldItems.find(d => d.key === oldDataFieldKey);\r\n            if (itemToSelect) {\r\n                this.onDataFieldSelected(itemToSelect, rowKey);\r\n            }\r\n        }\r\n    }\r\n\r\n    private onNewDataFieldCreated(rowKey: string): void {\r\n        const rootConfig = this.processService.root.configuration;\r\n        const item = rootConfig.dataFields[rootConfig.dataFields.length - 1];\r\n\r\n        this.undoRedoService.addUndoMarker('--k2OutputMapper: on new datafield created--');\r\n\r\n        const savedValue = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n            smartFields:\r\n                [\r\n                    sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                        text: item.title,\r\n                        designTimeValue: item.getReference()\r\n                    })\r\n                ]\r\n        });\r\n\r\n        //Refresh datafield items collection:\r\n        this.setupDataFieldDropdownItems();\r\n        this.updateSavedRowWithDatafieldTitle(savedValue, rowKey);\r\n        //Add new created datafield to all datafield dropdowns\r\n        this.setupAvailableDataFieldsForSelectedRows();\r\n    }\r\n\r\n    private onDataFieldsChanged = (): boolean =>  {\r\n        this.setupDataFieldDropdownItems();\r\n        this.setupAvailableDataFieldsForSelectedRows();\r\n        return true;\r\n    };\r\n}\r\n","<div class=\"k2-outcome-mapper\">\r\n    <div class=\"heading\">\r\n        <div class=\"outcome-mapper-column left\">\r\n            <div class=\"icon-heading\"><span class=\"icon icon-size24 icon-set-steps ic-callsubworkflow selected\"></span></div>\r\n            <div class=\"outcome-mapper-heading\">\r\n                <div class=\"text-heading\">\r\n                    {{headingData.assetTitleLabel}}\r\n                </div>\r\n                <div class=\"sub-text-heading\">\r\n                    {{resources.generalSubWorkflow}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"spacer\">\r\n        </div>\r\n        <div class=\"outcome-mapper-column right\">\r\n            <div class=\"icon-heading\"><span class=\"icon icon-size24 icon-set-steps ic-callsubworkflow\"></span></div>\r\n            <div class=\"outcome-mapper-heading\">\r\n                <div class=\"text-heading\">\r\n                    {{workflowName}}\r\n                </div>\r\n                <div class=\"sub-text-heading\">\r\n                    {{resources.generalThisWorkflow}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"nothing-selected italic\" *ngIf=\"!selectedProperties || selectedProperties.length === 0\">\r\n        <div class=\"outcome-mapper-column left-content\">\r\n            {{resources.controlPropertyMapperNoProperties}}\r\n        </div>\r\n        <div class=\"spacer aarow is-disabled\" (click)=\"rowDropdownFocus = false; rowValueControlFocus = false\"></div>\r\n        <div class=\"outcome-mapper-column right-content\">\r\n            {{resources.controlPropertyMapperNoProperties}}\r\n        </div>\r\n    </div>\r\n    <div class=\"outcome-mapper-content\" *ngIf=\"selectedProperties?.length > 0\">\r\n        <div class=\"outcome-mapper-content-row\" *ngFor=\"let mapRow of selectedProperties;let $index=index\" (click)=\"mapperRowSelected($index)\"\r\n             [ngClass]=\" { 'selected': $index === selectedRowIndex, 'row-focus': !rowDropdownFocus && !rowValueControlFocus} \">\r\n            <div class=\"outcome-mapper-column left-content\"\r\n                    [ngClass]=\" { 'selected': $index === selectedRowIndex && !rowDropdownFocus, 'focus' : $index === selectedRowIndex && rowDropdownFocus } \"\r\n                    (click)=\"rowDropdownFocus = true; rowValueControlFocus = false\">\r\n                <k2-drop-down class=\"output-mapper-dropdown-parent\"\r\n                                [menuItems]=\"availableOutputMappingsForSelectedRow[mapRow.key]\"\r\n                                [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                                [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                                (onItemSelected)=\"updateSelectedOutputMapping($event, mapRow.key)\">\r\n                    <div class=\"outcome-mapper-item-container\">\r\n                        <div class=\"icon-content\"><span class=\"icon icon-set-datatypes icon-size16 ic-{{mapRow.typeIcon}}\"></span></div>\r\n                        <div class=\"desc-content\" k2-tooltip-basic>\r\n                            <span>{{mapRow.rowTitle}}</span>\r\n                        </div>\r\n                        <div class=\"icon-content-dd\">\r\n                            <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"\r\n                                    [ngClass]=\" { 'selected': $index === selectedRowIndex } \"></span>\r\n                            <k2-badges [k2Model]=\"mapRow.value\" class=\"badge-item\"></k2-badges>\r\n                        </div>\r\n                    </div>\r\n                </k2-drop-down>\r\n            </div>\r\n            <div class=\"spacer aarow\" (click)=\"rowDropdownFocus = false; rowValueControlFocus = false\"></div>\r\n            <div class=\"outcome-mapper-column right-content\"\r\n                    [ngClass]=\" { 'selected': $index === selectedRowIndex && !rowValueControlFocus, 'focus' : $index === selectedRowIndex && rowValueControlFocus } \"\r\n                    (click)=\"rowDropdownFocus = false; rowValueControlFocus = true\">\r\n                <k2-drop-down class=\"output-mapper-dropdown-parent\"\r\n                                [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                                [menuItems]=\"availableDataFieldsForSelectedRow[mapRow.key].items\"\r\n                                [footerItems]=\"availableDataFieldsForSelectedRow[mapRow.key].footerItems\"\r\n                                (onItemSelected)=\"onDataFieldSelected($event, mapRow.key)\">\r\n                    <div class=\"outcome-mapper-item-container\">\r\n                        <div class=\"icon-content field\" *ngIf=\"mapRow.valueTypeIcon\">\r\n                            <span class=\"icon icon-set-datatypes icon-size16 ic-{{mapRow.valueTypeIcon}} selected\"></span>\r\n                        </div>\r\n                        <div class=\"desc-content\" k2-tooltip-basic>\r\n                            <span>{{mapRow.valueTitle}}</span>\r\n                        </div>\r\n                        <div class=\"icon-content-dd\">\r\n                            <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"\r\n                                    [class.selected]=\"$index === selectedRowIndex\"></span>\r\n                            <k2-badges [k2Model]=\"mapRow?.value?.smartFields[0]\" class=\"badge-item\" alwaysHideBadge=\"true\"></k2-badges>\r\n                        </div>\r\n                    </div>\r\n                </k2-drop-down>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"outcome-mapper-footer\">\r\n        <div class=\"add-delete-row\">\r\n            <div class=\"btn k2-btn k2-btn-add outcome-mapper-footer-padding\" [class.disabled]=\"availableProperties?.length === 0\">\r\n                <k2-drop-down class=\"icon icon-set-buttons icon-size24 ic-add_button\"\r\n                              [menuItems]=\"availableOutputMappings\"\r\n                              [selectedItemKey]=\"selectedItemKey\"\r\n                              [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                              [trianglePosition]=\"dropDownMenuTrianglePosition.center\"\r\n                              [isMultiSelect]=\"true\"\r\n                              (onItemSelected)=\"addOrRemoveSelectedOutputMapping($event)\">\r\n                </k2-drop-down>\r\n            </div>\r\n            <div class=\"trash bin outcome-mapper-footer-padding\" *ngIf=\"rowSelected\" (click)=\"deleteMapperRow()\">\r\n                <span class=\"icon icon-set-buttons icon-size24 ic-bin_button {{hoverClass}}\" (mouseenter)=\"hoverClass = 'disabled'\" (mouseleave)=\"hoverClass = ''\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, EventEmitter, HostListener, Inject, Input, OnChanges, OnDestroy, OnInit, Output } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { IPropertyMapperDataFieldChangedEvent } from '../../../../types/events/property-mapper/i-data-field-changed-event';\r\nimport { IModelDictionary } from '../../../../types/models/base/i-model-dictionary';\r\nimport { IExpression } from '../../../../types/models/core/configured-smart-fields/i-expression';\r\nimport { ISmartObjectMethodField } from '../../../../types/models/core/external-reference-definitions/smart-objects/i-smart-object-method-field';\r\nimport { ISmartObjectPropertyField } from '../../../../types/models/core/external-reference-definitions/smart-objects/i-smart-object-property-field';\r\nimport { IProcess } from '../../../../types/models/process/i-process';\r\nimport { IValidationService } from '../../../../types/services/validation/ivalidation.service';\r\nimport { IPropertyMapperHeading } from '../../../../types/uiComponents/property-mapper/i-property-mapper-heading';\r\nimport { IPropertyMapperRow } from '../../../../types/uiComponents/property-mapper/i-property-mapper-row';\r\nimport { IPropertyMapperRowValueCollection } from '../../../../types/uiComponents/property-mapper/i-property-mapper-row-value-collection';\r\nimport { IValidatedComponent } from '../../../../types/validation/i-validated-component';\r\nimport { IValidationTypeItem } from '../../../../types/validation/i-validation-type-item';\r\nimport { IValidatorItem } from '../../../../types/validation/i-validator-item';\r\nimport { EventNotifierService } from '../../../services/event-notifier/event-notifier.service';\r\nimport { ExternalReferenceService } from '../../../services/external-reference/external-reference.service';\r\nimport { ProcessService } from '../../../services/process/process.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../services/validation/validation-service-factory';\r\nimport { ComponentIdMapping } from '../../../shared/constants/components';\r\nimport { dataTypes } from '../../../shared/constants/data-types';\r\nimport { PropertyMapperDataFieldChangedEvent } from '../../../shared/constants/events';\r\nimport { globalVariableNames } from '../../../shared/constants/general';\r\nimport { DropDownMenuAlignment } from '../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropDownMenuTrianglePosition } from '../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { ExternalReferenceState } from '../../../shared/enums/external-references/external-references';\r\nimport { ErrorSeverity } from '../../../shared/enums/model/error-severity';\r\nimport { EventTypes } from '../../../shared/enums/model/event-types';\r\nimport { ValidationTypes } from '../../../shared/enums/model/validation-types';\r\nimport { DisplayModes } from '../../../shared/enums/property-mapper/display-modes';\r\nimport { ReferenceTypes } from '../../../shared/enums/references/reference-types';\r\nimport { ExternalReferenceUtilities } from '../../../shared/utils/external-references';\r\nimport { isUndefinedOrNull } from '../../../shared/utils/general';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\n\r\ntype ITextField = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField;\r\n\r\n@Component({\r\n    //TODO: Groupings not yet implemented(SharePoint list item content-types) (Feature 936055: [Angular Migration] - SmartWizards)\r\n    //Tag will remain k2-property-mapper-v2 until old propertymapper completely deprecated.\r\n    selector: 'k2-property-mapper-v2',\r\n    templateUrl: './property-mapper.component.html',\r\n    styleUrls: ['./property-mapper.component.less']\r\n})\r\nexport class PropertyMapperComponent extends BaseResourceComponent implements OnInit, OnChanges, OnDestroy {\r\n\r\n    /**\r\n     * Property that can be set on the property mapper to show that there is multiple mappings (used in call subw workflow - multiple)\r\n     */\r\n    @Input() shouldShowRepeatingHeader = false;\r\n\r\n    /*\r\n     *  The property mapper is being hosted inside a popup. When set to true, necessary css styles will be applied\r\n     */\r\n    @Input() isInsidePopup = false;\r\n\r\n    /**\r\n     * Used to describe the icon and heading that will display on the property mapper\r\n     */\r\n    @Input() headingData: IPropertyMapperHeading;\r\n\r\n    /*\r\n    * Property that indicate what type of data is used in property mapper (ex workflow, smo)\r\n    */\r\n    @Input() displayMode: DisplayModes;\r\n\r\n    //TODO: Groupings not yet implemented(SharePoint list item content-types) (Feature 936055: [Angular Migration] - SmartWizards)\r\n    /**\r\n     * This is a list of the PropertyMapper Rows that represent the groupings that will display in the Property Mapper Component\r\n     */\r\n    @Input() groupings: IPropertyMapperRow[];\r\n\r\n    /*\r\n    *   Flag to indicate when the data obtained from ajax call is applied to the property mapper\r\n    */\r\n    @Input() isDataLoaded = true;\r\n\r\n    /**\r\n     * Collection of rows that will be saved and persisted\r\n     */\r\n    @Input() savedProperties: IModelDictionary<IPropertyMapperRowValueCollection>;\r\n\r\n    /**\r\n     * This is a list of the PropertyMapperRows that represents the rows that can be displayed in the Property Mapper Control. This is the base of the\r\n     * dropdowns and the altered properties are pushed into the selected properties array and saved properties collection\r\n     */\r\n    @Input() availableProperties: IPropertyMapperRow[];\r\n\r\n    /**\r\n     * Method that will return the items for the right-hand mapping dropdown in the property mapper row\r\n     */\r\n    @Input() getValueItems: (isDataFieldRow?: boolean) => IDropDownMenuItem[];\r\n\r\n    /**\r\n     * The footer items for the right-hand mapping dropdown in the property mapper row (datafields)\r\n     */\r\n    @Input() valueFooterItems: IDropDownMenuItem[];\r\n\r\n    //TODO: This input is only set by SmartWizards property mapper (Feature 936055: [Angular Migration] - SmartWizards)\r\n    /**\r\n     * External definition parent that will save all the properties provided\r\n     */\r\n    @Input() externalDefinitionParent: ISmartObjectMethodField;\r\n\r\n    /**\r\n     * Bind to list item control clicked event (selectListItem)\r\n     */\r\n    @Output() mapperRowSelected: EventEmitter<IPropertyMapperRow> = new EventEmitter<IPropertyMapperRow>();\r\n\r\n    /**\r\n     * Variables to expose enums\r\n     */\r\n    displayModes: typeof DisplayModes = DisplayModes;\r\n    dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n\r\n    /**\r\n     * Key of the selected row\r\n     */\r\n    selectedRowKey: string;\r\n\r\n    /**\r\n     * Boolean value that evaluates if the row Dropdown has focus\r\n     */\r\n    isRowDropdownFocused: boolean;\r\n\r\n    /**\r\n     * Boolean value that evaluates if the row Dropdown has focus\r\n     */\r\n    isRowValueControlFocused: boolean;\r\n\r\n    /**\r\n     * This is a list of the PropertyMapperRows that represent the rows that is in an altered state and displays in the property mapper\r\n     */\r\n    selectedProperties: IPropertyMapperRow[];\r\n\r\n    /**\r\n     * To determine class on hover\r\n     */\r\n    isTrashCanHovered: boolean;\r\n\r\n    /**\r\n     * This is the collection of items used in the left dropdown of the property mapper row\r\n     */\r\n    propertyMapperLeftItems: {\r\n        [key: string]: {\r\n            items: IDropDownMenuItem[];\r\n        };\r\n    } = {};\r\n\r\n    /**\r\n     * This is the collection of items used in the right dropdown of the property mapper row,\r\n     * populated by the getValueItems input function\r\n     * Items and footer items are generated depending if this dropdown displays datafields or not\r\n     * and depending on the row key, for performance purposes, a dictionary instead of a function is used for items\r\n     */\r\n    propertyMapperRightItems: {\r\n        [key: string]: {\r\n            items: IDropDownMenuItem[];\r\n            footerItems: IDropDownMenuItem[];\r\n            selectedItemTitle: string;\r\n            selectedIcon: string;\r\n        };\r\n    } = {};\r\n\r\n    /**\r\n     * The available items to add/remove from the property mapper rows (used in multiselect at the footer of the property mapper)\r\n     */\r\n    addRemoveRowItems: IDropDownMenuItem[] = [];\r\n\r\n    //TODO: Groupings not yet implemented(SharePoint list item content-types) (Feature 936055: [Angular Migration] - SmartWizards)\r\n    /**\r\n     * This is the array that the grouping / content-type dropdown in property mapper heading uses\r\n     */\r\n    groupingItems: IDropDownMenuItem[] = [];\r\n\r\n    /**\r\n     * Indicates if the datafield dropdown must show\r\n     */\r\n    shouldMapToDataFields = false;\r\n\r\n    /**\r\n     * Currently selected row\r\n     */\r\n    selectedRow: IPropertyMapperRow;\r\n\r\n    /*\r\n    *  Collection of property keys and validator items\r\n    */\r\n    private validatorItems: { [key: string]: IValidatorItem } = {};\r\n\r\n    /**\r\n     * To remove listener that listens for datafields updated\r\n     */\r\n    private dataFieldEventRemover: sourceCode.k2Designer.objectModel.core.model.IEventRemover = null;\r\n\r\n    /**\r\n     * To listen for datafield changed event being emited from legacy parent\r\n     */\r\n    private dataFieldChangedSubscription: Subscription;\r\n\r\n\r\n    constructor(public resourceService: ResourceService,\r\n        private externalReferenceService: ExternalReferenceService,\r\n        @Inject(UndoRedoServiceToken) private undoRedoService: IUndoRedoService,\r\n        @Inject(ValidationServiceToken) private validationService: IValidationService,\r\n        private processService: ProcessService,\r\n        private eventNotifierService: EventNotifierService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (typeof this.getValueItems === 'function') {\r\n            this.setPropertyMapperRightItems();\r\n        }\r\n\r\n        this.selectedProperties = [];\r\n\r\n        this.dataFieldChangedSubscription = this.eventNotifierService.subscribe(PropertyMapperDataFieldChangedEvent, this.dataFieldChanged.bind(this));\r\n    }\r\n\r\n    ngOnChanges(changes) {\r\n        if (changes.availableProperties || changes.savedProperties) {\r\n            this.onAvailablePropertiesChanged();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.dataFieldEventRemover();\r\n        this.dataFieldChangedSubscription?.unsubscribe();\r\n    }\r\n\r\n    onMapperRowSelected(row: IPropertyMapperRow): void {\r\n        this.selectedRowKey = row.key;\r\n        this.selectedRow = row;\r\n        this.mapperRowSelected.emit(row);\r\n    }\r\n\r\n    //TODO: Groupings not yet implemented(SharePoint list item content-types) (Feature 936055: [Angular Migration] - SmartWizards)\r\n    /*\r\n     * Key of the selected content type\r\n     */\r\n    get selectedGroupingKey(): string {\r\n        const selectedItem = this.groupingItems.find(g => g.isSelected);\r\n        return selectedItem ? selectedItem.key : '';\r\n    }\r\n\r\n    /**\r\n     * Title of the selected content type\r\n     */\r\n    get selectedGroupingTitle(): string {\r\n        const selectedItem = this.groupingItems.find(g => g.isSelected);\r\n        return selectedItem ? selectedItem.title : '';\r\n    }\r\n\r\n    groupingSelected(item: IDropDownMenuItem): void {\r\n        //TODO: Groupings not yet implemented\r\n    }\r\n\r\n    /**\r\n     * Executes when the left-side dropdown list item is selected from the single dropdown in the Property Mapper Row.\r\n     * The selected item's altered state is set to true and the Property Mapper Row item's altered state is set to false and its value is cleared\r\n     */\r\n    leftItemSelected(item: IDropDownMenuItem, oldKey: string): void {\r\n        this.undoRedoService.addUndoMarker('--k2PropertyMapper: single dropdown changing property--');\r\n        const key = item.key;\r\n\r\n        const newProperty = this.availableProperties.find(a => a.key === item.key);\r\n        if (newProperty) {\r\n            this.addProperty(newProperty);\r\n        }\r\n\r\n        const oldSelectedProperty = this.selectedProperties.find(p => p.key === oldKey);\r\n        if (oldSelectedProperty) {\r\n            this.removeProperty(oldSelectedProperty);\r\n        }\r\n\r\n        this.setPropertyMapperLeftItems();\r\n        this.setPropertyMapperRightItems();\r\n        this.selectedRowKey = key;\r\n\r\n    }\r\n\r\n    /**\r\n     * Right-hand dropdown item selected (datafield or item reference)\r\n     */\r\n    rightItemSelected(item: IDropDownMenuItem, selectedRowKey: string): void {\r\n        if (!item.key) {\r\n            return;\r\n        }\r\n\r\n        this.undoRedoService.addUndoMarker('--k2PropertyMapper: item selected--');\r\n\r\n        //Left-side key\r\n        this.selectedRowKey = selectedRowKey;\r\n        //Right-side key\r\n        const referenceKey = item.key;\r\n\r\n        let selectedRowValue: IPropertyMapperRowValueCollection = null;\r\n        const selectedProperty = this.selectedProperties.find(p => p.key === selectedRowKey);\r\n        const savedProperty: IPropertyMapperRowValueCollection = this.savedProperties[this.selectedRowKey];\r\n\r\n        if (this.shouldMapToDataFields || selectedProperty?.mapToDataFields) {\r\n            const tokenReference = savedProperty?.tokenReference || referenceKey;\r\n\r\n            if (!this.shouldMapToDataFields) {\r\n                //Row level\r\n\r\n                let value: IExpression = null;\r\n\r\n                if (referenceKey === globalVariableNames.activityInstanceDestInstanceData) {\r\n                    value = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                        smartFields:\r\n                            [\r\n                                sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.WorkflowContextField.createInstance({\r\n                                    fieldName: globalVariableNames.activityInstanceDestInstanceData,\r\n                                    title: this.resourceService.getString('instance_data'),\r\n                                    customTitle: this.resourceService.getString('list_item')\r\n                                })\r\n                            ],\r\n                        isDynamic: savedProperty.value?.isDynamic\r\n                    });\r\n\r\n                    selectedRowValue =\r\n                        sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.smartWizard.PropertyMapperRowValueCollection.createInstance({\r\n                            value,\r\n                            tokenReference: item.additionalValueProperty,\r\n                            rowTitleForViewModel: selectedProperty?.rowTitle\r\n                        });\r\n\r\n                    selectedRowValue.value.isDynamic = false;\r\n                }\r\n                else {\r\n                    selectedRowValue = this.createDataFieldMapperRow(referenceKey, tokenReference, item.title, savedProperty?.value?.isDynamic);\r\n                }\r\n            }\r\n            else {\r\n                selectedRowValue = this.createDataFieldMapperRow(referenceKey, item.title, tokenReference);\r\n            }\r\n        } else {\r\n\r\n            selectedRowValue =\r\n                sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.smartWizard.PropertyMapperRowValueCollection.createInstance({\r\n                    value: sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                        type: ReferenceTypes.ItemReference,\r\n                        smartFields:\r\n                            [\r\n                                sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                                    text: referenceKey,\r\n                                    customTitle: item.title,\r\n                                })\r\n                            ]\r\n                    }),\r\n                    tokenReference: item.additionalValueProperty,\r\n                    rowTitleForViewModel: selectedProperty?.rowTitle\r\n                });\r\n\r\n            selectedRowValue.value.isDynamic = false;\r\n        }\r\n\r\n        this.updateSavedRowWithDatafieldTitle(selectedRowValue);\r\n\r\n        item.isSelected = true;\r\n    }\r\n\r\n    addOrRemoveRowItemsClicked(item: IDropDownMenuItem): void {\r\n        const property = this.availableProperties.find(a => a.key === item.key);\r\n        if (typeof property.actionDropdownItemMethod === 'function') {\r\n            //TODO: do not think actionDropdownItemMethod is ever set, do we really need this?\r\n            property.actionDropdownItemMethod();\r\n        } else {\r\n            this.addOrRemoveRowItems(property, false);\r\n        }\r\n    }\r\n\r\n    getSelectedDataFieldIcon(key: string): string {\r\n\r\n        if (typeof this.getValueItems === 'function' &&\r\n            this.savedProperties[key]?.value?.smartFields?.length === 1) {\r\n\r\n            const dataFieldItems: IDropDownMenuItem[] = this.getValueItems(true);\r\n\r\n            //Only if one data field then we can try to resolve back to the dropped data field.\r\n            for (const dataFieldItem of dataFieldItems) {\r\n                if (dataFieldItem.key === this.savedProperties[key].value.smartFields[0].dataFieldReference\r\n                    || dataFieldItem.key === this.savedProperties[key].value.smartFields[0].fieldName) {\r\n                    return dataFieldItem.icon;\r\n                }\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n\r\n    /**\r\n     * Deletes a row from property mapper (when row selected and trashcan clicked)\r\n     * */\r\n    deleteMapperRow(): void {\r\n        this.undoRedoService.addUndoMarker('--k2PropertyMapper: delete mapper row--');\r\n\r\n        if (!this.selectedRowKey) return; //No row selected\r\n\r\n        this.removeProperty(this.selectedProperties.find(p => p.key === this.selectedRowKey));\r\n        this.selectedRowKey = '';\r\n        this.selectedRow = null;\r\n\r\n        this.onAvailablePropertiesChanged();\r\n    }\r\n\r\n    /**\r\n     * Toggle button to change right value between dynamic (textbox) and static (dropdown)\r\n     */\r\n    toggleDropDown(expression: IExpression): void {\r\n\r\n        this.undoRedoService.addUndoMarker('--datafield toggled--');\r\n        if (expression.smartFields.length > 0) {\r\n            expression.smartFields.clear();\r\n            this.setPropertyMapperRightItems();\r\n        }\r\n        expression.isDynamic = !expression.isDynamic;\r\n    }\r\n\r\n    /**\r\n     * Called when the properties that is available to be added is changed\r\n     */\r\n    private onAvailablePropertiesChanged(): void {\r\n\r\n        this.selectedProperties = [];\r\n\r\n        if (!this.availableProperties || !this.savedProperties) return;\r\n\r\n        for (const availableProperty of this.availableProperties) {\r\n            //Ensure available property is set up correctly:\r\n            availableProperty.typeIcon = availableProperty.typeIcon ? availableProperty.typeIcon.toLocaleLowerCase() : dataTypes.icons.default;\r\n\r\n            const savedProperty = this.savedProperties[availableProperty.key] as IPropertyMapperRowValueCollection;\r\n            if (savedProperty) {\r\n                availableProperty.value = savedProperty;\r\n                //If value was incorrectly set to textfield, change to datafield\r\n                if (this.shouldMapToDataFields && savedProperty.value.smartFields?.length === 1) {\r\n                    const savedExpression = savedProperty.value.smartFields[0];\r\n                    if (savedExpression.instanceOf(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.implementor)) {\r\n                        const textField = savedExpression as ITextField;\r\n                        availableProperty.value = this.createDataFieldMapperRow(textField.text, availableProperty.key,\r\n                            textField.customTitle || textField.title);\r\n                    }\r\n                }\r\n                availableProperty.altered = true;\r\n                availableProperty.value.tokenReference = this.getExternalDefinitionToken(availableProperty.key);\r\n\r\n                if (this.savedProperties[availableProperty.key].rowTitleForViewModel) {\r\n                    availableProperty.rowTitle = this.savedProperties[availableProperty.key].rowTitleForViewModel;\r\n                }\r\n\r\n                this.selectedProperties.push(availableProperty);\r\n            } else if (availableProperty.locked || availableProperty.required) {\r\n                //This property must always be listed in selected properties (e.g. Folio)\r\n                let shouldDisableUndoRedo = false;\r\n                if (availableProperty.required === true) {\r\n                    shouldDisableUndoRedo = true;\r\n                }\r\n\r\n                this.undoRedoService.forceDisableWhile(() => {\r\n                    if (!availableProperty.value) {\r\n                        availableProperty.value = this.createExpressionMapperRow(availableProperty.key);\r\n                        \r\n                    } else {\r\n                        availableProperty.value.tokenReference = this.getExternalDefinitionToken(availableProperty.key);\r\n                    }\r\n                    this.savedProperties.add(availableProperty.key, availableProperty.value);\r\n                    this.selectedProperties.push(availableProperty);\r\n                }, shouldDisableUndoRedo, 'k2PropertyMapper.onAvailablePropertiesChanged');\r\n            }\r\n        }\r\n\r\n        this.setAddRemoveRowItems();\r\n        this.setPropertyMapperLeftItems();\r\n        this.setPropertyMapperRightItems();\r\n\r\n        //only apply validation logic for property mapper in call sub workflow step.\r\n        //we will need to move validation code to controller level later\r\n        if (this.displayMode === this.displayModes.workflow) {\r\n            this.registerMappingValidation();\r\n            this.validateMapping();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Return an external reference token based on the type and key\r\n     */\r\n    private getExternalDefinitionToken(key: string): string {\r\n        return ExternalReferenceUtilities.getPropertyMapperExternalDefinitionToken(this.externalDefinitionParent, this.availableProperties, key);\r\n    }\r\n\r\n    /**\r\n     * Updates values used to determine the title value for the selected dropdown item\r\n     */\r\n    private updateSavedRowWithDatafieldTitle(savedValue: IPropertyMapperRowValueCollection) {\r\n        if (this.savedProperties[this.selectedRowKey]) {\r\n            this.savedProperties[this.selectedRowKey] = savedValue;\r\n        } else {\r\n            this.savedProperties.add(this.selectedRowKey, savedValue);\r\n        }\r\n\r\n        this.setPropertyMapperRightItems();\r\n\r\n        this.validationService.reevaluateErrors\r\n            (this.savedProperties.getLogicalParentModel<IValidatedComponent>().childErrorInformation, true);\r\n    }\r\n\r\n    /**\r\n     * Setup properties available to be chosen on the left mapping (dropdown) of a property mapper row\r\n     */\r\n    private setPropertyMapperLeftItems(): void {\r\n        this.propertyMapperLeftItems = {};\r\n\r\n        if (!this.selectedProperties) return;\r\n\r\n        for (const row of this.selectedProperties) {\r\n            let includeRow = true;\r\n\r\n            if (this.selectedGroupingKey || row.actionDropdownItemMethod) {\r\n                //TODO: Groupings not yet implemented(SharePoint list item content-types) (Feature 936055: [Angular Migration] - SmartWizards)\r\n                if (row.parentGroupings &&\r\n                    row.parentGroupings.indexOf(this.selectedGroupingKey) === -1) {\r\n                    includeRow = false;\r\n                }\r\n                if (row.actionDropdownItemMethod) {\r\n                    includeRow = false;\r\n                }\r\n            }\r\n\r\n            if (includeRow) {\r\n                const key = row.key;\r\n\r\n                this.propertyMapperLeftItems[key] = {\r\n                    items: []\r\n                };\r\n\r\n                for (const availableProperty of this.availableProperties) {\r\n                    const isSelected = availableProperty.key === key;\r\n                    //Do not include property that is selected by another row\r\n                    if (!isSelected && this.selectedProperties.find(p => p.key === availableProperty.key)) {\r\n                        continue;\r\n                    }\r\n                    //Do not include system fields\r\n                    if (availableProperty.systemField) {\r\n                        continue;\r\n                    }\r\n                    //Do not include missing fields that are not selected by current row\r\n                    if (availableProperty.state === ExternalReferenceState.Missing && !isSelected) {\r\n                        continue;\r\n                    }\r\n\r\n                    this.propertyMapperLeftItems[key].items.push({\r\n                        key: availableProperty.key,\r\n                        icon: 'icon icon-set-datatypes icon-size16 ic-' + availableProperty.typeIcon?.toLowerCase(),\r\n                        title: availableProperty.rowTitle,\r\n                        isSelected\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the title of the datafield selected and saved in the saved properties\r\n     *\r\n     * @param key\r\n     * @param rowIsDataField\r\n     */\r\n    private getSelectedItemTitleDropdown(row: IPropertyMapperRow, currentDropdownItems: IDropDownMenuItem[]): string {\r\n        const key = row.key;\r\n\r\n        if (!isUndefinedOrNull(this.savedProperties[key]) &&\r\n            this.savedProperties[key].value &&\r\n            this.savedProperties[key].value.smartFields[0]) {\r\n\r\n            if (row.isReturnProperty || row.mapToDataFields) {\r\n                return this.setAndReturnDataFieldTitle(currentDropdownItems, key);\r\n            } else {\r\n                //Need to keep this here for backwards-compatibility, this was not implemented correclty, should have used a datafield smartfield\r\n                //and not a text field with the text property set to externalRef.  This gets used in SmartWizards (SMO - Map to data fields)\r\n                for (const currentDropdownItem of currentDropdownItems) {\r\n                    if (currentDropdownItem.key === this.savedProperties[key].value.smartFields[0].text) {\r\n                        if (currentDropdownItem.title !== this.savedProperties[key].value.smartFields[0].customTitle) {\r\n                            this.savedProperties[key].value.smartFields[0].customTitle = currentDropdownItem.title;\r\n                        }\r\n\r\n                        return currentDropdownItem.title;\r\n                    }\r\n                }\r\n\r\n                //If no item was found, use the customTitle of the saved field. We also need to ensure the custom title is set correctly\r\n                if ((isUndefinedOrNull(this.savedProperties[key].value.smartFields[0].customTitle) ||\r\n                    this.savedProperties[key].value.smartFields[0].customTitle === '') &&\r\n                    !isUndefinedOrNull(this.savedProperties[key].value.smartFields[0].title)) {\r\n                    this.savedProperties[key].value.smartFields[0].customTitle = this.savedProperties[key].value.smartFields[0].title;\r\n                }\r\n\r\n                return this.savedProperties[key].value.smartFields[0].customTitle;\r\n            }\r\n        }\r\n\r\n        return '';\r\n    }\r\n\r\n    /**\r\n     * Returns the icon for the selected right dropdown item\r\n     *\r\n     * @param key\r\n     * @param isDataFields\r\n     */\r\n    private getSelectedItemIconDropdown(key: string, isDataFields: boolean): string {\r\n        if (isDataFields) {\r\n            return this.getSelectedDataFieldIcon(key);\r\n        }\r\n        const property = this.availableProperties.find(a => a.key === key);\r\n        return property?.typeIcon || '';\r\n    }\r\n\r\n    private setAndReturnDataFieldTitle(dataFieldMenuItems: IDropDownMenuItem[], key: string): string {\r\n\r\n        if (!isUndefinedOrNull(this.savedProperties[key]) &&\r\n            !isUndefinedOrNull(this.savedProperties[key].value) &&\r\n            !isUndefinedOrNull(this.savedProperties[key].value.smartFields) &&\r\n            this.savedProperties[key].value.smartFields.length === 1) {\r\n\r\n            for (const dataFieldMenuItem of dataFieldMenuItems) {\r\n\r\n                // Only if one data field then we can try to resolve back to the dropped data field.\r\n                if (dataFieldMenuItem.key === this.savedProperties[key].value.smartFields[0].dataFieldReference ||\r\n\r\n                    // Special case where user can map a data field to the ActivityInstanceDestInstanceData on the\r\n                    // Call Sub Workflow step from a dropdown that contains\r\n                    // the 'List Item' (ActivityInstanceDestInstanceData) and datafields.\r\n                    dataFieldMenuItem.key === this.savedProperties[key].value.smartFields[0].fieldName) {\r\n                    this.savedProperties[key].value.smartFields[0].customTitle = dataFieldMenuItem.title;\r\n                    return dataFieldMenuItem.title;\r\n                }\r\n            }\r\n\r\n            //If no item was found, use the customTitle of the saved field. We also need to ensure the custom title is set correctly\r\n            if ((isUndefinedOrNull(this.savedProperties[key].value.smartFields[0].customTitle) ||\r\n                this.savedProperties[key].value.smartFields[0].customTitle === '') &&\r\n                !isUndefinedOrNull(this.savedProperties[key].value.smartFields[0].title)) {\r\n                this.savedProperties[key].value.smartFields[0].customTitle = this.savedProperties[key].value.smartFields[0].title;\r\n            }\r\n\r\n            return this.savedProperties[key].value.smartFields[0].customTitle;\r\n        }\r\n\r\n        return '';\r\n    }\r\n\r\n    private registerMappingValidation(): void {\r\n        const validationConfigs: {\r\n            [validationType: number]: IValidationTypeItem;\r\n        } = {};\r\n        const errorMessage = 'property_mapper_property_missing';\r\n\r\n        const keys: string[] = this.savedProperties.getKeys();\r\n\r\n        for (const propertyKey of keys) {\r\n            validationConfigs[ValidationTypes.AlwaysFalseValidator] = {\r\n                validationType: ValidationTypes.AlwaysFalseValidator,\r\n                validationFailedMessage: errorMessage,\r\n                validationResourceTokens: [propertyKey]\r\n            };\r\n\r\n            const validatedModel = this.savedProperties[propertyKey] as IValidatedComponent;\r\n\r\n            const validatorItem = {\r\n                modelObject: validatedModel,\r\n                propertyName: 'tokenReference',\r\n                errorSeverity: ErrorSeverity.Error,\r\n                validationFailedMessage: errorMessage,\r\n                validationResourceTokens: [propertyKey],\r\n                validationConfigs,\r\n                validationValue: '',\r\n                hideShowMeLink: false,\r\n            } as IValidatorItem;\r\n\r\n            this.validatorItems[propertyKey] = validatorItem;\r\n\r\n            this.undoRedoService.addCustomUndoEvent((isUndo): boolean => {\r\n                this.validateMapping();\r\n\r\n                return true;\r\n            }, '-- validate mapping on undo redo --');\r\n        }\r\n    }\r\n\r\n    private validateMapping(): void {\r\n        if (!this.availableProperties || this.availableProperties.length === 0) return;\r\n\r\n        for (const key in this.validatorItems) {\r\n            if (this.validatorItems.hasOwnProperty(key)) {\r\n\r\n                const property = this.selectedProperties.find(p => p.key === key);\r\n                if (isUndefinedOrNull(property) && !isUndefinedOrNull(this.savedProperties[key])) {\r\n                    //Property is missing from selectedProperties but defined in savedProperties\r\n                    this.validationService.evaluate([ValidationTypes.AlwaysFalseValidator], this.validatorItems[key]);\r\n                    //Add back to selected properties in error\r\n                    let savedProperty = this.savedProperties[key] as IPropertyMapperRowValueCollection;\r\n                    let type = ReferenceTypes.Other;\r\n                    if (savedProperty.value?.smartFields.length > 0) {\r\n                        switch (savedProperty.value.smartFields[0].componentId) {\r\n                            case ComponentIdMapping.k2DataField: type = ReferenceTypes.DataField; break;\r\n                            case ComponentIdMapping.k2ItemReferenceField: type = ReferenceTypes.ItemReference; break;\r\n                        }\r\n                    }\r\n                    this.selectedProperties.push({\r\n                        key,\r\n                        rowTitle: savedProperty.rowTitleForViewModel || key,\r\n                        type: type,\r\n                        typeIcon: dataTypes.icons.default,\r\n                        value: savedProperty,\r\n                        state: ExternalReferenceState.Missing\r\n                    });\r\n                    this.setAddRemoveRowItems();\r\n                    this.setPropertyMapperLeftItems();\r\n                    this.setPropertyMapperRightItems();\r\n\r\n                } else if ((this.validatorItems[key].modelObject as IValidatedComponent)?.errorInformation?.length > 0) {\r\n                    //Clear error\r\n                    this.validationService.forcePassValidation(this.validatorItems[key]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private setPropertyMapperRightItems(): boolean {\r\n        this.propertyMapperRightItems = {};\r\n\r\n        if (!this.selectedProperties) return;\r\n        let shouldListenForDataFields = false;\r\n        const canGetValueItems = typeof this.getValueItems === 'function';\r\n        const valueItems: IDropDownMenuItem[][] = [[], []];\r\n\r\n        for (const row of this.selectedProperties) {\r\n            const isDataFields = this.shouldMapToDataFields || row.mapToDataFields || false;\r\n            if (canGetValueItems) {\r\n                if (valueItems[+isDataFields].length === 0) {\r\n                    valueItems[+isDataFields] = this.getValueItems(isDataFields);\r\n                }\r\n            }\r\n            const dropdownItems = valueItems[+isDataFields] || [];\r\n            const key = row.key;\r\n\r\n            this.propertyMapperRightItems[key] = {\r\n                items: dropdownItems,\r\n                //Only datafield/variable dropdowns have a footer (Create New)\r\n                footerItems: isDataFields ? this.valueFooterItems : [],\r\n                selectedItemTitle: this.getSelectedItemTitleDropdown(row, dropdownItems),\r\n                //Dynamic icon depending on datafield or item reference type\r\n                selectedIcon: this.getSelectedItemIconDropdown(key, isDataFields)\r\n            };\r\n\r\n            if (!shouldListenForDataFields && isDataFields) {\r\n                //If right hand items contain any datafields, items need to be updated if datafields are updated\r\n                shouldListenForDataFields = true;\r\n            }\r\n        }\r\n\r\n        if (shouldListenForDataFields) {\r\n            if (typeof this.dataFieldEventRemover === 'function') {\r\n                this.dataFieldEventRemover();\r\n            }\r\n            //Update datafields collection when datafields are changed (datafield could also be removed and validation needs to happen)\r\n            this.dataFieldEventRemover =\r\n                this.processService.root.configuration.dataFields.listen(EventTypes.anythingChanged, this.onAvailablePropertiesChanged.bind(this));\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Populates the left items available (in the bottom multiselect footer) for adding/removing rows to/from the mapper\r\n     */\r\n    private setAddRemoveRowItems(): IDropDownMenuItem[] {\r\n        this.addRemoveRowItems = [];\r\n        if (!this.availableProperties) return;\r\n\r\n\r\n        for (const property of this.availableProperties) {\r\n            let selected = false;\r\n            let isDisabled = false;\r\n\r\n            const selectedProperty = this.selectedProperties.find(p => p.key === property.key);\r\n            if (!property.locked) {\r\n                property.altered = !isUndefinedOrNull(selectedProperty);\r\n\r\n                if (property.altered) {\r\n                    selected = true;\r\n                }\r\n                else {\r\n                    property.altered = false;\r\n                }\r\n            } else if (selectedProperty) {\r\n                // if the property has locked state make it disable state (ex Load method is selected and\r\n                // ID property should not be able to removed by clicking add/remove checkbox)\r\n                selected = true;\r\n                isDisabled = true;\r\n            }\r\n\r\n            let addItem = true;\r\n\r\n            if (this.selectedGroupingKey?.length > 0 && property.parentGroupings?.length > 0) {\r\n                //TODO: Groupings not yet implemented(SharePoint list item content-types) (Feature 936055: [Angular Migration] - SmartWizards)\r\n                addItem = property.parentGroupings.indexOf(this.selectedGroupingKey) > -1;\r\n            }\r\n\r\n            //Do not include system fields or fields in error\r\n            if (property.systemField || property.state === ExternalReferenceState.Missing) {\r\n                addItem = false;\r\n            }\r\n\r\n            if (addItem === true) {\r\n                this.addRemoveRowItems.push({\r\n                    key: property.key.toString(),\r\n                    icon: 'icon icon-set-datatypes icon-size16 ic-' + property.typeIcon.toLowerCase(),\r\n                    isDisabled,\r\n                    isSelected: selected,\r\n                    title: property.rowTitle\r\n                });\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This method is called to execute when a Dropdown Item is selected to determine the selected item's key to change its altered state to the opposite\r\n     *\r\n     * @param propertyMapperRow\r\n     * @param multiAddEvent\r\n     */\r\n    private addOrRemoveRowItems(propertyMapperRow: IPropertyMapperRow, multiAddEvent: boolean = false): any {\r\n        //Do not add a undo redo marker for multi add events, when performing undo, we want all added properties to be removed\r\n        let shouldDisableUndoRedo = false;\r\n        if (!multiAddEvent) {\r\n            this.undoRedoService.addUndoMarker('--k2PropertyMapper: set selected item--');\r\n        } else {\r\n            this.undoRedoService.addUndoInfo('--k2PropertyMapper: set selected item multiAddEvent - disable undo--');\r\n            shouldDisableUndoRedo = true;\r\n        }\r\n\r\n        this.undoRedoService.forceDisableWhile(() => {\r\n\r\n            if (!propertyMapperRow.value) {\r\n                propertyMapperRow.value = this.createExpressionMapperRow(propertyMapperRow.key);\r\n            }\r\n\r\n            if (!this.savedProperties[propertyMapperRow.key] || !this.selectedProperties.find(p => p.key === propertyMapperRow.key)) {\r\n                this.addProperty(propertyMapperRow);\r\n            } else {\r\n                this.removeProperty(propertyMapperRow);\r\n            }\r\n\r\n            this.setPropertyMapperLeftItems();\r\n            if (typeof this.getValueItems === 'function') {\r\n                this.setPropertyMapperRightItems();\r\n            }\r\n\r\n            if (multiAddEvent !== false) {\r\n                this.undoRedoService.addUndoInfo('--k2PropertyMapper: set selected item multiAddEvent - enable undo--');\r\n            }\r\n        }, shouldDisableUndoRedo, 'k2PropetyMapper.setSelectedItem');\r\n    }\r\n\r\n\r\n    /**\r\n     * Called when a property is added from the list of available properties\r\n     *\r\n     * @param propertyMapperRow\r\n     */\r\n    private addProperty(propertyMapperRow: IPropertyMapperRow): void {\r\n        propertyMapperRow.altered = true;\r\n\r\n        if (!this.savedProperties[propertyMapperRow.key]) {\r\n            this.savedProperties.add(propertyMapperRow.key, propertyMapperRow.value);\r\n        } else {\r\n            this.savedProperties[propertyMapperRow.key] = propertyMapperRow.value;\r\n        }\r\n\r\n        let selectedProperty = this.selectedProperties.find(p => p.key === propertyMapperRow.key);\r\n        if (!selectedProperty) {\r\n            this.selectedProperties.push(propertyMapperRow);\r\n        }\r\n        else {\r\n            selectedProperty = propertyMapperRow;\r\n        }\r\n\r\n        this.onMapperRowSelected(propertyMapperRow);\r\n    }\r\n\r\n    /**\r\n     * Remove property from selected and saved properties.\r\n     * If property removed was in error, also remove it from available properties.\r\n     * Re-evaluate errors, to allow for validation to bubble up and remove errors where necessary.\r\n     *\r\n     * @param propertyMapperRow\r\n     */\r\n    private removeProperty(propertyMapperRow: IPropertyMapperRow): void {\r\n        propertyMapperRow.altered = false;\r\n\r\n        const keyToRemove = propertyMapperRow.key;\r\n\r\n        let propertyToCleanup: ISmartObjectPropertyField = null;\r\n        const externalReferencePropertyQP = this.savedProperties[keyToRemove].tokenReference;\r\n\r\n        if (!isUndefinedOrNull(externalReferencePropertyQP)) {\r\n            propertyToCleanup = this.savedProperties.getRoot<IProcess>()\r\n                .findItem<ISmartObjectPropertyField>\r\n                (externalReferencePropertyQP);\r\n        }\r\n\r\n        this.savedProperties.remove(keyToRemove);\r\n\r\n        //Remove from selectedProperties\r\n        const removeIndex = this.selectedProperties?.indexOf(this.selectedProperties?.find(s => s.key === keyToRemove));\r\n        if (removeIndex >= 0) {\r\n            this.selectedProperties.splice(removeIndex, 1);\r\n        }\r\n\r\n        this.validationService.reevaluateErrors(\r\n            this.savedProperties\r\n                .getLogicalParentModel<IValidatedComponent>()\r\n                .childErrorInformation,\r\n            true\r\n        );\r\n\r\n        //Remove the missing property from external references if nothing else is using it\r\n        //(There seems to be a syncing issue with the definition on cleanup and the definition that gets deployed. Interim solution:\r\n        //The references has to be removed here as well as on deploy, else the correct definition won't be deployed to KPRX - See Defect 883188)\r\n        if (!isUndefinedOrNull(propertyToCleanup)) {\r\n            if (propertyToCleanup.state === ExternalReferenceState.Missing) {\r\n                this.externalReferenceService.removeUnusedExternalReferences();\r\n            }\r\n        }\r\n\r\n        this.selectedRowKey = '';\r\n    }\r\n\r\n    /**\r\n     * Returns the index of the row based on the key provided\r\n     *\r\n     * @param groupingKey\r\n     */\r\n    private getPropertyIndex(propertyKey: string): number {\r\n        for (let p = 0; p < this.availableProperties.length; p++) {\r\n            if (this.availableProperties[p].key === propertyKey) {\r\n                return p;\r\n            }\r\n        }\r\n    }\r\n\r\n    private createDataFieldMapperRow(dataFieldReference: string, tokenReference: string, dataFieldTitle: string,\r\n        isDynamic: boolean = false): IPropertyMapperRowValueCollection {\r\n        const row = sourceCode.k2Designer.objectModel.workflow.process.k2Process.events\r\n            .smartWizard\r\n            .PropertyMapperRowValueCollection\r\n            .createInstance({\r\n                value: sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                    type: ReferenceTypes.DataField,\r\n                    smartFields:\r\n                        [\r\n                            sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.DataField.createInstance({\r\n                                dataFieldReference,\r\n                                customTitle: dataFieldTitle\r\n                            })\r\n                        ],\r\n                    isDynamic\r\n                }),\r\n                tokenReference: this.getExternalDefinitionToken(tokenReference)\r\n            });\r\n        return row;\r\n    }\r\n\r\n    private createExpressionMapperRow(tokenReference: string): IPropertyMapperRowValueCollection {\r\n        const row =\r\n            sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.smartWizard.PropertyMapperRowValueCollection.createInstance({\r\n                value: sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                    smartFields: []\r\n                }),\r\n                tokenReference: this.getExternalDefinitionToken(tokenReference)\r\n            });\r\n\r\n        return row;\r\n    }\r\n\r\n    private dataFieldChanged = (event: IPropertyMapperDataFieldChangedEvent) => {\r\n        if (event.dataField) {\r\n            const item = this.propertyMapperRightItems[event.key].items.find(i => i.key === event.dataField.dataFieldReference);\r\n            if (item) {\r\n                this.rightItemSelected(item, event.key);\r\n            }\r\n        }\r\n    };\r\n}\r\n","<div class=\"k2-property-mapper\"\r\n     [class.k2-property-mapper-workflow-style]=\"displayMode === displayModes.workflow\"\r\n     [class.k2-property-mapper-smo-style]=\"displayMode === displayModes.smo\"\r\n     [class.hidden]=\"!isDataLoaded\">\r\n\r\n    <!-- Multi Item Header -->\r\n    <div class=\"property-mapper-multi-heading\" *ngIf=\"shouldShowRepeatingHeader\">\r\n        <div class=\"multi-two\"></div>\r\n        <div class=\"multi-one\"></div>\r\n    </div>\r\n\r\n    <!-- Header -->\r\n    <div class=\"property-mapper-heading\" [class.is-inside-popup]=\"isInsidePopup\">\r\n        <div class=\"icon-heading\">\r\n            <span class=\"icon {{headingData?.assetTypeIcon}}\"\r\n                  [ngClass]=\"{'icon-size24': displayMode === displayModes.workflow, 'icon-size16': displayMode !== displayModes.workflow }\"></span>\r\n        </div>\r\n        <div class=\"text-heading\" [innerHtml]=\"headingData.assetTitleLabel\" [attr.title]=\"headingData.assetTitleTooltip\"></div>\r\n        <div class=\"icon-heading-dd\" *ngIf=\"groupings?.length > 1\">\r\n            <!--TODO: Groupings not yet implemented (SharePoint list item content-types)-->\r\n            <k2-drop-down class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"\r\n                          [menuItems]=\"groupingItems\"\r\n                          [dropDownMenuTrianglePosition]=\"dropDownMenuTrianglePosition.right\">\r\n            </k2-drop-down>\r\n        </div>\r\n        <div class=\"text-type\" [innerHtml]=\"selectedGroupingTitle\" *ngIf=\"groupings?.length > 1\"></div>\r\n        <div *ngIf=\"displayMode === displayModes.workflow\" class=\"text-sub-heading\" [innerHtml]=\"headingData.assetSubTitleLabel\"></div>\r\n    </div>\r\n    <!-- Content -->\r\n\r\n    <div class=\"property-mapper-content\"\r\n         [class.empty-list]=\"savedProperties?.getKeys().length < 1\"\r\n         [class.is-inside-popup]=\"isInsidePopup\">\r\n        <div class=\"nothing-selected\" *ngIf=\"!savedProperties || savedProperties.getKeys().length === 0\" [innerHtml]=\"getString('no_mappings')\"></div>\r\n\r\n        <ng-container *ngFor=\"let row of selectedProperties\">\r\n            <div class=\"property-mapper-content-row\" (click)=\"onMapperRowSelected(row)\"\r\n                 [class.selected]=\"row.key === selectedRowKey\"\r\n                 [class.row-focus]=\"!isRowDropdownFocused && !isRowValueControlFocused\"\r\n                 [class.locked]=\"row.locked\"\r\n                 *ngIf=\"row.key !== 'SelectedGrouping'\">\r\n                <div class=\"left-content\"\r\n                     [class.selected]=\"row.key === selectedRowKey && !isRowDropdownFocused\"\r\n                     [class.focus]=\"row.key === selectedRowKey && isRowDropdownFocused\"\r\n                     (click)=\"isRowDropdownFocused = true; isRowValueControlFocused = false\">\r\n                    <div *ngIf=\"row.locked\" class=\"height\">\r\n                        <div class=\"icon-content\"><span class=\"icon icon-set-datatypes icon-size16 ic-{{row.typeIcon}}\"></span></div>\r\n                        <div class=\"desc-content\" k2-tooltip-basic>\r\n                            <span class=\"\" [innerHtml]=\"row.rowTitle\"></span>\r\n                        </div>\r\n                        <div class=\"icon-content-dd\">\r\n                            <span class=\"icon icon-set-ribbon icon-size16 ic-lock\"></span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <k2-drop-down *ngIf=\"!row.locked\"\r\n                                  class=\"k2-dropdown-parent\"\r\n                                  [menuItems]=\"propertyMapperLeftItems[row.key]?.items\"\r\n                                  (onItemSelected)=\"leftItemSelected($event, row.key)\"\r\n                                  [trianglePosition]=\"dropDownMenuTrianglePosition.right\">\r\n                        <div class=\"height\">\r\n                            <div class=\"icon-content\">\r\n                                <span class=\"icon icon-set-datatypes icon-size16 ic-{{row.typeIcon}}\"></span>\r\n                            </div>\r\n                            <div class=\"desc-content\" k2-tooltip-basic>\r\n                                <span [innerHtml]=\"row.rowTitle\"></span>\r\n                            </div>\r\n                            <div class=\"icon-content-dd\">\r\n                                <span *ngIf=\"row.locked\" class=\" icon icon-set-ribbon icon-size16 ic-lock\"></span>\r\n                                <span *ngIf=\"!row.locked\"\r\n                                      class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"\r\n                                      [class.selected]=\"row.key === selectedRowKey\"></span>\r\n                                <k2-badges [k2Model]=\"savedProperties[row.key]\"\r\n                                           [alwaysHideBadge]=\"!savedProperties[row.key].errorInformation?.length\"></k2-badges>\r\n                            </div>\r\n                        </div>\r\n                    </k2-drop-down>\r\n\r\n                </div>\r\n                <div class=\"right-content\"\r\n                     [class.selected]=\"row.key === selectedRowKey && !isRowValueControlFocused\"\r\n                     [class.focus]=\"row.key === selectedRowKey && isRowValueControlFocused\"\r\n                     (click)=\"isRowDropdownFocused = false; isRowValueControlFocused = true\">\r\n                    <div>\r\n\r\n                        <k2-drop-down *ngIf=\"row.hasValueDropdown && (!row.showToggle || !savedProperties[row.key]?.value.isDynamic)\"\r\n                                      class=\"k2-dropdown-parent\"\r\n                                      [menuItems]=\"propertyMapperRightItems[row.key]?.items\"\r\n                                      [footerItems]=\"propertyMapperRightItems[row.key]?.footerItems\"\r\n                                      (onItemSelected)=\"rightItemSelected($event, row.key)\"\r\n                                      [emptyStateTemplate]=\"row.emptyValueDropDownTemplate || ''\">\r\n                            <div class=\"k2-dd-flexChild k2-dd-rowParent k2-dd-container k2-control k2-dropdown-div icon-container\">\r\n                                <div class=\"value-dd-icon flexrow\"\r\n                                     [class.vertical]=\"!row.mapToDataFields\"\r\n                                     [class.field]=\"row.mapToDataFields\"\r\n                                     *ngIf=\"propertyMapperRightItems[row.key]?.selectedIcon && (savedProperties[row.key]?.value?.smartFields?.length === 1 || row.mapToDataFields)\">\r\n                                    <span *ngIf=\"!row.mapToDataFields\"\r\n                                          class=\"icon icon-size16 {{propertyMapperRightItems[row.key]?.selectedIcon}}\"\r\n                                          [class.selected]=\"displayMode === displayModes.workflow\"></span>\r\n                                    <span *ngIf=\"row.mapToDataFields\"\r\n                                          class=\"icon icon-set-datatypes icon-size16 ic-{{propertyMapperRightItems[row.key]?.selectedIcon}} dark selected\"></span>\r\n                                </div>\r\n                                <div class=\"k2-dd-flexChild k2-dd-text\" [innerHtml]=\"propertyMapperRightItems[row.key]?.selectedItemTitle\"></div>\r\n                                <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                                    <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                                </div>\r\n                            </div>\r\n                        </k2-drop-down>\r\n                        <k2-text-box *ngIf=\"!row.hasValueDropdown || (row.showToggle && savedProperties[row.key]?.value.isDynamic)\"\r\n                                     [k2Watermark]=\"getString('general_type_drop')\"\r\n                                     class=\"text-box\"\r\n                                     [k2Expression]=\"savedProperties[row.key]?.value\"></k2-text-box>\r\n                    </div>\r\n                    <k2-badges [k2Model]=\"savedProperties[row.key].value?.smartFields[0]\"></k2-badges>\r\n                </div>\r\n                <div *ngIf=\"row.showToggle\" class=\"toggle-content\">\r\n                    <button (click)=\"toggleDropDown(savedProperties[row.key]?.value)\"\r\n                            [class.selected]=\"savedProperties[row.key]?.value?.isDynamic\" tabindex=\"0\" k2-tab-index class=\"k2-picker-flex-dynamic-btn k2-toggle-switch\">\r\n                        <span class=\"icon icon-set-buttons icon-size16 ic-dynamicedit\"\r\n                              [class.hover]=\"row.isToggleHovered\"\r\n                              [class.selected]=\"savedProperties[row.key]?.value?.isDynamic && !isToggleButtonHovered\"\r\n                              (mouseenter)=\"row.isToggleHovered = true\"\r\n                              (mouseleave)=\"row.isToggleHovered = false\"></span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n    </div>\r\n\r\n    <!-- Footer-->\r\n    <div class=\"property-mapper-footer\">\r\n        <div class=\"add-delete-row\" [class.is-inside-popup]=\"isInsidePopup\">\r\n            <div class=\"btn k2-btn k2-btn-add property-mapper-footer-padding\" [class.disabled]=\"addRemoveRowItems.length === 0\">\r\n                <k2-drop-down class=\"icon icon-set-buttons icon-size24 ic-add_button\"\r\n                              [menuItems]=\"addRemoveRowItems\"\r\n                              [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                              [trianglePosition]=\"dropDownMenuTrianglePosition.center\"\r\n                              [isMultiSelect]=\"true\"\r\n                              (onItemSelected)=\"addOrRemoveRowItemsClicked($event)\">\r\n                </k2-drop-down>\r\n\r\n            </div>\r\n            <!--TODO: Groupings not yet implemented (SharePoint list item content-types)-->\r\n            <div class=\"btn k2-btn k2-btn-add add-drop-down property-mapper-footer-padding\"\r\n                 *ngIf=\"!selectedRowKey && groupings?.length > 1\">\r\n                <k2-drop-down [menuItems]=\"groupingItems\"\r\n                              [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                              [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                              (onItemSelected)=\"groupingSelected($event)\">\r\n                    <div class=\"dropdownbutton\">\r\n                        <i class=\"icon icon-set-buttons icon-size24 ic-adddropdown_left\"></i>\r\n                        <i class=\"icon icon-set-buttons icon-size24 ic-adddropdown_right\"></i>\r\n                    </div>\r\n                </k2-drop-down>\r\n            </div>\r\n            <div class=\"trash bin property-mapper-footer-padding\"\r\n                 *ngIf=\"selectedRow && !selectedRow.locked\"\r\n                 (click)=\"deleteMapperRow()\">\r\n                <span class=\"icon icon-set-buttons icon-size24 ic-bin_button\"\r\n                      [class.disabled]=\"isTrashCanHovered\"\r\n                      (mouseenter)=\"isTrashCanHovered = true\"\r\n                      (mouseleave)=\"isTrashCanHovered = false\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, EventEmitter, Inject, Input, OnInit, Output } from '@angular/core';\r\nimport { IExpression } from '../../../../types/models/core/configured-smart-fields/i-expression';\r\nimport { DeadlineActionType } from '../../../../types/models/reminder-control/deadline-action-type';\r\nimport { ReminderActionType } from '../../../../types/models/reminder-control/reminder-action-type';\r\nimport { IListItemIconData } from '../../../../types/uiComponents/list-item/i-list-item-icon-data';\r\nimport { ConfigurationService } from '../../../services/configuration/configuration-service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ChooseControlTemplates } from '../../../shared/enums/choose-control/choose-control-templates';\r\nimport { ChooseControlTypes } from '../../../shared/enums/choose-control/choose-control-types';\r\nimport { DropDownMenuAlignment } from '../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from '../../../shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from '../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { TextBoxConstraint } from '../../../shared/enums/text-box/text-box-constraint';\r\nimport { IEnumLookupPair } from '../../../shared/models/i-enum-lookup-pair';\r\nimport { showDatePicker } from '../../../shared/utils/date-picker';\r\nimport { isUndefinedOrNull } from '../../../shared/utils/general';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-reminder-control',\r\n    templateUrl: './reminder-control.component.html',\r\n    styleUrls: ['./reminder-control.component.less']\r\n})\r\nexport class ReminderControlComponent extends BaseResourceComponent implements OnInit {\r\n    @Input() headingText: string;\r\n    @Input() headingIcon: string;\r\n    @Input() contentDescription: string;\r\n    @Input() actionTypeKey: ReminderActionType;\r\n    @Input() onDateInterval: IExpression;\r\n    @Input() beforeOrAfterIntervalDays: IExpression;\r\n    @Input() beforeOrAfterIntervalHours: IExpression;\r\n    @Input() beforeOrAfterIntervalMins: IExpression;\r\n    @Input() beforeOrAfterIntervalSecs: IExpression;\r\n    @Input() repeatReminder: boolean;\r\n    @Input() repeatingIntervalDays: IExpression;\r\n    @Input() repeatingIntervalHours: IExpression;\r\n    @Input() repeatingIntervalMins: IExpression;\r\n    @Input() repeatingIntervalSecs: IExpression;\r\n    @Input() repeatingAmmount: IExpression;;\r\n    @Input() isSelected: boolean;\r\n    @Input() reminderMode: DeadlineActionType;\r\n    @Input() reminderButtonText: string;\r\n    @Input() repeatInfinitely: boolean;\r\n    @Input() deadlineObject: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IDeadline;\r\n    @Input() hasTaskDeadline: boolean;\r\n\r\n    @Output() toggleRulesDesigner: EventEmitter<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IDeadline> = new EventEmitter<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IDeadline>();\r\n    @Output() onActionTypeChanged: EventEmitter<IDropDownMenuItem> = new EventEmitter<IDropDownMenuItem>();\r\n\r\n    //Enumerator types\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n    chooseControlTemplates: typeof ChooseControlTemplates = ChooseControlTemplates;\r\n    public dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    textBoxConstraint: typeof TextBoxConstraint = TextBoxConstraint;\r\n    deadlineActionType: typeof DeadlineActionType = DeadlineActionType;\r\n    reminderActionType: typeof ReminderActionType = ReminderActionType;\r\n\r\n    //Public variables\r\n    calenderRightIconData: IListItemIconData = {\r\n        customClassFlexRow: 'list-item-icons',\r\n        iconClass: 'icon icon-set-datatypes icon-size16 ic-datetime fdatepicker',\r\n        isVertical: true,\r\n        isWrappedInContentDiv: true\r\n    };\r\n\r\n    intervalRightIconData: IListItemIconData = {\r\n        customClassFlexRow: 'list-item-icons',\r\n        iconClass: 'icon icon-set-contextbrowser icon-size16 ic-infinite',\r\n        isVertical: true,\r\n        isWrappedInContentDiv: true\r\n    };\r\n\r\n    workingHoursDropdownItems: IDropDownMenuItem[];\r\n    workingHoursDisabled: boolean;\r\n    workingHoursFooterItems: IDropDownMenuItem[];\r\n    actionTypeTitle: string;\r\n    selectedRowIndex: number;\r\n    intervalDropdownFields: IDropDownMenuItem[];\r\n\r\n    constructor(resourceService: ResourceService,\r\n        @Inject(UndoRedoServiceToken) private undoRedoService: IUndoRedoService,\r\n        private configurationService: ConfigurationService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        //Backwards compatibility, field did not exists, create new instance\r\n        if (!this.deadlineObject?.dynamicWorkingHours) {\r\n            this.deadlineObject.dynamicWorkingHours = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({ smartFields: [], isDynamic: false });\r\n        }\r\n\r\n        //Ensure repeating list item is shown on reload\r\n        if (this.repeatingAmmount?.smartFields?.length > 0) {\r\n            this.repeatReminder = true;\r\n        }\r\n\r\n        this.actionTypeTitle = sourceCode.k2Designer.objectModel.workflow.process.k2Process.ReminderActionTypeImplementor(this.actionTypeKey);\r\n\r\n        this.setupIntervalDropdownFields();\r\n\r\n        this.workingHoursDisabled = true;\r\n        this.getWorkingHoursFromManagement();\r\n    }\r\n\r\n    private getWorkingHoursFromManagement(): void {\r\n        this.configurationService.getWorkingHours()\r\n            .subscribe((result: string[] | string) => {\r\n                this.createDropdownForWorkingHours(result);\r\n            });\r\n\r\n        this.configurationService.getWorkingHours();\r\n    }\r\n\r\n    private createDropdownForWorkingHours(workingHours: string[] | string): void {\r\n        this.workingHoursDropdownItems = [];\r\n\r\n        if (workingHours === 'false') {\r\n            this.workingHoursDisabled = true;\r\n            return;\r\n        }\r\n\r\n        for (let i = 0; i < workingHours.length; i++) {\r\n            let isSelected = false;\r\n\r\n            if (!this.deadlineObject.isDefaultWorkingHours && workingHours[i] === this.deadlineObject.workingHours) {\r\n                isSelected = true;\r\n            }\r\n            this.workingHoursDropdownItems.push({\r\n                key: i.toString(),\r\n                title: workingHours[i],\r\n                isSelected,\r\n                onSelected: this.selectWorkingHours.bind(this)\r\n            });\r\n        }\r\n\r\n        this.workingHoursDisabled = false;\r\n\r\n        this.workingHoursDropdownItems.push({\r\n            key: this.resourceService.getString('general_default_working_hours'),\r\n            title: this.resourceService.getString('general_default_working_hours'),\r\n            isSelected: this.deadlineObject?.isDefaultWorkingHours && !this.deadlineObject.dynamicWorkingHours.isDynamic || false,\r\n            onSelected: this.selectDefaultWorkingHours.bind(this)\r\n        });\r\n\r\n        this.workingHoursFooterItems = [];\r\n        this.workingHoursFooterItems.push({\r\n            title: this.resourceService.getString('control_PickerControl_Item_TypeConstructMyOwn'),\r\n            key: 'typeConstructMyOwn',\r\n            icon: 'icon-set-toolbar ic-edit',\r\n            innerItemComponent: DropdownMenuItemTemplates.Command,\r\n            onSelected: () => {\r\n                this.deadlineObject.dynamicWorkingHours.isDynamic = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    private selectWorkingHours(item: IDropDownMenuItem): void {\r\n        this.deadlineObject.workingHours = item.title;\r\n        this.deadlineObject.isDefaultWorkingHours = false;\r\n        this.deadlineObject.dynamicWorkingHours.isDynamic = false;\r\n        this.deadlineObject.dynamicWorkingHours.smartFields.clear();\r\n    }\r\n\r\n    private selectDefaultWorkingHours(item: IDropDownMenuItem): void {\r\n        this.deadlineObject.workingHours = item.title;\r\n        this.deadlineObject.isDefaultWorkingHours = true;\r\n        this.deadlineObject.dynamicWorkingHours.isDynamic = false;\r\n        this.deadlineObject.dynamicWorkingHours.smartFields.clear();\r\n    }\r\n\r\n    /**\r\n     * Method when item in the drop down was selected.\r\n     */\r\n    private intervalItemClicked(index: number, item: IEnumLookupPair): void {\r\n\r\n        this.actionTypeKey = item.key as number;\r\n        this.actionTypeTitle = sourceCode.k2Designer.objectModel.workflow.process.k2Process.ReminderActionTypeImplementor(this.actionTypeKey);\r\n\r\n        switch (item.key) {\r\n            case ReminderActionType.After:\r\n                this.onDateInterval.smartFields.clear();\r\n                break;\r\n            case ReminderActionType.Before:\r\n                this.onDateInterval.smartFields.clear();\r\n                if (!isUndefinedOrNull(this.deadlineObject)) {\r\n                    this.deadlineObject.withinWorkingHoursOnly = false;\r\n                }\r\n                break;\r\n            case ReminderActionType.On:\r\n                this.beforeOrAfterIntervalDays.smartFields.clear();\r\n                this.beforeOrAfterIntervalHours.smartFields.clear();\r\n                this.beforeOrAfterIntervalMins.smartFields.clear();\r\n                this.beforeOrAfterIntervalSecs.smartFields.clear();\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This method creates the single dropdown list. It is used to returns the appropriate dropdown interface needed to display in the Reminder Control\r\n     */\r\n    private setupIntervalDropdownFields(): void {\r\n        this.intervalDropdownFields = [];\r\n\r\n        const opts = sourceCode.k2Designer.objectModel.workflow.process.k2Process.GetReminderActionTypeList();\r\n        for (let i = 0; i < opts.length; i++) {\r\n            this.intervalDropdownFields.push({\r\n                key: opts[i].key.toString(),\r\n                title: opts[i].title,\r\n                onSelected: this.intervalItemClicked.bind(this, i, opts[i]),\r\n                isSelected: this.actionTypeKey === opts[i].key\r\n            });\r\n        }\r\n    }\r\n\r\n    getSelectedWorkingHoursText(): string {\r\n        if (this.deadlineObject?.dynamicWorkingHours?.isDynamic) {\r\n            return this.resourceService.getString('choose_time_zone');\r\n        }\r\n\r\n        if (!isUndefinedOrNull(this.deadlineObject)) {\r\n            return this.deadlineObject.workingHours || this.resourceService.getString('general_default_working_hours');\r\n        } else {\r\n            return this.resourceService.getString('general_default_working_hours');\r\n        }\r\n    }\r\n\r\n    openCalendarControl(eventTarget: EventTarget): void {\r\n        showDatePicker(eventTarget, (ev) => {\r\n            this.undoRedoService.enabledAndBeginUndoGroupWithMarkerAndFinish('--reminder control: change timer date--');\r\n            this.onDateInterval.smartFields.clear();\r\n            this.onDateInterval.smartFields.push(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.DateTimeField.createInstance({\r\n                title: ev.formatted,\r\n                dateTime: ev.formatted\r\n            }));\r\n        });\r\n    }\r\n\r\n    toggleInfiniteInterval(): void {\r\n        this.undoRedoService.enabledAndBeginUndoGroupWithMarkerAndFinish('--reminder control: change to infinite interval--');\r\n\r\n        if (this.repeatInfinitely === true) {\r\n            this.repeatingAmmount.smartFields.clear();\r\n            this.repeatInfinitely = false;\r\n        }\r\n        else {\r\n            this.repeatingAmmount.smartFields.clear();\r\n            this.repeatingAmmount.smartFields.push(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                text: this.resourceService.getString('wizard_Task_Reminders_Task_Reminder_Infinite')\r\n            }));\r\n            this.repeatInfinitely = true;\r\n        }\r\n    }\r\n\r\n    showBadge(): boolean {\r\n        if (this.actionTypeKey !== 3) {\r\n            return false;\r\n        }\r\n\r\n        if (isUndefinedOrNull(this.deadlineObject)) {\r\n            return false;\r\n        }\r\n\r\n        return this.hasTaskDeadline === true;\r\n    }\r\n\r\n    reminderButtonClicked(): void {\r\n        this.toggleRulesDesigner.emit(this.deadlineObject);\r\n    }\r\n\r\n    intervalDropDownItemSelected(dropdownItem: IDropDownMenuItem): void {\r\n        this.onActionTypeChanged.emit(dropdownItem);\r\n    }\r\n\r\n    getModelForBadge(): sourceCode.k2Designer.objectModel.core.model.IValidatedComponent {\r\n        switch (this.deadlineObject.actionType) {\r\n            case DeadlineActionType.EmailEscalationAction:\r\n                return this.deadlineObject.deadlineEmailAction;\r\n            case DeadlineActionType.RedirectEscalationAction:\r\n                return this.deadlineObject.deadlineRedirectAction;\r\n            case DeadlineActionType.SmartObjectEscalationAction:\r\n                return this.deadlineObject.deadlineSmoAction;\r\n            default:\r\n                console.error('Unknown deadline action type while trying to find out if we should badge the button. deadlineObject.actionType: ', this.deadlineObject.actionType);\r\n                throw 'Unknown deadline action type while trying to find out if we should badge the button. deadlineObject.actionType: ' + this.deadlineObject.actionType;\r\n        }\r\n    }\r\n\r\n    checkedChanged(checked: boolean): void {\r\n        this.deadlineObject.withinWorkingHoursOnly = checked;\r\n    }\r\n}\r\n","<div class=\"reminder-control\" [ngClass]=\"{'reminder-control-redirect-style' : reminderMode === deadlineActionType.RedirectEscalationAction,\r\n     'reminder-control-smo-style' : reminderMode === deadlineActionType.SmartObjectEscalationAction}\">\r\n    <k2-badges class=\"badge-item\" [k2Model]=\"deadlineObject.actionType === deadlineActionType.EmailEscalationAction ? deadlineObject.deadlineEmailAction : deadlineObject.deadlineRedirectAction\">\r\n    </k2-badges>\r\n    <!--Header-->\r\n    <div class=\"reminder-heading\" (click)=\"selectedRowIndex = null\">\r\n        <div class=\"icon-heading\">\r\n            <span class=\"{{headingIcon}}\" [class.is-disabled]=\"isSelected\">\r\n            </span>\r\n        </div>\r\n        <k2-click-to-edit class=\"text-heading\" [model]=\"headingText\">\r\n        </k2-click-to-edit>\r\n    </div>\r\n    <!--Content-->\r\n    <div class=\"reminder-content\">\r\n        <div class=\"reminder-content-row command-drawer\" [class.dynamic]=\"deadlineObject.dynamicWorkingHours.isDynamic\">\r\n            <div class=\"command-drawer-content\">\r\n                <div [class.is-disabled]=\"actionTypeKey === reminderActionType.Before || workingHoursDisabled === true\" class=\"reminder-container\">\r\n                    <span>\r\n                        {{contentDescription}}\r\n                    </span>\r\n                    <k2-choose-control-v2 class=\"redirect-control\"\r\n                                          id=\"reminder_{{deadlineObject.internalId}}\"\r\n                                          [type]=\"chooseControlTypes.checkbox\"\r\n                                          [displayText]=\"getFromResx('Wizards', 'wizard_Task_Reminder_Email_Redirect_Description')|async\"\r\n                                          [checked]=\"deadlineObject.withinWorkingHoursOnly\"\r\n                                          [name]=\"deadlineObject.withinWorkingHoursOnly\"\r\n                                          [labelTemplate]=\"chooseControlTemplates.chooseControlWithinWorkingHours\"\r\n                                          [selectedValue]=\"getSelectedWorkingHoursText()\"\r\n                                          [additionalDropdownItems]=\"workingHoursDropdownItems\"\r\n                                          [footerItems]=\"workingHoursFooterItems\"\r\n                                          [isDarkStyle]=\"true\"\r\n                                          [modelValue]=\"deadlineObject.dynamicWorkingHours\"\r\n                                          [isDynamicMode]=\"deadlineObject.dynamicWorkingHours.isDynamic\"\r\n                                          (checkedChange)=\"checkedChanged($event)\">\r\n                    </k2-choose-control-v2>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--After / On Date / Before-->\r\n        <div class=\"reminder-content-row\">\r\n            <div class=\"left-content\">\r\n                <k2-drop-down class=\"height dropdown-inline\"\r\n                              [menuItems]=\"intervalDropdownFields\"\r\n                              [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                              [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                              (onItemSelected)=\"intervalDropDownItemSelected($event)\">\r\n                    <div class=\"desc-content\">\r\n                        <span>\r\n                            {{actionTypeTitle}}\r\n                        </span>\r\n                    </div>\r\n                    <k2-badges [forceShow]=\"showBadge()\" [toolTipText]=\"getFromResx('Wizards', 'workflow_wizard_Task_Reminders_ErrorBadge')|async\">\r\n                    </k2-badges>\r\n                    <div class=\"icon-content-dd\">\r\n                        <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\">\r\n                        </span>\r\n                    </div>\r\n                </k2-drop-down>\r\n            </div>\r\n            <div class=\"right-content\">\r\n                <div *ngIf=\"actionTypeKey === reminderActionType.After || actionTypeKey === reminderActionType.Before\">\r\n                    <k2-time-span [daysExpression]=\"beforeOrAfterIntervalDays\"\r\n                                  [hoursExpression]=\"beforeOrAfterIntervalHours\"\r\n                                  [minutesExpression]=\"beforeOrAfterIntervalMins\"\r\n                                  [secondsExpression]=\"beforeOrAfterIntervalSecs\"\r\n                                  [hideLabels]=\"true\"\r\n                                  [noBorder]=\"true\">\r\n                    </k2-time-span>\r\n                </div>\r\n                <div *ngIf=\"actionTypeKey === reminderActionType.On\">\r\n                    <k2-list-item class=\"k2-list-item-repeat-padding date-picker-relative\"\r\n                                  [isEditable]=\"true\"\r\n                                  [listItemModel]=\"onDateInterval\"\r\n                                  [textProperty]=\"title\"\r\n                                  [shouldAllowDrop]=\"true\"\r\n                                  [rightIconData]=\"calenderRightIconData\"\r\n                                  (rightIconClicked)=\"openCalendarControl($event)\"\r\n                                  [watermark]=\"getFromResx('Wizards', 'general_DropSelect')|async\">\r\n                    </k2-list-item>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--Interval -->\r\n        <div class=\"reminder-content-row\" *ngIf=\"repeatReminder && (actionTypeKey === reminderActionType.Before || actionTypeKey === reminderActionType.On)\">\r\n            <div class=\"left-content\">\r\n                <div class=\"height\">\r\n                    <div class=\"desc-content\">\r\n                        {{getFromResx('Wizards', 'wizard_Task_Reminders_Interval')|async}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"right-content\">\r\n                <k2-time-span [daysExpression]=\"repeatingIntervalDays\"\r\n                              [hoursExpression]=\"repeatingIntervalHours\"\r\n                              [minutesExpression]=\"repeatingIntervalMins\"\r\n                              [secondsEpression]=\"repeatingIntervalSecs\"\r\n                              [hideLabels]=\"true\"\r\n                              [noBorder]=\"true\">\r\n                </k2-time-span>\r\n            </div>\r\n        </div>\r\n        <!--Repetitions -->\r\n        <div class=\"reminder-content-row\" *ngIf=\"repeatReminder\">\r\n            <div class=\"left-content\">\r\n                <div class=\"height\">\r\n                    <div class=\"desc-content\">\r\n                        {{getFromResx('Wizards', 'wizard_Task_Reminders_Repetitions')|async}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"right-content\">\r\n                <k2-list-item [listItemModel]=\"repeatingAmmount\"\r\n                              [isEditable]=\"!repeatInfinitely\"\r\n                              [rightIconData]=\"intervalRightIconData\"\r\n                              (rightIconClicked)=\"toggleInfiniteInterval($event)\"\r\n                              [shouldAllowDrop]=\"true\"\r\n                              [textBoxConstraint]=\"textBoxConstraint.Number\">\r\n                </k2-list-item>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!--Footer-->\r\n    <div class=\"reminder-footer\">\r\n        <!--Repeat reminder-->\r\n        <span *ngIf=\"reminderMode !== deadlineActionType.RedirectEscalationAction\"\r\n              class=\"reminder-footer-padding repeat-icon icon icon-set-togglebuttons icon-size16 ic-infinitetoggle\"\r\n              (click)=\"repeatReminder = !repeatReminder\">\r\n        </span>\r\n        <!--Open 3rd panel :/-->\r\n        <k2-badges class=\"badge-item\" [k2Model]=\"getModelForBadge()\">\r\n        </k2-badges>\r\n        <button class=\"reminder-footer-padding call-back-button button pull-right\" (click)=\"reminderButtonClicked()\">\r\n            {{reminderButtonText}}\r\n        </button>\r\n    </div>\r\n</div>\r\n","import { AfterViewInit, Component, EventEmitter, Input, OnInit, Output, QueryList, ViewChildren } from '@angular/core';\r\nimport { IDataField } from '../../../../types/models/data-field/i-data-field';\r\nimport { IChooseCreateChangeOutcomeContext } from '../../../../types/models/popup/i-choose-create-change-outcome-context';\r\nimport { IItemReference } from '../../../../types/models/process/item-references/i-item-reference';\r\nimport { IOutcome } from '../../../../types/models/process/outcomes/i-outcome';\r\nimport { IListItemIconData } from '../../../../types/uiComponents/list-item/i-list-item-icon-data';\r\nimport { IContextPopupConfiguration } from '../../../../types/uiComponents/pluginWizards/i-context-popup-configuration';\r\nimport { ISaveReferencePopupReturnData } from '../../../../types/uiComponents/pluginWizards/i-save-reference-popup-return-data';\r\nimport { ISmartFieldContext } from '../../../../types/uiComponents/pluginWizards/i-smart-field-context';\r\nimport { IValidatedComponent } from '../../../../types/validation/i-validated-component';\r\nimport { PopupService } from '../../../services/popup/popup.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { keyCodes } from '../../../shared/constants/general';\r\nimport { listItemIcons } from '../../../shared/constants/list-item';\r\nimport { popup } from '../../../shared/constants/wizard-popup';\r\nimport { PopupTemplate } from '../../../shared/enums/popup/popup-template';\r\nimport { ReferenceTypes } from '../../../shared/enums/references/reference-types';\r\nimport { isUndefinedOrNull } from '../../../shared/utils/general';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\nimport { ListItemComponent } from '../list-item/list-item.component';\r\n\r\n@Component({\r\n    selector: 'k2-save-reference',\r\n    templateUrl: './save-reference.component.html',\r\n    styleUrls: ['./save-reference.component.less']\r\n})\r\nexport class SaveReferenceComponent extends BaseResourceComponent implements OnInit, AfterViewInit {\r\n\r\n    /**\r\n     * The object representing the selected reference\r\n     */\r\n    @Input() selectedObject: IItemReference | IOutcome | IDataField | IValidatedComponent;\r\n\r\n    /**\r\n     * Property name for the title of selected object (defaults to 'title')\r\n     */\r\n    @Input() titleProperty = 'title';\r\n\r\n    /**\r\n     * Show 'choose existing option' link\r\n     */\r\n    @Input() shouldShowChooseOption = false;\r\n\r\n    /**\r\n     * Show 'edit' link\r\n     */\r\n    @Input() shouldShowEdit = false;\r\n\r\n    /**\r\n     * Disable component functionality\r\n     */\r\n    @Input() isDisabled = false;\r\n\r\n    /**\r\n     * Flag to indicate if a badge should be displayed (result is required)\r\n     */\r\n    @Input() isInError = false;\r\n\r\n    /**\r\n     * Tooltip text to display for badge that is shown (if isInError is true)\r\n     */\r\n    @Input() badgeTooltip: string;\r\n\r\n    /**\r\n     * Sub text to display underneath selected reference title\r\n     */\r\n    @Input() subText: string;\r\n\r\n    /**\r\n     * The original title value of the reference before any editing\r\n     */\r\n    @Input() originalValue: string;\r\n\r\n    /**\r\n     * Before the selected reference text is set, it will be validated against this model if specified\r\n     */\r\n    @Input() validationArray: sourceCode.k2Designer.objectModel.core.model.IModelArray<any>;\r\n\r\n    /**\r\n     * Template for popup that displays when selecting existing reference\r\n     */\r\n    @Input() referencePopupTemplate: PopupTemplate;\r\n\r\n    /**\r\n     * Popup heading for the choose-outcome dialog\r\n     */\r\n    @Input() dialogHeading: string;\r\n\r\n    /**\r\n     * List of outcomes to select from in the choose-outcome dialog\r\n     */\r\n    @Input() dialogObjectList: IOutcome[] | IItemReference[] | IDataField[] | IValidatedComponent[];\r\n\r\n    /**\r\n     * The type of reference saved (Outcome, ItemReference, DataField, Other)\r\n     */\r\n    @Input() referenceType: ReferenceTypes = ReferenceTypes.Other;\r\n\r\n    @Input() customIconClass = '';\r\n\r\n    /**\r\n     * Event emitter for new reference creation\r\n     */\r\n    @Output() referenceCreated = new EventEmitter<void>();\r\n\r\n    /**\r\n     * Event emitter for value changed event\r\n     * (emits true if value was reset to original)\r\n     */\r\n    @Output() valueChanged = new EventEmitter<{ wasReset: boolean; changedReference: IOutcome | IItemReference | IValidatedComponent}>();\r\n\r\n    /**\r\n     * Is reference in edit state?\r\n     */\r\n    isEditing: boolean;\r\n\r\n    /**\r\n     * Has the reference name been updated?\r\n     * To determine if name can be reset.\r\n     */\r\n    hasValueChanged: boolean;\r\n\r\n    /**\r\n     * List item child component used to display reference\r\n     * In ViewChildren QueryList, to subscribe and ensure it is loaded when used.\r\n     */\r\n    @ViewChildren('referenceListItem') listItems: QueryList<ListItemComponent>;\r\n    listItem: ListItemComponent;\r\n    leftIconData: IListItemIconData = listItemIcons.votingIcon;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        private popupService: PopupService    ) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        //Set list item icon-template according to reference type\r\n        switch (this.referenceType) {\r\n            case ReferenceTypes.Outcome:\r\n                this.leftIconData = listItemIcons.votingIcon;\r\n                break;\r\n            case ReferenceTypes.ItemReference:\r\n                this.leftIconData = listItemIcons.referenceIcon;\r\n                break;\r\n            case ReferenceTypes.DataField:\r\n                this.leftIconData = listItemIcons.dataFieldIcon;\r\n                //DataField icon changes depending on type\r\n                this.leftIconData.iconClass = this.customIconClass;\r\n                break;\r\n            case ReferenceTypes.Other:\r\n            default:\r\n                this.leftIconData = listItemIcons.votingIcon;\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.listItem = this.listItems?.first;\r\n\r\n        this.listItems?.changes.subscribe((components: QueryList<ListItemComponent>) => {\r\n            this.listItem = components.first;\r\n        });\r\n    }\r\n\r\n    ngOnChanges(changes) {\r\n        if (changes.customIconClass && this.referenceType === ReferenceTypes.DataField) {\r\n            this.leftIconData = {\r\n                iconClass: this.customIconClass || 'header-dd datafield-icon icon icon-size16 icon-set-datatypes selected ic-text',\r\n                isWrappedInContentDiv: true,\r\n                isVertical: true,\r\n                customClassFlexRow: 'reference-icon-background'\r\n            };\r\n        }\r\n    }\r\n\r\n    createNewReference(): void {\r\n        //User selected to create new default expired reference\r\n        this.referenceCreated.emit();\r\n    }\r\n\r\n    /**\r\n     * Opens the save reference dialog.\r\n     * Dialog displayed is determined by template input of save reference component.\r\n     */\r\n    showDialog(): void {\r\n        if (this.isDisabled) {\r\n            return;\r\n        }\r\n\r\n        const popupConfig: IContextPopupConfiguration = {\r\n            buttons: {\r\n                okButton: {\r\n                    key: popup.buttons.ok,\r\n                    text: this.getString('workflow_contextPopup_okButton'),\r\n                    visible: true,\r\n                    dismissResult: popup.buttons.okResult,\r\n                    invokeValidation: true\r\n                }\r\n            },\r\n            context: {\r\n                contextObjectList: this.dialogObjectList,\r\n                selectedItem: this.selectedObject,\r\n                titleProperty: this.titleProperty\r\n            } as IChooseCreateChangeOutcomeContext | ISmartFieldContext,\r\n            heading: this.dialogHeading,\r\n            modal: true,\r\n            onClosed: (key: string, dismissResult: string) => {\r\n                if (dismissResult === popup.buttons.okResult) {\r\n                    this.changeReference(popupConfig.returnData);\r\n                }\r\n            },\r\n            validationModel: [],\r\n            template: this.referencePopupTemplate\r\n        };\r\n\r\n        this.popupService.show(popupConfig);\r\n    }\r\n\r\n    /**\r\n     * Focus textbox to enable the user to edit the entered value\r\n     */\r\n    onEdit(): void {\r\n        this.isEditing = true;\r\n        this.listItem?.simpleTextInput?.doFocus();\r\n    }\r\n\r\n    /**\r\n     * This method is used to reset name entered by the user\r\n     */\r\n    onReset(): void {\r\n        this.isEditing = false;\r\n\r\n        this.selectedObject[this.titleProperty] = this.originalValue;\r\n\r\n        this.valueChanged.emit({\r\n            wasReset: true,\r\n            changedReference: this.selectedObject\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Callback method from popup when reference is changed and popup dismissed\r\n     *\r\n     * @param selectedReference\r\n     */\r\n    changeReference(referenceReturnData: ISaveReferencePopupReturnData): void {\r\n\r\n        if (referenceReturnData.isNewReference) {\r\n            //Let parent know a new reference should be created\r\n            this.referenceCreated.emit();\r\n            return;\r\n        }\r\n\r\n        this.selectedObject = referenceReturnData.selectedReference;\r\n        this.processValueChanged();\r\n    }\r\n\r\n    onInputKeyPressed(keyCode: number): void {\r\n        if (keyCode === keyCodes.ENTER) {\r\n            this.processValueChanged();\r\n        }\r\n    }\r\n\r\n    onInputBlurred(target: EventTarget): void {\r\n        this.processValueChanged();\r\n    }\r\n\r\n    /**\r\n     * Checks if value differs from original value, to hide/show 'Reset Name'\r\n     * Emits value changed event\r\n     * */\r\n    private processValueChanged(): void {\r\n        if (!this.selectedObject) {\r\n            //None selected (if original value also empty, emit true for reset to original)\r\n            this.hasValueChanged = !isUndefinedOrNull(this.originalValue) || this.originalValue !== '';\r\n        } else {\r\n            if (this.selectedObject[this.titleProperty] !== this.originalValue) {\r\n                this.selectedObject[this.titleProperty] = this.selectedObject[this.titleProperty]?.toString().trimEnd() || '';\r\n                this.hasValueChanged = true;\r\n            }\r\n            else {\r\n                //Reset back to original\r\n                this.hasValueChanged = false;\r\n            }\r\n        }\r\n        this.valueChanged.emit({\r\n            wasReset: !this.hasValueChanged,\r\n            changedReference: this.selectedObject\r\n        });\r\n    }\r\n\r\n}\r\n","<div class=\"save-reference-control\">\r\n    <div class=\"control-content\">\r\n        <div *ngIf=\"!selectedObject\" class=\"actions\" [class.is-disabled]=\"isDisabled\">\r\n            <a href=\"javascript:void(0)\"\r\n               k2-tab-index\r\n               [disabled]=\"isDisabled\"\r\n               class=\"hyperlink-control primary\"\r\n               [class.is-disabled]=\"isDisabled\"\r\n               (click)=\"createNewReference()\"\r\n               [innerHTML]=\"getString('save_reference_control_create')\">\r\n            </a>\r\n            <a href=\"javascript:void(0)\"\r\n               k2-tab-index\r\n               [disabled]=\"isDisabled\"\r\n               class=\"hyperlink-control secondary\"\r\n               [class.is-disabled]=\"isDisabled\"\r\n               (click)=\"showDialog()\"\r\n               *ngIf=\"shouldShowChooseOption\"\r\n               [innerHTML]=\"getString('save_reference_control_choose')\">\r\n            </a>\r\n            <k2-badges class=\"badge-item\"\r\n                       [forceShow]=\"isInError\"\r\n                       [toolTipText]=\"badgeTooltip\"></k2-badges>\r\n        </div>\r\n        <k2-list-item #referenceListItem\r\n                      *ngIf=\"selectedObject\"\r\n                      [isEditable]=\"true\"\r\n                      [shouldAllowDrop]=\"false\"\r\n                      [shouldShowDropDown]=\"false\"\r\n                      [listItemModel]=\"selectedObject\"\r\n                      [textProperty]=\"titleProperty\"\r\n                      [isSelectable]=\"false\"\r\n                      [subText]=\"subText\"\r\n                      [validationArray]=\"validationArray\"\r\n                      [shouldAlwaysHideBadge]=\"true\"\r\n                      [leftIconData]=\"leftIconData\"\r\n                      (inputKeyPressed)=\"onInputKeyPressed($event)\"\r\n                      (textBoxBlurred)=\"onInputBlurred($event)\">\r\n        </k2-list-item>\r\n    </div>\r\n    <div class=\"control-footer\">\r\n        <span *ngIf=\"selectedObject && shouldShowChooseOption\"\r\n              class=\"hyperlink-control primary\"\r\n              (click)=\"showDialog()\"\r\n              [innerHTML]=\"getString('save_reference_control_change')\">\r\n        </span>\r\n        <span *ngIf=\"selectedObject && shouldShowEdit\"\r\n              class=\"hyperlink-control primary pull-right\"\r\n              (click)=\"onEdit()\"\r\n              [innerHTML]=\"getString('save_reference_control_edit')\">\r\n        </span>\r\n        <span *ngIf=\"selectedObject && hasValueChanged\"\r\n              class=\"reset-padding hyperlink-control primary pull-right\"\r\n              (click)=\"onReset()\"\r\n              [innerHTML]=\"getString('save_reference_control_reset')\">\r\n        </span>\r\n    </div>\r\n    <k2-badges class=\"badge-item\" [k2Model]=\"selectedObject\"></k2-badges>\r\n</div>\r\n","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, EventEmitter, HostListener, Input, NgZone, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { fromEvent, Observable, Subject, Subscription, throttleTime } from 'rxjs';\r\nimport { ScrollEvent } from 'src/types/events/scrollbar/scroll.event';\r\nimport { EventNotifierService } from 'src/app/services/event-notifier/event-notifier.service';\r\nimport { ScrollbarEventType } from 'src/app/shared/enums/scroll-bar/scroll-bar-event-type';\r\nimport { isUndefinedOrNull, debounce } from 'src/app/shared/utils/general';\r\nimport { scrollbar } from '../../../shared/constants/scroll-bar';\r\nimport { debounceTime } from 'rxjs';\r\nimport { inputDebounceTime } from '../../../shared/constants/general';\r\n\r\n/**\r\n * Constant for minimum scroll dragger size (34px)\r\n */\r\nconst MINSCROLLSIZE = 34;\r\n\r\n/**\r\n * Constant for the scroll event name\r\n */\r\nconst SCROLLEVENTNAME = scrollbar.events.scrollEvent;\r\nconst MOUSESCROLLEVENTNAME = scrollbar.events.mouseScrollEvent;\r\n\r\n@Component({\r\n    selector: '[k2-scrollbar]',\r\n    templateUrl: './scrollbar.component.html',\r\n    styleUrls: ['./scrollbar.component.less']\r\n})\r\nexport class ScrollbarComponent implements OnInit, AfterViewInit, OnDestroy {\r\n    public static SCROLL_SPEED = 35;\r\n    public static THROTTLE_TIME = 200;\r\n    public static WHEEL_DIRECTION_UP = 'UP';\r\n    public static WHEEL_DIRECTION_DOWN = 'DOWN';\r\n\r\n    @Input() public scrollbarVisible: boolean;\r\n    @Input() public scrollbarVisibleHorizontal: boolean;\r\n    /*A boolean value indicating whether or not a horizonatal scrollbar should be present. Defaults to false*/\r\n    @Input() public horizontal = false;\r\n    /*A boolean value indicating whether or not a vertical scrollbar should be present. Defaults to true*/\r\n    @Input() public vertical = true;\r\n    /*Either a string value of dark or light which represents the shade of the scrollbar*/\r\n    @Input() public shade: string;\r\n    /*A value that adds an extra amount of space in pixels to the height of the inner scroll container*/\r\n    @Input() public extraHeight: number;\r\n    /*A value that adds an extra amount of space in pixels to the width of the inner scroll container*/\r\n    @Input() public extraWidth: number;\r\n\r\n    @Output() public scrollBarInit = new EventEmitter();\r\n    /**\r\n     * Flag to show that the scroller is set to minimum (34px), because of too many items in the containter.\r\n     */\r\n    isMinimumScrollSize: boolean;\r\n    isMinimumScrollSizeHorizontal: boolean;\r\n\r\n    @ViewChild('transcludeContainer') _transcludedContainer: ElementRef<HTMLElement>;\r\n    @ViewChild('scroller') _scroller: ElementRef;\r\n    @ViewChild('scrollcontainer') _scrollcontainer: ElementRef;\r\n    @ViewChild('scrollerHorizontal') _scrollerHorizontal: ElementRef;\r\n    @ViewChild('scrollerContainerHorizontal') _scrollerContainerHorizontal: ElementRef;\r\n\r\n    private _dragger: IScrollBarDragger;\r\n    private _draggerHorizontal: IScrollBarDraggerHorizontal;\r\n    private _page;\r\n\r\n    public scrollboxStyle;\r\n    public draggerStyle;\r\n    public draggerLineStyle;\r\n    public pageStyle;\r\n\r\n    private _scrollboxStyleHorizontal;\r\n    public draggerStyleHorizontal;\r\n    public draggerLineStyleHorizontal;\r\n\r\n    private _lastOffsetY: number;\r\n    private _lastOffsetX: number;\r\n    private _rebuildTimer: number;\r\n    //used to determine if bar is being scroll up or down\r\n    private _previousScrollTop = 0;\r\n    private _scrollDisplayTimeOut = 0;\r\n    private _immobilize = false;\r\n    private _domMutationObserver;\r\n    private _horizontalDrag = false;\r\n    private _verticalDrag = false;\r\n\r\n    private _mouseMoveEvent: Subscription;\r\n    private scrollEvent: EventEmitter<ScrollEvent>;\r\n    private mouseScrollEvent: EventEmitter<ScrollEvent>;\r\n    private scrollEventSub: Subscription;\r\n    private mouseWheelSub: Subscription;\r\n\r\n    constructor(\r\n        private el: ElementRef<HTMLElement>,\r\n        private eventService: EventNotifierService,\r\n        private zone: NgZone,\r\n        private changeDetectorRef: ChangeDetectorRef) { }\r\n\r\n    ngOnInit(): void {\r\n        this.initializeVariables();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this._domMutationObserver?.disconnect();\r\n        this.scrollEventSub?.unsubscribe();\r\n        this.mouseWheelSub?.unsubscribe();\r\n        this._dragOverEventSub?.unsubscribe();\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        // Wait a tick to avoid one-time devMode\r\n        // unidirectional-data-flow-violation error\r\n        setTimeout(() => {\r\n            this.initializeScrollbar();\r\n            //Bind events\r\n            this.bind();\r\n        }, 0);\r\n    }\r\n\r\n    private initializeVariables(): void {\r\n        if (this.shade === null || this.shade === undefined) {\r\n            this.shade = 'dark';\r\n        }\r\n\r\n        if (this.vertical === null || this.vertical === undefined) {\r\n            this.vertical = true;\r\n        }\r\n\r\n        this._dragger = {\r\n            top: 0,\r\n            height: 0,\r\n            preAdjustedHeight: 0,\r\n            trackHeight: 0\r\n        };\r\n        this._draggerHorizontal = {\r\n            left: 0,\r\n            width: 0,\r\n            preAdjustedWidth: 0,\r\n            trackWidth: 0\r\n        };\r\n        this._page = {\r\n            height: 0,\r\n            innerWidth: 0,\r\n            position: 'relative'\r\n        };\r\n\r\n        this.scrollboxStyle = {};\r\n        this.draggerStyle = {};\r\n        this.draggerLineStyle = {};\r\n        this.pageStyle = {};\r\n\r\n        this._scrollboxStyleHorizontal = {};\r\n        this.draggerStyleHorizontal = {};\r\n        this.draggerLineStyleHorizontal = {};\r\n\r\n        this._lastOffsetY = 0;\r\n        this._lastOffsetX = 0;\r\n        this._rebuildTimer = 0;\r\n\r\n        this.scrollEvent = this.eventService.addEvent(SCROLLEVENTNAME);\r\n        this.mouseScrollEvent = this.eventService.addEvent(MOUSESCROLLEVENTNAME);\r\n\r\n    }\r\n\r\n    private bind(): void {\r\n\r\n\r\n        $(window).on('resize', debounce(() => {\r\n            this.reinitializeScrollbar();\r\n        }, ScrollbarComponent.THROTTLE_TIME));\r\n\r\n        //listens to the child emit and scrolls parent scrollbar if the child scrollbar hits the top or bottom\r\n        this.scrollEventSub = this.eventService.subscribe(SCROLLEVENTNAME, (event: ScrollEvent) => {\r\n            this.delegateScrollToParent(event);\r\n        });\r\n\r\n        this._domMutationObserver = new MutationObserver((mutations) => {\r\n            this.reinitializeScrollbar();\r\n            for (let i = 0; i < mutations.length; i++) {\r\n                if (mutations[i].addedNodes && mutations[i].addedNodes.length > 0) {\r\n                    this.mutationObserved(mutations[i].addedNodes);\r\n                }\r\n            }\r\n        });\r\n\r\n        this.zone.runOutsideAngular(() => {\r\n            this.mouseWheelSub = fromEvent(this._transcludedContainer.nativeElement, 'mousewheel')\r\n                .pipe(throttleTime(scrollbar.autoScrollDelay)) // only trigger the scrolling every 100ms\r\n                .subscribe((event: DragEvent) => this.mouseScrollHandler(event));\r\n        });\r\n\r\n        this._domMutationObserver.observe(this._transcludedContainer.nativeElement, { childList: true, subtree: true });\r\n    }\r\n\r\n    public onScrollTranscludedContainer(event: any): void {\r\n\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n\r\n        //Calculate the new position of the dragger\r\n        //For vertical, use scrollTop (top position it is currently scrolled to), divided by scrollHeight (entire height of scrollable area),\r\n        //multiplied by container height (visible height of container)\r\n        //Top for vertical scrolling, Left for horizontal scrolling\r\n        let containerHeight = $(this._transcludedContainer.nativeElement).height();\r\n        let containerWidth = $(this._transcludedContainer.nativeElement).width();\r\n        //When minimum scrolling size is used, take into account that the scroll handler size is no longer\r\n        //an exact percentage of the container size and adjust container size\r\n        if (this.isMinimumScrollSize) {\r\n            containerHeight = containerHeight - MINSCROLLSIZE - this._dragger.preAdjustedHeight;\r\n        }\r\n        if (this.isMinimumScrollSizeHorizontal) {\r\n            containerWidth = containerWidth - MINSCROLLSIZE - this._draggerHorizontal.preAdjustedWidth;\r\n        }\r\n        const top = ($(this._transcludedContainer.nativeElement).scrollTop() / $(this._transcludedContainer.nativeElement)[0].scrollHeight) * containerHeight;\r\n        const left = ($(this._transcludedContainer.nativeElement).scrollLeft() / $(this._transcludedContainer.nativeElement)[0].scrollWidth) * containerWidth;\r\n\r\n        if (top < this._previousScrollTop) {\r\n            //scroll up\r\n            this._dragger.top = Math.min(this._dragger.top, top);\r\n        }\r\n        else {\r\n            //scroll down\r\n            this._dragger.top = Math.max(this._dragger.top, top);\r\n        }\r\n\r\n        this._draggerHorizontal.left = Math.max(this._draggerHorizontal.left, Math.round(left));\r\n\r\n        this.scrollTo(this._draggerHorizontal.left, this._dragger.top);\r\n\r\n        //update previous scroll top\r\n        this._previousScrollTop = this._dragger.top;\r\n\r\n        if (this._scrollDisplayTimeOut > 0) {\r\n            clearTimeout(this._scrollDisplayTimeOut);\r\n        }\r\n        $(this.el.nativeElement).find('.k2-scrollbar-wrap').addClass('scrolling');\r\n        this._scrollDisplayTimeOut = window.setTimeout(() => {\r\n            $(this.el.nativeElement).find('.k2-scrollbar-wrap').removeClass('scrolling');\r\n        }, 400);\r\n\r\n    }\r\n\r\n    private mutationObserved(addedNodes: NodeList) {\r\n        for (let i = 0; i < addedNodes.length; i++) {\r\n            if (addedNodes[i] instanceof HTMLElement) {\r\n                const newElement: HTMLElement = addedNodes[i] as HTMLElement;\r\n                const isFocusOnInserted: Boolean = (!isUndefinedOrNull($(newElement).attr('k2-scrollbar-focus'))\r\n                    || !isUndefinedOrNull($(newElement).attr('data-k2-scrollbar-focus')));\r\n                const k2ScrollbarFocus: ng.IAugmentedJQuery = <ng.IAugmentedJQuery>($(newElement).find('[k2-scrollbar-focus]')\r\n                    || $(newElement).find('[data-k2-scrollbar-focus]'));\r\n\r\n                if (k2ScrollbarFocus.length > 0) {\r\n                    for (let i = 0; i < k2ScrollbarFocus.length; i++) {\r\n                        this.scrollToElement(k2ScrollbarFocus[i]);\r\n                        break;\r\n                    }\r\n                }\r\n                else if (isFocusOnInserted) {\r\n                    this.scrollToElement(newElement);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private delegateScrollToParent(event: ScrollEvent): boolean {\r\n        if (this.el === event.source || !this.el.nativeElement.contains(event.source?.nativeElement)) {\r\n            //do not scroll self (we only want to scroll parent)\r\n            return;\r\n        }\r\n        else {\r\n            switch (event.type) {\r\n                case (ScrollbarEventType.up):\r\n                //scroll up\r\n                    this.scrollTo(this._draggerHorizontal.left, this._dragger.top - ScrollbarComponent.SCROLL_SPEED);\r\n                    break;\r\n                case (ScrollbarEventType.down):\r\n                //scroll down\r\n                    this.scrollTo(this._draggerHorizontal.left, this._dragger.top + ScrollbarComponent.SCROLL_SPEED);\r\n                    break;\r\n                case (ScrollbarEventType.immobilize):\r\n                //listen to the child mouseover and prevent scroll together\r\n                    this._immobilize = true;\r\n                    break;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public doResize(): void {\r\n        this.reinitializeScrollbar();\r\n    }\r\n\r\n    private calculateStyles(): void {\r\n\r\n        this.scrollboxStyle = {\r\n            overflow: 'hidden',\r\n            'max-width': '100%',\r\n            height: '100%',\r\n            width: '100%'\r\n        };\r\n\r\n        if (this._page.height) {\r\n            this.scrollboxStyle.height = this._page.height + 'px';\r\n        }\r\n\r\n        //Minimum scroll size\r\n        if (this.vertical) {\r\n            if (this._dragger.height < MINSCROLLSIZE) {\r\n                //Keep a backup of what actual calculated height of dragger should be\r\n                this._dragger.preAdjustedHeight = this._dragger.height;\r\n                this._dragger.height = MINSCROLLSIZE;\r\n                this.isMinimumScrollSize = true;\r\n            }\r\n        }\r\n        if (this.horizontal) {\r\n            if (this._draggerHorizontal.width < MINSCROLLSIZE) {\r\n                //Keep a backup of what actual calculated width of dragger should be\r\n                this._draggerHorizontal.preAdjustedWidth = this._draggerHorizontal.width;\r\n                this._draggerHorizontal.width = MINSCROLLSIZE;\r\n                this.isMinimumScrollSizeHorizontal = true;\r\n            }\r\n        }\r\n\r\n        this.draggerStyle = {\r\n            position: 'absolute',\r\n            height: this._dragger.height + 'px',\r\n            top: this._dragger.top + 'px'\r\n        };\r\n\r\n        this.draggerLineStyle = {\r\n            position: 'relative',\r\n            'line-height': this._dragger.height + 'px'\r\n        };\r\n\r\n        if (this._page.width) {\r\n            this.scrollboxStyle.width = this._page.width + 'px';\r\n        }\r\n\r\n        this.draggerStyleHorizontal = {\r\n            position: 'absolute',\r\n            width: this._draggerHorizontal.width + 'px',\r\n            left: this._draggerHorizontal.left + 'px'\r\n        };\r\n\r\n        this.draggerLineStyleHorizontal = {\r\n            position: 'relative',\r\n            'line-width': this._draggerHorizontal.width + 'px'\r\n        };\r\n\r\n        this.pageStyle = {\r\n            position: 'relative',\r\n            overflow: 'hidden'\r\n        };\r\n    }\r\n\r\n    private trackClick(event): void {\r\n\r\n        const offsetY = !isUndefinedOrNull(event.offsetY) ? event.offsetY : event.layerY;\r\n        const newTop = Math.max(0, Math.min(this._dragger.trackHeight - this._dragger.height, offsetY));\r\n        this._dragger.top = newTop;\r\n        this.scrollTo(this._draggerHorizontal.left, this._dragger.top);\r\n\r\n        event.stopPropagation();\r\n    }\r\n\r\n    private trackClickHorizontal(event): void {\r\n\r\n        const offsetX = !isUndefinedOrNull(event.offsetX) ? event.offsetX : event.layerX;\r\n        const newLeft = Math.max(0, Math.min(this._draggerHorizontal.trackWidth - this._draggerHorizontal.width, offsetX));\r\n\r\n        this._draggerHorizontal.left = newLeft;\r\n        this.scrollTo(this._draggerHorizontal.left, this._dragger.top);\r\n\r\n        event.stopPropagation();\r\n    }\r\n\r\n    //type guard to check that object is of Interface IK2DropDownScope\r\n    private instanceOfDropDown(object: any): object is sourceCode.k2Designer.directives.k2DropDown.IK2DropDownScope {\r\n        return 'k2DropdownPositioning' in object;\r\n    }\r\n\r\n    private _f;\r\n    public mouseScrollHandler = (event) => {\r\n        if (this._immobilize) {\r\n            return;\r\n        }\r\n        if (this.scrollbarVisible || this.scrollbarVisibleHorizontal) {\r\n            this.scrollEvent.emit({ source: this.el, type: ScrollbarEventType.immobilize });\r\n        }\r\n\r\n        this.mouseScrollEvent.emit({ source: this.el, type: ScrollbarEventType.mouseWheel});\r\n\r\n        if (event.target.nodeName.toLowerCase() === 'textarea' || jQuery(event.target).closest('.k2-text-box-ex.multi-line').length > 0) {\r\n            let scrolltarget;\r\n\r\n            if (event.target.nodeName.toLowerCase() === 'textarea') {\r\n                scrolltarget = event.target;\r\n            }\r\n            else {\r\n                scrolltarget = jQuery(event.target).closest('.k2-text-box-ex').find('.k2-text-editor-container')[0];\r\n            }\r\n\r\n            if ((event.wheelDelta < 0 && scrolltarget.scrollTop < (scrolltarget.scrollHeight - scrolltarget.clientHeight)) // Downwards scroll when textarea is not scrolled to the very bottom\r\n                || (event.wheelDelta > 0 && scrolltarget.scrollTop > 0)) { // Upwards scroll when the textarea is not scrolled to the very top\r\n                // Exit function allowing the native behaviour\r\n                return true;\r\n            }\r\n        }\r\n\r\n        $('.datepicker').remove();\r\n\r\n        this.reinitializeScrollbar();\r\n\r\n        const o = event; let d = o.detail; const w = o.wheelDelta; const n = 225; const n1 = n - 1;\r\n\r\n        // Handles mouse scroll speed/movement (This works for firefox, where the event.wheelDelta does not.\r\n        d = d ? w && (this._f = w / d) ? d / this._f : -d / 1.35 : w / 120;\r\n        d = d < 1 ? d < -1 ? (-Math.pow(d, 2) - n1) / n : d : (Math.pow(d, 2) + n1) / n;\r\n        event.delta = Math.min(Math.max(d / 2, -1), 1);\r\n\r\n        event.delta = event.delta * ScrollbarComponent.SCROLL_SPEED;\r\n        if (this.vertical && this.scrollbarVisible) {\r\n            this._dragger.top = Math.max(0, Math.min(parseInt(this._page.height, 10) - this._dragger.height, this._dragger.top - event.delta));\r\n        } else if (this.horizontal && this.scrollbarVisibleHorizontal) {\r\n            this._draggerHorizontal.left = Math.max(0, Math.min(parseInt(this._page.width, 10) - this._draggerHorizontal.width, this._draggerHorizontal.left - event.delta));\r\n        }\r\n        this.scrollTo(this._draggerHorizontal.left, this._dragger.top);\r\n\r\n        this.checkScrollbarPosition();\r\n\r\n        if (event.preventDefault) {\r\n            event.preventDefault();\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    private checkScrollbarPosition(): void {\r\n        //if the scrollbar is all the way down\r\n        if (this._dragger.trackHeight === (this._dragger.height + this._dragger.top)) {\r\n            //then try scroll down the parent scrollbar\r\n            this.scrollEvent.emit({ source: this.el, type: ScrollbarEventType.down });\r\n        }\r\n        else if (this._dragger.top === 0) { //scrollbar is all the way to the top\r\n            //then try scroll up the parent scrollbar\r\n            this.scrollEvent.emit({ source: this.el, type: ScrollbarEventType.up });\r\n        }\r\n    }\r\n\r\n    private scrollHandleDragHandler = (event: MouseEvent) => {\r\n        if (this._verticalDrag) {\r\n            const newOffsetY = event.pageY - this._scroller.nativeElement.scrollTop - this._lastOffsetY;\r\n            this._dragger.top = Math.max(0, Math.min(this._dragger.trackHeight - this._dragger.height, newOffsetY));\r\n        } else\r\n        if (this._horizontalDrag) {\r\n            const newOffsetX = event.pageX - this._scrollerHorizontal.nativeElement.scrollLeft - this._lastOffsetX;\r\n            this._draggerHorizontal.left = Math.max(0, Math.min(this._draggerHorizontal.trackWidth - this._draggerHorizontal.width, newOffsetX));\r\n        }\r\n        if (this._horizontalDrag || this._verticalDrag) {\r\n            this.scrollTo(this._draggerHorizontal.left, this._dragger.top);\r\n            event.stopPropagation();\r\n        }\r\n    };\r\n\r\n    @HostListener('window:mouseup', ['$event'])\r\n    @HostListener('window:losecapture', ['$event'])\r\n    public onMouseUp = (event) => {\r\n        if (this._mouseMoveEvent) {\r\n            this._mouseMoveEvent.unsubscribe();\r\n\r\n            if (this._verticalDrag || this._horizontalDrag) {\r\n                this._verticalDrag = this._horizontalDrag = false;\r\n                event.stopPropagation();\r\n            }\r\n        }\r\n    };\r\n\r\n    private initializeScrollbar(): void {\r\n        this._page.height = this.el.nativeElement.offsetHeight;\r\n\r\n        if (this.extraHeight && this.extraHeight > 0) {\r\n            this._page.scrollHeight = this._transcludedContainer.nativeElement.scrollHeight + this.extraHeight;\r\n        } else {\r\n            this._page.scrollHeight = this._transcludedContainer.nativeElement.scrollHeight;\r\n        }\r\n\r\n        ///////////////////////////////////////////////////////////////////////\r\n        this._page.width = this.el.nativeElement.offsetWidth;\r\n\r\n        if (this.extraWidth && this.extraWidth > 0) {\r\n            this._page.scrollWidth = this._transcludedContainer.nativeElement.scrollWidth + this.extraWidth;\r\n        } else {\r\n            this._page.scrollWidth = this._transcludedContainer.nativeElement.scrollWidth;\r\n        }\r\n        ////////////////////////////////////////////////////////////////////////\r\n\r\n        if ((this._page.height < this._page.scrollHeight) && this.vertical) {\r\n            this.scrollbarVisible = true;\r\n            // Calculate the dragger height\r\n            const calculatedDraggerHeight = this._page.height / this._page.scrollHeight * this._page.height;\r\n\r\n            const previousDraggerHeight = this._dragger.height - calculatedDraggerHeight;\r\n\r\n            this._dragger.height = calculatedDraggerHeight;\r\n            this._dragger.trackHeight = this._page.height;\r\n\r\n            // update the transcluded content style and clear the parent's\r\n            this.calculateStyles();\r\n\r\n            if (!this.isMinimumScrollSize) {\r\n                const adjustedDraggerHeight = previousDraggerHeight - this._dragger.height;\r\n                const top_1 = Math.min(this._page.height - this._dragger.height, this._dragger.top);\r\n                const top_2 = top_1 + adjustedDraggerHeight;\r\n\r\n                this._dragger.top = Math.max(0, top_1, top_2);\r\n                this.scrollTo(this._draggerHorizontal.left, this._dragger.top);\r\n            }\r\n\r\n        } else {\r\n            this.scrollbarVisible = false;\r\n        }\r\n        // Horizontal scrollbar\r\n        if ((this._page.width < this._page.scrollWidth) && this.horizontal) {\r\n            this.scrollbarVisibleHorizontal = true;\r\n\r\n            // Calculate the dragger width\r\n            this._draggerHorizontal.width = Math.round(this._page.width / this._page.scrollWidth * this._page.width);\r\n            this._draggerHorizontal.trackWidth = this._page.width;\r\n\r\n            // update the transcluded content style and clear the parent's\r\n            this.calculateStyles();\r\n\r\n\r\n            this._draggerHorizontal.left = Math.max(0, Math.min(parseInt(this._page.width, 10) - this._draggerHorizontal.width, this._draggerHorizontal.left));\r\n            this.scrollTo(this._draggerHorizontal.left, this._dragger.top);\r\n\r\n        } else {\r\n            this.scrollbarVisibleHorizontal = false;\r\n        }\r\n    }\r\n\r\n    public reinitializeScrollbar(): void {\r\n        this._immobilize = false;\r\n        /* jshint -W116 */\r\n        if (this._rebuildTimer != null) {\r\n            clearTimeout(this._rebuildTimer);\r\n        }\r\n\r\n        const that = this;\r\n\r\n        this._rebuildTimer = window.setTimeout(function() {\r\n            that.initializeScrollbar();\r\n        }, 72);\r\n    }\r\n\r\n    public scrollTo(x: number, y: number, callback?: Function): void {\r\n        this.cleanUpScroller(x, y);\r\n\r\n        //If Horizontal scrollbar is enabled, scroll to x position\r\n        if (this.horizontal && this._page.scrollWidth > this._page.width) {\r\n            this.draggerStyleHorizontal.left = `${x}px`;\r\n            let draggerOffsetX = x / this._page.width;\r\n            if (this.isMinimumScrollSizeHorizontal) {\r\n                draggerOffsetX = x / (this._page.width - MINSCROLLSIZE - this._draggerHorizontal.preAdjustedWidth);\r\n            }\r\n            this._page.left = -Math.round(this._page.scrollWidth * draggerOffsetX);\r\n        }\r\n\r\n        //If Vertical scrollbar is enabled, scroll to y position\r\n        if (this.vertical && this._page.scrollHeight > this._page.height) {\r\n            this.draggerStyle.top = `${y}px`;\r\n            let draggerOffsetY = y / this._page.height;\r\n            if (this.isMinimumScrollSize) {\r\n                draggerOffsetY = y / (this._page.height - MINSCROLLSIZE - this._dragger.preAdjustedHeight);\r\n            }\r\n\r\n            this._page.top = -(this._page.scrollHeight * draggerOffsetY);\r\n        }\r\n\r\n        if (callback) {\r\n            callback();\r\n        }\r\n    }\r\n    private cleanUpScroller(x: number, y: number) {\r\n        y = isUndefinedOrNull(y) ? 0 : y;\r\n        x = isUndefinedOrNull(x) ? 0 : x;\r\n\r\n        this.pageStyle.overflow = 'hidden';\r\n        this.pageStyle.height = '100%';\r\n        this.pageStyle.width = '100%';\r\n\r\n        let containerHeight = $(this._transcludedContainer.nativeElement).height();\r\n        let containerWidth = $(this._transcludedContainer.nativeElement).width();\r\n        if (this.isMinimumScrollSize) {\r\n            //The dragger has a minimum size, so take that in account when calculating where to scroll to\r\n            containerHeight = containerHeight - MINSCROLLSIZE - this._dragger.preAdjustedHeight;\r\n        }\r\n        if (this.isMinimumScrollSizeHorizontal) {\r\n            containerWidth = containerWidth - MINSCROLLSIZE - this._draggerHorizontal.preAdjustedWidth;\r\n        }\r\n        const sTop = (y / containerHeight) * $(this._transcludedContainer.nativeElement)[0].scrollHeight;\r\n        const sLeft = (x / containerWidth) * $(this._transcludedContainer.nativeElement)[0].scrollWidth;\r\n        if (this.vertical) $(this._transcludedContainer.nativeElement).scrollTop(sTop);\r\n        if (this.horizontal) $(this._transcludedContainer.nativeElement).scrollLeft(sLeft);\r\n    }\r\n\r\n    public scrollToElement(element: HTMLElement, callback?: Function): void {\r\n        const timeoutId = setTimeout(() => {\r\n            clearTimeout(timeoutId);\r\n            const scrollWrapper = this.el.nativeElement;\r\n            const isExist = !isUndefinedOrNull(element) && $.contains(document.body, element);\r\n\r\n            //Check if element is ready to be scroll to.\r\n            if (isExist && element.getBoundingClientRect().width > 0) {\r\n                this.initializeScrollbar();\r\n\r\n                let x = 0;\r\n                if (scrollWrapper.getBoundingClientRect().width > element.getBoundingClientRect().width) {\r\n                    x = element.getBoundingClientRect().right - scrollWrapper.getBoundingClientRect().right - 10 > 0\r\n                        ? element.getBoundingClientRect().right - scrollWrapper.getBoundingClientRect().right - 10 : x;\r\n                    x = element.getBoundingClientRect().left - scrollWrapper.getBoundingClientRect().left < 0\r\n                        ? element.getBoundingClientRect().left - scrollWrapper.getBoundingClientRect().left : x;\r\n                }\r\n\r\n                let y = 0;\r\n                if (scrollWrapper.getBoundingClientRect().height > element.getBoundingClientRect().height) {\r\n                    y = element.getBoundingClientRect().bottom - scrollWrapper.getBoundingClientRect().bottom > 0\r\n                        ? element.getBoundingClientRect().bottom - scrollWrapper.getBoundingClientRect().bottom : y;\r\n                    y = element.getBoundingClientRect().top - scrollWrapper.getBoundingClientRect().top < 0\r\n                        ? element.getBoundingClientRect().top - scrollWrapper.getBoundingClientRect().top : y;\r\n                }\r\n\r\n                this._draggerHorizontal.left += x;\r\n                this._dragger.top += y;\r\n\r\n                this.scrollTo(this._draggerHorizontal.left, this._dragger.top, callback);\r\n            }\r\n            else if (callback) {\r\n                callback();\r\n            }\r\n\r\n        }, 0);\r\n\r\n    }\r\n\r\n    public scrollerMouseDown(event: MouseEvent) {\r\n        this._mouseMoveEvent = fromEvent(window, 'mousemove').subscribe((event: MouseEvent) => { this.scrollHandleDragHandler(event); });\r\n        this._lastOffsetY = event.pageY - this._scroller.nativeElement.offsetTop;\r\n        this._verticalDrag = true;\r\n        event.preventDefault();\r\n    }\r\n\r\n    public scrollerMouseDownHorizontal(event: MouseEvent) {\r\n        this._mouseMoveEvent = fromEvent(window, 'mousemove').subscribe((event: MouseEvent) => { this.scrollHandleDragHandler(event); });\r\n        this._lastOffsetX = event.pageX - this._scrollerHorizontal.nativeElement.offsetLeft;\r\n        this._horizontalDrag = true;\r\n        event.preventDefault();\r\n    }\r\n\r\n    public mouseEnter(event) {\r\n        //immobilize the scrollbar only if it is active\r\n        if (this.scrollbarVisible === true) {\r\n            this.scrollEvent.emit({ source: this.el, type: ScrollbarEventType.immobilize });\r\n        }\r\n\r\n        this.reinitializeScrollbar();\r\n\r\n        return false;\r\n    }\r\n\r\n    onDragEnter() {\r\n        this.zone.runOutsideAngular(() => {\r\n            this._dragOverEventSub = fromEvent(this._transcludedContainer.nativeElement, 'dragover')\r\n                .pipe(throttleTime(scrollbar.autoScrollDelay)) // only trigger the scrolling every 100ms\r\n                .subscribe((event: DragEvent) => this.onDragOver(event));\r\n        });\r\n    }\r\n\r\n    onDragLeave() {\r\n        this._dragOverEventSub?.unsubscribe();\r\n        this._dragOverEventSub = null;\r\n    }\r\n\r\n    private _dragOverEventSub: Subscription;\r\n    onDragOver(event: DragEvent) {\r\n        let delta;\r\n        const bounds = this._transcludedContainer.nativeElement.getBoundingClientRect();\r\n        const mouseRelativeX = event.x - bounds.x;\r\n        const mouseRelativeY = event.y - bounds.y;\r\n        if (this.vertical && this.scrollbarVisible) {\r\n            if (mouseRelativeY < scrollbar.autoScrollRegionSize) {\r\n                delta = ScrollbarComponent.SCROLL_SPEED;\r\n            } else if (mouseRelativeY > (this._transcludedContainer.nativeElement.clientHeight - scrollbar.autoScrollRegionSize)) {\r\n                delta = -ScrollbarComponent.SCROLL_SPEED;\r\n            } else {\r\n                return true;\r\n            }\r\n            this._dragger.top = Math.max(0, Math.min(parseInt(this._page.height, 10) - this._dragger.height, this._dragger.top - delta));\r\n        }\r\n        if (this.horizontal && this.scrollbarVisibleHorizontal) {\r\n            if (mouseRelativeX < scrollbar.autoScrollRegionSize) {\r\n                delta = ScrollbarComponent.SCROLL_SPEED;\r\n            } else if (mouseRelativeX > (this._transcludedContainer.nativeElement.clientWidth - scrollbar.autoScrollRegionSize)) {\r\n                delta = -ScrollbarComponent.SCROLL_SPEED;\r\n            } else {\r\n                return true;\r\n            }\r\n            this._draggerHorizontal.left = Math.max(0, Math.min(parseInt(this._page.width, 10) - this._draggerHorizontal.width, this._draggerHorizontal.left - delta));\r\n        }\r\n        if (delta) {\r\n            this.scrollTo(this._draggerHorizontal.left, this._dragger.top);\r\n            this.changeDetectorRef.detectChanges(); // since the entire dragover event is running outside of angular, we have to tell angular that we have changed something\r\n        }\r\n    }\r\n}\r\n","<div class=\"scrollbar\">\r\n    <div class=\"k2-scrollbar-wrap\" [ngClass]=\"{'light': shade === 'light'}\" #containerElement\r\n         [ngStyle]=\"scrollboxStyle\">\r\n        <div class=\"k2-scrollbar-container\"\r\n             (click)=\"reinitializeScrollbar\"\r\n             (scroll)=\"onScrollTranscludedContainer\"\r\n             (mousewheel)=\"mouseScrollHandler($event)\"\r\n             #transcludeContainer\r\n             [ngStyle]=\"pageStyle\"\r\n             (mouseenter)=\"mouseEnter($event)\"\r\n             (dragenter)=\"onDragEnter()\"\r\n             (dragleave)=\"onDragLeave()\">\r\n            <ng-content></ng-content>\r\n        </div>\r\n        <div class=\"k2-scrollbar-scrollbar\" *ngIf=\"scrollbarVisible\" #verticalTool>\r\n            <div class=\"k2-scrollbar-thumb-container\">\r\n                <div [ngClass]=\"{ 'k2-scrollbar-thumb-pos': true, 'small-scrollbar-thumb-pos' : isMinimumScrollSize}\"\r\n                     oncontextmenu=\"return false;\"\r\n                     [ngStyle]=\"draggerStyle\"\r\n                     (mousedown)=\"scrollerMouseDown($event)\"\r\n                     #scroller>\r\n                    <div class=\"k2-scrollbar-thumb\" #scrollcontainer [ngStyle]=\"draggerLineStyle\"></div>\r\n                </div>\r\n                <div class=\"k2-scrollbar-track\" #scrollSlideArea (click)=\"trackClick($event)\"></div>\r\n            </div>\r\n        </div>\r\n        <div class=\"k2-scrollbar-scrollbar-h\" *ngIf=\"scrollbarVisibleHorizontal\" #horizontalTool>\r\n            <div class=\"k2-scrollbar-thumb-container-h\">\r\n                <div [ngClass]=\"{ 'k2-scrollbar-thumb-pos-h' : true, 'small-scrollbar-thumb-pos-h' : isMinimumScrollSizeHorizontal }\"\r\n                     oncontextmenu=\"return false;\"\r\n                     [ngStyle]=\"draggerStyleHorizontal\"\r\n                     (mousedown)=\"scrollerMouseDownHorizontal($event)\"\r\n                     #scrollerHorizontal>\r\n                    <div class=\"k2-scrollbar-thumb-h\" #scrollerContainerHorizontal [ngStyle]=\"draggerLineStyleHorizontal\" ></div>\r\n                </div>\r\n                <div class=\"k2-scrollbar-track-h\" #scrollSlideAreaHorizontal (click)=\"trackClick($event)\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnDestroy, OnInit, Output } from '@angular/core';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\r\nimport { IValidationService } from '../../../../types/services/validation/ivalidation.service';\r\nimport { ClipboardServiceToken } from '../../../services/clipboard/clipboard-service-factory';\r\nimport { CommandServiceToken } from '../../../services/command/command-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../services/validation/validation-service-factory';\r\nimport { inputDebounceTime } from '../../../shared/constants/general';\r\nimport { BaseComponent } from '../../base/base.component';\r\n\r\n@Component({\r\n    selector: 'k2-text-area',\r\n    templateUrl: './text-area.component.html',\r\n    styleUrls: ['./text-area.component.less']\r\n})\r\nexport class TextAreaComponent extends BaseComponent implements OnInit, OnDestroy {\r\n    @Input() validationTypes: any;\r\n    @Input() value: any;\r\n    @Input() rows: number;\r\n    @Input() validationModel: any;\r\n    @Input() validationProperty: string;\r\n    @Input() isValidateError: boolean;\r\n    @Input() placeholder = '';\r\n    @Input() maxLength: number;\r\n    @Input() parentObject: sourceCode.k2Designer.objectModel.core.model.IModelObject;\r\n    @Input() watermark: string;\r\n\r\n    @Output() k2Change: EventEmitter<string> = new EventEmitter<string>();\r\n    @Output() k2Focus: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() k2Blur: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    textValueChanged: Subject<string> = new Subject<string>();\r\n    isFocus = false;\r\n\r\n    private textValueChangeSub: Subscription;\r\n\r\n    constructor(@Inject(ValidationServiceToken) validationService: IValidationService,\r\n        @Inject(ClipboardServiceToken) private clipboardService: IClipboardService,\r\n        @Inject(CommandServiceToken) private commandService: ICommandService,\r\n        @Inject(UndoRedoServiceToken) private undoRedoService: IUndoRedoService) {\r\n        super(validationService);\r\n\r\n        this.textValueChangeSub = this.textValueChanged.pipe(\r\n            debounceTime(inputDebounceTime),\r\n            distinctUntilChanged()\r\n        ).subscribe((val) => {\r\n            this.value = val;\r\n            this.modelChanged(val);\r\n        });\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (!this.validationTypes) {\r\n            this.validationTypes = [];\r\n        }\r\n        if (this.validationModel && this.validationProperty) {\r\n            this.validatePropertyOnChange(this.validationModel, this.validationProperty);\r\n        }\r\n        this.setApplicableValidationTypes(this.validationTypes);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.textValueChangeSub.unsubscribe();\r\n    }\r\n\r\n    onFocus(): void {\r\n        this.clipboardService.setCurrentContext('TextArea');\r\n        this.commandService.setCurrentContext();\r\n        this.k2Focus.emit();\r\n        this.isFocus = true;\r\n    }\r\n\r\n    onBlur(): void {\r\n        this.isFocus = false;\r\n        this.k2Blur.emit();\r\n    }\r\n\r\n    onEditorDrop(event: DragEvent): void {\r\n        if (event.stopPropagation) event.stopPropagation();\r\n        if (event.preventDefault) event.preventDefault();\r\n    }\r\n\r\n    modelChanged(val): void {\r\n        if (this.undoRedoService.isEnabled()) {\r\n            this.undoRedoService.addUndoMarker('--k2TextArea: changed text--');\r\n        }\r\n\r\n        this.k2Change.emit(val);\r\n    }\r\n}\r\n","<div>\r\n    <div k2-scrollbar class=\"textarea-scrollbar-wrapper\" [ngClass]=\"{'focus': isFocus}\">\r\n        <textarea K2Droppable\r\n                  [k2Droptypes]=\"\"\r\n                  [maxlength]=\"maxLength\"\r\n                  (focus)=\"onFocus()\"\r\n                  (blur)=\"onBlur()\"\r\n                  [rows]=\"rows\"\r\n                  [(ngModel)]=\"value\"\r\n                  (ngModelChange)='textValueChanged.next($event)'\r\n                  [placeholder]=\"placeholder\"\r\n                  ></textarea>\r\n    </div>\r\n    <k2-badges *ngIf=\"validationModel\" [k2Model]=\"validationModel\"></k2-badges>\r\n</div>\r\n","import { DOCUMENT } from '@angular/common';\r\nimport { Component, ElementRef, EventEmitter, HostListener, Inject, Input, OnChanges, OnDestroy, OnInit, Output, QueryList, SimpleChanges, ViewChild, ViewChildren } from '@angular/core';\r\nimport { asyncScheduler, Subject, Subscription } from 'rxjs';\r\nimport { debounceTime, distinctUntilChanged, throttleTime } from 'rxjs/operators';\r\nimport { EventTypes } from 'src/app/shared/enums/model/event-types';\r\nimport { IValidationService } from '../../../../types/services/validation/ivalidation.service';\r\nimport { ISmartFieldComposerOptions } from '../../../../types/uiComponents/smartFieldComposer/ISmartFieldComposerOptions';\r\nimport { ClipboardServiceToken } from '../../../services/clipboard/clipboard-service-factory';\r\nimport { CommandServiceToken } from '../../../services/command/command-service-factory';\r\nimport { DragDropService } from '../../../services/drag-drop/drag-drop.service';\r\nimport { EventNotifierService } from '../../../services/event-notifier/event-notifier.service';\r\nimport { ProcessService } from '../../../services/process/process.service';\r\nimport { SmartFieldComposerServiceToken } from '../../../services/smart-field-composer/smart-field-composer-service-factory';\r\nimport { SmartFieldPluginServiceToken } from '../../../services/smart-field-plugin/smart-field-plugin-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../services/validation/validation-service-factory';\r\nimport { ComponentIdMapping } from '../../../shared/constants/components';\r\nimport { OpenSmartFieldComposerEvent } from '../../../shared/constants/events';\r\nimport { inputDebounceTime, keyCodes } from '../../../shared/constants/general';\r\nimport { TextBoxConstraint } from '../../../shared/enums/text-box/text-box-constraint';\r\nimport { BaseComponent } from '../../base/base.component';\r\nimport { SmartFieldContainerComponent } from '../../smart-fields/smart-field-container/smart-field-container.component';\r\n\r\n@Component({\r\n    selector: 'k2-text-box',\r\n    templateUrl: './text-box.component.html',\r\n    styleUrls: ['./text-box.component.less']\r\n})\r\nexport class TextboxComponent extends BaseComponent implements OnInit, OnDestroy, OnChanges {\r\n    /*\r\n     * The expression associated with this textbox\r\n     */\r\n    @Input() public k2Expression: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IExpressionExtended;\r\n    /**\r\n     * Indicates the a drop can be applied to the textbox\r\n     */\r\n    @Input() public k2CanDrop: boolean;\r\n\r\n    @Input() public k2Validation: IValidationOptions[];\r\n\r\n    @Input() public isMultiLine = true;\r\n    @Input() public k2ShowBrowseButton = false;\r\n    @Input() public k2Watermark = '';\r\n    @Input() public k2Watermarkicon: string;\r\n    @Input() public alwaysHideBadge = false;\r\n\r\n    /**\r\n     * Indicates the type of constraint that is applied to the textbox when the user is typing\r\n     */\r\n    @Input() public textConstraint: TextBoxConstraint = TextBoxConstraint.None;\r\n\r\n    @Output() public k2TextboxOnDrop = new EventEmitter<any>();\r\n    @Output() public k2TextboxOnDragEnter = new EventEmitter<any>();\r\n    @Output() public k2TextboxOnDragLeave = new EventEmitter<any>();\r\n    @Output() public k2ButtonClicked = new EventEmitter<any>();\r\n    @Output() public k2TextboxOnFocus = new EventEmitter<any>();\r\n    @Output() public k2TextboxOnBlur = new EventEmitter<any>();\r\n\r\n    public isFocused = false;\r\n    public componentIdMapping = ComponentIdMapping;\r\n    public textLength;\r\n    public composerEnabled = false;\r\n    public enabled = true;\r\n    public selectedSmartFields: any[] = [];\r\n    public hideEditor: boolean;\r\n    public displayedFields: any[] = [];\r\n    public codeView = false;\r\n    public showCharCount = false;\r\n    public showWaterMark = true;\r\n    public isOwnedByComposer = false;\r\n\r\n    @ViewChild('editorDiv') public editorDiv: ElementRef<HTMLElement>;\r\n    @ViewChildren('smartFieldContainer') public smartFieldContainers: QueryList<SmartFieldContainerComponent>;\r\n\r\n    private mouseMoveSubject: Subject<MouseEvent> = new Subject();\r\n    private mouseMoveSubcription: Subscription;\r\n\r\n    private textChangedSubject: Subject<InputEvent> = new Subject();\r\n    private textChangedSubscription: Subscription;\r\n\r\n    private externalChangedSubject: Subject<any> = new Subject();\r\n    private externalChangedSubscription: Subscription;\r\n\r\n    private _forceCopyOnDrag = false;\r\n    private _composerEnabledForDragging: boolean;\r\n    private fieldsChangedExternallyRemover: () => void;\r\n\r\n    public htmlElement: HTMLElement;\r\n\r\n    private openSmartFieldComposerEvent: EventEmitter<ISmartFieldComposerOptions>;\r\n\r\n    constructor(\r\n        private el: ElementRef,\r\n        private _dragDropService: DragDropService,\r\n        @Inject(UndoRedoServiceToken) public _undoRedoService: IUndoRedoService,\r\n        @Inject(SmartFieldPluginServiceToken) public _smartFieldService: ISmartFieldPluginService,\r\n        @Inject(ValidationServiceToken) private _validationService: IValidationService,\r\n        @Inject(SmartFieldComposerServiceToken) private _smartFieldComposerService: ISmartFieldComposerService,\r\n        @Inject(ClipboardServiceToken) public _clipboardService: IClipboardService,\r\n        @Inject(CommandServiceToken) private _commandService: ICommandService,\r\n        private _processService: ProcessService,\r\n        private _notificationService: EventNotifierService,\r\n        @Inject(DOCUMENT) private $document: Document) {\r\n        super(_validationService);\r\n        this.enabled = true;\r\n        this.openSmartFieldComposerEvent = this._notificationService.addEvent(OpenSmartFieldComposerEvent);\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.isMultiLine =\r\n            this.k2Expression?.multiLine === true ||\r\n            this.k2Expression?.richText === true ||\r\n            this.k2Expression?.html === true;\r\n\r\n        this.textLength = 0;\r\n        if (this.k2Expression?.smartFields) {\r\n            this.k2Expression.smartFields.forEach((val: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField) => {\r\n                this.textLength += val.text?.length || 0;\r\n            });\r\n            this.displayedFields = [];\r\n            this.reRender();\r\n        }\r\n\r\n        this.mouseMoveSubcription = this.mouseMoveSubject\r\n            .pipe(throttleTime(100, asyncScheduler, { leading: true, trailing: true }))\r\n            .subscribe((e) => {\r\n                this.mouseMoveDebounced();\r\n            });\r\n\r\n        this.textChangedSubscription = this.textChangedSubject\r\n            .pipe(debounceTime(inputDebounceTime),\r\n                distinctUntilChanged())\r\n            .subscribe((e: InputEvent) => {\r\n                this.textChangedDebounced(e);\r\n            });\r\n\r\n        this.externalChangedSubscription = this.externalChangedSubject\r\n            .pipe(debounceTime(500))\r\n            .subscribe(this.onFieldsChangedExternally);\r\n\r\n        this.fieldsChangedExternallyRemover = this.k2Expression?.smartFields.listen(EventTypes.anythingChanged, this.fieldsChangedExternally.bind(this));\r\n        this.htmlElement = this.el.nativeElement;\r\n        this.setApplicableValidationTypes(this.k2Validation);\r\n        super.validateArrayOnChange(this.k2Expression, `smartFields`, null);\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (!this.isFocused && changes.k2Expression) { // update coming from outside and it's on the expression\r\n            this.reRender();\r\n\r\n            if (this.fieldsChangedExternallyRemover) {\r\n                this.fieldsChangedExternallyRemover();\r\n            }\r\n            this.fieldsChangedExternallyRemover = this.k2Expression?.smartFields.listen(EventTypes.anythingChanged, this.fieldsChangedExternally.bind(this));\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        super.ngOnDestroy();\r\n        this.mouseMoveSubcription?.unsubscribe();\r\n        this.textChangedSubscription?.unsubscribe();\r\n        this.externalChangedSubscription?.unsubscribe();\r\n        if (typeof this.fieldsChangedExternallyRemover === 'function') {\r\n            this.fieldsChangedExternallyRemover();\r\n        }\r\n    }\r\n\r\n    private mouseDown = false;\r\n    private dragging = false;\r\n    /**\r\n     * Functionality for mousedown event\r\n     *\r\n     * @param event the mouse event associated with the mousedown\r\n     */\r\n    public onMouseDown(event) {\r\n        this.mouseDown = true;\r\n    }\r\n\r\n    /**\r\n     * Functionality for the mouse up event\r\n     */\r\n    @HostListener('document:mouseup')\r\n    public onMouseUp() {\r\n        if (this.mouseDown && !this.dragging) {\r\n            this.setSelectedSmartFields();\r\n        }\r\n        if (this.dragging) {\r\n            this.dragging = false;\r\n        }\r\n        this.mouseDown = false;\r\n    }\r\n\r\n    private mouseMoveDebounced() {\r\n        if (this.mouseDown && !this.dragging) {\r\n            this.setSelectedSmartFields();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Functionality for mouse move event inside the component\r\n     *\r\n     * @param e mouse event associated with the mouse move\r\n     */\r\n    public onMouseMove(e: MouseEvent) {\r\n        this.mouseMoveSubject.next(e);\r\n    }\r\n\r\n    fieldsChangedExternally(object: sourceCode.k2Designer.objectModel.core.model.IModelBase) {\r\n        if (!this.isFocused) {\r\n            this.externalChangedSubject.next(object);\r\n        }\r\n    }\r\n\r\n    onFieldsChangedExternally = (object: sourceCode.k2Designer.objectModel.core.model.IModelBase) => {\r\n        //exit out of method if from is null\r\n\r\n        const isModelArray: boolean = object instanceof sourceCode.k2Designer.objectModel.core.model.ModelArray;\r\n\r\n        // if it is not a text value, we are not interested\r\n        if (!isModelArray && !(object as any)?.text) { // if it is not a text value, we are not interested\r\n            return;\r\n        }\r\n\r\n        const isErrorInfo: boolean = (<any>object).instanceOf(sourceCode.k2Designer.objectModel.core.model.ErrorInformation.implementor);\r\n        const logicalParentModel: sourceCode.k2Designer.objectModel.core.model.IModelBase = object.getLogicalParentModel();\r\n\r\n        // if object is an errorinfo object that was modified in validation, causing onExpressionChangedExternally to fire, do not continue\r\n        if (isErrorInfo\r\n            || (isModelArray && (<any>object).length > 0 && (<any>object)[0].instanceOf(sourceCode.k2Designer.objectModel.core.model.ErrorInformation.implementor))\r\n            || (logicalParentModel && logicalParentModel.instanceOf(sourceCode.k2Designer.objectModel.core.model.ErrorInformation.implementor))) {\r\n            return;\r\n        }\r\n\r\n        if (logicalParentModel && !this.k2Expression.isParentOf(logicalParentModel)) {\r\n            this.reRender();\r\n        }\r\n    };\r\n\r\n    private setSelectedSmartFields(range?: Range) {\r\n        if (!range) {\r\n            const selection = this.$document.getSelection();\r\n            if (!selection.isCollapsed && selection.rangeCount > 0) {\r\n                for (const container of this.smartFieldContainers) {\r\n                    const smartField = this.k2Expression.smartFields[parseInt(container.element.nativeElement.id)];\r\n                    if (selection.containsNode(container.element.nativeElement, true)) {\r\n                        if (!this.selectedSmartFields.includes(smartField)) {\r\n                            this.selectedSmartFields.push(smartField);\r\n                        }\r\n                    } else {\r\n                        if (this.selectedSmartFields.includes(smartField)) {\r\n                            this.selectedSmartFields.splice(this.selectedSmartFields.indexOf(smartField), 1);\r\n                        }\r\n                    }\r\n                };\r\n            } else {\r\n                this.selectedSmartFields = [];\r\n            }\r\n        } else {\r\n            for (const container of this.smartFieldContainers) {\r\n                const smartField = this.k2Expression.smartFields[parseInt(container.element.nativeElement.id)];\r\n                if (range.intersectsNode(container.element.nativeElement)) {\r\n                    if (!this.selectedSmartFields.includes(smartField)) {\r\n                        this.selectedSmartFields.push(smartField);\r\n                    }\r\n                } else {\r\n                    if (this.selectedSmartFields.includes(smartField)) {\r\n                        this.selectedSmartFields.splice(this.selectedSmartFields.indexOf(smartField), 1);\r\n                    }\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Functionality for the on click event\r\n     *\r\n     * @param event event associated with the mouse click\r\n     */\r\n    public onClick(event: MouseEvent) {\r\n        const target = event.target as HTMLElement;\r\n        if ($(target).parents('k2-smart-field-container').length === 0) {\r\n            setTimeout(() => {\r\n                const selection = this.$document.getSelection();\r\n                if (selection.isCollapsed) {\r\n                    this.selectedSmartFields = [];\r\n                }\r\n            }, 0);\r\n        } else {\r\n            this.doFocus();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The K2 button was clicked\r\n     */\r\n    public k2ButtonClick() {\r\n        this.k2ButtonClicked.emit();\r\n    }\r\n\r\n    private rendering = false;\r\n    /**\r\n     * This is to bypass the outerHTML bug because angular has no way to inject pure HTML without a container\r\n     * https://github.com/angular/angular/issues/41131\r\n     */\r\n    public reRender(composerFieldToOpen: any = null) {\r\n        if (!this.rendering && this.k2Expression?.smartFields) {\r\n            this.rendering = true;\r\n            this.displayedFields = [];\r\n            this.hideEditor = true;\r\n            setTimeout(() => {\r\n                for (const field of (this.k2Expression.smartFields as sourceCode.k2Designer.objectModel.core.model.IModelArray<sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField>)) {\r\n                    if (field.componentId === ComponentIdMapping.TextSmartField) {\r\n                        this.displayedFields.push(field.clone());\r\n                    } else {\r\n                        this.displayedFields.push(field);\r\n                    }\r\n                } // Shouldnt be a reference to the original\r\n                this.textLength = 0;\r\n                this.k2Expression.smartFields.forEach((val: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField) => {\r\n                    this.textLength += val.text?.length || 0;\r\n                });\r\n                this.hideEditor = false;\r\n                if (this.textLength || this.k2Expression.smartFields.find((f) => f.componentId !== ComponentIdMapping.TextSmartField)) {\r\n                    this.showWaterMark = false;\r\n                } else {\r\n                    this.showWaterMark = true;\r\n                }\r\n                setTimeout(() => {\r\n                    this.rendering = false;\r\n                    if (composerFieldToOpen) {\r\n                        setTimeout(() => {\r\n                            this.openSmartFieldComposer(composerFieldToOpen.field, composerFieldToOpen.config, composerFieldToOpen.fromUserDrop, composerFieldToOpen.fromContextBrowser, composerFieldToOpen.droppedOnNew);\r\n                        }, 0);\r\n                    }\r\n                }, 0);\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Functionality for handling text changing, after it has been debounced\r\n     *\r\n     * @param event the text change event\r\n     */\r\n    public textChangedDebounced(event: InputEvent, textRange: Range = null) {\r\n        const selection = this.$document.getSelection();\r\n        let caretNode = selection.anchorNode;\r\n        let caretOffset = selection.anchorOffset;\r\n        if (textRange) {\r\n            caretNode = textRange.startContainer;\r\n            caretOffset = textRange.startOffset;\r\n        }\r\n        this._undoRedoService.addUndoMarker(`-- textbox text changed --`);\r\n        if (this.isFocused && (this.editorDiv.nativeElement.contains(caretNode) ||\r\n            (caretNode === this.editorDiv.nativeElement && caretNode?.nodeType === Node.TEXT_NODE) // TEXT\r\n        )) {\r\n            if (caretNode === this.editorDiv.nativeElement) {\r\n                caretNode = caretNode.childNodes[caretOffset];\r\n                if (!caretNode) {\r\n                    this.k2Expression.smartFields.push(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                        text: ''\r\n                    }));\r\n                    return;\r\n                }\r\n            }\r\n            const prevField = this.getPreviousSmartField(caretNode); //if previous field is null, text node is at first text field\r\n            const index: number = prevField ? parseInt((prevField as HTMLElement).id) + 1 : 0; // a text field should never follow another\r\n            const val = this.sanitizeText(this.getTextValue(caretNode));\r\n            if (!this.k2Expression.smartFields[index] && (this.isCharacterKeyPress(event) || val)) {\r\n                this.k2Expression.smartFields.push(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                    text: val\r\n                }));\r\n            } else if (this.k2Expression.smartFields[index] && this.k2Expression.smartFields[index].componentId !== ComponentIdMapping.TextSmartField) {\r\n                this.k2Expression.smartFields.splice(index, 0, sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                    text: val\r\n                }));\r\n            } else {\r\n                if (!val && !this.k2Expression.smartFields?.length) {\r\n                    return;\r\n                } else if (!val) {\r\n                    this.k2Expression.smartFields.splice(index, 1);\r\n                } else {\r\n                    (this.k2Expression.smartFields[index] as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField).text = val;\r\n                }\r\n            }\r\n        } else { // we dont know which text changed, update ALL of them\r\n            this.mergeTextFields();\r\n            let currentNode = this.editorDiv.nativeElement.firstChild;\r\n            if (currentNode) {\r\n                let index = 0;\r\n                while (currentNode) {\r\n                    if ((currentNode as HTMLElement)?.tagName?.toLowerCase() === 'k2-smart-field-container') {\r\n                        currentNode = currentNode.nextSibling;\r\n                        index++;\r\n                        continue;\r\n                    }\r\n                    const value = this.sanitizeText(this.getTextValue(currentNode));\r\n                    if (this.k2Expression.smartFields[index]?.componentId === ComponentIdMapping.TextSmartField) {\r\n                        (this.k2Expression.smartFields[index] as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField).text = value;\r\n                        index++;\r\n                    } else if (value) {\r\n                        this.k2Expression.smartFields.splice(index, 0, sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                            text: value\r\n                        }));\r\n                        index++;\r\n                    }\r\n                    currentNode = this.getNextSmartField(currentNode) as any;\r\n                }\r\n            } else { // no text or otherwise\r\n                this.removeSmartFields(this.k2Expression.smartFields);\r\n            }\r\n        }\r\n        this.textLength = 0;\r\n        this.k2Expression.smartFields.forEach((val: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField) => {\r\n            this.textLength += val.text?.length || 0;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Functionality that handles text changing inside the editordiv\r\n     *\r\n     * @param event\r\n     */\r\n    public onTextChanged(event: InputEvent) {\r\n        this.textChangedSubject.next(event);\r\n        if (this.sanitizeText(this.editorDiv?.nativeElement?.textContent)) {\r\n            this.showWaterMark = false;\r\n        } else {\r\n            this.showWaterMark = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * On focus event handler\r\n     *\r\n     * @param event\r\n     */\r\n    public onFocus(event) {\r\n        this._commandService.setCurrentContext(`K2Textbox`);\r\n        this._clipboardService.setCurrentContext(`K2Textbox`);\r\n        //this._richEditService.setCurrentTextbox(this);\r\n\r\n        //if (!this._composerEnabled) {\r\n        //    this._richEditService.setFocus(this._scope.k2Expression);\r\n        //}\r\n\r\n        this.k2TextboxOnFocus.emit(event);\r\n        this.isFocused = true;\r\n    }\r\n\r\n    /**\r\n     * On blur event handler\r\n     *\r\n     * @param event\r\n     */\r\n    public onBlur(event) {\r\n        this.textChangedDebounced(null);\r\n        this.isFocused = false;\r\n        this.selectedSmartFields = [];\r\n        this.k2TextboxOnBlur.emit(event);\r\n    }\r\n\r\n    /**\r\n     * Smart field clicked event handler\r\n     *\r\n     * @param event\r\n     */\r\n    public onSmartFieldClick(event) {\r\n        if (!this._ownsActiveComposer) {\r\n            this.selectedSmartFields = [];\r\n            this.selectedSmartFields.push(event.dataModel);\r\n\r\n            const selection = this.$document.getSelection();\r\n            selection.removeAllRanges();\r\n        }\r\n    }\r\n\r\n    private getNextNode(node: Node): Node {\r\n        if (node.firstChild)\r\n        {return node.firstChild;}\r\n        while (node) {\r\n            if (node.nextSibling)\r\n            {return node.nextSibling;}\r\n            node = node.parentNode;\r\n        }\r\n    }\r\n\r\n    private getPreviousNode(node: Node): Node {\r\n        if (node.lastChild)\r\n        {return node.lastChild;}\r\n        while (node) {\r\n            if (node.previousSibling)\r\n            {return node.previousSibling;}\r\n            node = node.parentNode;\r\n        }\r\n    }\r\n\r\n    private getNextEditable(sourceNode: Node): Node {\r\n        let nextNode: Node = sourceNode;\r\n        if (nextNode.nodeType === Node.ELEMENT_NODE &&\r\n            (nextNode as HTMLElement).tagName.toLowerCase() === 'k2-smart-field-container') {\r\n            if (!nextNode.nextSibling) {\r\n                return null;\r\n            }\r\n            nextNode = nextNode.nextSibling;\r\n        }\r\n        while (nextNode) {\r\n            nextNode = this.getNextNode(nextNode);\r\n            if (nextNode.nodeType === Node.ELEMENT_NODE &&\r\n                (nextNode as HTMLElement).tagName.toLowerCase() === 'k2-smart-field-container') {\r\n                if (!nextNode.nextSibling) {\r\n                    return null;\r\n                }\r\n                nextNode = nextNode.nextSibling;\r\n            }\r\n            if ($(this.el.nativeElement).has(nextNode as any).length === 0) { // Next node is outside of the textbox\r\n                return null;\r\n            } else if (nextNode.nodeType === Node.TEXT_NODE) {\r\n                return nextNode;\r\n            }\r\n        }\r\n    }\r\n\r\n    private getPreviousEditable(sourceNode: Node): Node {\r\n        let prevNode: Node = sourceNode;\r\n        if (prevNode.nodeType === Node.ELEMENT_NODE &&\r\n            (prevNode as HTMLElement).tagName.toLowerCase() === 'k2-smart-field-container') {\r\n            if (!prevNode.previousSibling) {\r\n                return null;\r\n            }\r\n            prevNode = prevNode.previousSibling;\r\n        }\r\n        while (prevNode) {\r\n            prevNode = this.getPreviousNode(prevNode);\r\n            if (prevNode.nodeType === Node.ELEMENT_NODE &&\r\n                (prevNode as HTMLElement).tagName.toLowerCase() === 'k2-smart-field-container') {\r\n                if (!prevNode.previousSibling) {\r\n                    return null;\r\n                }\r\n                prevNode = prevNode.previousSibling;\r\n            }\r\n            if ($(this.el.nativeElement).has(prevNode as any).length === 0) { // Previous node is outside of the textbox\r\n                return null;\r\n            } else if (prevNode.nodeType === Node.TEXT_NODE) {\r\n                return prevNode;\r\n            }\r\n        }\r\n    }\r\n\r\n    private getNextSmartField(sourceNode: Node): Node {\r\n        let nextNode: Node = sourceNode;\r\n        while (nextNode) {\r\n            nextNode = this.getNextNode(nextNode);\r\n            if ($(this.el.nativeElement).has(nextNode as any).length === 0) { // Next node is outside of the textbox\r\n                return null;\r\n            } else if (nextNode.nodeType === Node.ELEMENT_NODE &&\r\n                (nextNode as HTMLElement).tagName.toLowerCase() === 'k2-smart-field-container' &&\r\n                !(nextNode as HTMLElement).classList?.contains('deleted')) {\r\n                return nextNode;\r\n            }\r\n        }\r\n    }\r\n\r\n    private getPreviousSmartField(sourceNode: Node): Node { // Since text fields wont follow each other, search for a smartfield,\r\n        let prevNode: Node = sourceNode;\r\n        while (prevNode) {\r\n            prevNode = this.getPreviousNode(prevNode);\r\n            if ($(this.el.nativeElement).has(prevNode as any).length === 0) { // Previous node is outside of the textbox\r\n                return null;\r\n            } else if (prevNode.nodeType === Node.ELEMENT_NODE &&\r\n                (prevNode as HTMLElement).tagName.toLowerCase() === 'k2-smart-field-container' &&\r\n                !(prevNode as HTMLElement).classList?.contains('deleted')) {\r\n                return prevNode;\r\n            }\r\n        }\r\n    }\r\n\r\n    private moveCaretToNextEditable(source: Node) {\r\n        const caretRange = this.$document.createRange();\r\n        const nextEditableNode = this.getNextEditable(source);\r\n        if (nextEditableNode) {\r\n            caretRange.setStart(nextEditableNode, 0);\r\n            const selection = this.$document.getSelection();\r\n            selection.removeAllRanges();\r\n            selection.addRange(caretRange);\r\n        }\r\n    }\r\n\r\n    private moveCaretToPrevEditable(sourceElement: HTMLElement) {\r\n        const caretRange = this.$document.createRange();\r\n        const previousEditableNode = this.getPreviousEditable(sourceElement);\r\n        if (previousEditableNode) {\r\n            const offset = (previousEditableNode as Text).length;\r\n            caretRange.setStart(previousEditableNode, offset);\r\n            const selection = this.$document.getSelection();\r\n            selection.removeAllRanges();\r\n            selection.addRange(caretRange);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * select a smartfield\r\n     *\r\n     * @param field field to select\r\n     * @param append should be appended to the current selection\r\n     */\r\n    public selectSmartField(field: any, append: boolean = false) {\r\n        if (!append || !this.selectedSmartFields) {\r\n            this.selectedSmartFields = [];\r\n        }\r\n        this.selectedSmartFields.push(field);\r\n    }\r\n\r\n    /**\r\n     * drag enter event handler\r\n     *\r\n     * @param event\r\n     */\r\n    public onDragEnter(event: DragEvent): boolean {\r\n        this.k2TextboxOnDragEnter.emit();\r\n        this._forceCopyOnDrag = this.isSmartFieldFromParentExpression();\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * drag leave event handler\r\n     *\r\n     * @param event\r\n     */\r\n    public onDragLeave(event: DragEvent): boolean {\r\n        this.k2TextboxOnDragLeave.emit();\r\n        if (this._composerEnabledForDragging) {\r\n            this._composerEnabledForDragging = false;\r\n            this.toggleStateForComposer(true);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * drag over event handler\r\n     *\r\n     * @param event\r\n     */\r\n    public onDragOver(event: DragEvent): boolean {\r\n        //if a composer is active and the item is a smartfield,\r\n        //allow the drop by temporarily enabling the element for dropping\r\n        if (this.composerEnabled &&\r\n            (this._dragDropService.hasItem('configuredSmartField') ||\r\n                this._dragDropService.hasItem('smartField'))) {\r\n            this._composerEnabledForDragging = true;\r\n            this.toggleStateForComposer(false);\r\n        }\r\n        event.dataTransfer.dropEffect = (event.ctrlKey === true || this._forceCopyOnDrag) ? 'copy' : 'move';\r\n        if ($(event.target).parents('k2-smart-field-container').length > 0) {\r\n            event.dataTransfer.dropEffect = 'none';\r\n        }\r\n        const sel = this.$document.getSelection();\r\n        if (!sel.isCollapsed && sel.containsNode($(event.target)[0] as any)) {\r\n            event.dataTransfer.dropEffect = 'none';\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * drag start event handler\r\n     *\r\n     * @param event\r\n     */\r\n    public onDragStart(event: DragEvent): boolean {\r\n        this.dragging = true;\r\n        let src: SmartFieldContainerComponent;\r\n        const srcParent = $(event.srcElement).parents('k2-smart-field-container');\r\n        if (srcParent.length === 1) {\r\n            src = this.smartFieldContainers.find((sfc) => sfc.element.nativeElement === srcParent[0]);\r\n        }\r\n        if (src && (this.selectedSmartFields?.length === 0 || !this.selectedSmartFields.find((sf) => sf === src?.dataModel))) {\r\n            this.selectedSmartFields = [src.dataModel];\r\n        }\r\n        const configuredFields = this.getFieldsFromSelection();\r\n        this._dragDropService.setItem('TextBoxItems', { source: this, data: configuredFields } as any);\r\n        event.dataTransfer.setData(`text/plain`, `content`);\r\n        event.dataTransfer.effectAllowed = `copyMove`;\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * drop event handler\r\n     *\r\n     * @param event\r\n     */\r\n    public onDrop(event: DragEvent): boolean {\r\n        if (this._dragDropService.hasItem('canvasItem') ||\r\n            this._dragDropService.hasItem('ruleDesignerItem') ||\r\n            (this.k2CanDrop === false) ||\r\n            $(event.target).parents('k2-smart-field-container').length > 0) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        let smartFieldPlugin: sourceCode.k2Designer.objectModel.smartFieldPlugins.ISmartFieldPlugin;\r\n        let configuredFields: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField[];\r\n        let originalFields: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField[];\r\n        let originalSource: sourceCode.k2Designer.objectModel.smartFieldComposer.IComposerContainer;\r\n        let fromContextBrowser = false;\r\n        const droppedOnNewField = false;\r\n        const fromParentExpression = false;\r\n        const onlyText = false;\r\n        let removeSelection = false;\r\n\r\n        this._undoRedoService.addUndoMarker('-- textbox ondrop --');\r\n\r\n        if (this._dragDropService.hasItem('smartField')) {\r\n            const dragItem = this._dragDropService.getItem('smartField');\r\n\r\n            if (this._dragDropService.hasItem('configuredSmartField')) {\r\n                this._dragDropService.getItem('configuredSmartField');\r\n            }\r\n\r\n            const dropData = dragItem.getDropData<any, sourceCode.k2Designer.objectModel.core.itemProvider.IItemBase<any, any>>(dragItem.getDragData<any>());\r\n            if (dragItem.getSource<sourceCode.k2Designer.objectModel.core.itemProvider.IItemBase<any, any>>().resolverType) {\r\n                dropData.resolverType = dragItem.getSource<sourceCode.k2Designer.objectModel.core.itemProvider.IItemBase<any, any>>().resolverType;\r\n            }\r\n            smartFieldPlugin = this._smartFieldService.getSmartFieldPlugin(dropData.componentId);\r\n            configuredFields = [smartFieldPlugin.getConfiguredData(dropData)];\r\n            fromContextBrowser = true;\r\n\r\n            this._processService.cacheExternalReferences(configuredFields);\r\n        }\r\n        else if (this._dragDropService.hasItem('TextBoxItems')) { // Coming from a textbox\r\n            const dragData = this._dragDropService.getItem('TextBoxItems') as any;\r\n            originalFields = dragData.data;\r\n            originalSource = dragData.source;\r\n            removeSelection = event.ctrlKey !== true && !this._forceCopyOnDrag;\r\n            configuredFields = [];\r\n            for (const [i, field] of originalFields.entries()) {\r\n                configuredFields.push(field.clone());\r\n                if (field.componentId === ComponentIdMapping.TextSmartField) {\r\n                    if (!this.isMultiLine) {\r\n                        (configuredFields[i] as any).text = this.sanitizeText((field as any).text);\r\n                    }\r\n                }\r\n            }\r\n        } else { // Plain text\r\n            const dragData = event.dataTransfer.getData('text/html');\r\n            if (dragData) {\r\n                const newField = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                    text: dragData\r\n                });\r\n                configuredFields = [newField];\r\n            }\r\n        }\r\n\r\n        if (configuredFields && configuredFields.length > 0) {\r\n            // associate the configured field with the expression so that it can reference other objects (data fields/env fields/SMOs)\r\n            if (!onlyText) {\r\n                configuredFields.forEach((f) => f.associateWithParent ? f.associateWithParent(this.k2Expression) : null);\r\n            }\r\n\r\n            // set the cursor position\r\n            let range: Range = null;\r\n            const selection: Selection = this.$document.getSelection();\r\n            let x: Number = event.x;\r\n            let y: Number = event.y;\r\n            const currentSelection = selection.rangeCount ? selection.getRangeAt(0) : null;\r\n\r\n            // For those browsers that not yet support .x & .y\r\n            if (!x) x = event.clientX;\r\n            if (y) y = event.clientY;\r\n            if ((<any>document).caretPositionFromPoint) {\r\n                const pos = (<any>document).caretPositionFromPoint(x, y);\r\n                range = this.$document.createRange();\r\n                range.setStart(pos.offsetNode, pos.offset);\r\n                selection.removeAllRanges();\r\n                selection.addRange(range);\r\n            } else if ((<any>document).caretRangeFromPoint) {\r\n                range = (<any>document).caretRangeFromPoint(x, y);\r\n                selection.removeAllRanges();\r\n                selection.addRange(range);\r\n            } else if ((<any>document).body.createTextRange) {\r\n                // IE\r\n                // put inside try-catch because IE throws an error if trying to drop\r\n                // on something that is not content-editable, eg. the outer part of the\r\n                // k2 textbox (which we specifically want to include to make drag/drop\r\n                // easier.\r\n                try {\r\n                    range = (<any>document).body.createTextRange();\r\n                    (<any>range).moveToPoint(event.pageX, event.pageY);\r\n                } catch (e) {\r\n                }\r\n            }\r\n\r\n            if ((range.startContainer as HTMLElement).tagName?.toLowerCase() === 'k2-smart-field-container' ||// dropped the field in a bad place, do nothing\r\n                $(range.startContainer).parents('k2-smart-field-container').length > 0 || (\r\n                !currentSelection?.collapsed && currentSelection?.isPointInRange(range.startContainer, range.startOffset))) { // dropped field on current selection, do nothing\r\n                return false;\r\n            }\r\n\r\n            if (removeSelection && currentSelection && !currentSelection.collapsed) {\r\n                const el = this.$document.createElement('caret');\r\n                range.insertNode(el);\r\n                (originalSource as any).removeRangeFromTextbox(currentSelection);\r\n                range.setStartBefore($('caret')[0]);\r\n                $('caret').remove();\r\n                this.insertSmartFieldsAtCaret(configuredFields);\r\n            } else if (originalSource && originalFields.length === 1 && originalFields[0].componentId !== this.componentIdMapping.TextSmartField) {\r\n                this.insertSmartFieldsAtCaret(configuredFields);\r\n                const el = this.$document.createElement('caret');\r\n                range.insertNode(el);\r\n                (originalSource as any).removeSmartFields(originalFields, true, true);\r\n                range.setStartBefore($('caret')[0]);\r\n                $('caret').remove();\r\n            } else {\r\n                this.insertSmartFieldsAtCaret(configuredFields);\r\n            }\r\n\r\n            this.mergeTextFields();\r\n        }\r\n\r\n        if (configuredFields?.length === 1 && smartFieldPlugin) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        //if (this.k2Expression.richText === true) {\r\n        //    this.notifyChanges();\r\n        //}\r\n\r\n        if (this.k2TextboxOnDrop !== null && this.k2TextboxOnDrop !== undefined) {\r\n            this.k2TextboxOnDrop.emit();\r\n        }\r\n\r\n        if (this._composerEnabledForDragging) {\r\n            this.toggleStateForComposer(true);\r\n            this._composerEnabledForDragging = false;\r\n        }\r\n\r\n        this.reRender(configuredFields?.length === 1 && smartFieldPlugin ?\r\n            { field: configuredFields[0], config: smartFieldPlugin.configuration, userDrop: true, fromContextBrowser, droppedOnNew: droppedOnNewField } :\r\n            null\r\n        );\r\n        if (!(configuredFields?.length === 1 && smartFieldPlugin)) {\r\n            setTimeout(() => {\r\n                if (this.editorDiv?.nativeElement.lastChild) {\r\n                    const lastChild = this.editorDiv.nativeElement.lastChild;\r\n                    const sel = this.$document.getSelection();\r\n                    const range = this.$document.createRange();\r\n                    range.selectNodeContents(lastChild.nodeType === Node.TEXT_NODE ? lastChild : this.getPreviousEditable(lastChild));\r\n                    range.collapse(false);\r\n                    sel.removeAllRanges();\r\n                    sel.addRange(range);\r\n                } else {\r\n                    this.editorDiv?.nativeElement.focus();\r\n                }\r\n            }, 5);\r\n        } else {\r\n            this.isFocused = false;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * copy event handler\r\n     *\r\n     * @param event\r\n     */\r\n    @HostListener('document:copy', ['$event'])\r\n    public onCopy(event: Event): boolean {\r\n        const configuredFields = this.getFieldsFromSelection();\r\n        if (!configuredFields) {\r\n            return true;\r\n        }\r\n\r\n        const selection = this.$document.getSelection();\r\n        let rawText = '';\r\n        if (selection.rangeCount > 0) {\r\n            const range = selection.getRangeAt(0);\r\n            const frag = range.cloneContents();\r\n            rawText = frag.textContent;\r\n        }\r\n\r\n        if (configuredFields.length > 0) {\r\n            // cache the  external reference before removing the field from the array;\r\n            // In updateObjectModel we will add it from cache if necessary.\r\n            // We need it for copy as well as paste, as you can copy, delete, and then paste.\r\n            if (this.selectedSmartFields.length > 0) {\r\n                this._processService.cacheExternalReferences(this.selectedSmartFields);\r\n            }\r\n            this._clipboardService.setClipboard(configuredFields, rawText, null);\r\n            event.preventDefault();\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Cut event handler\r\n     *\r\n     * @param event\r\n     */\r\n    @HostListener('document:cut', ['$event'])\r\n    public onCut(event: Event): boolean {\r\n        const configuredFields = this.getFieldsFromSelection();\r\n        if (!configuredFields || configuredFields.length === 0) {\r\n            return true;\r\n        }\r\n        this._undoRedoService.addUndoMarker('-- textbox update model - cut --');\r\n        if (configuredFields.length > 0) {\r\n            // cache the  external reference before removing the field from the array;\r\n            // In updateObjectModel we will add it from cache if necessary.\r\n            // We need it for copy as well as paste, as you can copy, delete, and then paste.\r\n            if (this.selectedSmartFields.length > 0) {\r\n                this._processService.cacheExternalReferences(this.selectedSmartFields);\r\n            }\r\n            this._clipboardService.setClipboard(configuredFields, null, null);\r\n            event.preventDefault();\r\n        }\r\n\r\n        // Get selection and range\r\n        const selection: Selection = window.getSelection();\r\n        let range: Range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\r\n        if (range && !selection.isCollapsed) {\r\n            const endContainer = range?.endContainer;\r\n            this.removeRangeFromTextbox(range);\r\n            if (range) {\r\n                range = this.$document.createRange();\r\n                range.setStart(endContainer, 0);\r\n                selection.removeAllRanges();\r\n                selection.addRange(range);\r\n            }\r\n        } else {\r\n            if (configuredFields?.length === 1) {\r\n                this.removeSmartFields(this.selectedSmartFields);\r\n                this.selectedSmartFields = [];\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private _keyDownForPasting;\r\n    private _fromKeyDown;\r\n\r\n    /**\r\n     * Paste event handler\r\n     *\r\n     * @param event\r\n     */\r\n    @HostListener('document:paste', ['$event'])\r\n    public onPaste(event: Event): boolean {\r\n        if (!this.isFocused && !(this.selectedSmartFields.length > 0)) {\r\n            return true;\r\n        }\r\n        //keyDownForPasting will determine if the key is held down for pasting, if it is\r\n        //then onPaste will not continue and will preventDefault.\r\n        if (this._keyDownForPasting) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if (this._fromKeyDown) {\r\n            this._keyDownForPasting = true;\r\n        }\r\n\r\n        this._clipboardService.setCurrentContext('K2Textbox');\r\n        const selection: Selection = this.$document.getSelection();\r\n        const range: Range = selection.rangeCount ? selection.getRangeAt(0) : null;\r\n        const doc = this._clipboardService.getSystemClipboard(event, this.isRichTextBox && this.isMultiLine);\r\n        if (this._clipboardService.hasData() || doc) {\r\n            this._undoRedoService.addUndoMarker('-- textbox update model - paste --');\r\n            if (!selection.isCollapsed && range) {\r\n                // Remove the selection's content (will be replaced)\r\n                this.removeRangeFromTextbox(range);\r\n            }\r\n            let sfIndex = null;\r\n            if (!range) {\r\n                sfIndex = (this.k2Expression.smartFields as any[]).indexOf(this.selectedSmartFields[0]); // there can only be one smartfield in selection if the selection doesnt exist\r\n                this.removeSmartFields(this.selectedSmartFields, undefined, false);\r\n            }\r\n            if (this._clipboardService.hasData()) {\r\n                const items: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField[] = this._clipboardService.getClipboard();\r\n                const clonedFields: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField[] = [];\r\n                for (let i = 0; i < items.length; i++) {\r\n                    const clonedField = items[i].clone<sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField>();\r\n                    clonedFields.push(clonedField);\r\n\r\n                    // reset internalId (ensure that new unique IDs will be created)\r\n                    clonedField.internalId = undefined;\r\n                    // ensure that a SmartObject and Inline Function is parented so that they\r\n                    // can do externalDefinitions lookups\r\n                    if (clonedField.componentId === ComponentIdMapping.k2SmartObjectField\r\n                        || clonedField.componentId === ComponentIdMapping.k2InlineFunctionField\r\n                    ) {\r\n                        clonedField.associateWithParent(this.k2Expression);\r\n                    }\r\n                }\r\n                if (!sfIndex) {\r\n                    this.insertSmartFieldsAtCaret(clonedFields);\r\n                } else {\r\n                    if (sfIndex === this.k2Expression.smartFields.length) {\r\n                        this.k2Expression.smartFields.push(...clonedFields);\r\n                    } else {\r\n                        clonedFields.reverse().forEach((f) => {\r\n                            (this.k2Expression.smartFields as any[]).splice(sfIndex, 0, f);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            else if (doc) {\r\n                const newField = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                    text: this.codeView ? this.decodeHtml(doc.innerHTML) : doc.innerHTML\r\n                });\r\n                this.insertSmartFieldsAtCaret([newField]);\r\n            }\r\n\r\n            this.mergeTextFields();\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n            this.reRender();\r\n            setTimeout(() => {\r\n                if (this.editorDiv?.nativeElement.lastChild) {\r\n                    const lastChild = this.editorDiv.nativeElement.lastChild;\r\n                    const sel = this.$document.getSelection();\r\n                    const range = this.$document.createRange();\r\n                    range.selectNodeContents(lastChild.nodeType === Node.TEXT_NODE ? lastChild : this.getPreviousEditable(lastChild));\r\n                    range.collapse(false);\r\n                    sel.removeAllRanges();\r\n                    sel.addRange(range);\r\n                } else {\r\n                    this.editorDiv?.nativeElement.focus();\r\n                }\r\n            }, 5);\r\n        } else {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Insert the fields into the location of the caret\r\n     *\r\n     * @param configuredFields fields to insert\r\n     * @returns index at which fields are inserted\r\n     */\r\n    private insertSmartFieldsAtCaret(configuredFields: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField[]): number {\r\n        const selection = this.$document.getSelection();\r\n        let node = selection.anchorNode;\r\n        let offset = selection.anchorOffset;\r\n\r\n        if (node as HTMLElement === this.editorDiv.nativeElement) {\r\n            node = node.childNodes[offset];\r\n            offset = 0;\r\n        }\r\n\r\n        const prevSmartField = this.getPreviousSmartField(node) as HTMLElement;\r\n        let index: number;\r\n        if (prevSmartField) {\r\n            index = parseInt(prevSmartField.id) + 1;\r\n        } else {\r\n            index = 0;\r\n        }\r\n\r\n        if (!node) { // editordiv is empty\r\n            (this.k2Expression.smartFields as any[]).push(...configuredFields);\r\n            return;\r\n        }\r\n\r\n        if (this.isStartOfText(node, offset)) { // If caret is at a placeholder or start of text, simply insert at the index\r\n            configuredFields.reverse().forEach((f) => {\r\n                (this.k2Expression.smartFields as any[]).splice(index, 0, f);\r\n            });\r\n        } else if (this.isEndOfText(node, offset)) { // If caret is at the end of a text entry, insert after\r\n            if (index === this.k2Expression.smartFields.length - 1) {\r\n                (this.k2Expression.smartFields as any[]).push(...configuredFields);\r\n            } else {\r\n                configuredFields.reverse().forEach((f) => {\r\n                    (this.k2Expression.smartFields as any[]).splice(index + 1, 0, f);\r\n                });\r\n            }\r\n        } else if ((node as HTMLElement).tagName?.toLowerCase() === 'k2-smart-field-container') {\r\n            (this.k2Expression.smartFields as any[]).splice(index, 0, ...configuredFields);\r\n        } else { // In the middle of a text entry\r\n            let beforeContent = this.getTextValue(node, offset, false, true);\r\n            let afterContent = this.getTextValue(node, offset, true, false);\r\n            beforeContent = this.sanitizeText(beforeContent);\r\n            afterContent = this.sanitizeText(afterContent);\r\n            const newTextField = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                text: afterContent,\r\n            });\r\n\r\n            if (!this.k2Expression.smartFields[index]) { // dropped on a placeholder at the end\r\n                this.k2Expression.smartFields.push(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                    text: beforeContent\r\n                }));\r\n                (this.k2Expression.smartFields as any[]).push(...configuredFields);\r\n                this.k2Expression.smartFields.push(newTextField);\r\n            } else {\r\n                (this.k2Expression.smartFields[index] as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField).text = beforeContent;\r\n                this.k2Expression.smartFields.splice(index + 1, 0, newTextField);\r\n                configuredFields.reverse().forEach((f) => {\r\n                    (this.k2Expression.smartFields as any[]).splice(index + 1, 0, f);\r\n                });\r\n            }\r\n        }\r\n        return index;\r\n    }\r\n\r\n    /**\r\n     * Get a valid source expression\r\n     *\r\n     * @param draggedSmartField\r\n     */\r\n    public getValidSourceExpression(draggedSmartField: SmartFieldContainerComponent): any {\r\n        let sourceExpression: any = draggedSmartField.dataModel.getLogicalParentModel();\r\n        if (sourceExpression) {\r\n            let cnt = 0;\r\n            while (!sourceExpression.isParentOf && cnt < 10) {\r\n                sourceExpression = sourceExpression.getLogicalParentModel();\r\n                cnt++;\r\n            }\r\n        }\r\n        else {\r\n            draggedSmartField.k2TextBox.k2Expression;\r\n        }\r\n        return sourceExpression;\r\n    }\r\n\r\n    public isSmartFieldFromParentExpression() {\r\n        //always allow new smartfields\r\n        if (this._dragDropService.hasItem('smartField')) {\r\n            return false;\r\n        }\r\n\r\n        if (this._dragDropService.hasItem('configuredSmartField')) {\r\n            const originalSmartFieldMoved: SmartFieldContainerComponent = <any>this._dragDropService.peekItem('configuredSmartField');\r\n            const sourceExpression = this.getValidSourceExpression(originalSmartFieldMoved);\r\n            const myExpression = this.k2Expression;\r\n\r\n            if (sourceExpression?.isParentOf(myExpression) &&\r\n                originalSmartFieldMoved.isConfiguring) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * open the smartfield composer\r\n     *\r\n     * @param data smartfield data\r\n     * @param config smart field config\r\n     * @param fromUserDrop is it from drop\r\n     * @param fromContextBrowser is it from context browser\r\n     * @param droppedOnNewTextBox\r\n     */\r\n    public openSmartFieldComposer(data: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField, config: sourceCode.k2Designer.objectModel.smartFieldPlugins.ISmartFieldPluginConfig, fromUserDrop: boolean = false, fromContextBrowser: boolean = false, droppedOnNewTextBox: boolean = false): void {\r\n        //A fix for IE11 and Edge console error.\r\n        if (!config) {\r\n            return;\r\n        }\r\n        let showComposer = true; //cannot be shown\r\n        let showComposerOnDrop = true; //will not be shown on drop\r\n\r\n        if (data.instanceOf(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.InlineFunctionField.implementor)) { //inline function has to have more than one parameter to open on drop\r\n            showComposerOnDrop = (<sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IInlineFunctionField>data).parameters.length > 0;\r\n        } else if (data.instanceOf(sourceCode.k2Designer.objectModel.workflow.itemProvider.ItemReferenceItem.implementor)) {//Don't show composer for item reference field on drop or double click.\r\n            showComposer = false;\r\n        }\r\n\r\n        if (((fromUserDrop === true && showComposerOnDrop === true && config.aspxLocation && config.aspxLocation.length && fromContextBrowser === true)\r\n            || fromUserDrop !== true || droppedOnNewTextBox === true) && showComposer === true) {\r\n            const container = this.smartFieldContainers.find((container) => container.dataModel === data);\r\n            container.isConfiguring = true;\r\n            if (config.aspxLocation) {\r\n                const composerOptions = {\r\n                    container: this,\r\n                    smartField: container,\r\n                    pluginConfig: config,\r\n                    data,\r\n                    eventHandlers: null,\r\n                    arrow: {\r\n                        left: 0,\r\n                        top: 0,\r\n                        container: {\r\n                            top: 0,\r\n                        },\r\n                    },\r\n                    commandDrawerOpen: false,\r\n                    commandDrawerHeight: 0,\r\n                    index: 0\r\n                } as ISmartFieldComposerOptions;\r\n\r\n                //Add support to open legacy composer in new textbox for non-migrated steps\r\n                const legacyComposerScope: sourceCode.k2Designer.directives.k2SmartFieldComposer.ISmartFieldComposer = (<any>$(container.element.nativeElement).closest('.k2-smartfield-composer')).scope();\r\n\r\n                if (legacyComposerScope?.open) {\r\n                    (composerOptions as any).item = $(container.element.nativeElement);\r\n                    legacyComposerScope.open(composerOptions as any);\r\n                }\r\n\r\n                this.openSmartFieldComposerEvent.emit(composerOptions);\r\n            }\r\n        } else {\r\n            // This cant be fixed in the UI project unless the smart field composer is migrated\r\n            // K2Designerhost should be tweakable to fix the issue\r\n            this._smartFieldComposerService.updateArrowPositionFor(this);\r\n        }\r\n    }\r\n\r\n    public onOpenSmartFieldComposer(container: SmartFieldContainerComponent) {\r\n        if (sourceCode.k2Designer.utilities.constants.EXCLUDEDSMARTFIELDS.indexOf(container.dataModel.componentId) !== -1) {\r\n            return;\r\n        }\r\n        const smartFieldPlugin = this._smartFieldService.getSmartFieldPlugin(container.dataModel.componentId);\r\n        this.openSmartFieldComposer(container.dataModel, smartFieldPlugin.configuration);\r\n    }\r\n\r\n\r\n    /**\r\n     * Key down event handler\r\n     *\r\n     * @param event\r\n     */\r\n    public onKeyDown(event: KeyboardEvent): boolean {\r\n        switch (event.keyCode) {\r\n            case keyCodes.BACKSPACE:\r\n            case keyCodes.DELETE:\r\n                this.processBackspaceDelete(event);\r\n                break;\r\n            case keyCodes.LEFT_ARROW:\r\n                this.processLeftArrow(event);\r\n                break;\r\n            case keyCodes.UP_ARROW:\r\n                this.processUpArrow(event);\r\n                break;\r\n            case keyCodes.RIGHT_ARROW:\r\n                this.processRightArrow(event);\r\n                break;\r\n            case keyCodes.DOWN_ARROW:\r\n                this.processDownArrow(event);\r\n                break;\r\n            case keyCodes.KEY_A:\r\n                if (event.ctrlKey) {\r\n                    this.selectedSmartFields = this.k2Expression.smartFields.filter((d) => d.componentId !== ComponentIdMapping.TextSmartField);\r\n                }\r\n                break;\r\n            case keyCodes.KEY_Z: // ctrl-z for undo\r\n            //Only allow one undo/redo operation at a time.\r\n                if (event.ctrlKey && this._commandService.keyHaveBeenReleased()) {\r\n                    this._undoRedoService.undo();\r\n                    setTimeout(() => {\r\n                        if (this.editorDiv?.nativeElement.lastChild) {\r\n                            const lastChild = this.editorDiv.nativeElement.lastChild;\r\n                            const sel = this.$document.getSelection();\r\n                            const range = this.$document.createRange();\r\n                            range.selectNodeContents(lastChild.nodeType === Node.TEXT_NODE ? lastChild : this.getPreviousEditable(lastChild));\r\n                            range.collapse(false);\r\n                            sel.removeAllRanges();\r\n                            sel.addRange(range);\r\n                        } else {\r\n                            this.editorDiv?.nativeElement.focus();\r\n                        }\r\n                    }, 5);\r\n                }\r\n                break;\r\n            case keyCodes.KEY_Y: // ctrl-y for redo\r\n            //Only allow one undo/redo operation at a time.\r\n                if (event.ctrlKey && this._commandService.keyHaveBeenReleased()) {\r\n                    this._undoRedoService.redo();\r\n                    setTimeout(() => {\r\n                        if (this.editorDiv?.nativeElement.lastChild) {\r\n                            const lastChild = this.editorDiv.nativeElement.lastChild;\r\n                            const sel = this.$document.getSelection();\r\n                            const range = this.$document.createRange();\r\n                            range.selectNodeContents(lastChild.nodeType === Node.TEXT_NODE ? lastChild : this.getPreviousEditable(lastChild));\r\n                            range.collapse(false);\r\n                            sel.removeAllRanges();\r\n                            sel.addRange(range);\r\n                        } else {\r\n                            this.editorDiv?.nativeElement.focus();\r\n                        }\r\n                    }, 5);\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        event.stopPropagation();\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * key press event handler\r\n     * key press only gets triggered by input that changes text\r\n     *\r\n     * @param event\r\n     */\r\n    public onKeyPress(event: KeyboardEvent): boolean {\r\n        if (this.isCharacterKeyPress(event)) {\r\n            const sel = this.$document.getSelection();\r\n            this._undoRedoService.addUndoMarker(`-- textbox selection remove --`);\r\n            if (!sel || sel.isCollapsed &&\r\n                (this.selectedSmartFields.length === 1)) {\r\n                const index = (this.k2Expression.smartFields as any[]).indexOf(this.selectedSmartFields[0]);\r\n                if (this.k2Expression.smartFields[index - 1]?.componentId === this.componentIdMapping.TextSmartField) {\r\n                    for (const el of this.smartFieldContainers) {\r\n                        if (parseInt(el.element.nativeElement.id) === index) {\r\n                            this.moveCaretToPrevEditable(el.element.nativeElement);\r\n                            break;\r\n                        }\r\n                    }\r\n                } else if (this.k2Expression.smartFields[index + 1]?.componentId === this.componentIdMapping.TextSmartField) {\r\n                    for (const el of this.smartFieldContainers) {\r\n                        if (parseInt(el.element.nativeElement.id) === index) {\r\n                            this.moveCaretToNextEditable(el.element.nativeElement);\r\n                            break;\r\n                        }\r\n                    }\r\n                } else {\r\n                    (this.k2Expression.smartFields as any[]).splice(index + 1, 0, sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                        text: '',\r\n                    }));\r\n                    for (const el of this.smartFieldContainers) {\r\n                        if (parseInt(el.element.nativeElement.id) === index) {\r\n                            this.moveCaretToNextEditable(el.element.nativeElement);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                this.removeSmartFields(this.selectedSmartFields, false, true);\r\n                this.selectedSmartFields = [];\r\n            } else {\r\n                this.removeRangeFromTextbox(sel.getRangeAt(0), true);\r\n            }\r\n        }\r\n\r\n        switch (event.keyCode) {\r\n            case keyCodes.ENTER:\r\n                this.processEnterKey(event);\r\n                break;\r\n            default:\r\n                this.processValidKeyPress(event);\r\n                break;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private processValidKeyPress(evt): void {\r\n        if (this.isCharacterKeyPress(evt)) {\r\n            //TODO: Also validate max length here\r\n\r\n            // Constraint validation\r\n            switch (this.textConstraint) {\r\n                case TextBoxConstraint.Number: {\r\n                    this.allowOnlyWholeNumbers(evt);\r\n                    break;\r\n                }\r\n                case TextBoxConstraint.DropSelect:\r\n                case TextBoxConstraint.DropOnly: {\r\n                    evt.preventDefault();\r\n                    break;\r\n                }\r\n                default: {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Only numeric input accepted\r\n     *\r\n     * @param evt\r\n     */\r\n    private allowOnlyWholeNumbers(evt): void {\r\n        if (evt.charCode < 48 || evt.charCode > 57) {\r\n            evt.preventDefault();\r\n        }\r\n    }\r\n\r\n    private isCharacterKeyPress(evt) {\r\n        if (!evt) return false;\r\n        if (typeof evt.which == `undefined`) {\r\n            // This is IE, which only fires keypress events for printable keys\r\n            return true;\r\n        } else if (typeof evt.which == `number` && evt.which > 0) {\r\n            // In other browsers except old versions of WebKit, evt.which is\r\n            // only greater than zero if the keypress is a printable key.\r\n            // We need to filter out backspace and ctrl/alt/meta key combinations\r\n            return !evt.ctrlKey && !evt.metaKey && !evt.altKey && evt.which != 8;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private processLeftArrow(event: KeyboardEvent): void {\r\n        const selection = this.$document.getSelection();\r\n        if (selection.rangeCount === 0 && this.selectedSmartFields.length > 0) {\r\n            event.preventDefault();\r\n            const smartField = this.selectedSmartFields.pop();\r\n            const index = this.k2Expression.smartFields.indexOf(smartField);\r\n\r\n            for (const el of this.smartFieldContainers) {\r\n                if (parseInt(el.element.nativeElement.id) === index) {\r\n                    this.moveCaretToPrevEditable(el.element.nativeElement);\r\n                    break;\r\n                }\r\n            }\r\n            return;\r\n        }\r\n        if (!event.shiftKey) {\r\n            if (selection.isCollapsed) {\r\n                let caretNode = selection.anchorNode;\r\n                let caretOffset = selection.anchorOffset;\r\n                if (caretNode === this.editorDiv.nativeElement) {\r\n                    caretNode = caretNode.childNodes[caretOffset];\r\n                    caretOffset = 0;\r\n                    if (!caretNode) { // editordiv is empty\r\n                        return;\r\n                    }\r\n                }\r\n                if (this.isStartOfText(caretNode, caretOffset)) // start of text node\r\n                {\r\n                    while (caretNode.parentElement && caretNode.parentElement !== this.editorDiv.nativeElement) { // make sure there is no br in between\r\n                        caretNode = caretNode.parentElement;\r\n                    }\r\n                    if ((caretNode.previousSibling as HTMLElement)?.tagName?.toLowerCase() === 'br') {\r\n                        return;\r\n                    }\r\n                    const prevField = this.getPreviousSmartField(caretNode); // Previous field will always be smartfield or nothing\r\n                    const index = parseInt((prevField as HTMLElement)?.id ?? '0');\r\n                    if (prevField) {\r\n                        this.selectedSmartFields.push(this.k2Expression.smartFields[index]);\r\n                        selection.removeAllRanges();\r\n                        event.preventDefault();\r\n                    }\r\n                }\r\n            } else if (selection.rangeCount > 0) {\r\n                event.preventDefault();\r\n                this.selectedSmartFields = [];\r\n                selection.collapseToStart();\r\n            }\r\n        } else {\r\n            if (selection.rangeCount > 0) {\r\n                this.setSelectedSmartFields();\r\n            }\r\n        }\r\n    }\r\n\r\n    private processUpArrow(event: KeyboardEvent): void {\r\n        const selection = this.$document.getSelection();\r\n        if (selection.rangeCount > 0 && event.shiftKey) {\r\n            setTimeout(() => {\r\n                this.setSelectedSmartFields();\r\n            }, 0);\r\n        } else if (selection.rangeCount > 0 && this.selectedSmartFields.length) {\r\n            this.selectedSmartFields = [];\r\n        }\r\n    }\r\n\r\n    private processRightArrow(event: KeyboardEvent): void {\r\n        const selection = this.$document.getSelection();\r\n        if (selection.rangeCount === 0 && this.selectedSmartFields.length > 0) {\r\n            event.preventDefault();\r\n            const smartField = this.selectedSmartFields.pop();\r\n            const index = this.k2Expression.smartFields.indexOf(smartField);\r\n\r\n            for (const el of this.smartFieldContainers) {\r\n                if (parseInt(el.element.nativeElement.id) === index) {\r\n                    this.moveCaretToNextEditable(el.element.nativeElement);\r\n                    break;\r\n                }\r\n            }\r\n            return;\r\n        }\r\n        if (!event.shiftKey) {\r\n            if (selection.isCollapsed) {\r\n                let caretNode = selection.anchorNode;\r\n                let caretOffset = selection.anchorOffset;\r\n                if (caretNode === this.editorDiv.nativeElement) {\r\n                    caretNode = caretNode.childNodes[caretOffset];\r\n                    caretOffset = 0;\r\n                    if (!caretNode) { // editordiv is empty\r\n                        return;\r\n                    }\r\n                }\r\n                if (this.isEndOfText(caretNode, caretOffset)) // end of text value\r\n                {\r\n                    while (caretNode.parentElement && caretNode.parentElement !== this.editorDiv.nativeElement) { // make sure there is no br in between\r\n                        caretNode = caretNode.parentElement;\r\n                    }\r\n                    if ((caretNode.nextSibling as HTMLElement)?.tagName?.toLowerCase() === 'br') {\r\n                        const placeholder = this.$document.createTextNode('\\u200b');\r\n                        caretNode.nextSibling.after(placeholder);\r\n                        selection.setPosition(placeholder);\r\n                        event.preventDefault();\r\n                        return;\r\n                    }\r\n                    const nextField = this.getNextSmartField(caretNode); // Next field will always be smartfield or nothing\r\n                    const index = parseInt((nextField as HTMLElement)?.id ?? '0');\r\n                    if (nextField) {\r\n                        this.selectedSmartFields.push(this.k2Expression.smartFields[index]);\r\n                        selection.removeAllRanges();\r\n                        event.preventDefault();\r\n                    }\r\n                }\r\n            } else if (selection.rangeCount > 0 && !event.shiftKey) {\r\n                this.selectedSmartFields = [];\r\n                selection.collapseToEnd();\r\n                event.preventDefault();\r\n            }\r\n        } else {\r\n            if (selection.rangeCount > 0) {\r\n                this.setSelectedSmartFields();\r\n            }\r\n        }\r\n    }\r\n\r\n    private processDownArrow(event: KeyboardEvent): void {\r\n        const selection = this.$document.getSelection();\r\n        if (selection.rangeCount > 0 && event.shiftKey) {\r\n            setTimeout(() => {\r\n                this.setSelectedSmartFields();\r\n            }, 0);\r\n        } else if (selection.rangeCount > 0 && this.selectedSmartFields.length) {\r\n            this.selectedSmartFields = [];\r\n        }\r\n    }\r\n\r\n    private processEnterKey(event: KeyboardEvent): void {\r\n        event.preventDefault();\r\n        if (!this.isMultiLine) {\r\n            return;\r\n        }\r\n        const selection = window.getSelection();\r\n        const range = selection.getRangeAt(0);\r\n        const br = this.$document.createElement('br');\r\n        const textNode = this.$document.createTextNode('\\u200b'); //Passing ' ' directly will not end up being shown correctly\r\n        range.insertNode(br);\r\n        range.collapse(false);\r\n        range.insertNode(textNode);\r\n        range.selectNodeContents(textNode);\r\n        range.collapse(false);\r\n\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n    }\r\n\r\n    private processBackspaceDelete(event: KeyboardEvent): void {\r\n        this._undoRedoService.addUndoMarker(`-- textbox backspace delete --`);\r\n        const isBackSpace = event.keyCode === keyCodes.BACKSPACE;\r\n        const selection = this.$document.getSelection();\r\n\r\n        if (this.selectedSmartFields?.length) {\r\n            if (selection.rangeCount === 0) {\r\n                this.removeSmartFields(this.selectedSmartFields, true);\r\n            } else {\r\n                this.removeSmartFields(this.selectedSmartFields);\r\n                this.onTextChanged(event as any);\r\n            }\r\n            this.selectedSmartFields = [];\r\n        }\r\n\r\n        if (this.k2Expression.smartFields.length === 0) { // Everything was deleted\r\n            this.reRender();\r\n            setTimeout(() => {\r\n                this.editorDiv.nativeElement.focus();\r\n            }, 5);\r\n            return;\r\n        }\r\n\r\n        if (selection.isCollapsed && selection.anchorNode) { // is a caret position, not a selection\r\n            let caretNode = selection.anchorNode;\r\n            if (isBackSpace && this.isStartOfText(selection.anchorNode, selection.anchorOffset)) {\r\n                while (caretNode.parentElement && caretNode.parentElement !== this.editorDiv.nativeElement) { // make sure there is no br in between\r\n                    caretNode = caretNode.parentElement;\r\n                }\r\n                if ((caretNode.previousSibling as HTMLElement)?.tagName?.toLowerCase() === 'br') {\r\n                    return;\r\n                }\r\n                const prevField = this.getPreviousSmartField(selection.anchorNode) as HTMLElement;\r\n                if (prevField) {\r\n                    event.preventDefault();\r\n                    this.removeSmartFields([this.k2Expression.smartFields[parseInt(prevField.id)]]);\r\n                    setTimeout(() => { this.onTextChanged(event as any); }, 0);\r\n                }\r\n                return;\r\n            }\r\n            if (!isBackSpace && this.isEndOfText(selection.anchorNode, selection.anchorOffset)) {\r\n                while (caretNode.parentElement && caretNode.parentElement !== this.editorDiv.nativeElement) { // make sure there is no br in between\r\n                    caretNode = caretNode.parentElement;\r\n                }\r\n                if ((caretNode.nextSibling as HTMLElement)?.tagName?.toLowerCase() === 'br') {\r\n                    return;\r\n                }\r\n                const nextField = this.getNextSmartField(selection.anchorNode) as HTMLElement;\r\n                if (nextField) {\r\n                    event.preventDefault();\r\n                    this.removeSmartFields([this.k2Expression.smartFields[parseInt(nextField.id)]]);\r\n                    setTimeout(() => { this.onTextChanged(event as any); }, 0);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * sanitize the text for model update\r\n     *\r\n     * @param text\r\n     */\r\n    public sanitizeText(text: string): string {\r\n        if (this.codeView) {\r\n            text = this.decodeHtml(text);\r\n        }\r\n\r\n        let cleanedText: string = text;\r\n        const replacements = [\r\n            { regex: /[\\u200b]/g, value: '' }, // remove nbsp\r\n            { regex: /<\\!--.*?-->/g, value: '' } // remove html comments\r\n        ];\r\n\r\n        if (!this.isMultiLine) {\r\n            replacements.push({ regex: /\\r?\\n|\\r/g, value: '' }); // remove any newlines\r\n            replacements.push({ regex: /\\<br\\>/g, value: '' }); // and any <br>\r\n        }\r\n\r\n        if (cleanedText && cleanedText.length > 0) {\r\n            for (const toReplace of replacements) {\r\n                cleanedText = cleanedText.replace(toReplace.regex, toReplace.value);\r\n            }\r\n        }\r\n\r\n        return cleanedText;\r\n    }\r\n\r\n    /**\r\n     * decode given html to raw text\r\n     *\r\n     * @param html\r\n     */\r\n    private decodeHtml(html) {\r\n        const txt = this.$document.createElement('textarea');\r\n        txt.innerHTML = html;\r\n        const decoded = txt.value;\r\n        txt.remove();\r\n        return decoded;\r\n    }\r\n\r\n    /**\r\n     * Format the text for displaying\r\n     *\r\n     * @param text\r\n     */\r\n    public formatText(text: string): string {\r\n        if (!(text?.trim())) {\r\n            return '\\u200b';\r\n        }\r\n        let formattedText: string = text;\r\n        const replacements = [\r\n            { regex: /\\<br\\>/g, value: '<br>\\u200b' }\r\n        ];\r\n\r\n        if (formattedText && formattedText.length > 0) {\r\n            for (const toReplace of replacements) {\r\n                formattedText = formattedText.replace(toReplace.regex, toReplace.value);\r\n            }\r\n        }\r\n\r\n        return formattedText;\r\n    }\r\n\r\n    private isEndOfText(node: Node, offset: number): boolean {\r\n        if (node.nodeType === Node.TEXT_NODE) {\r\n            if (offset < (node as Text).length && node.nodeValue !== '\\u200b') { // not the end of the text node\r\n                return false;\r\n            }\r\n        }\r\n        if (node === this.editorDiv.nativeElement) {\r\n            node = node.childNodes[offset];\r\n            if (!node) { // editordiv is empty\r\n                return true;\r\n            }\r\n        }\r\n\r\n        let nextNode: Node = node;\r\n        do {\r\n            nextNode = this.getNextNode(nextNode);\r\n            if (nextNode.nodeType === Node.TEXT_NODE) {\r\n                return false;\r\n            }\r\n        } while (nextNode &&\r\n        this.editorDiv.nativeElement.contains(nextNode) &&\r\n            !((nextNode as HTMLElement).tagName?.toLowerCase() === 'k2-smart-field-container')\r\n        );\r\n        return true;\r\n    }\r\n\r\n    private isStartOfText(node: Node, offset: number): boolean {\r\n        if (node.nodeType === Node.TEXT_NODE) {\r\n            if (offset !== 0 && node.nodeValue !== '\\u200b') { // not the start of the text node\r\n                return false;\r\n            }\r\n        }\r\n        if (node === this.editorDiv.nativeElement) {\r\n            node = node.childNodes[offset];\r\n            if (!node) { // editordiv is empty\r\n                return true;\r\n            }\r\n        }\r\n        let prevNode: Node = node;\r\n        do {\r\n            prevNode = this.getPreviousNode(prevNode);\r\n            if (prevNode.nodeType === Node.TEXT_NODE) {\r\n                return false;\r\n            }\r\n        } while (prevNode &&\r\n        this.editorDiv.nativeElement.contains(prevNode) &&\r\n            !((prevNode as HTMLElement).tagName?.toLowerCase() === 'k2-smart-field-container')\r\n        );\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Remove smartfields from the current textbox\r\n     *\r\n     * @param fields fields to remove\r\n     * @param shouldMergeText should any text be merged when a field is deleted\r\n     */\r\n    public removeSmartFields(fields: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField[], shouldMergeText = false, shouldRemoveText = true) {\r\n        for (const field of fields) {\r\n            const index = this.k2Expression.smartFields.indexOf(field);\r\n            if (index === -1) {\r\n                throw new Error('tried to remove smartfield that was not in this textbox');\r\n            }\r\n            if (this.k2Expression.smartFields[index] !== field) {\r\n                throw new Error('tried to remove smartfield that was not at the index in this textbox');\r\n            }\r\n\r\n            if (shouldRemoveText &&\r\n                this.k2Expression.smartFields[index - 1]?.componentId === ComponentIdMapping.TextSmartField &&\r\n                this.k2Expression.smartFields[index + 1]?.componentId === ComponentIdMapping.TextSmartField &&\r\n                !fields.includes(this.k2Expression.smartFields[index + 1])) {\r\n                if (shouldMergeText) {\r\n                    (this.k2Expression.smartFields[index - 1] as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField).text =\r\n                        ((this.k2Expression.smartFields[index - 1] as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField).text as string)\r\n                            .concat((this.k2Expression.smartFields[index + 1] as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField).text);\r\n                }\r\n                this.k2Expression.smartFields.splice(index + 1, 1);\r\n            }\r\n            field.removeFromModelArray();\r\n            const existingEl = this.smartFieldContainers.find((sfc) => sfc.dataModel === field);\r\n            if (existingEl) {\r\n                existingEl.element.nativeElement.classList.add('deleted');\r\n            }\r\n            this.displayedFields.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * set the states for the composer\r\n     *\r\n     * @param composerActive\r\n     */\r\n    public toggleStateForComposer(composerActive: boolean) {\r\n        this.composerEnabled = composerActive;\r\n        this.enabled = !composerActive;\r\n    }\r\n\r\n    /**\r\n     * Retrieve Text value of a field\r\n     *\r\n     * @param Node Node inside the field\r\n     * @param offset the offset of the start node\r\n     * @param forwards take all text to end of field\r\n     * @param backwards take all text from the start of the field\r\n     */\r\n    private getTextValue(node: Node, offset: number = null, forwards: boolean = null, backwards: boolean = null): string {\r\n        let fieldValue: string;\r\n        let fieldValueForward = '';\r\n        let fieldValueBackward = '';\r\n\r\n        if (node !== this.editorDiv.nativeElement && !this.editorDiv.nativeElement.contains(node)) {\r\n            return null;\r\n        }\r\n\r\n        let currentNode = node;\r\n        while (currentNode.parentElement && currentNode.parentElement != this.editorDiv.nativeElement) {\r\n            currentNode = currentNode.parentElement;\r\n        }\r\n\r\n        if (currentNode.nodeType === Node.COMMENT_NODE) {\r\n            fieldValue = '';\r\n        } else {\r\n            const range = this.$document.createRange();\r\n            if ((offset !== undefined || offset !== null) && forwards) {\r\n                range.setStart(node, offset);\r\n                range.setEndAfter(currentNode);\r\n            } else if ((offset !== undefined || offset !== null) && backwards) {\r\n                range.setStartBefore(currentNode);\r\n                range.setEnd(node, offset);\r\n            } else {\r\n                range.selectNode(currentNode);\r\n            }\r\n            const textFrag = range.cloneContents();\r\n            const container: HTMLElement = this.$document.createElement('div');\r\n            container.appendChild(textFrag.cloneNode(true));\r\n            fieldValue = container.innerHTML;\r\n            container.remove();\r\n        }\r\n\r\n        let backwardsNode: Node = backwards || offset === undefined || offset === null ? currentNode.previousSibling : null;\r\n        let forwardsNode: Node = forwards || offset === undefined || offset === null ? currentNode.nextSibling : null;\r\n\r\n        while (backwardsNode || forwardsNode) {\r\n            switch (backwardsNode?.nodeType) {\r\n                case Node.ELEMENT_NODE:\r\n                    if ((backwardsNode as HTMLElement).classList?.contains('deleted')) { // disregard deleted smartfields\r\n                        break;\r\n                    } else if ($(this.editorDiv.nativeElement).has(backwardsNode as HTMLElement).length === 0 ||\r\n                        (backwardsNode as HTMLElement).tagName.toLowerCase() === 'k2-smart-field-container') { // reached the start\r\n                        backwardsNode = null;\r\n                    } else {\r\n                        fieldValueBackward = (backwardsNode as HTMLElement).outerHTML.concat(fieldValueBackward);\r\n                    }\r\n                    break;\r\n                case Node.TEXT_NODE:\r\n                    fieldValueBackward = (backwardsNode as Text).textContent.concat(fieldValueBackward);\r\n                    break;\r\n                case Node.COMMENT_NODE:\r\n                    break;\r\n                default: // Do nothing because its most likely undefined/null\r\n                    break;\r\n            }\r\n\r\n            switch (forwardsNode?.nodeType) {\r\n                case Node.ELEMENT_NODE:\r\n                    if ((forwardsNode as HTMLElement).classList.contains('deleted')) { //disregard deleted smart fields\r\n                        break;\r\n                    } else if ($(this.editorDiv.nativeElement).has(forwardsNode as HTMLElement).length === 0 ||\r\n                        (forwardsNode as HTMLElement).tagName.toLowerCase() === 'k2-smart-field-container') { // reached the end\r\n                        forwardsNode = null;\r\n                    } else {\r\n                        fieldValueForward = fieldValueForward.concat((forwardsNode as HTMLElement).outerHTML);\r\n                    }\r\n                    break;\r\n                case Node.TEXT_NODE:\r\n                    fieldValueForward = fieldValueForward.concat((forwardsNode as Text).textContent);\r\n                    break;\r\n                case Node.COMMENT_NODE: // Need special logic here to filter angular comments before comments can be saved\r\n                    break;\r\n                default: // Do nothing because its most likely undefined/null\r\n                    break;\r\n            }\r\n\r\n            if (backwardsNode) {\r\n                backwardsNode = backwardsNode.previousSibling;\r\n            }\r\n            if (forwardsNode) {\r\n                forwardsNode = forwardsNode.nextSibling;\r\n            }\r\n        }\r\n\r\n        return fieldValueBackward.concat(fieldValue, fieldValueForward);\r\n    }\r\n\r\n    /**\r\n     * Indicates whether or not the control is a rich text editor control or not (read-only)\r\n     */\r\n    public get isRichTextBox(): boolean {\r\n        return (typeof this.k2Expression.richText !== 'undefined' && this.k2Expression.richText === true);\r\n    }\r\n\r\n    private mergeTextFields() {\r\n        for (let i = 0; i < this.k2Expression.smartFields.length; i++) {\r\n            let field = this.k2Expression.smartFields[i] as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField;\r\n            while (field &&\r\n                field.componentId === ComponentIdMapping.TextSmartField\r\n                && (!field.text || !field.text.trim())) {\r\n                this.k2Expression.smartFields.splice(i, 1);\r\n                field = this.k2Expression.smartFields[i] as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField;\r\n            }\r\n            while (field &&\r\n                field.componentId === ComponentIdMapping.TextSmartField &&\r\n                this.k2Expression.smartFields[i + 1]?.componentId === ComponentIdMapping.TextSmartField) {\r\n                (this.k2Expression.smartFields[i] as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField).text =\r\n                    ((this.k2Expression.smartFields[i] as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField).text as string)\r\n                        .concat((this.k2Expression.smartFields[i + 1] as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField).text);\r\n                this.k2Expression.smartFields.splice(i + 1, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    private getFieldsFromSelection(): any[] {\r\n        if (!this.isFocused && !(this.selectedSmartFields.length > 0)) {\r\n            return null;\r\n        }\r\n        const configuredFields = [];\r\n        const selection = this.$document.getSelection();\r\n        if (selection && selection.rangeCount > 0 && !selection.isCollapsed && (selection.anchorNode === this.editorDiv.nativeElement || $(selection.anchorNode).parents('.k2-text-editor').length > 0)) { // ensure that the selection is inside the editor and that there is a selection\r\n            const range = selection.getRangeAt(0);\r\n            this._clipboardService.setCurrentContext('K2Textbox');\r\n\r\n            const startOffset = range.startContainer === this.editorDiv.nativeElement ? 0 : range.startOffset;\r\n            const startNode = range.startContainer === this.editorDiv.nativeElement ? range.startContainer.childNodes[range.startOffset] : range.startContainer;\r\n            const fieldBeforeStart = this.getPreviousSmartField(startNode);\r\n            const startIndex = fieldBeforeStart ? parseInt((fieldBeforeStart as HTMLElement).id) + 1 : 0; // caret start index\r\n\r\n            const endOffset = range.endContainer === this.editorDiv.nativeElement ? 0 : range.endOffset;\r\n            const endNode = range.endContainer === this.editorDiv.nativeElement ? range.endContainer.childNodes[range.endOffset] : range.endContainer;\r\n            const fieldAfterEnd = this.getNextSmartField(endNode);\r\n            const endIndex = fieldAfterEnd ? parseInt((fieldAfterEnd as HTMLElement).id) - 1 : this.k2Expression.smartFields.length - 1; // caret end index\r\n\r\n            if (startIndex === endIndex) {\r\n                const textFrag = range.cloneContents();\r\n                const container: HTMLElement = this.$document.createElement('div');\r\n                container.appendChild(textFrag.cloneNode(true));\r\n                configuredFields.push(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                    text: this.codeView ? this.decodeHtml(container.innerHTML) : container.innerHTML,\r\n                }));\r\n                container.remove();\r\n            } else {\r\n                for (let i = startIndex; i <= endIndex; i++) {\r\n                    if (this.selectedSmartFields.includes(this.k2Expression.smartFields[i])) {\r\n                        configuredFields.push(this.k2Expression.smartFields[i]);\r\n                    } else {\r\n                        switch (i) {\r\n                            case startIndex:\r\n                                configuredFields.push(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                                    text: this.sanitizeText(this.getTextValue(startNode, startOffset, true)),\r\n                                }));\r\n                                break;\r\n                            case endIndex:\r\n                                configuredFields.push(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                                    text: this.sanitizeText(this.getTextValue(endNode, endOffset, false, true))\r\n                                }));\r\n                                break;\r\n                            default:\r\n                                let field = this.k2Expression.smartFields[i];\r\n                                if (field.componentId === ComponentIdMapping.TextSmartField) {\r\n                                    field = field.clone();\r\n                                }\r\n                                configuredFields.push(field);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } else if (this.selectedSmartFields) {\r\n            this.selectedSmartFields.forEach((field) => {\r\n                configuredFields.push(field);\r\n            });\r\n        }\r\n        return configuredFields;\r\n    }\r\n\r\n    /**\r\n     * Remove the selected contents from the textbox\r\n     */\r\n    public removeRangeFromTextbox(range: Range, shouldRemoveSmartFields: boolean = true): void {\r\n        this.setSelectedSmartFields(range);\r\n\r\n        // Remove the content of the selection (cutting)\r\n        if (range && !range.collapsed) {\r\n            range.deleteContents();\r\n        }\r\n\r\n        if (this.selectedSmartFields && shouldRemoveSmartFields) {\r\n            this.removeSmartFields(this.selectedSmartFields);\r\n            this.selectedSmartFields = [];\r\n        }\r\n\r\n        if (range) {\r\n            this.textChangedDebounced(null, range);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Focus this textbox\r\n     */\r\n    public doFocus() {\r\n        this.editorDiv.nativeElement.focus();\r\n    }\r\n\r\n    private _ownsActiveComposer: boolean;\r\n    public disableForComposer() {\r\n        this._ownsActiveComposer = true;\r\n        this.toggleStateForComposer(this._ownsActiveComposer);\r\n    }\r\n\r\n    public enableForComposer() {\r\n        this._ownsActiveComposer = false;\r\n        this.toggleStateForComposer(this._ownsActiveComposer);\r\n    }\r\n\r\n    public composerClosed() {\r\n        for (const container of this.smartFieldContainers) {\r\n            container.isConfiguring = false;\r\n        }\r\n    }\r\n}\r\n","<div [ngClass]=\" {'k2-text-box-ex': true, 'focused' : isFocused, 'multi-line' : isMultiLine ,'single-line' : !isMultiLine }\" (click)=\"onClick($event)\">\r\n    <div *ngIf=\"showWaterMark\" class=\"k2-text-box-watermark\" #watermark (click)=\"onClick($event)\">{{k2Watermark}}</div>\r\n    <div class=\"k2-text-editor-container\" [class.has-browse]=\"k2ShowBrowseButton\" k2-scrollbar\r\n         [horizontal]=\"true\"\r\n         [vertical]=\"isMultiLine\"\r\n         (click)=\"onClick($event)\"\r\n         [style]=\"{ width: k2ShowBrowseButton ? 'calc(100% -35px)' : '100%'}\">\r\n        <div class=\"k2-text-editor-overflow-container\" *ngIf=\"!hideEditor\">\r\n            <div #editorDiv\r\n                 class=\"k2-text-editor\"\r\n                 (focus)=\"onFocus($event)\"\r\n                 (blur)=\"onBlur($event)\"\r\n                 (keydown)=\"onKeyDown($event)\"\r\n                 (mousemove)=\"onMouseMove($event)\"\r\n                 (mousedown)=\"onMouseDown($event)\"\r\n                 (keypress)=\"onKeyPress($event)\"\r\n                 [contentEditable]=\"enabled\"\r\n                 (dragenter)=\"onDragEnter($event)\"\r\n                 (dragleave)=\"onDragLeave($event)\"\r\n                 (dragover)=\"onDragOver($event)\"\r\n                 (input)=\"onTextChanged($event)\"\r\n                 (drop)=\"onDrop($event)\"\r\n                 (dragstart)=\"onDragStart($event)\"\r\n                 [ngClass]=\"{ 'multi-line': isMultiLine, 'rich-text': k2Expression?.richText, 'has-active-composer': composerEnabled }\"\r\n                 *ngIf=\"!codeView\">\r\n                <ng-container *ngFor=\"let dataModel of displayedFields; index as i;\">\r\n                    <ng-container *ngIf=\"dataModel.componentId !== componentIdMapping.TextSmartField && k2Expression.smartFields[i-1]?.componentId !== componentIdMapping.TextSmartField\">&#8203;</ng-container>\r\n                    <k2-smart-field-container class=\"smart-field-container k2-text-box-smart-field\"\r\n                                              *ngIf=\"dataModel.componentId !== componentIdMapping.TextSmartField\"\r\n                                              #smartFieldContainer\r\n                                              [dataModel]=\"dataModel\"\r\n                                              [id]=\"i\"\r\n                                              [isSelected]=\"selectedSmartFields.includes(dataModel)\"\r\n                                              [k2TextBox]=\"this\"\r\n                                              (smartFieldClick)=\"onSmartFieldClick($event)\"\r\n                                              (openSmartFieldComposer)=\"onOpenSmartFieldComposer($event)\"\r\n                                              [enableDragging]=\"false\"\r\n                                              contenteditable=\"false\">\r\n                    </k2-smart-field-container>\r\n                    <span *ngIf=\"dataModel.componentId === componentIdMapping.TextSmartField\" [outerHTML]=\"formatText(dataModel.text)\"></span>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"!displayedFields?.length || displayedFields[displayedFields.length-1].componentId !== componentIdMapping.TextSmartField\">&#8203;</ng-container>\r\n            </div>\r\n            <div #editorDiv\r\n                 class=\"k2-text-editor code\"\r\n                 (focus)=\"onFocus($event)\"\r\n                 (blur)=\"onBlur($event)\"\r\n                 (keydown)=\"onKeyDown($event)\"\r\n                 (mousemove)=\"onMouseMove($event)\"\r\n                 (mousedown)=\"onMouseDown($event)\"\r\n                 (keypress)=\"onKeyPress($event)\"\r\n                 [contentEditable]=\"enabled\"\r\n                 (dragenter)=\"onDragEnter($event)\"\r\n                 (dragleave)=\"onDragLeave($event)\"\r\n                 (dragover)=\"onDragOver($event)\"\r\n                 (input)=\"onTextChanged($event)\"\r\n                 (drop)=\"onDrop($event)\"\r\n                 [ngClass]=\"{ 'multi-line': isMultiLine, 'rich-text': k2Expression?.richText, 'has-active-composer': composerEnabled }\"\r\n                 *ngIf=\"codeView\">\r\n                <ng-container *ngFor=\"let dataModel of displayedFields; index as i;\">\r\n                    <ng-container *ngIf=\"dataModel.componentId !== componentIdMapping.TextSmartField && k2Expression.smartFields[i-1]?.componentId !== componentIdMapping.TextSmartField\">&#8203;</ng-container>\r\n                    <k2-smart-field-container class=\"smart-field-container k2-text-box-smart-field k2-find-me-please\"\r\n                                              *ngIf=\"dataModel.componentId !== componentIdMapping.TextSmartField\"\r\n                                              #smartFieldContainer\r\n                                              [dataModel]=\"dataModel\"\r\n                                              [id]=\"i\"\r\n                                              [isSelected]=\"selectedSmartFields.includes(dataModel)\"\r\n                                              [k2TextBox]=\"this\"\r\n                                              (smartFieldClick)=\"onSmartFieldClick($event)\">\r\n                    </k2-smart-field-container>\r\n                    <ng-container *ngIf=\"dataModel.componentId === componentIdMapping.TextSmartField\">{{dataModel.text}}</ng-container>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"!displayedFields?.length || displayedFields[displayedFields.length-1].componentId !== componentIdMapping.TextSmartField\">&#8203;</ng-container>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"k2-textbox-browse-button\" *ngIf=\"k2ShowBrowseButton === true\">\r\n        <div class=\"icon icon-set-dropdownset icon-size16 ic-pickercontrol\" (click)=\"k2ButtonClick()\"></div>\r\n    </div>\r\n    <div *ngIf=\"k2Watermarkicon\" [ngClass]=\"k2Watermarkicon +' watermarkIcon'\" #watermarkIcon>\r\n        <ng-container *ngIf=\"showCharCount\"> {{textLength}} : {{codeView?'HTML':'WYSIWYG'}}</ng-container>\r\n    </div>\r\n    <k2-badges [k2Model]=\"k2Expression\" [alwaysHideBadge]=\"alwaysHideBadge\"> </k2-badges>\r\n</div>\r\n","import { Component, ElementRef, EventEmitter, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\r\nimport { IExpression } from '../../../../types/models/core/configured-smart-fields/i-expression';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { TextBoxConstraint } from '../../../shared/enums/text-box/text-box-constraint';\r\n\r\n@Component({\r\n    selector: 'k2-time-span',\r\n    templateUrl: './time-span.component.html',\r\n    styleUrls: ['./time-span.component.less']\r\n})\r\nexport class TimeSpanComponent implements OnChanges {\r\n    @Input() daysExpression: IExpression;\r\n    @Input() hoursExpression: IExpression;\r\n    @Input() minutesExpression: IExpression;\r\n    @Input() secondsExpression: IExpression;\r\n    @Input() isDisabled: boolean;\r\n    @Input() hideLabels: boolean;\r\n    @Input() noBorder: boolean;\r\n\r\n    @Output() k2OnFocus: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n    //Public properties\r\n    showLeft = false;\r\n    showRight = true;\r\n\r\n    //Enums\r\n    public textBoxConstraint = TextBoxConstraint;\r\n\r\n    //Private properties\r\n    private root: HTMLElement;\r\n\r\n    constructor(private resourceService: ResourceService,\r\n        private element: ElementRef) {\r\n        this.root = element.nativeElement;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.isDisabled?.currentValue) { // should clear the values if disabled.\r\n            this.daysExpression.smartFields.clear();\r\n            this.hoursExpression.smartFields.clear();\r\n            this.minutesExpression.smartFields.clear();\r\n            this.secondsExpression.smartFields.clear();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns resource string from .resx file using name and key\r\n     *\r\n     * @param resourceName name of resx file\r\n     * @param key resource lookup key\r\n     */\r\n    getFromResx = (resourceName: string, key: string) => this.resourceService.getFromResx(resourceName, key);\r\n\r\n    onTextBoxFocus(event): void {\r\n        const focusedTextBox = event.target.closest('.inner-carousel-control');\r\n        const allTextBoxes: HTMLCollection = this.root.getElementsByTagName('k2-text-box');\r\n        let textBoxIndex = -1;\r\n\r\n        for (let a = 0; a < allTextBoxes.length; a++) {\r\n            if (allTextBoxes[a].id === focusedTextBox.id) {\r\n                textBoxIndex = a;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (this.showLeft && textBoxIndex < 1) {\r\n            this.moveNav('left');\r\n        } else if (this.showRight && textBoxIndex > 2) {\r\n            this.moveNav('right');\r\n        }\r\n\r\n        this.k2OnFocus.emit();\r\n    }\r\n\r\n    moveNav(way: string): void {\r\n        if (way === 'right') {\r\n            this.showRight = false;\r\n            this.showLeft = true;\r\n        }\r\n\r\n        if (way === 'left') {\r\n            this.showLeft = false;\r\n            this.showRight = true;\r\n        }\r\n    }\r\n\r\n    onKeyDown(e: KeyboardEvent, index: number) {\r\n        if (e.keyCode === 9) {\r\n            switch (index) {\r\n                case 1:\r\n                    this.moveNav('left');\r\n                    break;\r\n                case 2:\r\n                    this.moveNav('right');\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","<div class=\"k2-carousel\">\r\n    <div class=\"top-section\" [hidden]=\"hideLabels\">\r\n        <div class=\"controls\" style=\"border: none;\">\r\n            <div class=\"inner-carousel\">\r\n                <label class=\"inner-carousel-control\" [class.showLast]=\"showLeft\">{{getFromResx('Wizards', 'wizard_TimeSpan_Days')|async}}</label>\r\n                <label class=\"inner-carousel-control has-margin\">{{getFromResx('Wizards', 'wizard_TimeSpan_Hours')|async}}</label>\r\n                <label class=\"inner-carousel-control\">{{getFromResx('Wizards', 'wizard_TimeSpan_Minutes')|async}}</label>\r\n                <label class=\"inner-carousel-control has-margin\" [class.last]=\"!showLeft\">{{getFromResx('Wizards', 'wizard_TimeSpan_Seconds')|async}}</label>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"bot-section\" [attr.disabled]=\"isDisabled\">\r\n        <div class=\"toggle-left\" [class.is-disabled]=\"!showLeft\" (click)=\"moveNav('left')\">\r\n            <span class=\"icon icon-set-toolbox icon-size16 ic-collapsemenu\"></span>\r\n        </div>\r\n        <k2-badges class=\"badge-item\" force-show=\"false\"></k2-badges>\r\n        <div class=\"controls\" [class.no-border]=\"noBorder\">\r\n            <div class=\"inner-carousel\">\r\n                <k2-text-box [class.showLast]=\"showLeft\"\r\n                             id=\"days\"\r\n                             class=\"inner-carousel-control control-background\"\r\n                             (k2TextboxOnFocus)=\"onTextBoxFocus($event)\"\r\n                             (keydown)=\"onKeyDown($event, 0);\"\r\n                             [k2Expression]=\"daysExpression\"\r\n                             [k2Watermark]=\"getFromResx('Wizards', 'wizard_TimeSpan_Days')|async\"\r\n                             [textConstraint]=\"textBoxConstraint.Number\"\r\n                             [alwaysHideBadge]=\"true\">\r\n                </k2-text-box>\r\n                <div [class.showLast]=\"showLeft\" class=\"spacer\"></div>\r\n                <k2-text-box class=\"inner-carousel-control control-background\"\r\n                             id=\"hours\"\r\n                             (keydown)=\"onKeyDown($event, 1);\"\r\n                             (k2TextboxOnFocus)=\"onTextBoxFocus($event)\"\r\n                             [k2Expression]=\"hoursExpression\"\r\n                             [k2Watermark]=\"getFromResx('Wizards', 'wizard_TimeSpan_Hours')|async\"\r\n                             [textConstraint]=\"textBoxConstraint.Number\"\r\n                             [alwaysHideBadge]=\"true\">\r\n                </k2-text-box>\r\n                <div class=\"spacer\"></div>\r\n                <k2-text-box class=\"inner-carousel-control control-background\"\r\n                             id=\"minutes\"\r\n                             (keydown)=\"onKeyDown($event, 2);\"\r\n                             (k2TextboxOnFocus)=\"onTextBoxFocus($event)\"\r\n                             [k2Expression]=\"minutesExpression\"\r\n                             [k2Watermark]=\"getFromResx('Wizards', 'wizard_TimeSpan_Minutes')|async\"\r\n                             [textConstraint]=\"textBoxConstraint.Number\"\r\n                             [alwaysHideBadge]=\"true\">\r\n                </k2-text-box>\r\n                <div class=\"spacer\" *ngIf=\"showLeft\"></div>\r\n                <k2-text-box class=\"inner-carousel-control control-background\"\r\n                             id=\"seconds\"\r\n                             (keydown)=\"onKeyDown($event, 3);\"\r\n                             (k2TextboxOnFocus)=\"onTextBoxFocus($event)\"\r\n                             [k2Expression]=\"secondsExpression\"\r\n                             [k2Watermark]=\"getFromResx('Wizards', 'wizard_TimeSpan_Seconds')|async\"\r\n                             [textConstraint]=\"textBoxConstraint.Number\"\r\n                             [alwaysHideBadge]=\"true\">\r\n                </k2-text-box>\r\n            </div>\r\n        </div>\r\n        <div class=\"toggle-right\" [class.is-disabled]=\"!showRight\" (click)=\"moveNav('right')\">\r\n            <span class=\"icon icon-set-toolbox icon-size16 ic-expandmenu\"></span>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Directive, ElementRef, Injector, Input } from '@angular/core';\r\nimport { UpgradeComponent } from '@angular/upgrade/static';\r\n\r\n@Directive({\r\n    selector: 'k2-toggle-switch'\r\n    //Extending old upgraded directive (directives/K2ToggleSwitch/k2ToggleSwitch.ts)\r\n})\r\nexport class ToggleSwitchComponent extends UpgradeComponent {\r\n    @Input() public k2Checked: boolean;\r\n    @Input() public k2Model: any;\r\n\r\n    @Input() public k2ToggleButtonClicked: (checked: boolean, model: any) => void;\r\n\r\n    constructor(elementRef: ElementRef, injector: Injector) {\r\n        super('k2ToggleSwitch', elementRef, injector);\r\n    }\r\n\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { UpgradeModule } from '@angular/upgrade/static';\r\nimport { DirectivesModule } from '../directives/directives.module';\r\nimport { BadgesComponent } from './common/badges/badges.component';\r\nimport { BreadCrumbItemComponent } from './bread-crumb/bread-crumb-item/bread-crumb-item.component';\r\nimport { BreadCrumbComponent } from './bread-crumb/bread-crumb.component';\r\nimport { ChooseControlComponent } from './common/choose-control/choose-control.component';\r\nimport { ChooseControlDefaultLabelComponent } from './common/choose-control/templates/choose-control-default-label/choose-control-default-label.component';\r\nimport { SpinnerComponent } from './spinner/spinner.component';\r\nimport { ToggleSwitchComponent } from './common/toggle-switch/toggle-switch.component';\r\nimport { RibbonComponent } from './ribbon/ribbon.component';\r\nimport { TabFileComponent } from './ribbon/tab-file/tab-file.component';\r\nimport { TabItemInfoComponent } from './ribbon/tab-file/tab-item-info/tab-item-info.component';\r\nimport { TabItemOptionsComponent } from './ribbon/tab-file/tab-item-options/tab-item-options.component';\r\nimport { TabHomeComponent } from './ribbon/tab-home/tab-home.component';\r\nimport { TabViewComponent } from './ribbon/tab-view/tab-view.component';\r\nimport { ScrollbarComponent } from './common/scrollbar/scrollbar.component';\r\nimport { StackPanelComponent } from './stack-panel/stack-panel.component';\r\nimport { ToolboxComponent } from './toolbox/toolbox.component';\r\nimport { CreateSmartFieldsComponent } from './wizard-popup/smartforms/create-smart-fields/create-smart-fields.component';\r\nimport { ItemReferencesComponent } from './item-references/item-references.component';\r\nimport { TextAreaComponent } from './common/text-area/text-area.component';\r\nimport { BaseComponent } from './base/base.component';\r\nimport { SmartFormsRemoveIntegrationComponent } from './wizard-popup/smartforms/remove-integration/remove-integration.component';\r\nimport { SmartFormsSummaryComponent } from './wizard-popup/smartforms/summary/smart-forms-summary.component';\r\nimport { SharePointSummaryComponent } from './wizard-popup/sharepoint/summary/summary.component';\r\nimport { ConfigureFormRuleComponent } from './wizard-popup/smartforms/configure-form-rule/configure-form-rule.component';\r\nimport { SummaryResultComponent } from './wizard-popup/smartforms/summary-result/summary-result.component';\r\nimport { ConfigureStartRuleComponent } from './wizard-popup/smartforms/configure-start-rule/configure-start-rule.component';\r\nimport { SmartFormsRulesComponent } from './wizard-popup/smartforms/smart-forms-rules/smart-forms-rules.component';\r\nimport { CreateReferencesComponent } from './wizard-popup/sharepoint/create-references/create-references.component';\r\nimport { StartWorkflowEventsComponent } from './wizard-popup/sharepoint/start-workflow-events/start-workflow-events.component';\r\nimport { SharepointRemoveIntegrationComponent } from './wizard-popup/sharepoint/remove/remove-integration.component';\r\nimport { InputComponent } from './common/input/input.component';\r\nimport { SmartFormsConfigureStateComponent } from './wizard-popup/smartforms/configure-state/configure-state.component';\r\nimport { HierarchyDialogComponent } from './popup/hierarchy-dialog/hierarchy-dialog.component';\r\nimport { DataMapperComponent } from './wizard-popup/event-platform/data-mapper/data-mapper.component';\r\nimport { HelpLinkComponent } from './common/help-link/help-link/help-link.component';\r\nimport { DataFieldMapperComponent } from './data-field-mapper/data-field-mapper.component';\r\nimport { EventPlatformRemoveComponent } from './wizard-popup/event-platform/event-platform-remove/event-platform-remove.component';\r\nimport { DropDownMenuItemComponent } from './common/drop-down/drop-down-menu-item/drop-down-menu-item.component';\r\nimport { ErrorBarComponent } from './error-bar/error-bar.component';\r\nimport { ErrorBarConsoleComponent } from './error-bar/error-bar-console/error-bar-console.component';\r\nimport { ErrorBarNotifierComponent } from './error-bar/error-bar-notifier/error-bar-notifier.component';\r\nimport { CommandItemComponent } from './common/drop-down/drop-down-menu-item-templates/command-item/command-item.component';\r\nimport { DefaultItemComponent } from './common/drop-down/drop-down-menu-item-templates/default-item/default-item.component';\r\nimport { GroupBooleanOperatorExpressionItemComponent } from './common/drop-down/drop-down-menu-item-templates/group-boolean-operator-expression-item/group-boolean-operator-expression-item.component';\r\nimport { ItemDisabledComponent } from './common/drop-down/drop-down-menu-item-templates/item-disabled/item-disabled.component';\r\nimport { ReferenceItemComponent } from './common/drop-down/drop-down-menu-item-templates/reference-item/reference-item.component';\r\nimport { ReferenceMultiItemComponent } from './common/drop-down/drop-down-menu-item-templates/reference-multi-item/reference-multi-item.component';\r\nimport { RulesDestinationSetItemComponent } from './common/drop-down/drop-down-menu-item-templates/rules-destination-set-item/rules-destination-set-item.component';\r\nimport { RulesOutcomeItemComponent } from './common/drop-down/drop-down-menu-item-templates/rules-outcome-item/rules-outcome-item.component';\r\nimport { SimpleExpressionOperatorItemComponent } from './common/drop-down/drop-down-menu-item-templates/simple-expression-operator-item/simple-expression-operator-item.component';\r\nimport { SmartFieldSmoFilterItemComponent } from './common/drop-down/drop-down-menu-item-templates/smart-field-smo-filter-item/smart-field-smo-filter-item.component';\r\nimport { SmartFieldContainerComponent } from './smart-fields/smart-field-container/smart-field-container.component';\r\nimport { TextboxComponent } from './common/text-box/text-box.component';\r\nimport { DropDownComponent } from './common/drop-down/drop-down.component';\r\nimport { DropDownMenuComponent } from './common/drop-down/drop-down-menu/drop-down-menu.component';\r\nimport { UserDialogComponent } from './popup/user-dialog/user-dialog.component';\r\nimport { ToolboxTrashComponent } from './rules-designer/toolbox-trash/toolbox-trash.component';\r\nimport { FilterControlComponent } from './common/filter-control/filter-control.component';\r\nimport { GroupBooleanOperatorExpressionComponent } from './rules-designer/expressions/group-boolean-operator-expression/group-boolean-operator-expression.component';\r\nimport { RuleBaseComponent } from './rules-designer/base/rule-base/rule-base.component';\r\nimport { RuleDesignerSelectionBaseComponent } from './rules-designer/base/rule-designer-selection-base/rule-designer-selection-base.component';\r\nimport { RuleDesignerItemBaseComponent } from './rules-designer/base/rule-designer-item-base/rule-designer-item-base.component';\r\nimport { ExpressionBaseComponent } from './rules-designer/base/expression-base/expression-base.component';\r\nimport { GroupExpressionComponent } from './rules-designer/expressions/group-expression/group-expression.component';\r\nimport { EndPointComponent } from './rules-designer/expressions/end-point/end-point.component';\r\nimport { VotingResponseExpressionComponent } from './rules-designer/expressions/voting-response-expression/voting-response-expression.component';\r\nimport { ThisResponseExpressionComponent } from './rules-designer/expressions/this-response-expression/this-response-expression.component';\r\nimport { MergeExpressionComponent } from './rules-designer/expressions/merge-expression/merge-expression.component';\r\nimport { TaskExpressionComponent } from './rules-designer/expressions/task-expression/task-expression.component';\r\nimport { MiniBadgeComponent } from './common/badges/mini-badge/mini-badge.component';\r\nimport { SimpleExpressionComponent } from './rules-designer/expressions/simple-expression/simple-expression.component';\r\nimport { FilterExpressionComponent } from './rules-designer/expressions/filter-expression/filter-expression.component';\r\nimport { RulesDesignerComponent } from './rules-designer/rules-designer.component';\r\nimport { StatementBaseComponent } from './rules-designer/base/statement-base/statement-base.component';\r\nimport { IfThenElseStatementComponent } from './rules-designer/statements/if-then-else-statement/if-then-else-statement.component';\r\nimport { RuleStatementBlockComponent } from './rules-designer/statements/rule-statement-block/rule-statement-block.component';\r\nimport { OutcomeStatementComponent } from './rules-designer/statements/outcome-statement/outcome-statement.component';\r\nimport { ReturnStatementComponent } from './rules-designer/statements/return-statement/return-statement.component';\r\nimport { NoContextPanelComponent } from './rules-designer/associated-panels/no-context-panel/no-context-panel.component';\r\nimport { PanelGutterComponent } from './rules-designer/associated-panels/panel-gutter/panel-gutter.component';\r\nimport { EmptyRuleDesignerComponent } from './rules-designer/associated-panels/empty-rule-designer/empty-rule-designer.component';\r\nimport { DestinationSetComponent } from './rules-designer/statements/destination-set/destination-set.component';\r\nimport { RuleToolboxComponent } from './rules-designer/rule-toolbox/rule-toolbox.component';\r\nimport { IconTemplateComponent } from './common/list-item/icon-template/icon-template.component';\r\nimport { SubmitTaskActionSettingsComponent } from './wizard-popup/smartforms/submit-task-action-settings/submit-task-action-settings.component';\r\nimport { RecipientItemComponent } from './common/drop-down/drop-down-menu-item-templates/recipient-item/recipient-item.component';\r\nimport { DefaultListItemComponent } from './common/drop-down/drop-down-menu-item-templates/default-list-item/default-list-item.component';\r\nimport { ListItemComponent } from './common/list-item/list-item.component';\r\nimport { SmartFieldComposerComponent } from './smart-fields/smart-field-composer/smart-field-composer.component';\r\nimport { SmartFieldComposerPluginComponent } from './smart-fields/smart-field-composer-plugin/smart-field-composer-plugin.component';\r\nimport { ClickToEditComponent } from './common/click-to-edit/click-to-edit.component';\r\nimport { SmartFieldComposerFilterComponent } from './smart-fields/smart-field-composer-filter/smart-field-composer-filter.component';\r\nimport { PipesModule } from '../pipes/pipes.module';\r\nimport { BaseResourceComponent } from './base-resource/base-resource.component';\r\nimport { NewDataFieldComponent } from './popup/new-data-field/new-data-field.component';\r\nimport { DataFieldPopupHeaderComponent } from './popup/new-data-field/data-field-popup-header/data-field-popup-header.component';\r\nimport { EndStepComponent } from './config-panel/plugins/plugin-wizards/logic-steps/end-step/end-step.component';\r\nimport { TimeSpanComponent } from './common/time-span/time-span.component';\r\nimport { EventPlatformResultComponent } from './wizard-popup/event-platform/event-platform-result/event-platform-result.component';\r\nimport { EventPlatFormAddComponent } from './wizard-popup/event-platform/event-platform-add/event-platform-add.component';\r\nimport { ActionPopupComponent } from './popup/action-popup/action-popup.component';\r\nimport { DeleteProcessComponent } from './popup/delete-process/delete-process.component';\r\nimport { CategoryDialogComponent } from './popup/category-dialog/category-dialog.component';\r\nimport { ChooseCreateChangeOutcomeComponent } from './popup/choose-create-change-outcome/choose-create-change-outcome.component';\r\nimport { MergeStepComponent } from './config-panel/plugins/plugin-wizards/logic-steps/merge-step/merge-step.component';\r\nimport { SaveSmartFieldChooseDialogComponent } from './popup/save-smart-field-choose-dialog/save-smart-field-choose-dialog.component';\r\nimport { PopupStatesComponent } from './popup/popup-states/popup-states.component';\r\nimport { PopupComponent } from './popup/popup.component';\r\nimport { GridComponent } from './common/grid/grid.component';\r\nimport { OutputMapperComponent } from './common/output-mapper/output-mapper.component';\r\nimport { TileSelectComponent } from './tile-select/tile-select.component';\r\nimport { ChooseControlOutcomeLabelComponent } from './common/choose-control/templates/choose-control-outcome-label/choose-control-outcome-label.component';\r\nimport { OutcomeActionAutonameComponent } from './common/drop-down/drop-down-menu-item-templates/outcome-action-autoname/outcome-action-autoname.component';\r\nimport { OutcomeActionLinkComponent } from './common/drop-down/drop-down-menu-item-templates/outcome-action-link/outcome-action-link.component';\r\nimport { DecisionStepFooterComponent } from './config-panel/plugins/plugin-wizards/logic-steps/decision-step/decision-step-footer/decision-step-footer.component';\r\nimport { DecisionStepComponent } from './config-panel/plugins/plugin-wizards/logic-steps/decision-step/decision-step.component';\r\nimport { SplitStepComponent } from './config-panel/plugins/plugin-wizards/logic-steps/split-step/split-step.component';\r\nimport { TimerStepComponent } from './config-panel/plugins/plugin-wizards/logic-steps/timer-step/timer-step.component';\r\nimport { StartStepComponent } from './config-panel/plugins/plugin-wizards/logic-steps/start-step/start-step.component';\r\nimport { InfoPopupComponent } from './common/info-popup/info-popup.component';\r\nimport { InfoPopupTemplate } from './common/info-popup/info-popup-template';\r\nimport { WizardPopupHostComponent } from './wizard-popup/wizard-popup-host/wizard-popup-host.component';\r\nimport { WorkflowIntegrationFormsPopupComponent } from './wizard-popup/workflow-integration-forms-popup/workflow-integration-forms-popup.component';\r\nimport { EmailComponent } from './common/email/email.component';\r\nimport { ReminderControlComponent } from './common/reminder-control/reminder-control.component';\r\nimport { ChooseControlWithinWorkingHoursLabelComponent } from './common/choose-control/templates/choose-control-within-working-hours-label/choose-control-within-working-hours-label.component';\r\nimport { SaveReferenceComponent } from './common/save-reference/save-reference.component';\r\nimport { SetFolioStepComponent } from './config-panel/plugins/plugin-wizards/basic-steps/set-folio-step/set-folio-step.component';\r\nimport { SetDataFieldsWizardComponent } from './config-panel/plugins/plugin-wizards/custom-wizards/set-data-fields-wizard/set-data-fields-wizard.component';\r\nimport { SendEmailStepComponent } from './config-panel/plugins/plugin-wizards/basic-steps/send-email-step/send-email-step.component';\r\nimport { ProcessSettingsTabComponent } from './config-panel/plugins/plugin-wizards/logic-steps/start-step/process-settings-tab/process-settings-tab.component';\r\nimport { ListOptionsComponent } from './common/list-options/list-options.component';\r\nimport { PropertyMapperComponent } from './common/property-mapper/property-mapper.component';\r\nimport { ActivitySettingsComponent } from './config-panel/plugins/tabs/activity-settings/activity-settings.component';\r\nimport { TaskNotificationComponent } from './config-panel/plugins/plugin-wizards/basic-steps/task-step/task-notification/task-notification.component';\r\nimport { RecipientIconTemplateComponent } from './common/email/templates/recipient-icon-template/recipient-icon-template.component';\r\nimport { RecipientPickerComponent } from './common/email/templates/recipient-picker/recipient-picker.component';\r\nimport { BodyTemplateComponent } from './common/email/templates/body-template/body-template.component';\r\nimport { EmailPartSelectorComponent } from './common/email/templates/email-part-selector/email-part-selector.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        RibbonComponent,\r\n        TabHomeComponent,\r\n        TabFileComponent,\r\n        TabItemInfoComponent,\r\n        TabItemOptionsComponent,\r\n        ToolboxComponent,\r\n        BadgesComponent,\r\n        ToggleSwitchComponent,\r\n        ChooseControlComponent,\r\n        ChooseControlDefaultLabelComponent,\r\n        TabViewComponent,\r\n        SpinnerComponent,\r\n        StackPanelComponent,\r\n        ScrollbarComponent,\r\n        BreadCrumbComponent,\r\n        BreadCrumbItemComponent,\r\n        DropDownComponent,\r\n        DropDownMenuComponent,\r\n        DropDownMenuItemComponent,\r\n        GroupBooleanOperatorExpressionItemComponent,\r\n        CreateSmartFieldsComponent,\r\n        ItemReferencesComponent,\r\n        ConfigureFormRuleComponent,\r\n        GroupBooleanOperatorExpressionComponent,\r\n        SmartFormsSummaryComponent,\r\n        SharePointSummaryComponent,\r\n        SmartFormsRemoveIntegrationComponent,\r\n        SummaryResultComponent,\r\n        ConfigureStartRuleComponent,\r\n        SmartFormsRulesComponent,\r\n        CreateReferencesComponent,\r\n        StartWorkflowEventsComponent,\r\n        BaseComponent,\r\n        TextAreaComponent,\r\n        TextboxComponent,\r\n        SmartFieldContainerComponent,\r\n        SharepointRemoveIntegrationComponent,\r\n        InputComponent,\r\n        UserDialogComponent,\r\n        SaveSmartFieldChooseDialogComponent,\r\n        SmartFormsConfigureStateComponent,\r\n        HierarchyDialogComponent,\r\n        DataMapperComponent,\r\n        EventPlatFormAddComponent,\r\n        HelpLinkComponent,\r\n        DataFieldMapperComponent,\r\n        EventPlatformRemoveComponent,\r\n        RuleBaseComponent,\r\n        RuleDesignerSelectionBaseComponent,\r\n        RuleDesignerItemBaseComponent,\r\n        ExpressionBaseComponent,\r\n        ErrorBarComponent,\r\n        ErrorBarConsoleComponent,\r\n        ErrorBarNotifierComponent,\r\n        CommandItemComponent,\r\n        DefaultItemComponent,\r\n        ItemDisabledComponent,\r\n        ReferenceItemComponent,\r\n        ReferenceMultiItemComponent,\r\n        RulesDestinationSetItemComponent,\r\n        RulesOutcomeItemComponent,\r\n        SimpleExpressionOperatorItemComponent,\r\n        SmartFieldSmoFilterItemComponent,\r\n        ToolboxTrashComponent,\r\n        FilterControlComponent,\r\n        GroupExpressionComponent,\r\n        ThisResponseExpressionComponent,\r\n        EndPointComponent,\r\n        MergeExpressionComponent,\r\n        VotingResponseExpressionComponent,\r\n        MiniBadgeComponent,\r\n        TaskExpressionComponent,\r\n        FilterExpressionComponent,\r\n        SimpleExpressionComponent,\r\n        RulesDesignerComponent,\r\n        StatementBaseComponent,\r\n        IfThenElseStatementComponent,\r\n        RuleStatementBlockComponent,\r\n        OutcomeStatementComponent,\r\n        ReturnStatementComponent,\r\n        NoContextPanelComponent,\r\n        PanelGutterComponent,\r\n        RuleToolboxComponent,\r\n        EmptyRuleDesignerComponent,\r\n        DestinationSetComponent,\r\n        ListItemComponent,\r\n        IconTemplateComponent,\r\n        SubmitTaskActionSettingsComponent,\r\n        RecipientItemComponent,\r\n        DefaultListItemComponent,\r\n        SmartFieldComposerComponent,\r\n        SmartFieldComposerPluginComponent,\r\n        ClickToEditComponent,\r\n        SmartFieldComposerFilterComponent,\r\n        BaseResourceComponent,\r\n        NewDataFieldComponent,\r\n        DataFieldPopupHeaderComponent,\r\n        EndStepComponent,\r\n        TimeSpanComponent,\r\n        PopupComponent,\r\n        ActionPopupComponent,\r\n        DeleteProcessComponent,\r\n        CategoryDialogComponent,\r\n        PopupStatesComponent,\r\n        ChooseCreateChangeOutcomeComponent,\r\n        EventPlatformResultComponent,\r\n        MergeStepComponent,\r\n        TileSelectComponent,\r\n        GridComponent,\r\n        WizardPopupHostComponent,\r\n        OutputMapperComponent,\r\n        WorkflowIntegrationFormsPopupComponent,\r\n        DecisionStepComponent,\r\n        DecisionStepFooterComponent,\r\n        OutcomeActionLinkComponent,\r\n        OutcomeActionAutonameComponent,\r\n        ChooseControlOutcomeLabelComponent,\r\n        OutputMapperComponent,\r\n        SplitStepComponent,\r\n        TimerStepComponent,\r\n        StartStepComponent,\r\n        InfoPopupComponent,\r\n        InfoPopupTemplate,\r\n        EmailComponent,\r\n        ReminderControlComponent,\r\n        ChooseControlWithinWorkingHoursLabelComponent,\r\n        SendEmailStepComponent,\r\n        SaveReferenceComponent,\r\n        SetFolioStepComponent,\r\n        SetDataFieldsWizardComponent,\r\n        ProcessSettingsTabComponent,\r\n        ListOptionsComponent,\r\n        PropertyMapperComponent,\r\n        ActivitySettingsComponent,\r\n        TaskNotificationComponent,\r\n        RecipientIconTemplateComponent,\r\n        RecipientPickerComponent,\r\n        BodyTemplateComponent,\r\n        EmailPartSelectorComponent,\r\n    ],\r\n    exports: [\r\n        RibbonComponent,\r\n        TabHomeComponent,\r\n        TabFileComponent,\r\n        TabItemInfoComponent,\r\n        TabItemOptionsComponent,\r\n        ToolboxComponent,\r\n        BadgesComponent,\r\n        ToggleSwitchComponent,\r\n        ChooseControlComponent,\r\n        ChooseControlDefaultLabelComponent,\r\n        TabViewComponent,\r\n        SpinnerComponent,\r\n        StackPanelComponent,\r\n        ScrollbarComponent,\r\n        BreadCrumbComponent,\r\n        BreadCrumbItemComponent,\r\n        DropDownComponent,\r\n        DropDownMenuComponent,\r\n        DropDownMenuItemComponent,\r\n        GroupBooleanOperatorExpressionItemComponent,\r\n        CreateSmartFieldsComponent,\r\n        ItemReferencesComponent,\r\n        GroupBooleanOperatorExpressionComponent,\r\n        ConfigureStartRuleComponent,\r\n        SmartFormsRulesComponent,\r\n        SmartFormsSummaryComponent,\r\n        SharePointSummaryComponent,\r\n        SmartFormsRemoveIntegrationComponent,\r\n        SharepointRemoveIntegrationComponent,\r\n        UserDialogComponent,\r\n        InputComponent,\r\n        SmartFormsConfigureStateComponent,\r\n        HierarchyDialogComponent,\r\n        DataMapperComponent,\r\n        EventPlatFormAddComponent,\r\n        HelpLinkComponent,\r\n        SmartFieldContainerComponent,\r\n        TextboxComponent,\r\n        FilterControlComponent,\r\n        ThisResponseExpressionComponent,\r\n        FilterExpressionComponent,\r\n        BadgesComponent,\r\n        ListItemComponent,\r\n        CreateReferencesComponent,\r\n        TileSelectComponent,\r\n        WizardPopupHostComponent,\r\n        StartWorkflowEventsComponent,\r\n        InfoPopupTemplate,\r\n        SetFolioStepComponent,\r\n        ProcessSettingsTabComponent\r\n    ],\r\n    imports: [\r\n        PipesModule,\r\n        DirectivesModule,\r\n        UpgradeModule,\r\n        CommonModule,\r\n        FormsModule\r\n    ],\r\n    providers: [],\r\n    bootstrap: [],\r\n    schemas: []\r\n})\r\nexport class ComponentsModule { }\r\n","import { Component, Inject, Input, OnDestroy } from '@angular/core';\r\nimport { IConfigPanelTab } from '../../../../../../types/models/config-panel/i-config-panel-tab';\r\nimport { IConfigTabValidatedComponent } from '../../../../../../types/models/config-panel/i-config-tab-validated-component';\r\nimport { IObjectPropertiesToListenTo } from '../../../../../../types/models/config-panel/i-objects-properties-to-listen-to';\r\nimport { IConfigPanelService } from '../../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { IValidationService } from '../../../../../../types/services/validation/ivalidation.service';\r\nimport { IValidatedComponent } from '../../../../../../types/validation/i-validated-component';\r\nimport { ConfigPanelServiceToken } from '../../../../../services/config-panel/config-panel-service-factory';\r\nimport { ResourceService } from '../../../../../services/resource/resource.service';\r\nimport { ValidationServiceToken } from '../../../../../services/validation/validation-service-factory';\r\nimport { ErrorSeverity } from '../../../../../shared/enums/model/error-severity';\r\nimport { EventTypes } from '../../../../../shared/enums/model/event-types';\r\nimport { ValidationTypes } from '../../../../../shared/enums/model/validation-types';\r\nimport { isUndefinedOrNull } from '../../../../../shared/utils/general';\r\nimport { BaseResourceComponent } from '../../../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-plugin-controller',\r\n    template: '<p> Empty Template since it wont be used </p>'\r\n})\r\nexport class PluginBaseComponent extends BaseResourceComponent implements OnDestroy {\r\n    @Input() item: IConfigPanelTab;\r\n    @Input() eventConfiguration: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IEventConfiguration;\r\n\r\n    /**\r\n     * Override in child component if default tab validation should be overridden\r\n     */\r\n    protected overrideDefaultTabValidation = false;\r\n\r\n    constructor(@Inject(ValidationServiceToken) protected validationService: IValidationService,\r\n        @Inject(ConfigPanelServiceToken) protected configPanelService: IConfigPanelService,\r\n        protected resourceService: ResourceService) {\r\n\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        // make sure no listeners or watches stay live after the scope is destroyed\r\n        if (!isUndefinedOrNull(this.validationListeners)) {\r\n            const listenerKeys = Object.keys(this.validationListeners);\r\n            for (let i = 0; i < listenerKeys.length; i++) {\r\n                this.destroyListener(listenerKeys[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set the tab validation object to validate and the config panel tab.\r\n     * NOTE/TODO: When config panel feature is worked on, the configpanel tab should be set from parent component\r\n     * (not from child as is currently)\r\n     *\r\n     * @param tabObjectToValidate\r\n     * @param tabItem - config panel tab\r\n     */\r\n    public setTabValidationObject(tabObjectToValidate?: IValidatedComponent, tabItem?: IConfigPanelTab): void {\r\n        if (!this.overrideDefaultTabValidation) {\r\n            //If no specific tab validation specified by child config panel controller,\r\n            //we assume that default validation applies that will badge the tab using error info of\r\n            //the event configuration and its children.\r\n\r\n            if (!tabObjectToValidate) {\r\n                //Use default eventconfiguration\r\n                tabObjectToValidate = this.eventConfiguration;\r\n            }\r\n\r\n            const objToValidateConfigTab: IConfigTabValidatedComponent = {\r\n                componentObj: tabObjectToValidate,\r\n                compareFullReference: false\r\n            };\r\n            this.addObjectsToValidateConfigTab([objToValidateConfigTab], tabItem);\r\n        }\r\n    }\r\n\r\n    private validationTypes: {\r\n        [field: string]: Array<ValidationTypes>;\r\n    } = {};\r\n\r\n    private validationConfigs: {\r\n        [field: string]: {\r\n            [validationType: number]: sourceCode.k2Designer.objectModel.validationService.plugins.IValidationTypeItem;\r\n        };\r\n    } = {};\r\n\r\n    private modelsPropertiesErrorMessages: {\r\n        [field: string]: sourceCode.k2Designer.objectModel.validationService.plugins.IValidatorItem;\r\n    } = {};\r\n\r\n    //Dictionary of listeners with key of fieldNamepropertyName -\r\n    //The field to validate and the property name of object to listen to\r\n    private validationListeners: {\r\n        [fieldProperty: string]: Function;\r\n    } = {};\r\n\r\n    protected get ConfigPanelService(): IConfigPanelService {\r\n        return this.configPanelService;\r\n    }\r\n\r\n    /**\r\n     * Binds the validation types to a field.\r\n     *\r\n     * @param fieldName - The string name for this field. It can be anything as long as it is unique in the controller.\r\n     * @param validationData  - Configuration for validation to be done on field (obtain this object by calling helper function createValidationData)\r\n     */\r\n    protected bindValidationToField(fieldName: string, validationData: sourceCode.k2Designer.objectModel.validationService.plugins.IValidatorItem): void {\r\n        if (!isUndefinedOrNull(validationData.validationConfigs)) {\r\n            const validationTypes: Array<any> = Object.keys(validationData.validationConfigs);\r\n            for (let i = 0; i < validationTypes.length; i++) { // convert from string keys to number. The validation configs uses an enum, so it will be a number\r\n                validationTypes[i] = parseInt(validationTypes[i]);\r\n            }\r\n            this.validationTypes[fieldName] = validationTypes;\r\n        } else {\r\n            throw 'validationConfigs must be specified';\r\n        }\r\n\r\n        this.validationConfigs[fieldName] = validationData.validationConfigs;\r\n        this.bindModelForValidation(fieldName, validationData);\r\n    }\r\n\r\n    /**\r\n     * Helper function that will create a validationItem object used to validate when listeners are triggered\r\n     * (to pass to bindValidationToFieldAndListen method).\r\n     * Currently, it only does one type of validation on object's property (only one validation config). This could\r\n     * be modified in future to cater for multiple validation configurations.\r\n     *\r\n     * @param errorMessage - Message to display when validation failed\r\n     * @param validationType - Type of validation to perform on object's property\r\n     * @param objectToValidate - Object on which the property to validate lies\r\n     * @param propertyToValidate - Property to perform validation on\r\n     * @param errorSeverity - Type of Error (Warning, Error)\r\n     * @param validationResourceTokens - List of tokens to replace in error message\r\n     * @returns validationData object of type validationItem used by bindValidationToFieldAndListen method\r\n     */\r\n    protected createValidationData(errorMessage: string, validationType: ValidationTypes,\r\n        objectToValidate: sourceCode.k2Designer.objectModel.core.model.IModelObject, propertyToValidate: string, errorSeverity: ErrorSeverity,\r\n        validationResourceTokens: string[] = []): sourceCode.k2Designer.objectModel.validationService.plugins.IValidatorItem {\r\n        const requiredType = validationType;\r\n        const validationConfigs = {};\r\n        validationConfigs[requiredType] = {\r\n            validationType: requiredType,\r\n            validationFailedMessage: errorMessage\r\n        };\r\n\r\n        const validationData = new sourceCode.k2Designer.objectModel.validationService.plugins.ValidatorItem({\r\n            modelObject: objectToValidate,\r\n            propertyName: propertyToValidate,\r\n            validationConfigs,\r\n            validationFailedMessage: errorMessage,\r\n            errorSeverity,\r\n            validationResourceTokens\r\n        });\r\n\r\n        return validationData;\r\n    }\r\n\r\n    /**\r\n     * Binds the validation types to a field. Adds listeners to specified properties that will trigger validation on field.\r\n     *\r\n     * @param fieldName - The string name for this field. It can be anything as long as it is unique in the controller.\r\n     * @param validationData - Configuration for validation to be done on field (obtain this object by calling helper function createValidationData)\r\n     * @param propertiesToListenTo - Collection of objects and their properties on which listeners will be bound that triggers the validation\r\n     * @param condition - (Optional) Function that will return true or false. Default is true, if not specified. If function evaluates to true, validation\r\n     * on field will be done. If function evaluates to false, no validation will be done on field and previous errors will be cleared.\r\n     */\r\n    protected bindValidationToFieldAndListen(fieldName: string, validationData: sourceCode.k2Designer.objectModel.validationService.plugins.IValidatorItem,\r\n        propertiesToListenTo: IObjectPropertiesToListenTo[], condition?: Function\r\n    ): void {\r\n\r\n        if (typeof condition !== 'function') {\r\n            condition = () => true;\r\n        }\r\n\r\n        //Bind validation to field with specified validation data\r\n        this.bindValidationToField(fieldName, validationData);\r\n\r\n        //Add listener to all of the properties it should listen to\r\n        for (let p = 0; p < propertiesToListenTo.length; p++) {\r\n            const model = propertiesToListenTo[p].object;\r\n            const properties = propertiesToListenTo[p].properties;\r\n            for (let q = 0; q < properties.length; q++) {\r\n                const propertyName = properties[q];\r\n                this.applyListener(fieldName, model, propertyName, condition);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private destroyListener(key: string): void {\r\n        if (typeof this.validationListeners[key] === 'function') {\r\n            this.validationListeners[key]();\r\n            this.validationListeners[key] = null;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Applies correct listener for either array or property\r\n     *\r\n     * @param fieldName - field on which validation will be performed when listener triggered\r\n     * @param model - object on which to listen to\r\n     * @param propertyName - property of object on which to listen to\r\n     * @param condition - function that will evaluate if validation should be performed\r\n     */\r\n    private applyListener(fieldName: string, model: sourceCode.k2Designer.objectModel.core.model.IModelObject, propertyName: string, condition: Function) {\r\n        if (!isUndefinedOrNull(model) && Array.isArray(model[propertyName])) {\r\n            this.validateArrayOnChange(fieldName, model, propertyName, condition);\r\n        } else {\r\n            this.validatePropertyOnChange(fieldName, model, propertyName, condition);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Applies listener for array\r\n     *\r\n     * @param fieldName - field on which validation will be performed when listener triggered\r\n     * @param model - object on which to listen to\r\n     * @param arrayProperty - array property of object on which to listen to\r\n     * @param condition - function that will evaluate if validation should be performed\r\n     */\r\n    protected validateArrayOnChange(fieldName: string, model: sourceCode.k2Designer.objectModel.core.model.IModelObject, arrayProperty: string, condition: Function) {\r\n        if (model && model[arrayProperty] && model[arrayProperty].listen) {\r\n            const key = fieldName + '_' + arrayProperty;\r\n            this.destroyListener(key);\r\n            this.validationListeners[key] = model[arrayProperty].listen(EventTypes.arrayChanged,\r\n                this.onArrayListenerTriggered.bind(this, fieldName, condition));\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Applies listener for property validation\r\n     *\r\n     * @param fieldName - field on which validation will be performed when listener triggered\r\n     * @param model - object on which to listen to\r\n     * @param property - property of object on which to listen to\r\n     * @param condition - function that will evaluate if validation should be performed\r\n     */\r\n    protected validatePropertyOnChange(fieldName: string, model: sourceCode.k2Designer.objectModel.core.model.IModelObject, property: string, condition: Function) {\r\n        if (model && model.listen) {\r\n            const key = fieldName + '_' + property;\r\n            this.destroyListener(key);\r\n            this.validationListeners[key] = model.listen(EventTypes.propertyChanged,\r\n                this.onPropertyListenerTriggered.bind(this, fieldName, property, condition));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Triggered on change of array. Accepts the standard IArrayChangedEvent parameters.\r\n     * If condition function evaluates to true (default), array will validated. If not, validation on field will be forced to pass.\r\n     *\r\n     * @param fieldName - field on which validation will be performed when listener triggered\r\n     * @param condition - function that will evaluate if validation should be performed\r\n     * @param arrayObj - array that changed, triggering listener\r\n     * @param name\r\n     * @param oldVal\r\n     * @param newVal\r\n     */\r\n    private onArrayListenerTriggered(fieldName: string, condition: Function,\r\n        arrayObj: sourceCode.k2Designer.objectModel.core.model.IModelObject, name: string, oldVal: any, newVal: any): boolean {\r\n        // since we listened to the array, no need to compare the property to the name\r\n        if (condition() === true) {\r\n            this.validateField(fieldName);\r\n        } else {\r\n            this.forcePassValidateField(fieldName);\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Triggered on change of property. Accepts the standard IPropertyChangedEvent parameters.\r\n     * Checks if the correct property has changed, and then validates.\r\n     * If condition function evaluates to true (default), property will validated. If not, validation on field will be forced to pass.\r\n     *\r\n     * @param fieldName - field on which validation will be performed when listener triggered\r\n     * @param property - property that should be validated\r\n     * @param condition - function that will evaluate if validation should be performed\r\n     * @param obj - Model object where property changed exists\r\n     * @param name - name of property changed\r\n     * @param oldVal\r\n     * @param newVal\r\n     */\r\n    private onPropertyListenerTriggered(fieldName: string, property: string, condition: Function,\r\n        obj: sourceCode.k2Designer.objectModel.core.model.IModelObject, name: string, oldVal: any, newVal: any): boolean {\r\n        if (property === name) {\r\n            if (condition() === true) {\r\n                this.validateField(fieldName);\r\n            } else {\r\n                this.forcePassValidateField(fieldName);\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Does validation for specified field\r\n     *\r\n     * @param fieldName\r\n     */\r\n    protected validateField(fieldName: string): boolean {\r\n        this.validate(fieldName);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Pass validation for specified field, using the validation data configured\r\n     *\r\n     * @param fieldName field to pass validation on\r\n     */\r\n    protected forcePassValidateField(fieldName: string): boolean {\r\n        const validationData = this.modelsPropertiesErrorMessages[fieldName];\r\n        if (isUndefinedOrNull(validationData)) return false;\r\n        this.validationService.forcePassValidation(<sourceCode.k2Designer.objectModel.validationService.plugins.IValidatorItem>{\r\n            modelObject: validationData.modelObject,\r\n            propertyName: validationData.propertyName\r\n        });\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Returns true if the validation for a specific field exists\r\n     *\r\n     * @param fieldName\r\n     */\r\n    protected isModelBoundForField(fieldName: string): boolean {\r\n        return !isUndefinedOrNull(this.modelsPropertiesErrorMessages[fieldName]);\r\n    }\r\n\r\n    /**\r\n     * Binds a model to a valdation field. The validation field should already exist when you call this.\r\n     *\r\n     * @param fieldName\r\n     * @param validationData\r\n     */\r\n    private bindModelForValidation(fieldName: string, validationData: sourceCode.k2Designer.objectModel.validationService.plugins.IValidatorItem): void {\r\n        if (isUndefinedOrNull(this.validationTypes[fieldName])) {\r\n            throw 'No validations bound to this field yet. Use bindValidationtoField first';\r\n        }\r\n\r\n        if (!isUndefinedOrNull(validationData.modelObject) &&\r\n            !isUndefinedOrNull(validationData.propertyName) && validationData.propertyName !== '') {\r\n            this.modelsPropertiesErrorMessages[fieldName] = validationData;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Validate a field.\r\n     * bindValidationToField must have been called before calling this\r\n     *\r\n     * @param fieldName\r\n     * @param validationData\r\n     */\r\n    protected validate(fieldName: string, validationData?: sourceCode.k2Designer.objectModel.validationService.plugins.IValidatorItem): sourceCode.k2Designer.objectModel.core.model.IErrorInformation[] {\r\n\r\n        let validationResult: sourceCode.k2Designer.objectModel.core.model.IErrorInformation[];\r\n\r\n        if (isUndefinedOrNull(validationData)) {\r\n            validationData = this.modelsPropertiesErrorMessages[fieldName];\r\n        }\r\n\r\n        validationResult = this.validationService.evaluate(this.validationTypes[fieldName], validationData);\r\n\r\n        return validationResult;\r\n    }\r\n\r\n    /**\r\n     * Add objects that should be used to validate tab. If one of these objects is in error, the tab will be in error.\r\n     *\r\n     * @param objToValidate collection of objects to watch for tab validation\r\n     */\r\n    protected addObjectsToValidateConfigTab(objsToValidate: IConfigTabValidatedComponent[], currentTab: IConfigPanelTab): void {\r\n        if (isUndefinedOrNull(currentTab)) return;\r\n        if (isUndefinedOrNull(currentTab.componentsToWatch)) {\r\n            currentTab.componentsToWatch = [];\r\n        }\r\n\r\n        for (const objToValidate of objsToValidate) {\r\n            if (!isUndefinedOrNull(objToValidate.componentObj)) {\r\n                const count = currentTab.componentsToWatch.length === 0 ? 0 :\r\n                    currentTab.componentsToWatch.filter(\r\n                        (comp: IConfigTabValidatedComponent) =>\r\n                            comp.componentObj === objToValidate.componentObj ||\r\n                            comp.componentObj.getReference() === objToValidate.componentObj.getReference()).length;\r\n                if (count === 0) {\r\n                    currentTab.componentsToWatch.push(objToValidate);\r\n                }\r\n            }\r\n        }\r\n        this.configPanelService.notifyConfigTabErrorDataSet(this.item);\r\n    }\r\n}\r\n","import { Component, Inject, Input, OnDestroy } from '@angular/core';\r\nimport { IActivityConfiguration } from '../../../../../../types/models/process/activities/configuration/i-activity-configuration';\r\nimport { IConfiguredRule } from '../../../../../../types/models/rules/i-configured-rule';\r\nimport { IConfigPanelService } from '../../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { IEnvironmentService } from '../../../../../../types/services/environment/i-environment-service';\r\nimport { IPluginService } from '../../../../../../types/services/plugin/i-plugin-service';\r\nimport { IValidationService } from '../../../../../../types/services/validation/ivalidation.service';\r\nimport { ConfigPanelServiceToken } from '../../../../../services/config-panel/config-panel-service-factory';\r\nimport { EnvironmentServiceToken } from '../../../../../services/environment/environment-service-factory';\r\nimport { PluginServiceToken } from '../../../../../services/plugin/plugin-service-factory';\r\nimport { ResourceService } from '../../../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../../../services/ruleplugin/rule-plugin-service';\r\nimport { UndoRedoServiceToken } from '../../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../../../services/validation/validation-service-factory';\r\nimport { plugins } from '../../../../../shared/constants/plugins';\r\nimport { RuleContextHandlerNames } from '../../../../../shared/enums/rules/rule-context-handler-names';\r\nimport { isUndefinedOrNull } from '../../../../../shared/utils/general';\r\nimport { PluginBaseComponent } from '../plugin-base/plugin-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-rule-plugin-base',\r\n    template: '<p> Empty Template since it wont be used </p>'\r\n})\r\nexport abstract class RulePluginBaseComponent extends PluginBaseComponent implements OnDestroy {\r\n\r\n    constructor(@Inject(ValidationServiceToken) protected validationService: IValidationService,\r\n        @Inject(ConfigPanelServiceToken) protected configPanelService: IConfigPanelService,\r\n        protected rulePluginService: RulePluginService,\r\n        @Inject(UndoRedoServiceToken) protected undoRedoService: IUndoRedoService,\r\n        @Inject(PluginServiceToken) protected pluginService: IPluginService,\r\n        @Inject(EnvironmentServiceToken) protected environmentService: IEnvironmentService,\r\n        protected resourceService: ResourceService,\r\n        @Inject('ruleContextHandlerName') protected ruleContextHandlerName: RuleContextHandlerNames) {\r\n        super(validationService, configPanelService, resourceService);\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n    }\r\n\r\n    /**\r\n     * Abstract methods to be implemented by implementor classes\r\n     * */\r\n    protected abstract loadAndPopulateRuleDesigner(): void;\r\n    protected abstract refreshTabIndexes(): void;\r\n    protected abstract selectRuleType(ruleType: number): void;\r\n    protected abstract renderRuleDesigner(): void;\r\n\r\n\r\n    /*\r\n     * Load an empty rule designer, and ensure it's collapsed\r\n     */\r\n    protected loadEmptyRuleDesigner(): void {\r\n        this.rulePluginService.renderEmptyDesigner(this.ruleContextHandlerName);\r\n    }\r\n\r\n    /*\r\n     * Toggle the rule designer, expanded or collapsed.\r\n     */\r\n    public toggleRulesDesigner(): void {\r\n        this.undoRedoService.addCustomUndoEvent((): boolean => {\r\n            this.toggleRulesDesigner();\r\n            return true;\r\n        }, null, '-- toggle rule designer --');\r\n\r\n        this.loadAndPopulateRuleDesigner();\r\n        this.rulePluginService.renderCanvas();\r\n        this.pluginService.toggleState(plugins.panels.rulesDesigner);\r\n    }\r\n\r\n    /*\r\n     * Call this whenever the rule type has changed. It will update tab indexes and update it when undo redo is invoked.\r\n     */\r\n    protected onRuleTypeSelected(): void {\r\n        this.refreshTabIndexes();\r\n        this.renderRuleDesigner();\r\n\r\n        this.undoRedoService.addCustomUndoEvent((): boolean => {\r\n            this.renderRuleDesigner();\r\n            // use setTimeout, because when redoing it will execute this before making the model changes.\r\n            // This only updates the tab index, so should have no effect on logic. No-one should read the tab index, should they?\r\n            setTimeout(() => {\r\n                this.refreshTabIndexes();\r\n            });\r\n            // Just in case the edit rules button is focussed. It should not be focussed when it is disabled\r\n            $(document.activeElement).blur();\r\n            return true;\r\n        }, null, '-- calculate tab index for edit rule --');\r\n    }\r\n\r\n    /*\r\n     * Used to apply the highlighting class on the expand button\r\n     */\r\n    public isRulesActive(): boolean {\r\n        return this.environmentService.activeStudioItem.pluginStates.rulesDesigner === 'expanded';\r\n    }\r\n\r\n    protected setSavedCustomStatementsById(id: string, rule: IConfiguredRule): void {\r\n        const savedStatements = this.rulePluginService.getCustomRuleStatements(id);\r\n        if (!isUndefinedOrNull(savedStatements) && !isUndefinedOrNull(rule)) {\r\n            rule.statements = savedStatements;\r\n        }\r\n    }\r\n\r\n    protected setSavedCustomStatements(activityConfig: IActivityConfiguration, rule: IConfiguredRule): void {\r\n        this.setSavedCustomStatementsById(this.ruleContextHandlerName + activityConfig.getId(), rule);\r\n    }\r\n}\r\n","import { Component, EventEmitter, Inject, Input, OnInit, Output } from '@angular/core';\r\nimport { IConfigPanelTab } from '../../../../../../../types/models/config-panel/i-config-panel-tab';\r\nimport { IExpression } from '../../../../../../../types/models/core/configured-smart-fields/i-expression';\r\nimport { IEmailConfiguration } from '../../../../../../../types/models/process/events/configuration/i-email-configuration';\r\nimport { IConfigPanelService } from '../../../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { IEnvironmentService } from '../../../../../../../types/services/environment/i-environment-service';\r\nimport { IRecentsService } from '../../../../../../../types/services/recents/i-recents-service';\r\nimport { IValidationService } from '../../../../../../../types/services/validation/ivalidation.service';\r\nimport { IRecipientValidationOptions } from '../../../../../../../types/validation/i-recipient-validation-options';\r\nimport { ConfigPanelServiceToken } from '../../../../../../services/config-panel/config-panel-service-factory';\r\nimport { ConfigurationService } from '../../../../../../services/configuration/configuration-service';\r\nimport { EnvironmentServiceToken } from '../../../../../../services/environment/environment-service-factory';\r\nimport { ProcessService } from '../../../../../../services/process/process.service';\r\nimport { RecentsServiceToken } from '../../../../../../services/recents/recents-service-factory';\r\nimport { ResourceService } from '../../../../../../services/resource/resource.service';\r\nimport { ValidationServiceToken } from '../../../../../../services/validation/validation-service-factory';\r\nimport { ComponentIdMapping } from '../../../../../../shared/constants/components';\r\nimport { EmailConstants } from '../../../../../../shared/constants/email';\r\nimport { installTypes } from '../../../../../../shared/constants/general';\r\nimport { plugins } from '../../../../../../shared/constants/plugins';\r\nimport IDropDownMenuItem from '../../../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { EmailParts } from '../../../../../../shared/enums/email/email-parts';\r\nimport { PluginBaseComponent } from '../../../base/plugin-base/plugin-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-send-email-step',\r\n    templateUrl: './send-email-step.component.html',\r\n    styleUrls: ['./send-email-step.component.less']\r\n})\r\nexport class SendEmailStepComponent extends PluginBaseComponent implements OnInit {\r\n    @Input() event: sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.email.IEmailEvent;\r\n\r\n    @Input() eventConfiguration: IEmailConfiguration;\r\n\r\n    /**\r\n     * NOTE/TODO: When config panel feature is worked on, the config panel tab should be set from parent component\r\n     * (not from child as is currently)\r\n     */\r\n    @Input() configPanelTab: IConfigPanelTab;\r\n\r\n    @Output() registerThirdPanel = new EventEmitter<string>();\r\n\r\n    partDisableList: EmailParts[] = [];\r\n    partHideList: EmailParts[] = [];\r\n    partReadonlyList: EmailParts[] = [];\r\n    //Email component validation options:\r\n    validation: IRecipientValidationOptions = {\r\n        from: [\r\n            {\r\n                Required:\r\n                {\r\n                    validationFailedMessage: 'resource_service_empty_field_in_list',\r\n                    validationResourceTokens: [\r\n                        'resource_service_field_name_from',\r\n                        'resource_service_tab_send_email'\r\n                    ]\r\n                }\r\n            }],\r\n        cc: [\r\n            {\r\n                Required:\r\n                {\r\n                    validationFailedMessage: 'resource_service_empty_field_in_list',\r\n                    validationResourceTokens: [\r\n                        'resource_service_field_name_cc',\r\n                        'resource_service_tab_send_email'\r\n                    ]\r\n                }\r\n            }\r\n        ],\r\n        bcc: [\r\n            {\r\n                Required: {\r\n                    validationFailedMessage: 'resource_service_empty_field_in_list',\r\n                    validationResourceTokens: [\r\n                        'resource_service_field_name_bcc',\r\n                        'resource_service_tab_send_email'\r\n                    ]\r\n                }\r\n            }\r\n        ],\r\n        to: [\r\n            {\r\n                Required: {\r\n                    validationFailedMessage: 'resource_service_empty_field_in_list',\r\n                    validationResourceTokens: [\r\n                        'resource_service_field_name_to',\r\n                        'resource_service_tab_send_email'\r\n                    ]\r\n                }\r\n            }\r\n        ]\r\n    };\r\n\r\n    get ui(): sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.email.IEmailEventUI {\r\n        return this.event?.ui;\r\n    }\r\n\r\n    constructor(resourceService: ResourceService,\r\n        private _processService: ProcessService,\r\n        @Inject(RecentsServiceToken) private _recentsService: IRecentsService,\r\n        @Inject(EnvironmentServiceToken) private _env: IEnvironmentService,\r\n        @Inject(ConfigPanelServiceToken) protected configPanelService: IConfigPanelService,\r\n        @Inject(ValidationServiceToken) protected validationService: IValidationService,\r\n        private configurationService: ConfigurationService) {\r\n        super(validationService, configPanelService, resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        const isFromEmailAddressVisible = this.configurationService.installType.toUpperCase() === installTypes.blackPearl;\r\n\r\n        // Update K2 Cloud email configurations, resetting the 'from' address expression to system default (custom expressions not allowed)\r\n        if (!isFromEmailAddressVisible) {\r\n            const fromAddress = sourceCode.k2Designer.objectModel.smartFieldPlugins.EnvironmentFieldPlugin.createExternalDefinition(\r\n                this._processService.root as unknown as sourceCode.k2Designer.services.studioItem.workflow.ProcessService,\r\n                EmailConstants.FromAddress);\r\n\r\n            // Replace existing expression with K2 Cloud system default\r\n            this.eventConfiguration.from = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                smartFields: [\r\n                    sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.EnvironmentField.createInstance({\r\n                        title: fromAddress.name,\r\n                        environmentFieldReference: fromAddress.getReference(),\r\n                        componentId: ComponentIdMapping.k2EnvironmentField\r\n                    })\r\n                ]\r\n            });\r\n\r\n            // Reset the visibility of the From address\r\n            this.partDisableList.push(EmailParts.From);\r\n        }\r\n\r\n        if (!this.eventConfiguration.showFrom) {\r\n            this.partHideList.push(EmailParts.From);\r\n        }\r\n\r\n        const hasCC: boolean = this.eventConfiguration?.cc?.some((cc: IExpression) => cc.smartFields.length > 0 || cc.errorInformation.length > 0);\r\n\r\n        const hasBCC: boolean = this.eventConfiguration?.bcc?.some((bcc: IExpression) => bcc.smartFields.length > 0 || bcc.errorInformation.length > 0);\r\n\r\n        if (!this.ui.showCC && !hasCC) {\r\n            this.partHideList.push(EmailParts.Cc);\r\n        }\r\n\r\n        if (!this.ui.showBCC && !hasBCC) {\r\n            this.partHideList.push(EmailParts.Bcc);\r\n        }\r\n\r\n        this.registerThirdPanel.emit(plugins.panels.emailBody);\r\n    }\r\n\r\n    getUserDropDownList() {\r\n        const items: IDropDownMenuItem[] = [];\r\n\r\n        items.push(<IDropDownMenuItem>{\r\n            title: this.resourceService.getString(`user_task_step_recipient_originator`),\r\n            key: `Originator`,\r\n            icon: `icon-set-picker ic-recipientnondynamic`,\r\n        });\r\n\r\n        items.push(<IDropDownMenuItem>{\r\n            title: this.resourceService.getString(`user_task_step_recipient_originator_manager`),\r\n            key: `ProcessOriginatorManager`,\r\n            icon: `icon-set-picker ic-recipientnondynamic`,\r\n        });\r\n\r\n        const listOfRecentUser: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IUserField[] = this.getRecentlySelectedUsers();\r\n\r\n        for (const recentUser of listOfRecentUser) {\r\n            items.push(<IDropDownMenuItem>{\r\n                title: recentUser.displayName,\r\n                key: recentUser.displayName,\r\n                additionalValueProperty: recentUser\r\n            });\r\n        }\r\n\r\n        return items;\r\n    }\r\n\r\n    private getRecentlySelectedUsers() {\r\n        let items = [];\r\n        if (this._recentsService.itemCount(`RecentlySelectedUsers`) > 0) {\r\n            items = this._recentsService.getItems(`RecentlySelectedUsers`, 10);\r\n        }\r\n        return items;\r\n    }\r\n\r\n    updateUI(partHideList: EmailParts[]) {\r\n        if (partHideList.includes(EmailParts.Cc) && this.ui.showCC) {\r\n            this.ui.showCC = false;\r\n        } else if (!partHideList.includes(EmailParts.Cc) && !this.ui.showCC) {\r\n            this.ui.showCC = true;\r\n        }\r\n        if (partHideList.includes(EmailParts.Bcc) && this.ui.showBCC) {\r\n            this.ui.showBCC = false;\r\n        } else if (!partHideList.includes(EmailParts.Bcc) && !this.ui.showBCC) {\r\n            this.ui.showBCC = true;\r\n        }\r\n        if (partHideList.includes(EmailParts.From) && this.eventConfiguration.showFrom) {\r\n            this.eventConfiguration.showFrom = false;\r\n        } else if (!partHideList.includes(EmailParts.From) && !this.eventConfiguration.showFrom) {\r\n            this.eventConfiguration.showFrom = true;\r\n        }\r\n    }\r\n}\r\n","<k2-email [emailPartDisableList]=\"partDisableList\"\r\n          [emailPartHideList]=\"partHideList\"\r\n          (emailPartHideListChange)=\"updateUI($event)\"\r\n          [emailPartReadOnlyList]=\"partReadonlyList\"\r\n          [(from)]=\"eventConfiguration.from\"\r\n          [(to)]=\"eventConfiguration.to\"\r\n          [(cc)]=\"eventConfiguration.cc\"\r\n          [(bcc)]=\"eventConfiguration.bcc\"\r\n          [(subject)]=\"eventConfiguration.subject\"\r\n          [(body)]=\"eventConfiguration.body\"\r\n          [(attachments)]=\"eventConfiguration.attachments\"\r\n          [(priority)]=\"eventConfiguration.mailPriority\"\r\n          [validation]=\"validation\"\r\n          [shouldIncludeOriginatorUsers]=\"true\">\r\n</k2-email>\r\n","import { Component, Inject, Input, OnInit } from '@angular/core';\r\nimport { ResourceService } from 'src/app/services/resource/resource.service';\r\nimport { UndoRedoServiceToken } from 'src/app/services/undo-redo/undo-redo-service-factory';\r\nimport { EndConfig } from 'src/app/shared/enums/activities/end-config';\r\nimport { ChooseControlTypes } from 'src/app/shared/enums/choose-control/choose-control-types';\r\nimport { IConfigPanelTab } from '../../../../../../../types/models/config-panel/i-config-panel-tab';\r\nimport { IConfigTabValidatedComponent } from '../../../../../../../types/models/config-panel/i-config-tab-validated-component';\r\nimport { ISetFolioEventConfiguration } from '../../../../../../../types/models/process/events/configuration/i-set-folio-event-configuration';\r\nimport { IEvent } from '../../../../../../../types/models/process/events/i-event';\r\nimport { IConfigPanelService } from '../../../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { IValidationService } from '../../../../../../../types/services/validation/ivalidation.service';\r\nimport { ConfigPanelServiceToken } from '../../../../../../services/config-panel/config-panel-service-factory';\r\nimport { ValidationServiceToken } from '../../../../../../services/validation/validation-service-factory';\r\nimport { ComponentIdMapping } from '../../../../../../shared/constants/components';\r\nimport { PluginBaseComponent } from '../../../base/plugin-base/plugin-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-set-folio-step',\r\n    templateUrl: './set-folio-step.component.html',\r\n    styleUrls: ['./set-folio-step.component.less']\r\n})\r\nexport class SetFolioStepComponent extends PluginBaseComponent implements OnInit {\r\n\r\n    @Input() eventConfiguration: ISetFolioEventConfiguration;\r\n    /**\r\n     * NOTE/TODO: When config panel feature is worked on, the config panel tab should be set from parent component\r\n     * (not from child as is currently)\r\n     */\r\n    @Input() configPanelTab: IConfigPanelTab;\r\n\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n    event: IEvent;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        @Inject(ValidationServiceToken) protected validationService: IValidationService,\r\n        @Inject(ConfigPanelServiceToken) protected configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) protected undoRedoService: IUndoRedoService) {\r\n        super(validationService, configPanelService, resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n\r\n        //Ensure the object model is properly applied on first create of step\r\n        if (this.eventConfiguration.componentId !== ComponentIdMapping.SetFolioEventConfiguration) {\r\n            this.event = this.eventConfiguration.getParentModel<IEvent>();\r\n            this.event.componentId = ComponentIdMapping.SetFolioEvent;\r\n\r\n            this.eventConfiguration =\r\n                sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.setFolio.SetFolioConfiguration.createInstance() as ISetFolioEventConfiguration;\r\n            this.eventConfiguration.folioField = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                smartFields: []\r\n            });\r\n\r\n            this.event.configuration = this.eventConfiguration;\r\n        }\r\n\r\n        //Cannot use inherited tab validation, because scope object can be recreated.\r\n        this.configureTabValidation();\r\n    }\r\n\r\n    private configureTabValidation(): void {\r\n        //Clear predefined watches on formConfiguration\r\n        this.configPanelTab.componentsToWatch = [];\r\n\r\n        const objToValidateConfigTab: IConfigTabValidatedComponent = {\r\n            componentObj: this.eventConfiguration,\r\n            compareFullReference: false\r\n        };\r\n        this.addObjectsToValidateConfigTab([objToValidateConfigTab], this.configPanelTab);\r\n    }\r\n}\r\n","<div class=\"wizard-container-stretch\">\r\n    <div class=\"content-section\">\r\n        <div class=\"section-heading\">\r\n            {{getFromResx(\"Wizards\", \"wizard_setFolio_folioLabel\")|async}}\r\n        </div>\r\n\r\n        <div class=\"section-content-separator\"></div>\r\n\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row\">\r\n                {{getFromResx(\"Wizards\", \"wizard_setFolio_folioParagraph\")|async}}\r\n            </div>\r\n            <div class=\"content-row-separator\"></div>\r\n            <div class=\"content-row\">\r\n                <k2-text-box class=\"k2-control control-background textbox-border\"\r\n                             [k2Watermark]=\"getFromResx('Wizards', 'general_TypeDrop' )|async\"\r\n                             [(k2Expression)]=\"eventConfiguration.folioField\">\r\n                </k2-text-box>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { IModelArray } from '../../../../../../../../types/models/base/i-model-array';\r\nimport { IConfigPanelTab } from '../../../../../../../../types/models/config-panel/i-config-panel-tab';\r\nimport { IConfigTabValidatedComponent } from '../../../../../../../../types/models/config-panel/i-config-tab-validated-component';\r\nimport { IExpression } from '../../../../../../../../types/models/core/configured-smart-fields/i-expression';\r\nimport { IEnvironmentField } from '../../../../../../../../types/models/core/external-reference-definitions/i-environment-field';\r\nimport { IClientEventConfiguration } from '../../../../../../../../types/models/process/events/configuration/i-client-event-configuration';\r\nimport { IEmailConfiguration } from '../../../../../../../../types/models/process/events/configuration/i-email-configuration';\r\nimport { IEvent } from '../../../../../../../../types/models/process/events/i-event';\r\nimport { IClientEventUI } from '../../../../../../../../types/models/process/events/ui/i-client-event-ui';\r\nimport { IConfigPanelService } from '../../../../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { IPluginService } from '../../../../../../../../types/services/plugin/i-plugin-service';\r\nimport { IValidationService } from '../../../../../../../../types/services/validation/ivalidation.service';\r\nimport { IRecipientValidationOptions } from '../../../../../../../../types/validation/i-recipient-validation-options';\r\nimport { ConfigPanelServiceToken } from '../../../../../../../services/config-panel/config-panel-service-factory';\r\nimport { ConfigurationService } from '../../../../../../../services/configuration/configuration-service';\r\nimport { PluginServiceToken } from '../../../../../../../services/plugin/plugin-service-factory';\r\nimport { ProcessService } from '../../../../../../../services/process/process.service';\r\nimport { ResourceService } from '../../../../../../../services/resource/resource.service';\r\nimport { UndoRedoServiceToken } from '../../../../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../../../../../services/validation/validation-service-factory';\r\nimport { ComponentIdMapping } from '../../../../../../../shared/constants/components';\r\nimport { EmailConstants } from '../../../../../../../shared/constants/email';\r\nimport { installTypes } from '../../../../../../../shared/constants/general';\r\nimport { plugins } from '../../../../../../../shared/constants/plugins';\r\nimport { ChooseControlTypes } from '../../../../../../../shared/enums/choose-control/choose-control-types';\r\nimport { EmailParts } from '../../../../../../../shared/enums/email/email-parts';\r\nimport { PluginBaseComponent } from '../../../../base/plugin-base/plugin-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-task-notification',\r\n    templateUrl: './task-notification.component.html',\r\n    styleUrls: ['./task-notification.component.less']\r\n})\r\nexport class TaskNotificationComponent extends PluginBaseComponent implements OnInit, OnDestroy{\r\n\r\n    @Input() event: IEvent;\r\n\r\n    @Input() eventConfiguration: IClientEventConfiguration;\r\n    /**\r\n     * NOTE/TODO: When config panel feature is worked on, the config panel tab should be set from parent component\r\n     * (not from child as is currently)\r\n     */\r\n    @Input() configPanelTab: IConfigPanelTab;\r\n\r\n    partDisableList: EmailParts[] = [];\r\n    partHideList: EmailParts[] = [];\r\n\r\n    //Public enums:\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n\r\n    //Validation Options per field:\r\n    validation: IRecipientValidationOptions = {\r\n        from: [\r\n            {\r\n                Required:\r\n                {\r\n                    validationFailedMessage: 'resource_service_empty_field_in_list',\r\n                    validationResourceTokens: [\r\n                        'resource_service_field_name_from',\r\n                        'configpanel_tabs_task_tooltips_title_NotificationsTab'\r\n                    ]\r\n                }\r\n            }],\r\n        cc: [\r\n            {\r\n                Required:\r\n                {\r\n                    validationFailedMessage: 'resource_service_empty_field_in_list',\r\n                    validationResourceTokens: [\r\n                        'resource_service_field_name_cc',\r\n                        'configpanel_tabs_task_tooltips_title_NotificationsTab'\r\n                    ]\r\n                }\r\n            }\r\n        ],\r\n        bcc: [\r\n            {\r\n                Required:\r\n                {\r\n                    validationFailedMessage: 'resource_service_empty_field_in_list',\r\n                    validationResourceTokens: [\r\n                        'resource_service_field_name_bcc',\r\n                        'configpanel_tabs_task_tooltips_title_NotificationsTab'\r\n                    ]\r\n                }\r\n            }\r\n        ]\r\n    };\r\n\r\n    constructor(resourceService: ResourceService,\r\n        @Inject(PluginServiceToken) private pluginService: IPluginService,\r\n        private configurationService: ConfigurationService,\r\n        private processService: ProcessService,\r\n        @Inject(UndoRedoServiceToken) private undoRedoService: IUndoRedoService,\r\n        @Inject(ValidationServiceToken) protected validationService: IValidationService,\r\n        @Inject(ConfigPanelServiceToken) protected configPanelService: IConfigPanelService) {\r\n        super(validationService, configPanelService, resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (!this.eventConfiguration && this.event) {\r\n            //If for some reason the eventConfiguration is not passed on from the parent\r\n            this.eventConfiguration = this.event.configuration as IClientEventConfiguration;\r\n        }\r\n\r\n        if (!this.emailConfig.body?.smartFields?.length) {\r\n            this.resetBody();\r\n        }\r\n\r\n        //Objects which should cause tab to be badged when in error:\r\n        let objToValidateConfigTab: IConfigTabValidatedComponent = {\r\n            componentObj: this.emailConfig,\r\n            compareFullReference: false\r\n        };\r\n        this.addObjectsToValidateConfigTab([objToValidateConfigTab], this.configPanelTab);\r\n\r\n        //Task Notification tab does not display Priority / To and only displays From according to install type\r\n        this.partDisableList.push(EmailParts.Priority);\r\n        this.partDisableList.push(EmailParts.To);\r\n        if (!this.shouldShowFrom) {\r\n            this.partDisableList.push(EmailParts.From);\r\n            this.resetFrom();\r\n        }\r\n\r\n        //Show/hide cc/bcc\r\n        const hasCC: boolean = this.emailConfig?.cc?.some((cc: IExpression) => cc.smartFields.length > 0 || cc.errorInformation.length > 0);\r\n\r\n        const hasBCC: boolean = this.emailConfig?.bcc?.some((bcc: IExpression) => bcc.smartFields.length > 0 || bcc.errorInformation.length > 0);\r\n\r\n        if (!this.eventUi.showCC && !hasCC) {\r\n            this.partHideList.push(EmailParts.Cc);\r\n        }\r\n\r\n        if (!this.eventUi.showBCC && !hasBCC) {\r\n            this.partHideList.push(EmailParts.Bcc);\r\n        }\r\n    }\r\n\r\n    get eventUi(): IClientEventUI {\r\n        return this.event.ui as IClientEventUI;\r\n    }\r\n\r\n    get shouldSendNotification(): boolean {\r\n        return this.eventConfiguration.sendNotification;\r\n    }\r\n\r\n    get shouldUseCustomTemplate(): boolean {\r\n        return !(this.eventConfiguration.useStandardTemplate);\r\n    }\r\n\r\n    get emailConfig(): IEmailConfiguration {\r\n        return this.eventConfiguration.emailConfiguration;\r\n    }\r\n\r\n    /**\r\n     * Only allow From address for BlackPearl install types\r\n     */\r\n    get shouldShowFrom(): boolean {\r\n        return this.configurationService.installType.toUpperCase() === installTypes.blackPearl;\r\n    }\r\n\r\n    toggleSendNotification(shouldSendNotification: boolean): void {\r\n        this.eventConfiguration.sendNotification = shouldSendNotification;\r\n\r\n        if (!shouldSendNotification) {\r\n            this.loadBodyTemplate();\r\n        } else {\r\n            this.eventConfiguration.useStandardTemplate = true;\r\n            this.reInitializeEmailConfig();\r\n            this.pluginService.toggleCollapsed(plugins.panels.emailBody);\r\n        }\r\n    }\r\n\r\n    toggleUseStandardTemplate(shouldUseCustomTemplate: boolean): void {\r\n        this.eventConfiguration.useStandardTemplate = !shouldUseCustomTemplate;\r\n        if (this.eventConfiguration.useStandardTemplate) {\r\n            this.reInitializeEmailConfig();\r\n            this.pluginService.toggleCollapsed(plugins.panels.emailBody);\r\n        }\r\n    }\r\n\r\n    private reInitializeEmailConfig(): void {\r\n        this.resetCc();\r\n\r\n        this.resetBcc();\r\n\r\n        this.emailConfig.attachments.clear();\r\n\r\n        this.emailConfig.subject.smartFields.clear();\r\n\r\n        this.resetFrom();\r\n\r\n        this.loadBodyTemplate();\r\n\r\n        this.eventUi.showFrom = this.shouldShowFrom;\r\n        this.eventUi.showCC = false;\r\n        this.eventUi.showBCC = false;\r\n        if (this.partHideList.indexOf(EmailParts.Cc) === -1) {\r\n            this.partHideList.push(EmailParts.Cc);\r\n        }\r\n        if (this.partHideList.indexOf(EmailParts.Bcc) === -1) {\r\n            this.partHideList.push(EmailParts.Bcc);\r\n        }\r\n    }\r\n\r\n    private resetCc(): IModelArray<IExpression> {\r\n        this.emailConfig.cc.clear();\r\n        this.undoRedoService.addUndoMarker('--Task Notification controller: add cc--');\r\n        this.emailConfig.cc.push(sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance());\r\n        return this.emailConfig.cc;\r\n    }\r\n\r\n    private resetBcc(): IModelArray<IExpression> {\r\n        this.emailConfig.bcc.clear();\r\n        this.undoRedoService.addUndoMarker('--Task Notification controller: add bcc--');\r\n        this.emailConfig.bcc.push(sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance());\r\n        return this.emailConfig.bcc;\r\n    }\r\n\r\n    private resetFrom(): IExpression {\r\n        let def = sourceCode.k2Designer.objectModel.smartFieldPlugins.EnvironmentFieldPlugin.createExternalDefinition(this.processService.root, EmailConstants.FromAddress);\r\n\r\n        this.emailConfig.from = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n            smartFields: [{\r\n                title: def.name,\r\n                environmentFieldReference: def.getReference(),\r\n                componentId: ComponentIdMapping.k2EnvironmentField\r\n            } as IEnvironmentField]\r\n        });\r\n\r\n        return this.emailConfig.from;\r\n    }\r\n\r\n    private resetBody(): IExpression {\r\n\r\n        this.loadBodyTemplate();\r\n\r\n        (this.emailConfig.body as sourceCode.k2Designer.objectModel.core.configuredSmartFields.IExpressionExtended).notifyChange(null);\r\n\r\n        return this.emailConfig.body;\r\n\r\n    }\r\n\r\n    private loadBodyTemplate(): void {\r\n        if (this.emailConfig.body.smartFields) {\r\n            this.emailConfig.body.smartFields.clear();\r\n            this.emailConfig.body.richText = true;\r\n            this.emailConfig.body.html = false;\r\n        }\r\n\r\n        if (this.eventConfiguration.sendNotification) {\r\n            if (this.eventConfiguration.isSmartActionsEnabled) {\r\n                let template = JSON.parse(this.resourceService.getString('wizard_task_notification_template_smartactions'));\r\n                for (let i: number = 0; i < template.length; i++) {\r\n                    this.emailConfig.body.smartFields.push(template[i]);\r\n                }\r\n            }\r\n            else {\r\n                let template = JSON.parse(this.resourceService.getString('wizard_task_notification_template'));\r\n                for (let i: number = 0; i < template.length; i++) {\r\n                    this.emailConfig.body.smartFields.push(template[i]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","<div class=\"task-step\">\r\n\r\n    <!-- Task Notification -->\r\n    <div class=\"content-section\">\r\n        <div class=\"section-heading\">\r\n            {{getFromResx(\"Wizards\", \"wizard_Task_Notification_Header\")|async}}\r\n        </div>\r\n\r\n        <div class=\"section-content-separator\"></div>\r\n\r\n        <div class=\"section-sub-heading\">\r\n            {{getFromResx(\"Wizards\", \"wizard_Task_Notification_SubHeader\")|async}}\r\n        </div>\r\n        <!--customizeNotification -->\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row-separator\"></div>\r\n\r\n            <div class=\"content-row\">\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                                      displayText=\"{{getFromResx('Wizards','wizard_Task_Notification_Label_SendEmailNotification') | async}}\"\r\n                                      [checked]=\"shouldSendNotification\"\r\n                                      (checkedChange)=\"toggleSendNotification($event)\"\r\n                                      name=\"taskNotificationOn\">\r\n                </k2-choose-control-v2>\r\n            </div>\r\n            <div class=\"content-row-separator\"></div>\r\n            <div data-ng-if=\"eventConfiguration.sendNotification\">\r\n                <div class=\"content-row\">\r\n                    <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                                          displayText=\"{{getFromResx('Wizards','wizard_Task_Notification_Label_CustomizeNotification') | async}}\"\r\n                                          [checked]=\"shouldUseCustomTemplate\"\r\n                                          (checkedChange)=\"toggleUseStandardTemplate($event)\"\r\n                                          name=\"taskNotificationStandardTemplate\">\r\n                    </k2-choose-control-v2>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"eventConfiguration.sendNotification\"\r\n         [class.is-disabled]=\"!shouldUseCustomTemplate\">\r\n\r\n        <k2-email [emailPartDisableList]=\"partDisableList\"\r\n                  [emailPartHideList]=\"partHideList\"\r\n                  [(from)]=\"emailConfig.from\"\r\n                  [(to)]=\"emailConfig.to\"\r\n                  [(cc)]=\"emailConfig.cc\"\r\n                  [(bcc)]=\"emailConfig.bcc\"\r\n                  [(subject)]=\"emailConfig.subject\"\r\n                  [(body)]=\"emailConfig.body\"\r\n                  [(attachments)]=\"emailConfig.attachments\"\r\n                  [shouldAllowCustomTemplate]=\"shouldUseCustomTemplate\"\r\n                  [validation]=\"validation\">\r\n        </k2-email>\r\n\r\n    </div>\r\n</div>\r\n","import { Component, Inject, Input, OnInit, QueryList, ViewChild, ViewChildren } from '@angular/core';\r\nimport { DropDownComponent } from 'src/app/components/common/drop-down/drop-down.component';\r\nimport { TextboxComponent } from 'src/app/components/common/text-box/text-box.component';\r\nimport { ConfigPanelServiceToken } from 'src/app/services/config-panel/config-panel-service-factory';\r\nimport { DataTypeResolverService } from 'src/app/services/plugins/data-type-resolver/data-type-resolver.service';\r\nimport { PopupService } from 'src/app/services/popup/popup.service';\r\nimport { ProcessService } from 'src/app/services/process/process.service';\r\nimport { ResourceService } from 'src/app/services/resource/resource.service';\r\nimport { UndoRedoServiceToken } from 'src/app/services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from 'src/app/services/validation/validation-service-factory';\r\nimport IDropDownMenuItem from 'src/app/shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropDownMenuTrianglePosition } from 'src/app/shared/enums/drop-down/drop-down-triangle-position';\r\nimport { ErrorSeverity } from 'src/app/shared/enums/model/error-severity';\r\nimport { ValidationTypes } from 'src/app/shared/enums/model/validation-types';\r\nimport { DataFieldTypes } from 'src/app/shared/enums/model/workflow/process/data-field-types';\r\nimport { findUniqueName } from 'src/app/shared/utils/name-helper';\r\nimport { IModelObject } from 'src/types/models/base/i-model-object';\r\nimport { IDataFieldMappingRows } from 'src/types/models/config-panel/plugins/plugin-wizards/custom-wizards/set-data-fields-wizard/i-data-field-mapping-rows';\r\nimport { IDataField } from 'src/types/models/data-field/i-data-field';\r\nimport { ISetDataFieldMapping } from 'src/types/models/process/events/configuration/i-set-data-field-mapping';\r\nimport { ISetDataFieldsConfiguration } from 'src/types/models/process/events/configuration/i-set-data-fields-configuration';\r\nimport { IConfigPanelService } from 'src/types/services/config-panel/i-config-panel-service';\r\nimport { IValidationService } from 'src/types/services/validation/ivalidation.service';\r\nimport { PluginBaseComponent } from '../../../base/plugin-base/plugin-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-set-data-fields-wizard',\r\n    templateUrl: './set-data-fields-wizard.component.html',\r\n    styleUrls: ['./set-data-fields-wizard.component.less']\r\n})\r\nexport class SetDataFieldsWizardComponent extends PluginBaseComponent implements OnInit {\r\n\r\n    // Input properties\r\n    @Input() configuration: ISetDataFieldsConfiguration;\r\n\r\n    // Public properties\r\n    hoverClass = false;\r\n    rowDropdownFocus = false;\r\n    rowValueControlFocus = false;\r\n    selectedMappingRowIndex: number;\r\n\r\n    selectedRowItem: IDataFieldMappingRows;\r\n    selectedProperties: IDataFieldMappingRows[] = [];\r\n\r\n    selectedItem: IDropDownMenuItem;\r\n    datafieldsDropdownFooterArray: IDropDownMenuItem[] = [];\r\n    datafieldsDropdownRowFooterArray: IDropDownMenuItem[] = [];\r\n\r\n    dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n\r\n    @ViewChildren(TextboxComponent) private textboxes: QueryList<TextboxComponent>;\r\n    @ViewChild('newRowDropdown') private newRowDropdown: DropDownComponent;\r\n\r\n    get process(): sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process {\r\n        return this.configuration.getRoot<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process>();\r\n    }\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        @Inject(ValidationServiceToken) protected validationService: IValidationService,\r\n        @Inject(ConfigPanelServiceToken) protected configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) protected undoRedoService: IUndoRedoService,\r\n        private popupService: PopupService,\r\n        private processService: ProcessService,\r\n        private dataTypeResolverService: DataTypeResolverService) {\r\n        super(validationService, configPanelService, resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // We disable the undo redo service when adding the mapping, so that it will not be undone when undoing the drop.\r\n        // Undoing the mapping add will remove the error, and then there will be nothing to reevaluate when you redo\r\n        this.undoRedoService.forceDisable();\r\n        if (this.configuration.mappings.length === 0) {\r\n            this.configuration.mappings.push({\r\n                dataFieldReference: '',\r\n                value: sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                    smartFields: []\r\n                })\r\n            });\r\n            this.selectedMappingRowIndex = 0;\r\n            this.rowDropdownFocus = false;\r\n            this.rowValueControlFocus = false;\r\n        }\r\n        this.undoRedoService.resetForceDisable();\r\n\r\n        // add separator and 'create new' item\r\n        this.datafieldsDropdownFooterArray.push(DropDownComponent.separator);\r\n\r\n        //dropdown menu popup when click (+) footer icon\r\n        this.datafieldsDropdownFooterArray.push(\r\n            {\r\n                key: 'createNew',\r\n                icon: 'icon-set-steps ic-dataevent',\r\n                title: this.resourceService.getString('workflow_dataFields_createNew'),\r\n                ignoreUpdateSelection: true,\r\n                hideCheckbox: true,\r\n                onSelected: this.showNewDataFieldPopup.bind(this)\r\n            }\r\n        );\r\n\r\n        this.datafieldsDropdownRowFooterArray.push(DropDownComponent.separator);\r\n\r\n        //dropdown menu for data field (left cell) of data field row\r\n        this.datafieldsDropdownRowFooterArray.push(\r\n            {\r\n                key: 'createNew',\r\n                icon: 'icon-set-steps ic-dataevent',\r\n                title: this.resourceService.getString('workflow_dataFields_createNew'),\r\n                ignoreUpdateSelection: true,\r\n                onSelected: this.showNewDataFieldRowPopup.bind(this)\r\n            }\r\n        );\r\n\r\n        if (!this.selectedProperties) {\r\n            this.selectedProperties = [];\r\n        }\r\n\r\n        for (let i = 0; i < this.configuration.mappings.length; i++) {\r\n            this.setValidationInfoAndValidate(this.configuration.mappings[i], i.toString());\r\n        }\r\n    }\r\n\r\n    private setValidationInfoAndValidate(mapping: IModelObject, uniqueIdentifier: string): void {\r\n        const bindingName = 'datafieldDropdown' + uniqueIdentifier;\r\n\r\n        const validationData = super.createValidationData(\r\n            'resource_service_empty_field',\r\n            ValidationTypes.Required,\r\n            mapping,\r\n            'dataFieldReference',\r\n            ErrorSeverity.Error,\r\n            [\r\n                'resource_service_field_name_data_field',\r\n                'configpanel_tabs_task_tooltips_title_setdatafields'\r\n            ]\r\n        );\r\n\r\n        //Listen for change of datafield reference, that will trigger validation\r\n        const propertyObjectsToListenTo = [{\r\n            object: mapping,\r\n            properties: ['dataFieldReference', 'value']\r\n        }];\r\n\r\n        super.bindValidationToFieldAndListen(bindingName, validationData, propertyObjectsToListenTo);\r\n\r\n        super.validate(bindingName);\r\n    }\r\n\r\n    getDataFields(): IDropDownMenuItem[] {\r\n        const dataFields: IDropDownMenuItem[] = [];\r\n\r\n        // populate all process-level data fields\r\n        for (let i = 0; i < this.process.configuration.dataFields.length; i++) {\r\n            if (!this.process.configuration.dataFields[i].systemField) {\r\n                const reference: string = this.process.configuration.dataFields[i].getReference();\r\n\r\n                //if it is already mapped, it should be selected state (isSelected = true)\r\n                dataFields.push({\r\n                    icon: this.getIconFromType(this.process.configuration.dataFields[i].type.toString()),\r\n                    key: reference,\r\n                    title: this.process.configuration.dataFields[i].title,\r\n                    onSelected: this.onSelectedDdItem.bind(this),\r\n                    isSelected: !this.showDataFieldInDropdown(reference)\r\n                });\r\n            }\r\n        }\r\n\r\n        return dataFields;\r\n    }\r\n\r\n    getRowDataFields(selectedMappingsIndex: number): IDropDownMenuItem[] {\r\n        const dataFields: IDropDownMenuItem[] = [];\r\n\r\n        // populate all process-level data fields\r\n        const process: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process = this.process;\r\n        const selectedDataFieldReference: string = this.configuration.mappings[selectedMappingsIndex]?.dataFieldReference;\r\n\r\n        for (let i = 0; i < process.configuration.dataFields.length; i++) {\r\n            if (!process.configuration.dataFields[i].systemField) {\r\n                const reference: string = process.configuration.dataFields[i].getReference();\r\n                if (this.showDataFieldInDropdown(reference, selectedMappingsIndex)) {\r\n                    dataFields.push({\r\n                        icon: this.getIconFromType(process.configuration.dataFields[i].type.toString()),\r\n                        key: reference,\r\n                        title: process.configuration.dataFields[i].title,\r\n                        onSelected: this.onSelectedSwapItem.bind(this),\r\n                        isSelected: selectedDataFieldReference === reference\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        return dataFields;\r\n    }\r\n\r\n    private getIconFromType(typeOfIcon: string): string {\r\n        const iconType: string = this.dataTypeResolverService.getSpriteClassFromDataType(typeOfIcon);\r\n        return `icon-set-datatypes ic-${iconType}`;\r\n    }\r\n\r\n    getIconByRef(ref: string): string {\r\n        const process: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process = this.process;\r\n        for (let i = 0; i < process.configuration.dataFields.length; i++) {\r\n            const reference: string = process.configuration.dataFields[i].getReference();\r\n\r\n            if (reference === ref) {\r\n                return this.getIconFromType(process.configuration.dataFields[i].type.toString());\r\n            }\r\n        }\r\n\r\n        return '';\r\n    }\r\n\r\n    private onSelectedDdItem(item: IDropDownMenuItem): void {\r\n        this.undoRedoService.addUndoMarker('--setDataFieldController: add data field mapping--');\r\n\r\n        if (item.isSelected === false) {\r\n            if (this.configuration.mappings && this.configuration.mappings.length === 1 &&\r\n                (!this.configuration.mappings[0].dataFieldReference || this.configuration.mappings[0].dataFieldReference === '')\r\n                && !this.configuration.mappings[0].title) {\r\n                this.configuration.mappings[0].dataFieldReference = item.key;\r\n            }\r\n            else {\r\n                this.configuration.mappings.push({\r\n                    dataFieldReference: item.key,\r\n                    value: {\r\n                        smartFields: []\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0; i < this.configuration.mappings.length; i++) {\r\n                if (this.configuration.mappings[i].dataFieldReference === item.key) {\r\n                    this.configuration.mappings[i].removeFromModelArray();\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        //Select Last item\r\n        this.selectedMappingRowIndex = this.configuration.mappings.length - 1;\r\n\r\n        this.focusRowTextbox();\r\n    }\r\n\r\n    private onSelectedSwapItem(item: IDropDownMenuItem): void {\r\n        this.undoRedoService.addUndoMarker('--setDataFieldController: swap data field mapping--');\r\n\r\n        this.configuration.mappings[this.selectedMappingRowIndex].dataFieldReference = item.key;\r\n\r\n        this.focusRowTextbox();\r\n    }\r\n\r\n    private showDataFieldInDropdown(dataFieldReference: string, rowIndex: number = -1): boolean {\r\n        const mappings: ISetDataFieldMapping[] =\r\n            (<ISetDataFieldsConfiguration>this.configuration).mappings;\r\n        for (let i = 0; i < mappings.length; i++) {\r\n            //Exclude datafield if already in mappings but, don't exclude the selected datafield for current mapper row.\r\n            if (mappings[i].dataFieldReference === dataFieldReference && i !== rowIndex) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private showNewDataFieldPopup(mapping: ISetDataFieldMapping): void {\r\n\r\n        this.processService.root.configuration.dataFields.push(sourceCode.k2Designer.objectModel.workflow.process.k2Process.DataField.createInstance({\r\n            title: this.getNewDataFieldTitle(),\r\n            type: DataFieldTypes.string,\r\n            isEmptyValue: true\r\n        }));\r\n\r\n        this.newRowDropdown.collapseMenu();\r\n\r\n        this.popupService.showDataFieldPopup(\r\n            this.process.configuration,\r\n            this.processService.root.configuration.dataFields[this.processService.root.configuration.dataFields.length - 1],\r\n            this.onNewDataFieldCreated.bind(this, mapping, this.processService.root.configuration.dataFields[this.processService.root.configuration.dataFields.length - 1]),\r\n            this.onCancel.bind(this, this.processService.root.configuration.dataFields[this.processService.root.configuration.dataFields.length - 1]),\r\n            this\r\n        );\r\n    }\r\n\r\n    private showNewDataFieldRowPopup(mapping: ISetDataFieldMapping): void {\r\n\r\n        this.processService.root.configuration.dataFields.push(sourceCode.k2Designer.objectModel.workflow.process.k2Process.DataField.createInstance({\r\n            title: this.getNewDataFieldTitle(),\r\n            type: DataFieldTypes.string,\r\n            isEmptyValue: true\r\n        }));\r\n\r\n        this.popupService.showDataFieldPopup(\r\n            this.process.configuration,\r\n            this.processService.root.configuration.dataFields[this.processService.root.configuration.dataFields.length - 1],\r\n            this.onNewDataFieldRowCreated.bind(this, mapping, this.processService.root.configuration.dataFields[this.processService.root.configuration.dataFields.length - 1]),\r\n            this.onCancel.bind(this, this.processService.root.configuration.dataFields[this.processService.root.configuration.dataFields.length - 1]),\r\n            this\r\n        );\r\n    }\r\n\r\n    private onCancel(dataField: IDataField) {\r\n        dataField.removeFromModelArray();\r\n    }\r\n\r\n    private onNewDataFieldCreated(mapping: ISetDataFieldMapping, item: IDataField): void {\r\n        this.undoRedoService.addUndoMarker('--setDataFieldController: new datafield created--');\r\n\r\n        if (!!mapping) {\r\n            const reference = item.getReference();\r\n\r\n            (<ISetDataFieldsConfiguration>this.configuration).mappings.push({\r\n                dataFieldReference: reference,\r\n                value: {\r\n                    smartFields: []\r\n                }\r\n            });\r\n\r\n            //Select Last item\r\n            this.selectedMappingRowIndex = this.configuration.mappings.length - 1;\r\n\r\n            this.setValidationInfoAndValidate(this.configuration.mappings[this.selectedMappingRowIndex], this.selectedMappingRowIndex.toString() + reference);\r\n\r\n            this.focusRowTextbox();\r\n        }\r\n    }\r\n\r\n    private onNewDataFieldRowCreated(mapping: ISetDataFieldMapping, item: IDataField): void {\r\n        this.undoRedoService.addUndoMarker('--setDataFieldController: new data field row created--');\r\n\r\n        (<ISetDataFieldsConfiguration>this.configuration).mappings[this.selectedMappingRowIndex].dataFieldReference = item.getReference();\r\n\r\n        this.focusRowTextbox();\r\n    }\r\n\r\n    /**\r\n     * After a new field is chosen or create, focus is set on the current row textbox\r\n     */\r\n    private focusRowTextbox() {\r\n        setTimeout(() => {\r\n            this.textboxes.last?.doFocus();\r\n        }, 100);\r\n    };\r\n\r\n    /**\r\n     * Methods to delete a mapping row\r\n     */\r\n    mappingRowSelected(index: number): void {\r\n        this.selectedRowItem = this.selectedProperties[index];\r\n        this.rowDropdownFocus = false;\r\n        this.rowValueControlFocus = false;\r\n        this.selectedMappingRowIndex = index;\r\n    }\r\n\r\n    deleteDataFieldMappingRow() {\r\n        this.undoRedoService.addUndoMarker('--setDataFieldController: delete data field mapping--');\r\n\r\n        this.configuration.mappings[this.selectedMappingRowIndex].removeFromModelArray();\r\n        this.selectedMappingRowIndex = -1;\r\n    }\r\n\r\n    private getNewDataFieldTitle(): string {\r\n        const defaultName: string = this.resourceService.getString('workflow_dataFields_defaultFieldName');\r\n\r\n        return findUniqueName(this.processService.root.configuration.dataFields, 'title', defaultName);\r\n    }\r\n\r\n}\r\n","<div class=\"wizard-container-stretch\">\r\n\r\n    <div class=\"content-section\">\r\n        <div class=\"section-heading\">\r\n            {{ getFromResx (\"Wizards\", \"wizard_SetDataFields_updateProc_title\")| async }}\r\n        </div>\r\n\r\n        <div class=\"section-content-separator\"></div>\r\n\r\n        <div class=\"section-sub-heading\">\r\n            {{ getFromResx (\"Wizards\", \"wizard_SetDataFields_updateProc_desc\")| async }}\r\n        </div>\r\n\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row-separator\"></div>\r\n            <div class=\"content-row\">\r\n                <div class=\"k2-property-mapper k2-property-mapper-workflow-style k2-set-variables-mapper\">\r\n                    <!--Header -->\r\n                    <div class=\"property-mapper-heading\">\r\n                        <div class=\"icon-heading\"><span class=\"icon icon-size16 icon-set-steps ic-callsubworkflow selected\"></span></div>\r\n                        <div class=\"text-heading\">{{ process.title }}</div>\r\n                    </div>\r\n                    <!--Content -->\r\n                    <div class=\"nothing-selected\" *ngIf=\"!configuration.mappings || configuration.mappings.length === 0\">\r\n                        {{ getFromResx (\"Wizards\", \"control_Property_Mapper_No_Properties\")| async }}\r\n                    </div>\r\n                    <div class=\"property-mapper-content\" *ngIf=\"configuration.mappings && configuration.mappings.length > 0\">\r\n                        <div class=\"property-mapper-content-row\" \r\n                             *ngFor=\"let mapping of configuration.mappings;let $index=index\" \r\n                             (click)=\"mappingRowSelected($index)\" \r\n                             [ngClass]=\" { 'selected': $index === selectedMappingRowIndex, 'row-focus': rowDropdownFocus === false && rowValueControlFocus === false} \">\r\n                            <div #leftContent class=\"left-content\"\r\n                                [ngClass]=\" { 'selected': $index === selectedMappingRowIndex && rowDropdownFocus === false, 'focus' : $index === selectedMappingRowIndex && rowDropdownFocus === true } \"\r\n                                (click)=\"rowDropdownFocus = true; rowValueControlFocus = false\">\r\n                                <k2-drop-down class=\"height\"\r\n                                              [menuItems]=\"getRowDataFields.bind(this, $index)\"\r\n                                              [menuAlignElement]=\"leftContent\"\r\n                                              [selectedItemKey]=\"selectedItem?.key\"\r\n                                              [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                                              [footerItems]=\"datafieldsDropdownRowFooterArray\">\r\n                                    <div class=\"icon-content\"><span class=\"icon icon-size16 {{getIconByRef(mapping.dataFieldReference)}}\"></span></div>\r\n                                    <div class=\"desc-content\">\r\n                                        <div *ngIf=\"mapping.title && mapping.title.length !== 0\">{{ mapping.title }}</div>\r\n                                        <div class=\"italic\" *ngIf=\"!mapping.title || mapping.title.length === 0\">{{ getFromResx (\"Wizards\", \"control_Property_Mapper_Pick_Field\")| async }}</div>\r\n                                    </div>\r\n                                    <div class=\"icon-content-dd\">\r\n                                        <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\" \r\n                                              [class.selected]=\"$index === selectedMappingRowIndex\">\r\n                                        </span>\r\n                                    </div>\r\n                                    <k2-badges [k2Model]=\"mapping\"></k2-badges>\r\n                                </k2-drop-down>\r\n                            </div>\r\n\r\n                            <div class=\"right-content\"\r\n                                (click)=\"rowDropdownFocus = false; rowValueControlFocus = true\"\r\n                                [ngClass]=\" { 'selected': $index === selectedMappingRowIndex && rowValueControlFocus === false, 'focus' : $index === selectedMappingRowIndex && rowValueControlFocus === true } \">\r\n                                <div class=\"textboxStyle\">\r\n                                    <k2-text-box\r\n                                        class=\"text-box\" \r\n                                        [k2Watermark]=\"getFromResx('Wizards', 'general_TypeDrop')| async\"\r\n                                        [k2Expression]=\"mapping.value\"></k2-text-box>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <!--Footer -->\r\n                    <div class=\"property-mapper-footer\">\r\n                        <div class=\"add-delete-row\">\r\n                            <div class=\"btn k2-btn k2-btn-add property-mapper-footer-padding\">\r\n                                <k2-drop-down #newRowDropdown\r\n                                              class=\"icon icon-set-buttons icon-size24 ic-add_button\"\r\n                                              [menuItems]=\"getDataFields.bind(this)\"\r\n                                              [selectedItemKey]=\"selectedItem?.key\"\r\n                                              [trianglePosition]=\"dropDownMenuTrianglePosition.center\"\r\n                                              [footerItems]=\"datafieldsDropdownFooterArray\"\r\n                                              [isMultiSelect]=\"true\">\r\n                                </k2-drop-down>\r\n                            </div>\r\n                            <div class=\"trash bin property-mapper-footer-padding\" \r\n                                 *ngIf=\"selectedMappingRowIndex >= 0\" \r\n                                 (click)=\"deleteDataFieldMappingRow()\">\r\n                                <span class=\"icon icon-set-buttons icon-size24 ic-bin_button {{ hoverClass }}\" \r\n                                      (mouseenter)=\"hoverClass = 'disabled'\" \r\n                                      (mouseleave)=\"hoverClass = ''\"></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, EventEmitter, Inject, Input, OnInit } from '@angular/core';\r\nimport { IActivityConfiguration } from '../../../../../../../../types/models/process/activities/configuration/i-activity-configuration';\r\nimport { IActivity } from '../../../../../../../../types/models/process/activities/i-activity';\r\nimport { IClientEventConfiguration } from '../../../../../../../../types/models/process/events/configuration/i-client-event-configuration';\r\nimport { IEvent } from '../../../../../../../../types/models/process/events/i-event';\r\nimport { IConfigPanelService } from '../../../../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { IEnvironmentService } from '../../../../../../../../types/services/environment/i-environment-service';\r\nimport { IPluginService } from '../../../../../../../../types/services/plugin/i-plugin-service';\r\nimport { IValidationService } from '../../../../../../../../types/services/validation/ivalidation.service';\r\nimport { ConfigPanelServiceToken } from '../../../../../../../services/config-panel/config-panel-service-factory';\r\nimport { EnvironmentServiceToken } from '../../../../../../../services/environment/environment-service-factory';\r\nimport { EventNotifierService } from '../../../../../../../services/event-notifier/event-notifier.service';\r\nimport { PluginServiceToken } from '../../../../../../../services/plugin/plugin-service-factory';\r\nimport { ResourceService } from '../../../../../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../../../../../services/ruleplugin/rule-plugin-service';\r\nimport { UndoRedoServiceToken } from '../../../../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../../../../../services/validation/validation-service-factory';\r\nimport { WorkflowService } from '../../../../../../../services/workflow/workflow.service';\r\nimport { ComponentIdMapping } from '../../../../../../../shared/constants/components';\r\nimport { DecisionActivityChangedEvent } from '../../../../../../../shared/constants/events';\r\nimport { rules } from '../../../../../../../shared/constants/rules';\r\nimport { StepTemplates } from '../../../../../../../shared/enums/activities/step-template-names';\r\nimport { ChooseControlTypes } from '../../../../../../../shared/enums/choose-control/choose-control-types';\r\nimport { DropDownMenuAlignment } from '../../../../../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropDownMenuTrianglePosition } from '../../../../../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { DecisionOptionType } from '../../../../../../../shared/enums/model/workflow/process/decision-option-types';\r\nimport { RuleContextHandlerNames } from '../../../../../../../shared/enums/rules/rule-context-handler-names';\r\nimport { isUndefinedOrNull, shortUid } from '../../../../../../../shared/utils/general';\r\nimport { RulePluginBaseComponent } from '../../../../base/rule-plugin-base/rule-plugin-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-decision-step-footer',\r\n    templateUrl: './decision-step-footer.component.html',\r\n    styleUrls: ['./decision-step-footer.component.less']\r\n})\r\nexport class DecisionStepFooterComponent extends RulePluginBaseComponent implements OnInit {\r\n\r\n    @Input() activity: IActivity;\r\n\r\n    isDropDownActive = false;\r\n    checkBoxId = shortUid();\r\n    defaultActions: IDropDownMenuItem[] = [];\r\n\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n    dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    dropDownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n\r\n    private decisionActionChangedEvent: EventEmitter<IActivityConfiguration>;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        protected rulePluginService: RulePluginService,\r\n        @Inject(ValidationServiceToken) protected validationService: IValidationService,\r\n        @Inject(ConfigPanelServiceToken) protected configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) protected undoRedoService: IUndoRedoService,\r\n        @Inject(PluginServiceToken) protected pluginService: IPluginService,\r\n        @Inject(EnvironmentServiceToken) protected environmentService: IEnvironmentService,\r\n        private workflowService: WorkflowService,\r\n        private eventNotifierService: EventNotifierService) {\r\n        super(validationService, configPanelService, rulePluginService, undoRedoService,\r\n            pluginService, environmentService, resourceService, RuleContextHandlerNames.DecisionRule);\r\n\r\n        this.decisionActionChangedEvent = this.eventNotifierService.addEvent(DecisionActivityChangedEvent);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.defaultActions = this.getDefaultActions();\r\n    }\r\n\r\n    /**\r\n     * Decision activity configuration\r\n     */\r\n    get activityConfig(): IActivityConfiguration {\r\n        //Have to cast to unknown, because of 'createdFromIfDrop' property which does not exist in WFD\r\n        return this.activity.configuration as unknown as IActivityConfiguration;\r\n    }\r\n\r\n    /**\r\n     * Event configured for the decision (referenced in outcomesEventReference)\r\n     */\r\n    get selectedEvent(): IEvent {\r\n        return this.activityConfig.outcomesEventReference ?\r\n            this.workflowService.findItem<IEvent>(this.activityConfig.outcomesEventReference, this.activity) : null;\r\n    }\r\n\r\n    activitySelected(actionItem: IDropDownMenuItem) {\r\n        this.undoRedoService.addUndoMarker('--outcomes tab: link to event--');\r\n\r\n        const decisionStep = this.activity;\r\n\r\n        this.activityConfig.outcomesEventReference = actionItem.key;\r\n\r\n        if (decisionStep.configuration.isDecisionOutcomeCheckBoxChecked) {\r\n            //Ensure that automatic rule is generated for selected task outcomes, only if no custom rule has been configured\r\n            if (sourceCode.k2Designer.objectModel.rulePlugins.rules.DecisionRule.checkIfRuleIsDefault(decisionStep.configuration.outcomeRule)) {\r\n                this.selectRuleType(DecisionOptionType.auto);\r\n            }\r\n        }\r\n\r\n        this.decisionActionChangedEvent.emit(this.activityConfig);\r\n    }\r\n\r\n    /**\r\n     * Get title from event, if event has no title, get from parent activity\r\n     * */\r\n    getSelectedEventTitle(): string {\r\n        if (this.selectedEvent?.title) {\r\n            return this.selectedEvent.title;\r\n        } else if (this.selectedEvent) {\r\n            return this.selectedEvent.getLogicalParentModel<IActivity>().title;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    autoAddDecisionsChanged(isAutoAdd: boolean): void {\r\n\r\n        if (!isAutoAdd) {\r\n            //Unlink\r\n            this.undoRedoService.addUndoMarker('--outcomes tab: unlink from user task--');\r\n            this.activityConfig.outcomesEventReference = '';\r\n\r\n        } else {\r\n            this.undoRedoService.addUndoMarker('--outcomes tab: link to user task--');\r\n            const selectedAction = this.defaultActions.find(a => a.isSelected);\r\n            if (selectedAction) {\r\n                this.activityConfig.outcomesEventReference = selectedAction.key;\r\n            }\r\n        }\r\n\r\n        this.decisionActionChangedEvent.emit(this.activityConfig);\r\n    }\r\n\r\n    protected loadAndPopulateRuleDesigner(): void {\r\n        //Do nothing\r\n    }\r\n\r\n    protected refreshTabIndexes(): void {\r\n        //Do nothing\r\n    }\r\n\r\n    protected selectRuleType(ruleType: DecisionOptionType): void {\r\n        if (ruleType === DecisionOptionType.auto) {\r\n            this.workflowService.createAutoRuleForDecisionOrSplit(this.activity);\r\n            this.loadEmptyRuleDesigner();\r\n        }\r\n    }\r\n\r\n    protected renderRuleDesigner(): void {\r\n        //Do nothing\r\n    }\r\n\r\n    /**\r\n     * This method loops through all the activities on the canvas, adds it to an array.\r\n     * The dropdown will display all items in the array.\r\n     */\r\n    private getDefaultActions(): IDropDownMenuItem[] {\r\n        const actions = [];\r\n        const process = this.activity.getRoot<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process>();\r\n        if (process && process.nodes) {\r\n            for (let i = 0; i < process.nodes.length; i++) {\r\n                const template = process.nodes[i].ui.template;\r\n                if (template === StepTemplates.TaskStep || template === StepTemplates.MultiStep) {\r\n                    const isMultiStep = template === StepTemplates.MultiStep;\r\n                    const step = process.nodes[i] as unknown as IActivity;\r\n                    this.addAction(actions, step, isMultiStep);\r\n                }\r\n            }\r\n        }\r\n        return actions;\r\n    }\r\n\r\n    private addAction(actions: IDropDownMenuItem[], foundActivity: IActivity, isMultiStep: boolean): void {\r\n        for (let i: number = foundActivity.children.length - 1; i >= 0; i--) {\r\n            const event = foundActivity.children[i];\r\n            const key = event.getReference();\r\n            const isSelected = this.selectedEvent === event;\r\n            let title = event.title;\r\n            const eventParent = event.getLogicalParentModel<IActivity>();\r\n\r\n            if (!isMultiStep && !isUndefinedOrNull(eventParent)) {\r\n                title = eventParent.title;\r\n            }\r\n\r\n            const eventConf = event.configuration as IClientEventConfiguration;\r\n\r\n            if ((eventConf.componentId === ComponentIdMapping.ClientEventConfiguration) ||\r\n                (this.workflowService.canHaveOutcomes(event) && eventConf.actions.length > 0)) {\r\n                actions.push({\r\n                    icon: rules.icons.outcomeTask,\r\n                    isSelected,\r\n                    key,\r\n                    title\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n","<div>\r\n    <!-- Use Task Outcome for Decisions -->\r\n    <div class=\"content-section decision-content-footer\">\r\n\r\n        <div class=\"section-content-separator-lg\"></div>\r\n\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row\">\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                                      [displayText]=\"getFromResx('Wizards', 'tab_RuleDesigner_TaskOutcomeForDecisions_Checkbox')|async\"\r\n                                      [(checked)]=\"activityConfig.isDecisionOutcomeCheckBoxChecked\"\r\n                                      (checkedChange)=\"autoAddDecisionsChanged($event)\"\r\n                                      [id]=\"checkBoxId\"\r\n                                      name=\"autoAddDecisionsChangedCheckBox\">\r\n                </k2-choose-control-v2>\r\n\r\n                <div class=\"row-left-gutter inner-description\"\r\n                     [innerHtml]=\"getFromResx('Wizards', 'tab_RuleDesigner_TaskOutcomeForDecisions_Text')|async\">\r\n                </div>\r\n            </div>\r\n            <div class=\"content-row-separator\"></div>\r\n            <div class=\"content-row\">\r\n                <div class=\"row-left-gutter\">\r\n                    <k2-drop-down [menuAlignment]=\"dropDownMenuAlignment.centered\"\r\n                                  [menuItems]=\"defaultActions\"\r\n                                  (onItemSelected)=\"activitySelected($event)\"\r\n                                  (menuOpened)=\"isDropDownActive\"\r\n                                  (menuClosed)=\"!isDropDownActive\">\r\n                        <div class=\"k2-dd-flexChild k2-dd-rowParent k2-dd-container k2-control control-background k2-dropdown-div icon-container\">\r\n\r\n                            <ng-container *ngIf=\"selectedEvent?.title || activityConfig?.outcomesEventReference; else noEventSelected\">\r\n                                <div class=\"k2-dd-icon\">\r\n                                    <span class=\"icon icon-size24 icon-set-picker ic-outcometask\"></span>\r\n                                </div>\r\n                                <div class=\"k2-dd-flexChild k2-dd-text\">{{getSelectedEventTitle()}}</div>\r\n                            </ng-container>\r\n\r\n                            <ng-template #noEventSelected>\r\n                                <div class=\"k2-dd-flexChild k2-dd-placeholder\"\r\n                                     [innerHtml]=\"getFromResx('Wizards', 'wizard_Decision_Step_DropDown_Placeholder')|async\">\r\n                                </div>\r\n                            </ng-template>\r\n\r\n                            <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                                <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                            </div>\r\n                        </div>\r\n                    </k2-drop-down>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { AfterViewInit, Component, ElementRef, HostListener, Inject, Input, OnDestroy, OnInit, SimpleChanges, TemplateRef, ViewChild } from '@angular/core';\r\nimport { IActivityConfiguration } from '../../../../../../../types/models/process/activities/configuration/i-activity-configuration';\r\nimport { IActivity } from '../../../../../../../types/models/process/activities/i-activity';\r\nimport { IOutcome } from '../../../../../../../types/models/process/outcomes/i-outcome';\r\nimport { IEvent } from '../../../../../../../types/models/process/events/i-event';\r\nimport { IListItemIconData } from '../../../../../../../types/uiComponents/list-item/i-list-item-icon-data';\r\nimport { ResourceService } from '../../../../../../services/resource/resource.service';\r\nimport { DropDownMenuAlignment } from '../../../../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from '../../../../../../shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from '../../../../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { isUndefinedOrNull, shortUid } from '../../../../../../shared/utils/general';\r\nimport { DropDownComponent } from '../../../../../common/drop-down/drop-down.component';\r\nimport { IDecisionOutcome } from './i-decision-outcome';\r\nimport { UndoRedoServiceToken } from '../../../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { EnvironmentServiceToken } from '../../../../../../services/environment/environment-service-factory';\r\nimport { IEnvironmentService } from '../../../../../../../types/services/environment/i-environment-service';\r\nimport { DecisionOptionType } from '../../../../../../shared/enums/model/workflow/process/decision-option-types';\r\nimport { RulePluginService } from '../../../../../../services/ruleplugin/rule-plugin-service';\r\nimport { RulePluginBaseComponent } from '../../../base/rule-plugin-base/rule-plugin-base.component';\r\nimport { ValidationServiceToken } from '../../../../../../services/validation/validation-service-factory';\r\nimport { ConfigPanelServiceToken } from '../../../../../../services/config-panel/config-panel-service-factory';\r\nimport { IConfigPanelService } from '../../../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { PluginServiceToken } from '../../../../../../services/plugin/plugin-service-factory';\r\nimport { IPluginService } from '../../../../../../../types/services/plugin/i-plugin-service';\r\nimport { RuleContextHandlerNames } from '../../../../../../shared/enums/rules/rule-context-handler-names';\r\nimport { ChooseControlTemplates } from '../../../../../../shared/enums/choose-control/choose-control-templates';\r\nimport { ChooseControlTypes } from '../../../../../../shared/enums/choose-control/choose-control-types';\r\nimport { IValidatedComponent } from '../../../../../../../types/validation/i-validated-component';\r\nimport { IModelArray } from '../../../../../../../types/models/base/i-model-array';\r\nimport { WorkflowService } from '../../../../../../services/workflow/workflow.service';\r\nimport { EventNotifierService } from '../../../../../../services/event-notifier/event-notifier.service';\r\nimport { DecisionActivityChangedEvent } from '../../../../../../shared/constants/events';\r\nimport { Subscription } from 'rxjs';\r\nimport { ValidationTypes } from '../../../../../../shared/enums/model/validation-types';\r\nimport { ErrorSeverity } from '../../../../../../shared/enums/model/error-severity';\r\nimport { IValidationService } from '../../../../../../../types/services/validation/ivalidation.service';\r\n\r\n@Component({\r\n    selector: 'k2-decision-step',\r\n    templateUrl: './decision-step.component.html',\r\n    styleUrls: ['./decision-step.component.less']\r\n})\r\nexport class DecisionStepComponent extends RulePluginBaseComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n    @Input() activity: IActivity;\r\n\r\n    //Left icon of outcomes list item\r\n    outcomeIconData: IListItemIconData = {\r\n        isWrappedInContentDiv: true,\r\n        isVertical: true,\r\n        customClassFlexRow: 'outcome-icon-background',\r\n        iconClass: 'icon-set-outcomes icon-size24 ic-outcomeblock'\r\n    };\r\n\r\n    //Right icon of outcomes list item\r\n    outcomeLinkIconData: IListItemIconData = null;\r\n\r\n    //Hover styles:\r\n    hoverClass = '';\r\n    isToggleBtnHover = false;\r\n\r\n    dropDownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    dropdownMenuItemTemplates: typeof DropdownMenuItemTemplates = DropdownMenuItemTemplates;\r\n    decisionOptionType: typeof DecisionOptionType = DecisionOptionType;\r\n    chooseControlTemplates: typeof ChooseControlTemplates = ChooseControlTemplates;\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n\r\n    @ViewChild('outcomeList') outcomeList: ElementRef;\r\n\r\n    selectedOutcome: IOutcome;\r\n    isInEditMode = false;\r\n    activityOutcomes: IDecisionOutcome[] = [];\r\n    decisionRuleUseDefault = shortUid();\r\n    decisionRuleUseCustom = shortUid();\r\n    outcomesValidatedComponent: IValidatedComponent;\r\n    private activityChangedSub: Subscription;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        protected rulePluginService: RulePluginService,\r\n        @Inject(ValidationServiceToken) protected validationService: IValidationService,\r\n        @Inject(ConfigPanelServiceToken) protected configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) protected undoRedoService: IUndoRedoService,\r\n        @Inject(PluginServiceToken) protected pluginService: IPluginService,\r\n        @Inject(EnvironmentServiceToken) protected environmentService: IEnvironmentService,\r\n        private workflowService: WorkflowService,\r\n        private eventNotifierService: EventNotifierService) {\r\n        super(validationService, configPanelService, rulePluginService, undoRedoService,\r\n            pluginService, environmentService, resourceService, RuleContextHandlerNames.DecisionRule);\r\n\r\n        this.activityChangedSub = eventNotifierService.subscribe(DecisionActivityChangedEvent, () => {\r\n            this.outcomesChanged();\r\n        });\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.undoRedoService.forceDisable();\r\n        this.activityConfig.isDecisionOutcomeCheckBoxChecked = !!this.activityConfig.isDecisionOutcomeCheckBoxChecked;\r\n\r\n        //Default to auto type if rule is default and all outcomes are connected\r\n        if (this.workflowService.isAllOutcomesConnected(this.activityConfig) &&\r\n            sourceCode.k2Designer.objectModel.rulePlugins.rules.DecisionRule.checkIfRuleIsDefault(this.activityConfig.outcomeRule)) {\r\n            this.activityConfig.decisionOptionType = DecisionOptionType.auto;\r\n        }\r\n\r\n        this.selectRuleType(this.activityConfig.decisionOptionType);\r\n\r\n        this.undoRedoService.resetForceDisable();\r\n\r\n        const validationData = super.createValidationData('resource_service_empty_list', ValidationTypes.Required, this.activityConfig,\r\n            'outcomes', ErrorSeverity.Error,\r\n            ['wizard_Task_Decision_DefaultOutcome', 'configpanel_tabs_tooltips_title_StepOutcomesTab']);\r\n\r\n        //Listen for change of outcomes, that will trigger validation\r\n        const propertyObjectsToListenTo = [{\r\n            object: this.activityConfig,\r\n            properties: ['outcomes']\r\n        }];\r\n        super.bindValidationToFieldAndListen('outcomesConfig', validationData, propertyObjectsToListenTo);\r\n        super.validateField('outcomesConfig');\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        //Have to assign this on afterViewInit to ensure template/viewchild exists\r\n        this.activityOutcomes = this.getActivityOutcomes();\r\n        this.outcomesValidatedComponent = this.getOutcomesValidatedComponent();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.activityChangedSub?.unsubscribe();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.activity) {\r\n            //Refresh activity outcome data (to ensure template only refreshes outcome templates on changes,\r\n            //instead of binding to functions that gets evaluated constantly)\r\n            this.activityOutcomes = this.getActivityOutcomes();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Decision activity configuration\r\n     */\r\n    get activityConfig(): IActivityConfiguration {\r\n        //Have to cast to unknown, because of 'createdFromIfDrop' property which does not exist in WFD\r\n        return this.activity.configuration as unknown as IActivityConfiguration;\r\n    }\r\n\r\n    /**\r\n     * Event configured for the decision (referenced in outcomesEventReference)\r\n     */\r\n    get selectedEvent(): IEvent {\r\n        return this.activityConfig.outcomesEventReference ?\r\n            this.workflowService.findItem<IEvent>(this.activityConfig.outcomesEventReference, this.activity) : null;\r\n    }\r\n\r\n    /**\r\n     * Populates list of actions for relinking / unlinking / autonaming outcomes\r\n     *\r\n     * @param outcome\r\n     */\r\n    getActionsForOutcome = (outcome: IOutcome): IDropDownMenuItem[] => {\r\n\r\n        const actions: IDropDownMenuItem[] = [];\r\n\r\n        if (this.selectedEvent) {\r\n            const activityConfig: IActivityConfiguration =\r\n                <IActivityConfiguration>this.selectedEvent.getLogicalParentModel<IActivity>().configuration;\r\n\r\n            //Unlinked action\r\n            actions.push({\r\n                title: this.getString('wizard_Task_Voting_Outcomes_Unlinked'),\r\n                key: 'allUnLinked',\r\n                icon: 'icon-set-indicators icon-size16 ic-nohyperlink',\r\n                isSelected: isUndefinedOrNull(outcome.linkedOutcomeReference) || outcome.linkedOutcomeReference === '',\r\n                additionalValueProperty: 'grey-icon-background',\r\n                onSelected: () => {\r\n                    this.unlink(outcome);\r\n                }\r\n            } as IDropDownMenuItem);\r\n\r\n            actions.push(DropDownComponent.separator);\r\n\r\n            //All outcomes\r\n            for (let i = 0; i < activityConfig.outcomes.length; i++) {\r\n                const key: string = activityConfig.outcomes[i].getReference();\r\n                actions.push({\r\n                    title: activityConfig.outcomes[i].inferredTitle,\r\n                    key,\r\n                    isSelected: outcome.linkedOutcomeReference === key,\r\n                    icon: 'icon-set-picker icon-size24 ic-outcomevoting',\r\n                    onSelected: () => {\r\n                        this.linkActionToOutcome(outcome, key);\r\n                    }\r\n                } as IDropDownMenuItem);\r\n\r\n                actions.push(DropDownComponent.separator);\r\n            }\r\n\r\n            //Auto name\r\n            actions.push({\r\n                title: this.getString('wizard_Task_Voting_Outcomes_Autoname'),\r\n                key: 'autoName',\r\n                innerItemComponent: this.dropdownMenuItemTemplates.OutcomeActionAutoname,\r\n                isTitleAutoUpdate: !outcome.isCustomTitle,\r\n                blockPopUpFromClosing: false,\r\n                isSelected: !outcome.isCustomTitle,\r\n                onSelected: (item: IDropDownMenuItem) => {\r\n                    outcome.isCustomTitle = !outcome.isCustomTitle;\r\n                    item.additionalValueProperty = !outcome.isCustomTitle;\r\n                    this.outcomesChanged();\r\n                }\r\n            } as IDropDownMenuItem);\r\n        }\r\n        return actions;\r\n    };\r\n\r\n    /**\r\n     * Adds new decision outcome\r\n     * */\r\n    addNewOutcome(): void {\r\n        this.undoRedoService.addUndoMarker('--outcomes tab: add outcome--');\r\n\r\n        const newOutcome = this.activityConfig.addNewOutcome(this.activityConfig.defaultOutcomeTitle, true);\r\n\r\n        if (isUndefinedOrNull(this.activityConfig.outcomeRule)) {\r\n            this.activityConfig.outcomeRule = this.rulePluginService.createDefaultRule(this.ruleContextHandlerName);\r\n        }\r\n\r\n        newOutcome.outcomeRuleReference = this.activityConfig.outcomeRule.getReference();\r\n\r\n        //Refresh outcomes array\r\n        this.activityOutcomes = this.getActivityOutcomes();\r\n\r\n        this.selectOutcomeByIndex(this.activityConfig.outcomes.length - 1);\r\n\r\n        this.addUndoEventForAutoCreate();\r\n\r\n        this.outcomesValidatedComponent = this.getOutcomesValidatedComponent();\r\n        if (this.outcomesValidatedComponent.errorInformation.length > 0) {\r\n            this.activityConfig.validateOutcomeRule(this.environmentService);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Remove decision outcome\r\n     * */\r\n    removeSelectedOutcome(): void {\r\n\r\n        if (!this.selectedOutcome) {\r\n            //no outcome selected to delete\r\n            return;\r\n        }\r\n\r\n        this.undoRedoService.addUndoMarker('--outcomes tab: delete outcome--');\r\n\r\n        this.activityConfig.removeOutcome(this.selectedOutcome);\r\n\r\n        //if there is a non-custom rule, recreate it to match changes\r\n        if (this.activityConfig.decisionOptionType === DecisionOptionType.auto) {\r\n            this.workflowService.createAutoRuleForDecisionOrSplit(this.activity, false);\r\n        }\r\n\r\n        //Re-evaluate outcome rule validation:\r\n        this.outcomesChanged();\r\n\r\n        this.selectOutcomeByIndex(this.activityConfig.outcomes.length -1);\r\n    }\r\n\r\n    outcomeSelected = (target: EventTarget, outcome: IOutcome): void => {\r\n\r\n        this.selectedOutcome = outcome;\r\n        let textInputs = $(this.outcomeList.nativeElement).find('.k2-list-item-outcome .k2-input-with-sub-text');\r\n\r\n        //Blur all inputs\r\n        textInputs.blur();\r\n        this.isInEditMode = false;\r\n\r\n        //Highlight the selected outcome text input\r\n        if ((target as HTMLElement)?.nodeName?.toUpperCase() === 'INPUT') {\r\n            const textInput = target as HTMLInputElement;\r\n            textInput.focus();\r\n            textInput.select();\r\n            this.isInEditMode = true;\r\n        }\r\n        else {\r\n            // Reason for timeout: when a new outcome is added, the element is not yet available, so focus can't be set.\r\n            setTimeout(() => {\r\n                textInputs = $(this.outcomeList.nativeElement).find('.k2-list-item-outcome .k2-input-with-sub-text');\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Builds up the decision's linked-to text for the list item (from the outcome's linked reference)\r\n     *\r\n     * @param outcome\r\n     */\r\n    getLinkedToText(outcome: IOutcome): string {\r\n        let linkedToText = '';\r\n        if (outcome.linkedOutcomeReference && outcome.linkedOutcomeReference.length > 0) {\r\n            const linkedOutcome =\r\n                outcome.getRoot<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process>()\r\n                    .findItem<IOutcome>(outcome.linkedOutcomeReference);\r\n            if (!!linkedOutcome) {\r\n                linkedToText = this.resourceService.getString('wizard_outcomes_linked_to_outcome').format(linkedOutcome.inferredTitle);\r\n            }\r\n        }\r\n        return linkedToText;\r\n    }\r\n\r\n    /**\r\n     * Outcome is not in edit mode\r\n     *\r\n     * @param evt\r\n     */\r\n    @HostListener('mouseup', ['$event'])\r\n    deSelectOutcome(evt): void {\r\n        if ((evt.target as HTMLElement).nodeName?.toUpperCase() !== 'INPUT' ||\r\n            !evt.target.closest('.k2-list-item-outcome')) {\r\n            this.isInEditMode = false;\r\n        }\r\n    }\r\n\r\n    protected loadAndPopulateRuleDesigner(): void {\r\n\r\n        this.setSavedCustomStatements(this.activityConfig, this.activityConfig.outcomeRule);\r\n\r\n        const errorList = this.rulePluginService.getCustomRuleStatementsErrors(this.ruleContextHandlerName + this.activityConfig.getId());\r\n\r\n        if (errorList?.length > 0) {\r\n            setTimeout(() => {\r\n                this.validationService.reevaluateErrors(errorList);\r\n            }, 100);\r\n        }\r\n\r\n        if (!this.activityConfig.outcomeRule?.statements || this.activityConfig.outcomeRule.statements.length === 0) {\r\n            this.activityConfig.outcomeRule = this.rulePluginService.createDefaultRule(this.ruleContextHandlerName);\r\n        }\r\n\r\n        this.rulePluginService.setDesignerContext(this.ruleContextHandlerName, this.activityConfig.outcomeRule);\r\n        this.rulePluginService.renderCanvas();\r\n    }\r\n\r\n    protected renderRuleDesigner(): void {\r\n        if (this.activityConfig.decisionOptionType === DecisionOptionType.custom) {\r\n            this.loadAndPopulateRuleDesigner();\r\n        }\r\n        else {\r\n            this.loadEmptyRuleDesigner();\r\n        }\r\n    }\r\n\r\n    ruleTypeChanged(selected: boolean, ruleType: DecisionOptionType): void {\r\n        if (selected) {\r\n            this.selectRuleType(ruleType);\r\n        } else {\r\n            //Clear validation\r\n            this.validationService.removeAllErrorsFrom(this.activityConfig);\r\n        }\r\n    }\r\n\r\n    selectRuleType(ruleType: DecisionOptionType): void {\r\n\r\n        this.undoRedoService.addUndoMarker('--outcomes controller - change outcome type rule--');\r\n        this.undoRedoService.beginUndoGroup('--outcomes controller - change outcome type rule--');\r\n\r\n        const previousRuleType = this.activityConfig.decisionOptionType;\r\n\r\n        switch (ruleType) {\r\n            case DecisionOptionType.custom:\r\n                this.activityConfig.decisionOptionType = DecisionOptionType.custom;\r\n                this.loadAndPopulateRuleDesigner();\r\n                break;\r\n            default: case DecisionOptionType.auto:\r\n                this.activityConfig.decisionOptionType = DecisionOptionType.auto;\r\n\r\n                if (previousRuleType != ruleType) {\r\n                    this.rulePluginService.setCustomRuleStatements(this.ruleContextHandlerName + this.activityConfig.getId(), this.activityConfig.outcomeRule.statements);\r\n                }\r\n\r\n                /*\r\n                We will call this method with the forceValidate param set to false, ensuring that validation does not occur within this method.\r\n                validateOutcomeRule will take care of validation after this method has been run.\r\n                */\r\n                this.workflowService.createAutoRuleForDecisionOrSplit(this.activity, false);\r\n                this.loadEmptyRuleDesigner();\r\n\r\n                break;\r\n        }\r\n\r\n        this.outcomesValidatedComponent = this.getOutcomesValidatedComponent();\r\n\r\n        this.onRuleTypeSelected();\r\n\r\n        //entire rule will be validated again here so validation should be taken care of here instead of in above method\r\n        this.validateOutcomeRule(this.activityConfig);\r\n\r\n        this.undoRedoService.finishUndoGroup();\r\n    }\r\n\r\n    protected refreshTabIndexes(): void {\r\n        //do nothing; tab indexes set in template\r\n    }\r\n\r\n    private unlink(outcome: IOutcome): void {\r\n        //get the current title before unlink (use original title if available, else the last linked inferred title)\r\n        //TFS: 737589 - be sure to test this with any changes made to this and changes in IOutcomeExtension\r\n        const currentTitle = outcome.title ? outcome.title : outcome.inferredTitle;\r\n        outcome.linkedOutcomeReference = null;\r\n        outcome.isCustomTitle = true;\r\n        if (!outcome.title)\r\n        {outcome.title = currentTitle;}\r\n\r\n        this.outcomesChanged();\r\n    }\r\n\r\n    /**\r\n     * Select action to link to outcome\r\n     *\r\n     * @param outcome\r\n     */\r\n    private linkActionToOutcome(outcome: IOutcome,  newKey: string): void {\r\n        if (outcome.linkedOutcomeReference === newKey) {\r\n            this.undoRedoService.addUndoMarker('--outcomes tab: unlink from action--');\r\n            this.unlink(outcome);\r\n        } else {\r\n            this.undoRedoService.addUndoMarker('--outcomes tab: link to action--');\r\n\r\n            outcome.linkedOutcomeReference = newKey;\r\n            outcome.isCustomTitle = false;\r\n        }\r\n\r\n        if (this.activityConfig.decisionOptionType === DecisionOptionType.auto) {\r\n            this.workflowService.createAutoRuleForDecisionOrSplit(this.activity);\r\n        }\r\n\r\n        this.outcomesChanged();\r\n    }\r\n\r\n    private getActivityOutcomes(): IDecisionOutcome[] {\r\n        const outcomes = this.activityConfig.outcomes;\r\n        outcomes.forEach((outcome: IDecisionOutcome) => {\r\n            outcome.linkedToText = this.getLinkedToText(outcome);\r\n            outcome.outcomeActionItems = this.getActionsForOutcome(outcome);\r\n            outcome.isLinked = outcome.linkedOutcomeReference?.length > 0;\r\n        });\r\n        return outcomes as IDecisionOutcome[];\r\n    }\r\n\r\n    /**\r\n     * Validates that all outcomes are connected when rule type is 'auto'\r\n     *\r\n     * @param decisionConfig\r\n     */\r\n    private validateOutcomeRule(decisionConfig: IActivityConfiguration): void {\r\n        const decisionActivityConfig = decisionConfig as unknown as sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivityConfigurationExtension;\r\n        decisionActivityConfig.validateOutcomeRule(this.environmentService as unknown as sourceCode.k2Designer.services.core.EnvironmentService);\r\n    }\r\n\r\n    /**\r\n     * Performs outcome rule validation\r\n     * Refreshes outcomes array\r\n     * */\r\n    private outcomesChanged(): void {\r\n        //Re-evaluate outcome rule validation:\r\n        this.undoRedoService.addCustomUndoEvent((isUndo): boolean => {\r\n            this.validateOutcomeRule(this.activityConfig);\r\n            return true;\r\n        }, null, '-- evaluate outcome rule --');\r\n\r\n        this.validateOutcomeRule(this.activityConfig);\r\n\r\n        //Refresh outcomes array\r\n        this.activityOutcomes = this.getActivityOutcomes();\r\n\r\n        this.outcomesValidatedComponent = this.getOutcomesValidatedComponent();\r\n\r\n        this.validationService.reevaluateErrors(this.activity.errorInformation, true);\r\n        this.validationService.reevaluateErrors(this.activity.childErrorInformation, true);\r\n    }\r\n\r\n    private selectOutcomeByIndex(index: number) {\r\n\r\n        const isIndexDefined = !isUndefinedOrNull(index);\r\n        if (this.activityConfig.outcomes.length > 0 && isIndexDefined) {\r\n            if (index < 0) {\r\n                index = 0;\r\n            }\r\n            else if (index > this.activityConfig.outcomes.length - 1) {\r\n                index = this.activityConfig.outcomes.length - 1;\r\n            }\r\n\r\n            //Select list item\r\n            const inputs = (this.outcomeList.nativeElement as HTMLElement).getElementsByClassName('k2-input-with-sub-text');\r\n            const target = inputs[index];\r\n            this.outcomeSelected(target, this.activityConfig.outcomes[index]);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds a custom event to the undo stack if the decisionOptionType is auto to recreate the auto rule on undo\r\n     */\r\n    private addUndoEventForAutoCreate(): void {\r\n        if (this.activityConfig.decisionOptionType === DecisionOptionType.auto) {\r\n            this.undoRedoService.addCustomUndoEvent(this.refreshAutoRule, '-- recreate auto outcome rule --');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Refresh the configured rule if it's an auto rule type\r\n     */\r\n    private refreshAutoRule = (): boolean => {\r\n        this.workflowService.createAutoRuleForDecisionOrSplit(this.activity, false);\r\n        this.validateOutcomeRule(this.activityConfig);\r\n        return true;\r\n    };\r\n\r\n    private getOutcomesValidatedComponent(): IValidatedComponent {\r\n        const cmp = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance();\r\n        if (this.activityConfig.decisionOptionType === DecisionOptionType.auto) {\r\n            //Create error information on object if all outcomes NOT connected\r\n            const allOutcomesConnected = this.workflowService.isAllOutcomesConnected(this.activityConfig);\r\n            if (!allOutcomesConnected) {\r\n                const errorMsg = this.resourceService.getFromResx('Wizards', 'wizard_Decision_Rule_UseTask_Error_Badge').value;\r\n                cmp.errorInformation.push({\r\n                    errorMessage: errorMsg,\r\n                    errorResourceTokens: [],\r\n                    errorSeverity: 1,\r\n                    validationType: ValidationTypes.OutcomeLink,\r\n                    propertyName: 'outcomes',\r\n                    reference: this.activityConfig.getReference()\r\n                });\r\n            }\r\n        }\r\n\r\n        return cmp;\r\n\r\n    }\r\n}\r\n","\r\n<div class=\"content-section\">\r\n    <div class=\"section-heading\">\r\n        {{getFromResx('Wizards', 'tab_RuleDesigner_Desicions_SubHeading')|async}}\r\n    </div>\r\n\r\n    <div class=\"section-content-separator-lg\"></div>\r\n\r\n    <div class=\"section-content\">\r\n        <div class=\"content-section\">\r\n            <div class=\"content-row decision-outcome-list\" #outcomeList>\r\n                <div *ngIf=\"activityConfig.outcomes?.length <= 0\"\r\n                     class=\"flexcolumn center k2-list-item-outcome k2-list-item-placeholder-container\">\r\n                    <div class=\"text-center\">\r\n                        <a href=\"javascript:void(0)\" class=\"hyperlink-control primary\" (click)=\"addNewOutcome()\" k2-tab-index>\r\n                            {{getFromResx('Wizards', 'wizard_Decision_Rule_AddDecision')|async}}\r\n                        </a>\r\n                    </div>\r\n                    <k2-badges [force-show]=\"true\" [k2Model]=\"activityConfig\"\r\n                               [toolTipText]=\"getFromResx('Wizards', 'workflow_wizard_Decision_Rule_NoDecisions_Error_Badge')|async\">\r\n                    </k2-badges>\r\n                </div>\r\n                <ng-container *ngFor=\"let outcome of activityOutcomes\">\r\n                    <!--Outcome Link Icon Template for custom list item icon-->\r\n                    <ng-template #outcomeLinkIcon let-icon>\r\n                        <k2-drop-down [menuAlignment]=\"dropDownMenuAlignment.centered\"\r\n                                      [menuItems]=\"outcome.outcomeActionItems\"\r\n                                      [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                                      [innerItemComponent]=\"dropdownMenuItemTemplates.OutcomeActionLink\">\r\n                            <div class=\"flexrow list-item-icons vertical\">\r\n                                <span class=\"icon icon-set-outcomes icon-size24 ic-hyperlink {{outcome.hoverClass || ''}}\"\r\n                                      (mouseenter)=\"outcome.hoverClass = 'hover'\"\r\n                                      (mouseleave)=\"outcome.hoverClass = ''\"\r\n                                      [ngStyle]=\"{ 'opacity': (outcome.isLinked) ? '1' : '0.3' }\">\r\n                                </span>\r\n                            </div>\r\n                        </k2-drop-down>\r\n                    </ng-template>\r\n                    <k2-list-item customClass=\"k2-list-item-outcome k2-list-item-no-repeat-space\"\r\n                                  [isEditable]=\"false\"\r\n                                  [leftIconData]=\"outcomeIconData\"\r\n                                  [shouldAllowDrop]=\"false\"\r\n                                  [shouldShowDropDown]=\"false\"\r\n                                  [listItemModel]=\"outcome\"\r\n                                  [subText]=\"outcome.linkedToText\"\r\n                                  [isSelectable]=\"true\"\r\n                                  textProperty=\"inferredTitle\"\r\n                                  (listItemSelected)=\"outcomeSelected($event, outcome)\"\r\n                                  [isSelected]=\"selectedOutcome === outcome && !isInEditMode\"\r\n                                  [validationArray]=\"activityConfig.outcomes\"\r\n                                  [rightIconData]=\"{ iconTemplate: outcomeLinkIcon }\">\r\n                    </k2-list-item>\r\n                </ng-container>\r\n            </div>\r\n\r\n            <div class=\"content-row-separator\"></div>\r\n\r\n            <div class=\"content-row destination-heading add-delete-row\">\r\n                <button class=\"btn k2-btn k2-btn-add\" (click)=\"addNewOutcome()\" k2-tab-index>\r\n                    <span class=\"icon icon-set-buttons icon-size24 ic-add_button\"></span>\r\n                </button>\r\n                <div class=\"trash bin\" [class.hide]=\"activityConfig.outcomes?.length === 0\">\r\n                    <span class=\"icon icon-set-buttons icon-size24 ic-bin_button {{hoverClass}}\"\r\n                          (mouseenter)=\"hoverClass = 'disabled'\"\r\n                          (mouseleave)=\"hoverClass = ''\"\r\n                          (click)=\"removeSelectedOutcome()\"></span>\r\n                </div>\r\n            </div>\r\n            <div class=\"content-section\">\r\n\r\n                <div class=\"section-heading\">\r\n                    {{getFromResx('Wizards', 'wizard_Decision_Rule')|async}}\r\n                </div>\r\n\r\n                <div class=\"content-row-separator-lg\"></div>\r\n                <!-- Auto Rule Radio Button -->\r\n                <div class=\"content-row has-margin\" style=\"position: relative;\">\r\n                    <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                          [displayText]=\"getFromResx('Wizards', 'wizard_Decision_Rule_Autogenerate')|async\"\r\n                                          [checked]=\"activityConfig.decisionOptionType === decisionOptionType.auto\"\r\n                                          (checkedChange)=\"ruleTypeChanged($event, decisionOptionType.auto)\"\r\n                                          [labelTemplate]=\"chooseControlTemplates.chooseControlOutcomeLabel\"\r\n                                          [id]=\"decisionRuleUseDefault\"\r\n                                          [modelValue]=\"outcomesValidatedComponent\"\r\n                                          name=\"autoRuleRadioButton\">\r\n                    </k2-choose-control-v2>\r\n                    <div class=\"row-left-gutter inner-description\">\r\n                        {{getFromResx('Wizards', 'wizard_Decision_Rule_Autogenerate_Desc')|async}}\r\n                    </div>\r\n                </div>\r\n                <div class=\"content-row-separator-lg\"></div>\r\n                <!-- Custom Rule Radio Button -->\r\n                <div class=\"content-row\">\r\n                    <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                          [displayText]=\"getFromResx('Wizards', 'wizard_Decision_Rule_Custom')|async\"\r\n                                          [checked]=\"activityConfig.decisionOptionType === decisionOptionType.custom\"\r\n                                          (checkedChange)=\"ruleTypeChanged($event, decisionOptionType.custom)\"\r\n                                          [labelTemplate]=\"chooseControlTemplates.chooseControlOutcomeLabel\"\r\n                                          [id]=\"decisionRuleUseCustom\"\r\n                                          name=\"autoRuleRadioButton\">\r\n                    </k2-choose-control-v2>\r\n\r\n                    <div class=\"row-left-gutter inner-description\" [innerHtml]=\"getFromResx('Wizards', 'wizard_Decision_Rule_Custom_Desc')|async\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"content-row-separator\"></div>\r\n                <div class=\"content-row\" [class.is-disabled]=\"activityConfig.decisionOptionType !== decisionOptionType.custom\">\r\n                    <div class=\"row-left-gutter\">\r\n                        <button class=\"panel-toggle-control\" k2-tab-index [class.selected]=\"isRulesActive()\" (click)=\"toggleRulesDesigner()\"\r\n                                (mouseenter)=\"isToggleBtnHover = true\"\r\n                                (mouseleave)=\"isToggleBtnHover = false\"\r\n                                [k2-tab-index]=\"activityConfig.decisionOptionType === decisionOptionType.custom ? 0 : -1\">\r\n\r\n                            <div class=\"control-icon\">\r\n                                <span class=\"icon icon-set-outcomes icon-size24 ic-rulestoggle\" [class.hover]=\"isToggleBtnHover\"></span>\r\n                            </div>\r\n                            <div class=\"control-content\">\r\n                                <div class=\"title\" [innerHtml]=\"getFromResx('Wizards', 'tab_RuleDesigner_Desicions_DecisionRule')|async\">\r\n                                </div>\r\n                                <div class=\"sub-title\" [innerHtml]=\"getFromResx('Wizards', 'tab_RuleDesigner_RuleButton_SubText')|async\">\r\n                                </div>\r\n                            </div>\r\n                            <span class=\"pull-right icon icon-set-toolbox icon-size16 ic-expandmenu control-toggle-icon\" [class.hover]=\"isToggleBtnHover\"></span>\r\n                        </button>\r\n                        <k2-badges [k2Model]=\"activityConfig\" *ngIf=\"activityConfig.decisionOptionType === decisionOptionType.custom\" class=\"buttonBadge\"></k2-badges>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, Input, OnInit } from '@angular/core';\r\nimport { BaseResourceComponent } from 'src/app/components/base-resource/base-resource.component';\r\nimport { ResourceService } from 'src/app/services/resource/resource.service';\r\nimport { UndoRedoServiceToken } from 'src/app/services/undo-redo/undo-redo-service-factory';\r\nimport { EndConfig } from 'src/app/shared/enums/activities/end-config';\r\nimport { ChooseControlTypes } from 'src/app/shared/enums/choose-control/choose-control-types';\r\n\r\n@Component({\r\n    selector: 'k2-end-step',\r\n    templateUrl: './end-step.component.html',\r\n    styleUrls: ['./end-step.component.less']\r\n})\r\nexport class EndStepComponent extends BaseResourceComponent implements OnInit {\r\n    @Input() activity: sourceCode.k2Designer.objectModel.workflow.process.k2Process.activities.endActivity.IEndActivity;\r\n\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n    endConfig: typeof EndConfig = EndConfig;\r\n\r\n    endConfiguration: sourceCode.k2Designer.objectModel.workflow.process.k2Process.activities.endActivity.IEndActivityConfiguration;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        @Inject(UndoRedoServiceToken) private undoRedoService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.endConfiguration = this.activity.configuration as sourceCode.k2Designer.objectModel.workflow.process.k2Process.activities.endActivity.IEndActivityConfiguration;\r\n\r\n        if (!this.endConfiguration.endConfig) {\r\n            this.endConfiguration.endConfig = EndConfig.end;\r\n        }\r\n    }\r\n\r\n    setConfiguration(configType: EndConfig, val: boolean): void {\r\n        if (!val) return;\r\n        this.undoRedoService.addUndoMarker('--change end step configuration--');\r\n        this.endConfiguration.endConfig = configType;\r\n    }\r\n}\r\n","<div class=\"wizard-container-stretch\">\r\n    <div class=\"content-section\">\r\n        <div class=\"section-heading\">\r\n            {{getFromResx(\"Wizards\", \"wizard_EndStep_SubHeader\")|async}}\r\n        </div>\r\n\r\n        <div class=\"section-content-separator\"></div>\r\n\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row\">\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                      [displayText]=\"getFromResx('Wizards', 'wizard_EndStep_Label_End')|async\"\r\n                                      (checkedChange)=\"setConfiguration(endConfig.end, $event)\"\r\n                                      [checked]=\"endConfiguration.endConfig === endConfig.end\"\r\n                                      name=\"ConfigureEndStep\">\r\n                </k2-choose-control-v2>\r\n                <div class=\"row-left-gutter inner-description\">\r\n                    {{getFromResx(\"Wizards\", \"wizard_EndStep_Label_End_Description\")|async}}\r\n                </div>\r\n            </div>\r\n            <div class=\"content-row-separator\"></div>\r\n\r\n            <div>\r\n                <div class=\"content-row\">\r\n                    <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                          [displayText]=\"getFromResx('Wizards', 'wizard_EndStep_Label_Terminate')|async\"\r\n                                          (checkedChange)=\"setConfiguration(endConfig.terminate, $event)\"\r\n                                          [checked]=\"endConfiguration.endConfig === endConfig.terminate\"\r\n                                          name=\"ConfigureEndStep\"\r\n                                          customLabelClass=\"conf-label-no-margin-bottom\">\r\n                    </k2-choose-control-v2>\r\n                    <div class=\"row-left-gutter inner-description\">\r\n                        {{getFromResx(\"Wizards\", \"wizard_EndStep_Label_Terminate_Description\")|async}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, Input, OnInit } from '@angular/core';\r\nimport { IConfigPanelTab } from '../../../../../../../types/models/config-panel/i-config-panel-tab';\r\nimport { IMergeActivityConfiguration } from '../../../../../../../types/models/process/activities/configuration/i-merge-activity-configuration';\r\nimport { IActivity } from '../../../../../../../types/models/process/activities/i-activity';\r\nimport { IConfiguredMergeStatement } from '../../../../../../../types/models/rules/i-configured-merge-statement';\r\nimport { IConfigPanelService } from '../../../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { IEnvironmentService } from '../../../../../../../types/services/environment/i-environment-service';\r\nimport { IPluginService } from '../../../../../../../types/services/plugin/i-plugin-service';\r\nimport { IValidationService } from '../../../../../../../types/services/validation/ivalidation.service';\r\nimport { IListItemIconData } from '../../../../../../../types/uiComponents/list-item/i-list-item-icon-data';\r\nimport { IValidatorItem } from '../../../../../../../types/validation/i-validator-item';\r\nimport { ConfigPanelServiceToken } from '../../../../../../services/config-panel/config-panel-service-factory';\r\nimport { EnvironmentServiceToken } from '../../../../../../services/environment/environment-service-factory';\r\nimport { PluginServiceToken } from '../../../../../../services/plugin/plugin-service-factory';\r\nimport { ProcessService } from '../../../../../../services/process/process.service';\r\nimport { ResourceService } from '../../../../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../../../../services/ruleplugin/rule-plugin-service';\r\nimport { UndoRedoServiceToken } from '../../../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../../../../services/validation/validation-service-factory';\r\nimport { MergeLogicTypes } from '../../../../../../shared/enums/activities/merge-logic-types';\r\nimport { StepTemplates } from '../../../../../../shared/enums/activities/step-template-names';\r\nimport { ChooseControlTypes } from '../../../../../../shared/enums/choose-control/choose-control-types';\r\nimport IDropDownMenuItem from '../../../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { ValidationTypes } from '../../../../../../shared/enums/model/validation-types';\r\nimport { RuleContextHandlerNames } from '../../../../../../shared/enums/rules/rule-context-handler-names';\r\nimport { RulePluginBaseComponent } from '../../../base/rule-plugin-base/rule-plugin-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-merge-step',\r\n    templateUrl: './merge-step.component.html',\r\n    styleUrls: ['./merge-step.component.less']\r\n})\r\nexport class MergeStepComponent extends RulePluginBaseComponent implements OnInit {\r\n\r\n    @Input() activity: IActivity;\r\n    /**\r\n     * NOTE/TODO: When config panel feature is worked on, the config panel tab should be set from parent component\r\n     * (not from child as is currently)\r\n     */\r\n    @Input() configPanelTab: IConfigPanelTab;\r\n\r\n    noSplitStepSelectedTemplate = '';\r\n    availableSplitStepsDropdownItems: IDropDownMenuItem[] = [];\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n    mergeLogicTypes: typeof MergeLogicTypes = MergeLogicTypes;\r\n    /**\r\n     * True if any activity steps between merge and selected split step should expire\r\n     */\r\n    canExpireActivitySteps = false;\r\n\r\n    tabIndexMergeStepLogicRadioButtons = 0;\r\n\r\n    /**\r\n     * Remember the logic selection to retain custom rules\r\n     */\r\n    private previousLogicSelection: MergeLogicTypes;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        @Inject(ValidationServiceToken) protected validationService: IValidationService,\r\n        private processService: ProcessService,\r\n        @Inject(ConfigPanelServiceToken) protected configPanelService: IConfigPanelService,\r\n        protected rulePluginService: RulePluginService,\r\n        @Inject(UndoRedoServiceToken) protected undoRedoService: IUndoRedoService,\r\n        @Inject(PluginServiceToken) protected pluginService: IPluginService,\r\n        @Inject(EnvironmentServiceToken) protected environmentService: IEnvironmentService) {\r\n\r\n        super(validationService, configPanelService, rulePluginService, undoRedoService,\r\n            pluginService, environmentService, resourceService, RuleContextHandlerNames.MergeRule);\r\n    }\r\n\r\n    isToggleBtnHover = false;\r\n\r\n    leftIconData: IListItemIconData = {\r\n        isWrappedInContentDiv: true,\r\n        customClassFlexRow: 'list-item-icons',\r\n        iconClass: 'icon icon-size24 icon-set-picker ic-splittask',\r\n        isVertical: true\r\n    };\r\n\r\n    ngOnInit(): void {\r\n        this.noSplitStepSelectedTemplate = this.getNoSplitStepSelectedTemplate();\r\n        this.availableSplitStepsDropdownItems = this.getSplitSteps();\r\n        this.previousLogicSelection = this.mergeLogicType;\r\n\r\n        if (!this.mergeActivityConfig.selectedSplitStep) {\r\n            //Create empty selected split step with default logic (wait for all)\r\n            this.mergeActivityConfig.selectedSplitStep = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                smartFields: []\r\n            });\r\n            this.mergeActivityConfig.checkWaitForAll = true;\r\n        }\r\n        //Validate (this has to be done after creating empty selected split step if not set)\r\n        this.validateSelectedSplitStep();\r\n\r\n        //Set activity configuration as tab validation object (this cannot be done in the 'super', because inputs are not accessible yet)\r\n        this.setTabValidationObject(this.activity.configuration, this.configPanelTab);\r\n    }\r\n\r\n    /**\r\n     * Set selected split step\r\n     *\r\n     * @param selectedStep\r\n     */\r\n    selectSplitItem(selectedStep: IDropDownMenuItem): void {\r\n        this.undoRedoService.addUndoMarker('--select split step--');\r\n\r\n        this.mergeActivityConfig.selectedSplitStepReference = selectedStep.key;\r\n\r\n        this.mergeActivityConfig.selectedSplitStep.smartFields.push(\r\n            sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                text: this.mergeActivityConfig.selectedSplitStepTitle,\r\n                title: this.mergeActivityConfig.selectedSplitStepTitle\r\n            })\r\n        );\r\n        this.validateSelectedSplitStep();\r\n    }\r\n\r\n    get mergeActivityConfig(): IMergeActivityConfiguration {\r\n        return this.activity.configuration as unknown as IMergeActivityConfiguration;\r\n    }\r\n\r\n    expireActivePath(shouldExpire: boolean): void {\r\n        this.mergeActivityConfig.expireActivePath = shouldExpire;\r\n    }\r\n\r\n    selectRuleType(type: MergeLogicTypes): void {\r\n        this.undoRedoService.addUndoMarker('--change merge step configuration--');\r\n\r\n        this.undoRedoService.addCustomUndoEvent((): boolean => {\r\n\r\n            this.validationService.forceAllPassValidation(this.mergeActivityConfig.outcomeRule);\r\n\r\n            return true;\r\n        }, null, '-- remove validation from merge rule --');\r\n\r\n        //Only custom logic is allowed to choose if activity steps should expire (toggle the expireActivePath setting)\r\n        this.canExpireActivitySteps = (type === MergeLogicTypes.custom);\r\n        //Only 'Wait for First' logic expires activity steps by default\r\n        this.mergeActivityConfig.expireActivePath = (type === MergeLogicTypes.waitForFirst);\r\n\r\n        // Only custom should display the rule designer\r\n        if (type !== MergeLogicTypes.custom) {\r\n            this.loadEmptyRuleDesigner();\r\n\r\n            //set the outcome rule statements to be undefined.\r\n            if (this.mergeActivityConfig.outcomeRule) {\r\n                if (this.previousLogicSelection === MergeLogicTypes.custom) {\r\n                    this.rulePluginService.setCustomRuleStatements(this.ruleContextHandlerName + this.mergeActivityConfig.getId(), this.mergeActivityConfig.outcomeRule.statements);\r\n                }\r\n                this.mergeActivityConfig.outcomeRule.statements = null;\r\n            }\r\n\r\n            this.validationService.forceAllPassValidation(this.mergeActivityConfig.outcomeRule);\r\n\r\n        }\r\n\r\n        this.onRuleTypeSelected();\r\n\r\n        this.previousLogicSelection = type;\r\n    }\r\n\r\n    get mergeLogicType(): MergeLogicTypes {\r\n        if (this.mergeActivityConfig.checkWaitForAll) {\r\n            return MergeLogicTypes.waitForAll;\r\n        }\r\n        if (this.mergeActivityConfig.checkWaitForFirst) {\r\n            return MergeLogicTypes.waitForFirst;\r\n        }\r\n        if (this.mergeActivityConfig.checkNoLogic) {\r\n            return MergeLogicTypes.noLogic;\r\n        }\r\n        if (this.mergeActivityConfig.checkCustom) {\r\n            return MergeLogicTypes.custom;\r\n        }\r\n        return MergeLogicTypes.waitForAll; //default\r\n    }\r\n\r\n    protected refreshTabIndexes(): void {\r\n        this.tabIndexMergeStepLogicRadioButtons = this.mergeActivityConfig.checkCustom === true ? 0 : -1;\r\n    }\r\n\r\n    public toggleRulesDesigner(): void {\r\n        super.toggleRulesDesigner();\r\n    }\r\n\r\n    /**\r\n     * Populate the merge rules in the rule designer\r\n     * */\r\n    protected loadAndPopulateRuleDesigner(): void {\r\n\r\n        this.setSavedCustomStatements(this.mergeActivityConfig, this.mergeActivityConfig.outcomeRule);\r\n\r\n        if (!this.mergeActivityConfig?.outcomeRule?.statements || this.mergeActivityConfig.outcomeRule.statements.length === 0) {\r\n\r\n            const defaultRule = this.rulePluginService.createDefaultRule(this.ruleContextHandlerName);\r\n            this.mergeActivityConfig.outcomeRule = defaultRule;\r\n\r\n            //then statement default to merge\r\n            const thenStatement = (defaultRule.statements[0] as IConfiguredMergeStatement).thenStatements[0];\r\n            thenStatement.isMergeActionResult = true;\r\n\r\n            //else statement default to wait\r\n            const elseStatement = (defaultRule.statements[0] as IConfiguredMergeStatement).elseStatements[0];\r\n            elseStatement.isMergeActionResult = false;\r\n        }\r\n\r\n        this.rulePluginService.setDesignerContext(this.ruleContextHandlerName, this.mergeActivityConfig.outcomeRule);\r\n        this.rulePluginService.renderCanvas();\r\n    }\r\n\r\n    /**\r\n     * Depending on the merge logic configured, display populated or empty rules designer\r\n     * */\r\n    protected renderRuleDesigner(): void {\r\n        if (this.mergeActivityConfig.checkCustom) {\r\n            this.loadAndPopulateRuleDesigner();\r\n        }\r\n        else {\r\n            this.loadEmptyRuleDesigner();\r\n        }\r\n    }\r\n\r\n    private validateSelectedSplitStep(): void {\r\n        this.validationService.evaluate([ValidationTypes.Required],\r\n            {\r\n                modelObject: this.mergeActivityConfig.selectedSplitStep,\r\n                propertyName: 'smartFields',\r\n                validationFailedMessage: 'resource_service_empty_field',\r\n                validationResourceTokens: ['resource_service_field_name_link_to', 'configpanel_tabs_tooltips_title_LogicalMergeShapeTab'],\r\n            } as IValidatorItem);\r\n        this.validationService.reevaluateErrors(this.mergeActivityConfig.errorInformation);\r\n    }\r\n\r\n    private getNoSplitStepSelectedTemplate(): string {\r\n        const message = this.getString('merge_step_empty_dropDown');\r\n        return '<div class=\\'empty-state-icon\\'><span class=\\'icon icon-set-steps icon-size24 ic-split\\'></span></div><div class=\\'empty-state-message\\'>' + message + '</div>';\r\n    }\r\n\r\n    /**\r\n     * Return list of dropdown items containing all split steps on the process\r\n     * */\r\n    private getSplitSteps(): IDropDownMenuItem[] {\r\n        const items: IDropDownMenuItem[]= [];\r\n        const proc = this.processService.root;\r\n        const splitSteps = proc.nodes.filter(n => n.ui?.template === StepTemplates.SplitStep.toString());\r\n        splitSteps.forEach((splitStep) => {\r\n            const splitStepDropdownItem: IDropDownMenuItem = {\r\n                icon: 'icon-size24 icon-set-picker ic-splittask',\r\n                title: splitStep.title,\r\n                key: splitStep.getReference(),\r\n                isSelected: this.mergeActivityConfig.selectedSplitStepReference === splitStep.getReference()\r\n            };\r\n\r\n            items.push(splitStepDropdownItem);\r\n        });\r\n\r\n        return items;\r\n    }\r\n}\r\n","<div>\r\n    <div class=\"content-section merge-content-section\">\r\n        <div class=\"section-heading\">\r\n            {{getFromResx('Wizards', 'wizard_MergeStep_SubHeader_LinkTo')|async}}\r\n        </div>\r\n\r\n        <div class=\"section-content-separator\"></div>\r\n\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row\">\r\n                <k2-list-item [listItemModel]=\"mergeActivityConfig\"\r\n                              textProperty=\"selectedSplitStepTitle\"\r\n                              [shouldShowDropDown]=\"true\"\r\n                              [emptyDropDownTemplate]=\"noSplitStepSelectedTemplate\"\r\n                              [shouldHideBrowseButton]=\"true\"\r\n                              [isSelectable]=\"true\"\r\n                              [leftIconData]=\"leftIconData\"\r\n                              [menuItems]=\"availableSplitStepsDropdownItems\"\r\n                              (dropDownItemSelected)=\"selectSplitItem($event)\"\r\n                              [watermark]=\"getFromResx('Wizards', 'wizard_Merge_Step_DropDown_Placeholder')|async\"\r\n                              k2-tab-index>\r\n                </k2-list-item>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"content-section-separator\"></div>\r\n    <div class=\"content-section\">\r\n        <div class=\"section-heading\">\r\n            {{getFromResx('Wizards', 'wizard_MergeStep_SubHeader_Logic')|async}}\r\n        </div>\r\n        <div class=\"section-content-separator\"></div>\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row\" title=\"\">\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                      [displayText]=\"getFromResx('Wizards', 'wizard_MergeStep_WaitForAll')|async\"\r\n                                      [(checked)]=\"mergeActivityConfig.checkWaitForAll\"\r\n                                      (checkedChange)=\"selectRuleType(mergeLogicTypes.waitForAll)\"\r\n                                      name=\"rbMergeLogic\">\r\n                </k2-choose-control-v2>\r\n\r\n                <div class=\"row-left-gutter inner-description\">\r\n                    {{getFromResx('Wizards', 'wizard_MergeStep_WaitForAll_Desc')|async}}\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"content-row-separator-lg\"></div>\r\n\r\n            <div class=\"content-row\" title=\"\">\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                      [displayText]=\"getFromResx('Wizards', 'wizard_MergeStep_WaitForFirst')|async\"\r\n                                      [(checked)]=\"mergeActivityConfig.checkWaitForFirst\"\r\n                                      (checkedChange)=\"selectRuleType(mergeLogicTypes.waitForFirst)\"\r\n                                      name=\"rbMergeLogic\">\r\n                </k2-choose-control-v2>\r\n                <div class=\"row-left-gutter inner-description\">\r\n                    {{getFromResx('Wizards', 'wizard_MergeStep_WaitForFirst_Decs')|async}}\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"content-row-separator-lg\"></div>\r\n\r\n            <div class=\"content-row\">\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                      [displayText]=\"getFromResx('Wizards', 'wizard_MergeStep_NoLogic')|async\"\r\n                                      [(checked)]=\"mergeActivityConfig.checkNoLogic\"\r\n                                      (checkedChange)=\"selectRuleType(mergeLogicTypes.noLogic)\"\r\n                                      name=\"rbMergeLogic\">\r\n                </k2-choose-control-v2>\r\n                <div class=\"row-left-gutter inner-description\">\r\n                    {{getFromResx('Wizards', 'wizard_MergeStep_NoLogic_Desc')|async}}\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"content-row-separator-lg\"></div>\r\n\r\n            <div class=\"content-row\">\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                      [displayText]=\"getFromResx('Wizards', 'wizard_MergeStep_CustomLogic')|async\"\r\n                                      [(checked)]=\"mergeActivityConfig.checkCustom\"\r\n                                      (checkedChange)=\"selectRuleType(mergeLogicTypes.custom)\"\r\n                                      name=\"rbMergeLogic\">\r\n                </k2-choose-control-v2>\r\n                <div class=\"row-left-gutter inner-description\">\r\n                    {{getFromResx('Wizards', 'wizard_MergeStep_CustomLogic_Desc')|async}}\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"content-row-separator-lg\"></div>\r\n\r\n            <div class=\"content-row\" [class.is-disabled]=\"!mergeActivityConfig.checkCustom\">\r\n                <div class=\"row-left-gutter\">\r\n                    <button class=\"panel-toggle-control\" [class.selected]=\"isRulesActive()\" (click)=\"toggleRulesDesigner()\" k2-tab-index=\"\"\r\n                            (mouseenter)=\"isToggleBtnHover = true\"\r\n                            (mouseleave)=\"isToggleBtnHover = false\"\r\n                            [tabindex]=\"tabIndexMergeStepLogicRadioButtons\"\r\n                            [disabled]=\"!mergeActivityConfig.checkCustom\">\r\n                        <div class=\"control-icon\">\r\n                            <span class=\"icon icon-set-outcomes icon-size24 ic-rulestoggle \" [class.hover]=\"isToggleBtnHover\"></span>\r\n                        </div>\r\n                        <div class=\"control-content\">\r\n                            <div class=\"title\">\r\n                                {{getFromResx('Wizards', 'wizard_MergeStep_MergeRules')|async}}\r\n                            </div>\r\n                            <div class=\"sub-title\">\r\n                                {{getFromResx('Wizards', 'wizard_MergeStep_MergeRules_Desc')|async}}\r\n                            </div>\r\n                        </div>\r\n                        <span class=\"pull-right icon icon-set-toolbox icon-size16 ic-expandmenu control-toggle-icon\" [class.hover]=\"isToggleBtnHover\"></span>\r\n                    </button>\r\n                    <k2-badges [k2Model]=\"mergeActivityConfig.outcomeRule\" class=\"buttonBadge\"></k2-badges>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"content-section-separator\"></div>\r\n    <div class=\"content-section\">\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row\" [class.disabled-opacity]=\"!canExpireActivitySteps\">\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                                      [displayText]=\"getFromResx('Wizards', 'wizard_MergeStep_ExpireActivePath')|async\"\r\n                                      (checkedChange)=\"expireActivePath($event)\"\r\n                                      [checked]=\"mergeActivityConfig.expireActivePath\"\r\n                                      name=\"checkboxExpireActivitySteps\"\r\n                                      [disabled]=\"!canExpireActivitySteps\">\r\n                </k2-choose-control-v2>\r\n\r\n                <div class=\"row-left-gutter inner-description\">\r\n                    {{getFromResx('Wizards', 'wizard_MergeStep_ExpireActivePath_Desc')|async}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, Input, OnDestroy, OnInit, QueryList, ViewChildren } from '@angular/core';\r\nimport { ListItemComponent } from 'src/app/components/common/list-item/list-item.component';\r\nimport { WorkflowService } from 'src/app/services/workflow/workflow.service';\r\nimport { listItemIcons } from 'src/app/shared/constants/list-item';\r\nimport { ValidationTypes } from 'src/app/shared/enums/model/validation-types';\r\nimport { DecisionOptionType } from 'src/app/shared/enums/model/workflow/process/decision-option-types';\r\nimport { isUndefinedOrNull } from 'src/app/shared/utils/general';\r\nimport { findUniqueName } from 'src/app/shared/utils/name-helper';\r\nimport { IConfigPanelTab } from 'src/types/models/config-panel/i-config-panel-tab';\r\nimport { ISplitActivityConfiguration } from 'src/types/models/process/activities/configuration/i-split-activity-configuration';\r\nimport { IActivity } from 'src/types/models/process/activities/i-activity';\r\nimport { IOutcome } from 'src/types/models/process/outcomes/i-outcome';\r\nimport { IValidationService } from 'src/types/services/validation/ivalidation.service';\r\nimport { IValidatorItem } from 'src/types/validation/i-validator-item';\r\nimport { IConfigPanelService } from '../../../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { IEnvironmentService } from '../../../../../../../types/services/environment/i-environment-service';\r\nimport { IPluginService } from '../../../../../../../types/services/plugin/i-plugin-service';\r\nimport { ConfigPanelServiceToken } from '../../../../../../services/config-panel/config-panel-service-factory';\r\nimport { EnvironmentServiceToken } from '../../../../../../services/environment/environment-service-factory';\r\nimport { PluginServiceToken } from '../../../../../../services/plugin/plugin-service-factory';\r\nimport { ResourceService } from '../../../../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../../../../services/ruleplugin/rule-plugin-service';\r\nimport { UndoRedoServiceToken } from '../../../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../../../../services/validation/validation-service-factory';\r\nimport { ChooseControlTypes } from '../../../../../../shared/enums/choose-control/choose-control-types';\r\nimport { RuleContextHandlerNames } from '../../../../../../shared/enums/rules/rule-context-handler-names';\r\nimport { RulePluginBaseComponent } from '../../../base/rule-plugin-base/rule-plugin-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-split-step',\r\n    templateUrl: './split-step.component.html',\r\n    styleUrls: ['./split-step.component.less']\r\n})\r\nexport class SplitStepComponent extends RulePluginBaseComponent implements OnInit, OnDestroy {\r\n\r\n    // Input properties\r\n    @Input() activity: IActivity;\r\n\r\n    /**\r\n     * NOTE/TODO: When config panel feature is worked on, the config panel tab should be set from parent component\r\n     * (not from child as is currently)\r\n     */\r\n    @Input() configPanelTab: IConfigPanelTab;\r\n\r\n    // Public properties\r\n    hoverClass = '';\r\n    isToggleBtnHover = false;\r\n    tabIndexSplitLogicRadioButtons: number;\r\n    outcomeIcon = listItemIcons.outcomeIcon;\r\n\r\n    get hasPortsAvailable(): boolean {\r\n        let usedPorts = 0;\r\n        const incomingPortCount = this.workflowService.countAllIncomingPorts(this.activity as unknown as IActivity);\r\n\r\n        usedPorts = incomingPortCount + this.configuration.outcomes.length;\r\n\r\n        return usedPorts < 12;\r\n    }\r\n\r\n    /**\r\n     * Property that is set to the selected outcome.\r\n     */\r\n    selectedOutcome: IOutcome;\r\n\r\n    get configuration(): ISplitActivityConfiguration {\r\n        return this.activity?.configuration as unknown as ISplitActivityConfiguration;\r\n    }\r\n\r\n    // Private properties\r\n    private forceFocus: boolean;\r\n    private isInEditMode: boolean;\r\n\r\n    // Enums\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n    decisionOptionType: typeof DecisionOptionType = DecisionOptionType;\r\n\r\n    @ViewChildren(ListItemComponent) outcomes: QueryList<ListItemComponent>;\r\n\r\n    constructor(@Inject(ValidationServiceToken) protected validationService: IValidationService,\r\n        @Inject(ConfigPanelServiceToken) protected configPanelService: IConfigPanelService,\r\n        protected rulePluginService: RulePluginService,\r\n        @Inject(UndoRedoServiceToken) protected undoRedoService: IUndoRedoService,\r\n        @Inject(PluginServiceToken) protected pluginService: IPluginService,\r\n        @Inject(EnvironmentServiceToken) protected environmentService: IEnvironmentService,\r\n        protected resourceService: ResourceService,\r\n        private workflowService: WorkflowService\r\n    ) {\r\n        super(validationService, configPanelService, rulePluginService, undoRedoService, pluginService, environmentService, resourceService, RuleContextHandlerNames.SplitRule);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        //Set activity configuration as tab validation object (this cannot be done in the 'super', because inputs are not accessible yet)\r\n        this.setTabValidationObject(this.activity.configuration, this.configPanelTab);\r\n\r\n        this.refreshTabIndexes();\r\n        this.loadPersist();\r\n        this.validatePathList();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        super.ngOnDestroy();\r\n    }\r\n\r\n    // Public Methods\r\n    shouldForceFocus(outcome: IOutcome): boolean {\r\n        return outcome === this.selectedOutcome && (this.isInEditMode === true || this.forceFocus === true);\r\n    }\r\n\r\n    isSelected(outcome: IOutcome): boolean {\r\n        return outcome === this.selectedOutcome && this.isInEditMode === false;\r\n    }\r\n\r\n    selectRuleType(ruleType: DecisionOptionType): void {\r\n        this.undoRedoService.addUndoMarker('--change split step configuration select rule type--');\r\n\r\n        //This custom callback is to ensure that the validation of the rules do not linger agter you undo and to ensure that the validation is kept up to date\r\n        //the scope can be undefined hence why an internal object is used splitActivityConfiguration\r\n        this.undoRedoService.addCustomUndoEvent((): boolean => {\r\n            this.validationService.forceAllPassValidation(this.configuration.outcomeRule);\r\n            return true;\r\n        }, null, '-- remove validation from split rule --');\r\n\r\n        const wasCustomRuleType = this.configuration.doCustomLogic;\r\n\r\n        switch (ruleType) {\r\n            case DecisionOptionType.auto:\r\n                this.configuration.doCustomLogic = false;\r\n                if (wasCustomRuleType) {\r\n                    this.rulePluginService.setCustomRuleStatements(\r\n                        this.ruleContextHandlerName + this.configuration.getId(),\r\n                        this.configuration.outcomeRule.statements\r\n                    );\r\n                }\r\n                //Recreate the auto-rule\r\n                this.workflowService.createAutoRuleForDecisionOrSplit(\r\n                    this.activity as IActivity\r\n                );\r\n\r\n                this.loadEmptyRuleDesigner();\r\n                break;\r\n            case DecisionOptionType.custom:\r\n                this.configuration.doCustomLogic = true;\r\n                this.loadAndPopulateRuleDesigner();\r\n                break;\r\n        }\r\n\r\n        this.onRuleTypeSelected();\r\n    }\r\n\r\n    /**\r\n     * Adds a new outcome path.\r\n     */\r\n    addNewPath(): void {\r\n        if (this.hasPortsAvailable) {\r\n            this.undoRedoService.addUndoMarker('--split step: add path--');\r\n\r\n            const newName = findUniqueName(this.configuration.outcomes, 'title', this.resourceService.getString('wizard_SplitStep_Path'), null, true);\r\n\r\n            const outcome: IOutcome = {\r\n                title: newName,\r\n                linkedActionReference: null,\r\n                inferredTitle: newName,\r\n                isCustomTitle: true,\r\n                linkedParent: null,\r\n                getParentActivity: () => sourceCode.k2Designer.objectModel.workflow.process.k2Process.Activity\r\n            };\r\n\r\n            this.configuration.outcomes.push(outcome as IOutcome);\r\n\r\n            this.selectOutcomeByIndex(this.configuration.outcomes.length - 1);\r\n            this.validatePathList();\r\n\r\n        } else {\r\n            console.error('No ports available for adding new path to split step.');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Remove selected outcome\r\n     */\r\n    removeSelectedOutcome(): void {\r\n\r\n        if (!this.selectedOutcome) {\r\n            //no outcome selected to delete\r\n            return;\r\n        }\r\n\r\n        this.undoRedoService.addUndoMarker('--split step: delete path--');\r\n\r\n        let index = this.configuration.outcomes.indexOf(this.selectedOutcome);\r\n\r\n        this.selectedOutcome.removeFromModelArray();\r\n\r\n        //if there is a non-custom rule, recreate it to match changes\r\n        if (this.configuration.decisionOptionType === DecisionOptionType.auto) {\r\n            this.workflowService.createAutoRuleForDecisionOrSplit(this.activity, false);\r\n        }\r\n\r\n        this.selectedOutcome = null;\r\n\r\n        if (index >= this.configuration.outcomes.length) {\r\n            index = this.configuration.outcomes.length - 1;\r\n        }\r\n\r\n        this.validatePathList();\r\n        this.selectOutcomeByIndex(index);\r\n    }\r\n\r\n    /**\r\n     * Select the outcome\r\n     *\r\n     * @param target\r\n     * @param outcome\r\n     */\r\n    outcomeSelected = (target: EventTarget, outcome: IOutcome): void => {\r\n\r\n        this.selectedOutcome = outcome;\r\n\r\n        //Highlight the selected outcome text input\r\n        if ((target as HTMLElement)?.nodeName?.toUpperCase() === 'INPUT') {\r\n            const textInput = target as HTMLInputElement;\r\n            textInput.focus();\r\n            textInput.select();\r\n            this.isInEditMode = true;\r\n        }\r\n        else {\r\n            this.outcomeSelected(this.outcomes.last.noDropInput.nativeElement, this.configuration.outcomes[this.configuration.outcomes.length - 1]);\r\n        }\r\n\r\n    };\r\n\r\n    // Protected members\r\n\r\n    protected loadAndPopulateRuleDesigner(): void {\r\n        this.setSavedCustomStatements(this.configuration, this.configuration.outcomeRule);\r\n\r\n        if (!this.activity.configuration.outcomeRule ||\r\n            !this.activity.configuration.outcomeRule.statements ||\r\n            this.activity.configuration.outcomeRule.statements.length === 0) {\r\n            this.activity.configuration.outcomeRule = this.rulePluginService.createDefaultRule(this.ruleContextHandlerName);\r\n        }\r\n\r\n        this.rulePluginService.setDesignerContext(this.ruleContextHandlerName, this.activity.configuration.outcomeRule);\r\n        this.rulePluginService.renderCanvas();\r\n\r\n    }\r\n\r\n    protected refreshTabIndexes(): void {\r\n        this.tabIndexSplitLogicRadioButtons = this.configuration.doCustomLogic === true ? 0 : -1;\r\n    }\r\n\r\n    protected renderRuleDesigner(): void {\r\n        if (this.configuration.doCustomLogic) {\r\n            this.loadAndPopulateRuleDesigner();\r\n        }\r\n        else {\r\n            this.loadEmptyRuleDesigner();\r\n        }\r\n    }\r\n\r\n    // Private methods\r\n\r\n    private selectOutcomeByIndex(index: number) {\r\n\r\n        const isIndexDefined = !isUndefinedOrNull(index);\r\n        if (this.configuration.outcomes.length > 0 && isIndexDefined) {\r\n            if (index < 0) {\r\n                index = 0;\r\n            }\r\n\r\n            //Check if list element for outcome exists (new item not always immediately visible)\r\n            const isOutcomeCreated = index < this.outcomes.length;\r\n            if (!isOutcomeCreated) {\r\n                // Reason for timeout: when a new outcome is added, the outcome list element may not be available yet, so focus can't be set.\r\n                setTimeout(() => {\r\n                    this.selectOutcomeByIndex(index);\r\n                }, 100);\r\n            } else {\r\n                //Select list item\r\n                this.outcomeSelected(this.outcomes.get(index).noDropInput.nativeElement, this.configuration.outcomes[index]);\r\n            }\r\n        }\r\n    }\r\n\r\n    private loadPersist(): void {\r\n        if (this.configuration.outcomes.length >= 1 &&\r\n            this.configuration.outcomesEventReference?.length > 0) {\r\n\r\n            const linkedAct = this.activity.getRoot<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process>()\r\n                .findItem<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IEvent>(this.configuration.outcomesEventReference)\r\n                .getLogicalParentModel<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivity>();\r\n            if (linkedAct.configuration.outcomes.length === this.configuration.outcomes.length &&\r\n                !this.configuration.doCustomLogic) {\r\n\r\n                this.configuration.outcomeRule = sourceCode.k2Designer.objectModel.workflow.configuredRules.ConfiguredDecisionRule.createInstance({\r\n                    statements: [\r\n                        this.workflowService.createTaskExpression(\r\n                            linkedAct as unknown as IActivity,\r\n                            0,\r\n                            this.activity as unknown as IActivity\r\n                        )\r\n                    ]\r\n                });\r\n            }\r\n        } else {\r\n            const baseName = this.resourceService.getString('wizard_SplitStep_Path');\r\n\r\n            while (this.configuration.outcomes.length < 2) {\r\n                const newName = findUniqueName(this.configuration.outcomes, 'title', baseName, null, true);\r\n\r\n                this.configuration.outcomes.push({\r\n                    title: newName\r\n                } as IOutcome);\r\n            }\r\n        }\r\n    }\r\n\r\n    private validatePathList(): void {\r\n        this.validationService.evaluate([ValidationTypes.Required],\r\n            <IValidatorItem>{\r\n                modelObject: this.configuration,\r\n                propertyName: 'outcomes',\r\n                validationFailedMessage: 'resource_service_empty_list',\r\n                validationResourceTokens: ['wizard_SplitStep_Path', 'configpanel_tabs_tooltips_title_LogicalSplitShapeTab'],\r\n            });\r\n    }\r\n}\r\n","<div>\r\n    <div class=\"content-section\">\r\n        <div class=\"section-heading\">\r\n            {{ getFromResx (\"Wizards\", \"wizard_SplitStep_SubHeader1\")| async }}\r\n        </div>\r\n\r\n        <div class=\"section-content-separator\"></div>\r\n\r\n        <div class=\"section-sub-heading\">\r\n            {{ getFromResx(\"Wizards\", \"wizard_SplitStep_Header_Description\")| async }}\r\n        </div>\r\n\r\n        <div class=\"section-content-separator\"></div>\r\n\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row decision-outcome-list\">\r\n                <div *ngIf=\"!configuration.outcomes || configuration.outcomes.length === 0\" \r\n                     class=\"flexcolumn center k2-list-item-outcome k2-list-item-placeholder-container\">\r\n                    <div class=\"text-center\">\r\n                        <a href=\"javascript:void(0)\" class=\"hyperlink-control primary\" (click)=\"addNewPath()\" k2TabIndex=\"\">\r\n                            {{ getFromResx(\"Wizards\", \"general_AddPath\")| async }}\r\n                        </a>\r\n                    </div>\r\n                    <k2-badges [forceShow]=\"true\" [k2Model]=\"configuration\"></k2-badges>\r\n                </div>\r\n                <k2-list-item customClass=\"k2-list-item-outcome k2-list-item-no-repeat-space\"\r\n                              *ngFor=\"let outcome of configuration.outcomes\"\r\n                              [isEditable]=\"false\"\r\n                              [listItemModel]=\"outcome\"\r\n                              [shouldAllowDrop]=\"false\"\r\n                              [shouldShowDropDown]=\"false\"\r\n                              [isSelectable]=\"true\"\r\n                              textProperty=\"inferredTitle\"\r\n                              (listItemSelected)=\"outcomeSelected($event, outcome)\"\r\n                              [leftIconData]=\"outcomeIcon\"\r\n                              [shouldForceFocus]=\"shouldForceFocus(outcome)\"\r\n                              [isSelected]=\"isSelected(outcome)\"\r\n                              [validationArray]=\"configuration.outcomes\"\r\n                              (textBoxBlurred)=\"isInEditMode = false\">\r\n                </k2-list-item>\r\n            </div>\r\n        </div>\r\n        <div class=\"section-content-separator\"></div>\r\n        <div class=\"content-row destination-heading add-delete-row\">\r\n            <button class=\"btn k2-btn k2-btn-add\" \r\n                    [class.is-disabled]=\"!hasPortsAvailable\" \r\n                    (click)=\"addNewPath()\" \r\n                    k2TabIndex>\r\n                <span class=\"icon icon-set-buttons icon-size24 ic-add_button\"></span>\r\n            </button>\r\n            <div class=\"trash bin\" [class.hide]=\"configuration.outcomes.length === 0\">\r\n                <span class=\"icon icon-set-buttons icon-size24 ic-bin_button {{hoverClass}}\" \r\n                      (mouseenter)=\"hoverClass = 'disabled'\"\r\n                      (mouseleave)=\"hoverClass = ''\" \r\n                      (click)=\"removeSelectedOutcome()\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"content-section-separator\"></div>\r\n\r\n    <div class=\"content-section\">\r\n        <div class=\"section-heading\">\r\n            {{ getFromResx(\"Wizards\", \"wizard_SplitStep_SubHeader2\")| async }}\r\n        </div>\r\n\r\n        <div class=\"section-content-separator-lg\"></div>\r\n\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row\">\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                      [displayText]=\"getFromResx('Wizards', 'wizard_SplitStep_Radio_Label1' )| async\"\r\n                                      [(checked)]=\"!configuration.doCustomLogic\"\r\n                                      (checkedChange)=\"selectRuleType(decisionOptionType.auto)\"\r\n                                      name=\"doCustomLogic\">\r\n                </k2-choose-control-v2>\r\n                <div class=\"row-left-gutter inner-description\">\r\n                    {{ getFromResx(\"Wizards\", \"wizard_SplitStep_FollowAll_Description\")| async }}\r\n                </div>\r\n            </div>\r\n            <div class=\"content-row-separator-lg\"></div>\r\n            <div class=\"content-row\">\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                      [displayText]=\"getFromResx('Wizards', 'wizard_SplitStep_Radio_Label2' )| async\"\r\n                                      [(checked)]=\"configuration.doCustomLogic\"\r\n                                      (checkedChange)=\"selectRuleType(decisionOptionType.custom)\"\r\n                                      name=\"doCustomLogic\">\r\n                </k2-choose-control-v2>\r\n                <div class=\"row-left-gutter inner-description\">\r\n                    {{ getFromResx(\"Wizards\", \"wizard_SplitStep_CustomLogic_Description\")| async }}\r\n                </div>\r\n            </div>\r\n            <div class=\"content-row-separator\"></div>\r\n            <div class=\"content-row\" [class.is-disabled]=\"!configuration.doCustomLogic\">\r\n                <div class=\"row-left-gutter\">\r\n                    <button class=\"panel-toggle-control\"\r\n                            [class.selected]=\"isRulesActive()\"\r\n                            (click)=\"toggleRulesDesigner()\"\r\n                            (mouseenter)=\"isToggleBtnHover = true\"\r\n                            (mouseleave)=\"isToggleBtnHover = false\"\r\n                            k2TabIndex\r\n                            [tabindex]=\"tabIndexSplitLogicRadioButtons\">\r\n                        <div class=\"control-icon\">\r\n                            <span class=\"icon icon-set-outcomes icon-size24 ic-rulestoggle \" [class.hover]=\"isToggleBtnHover\"></span>\r\n                        </div>\r\n                        <div class=\"control-content\">\r\n                            <div class=\"title\">\r\n                                {{ getFromResx(\"Wizards\", \"wizard_SplitStep_SplitRules\")| async }}\r\n                            </div>\r\n                            <div class=\"sub-title\">\r\n                                {{ getFromResx(\"Wizards\", \"wizard_workflow_task_destinationRule_desc\")| async }}\r\n                            </div>\r\n                        </div>\r\n                        <span class=\"pull-right icon icon-set-toolbox icon-size16 ic-expandmenu control-toggle-icon\" [class.hover]=\"isToggleBtnHover\"></span>\r\n                    </button>\r\n                    <k2-badges [k2Model]=\"configuration.outcomeRule\" class=\"buttonBadge\"></k2-badges>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, OnDestroy, OnInit} from '@angular/core';\r\nimport { debounceTime, distinctUntilChanged, Subject, Subscription } from 'rxjs';\r\nimport { BaseResourceComponent } from 'src/app/components/base-resource/base-resource.component';\r\nimport { EnvironmentServiceToken } from 'src/app/services/environment/environment-service-factory';\r\nimport { EventNotifierService } from 'src/app/services/event-notifier/event-notifier.service';\r\nimport { ProcessService } from 'src/app/services/process/process.service';\r\nimport { ResourceService } from 'src/app/services/resource/resource.service';\r\nimport { WorkflowNameChangedEvent } from 'src/app/shared/constants/events';\r\nimport { defaultDebounceTime } from 'src/app/shared/constants/general';\r\nimport { DropDownMenuAlignment } from 'src/app/shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from 'src/app/shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from 'src/app/shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from 'src/app/shared/enums/drop-down/drop-down-triangle-position';\r\nimport { ProcessPriorityTypes } from 'src/types/objectModel/workflow/process/k2Process/process-priority-types';\r\nimport { IEnvironmentService } from 'src/types/services/environment/i-environment-service';\r\nimport { IProcess } from '../../../../../../../../types/models/process/i-process';\r\n\r\n@Component({\r\n    selector: 'k2-process-settings-tab',\r\n    templateUrl: './process-settings-tab.component.html',\r\n    styleUrls: ['./process-settings-tab.component.less']\r\n})\r\nexport class ProcessSettingsTabComponent extends BaseResourceComponent implements OnInit, OnDestroy {\r\n\r\n    process: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process;\r\n    priorityItems: IDropDownMenuItem[];\r\n    selectedItem: IDropDownMenuItem;\r\n    selectedImplementor: string;\r\n    currentProcessTitle: string;\r\n    watermark: string;\r\n    isNameReadOnly = true;\r\n\r\n    dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n\r\n    dropdownMenuItemTemplate: typeof DropdownMenuItemTemplates = DropdownMenuItemTemplates;\r\n\r\n    private titleSubject = new Subject<string>();\r\n    private subscriptions = new Subscription();\r\n\r\n    constructor(@Inject(EnvironmentServiceToken) protected environmentService: IEnvironmentService,\r\n        private processService: ProcessService,\r\n        private eventNotifier: EventNotifierService,\r\n        resourceService: ResourceService) {\r\n        super(resourceService);\r\n\r\n        this.createPriorityItems();\r\n\r\n        this.subscriptions.add(\r\n            this.titleSubject.pipe(\r\n                debounceTime(defaultDebounceTime),\r\n                distinctUntilChanged()\r\n            ).subscribe((value: string) => {\r\n                this.validateTitle();\r\n            })\r\n        );\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.process = this.processService.root;\r\n\r\n        if (this.currentProcessTitle !== this.process.title){\r\n            this.currentProcessTitle = this.process.title;\r\n        }\r\n\r\n        //Configuration is not always available, as the process Json still needs to be applied to the model\r\n        if (this.process.configuration) {\r\n            if (!this.process.configuration.processPriority) {\r\n                for (const priorityItem of this.priorityItems) {\r\n                    if (priorityItem.key === ProcessPriorityTypes.high.toString()) {\r\n                        this.selectedItem = priorityItem;\r\n                        this.selectedImplementor = priorityItem.key.toString();\r\n                        priorityItem.isSelected = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                const priorityKey = this.process.configuration.processPriority.toString();\r\n\r\n                for (const priorityItem of this.priorityItems) {\r\n                    if (priorityKey === priorityItem.key.toString()) {\r\n                        this.selectedItem = priorityItem;\r\n                        this.selectedImplementor = priorityItem.key.toString();\r\n                        priorityItem.isSelected = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        this.isNameReadOnly = this.environmentService.query.namereadonly === 'true' ? true : false;\r\n\r\n        this.subscriptions.add(\r\n            this.eventNotifier.subscribe(WorkflowNameChangedEvent, (newValue: string)=>{\r\n                if (this.currentProcessTitle !== this.process.title){\r\n                    this.currentProcessTitle = this.process.title;\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    ngOnDestroy(){\r\n        this.subscriptions.unsubscribe();\r\n    }\r\n\r\n    validateTitle(): void {\r\n        if (this.process.title !== this.currentProcessTitle) {\r\n\r\n            // If it passed, the process name will be updated by the processService and should be the same.\r\n            // If it failed, originalProcessTitle from the validationcallback would be the original and current process name.\r\n            this.processService.setTitle(this.currentProcessTitle.slice()).catch((originalProcessTitle: string) => {\r\n                this.currentProcessTitle = originalProcessTitle;\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update the process descrion when the text changed\r\n     *\r\n     * @param text\r\n     */\r\n    onDescriptionChanged(text: string): void {\r\n        this.process.description = text;\r\n    }\r\n\r\n    /**\r\n     * When a dropdown item is selected\r\n     *\r\n     * @param item\r\n     */\r\n    itemSelected(item: IDropDownMenuItem): void {\r\n        this.selectedItem = item;\r\n        this.selectedImplementor = item.key;\r\n\r\n        this.process.configuration.processPriority = parseInt(item.key, 10) as ProcessPriorityTypes;\r\n    }\r\n\r\n    /**\r\n     * this function gets called on focus out of the title textbox and reset to previou value if empty value is detected\r\n     */\r\n    checkForEmptyTitle(): void {\r\n        if (!this.currentProcessTitle) {\r\n            this.currentProcessTitle = this.process.title.slice();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Populate the priority dropdown\r\n     *\r\n     * @returns Array of IDropDownMenuItems\r\n     */\r\n    createPriorityItems(): IDropDownMenuItem[] {\r\n        const priorityItems: IDropDownMenuItem[] = [];\r\n\r\n        priorityItems.push({\r\n            key: ProcessPriorityTypes.low.toString(),\r\n            icon: 'icon-set-dropdownset ic-priority_low',\r\n            isSeparator: false,\r\n            title: this.resourceService.getString('priority_low')\r\n        });\r\n\r\n        priorityItems.push({\r\n            key: ProcessPriorityTypes.med.toString(),\r\n            icon: 'icon-set-dropdownset ic-priority_medium',\r\n            isSeparator: false,\r\n            title: this.resourceService.getString('priority_med')\r\n        });\r\n\r\n        priorityItems.push({\r\n            key: ProcessPriorityTypes.high.toString(),\r\n            icon: 'icon-set-dropdownset ic-priority_high',\r\n            isSeparator: false,\r\n            title: this.resourceService.getString('priority_high')\r\n        });\r\n\r\n        this.priorityItems = priorityItems;\r\n\r\n        return priorityItems;\r\n    }\r\n\r\n    /**\r\n     * Do validation when the model changes\r\n     *\r\n     * @param val\r\n     */\r\n    ngModelChange(val: string){\r\n        this.titleSubject.next(val);\r\n    }\r\n}\r\n","<div class=\"content-section\">\r\n    <div class=\"section-content\">\r\n        <div class=\"content-row\">\r\n            <div class=\"understand-activity text-center\">\r\n                <i class=\"icon icon-set-steps icon-size64 ic-callsubworkflow\"></i>\r\n                <div class=\"title\">\r\n                    {{currentProcessTitle}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"content-section-border-separator\"></div>\r\n        <div class=\"content-row\">\r\n            {{ getFromResx(\"Wizards\", \"wizard_ProcessSettings_Page1_ProcessName\") | async }}\r\n            <div class=\"content-row-separator\"></div>\r\n            <input type=\"text\"\r\n                K2Droppable\r\n                [k2AcceptsDrop]=\"false\"\r\n                [tabIndex]\r\n                [ngClass]=\"{ 'is-disabled' : isNameReadOnly }\"\r\n                maxlength=\"128\" \r\n                class=\"k2-control control-background\"\r\n                (ngModelChange)=\"ngModelChange($event)\"\r\n                [(ngModel)]=\"currentProcessTitle\"\r\n                (blur)=\"checkForEmptyTitle()\" />\r\n        </div>\r\n        <div class=\"content-row-separator\"></div>\r\n\r\n        <div class=\"content-row\">\r\n            {{ getFromResx(\"Wizards\", \"wizard_ProcessSettings_Page1_ProcessDescription\") | async }}\r\n        </div>\r\n\r\n        <div class=\"content-row-separator\"></div>\r\n\r\n        <div class=\"content-row\">\r\n            <k2-text-area maxLength=\"128\"\r\n                rows=\"5\"\r\n                k2-tab-index\r\n                class=\"k2-control k2-text-area control-background\"\r\n                [value]=\"process.description\"\r\n                (k2Change)=\"onDescriptionChanged($event)\"\r\n                [placeholder]=\"getFromResx('Wizards', 'wizard_settings_description_placeholder') | async\">\r\n            </k2-text-area>\r\n        </div>\r\n\r\n        <div class=\"content-row-separator\"></div>\r\n\r\n        <div class=\"content-row\">\r\n            {{ getFromResx(\"Wizards\", \"wizard_Settings_priority\") | async }}\r\n            <div class=\"content-row-separator\"></div>\r\n            <k2-drop-down class=\"k2-dropdown-parent\"\r\n                [menuAlignment]=\"dropdownMenuAlignment.leftEdge\"\r\n                [menuItems]=\"priorityItems\"\r\n                (onItemSelected)=\"itemSelected($event)\">\r\n\r\n                <div class=\"k2-dd-flexChild k2-dd-rowParent k2-dd-container k2-control control-background k2-dropdown-div icon-container\">\r\n                    <div class=\"k2-dd-icon\">\r\n                        <span class=\"icon-dd icon icon-set-dropdownset icon-size16 {{selectedItem?.icon}}\"></span>\r\n                    </div>\r\n                    <div class=\"k2-dd-flexChild k2-dd-text\">{{selectedItem?.title}}</div>\r\n                    <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                        <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                    </div>\r\n                </div>\r\n            </k2-drop-down>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, ElementRef, Inject, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { SharePointEventsRegisteredStatus } from 'src/app/shared/enums/integration/share-point-events-registered-status';\r\nimport { SharePointAssetType } from 'src/app/shared/enums/integration/sharepoint-asset-type';\r\nimport { ErrorSeverity } from 'src/app/shared/enums/model/error-severity';\r\nimport { ValidationTypes } from 'src/app/shared/enums/model/validation-types';\r\nimport { PopupState } from 'src/app/shared/enums/plugin-wizard/popup-state';\r\nimport { IRemoveEventPluginContext } from 'src/types/models/event-platform/i-remove-event-plugin-context';\r\nimport { ISubscription } from 'src/types/models/event-platform/i-subscription';\r\nimport { ISmartFormItemReferences } from 'src/types/models/smart-forms/i-smart-form-item-references';\r\nimport { IContextWizardPopupConfiguration } from 'src/types/uiComponents/pluginWizards/i-context-wizard-popup-configuration';\r\nimport { IDataMapperContext } from 'src/types/uiComponents/pluginWizards/IDataMapperContext';\r\nimport { IProcessPluginDefinitionContext } from 'src/types/uiComponents/pluginWizards/IProcessPluginDefinitionContext';\r\nimport { IRemovePluginContext } from 'src/types/uiComponents/pluginWizards/IRemovePluginContext';\r\nimport { IRemoveSharePointPluginContext } from 'src/types/uiComponents/pluginWizards/IRemoveSharePointPluginContext';\r\nimport { ISharePointContext } from 'src/types/uiComponents/pluginWizards/ISharePointContext';\r\nimport { IValidatorItem } from 'src/types/validation/i-validator-item';\r\nimport { IModelArray } from '../../../../../../../types/models/base/i-model-array';\r\nimport { IConfigTabValidatedComponent } from '../../../../../../../types/models/config-panel/i-config-tab-validated-component';\r\nimport { IGlobalVariable } from '../../../../../../../types/models/i-global-variable';\r\nimport { IConfiguredPluginDefinition } from '../../../../../../../types/models/integration/i-configured-plugin-definition';\r\nimport { IPluginDefinitionMetaData } from '../../../../../../../types/models/integration/i-plugin-defintion-meta-data';\r\nimport { IWorkflowData } from '../../../../../../../types/models/integration/i-workflow-data';\r\nimport { IConfiguredRule } from '../../../../../../../types/models/rules/i-configured-rule';\r\nimport { ISmartFormItemReference } from '../../../../../../../types/models/smart-forms/i-smart-form-item-reference';\r\nimport { IConfigPanelService } from '../../../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { IPanelTabChangedCallback } from '../../../../../../../types/services/config-panel/i-panel-tab-changed-callback';\r\nimport { IEnvironmentService, IPluginStateChangedCallback } from '../../../../../../../types/services/environment/i-environment-service';\r\nimport { IObjectModelService } from '../../../../../../../types/services/object-model/i-object-model-service';\r\nimport { IPluginService } from '../../../../../../../types/services/plugin/i-plugin-service';\r\nimport { IProcessDefinitionPluginConfiguration } from '../../../../../../../types/services/process/i-process-definition-plugin-configuration';\r\nimport { IRecentsService } from '../../../../../../../types/services/recents/i-recents-service';\r\nimport { IValidationService } from '../../../../../../../types/services/validation/ivalidation.service';\r\nimport { IRemoteEventReceiver } from '../../../../../../../types/uiComponents/pluginWizards/IRemoteEventReceiver';\r\nimport { ConfigPanelServiceToken } from '../../../../../../services/config-panel/config-panel-service-factory';\r\nimport { EnvironmentServiceToken } from '../../../../../../services/environment/environment-service-factory';\r\nimport { ObjectModelServiceToken } from '../../../../../../services/object-model/object-model-service-factory';\r\nimport { PluginServiceToken } from '../../../../../../services/plugin/plugin-service-factory';\r\nimport { SmartFormsIntegrationService } from '../../../../../../services/plugins/smart-forms-integration/smart-forms-integration.service';\r\nimport { ProcessService } from '../../../../../../services/process/process.service';\r\nimport { RecentsServiceToken } from '../../../../../../services/recents/recents-service-factory';\r\nimport { ResourceService } from '../../../../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../../../../services/ruleplugin/rule-plugin-service';\r\nimport { UndoRedoServiceToken } from '../../../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../../../../services/validation/validation-service-factory';\r\nimport { WorkflowIntegrationService } from '../../../../../../services/workflow-integration/workflow-integration.service';\r\nimport { globalVariableNames, keyCodes } from '../../../../../../shared/constants/general';\r\nimport { plugins } from '../../../../../../shared/constants/plugins';\r\nimport { ChooseControlTypes } from '../../../../../../shared/enums/choose-control/choose-control-types';\r\nimport IDropDownMenuItem from '../../../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { EventPlatformState } from '../../../../../../shared/enums/event-platform/event-platform-state';\r\nimport { IntegrationType } from '../../../../../../shared/enums/integration/integration-type';\r\nimport { Positioning } from '../../../../../../shared/enums/positioning/positioning';\r\nimport { DecisionOptionTypeStartRule } from '../../../../../../shared/enums/process/decision-option-type-start-rule';\r\nimport { RuleContextHandlerNames } from '../../../../../../shared/enums/rules/rule-context-handler-names';\r\nimport { UserOptionsTipTypes } from '../../../../../../shared/enums/user-options/user-options-tip-types';\r\nimport { isUndefinedOrNull } from '../../../../../../shared/utils/general';\r\nimport { InfoPopupComponent } from '../../../../../common/info-popup/info-popup.component';\r\nimport { RulePluginBaseComponent } from '../../../base/rule-plugin-base/rule-plugin-base.component';\r\n\r\ntype IAssetItem = sourceCode.k2Designer.objectModel.core.itemProvider.IAssetItem;\r\n\r\ntype IFormProcessDefinition = sourceCode.k2Designer.objectModel.workflow.process.k2Process.processDefinitions.formsPD.IFormProcessDefinition;\r\n\r\n@Component({\r\n    selector: 'k2-start-step',\r\n    templateUrl: './start-step.component.html',\r\n    styleUrls: ['./start-step.component.less']\r\n})\r\nexport class StartStepComponent extends RulePluginBaseComponent implements OnInit, OnDestroy {\r\n\r\n    @ViewChild('popupTarget') popupTarget: ElementRef<HTMLDivElement>;\r\n\r\n    /**\r\n     * Property to determine if configured event plugins is loaded.\r\n     */\r\n    configuredPluginsLoaded: boolean;\r\n\r\n    /**\r\n     * Collection configured plugin definitions.\r\n     */\r\n    configuredPluginDefinitions: IConfiguredPluginDefinition[] = [];\r\n\r\n    /**\r\n     * Selected configured plugin definition\r\n     */\r\n    selectedConfiguredPluginDefinition: IConfiguredPluginDefinition;\r\n\r\n    /**\r\n     *  Model used for badging the event platform list items on the start steps config panel\r\n     */\r\n    eventPlatformModel: sourceCode.k2Designer.objectModel.workflow.process.k2Process.eventPlatform.IEventPlatformConfiguration;\r\n\r\n    /**\r\n     * Used for when we want to cancel what happens in the popup.\r\n     */\r\n    tempOriginalConfiguration: sourceCode.k2Designer.objectModel.workflow.process.k2Process.eventPlatform.IEventPlatformConfiguration;\r\n\r\n    /**\r\n     * Subscription index used when configuring and resetting the event platfor integration\r\n     */\r\n    subscriptionIndex: number;\r\n\r\n    /**\r\n     * The selected process definition plugin from drop down.\r\n     */\r\n    processDefinitionPluginsItems: IDropDownMenuItem[];\r\n\r\n    chooseControlTypes = ChooseControlTypes;\r\n    integrationType = IntegrationType;\r\n    positioning = Positioning;\r\n    infoPopupGotItType = UserOptionsTipTypes.HelpStartWorkflowTips;\r\n    contextHandlerName = RuleContextHandlerNames.StartRule;\r\n    sharePointAutoConfigureCompletedkey = 'SharePointAutoConfigureCompleted';\r\n    configurePluginsMethodsLoadedCount = 0;\r\n    spConfiguredPluginExists = false;\r\n    busyLoading = false;\r\n    otherStartEventExists = false;\r\n    containsSharePointIntegrationEvents = false;\r\n    isToggleBtnHover = false;\r\n\r\n    isSharepointPopupWizardActive: boolean;\r\n\r\n    isFormsPopupWizardActive: boolean;\r\n\r\n    isEventPlatformPopupWizardActive: boolean;\r\n\r\n    isDeleteFormsPopupWizardActive: boolean;\r\n\r\n    isDeleteSharePointPopupWizardActive: boolean;\r\n\r\n    isDeleteEventPlatformPopupWizardActive: boolean;\r\n\r\n    formsPopupConfig: IContextWizardPopupConfiguration;\r\n\r\n    sharepointPopupConfig: IContextWizardPopupConfiguration;\r\n\r\n    eventPlatformPopupConfig: IContextWizardPopupConfiguration;\r\n\r\n    deleteFormPopupConfig: IContextWizardPopupConfiguration;\r\n\r\n    deleteSharePointPopupConfig: IContextWizardPopupConfiguration;\r\n\r\n    deleteEventPlatformPopupConfig: IContextWizardPopupConfiguration;\r\n\r\n    sharePointPopupHeading: string;\r\n\r\n    formsPopupHeading: string;\r\n\r\n    eventPlatformHeading: string;\r\n\r\n    deleteEventPlatformHeading: string;\r\n\r\n    private tabChangedCallback: IPanelTabChangedCallback;\r\n    private activeItemChangedCallback: IPluginStateChangedCallback;\r\n\r\n    /**\r\n     * Object that will hold logic to control what outcome will be followed on workflow start.\r\n     */\r\n    get startRule(): IConfiguredRule {\r\n        return this.processService.root?.configuration?.startRule;\r\n    }\r\n\r\n    private infoPopupInternal: InfoPopupComponent;\r\n    get infoPopup(): InfoPopupComponent {\r\n        return this.infoPopupInternal;\r\n    }\r\n    @ViewChild(InfoPopupComponent) set infoPopup(val: InfoPopupComponent) {\r\n        if (val) {\r\n            this.infoPopupInternal = val;\r\n            if (this.shouldOpenPopup(this.configPanelService.currentPnl.currentItem.name)) {\r\n                setTimeout(() => {\r\n                    this.infoPopupInternal.open(this.popupTarget?.nativeElement?.getBoundingClientRect() || null);\r\n                }, 500); // give time for the animation\r\n            }\r\n        }\r\n    }\r\n\r\n    get isExpanded() {\r\n        return this.environmentService.activeStudioItem.pluginStates.configurationPanel === 'expanded';\r\n    }\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        private processService: ProcessService,\r\n        private smartFormsIntegrationService: SmartFormsIntegrationService,\r\n        private workflowIntegrationService: WorkflowIntegrationService,\r\n        protected rulePluginService: RulePluginService,\r\n        @Inject(ValidationServiceToken)\r\n            protected validationService: IValidationService,\r\n        @Inject(ConfigPanelServiceToken)\r\n            protected configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken)\r\n            protected undoRedoService: IUndoRedoService,\r\n        @Inject(PluginServiceToken)\r\n            protected pluginService: IPluginService,\r\n        @Inject(EnvironmentServiceToken)\r\n            protected environmentService: IEnvironmentService,\r\n        @Inject(ObjectModelServiceToken)\r\n            private objectModelService: IObjectModelService<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process>,\r\n        @Inject(RecentsServiceToken)\r\n            private recentsService: IRecentsService\r\n    ) {\r\n\r\n        super(validationService, configPanelService, rulePluginService, undoRedoService,\r\n            pluginService, environmentService, resourceService, RuleContextHandlerNames.StartRule);\r\n\r\n        this.sharePointPopupHeading = this.resourceService.getString('sharePoint_integration_found_references');\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.setupConditionalStartRule();\r\n        this.smartFormsIntegrationAutoConfigure();\r\n        this.configureTabValidation();\r\n        this.tabChangedCallback = this.configPanelService.listenTabChanged(() => { this.checkPopupClose(); });\r\n        this.activeItemChangedCallback = this.environmentService.listenActiveStudioItemPluginStateChanged(() => {\r\n            this.checkPopupClose();\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.configPanelService.removeTabChangedCallback(this.tabChangedCallback);\r\n        this.environmentService.removeActiveStudioItemPluginStateChangedListener(this.activeItemChangedCallback);\r\n    }\r\n\r\n    /**\r\n     * Method to set selected states for a list item in a collection.\r\n     */\r\n    selectConfiguredPluginDefinition(item: IConfiguredPluginDefinition): void {\r\n        //Set the directive property to be able to see on the UI which item is selected.\r\n        for (const configuredPlugin of this.configuredPluginDefinitions) {\r\n            if (configuredPlugin.integrationType === IntegrationType.SmartForms) {\r\n                configuredPlugin.selected = item.id === configuredPlugin.id &&\r\n                    (item.metaData as IPluginDefinitionMetaData).ruleId === (configuredPlugin.metaData as IPluginDefinitionMetaData).ruleId;\r\n            }\r\n            else if (configuredPlugin.integrationType === IntegrationType.SharePoint) {\r\n                configuredPlugin.selected = item.id === configuredPlugin.id;\r\n            }\r\n            else if (configuredPlugin.integrationType === IntegrationType.WorkflowError) {\r\n                configuredPlugin.selected = item.id === configuredPlugin.id;\r\n            }\r\n            else {\r\n                //Custom start workflow integrations framework\r\n            }\r\n        }\r\n\r\n        //Set the scope selected item for re-use like in the delete method.\r\n        this.selectedConfiguredPluginDefinition = item;\r\n    }\r\n\r\n    /**\r\n     * Handle keybord events\r\n     */\r\n    onKeyDown(e: KeyboardEvent): void {\r\n        switch (e.keyCode) {\r\n            case keyCodes.DELETE:\r\n            //Some browser go to the previous page.\r\n                e.preventDefault();\r\n                this.removeConfiguredPluginDefinition();\r\n                break;\r\n            case keyCodes.ENTER:\r\n                this.onPluginTitleChanged();\r\n                break;\r\n        }\r\n    }\r\n\r\n    onPluginTitleChanged(target: EventTarget = null): void {\r\n        //Only workflow error integration type title can be changed\r\n        if (this.selectedConfiguredPluginDefinition.integrationType === IntegrationType.WorkflowError) {\r\n            const selectedProcessSubscription = this.processService.root.configuration.eventPlatformConfiguration.subscriptions\r\n                .find(s => s.identifier === this.selectedConfiguredPluginDefinition.id);\r\n\r\n            if (selectedProcessSubscription) {\r\n                selectedProcessSubscription.description = this.selectedConfiguredPluginDefinition.title;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Remove the integration used to start the workflow based on the currently selected plugin definition\r\n     * */\r\n    removeConfiguredPluginDefinition() {\r\n        if (this.selectedConfiguredPluginDefinition) {\r\n            switch (this.selectedConfiguredPluginDefinition.integrationType) {\r\n                case IntegrationType.SmartForms:\r\n                    this.removeFormsIntegration(this.selectedConfiguredPluginDefinition);\r\n                    break;\r\n                case IntegrationType.SharePoint:\r\n                    this.removeSharePointIntegration(this.selectedConfiguredPluginDefinition);\r\n                    break;\r\n                case IntegrationType.WorkflowError:\r\n                    this.removeEventPlatformIntegration(this.selectedConfiguredPluginDefinition);\r\n                    break;\r\n                default:\r\n                    console.error(`Trying to delete a plugin definition of an unknown type: `);\r\n            }\r\n        }\r\n    }\r\n\r\n    removeEventPlatformIntegration(pluginDef: IConfiguredPluginDefinition) {\r\n\r\n        const resourceObject = {\r\n            pageTitle: this.resourceService.getString('event_platform_when_any_workflow_errors'),\r\n            deleteEventHeading: this.resourceService.getString('event_platform_delete_event_heading'),\r\n            deleteEventUpdateHeading: this.resourceService.getString('event_platform_delete_event_update_heading_workflow_error_event'),\r\n            processing: this.resourceService.getString('event_platform_delete_event_processing'),\r\n        };\r\n\r\n        this.deleteEventPlatformPopupConfig = {\r\n            context: {\r\n                selectedSubscriptionId: pluginDef.id,\r\n                resourceObject\r\n            } as unknown as IRemoveEventPluginContext,\r\n        } as IContextWizardPopupConfiguration;\r\n\r\n        this.isDeleteEventPlatformPopupWizardActive = true;\r\n    }\r\n\r\n    /**\r\n     * Remove the Forms Integration used to start the workflow by taking the user through a wizard\r\n     * */\r\n    removeFormsIntegration(pluginDef: IConfiguredPluginDefinition) {\r\n\r\n        this.deleteFormPopupConfig = {\r\n            context: {\r\n                actionId: (pluginDef.metaData as IPluginDefinitionMetaData).actionId,\r\n                itemReferences: (pluginDef.metaData as IPluginDefinitionMetaData).itemReferences,\r\n                state: (pluginDef.metaData as IPluginDefinitionMetaData).state,\r\n                formName: pluginDef.title,\r\n                formSystemName: pluginDef.name,\r\n                eventName: pluginDef.subTitle,\r\n                deleteState: true,\r\n                deleteAction: true,\r\n                deleteItemReferences: true,\r\n                checkOut: true,\r\n                success: true\r\n            } as IRemovePluginContext,\r\n        } as IContextWizardPopupConfiguration;\r\n\r\n        this.isDeleteFormsPopupWizardActive = true;\r\n    }\r\n\r\n    /**\r\n     * Remove the Sharepoint Integration used to start the workflow by taking the user through a wizard\r\n     * */\r\n    removeSharePointIntegration(pluginDef: IConfiguredPluginDefinition) {\r\n\r\n        const plugin: IWorkflowData = pluginDef.metaData;\r\n\r\n        const deleteDescription: string = this.resourceService\r\n            .getString('sharepoint_integration_error_description')\r\n            .replace('{0}', pluginDef.title)\r\n            .replace('{1}', plugin.DocumentLibrary\r\n                ? this.resourceService.getString('sharePoint_integration_found_references_library')\r\n                : this.resourceService.getString('sharePoint_integration_found_references_list')\r\n            );\r\n\r\n        const itemReferences = this.workflowIntegrationService.getSharePointItemReferencesBySmartObject(plugin.SmartObjectName);\r\n\r\n        const deleteReferencesDescription: string = this.resourceService\r\n            .getString('sharepoint_integration_delete_references_message')\r\n            .replace('{0}', itemReferences.length.toString());\r\n\r\n        const unregisterEventsDescription: string = this.resourceService\r\n            .getString('sharepoint_integration_unregister_events_message')\r\n            .replace('{0}', plugin.EventData.length.toString());\r\n\r\n        this.deleteSharePointPopupConfig = {\r\n            hideInfoButton: true,\r\n            context: {\r\n                deleteDesription: deleteDescription,\r\n                deleteItemReferences: true,\r\n                deleteReferencesMessage: deleteReferencesDescription,\r\n                errorMessage: '',\r\n                itemReferences,\r\n                unregisterEventsMessage: unregisterEventsDescription,\r\n                selectedPlugin: pluginDef,\r\n                deleteListDescription: '',\r\n                deleteListHeading: ''\r\n            } as IRemoveSharePointPluginContext\r\n        } as IContextWizardPopupConfiguration;\r\n\r\n        this.isDeleteSharePointPopupWizardActive = true;\r\n    }\r\n\r\n    /**\r\n     * Open the wizard popups to guide the user through integrations\r\n     *\r\n     * @param plugin IProcessDefinitionPluginConfiguration\r\n     */\r\n    showProcessDefinitionPlugin(plugin: IProcessDefinitionPluginConfiguration) {\r\n        switch (plugin.name) {\r\n            case 'SharePointProcessDefinition':\r\n                this.showSharepointPopups();\r\n                break;\r\n            case 'SmartFormsProcessDefinition':\r\n                this.showFormsPopups(plugin);\r\n                break;\r\n            case 'WorkflowErrorEventProcessDefinition':\r\n                this.showEventPlatformPopup(plugin as unknown as IConfiguredPluginDefinition);\r\n                break;\r\n            default:\r\n                throw new Error('Unknown process definition for integration: ' + plugin.name);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Show the hierarchy dialog and then wizard to integrate with forms\r\n     */\r\n    showFormsPopups = (plugin: IProcessDefinitionPluginConfiguration) => {\r\n        this.workflowIntegrationService\r\n            .showFormsHierarchyControl()\r\n            .then((item: IAssetItem) => {\r\n                this.showFormsWizardPopup(item, plugin);\r\n            });\r\n    };\r\n    /**\r\n     * Show the hierarchy dialog and then wizard to guide the user through forms integration\r\n     */\r\n\r\n    showSharepointPopups = () => {\r\n\r\n        this.workflowIntegrationService\r\n            .showSharePointHierarchyControl()\r\n            .then((item: IAssetItem) => {\r\n                this.showSharepointWizardPopup(item, false);\r\n            });\r\n    };\r\n\r\n    showEventPlatformPopup = (pluginDef: IConfiguredPluginDefinition, editMode: boolean = false) => {\r\n\r\n        this.tempOriginalConfiguration = null;\r\n        let subscriptionModel: ISubscription = null;\r\n        this.subscriptionIndex = 0;\r\n\r\n        if (!this.processService.root.configuration.eventPlatformConfiguration) {\r\n            subscriptionModel = this.workflowIntegrationService.createNewSubscription(0);\r\n\r\n            this.processService.root.configuration.eventPlatformConfiguration =\r\n                sourceCode.k2Designer.objectModel.workflow.process.k2Process.eventPlatform.EventPlatformConfiguration.createInstance({\r\n                    subscriptions: [subscriptionModel]\r\n                });\r\n        } else if (!editMode) {\r\n\r\n            this.tempOriginalConfiguration = this.processService.root.configuration.eventPlatformConfiguration.clone();\r\n\r\n            const subscriptions = this.processService.root.configuration.eventPlatformConfiguration.subscriptions;\r\n\r\n            // We will need to revisit this once we implement support for more events\r\n            if (subscriptions.length === 0) {\r\n                subscriptionModel = this.workflowIntegrationService.createNewSubscription(subscriptions.length);\r\n                subscriptions.push(subscriptionModel);\r\n            }\r\n            else {\r\n                subscriptionModel = subscriptions[0];\r\n                subscriptionModel.state = sourceCode.k2Designer.objectModel.workflow.process.k2Process.eventPlatform.State.Enabled;\r\n            }\r\n\r\n        } else {\r\n            const subscriptions = this.processService.root.configuration.eventPlatformConfiguration.subscriptions;\r\n\r\n            for (let i = 0; i < subscriptions.length; i++) {\r\n                if (pluginDef.id === subscriptions[i].identifier) {\r\n                    this.subscriptionIndex = i;\r\n                    subscriptionModel = this.processService\r\n                        .root\r\n                        .configuration\r\n                        .eventPlatformConfiguration\r\n                        .subscriptions[this.subscriptionIndex];\r\n\r\n                    this.tempOriginalConfiguration = this.processService.root.configuration.eventPlatformConfiguration.clone();\r\n                }\r\n            }\r\n        }\r\n\r\n        this.eventPlatformHeading = this\r\n            .resourceService\r\n            .getString('event_platform_on_any_error_heading')\r\n            .replace('{0}', this.environmentService.contextProviderService.itemInstance.title);\r\n\r\n        this.eventPlatformPopupConfig = {\r\n            hideInfoButton: true,\r\n            heading: '',\r\n            headingIcon: 'workflowerrorstartevent',\r\n            modal: true,\r\n            width: 400,\r\n            customClass: 'event-platform',\r\n            context: {\r\n                mapperTitle: this.environmentService.contextProviderService.itemInstance.title,\r\n                title: this.environmentService.contextProviderService.itemInstance.title,\r\n                icon: 'ic-callsubworkflow',\r\n                model: subscriptionModel,\r\n                hideIndicators: true,\r\n            } as unknown as IDataMapperContext,\r\n        } as IContextWizardPopupConfiguration;\r\n\r\n        this.isEventPlatformPopupWizardActive = true;\r\n    };\r\n\r\n    onEventPlatformIntegrationClosed(closureReason: PopupState) {\r\n        if (closureReason === PopupState.Cancelled) {\r\n            this.revertToPreviousErrorEventConfiguration();\r\n        }\r\n\r\n        this.onWizardPopupClosed();\r\n    }\r\n\r\n    /**\r\n     * Show the wizard to integrate with forms\r\n     *\r\n     * @param item IAssetItem | IConfiguredPluginDefinition\r\n     * @param plugin IProcessDefinitionPluginConfiguration\r\n     */\r\n    showFormsWizardPopup = (item: IAssetItem | IConfiguredPluginDefinition, plugin?: IProcessDefinitionPluginConfiguration): void => {\r\n\r\n        let newProcessDefinition;\r\n        //Create a new instance of the plugin and add it to the process definition.\r\n        if (plugin?.cls.length > 0) {\r\n            const lookup = sourceCode.k2Designer.objectModel.core.model.getImplementorExporter(plugin.cls);\r\n\r\n            newProcessDefinition = sourceCode.k2Designer.objectModel.core.model.ModelObject.createFrom(\r\n                lookup.implementor,\r\n                lookup.exporter,\r\n                null,\r\n                null\r\n            );\r\n        }\r\n\r\n        this.formsPopupHeading = this.resourceService.getString('smartforms_integration_create_smartfield');\r\n\r\n        this.formsPopupConfig = {\r\n            context: {\r\n                form: {\r\n                    title: item.title,\r\n                    key: (item as IConfiguredPluginDefinition).id ?? (item as IAssetItem).key,\r\n                    name: item.name\r\n                } as IAssetItem,\r\n                formItemReferences: {\r\n                    collection: []\r\n                } as ISmartFormItemReferences,\r\n                existingItemReferences: {\r\n                    collection: []\r\n                } as ISmartFormItemReferences,\r\n                newItemReferences: {\r\n                    collection: []\r\n                } as ISmartFormItemReferences,\r\n                processDefinition: newProcessDefinition,\r\n                cotainMatchingReferences: false,\r\n                createItemReferencesHeading: this.resourceService.getString('smartforms_integration_found_references'),\r\n                unmappedFieldsHeading: '',\r\n                configureFormRuleDescription: '',\r\n                makeStateDefault: true,\r\n                foundWorkflowActionOnForm: false,\r\n                ruleConfigureLaterDescription: '',\r\n                ruleConfigureNowDescription: '',\r\n                folio: '',\r\n                newStateName: '',\r\n                states: [],\r\n                createNewState: true,\r\n                isUserForm: false,\r\n                updatedFormSuccesfully: true,\r\n                formUpdateDone: false,\r\n                pageIndex: 0,\r\n                checkedOutBy: '',\r\n                checkOutForm: false,\r\n                addItemReferences: false,\r\n                addActionToRule: false,\r\n                showSuccessSummary: true,\r\n                editMode: !!item?.metaData?.actionId,\r\n                ruleId: item?.metaData?.ruleId,\r\n                fqn: this.environmentService.workflowFullname,\r\n            } as IProcessPluginDefinitionContext\r\n        } as IContextWizardPopupConfiguration;\r\n\r\n        this.isFormsPopupWizardActive = true;\r\n    };\r\n\r\n    /**\r\n     * Show the wizard to integrate with sharepoint\r\n     *\r\n     * @param item\r\n     * @param isExistingIntegration\r\n     * @returns\r\n     */\r\n    showSharepointWizardPopup = (item: IAssetItem | IConfiguredPluginDefinition, isExistingIntegration: boolean): void => {\r\n\r\n        if (!item) {\r\n            // Probably got here by closing the hierarchy dialog with the X\r\n            return;\r\n        }\r\n\r\n        let metaData: IWorkflowData;\r\n        let itemParts = [];\r\n\r\n        if (typeof item.metaData === 'string') {\r\n            // assetType: itemParts[0],\r\n            // serviceInstance: itemParts[1],\r\n            // relativeUrl: itemParts[2]\r\n            itemParts = item?.metaData?.split('|');\r\n\r\n            if (!itemParts || itemParts.length < 3) {\r\n                throw new Error('Sharepoint response unexpected');\r\n            }\r\n        } else { // assume object\r\n            metaData = item.metaData;\r\n        }\r\n\r\n        // First check the metaData object (as in the case of an edit), then\r\n        // fall back to the item and metaData as array (AssetItem returned from server for new integration)\r\n        // But why are the metaData properties capital letters? It could have been nice and easy destructoring, but no....\r\n        this.sharepointPopupConfig = {\r\n            context: {\r\n                sourceItemReferences: [],\r\n                existingItemReferences: [],\r\n                newItemReferences: [],\r\n                isDocLib: metaData?.DocumentLibrary ?? itemParts[0] === SharePointAssetType.library.toString(),\r\n                itemName: metaData?.ListName ?? item.title,\r\n                listId: metaData?.ListId ?? (item as IAssetItem).key,\r\n                serviceInstance: metaData?.ServiceInstance ?? itemParts[1],\r\n                subSiteRelativeUrl: metaData?.RelativeUrl ?? itemParts[2],\r\n                status: SharePointEventsRegisteredStatus.inProgress,\r\n                existingIntegration: isExistingIntegration,\r\n                savedEvents: metaData?.EventData ?? null,\r\n                settingId: metaData?.SettingId ?? null,\r\n                siteUrl: metaData?.SiteURL ?? null,\r\n                smartObjectName: metaData?.SmartObjectName ?? null\r\n            } as ISharePointContext,\r\n            validationModel: {}\r\n        } as IContextWizardPopupConfiguration;\r\n\r\n        this.isSharepointPopupWizardActive = true;\r\n    };\r\n\r\n    onWizardPopupClosed = (): void => {\r\n        this.loadSavedPlugins();\r\n    };\r\n\r\n    /**\r\n     * Method that gets called when the user select a plugin from the add definition plugin drop down.\r\n     */\r\n    processDefinitionPluginSelected(item: IDropDownMenuItem): void {\r\n\r\n        switch (item.metaData.name) {\r\n            case 'SharePointProcessDefinition':\r\n                this.showSharepointPopups();\r\n                break;\r\n            case 'SmartFormsProcessDefinition':\r\n                this.showFormsPopups(item.metaData);\r\n                break;\r\n            case 'WorkflowErrorEventProcessDefinition':\r\n                this.showEventPlatformPopup(item.metaData);\r\n                break;\r\n            default:\r\n                throw new Error('Unknown process definition for integration: ' + item.metaData.name);\r\n                break;\r\n        }\r\n\r\n        //Deselect all selected items\r\n        for (const processDefinitionPlugin of this.processDefinitionPluginsItems) {\r\n            processDefinitionPlugin.isSelected = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This method handles the logic of switching between the always start and conditional start options for the conditional start rule,\r\n     * This also closes the rules designer when the conditional rule is removed,\r\n     * This also creates an in-memory copy of the statements to re-add it once the custom rule is reselected.\r\n     */\r\n    selectRuleType(ruleType: number): void {\r\n        this.undoRedoService.addUndoMarker('--workflow integration: change start activity configuration--');\r\n\r\n        switch (ruleType) {\r\n            case DecisionOptionTypeStartRule.alwaysStart:\r\n                this.processService.root.configuration.decisionOptionTypeStartRule = DecisionOptionTypeStartRule.alwaysStart;\r\n                this.pluginService.toggleCollapsed(plugins.panels.rulesDesigner);\r\n\r\n                this.rulePluginService.setCustomRuleStatements(\r\n                    this.contextHandlerName,\r\n                    this.processService.root.configuration.startRule.statements\r\n                );\r\n\r\n                if (this.processService.root.configuration.startRule.statements) {\r\n                    for (const statement of this.processService.root.configuration.startRule.statements) {\r\n                        this.validationService.forceAllPassValidation(statement);\r\n                    }\r\n                }\r\n\r\n                this.processService.root.configuration.startRule.statements = null;\r\n\r\n                this.validationService.forceAllPassValidation(this.processService.root.configuration.startRule);\r\n\r\n                break;\r\n            case DecisionOptionTypeStartRule.conditionalStart:\r\n                this.processService.root.configuration.decisionOptionTypeStartRule = DecisionOptionTypeStartRule.conditionalStart;\r\n                break;\r\n        };\r\n        //Reconfigure tab validation for the startRule\r\n        this.configureTabValidation();\r\n\r\n        this.onRuleTypeSelected();\r\n    };\r\n\r\n    /**\r\n     * This Method should determine if the process has a Conditional Start Rule.  It sets the Radio buttons' states.\r\n     * The decisionOptionTypeStartRule needs to be replaced by the CSR object to determine its state.\r\n     */\r\n    hasConditionalStartRule(): boolean {\r\n        return this.processService.root?.configuration?.decisionOptionTypeStartRule ===\r\n            DecisionOptionTypeStartRule.conditionalStart;\r\n    }\r\n\r\n    editPlugin(selectedPluginDefinition: IConfiguredPluginDefinition) {\r\n\r\n        const { integrationType, name } = { ...selectedPluginDefinition };\r\n\r\n        // No need to loop through this.processService.definitionPlugins anymore, because we already know the pages\r\n\r\n        switch (integrationType) {\r\n            case IntegrationType.SmartForms:\r\n            // The old code first checked if we already had an integration and then if could integrate.\r\n            // This is an integration only path, so that check shouldn't be necessary.\r\n                this.showFormsWizardPopup(selectedPluginDefinition);\r\n                break;\r\n            case IntegrationType.SharePoint:\r\n                this.showSharepointWizardPopup(selectedPluginDefinition, true);\r\n                break;\r\n            case IntegrationType.WorkflowError:\r\n                this.showEventPlatformPopup(selectedPluginDefinition, true);\r\n                break;\r\n            default:\r\n                throw new Error(`Attempting to edit unknown plugin with integrationType ${integrationType} and name ${name}`);\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This Method should provide the CSR object, its configuration and the localized title for the Rules designer.\r\n     */\r\n    protected loadAndPopulateRuleDesigner() {\r\n        this.setSavedCustomStatementsById(this.contextHandlerName, this.processService.root.configuration.startRule);\r\n\r\n        if (!this.processService.root.configuration.startRule?.statements?.length) {\r\n            this.processService.root.configuration.startRule = this.rulePluginService.createDefaultRule(this.contextHandlerName);\r\n            //Reconfigure tab validation for the startRule\r\n            this.configureTabValidation();\r\n        }\r\n\r\n        this.rulePluginService.setDesignerContext(this.contextHandlerName, this.processService.root.configuration.startRule);\r\n        this.rulePluginService.renderCanvas();\r\n    }\r\n\r\n    protected refreshTabIndexes(): void { };\r\n\r\n    /**\r\n     * Depending on the rule selected, will either clear the rules designer, or populate the rules designer with default values\r\n     */\r\n    protected renderRuleDesigner(): void {\r\n        if (this.processService.root.configuration.decisionOptionTypeStartRule ===\r\n            DecisionOptionTypeStartRule.alwaysStart) {\r\n            this.loadEmptyRuleDesigner();\r\n        } else if (this.processService.root.configuration.decisionOptionTypeStartRule ===\r\n            DecisionOptionTypeStartRule.conditionalStart) {\r\n            this.loadAndPopulateRuleDesigner();\r\n        }\r\n    };\r\n\r\n    private revertToPreviousErrorEventConfiguration() {\r\n\r\n        this.processService.root.configuration.eventPlatformConfiguration = this.tempOriginalConfiguration;\r\n        this.eventPlatformModel = this.processService.root.configuration.eventPlatformConfiguration;\r\n\r\n        if (this.eventPlatformModel) {\r\n            const fields = this.eventPlatformModel.subscriptions[this.subscriptionIndex].mapping.data.fields;\r\n\r\n            for (const field of fields) {\r\n                const validatorItem = {\r\n                    modelObject: field,\r\n                    propertyName: 'dataFieldReference',\r\n                    validationFailedMessage: 'resource_service_removed_consumed_reference',\r\n                    validationResourceTokens: [],\r\n                    errorSeverity: ErrorSeverity.Error\r\n                } as IValidatorItem;\r\n\r\n                this.validationService.evaluate([ValidationTypes.Reference], validatorItem, true);\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkPopupClose(): void {\r\n        if (this.busyLoading) return;\r\n\r\n        this.busyLoading = true;\r\n\r\n        if (!this.shouldOpenPopup(this.configPanelService.currentPnl.currentItem.name)) {\r\n            this.infoPopup?.close();\r\n            this.busyLoading = false;\r\n        }\r\n    }\r\n\r\n    private setupConditionalStartRule(): void {\r\n        if (this.objectModelService.isInitialized() !== true) {\r\n            const modelCreatedCallback = {\r\n                subscriberId: 'StartRule_WaitForReady',\r\n                notify: (data) => {\r\n                    this.objectModelService.unRegisterEventListener(\r\n                        sourceCode.k2Designer.services.studioItem.ObjectModelService.ReadyForChangesEvent,\r\n                        modelCreatedCallback.subscriberId\r\n                    );\r\n\r\n                    this.setupConditionalStartRule();\r\n                }\r\n            };\r\n\r\n            this.objectModelService.registerEventListener(\r\n                sourceCode.k2Designer.services.studioItem.ObjectModelService.ReadyForChangesEvent,\r\n                modelCreatedCallback\r\n            );\r\n\r\n            return;\r\n        }\r\n\r\n        if (this.processService.root.configuration.outcomes && this.processService.root.configuration.outcomes.length === 0) {\r\n            const startOutcome = sourceCode.k2Designer.objectModel.workflow.process.k2Process.StartOutcome.createInstance({\r\n                title: this.resourceService.getString('smartforms_integration_start_rule_start_outcome'),\r\n                originalTitle: this.resourceService.getString('smartforms_integration_start_rule_start_outcome'),\r\n                startWorkflow: true\r\n            });\r\n\r\n            const dontStartOutcome = sourceCode.k2Designer.objectModel.workflow.process.k2Process.StartOutcome.createInstance({\r\n                title: this.resourceService.getString('smartforms_integration_start_rule_dont_start_outcome'),\r\n                originalTitle: this.resourceService.getString('smartforms_integration_start_rule_dont_start_outcome'),\r\n                startWorkflow: false\r\n            });\r\n\r\n            this.processService.root.configuration.outcomes.push(startOutcome);\r\n            this.processService.root.configuration.outcomes.push(dontStartOutcome);\r\n        }\r\n\r\n        //Check if the start rule exists and create a default start rule if not\r\n        if (!this.processService.root.configuration.startRule?.statements?.length) {\r\n            this.processService.root.configuration.startRule = this.rulePluginService.createDefaultRule(this.contextHandlerName);\r\n            this.processService.root.configuration.decisionOptionTypeStartRule = DecisionOptionTypeStartRule.alwaysStart;\r\n            //Reconfigure tab validation for the startRule\r\n            this.configureTabValidation();\r\n        }\r\n\r\n        this.renderRuleDesigner();\r\n    }\r\n\r\n    private smartFormsIntegrationAutoConfigure(): void {\r\n\r\n        //Special case because this is a step that can render immediately when making a new WF\r\n        //In release mode the JS files are combined and result in many fewer requests.\r\n        //It's fairly easy to end up with a case where this code gets executed and the async call finishes before\r\n        //the object model service is initialized and listening to events, because of this\r\n        //the configuration and references created here may never get sent to the server\r\n        //we MUST wait until the object model service is ready to send instructions to the server before this initialization code happens\r\n\r\n        //THIS IS A WORKAROUND: the real solution is to eliminate/mitigate or to queue instructions during\r\n        //the gap that can happen between ProcessService.createInitialModel end and ObjectModelService.setupInstructionsProcessor begin\r\n        //During this gap any instructions do not get sent to the server and are lost forever.\r\n        if (this.objectModelService.isInitialized() !== true) {\r\n            const modelCreatedCallback = {\r\n                subscriberId: 'Integration_WaitForReady',\r\n                notify: (data) => {\r\n                    this.objectModelService.unRegisterEventListener(\r\n                        sourceCode.k2Designer.services.studioItem.ObjectModelService.ReadyForChangesEvent,\r\n                        modelCreatedCallback.subscriberId);\r\n                    this.smartFormsIntegrationAutoConfigure();\r\n                }\r\n            };\r\n\r\n            this.objectModelService.registerEventListener(\r\n                sourceCode.k2Designer.services.studioItem.ObjectModelService.ReadyForChangesEvent,\r\n                modelCreatedCallback\r\n            );\r\n\r\n            return;\r\n        }\r\n\r\n        if (this.environmentService.query.objectid) {\r\n            this.workflowIntegrationService.GetFormCategoryAndName()\r\n                .then(result => this.getFormInformationLoaded(result))\r\n                .catch(error => this.sharePointIntegrationAutoConfigure());\r\n        }\r\n        else {\r\n            //No auto configure for SmartForms, check if it must autoconfigure for SharePoint.\r\n            this.sharePointIntegrationAutoConfigure();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Callback from rest call.  This will sync the item references and populate the model.\r\n     */\r\n    private getFormInformationLoaded(result: sourceCode.k2Designer.objectModel.smartForms.IFormContent): void {\r\n        const formContent: sourceCode.k2Designer.objectModel.smartForms.IFormContent = result;\r\n        //Check recent service if service exists\r\n        if (!this.recentsService.hasContext('form')) {\r\n            this.recentsService.registerContext('form', 25);\r\n        }\r\n\r\n        const form: IAssetItem = {\r\n            name: formContent.systemName,\r\n            key: formContent.id,\r\n            title: formContent.displayName,\r\n            spriteClass: 'icon icon-set-steps icon-size16 ic-form',\r\n            metaData: formContent.id\r\n        };\r\n        this.recentsService.addItem('form', form, 'key');\r\n\r\n        //Automatically add integration on new processes.\r\n        const processId = this.environmentService.query.guid || this.environmentService.query.id;\r\n        if (processId == null) {\r\n\r\n            const definition = sourceCode.k2Designer.objectModel.workflow.process.k2Process.processDefinitions.formsPD.FormProcessDefinition.createInstance();\r\n\r\n            const pluginIntentAlreadyExist = this.smartFormsIntegrationService\r\n                .setupFormDefinitionsOnPluginIntend(form.name, form.title, definition);\r\n\r\n            if (!pluginIntentAlreadyExist) {\r\n                const pluginHelper = new sourceCode.k2Designer.uiComponents.configPanel.plugins.pluginWizards.Helper(\r\n                    this.environmentService as any\r\n                );\r\n\r\n                pluginHelper.createItemReferences(formContent.itemReferences,\r\n                    true,\r\n                    sourceCode.k2Designer.uiComponents.configPanel.plugins.pluginWizards.StartMode.smartForms\r\n                );\r\n            }\r\n        }\r\n        this.sharePointIntegrationAutoConfigure();\r\n    }\r\n\r\n    /**\r\n     * When it is a new process and the required properties is in querystring, auto configure the item references and\r\n     * start event on the process.\r\n     */\r\n    private sharePointIntegrationAutoConfigure(): void {\r\n        //Automatically add integration on new processes.\r\n        const processId = this.environmentService.query.guid || this.environmentService.query.id;\r\n        if (!processId && !this.environmentService.query.objectid) {\r\n            if (!this.environmentService.referrer.smosysname &&\r\n                this.environmentService.referrer.settingid &&\r\n                this.environmentService.isNewWorkflow &&\r\n                !this.environmentService.getGlobalAttributeValue(this.sharePointAutoConfigureCompletedkey)) {\r\n                this.workflowIntegrationService.GetSharepointListSmartObjectName().then((smartObjectSystemName: string) => {\r\n                    this.workflowIntegrationService.integrateWithSharePoint(smartObjectSystemName)\r\n                        .then(result => this.autoConfigureSharePointEventsCompleted(result))\r\n                        .catch(error => this.loadSavedPlugins());\r\n                });\r\n            } else if (this.environmentService.referrer.smosysname &&\r\n                this.environmentService.isNewWorkflow &&\r\n                !this.environmentService.getGlobalAttributeValue(this.sharePointAutoConfigureCompletedkey)) {\r\n                this.workflowIntegrationService.integrateWithSharePoint(this.environmentService.referrer.smosysname)\r\n                    .then(result => this.autoConfigureSharePointEventsCompleted(result))\r\n                    .catch(error => this.loadSavedPlugins());\r\n            }\r\n            else {\r\n                this.loadSavedPlugins();\r\n            }\r\n        }\r\n        else {\r\n            this.loadSavedPlugins();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set the collection of configured process definitions on the process.\r\n     */\r\n    private loadSavedPlugins = (shouldFireRecursionValidation: boolean = false): void => {\r\n        if (this.processService.root.configuration?.processDefinitions) {\r\n            this.configuredPluginDefinitions = [];\r\n            this.configurePluginsMethodsLoadedCount = 0;\r\n            this.configuredPluginsLoaded = false;\r\n\r\n            this.integrateWithSmartForms();\r\n\r\n            this.workflowIntegrationService.GetSharepointIntegration()\r\n                .then((result) => this.getEventsForWorkflowSettingCompleted(shouldFireRecursionValidation, result))\r\n                .catch((err) => {\r\n                    if (err) { console.error(err); }\r\n                    const firstLoad: boolean = isUndefinedOrNull(this.environmentService.\r\n                        getGlobalAttributeValue(globalVariableNames.sharepointIntegratonWorkflowData));\r\n\r\n                    //This is for delete/adding an integration.\r\n                    if (shouldFireRecursionValidation || firstLoad) {\r\n                        sourceCode.k2Designer.objectModel.validationService.plugins.WorkflowRecursionValidator.validateAll(\r\n                            this.environmentService as any\r\n                        );\r\n                    }\r\n\r\n                    this.populateProcessDefinitionPlugins();\r\n\r\n                    this.configurePluginsMethodsLoadedCount += 1;\r\n                    if (this.configurePluginsMethodsLoadedCount === 2) {\r\n                        this.configuredPluginsLoaded = true;\r\n                        this.updateStartWorkflowIntegrationStatus();\r\n                        this.integrationsChanged();\r\n                    }\r\n                });\r\n            this.checkOtherStartEvents();\r\n        }\r\n        else {\r\n            setTimeout(this.loadSavedPlugins.bind(this), 100);\r\n        }\r\n    };\r\n\r\n    private checkOtherStartEvents(): void {\r\n        if (this.processService?.root?.configuration?.eventPlatformConfiguration) {\r\n            const subscriptions = this.processService.root.configuration.eventPlatformConfiguration.subscriptions;\r\n            for (let i = 0; i < subscriptions.length; i++) {\r\n                if (subscriptions[i].state === EventPlatformState.Enabled as any) {\r\n                    this.configuredPluginDefinitions.push({\r\n                        id: this.processService.root.configuration.eventPlatformConfiguration.subscriptions[i].identifier,\r\n                        name: this.processService.root.configuration.eventPlatformConfiguration.subscriptions[i].description,\r\n                        title: this.processService.root.configuration.eventPlatformConfiguration.subscriptions[i].description,\r\n                        subTitle: '',\r\n                        leftIconClass: 'workflowerrorstartevent',\r\n                        integrationType: IntegrationType.WorkflowError\r\n                    } as IConfiguredPluginDefinition);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get all the integration points to SmartForms. This will retrieve a collection of forms that this workflow have been integrated with.\r\n     */\r\n    private integrateWithSmartForms(): void {\r\n        const intendedForms: string[] = [];\r\n        for (const definition of  this.processService.root.configuration.processDefinitions) {\r\n            if ((definition as IFormProcessDefinition)?.formSystemName?.indexOf('_removed') < 0) {\r\n                intendedForms.push((definition as IFormProcessDefinition).formSystemName);\r\n            }\r\n        }\r\n\r\n        this.workflowIntegrationService.GetStartWorkflowForms(intendedForms).then((result) => {\r\n            this.smartFormsIntegrationLoaded(result);\r\n        }).catch(() => {\r\n            this.configurePluginsMethodsLoadedCount += 1;\r\n            if (this.configurePluginsMethodsLoadedCount === 2) {\r\n                this.configuredPluginsLoaded = true;\r\n                this.updateStartWorkflowIntegrationStatus();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * Callback from rules rest call.\r\n     */\r\n    private smartFormsIntegrationLoaded(result: sourceCode.k2Designer.objectModel.smartForms.IStartWorkflow[]): void {\r\n        const integrationPoints: sourceCode.k2Designer.objectModel.smartForms.IStartWorkflow[] = result;\r\n\r\n        for (const integrationPoint of integrationPoints) {\r\n\r\n            //RuleId will be empty if the user selected to configure later and only create references.  Thus it would not\r\n            //add an start workflow action but only create the references.\r\n            if (integrationPoint.ruleId) {\r\n                this.configuredPluginDefinitions.push({\r\n                    id: integrationPoint.formId,\r\n                    name: integrationPoint.formSystemName,\r\n                    title: integrationPoint.formDisplayName,\r\n                    subTitle: integrationPoint.ruleName,\r\n                    metaData: {\r\n                        actionId: integrationPoint.actionId,\r\n                        ruleId: integrationPoint.ruleId,\r\n                        state: integrationPoint.state,\r\n                        itemReferences: integrationPoint.itemReferences.collection\r\n                    } as unknown as IPluginDefinitionMetaData,\r\n                    leftIconClass: 'formstartevent',\r\n                    integrationType: IntegrationType.SmartForms\r\n                } as unknown as IConfiguredPluginDefinition);\r\n            }\r\n            else {\r\n                //Only get the item references found on the workflow.\r\n                const itemReferences: IModelArray<ISmartFormItemReference> = [];\r\n\r\n                for (const itemReferenceCollection of integrationPoint.itemReferences.collection) {\r\n\r\n                    for (const itemReference of this.processService.root.configuration.itemReferences) {\r\n                        if (itemReference.systemName === itemReferenceCollection.name) {\r\n                            itemReferences.push(itemReferenceCollection);\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n                this.configuredPluginDefinitions.push({\r\n                    id: integrationPoint.formId,\r\n                    name: integrationPoint.formSystemName,\r\n                    title: integrationPoint.formDisplayName,\r\n                    subTitle: this.resourceService.getString('wizard_workflow_integration_no_start_workflow_configured'),\r\n                    metaData: {\r\n                        itemReferences,\r\n                        isIntendedPlugin: true\r\n                    } as IPluginDefinitionMetaData,\r\n                    leftIconClass: 'formstartevent',\r\n                    integrationType: IntegrationType.SmartForms\r\n                } as IConfiguredPluginDefinition);\r\n            }\r\n        }\r\n\r\n        this.configurePluginsMethodsLoadedCount += 1;\r\n        if (this.configurePluginsMethodsLoadedCount === 2) {\r\n            this.configuredPluginsLoaded = true;\r\n            this.updateStartWorkflowIntegrationStatus();\r\n        }\r\n\r\n        if (this.configurePluginsMethodsLoadedCount === 2) this.integrationsChanged();\r\n    }\r\n\r\n    private integrationsChanged(): void {\r\n        if (this.busyLoading) return;\r\n        this.busyLoading = true;\r\n\r\n        if (!this.shouldOpenPopup(this.configPanelService.currentPnl.currentItem.name)) {\r\n            this.infoPopup?.close(false);\r\n            this.busyLoading = false;\r\n        }\r\n        this.eventPlatformModel = this.processService.root.configuration.eventPlatformConfiguration;\r\n\r\n        // Now that the event platform configuration exists we need to make sure the listener for the tab badging is set up\r\n        this.configureTabValidation();\r\n    }\r\n\r\n    private shouldOpenPopup(currentTabName: string): boolean {\r\n        return this.configuredPluginsLoaded &&\r\n            !this.infoPopup?.isOpen &&\r\n            !(this.containsStartWorkflowIntegration() || this.spConfiguredPluginExists) &&\r\n            currentTabName === 'WorkflowIntegrationTab';\r\n    }\r\n\r\n    private containsStartWorkflowIntegration(): boolean {\r\n        if (!this.configuredPluginDefinitions?.length) return false;\r\n\r\n        for (const plugin of this.configuredPluginDefinitions) {\r\n            if (plugin.metaData) {\r\n                if (!(plugin.metaData as IPluginDefinitionMetaData).isIntendedPlugin) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return this.otherStartEventExists;\r\n    }\r\n\r\n    private updateStartWorkflowIntegrationStatus(): void {\r\n\r\n        this.environmentService.removeGlobalAttribute<IWorkflowData>('StartWorkflowIntegrationExists');\r\n        this.environmentService.globalVariables.push({\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            StartWorkflowIntegrationExists: this.spConfiguredPluginExists || this.containsStartWorkflowIntegration()\r\n        } as sourceCode.k2Designer.services.core.IGlobalVariable<boolean>);\r\n\r\n        this.legacyBadgingCleanup();\r\n    }\r\n\r\n    private legacyBadgingCleanup(): void {\r\n        //Cleanup legacy workflow badging on start step when\r\n        const startStep = this.processService.root.nodes[0];\r\n        if (startStep.errorInformation?.length || startStep.childErrorInformation?.length) {\r\n            const validationData = new sourceCode.k2Designer.objectModel.validationService.plugins.ValidatorItem();\r\n            validationData.modelObject = this.processService.root.nodes[0];\r\n            validationData.propertyName = 'isStartActvity';\r\n            validationData.validationFailedMessage = 'no_start_workflow_integration_warning';\r\n            validationData.validationResourceTokens = [];\r\n            validationData.errorSeverity = sourceCode.k2Designer.objectModel.core.model.ErrorSeverity.Warning;\r\n            this.validationService.forcePassValidation(validationData);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Callback method to retrieve the events saved for the workflow.\r\n     */\r\n    private getEventsForWorkflowSettingCompleted(shouldFireRecursionValidation: boolean, result: IWorkflowData): void {\r\n        this.spConfiguredPluginExists = false;\r\n\r\n        const firstLoad: boolean = isUndefinedOrNull(this.environmentService.\r\n            getGlobalAttributeValue(globalVariableNames.sharepointIntegratonWorkflowData));\r\n\r\n        if (result) {\r\n            const workflowData: IWorkflowData = result;\r\n            this.configuredPluginDefinitions.push({\r\n                id: workflowData.SettingId,\r\n                name: workflowData.Id,\r\n                title: workflowData.ListName,\r\n                subTitle: this.getStartEventDescription(workflowData.EventData),\r\n                leftIconClass: 'sharepointstartevent',\r\n                integrationType: IntegrationType.SharePoint,\r\n                metaData: workflowData\r\n            } as IConfiguredPluginDefinition);\r\n\r\n            this.spConfiguredPluginExists = true;\r\n\r\n            //add item for validation\r\n            this.environmentService.removeGlobalAttribute<IWorkflowData>(globalVariableNames.sharepointIntegratonWorkflowData);\r\n            this.environmentService.globalVariables.push({\r\n                // eslint-disable-next-line @typescript-eslint/naming-convention\r\n                SharePointIntegrationWorkflowData: workflowData\r\n            } as sourceCode.k2Designer.services.core.IGlobalVariable<IWorkflowData>);\r\n        }\r\n\r\n        //This is for delete/adding an integration.\r\n        if (shouldFireRecursionValidation || firstLoad) {\r\n            sourceCode.k2Designer.objectModel.validationService.plugins.WorkflowRecursionValidator.validateAll(\r\n                this.environmentService as any\r\n            );\r\n        }\r\n\r\n        this.populateProcessDefinitionPlugins();\r\n\r\n        this.configurePluginsMethodsLoadedCount += 1;\r\n        if (this.configurePluginsMethodsLoadedCount === 2) {\r\n            this.configuredPluginsLoaded = true;\r\n            this.updateStartWorkflowIntegrationStatus();\r\n            this.integrationsChanged();\r\n        }\r\n    }\r\n\r\n    private getStartEventDescription(eventReceivers: IRemoteEventReceiver[]): string {\r\n        let selectedEvents = '';\r\n        if (eventReceivers?.length) {\r\n            this.containsSharePointIntegrationEvents = true;\r\n\r\n            for (let i = 0; i < eventReceivers.length; i++) {\r\n\r\n                switch (eventReceivers[i].Id.toString()) {\r\n                    case '1111':\r\n                        if (selectedEvents.length < 2) {\r\n                            selectedEvents = this.resourceService.getString('sharePoint_integration_manually_one_event');\r\n                        }\r\n                        else {\r\n                            if (eventReceivers.length === 2) {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_manually_two_events');\r\n                            }\r\n                            else {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_manually_more_than_two_events');\r\n                            }\r\n                        }\r\n                        break;\r\n                    case '10001':\r\n                        if (selectedEvents.length < 2) {\r\n                            selectedEvents = this.resourceService.getString('sharePoint_integration_added_one_event');\r\n                        }\r\n                        else {\r\n                            if (eventReceivers.length === 2) {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_added_two_events');\r\n                            }\r\n                            else {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_added_more_than_two_events');\r\n                            }\r\n                        }\r\n                        break;\r\n                    case '10002':\r\n                        if (selectedEvents.length < 2) {\r\n                            selectedEvents = this.resourceService.getString('sharePoint_integration_updated_one_event');\r\n                        }\r\n                        else {\r\n                            if (eventReceivers.length === 2) {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_updated_two_events');\r\n                            }\r\n                            else {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_updated_more_than_two_events');\r\n                            }\r\n                        }\r\n                        break;\r\n                    case '10003':\r\n                        if (selectedEvents.length < 2) {\r\n                            selectedEvents = this.resourceService.getString('sharePoint_integration_deleted_one_event');\r\n                        }\r\n                        else {\r\n                            if (eventReceivers.length === 2) {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_deleted_two_events');\r\n                            }\r\n                            else {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_deleted_more_than_two_events');\r\n                            }\r\n                        }\r\n                        break;\r\n                    case '10004':\r\n                        if (selectedEvents.length < 2) {\r\n                            selectedEvents = this.resourceService.getString('sharePoint_integration_checked_in_one_event');\r\n                        }\r\n                        else {\r\n                            if (eventReceivers.length === 2) {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_checked_in_two_events');\r\n                            }\r\n                            else {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_checked_in_more_than_two_events');\r\n                            }\r\n                        }\r\n                        break;\r\n                    case '10005':\r\n                        if (selectedEvents.length < 2) {\r\n                            selectedEvents = this.resourceService.getString('sharePoint_integration_checked_out_one_event');\r\n                        }\r\n                        else {\r\n                            if (eventReceivers.length === 2) {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_checked_out_two_events');\r\n                            }\r\n                            else {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_checked_out_more_than_two_events');\r\n                            }\r\n                        }\r\n                        break;\r\n                    case '10006':\r\n                        if (selectedEvents.length < 2) {\r\n                            selectedEvents = this.resourceService.getString('sharePoint_integration_checked_out_discarded_one_event');\r\n                        }\r\n                        else {\r\n                            if (eventReceivers.length === 2) {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_checked_out_discarded_two_events');\r\n                            }\r\n                            else {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_checked_out_discarded_more_than_two_events');\r\n                            }\r\n                        }\r\n                        break;\r\n                    case '10007':\r\n                        if (selectedEvents.length < 2) {\r\n                            selectedEvents = this.resourceService.getString('sharePoint_integration_attachment_added_one_event');\r\n                        }\r\n                        else {\r\n                            if (eventReceivers.length === 2) {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_attachment_added_two_events');\r\n                            }\r\n                            else {\r\n                                selectedEvents += this.resourceService.getString('sharePoint_integration_attachment_added_more_than_two_events');\r\n                            }\r\n                        }\r\n                        break;\r\n                }\r\n\r\n                if (eventReceivers.length > 2 && i < eventReceivers.length - 1) selectedEvents += ',';\r\n            }\r\n        } else {\r\n            selectedEvents += this.resourceService.getString('sharepoint_integration_no_events_integration');\r\n            this.containsSharePointIntegrationEvents = false;\r\n        }\r\n\r\n        return selectedEvents;\r\n    }\r\n\r\n    /**\r\n     * Method that load plugins from config into the collection for the drop down.\r\n     */\r\n    private populateProcessDefinitionPlugins(): void {\r\n        this.processDefinitionPluginsItems = [];\r\n        this.otherStartEventExists = false;\r\n        if (sourceCode.k2Designer.core.EVENTPLATFORMENABLED) {\r\n            const eventPlatformConfig = this.processService.root.configuration.eventPlatformConfiguration;\r\n            if (eventPlatformConfig?.subscriptions?.length) {\r\n                // for now we only support one event, we will have to revisit the logic\r\n                // once we support more\r\n                if (eventPlatformConfig.subscriptions[0].state === EventPlatformState.Enabled as any) {\r\n                    this.otherStartEventExists = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < this.processService.definitionPlugins.length; i++) {\r\n            const processNameDefinition = this.processService.definitionPlugins[i].name.toLowerCase();\r\n            if (processNameDefinition === 'sharepointprocessdefinition') {\r\n                if (!(this.spConfiguredPluginExists)) {\r\n                    const resourceText = 'wizard_workflow_integration_start_text_template';\r\n\r\n                    this.pushProcessDefinitionPlugin(i, resourceText);\r\n                }\r\n            } else if (processNameDefinition === 'workflowerroreventprocessdefinition') {\r\n                if (sourceCode.k2Designer.core.EVENTPLATFORMENABLED && !this.otherStartEventExists) {\r\n                    const resourceText = 'wizard_workflow_integration_start_text_template_event';\r\n                    this.pushProcessDefinitionPlugin(i, resourceText);\r\n                }\r\n            } else {\r\n                const resourceText = 'wizard_workflow_integration_start_text_template';\r\n\r\n                this.pushProcessDefinitionPlugin(i, resourceText);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Helper method that adds a processDefinitionPluginItem to the array on the scope\r\n     */\r\n    private pushProcessDefinitionPlugin(i: number, resourceText: string): void {\r\n\r\n        this.processDefinitionPluginsItems.push({\r\n            additionalValueProperty: this.resourceService\r\n                .getString(resourceText)\r\n                .replace('{0}',\r\n                    this.resourceService\r\n                        .getString(this.processService.definitionPlugins[i].titleToken)\r\n                ),\r\n            title: this.resourceService.getString(this.processService.definitionPlugins[i].linkTitleToken),\r\n            key: this.processService.definitionPlugins[i].cls,\r\n            icon: this.processService.definitionPlugins[i].svgIconId,\r\n            isIconSvg: true,\r\n            isSelected: false,\r\n            metaData: this.processService.definitionPlugins[i]\r\n        } as IDropDownMenuItem);\r\n    }\r\n\r\n    /**\r\n     * Callback method when autoconfigure SharePoint events.\r\n     */\r\n    private autoConfigureSharePointEventsCompleted(result: string): void {\r\n        if (result !== '') {\r\n            const itemReferences: IModelArray<ISmartFormItemReference> = result as any;\r\n            if (this.processService.root.configuration.itemReferences.length === 0) {\r\n                const pluginHelper = new sourceCode.k2Designer.uiComponents.configPanel.plugins.pluginWizards.Helper(\r\n                    this.environmentService as any\r\n                );\r\n\r\n                pluginHelper.createItemReferences(itemReferences as any,\r\n                    true,\r\n                    sourceCode.k2Designer.uiComponents.configPanel.plugins.pluginWizards.StartMode.sharePointEvent\r\n                );\r\n            }\r\n\r\n            // Save a global variable 'SharePointAutoConfigureCompleted', so that we don't we\r\n            // auto integrate again when constructor fire on a new process\r\n            // and the user did delete the SharePoint integration.  This means that the\r\n            // integration will only happen on a New process && when there is no\r\n            // global entry 'SharePointAutoConfigureCompleted' = true\r\n            this.environmentService.globalVariables.push({\r\n                // eslint-disable-next-line @typescript-eslint/naming-convention\r\n                SharePointAutoConfigureCompleted: true\r\n            } as IGlobalVariable<boolean>);\r\n        }\r\n        this.loadSavedPlugins();\r\n    }\r\n\r\n    /**\r\n     * Whenever the start rule is reset, this function should be called to rebind the listeners\r\n     * on the startRule's error information that will be used for tab validation.\r\n     */\r\n    private configureTabValidation(): void {\r\n        //Clear predefined watches on startRule\r\n        this.item.componentsToWatch = [];\r\n\r\n        if (this.processService?.root?.configuration?.startRule) {\r\n            //Objects which should cause tab to be badged when in error:\r\n            const objToValidateConfigTab: IConfigTabValidatedComponent = {\r\n                componentObj: this.processService.root.configuration.startRule,\r\n                compareFullReference: false\r\n            };\r\n            this.addObjectsToValidateConfigTab([objToValidateConfigTab], this.item);\r\n        }\r\n\r\n        if (this.processService?.root?.configuration?.eventPlatformConfiguration) {\r\n            //Objects which should cause tab to be badged when in error:\r\n            const objToValidateConfigTab: IConfigTabValidatedComponent = {\r\n                componentObj: this.processService.root.configuration.eventPlatformConfiguration,\r\n                compareFullReference: false\r\n            };\r\n            this.addObjectsToValidateConfigTab([objToValidateConfigTab], this.item);\r\n        }\r\n    }\r\n}\r\n","<div *ngIf=\"isExpanded\">\r\n    <k2-spinner classNames=\"ctx-spinner\" [overlay]=\"false\" [visible]=\"!configuredPluginsLoaded\"></k2-spinner>\r\n\r\n    <k2-wizard-popup-host *ngIf=\"isFormsPopupWizardActive\"\r\n            [(isPopupWizardActive)]=\"isFormsPopupWizardActive\"\r\n            (closeDialogReason)=\"onWizardPopupClosed($event)\"\r\n            [heading]=\"formsPopupHeading\"\r\n            (popupConfigChanged)=\"formsPopupConfigChanged()\"\r\n            [isInfoPopupHidden]=\"true\">\r\n        <k2-create-smart-fields [config]=\"formsPopupConfig\"></k2-create-smart-fields>\r\n        <k2-configure-form-rule [config]=\"formsPopupConfig\" [isHiddenPage]=\"false\"></k2-configure-form-rule>\r\n\r\n        <ng-container *ngIf=\"formsPopupConfig?.context.configureRuleNow\">\r\n            <k2-smartforms-configure-state [config]=\"formsPopupConfig\"></k2-smartforms-configure-state>\r\n            <k2-configure-start-rule [config]=\"formsPopupConfig\" [isHiddenPage]=\"false\"></k2-configure-start-rule>\r\n        </ng-container>\r\n\r\n        <ng-container *ngIf=\"!formsPopupConfig?.context.editMode || formsPopupConfig?.context.configureRuleNow\">\r\n            <k2-smart-forms-summary [config]=\"formsPopupConfig\"></k2-smart-forms-summary>\r\n            <k2-summary-result [config]=\"formsPopupConfig\"></k2-summary-result>\r\n        </ng-container>\r\n    </k2-wizard-popup-host>\r\n\r\n    <k2-wizard-popup-host *ngIf=\"isSharepointPopupWizardActive\" \r\n            [(isPopupWizardActive)]=\"isSharepointPopupWizardActive\"\r\n            (closeDialogReason)=\"onWizardPopupClosed($event)\"\r\n            [heading]=\"sharePointPopupHeading\"\r\n            [isInfoPopupHidden]=\"true\">\r\n        <k2-create-references [config]='sharepointPopupConfig'></k2-create-references>\r\n        <k2-start-workflow-events [config]='sharepointPopupConfig'></k2-start-workflow-events>\r\n        <k2-sp-summary [config]='sharepointPopupConfig'></k2-sp-summary>\r\n        <k2-sp-summary [config]='sharepointPopupConfig' [isFinishPage]=\"true\" [isHiddenPage]=\"true\"></k2-sp-summary>\r\n    </k2-wizard-popup-host>\r\n\r\n    <k2-wizard-popup-host *ngIf=\"isDeleteFormsPopupWizardActive\"\r\n            [(isPopupWizardActive)]=\"isDeleteFormsPopupWizardActive\"\r\n            (closeDialogReason)=\"onWizardPopupClosed($event)\"\r\n            [heading]=\"getString('smartforms_integration_remove_integration')\"\r\n            [isInfoPopupHidden]=\"true\">\r\n        <k2-sf-remove-integration [config]=\"deleteFormPopupConfig\" [isAllPageIndicatorsHidden]=\"true\"></k2-sf-remove-integration>\r\n        <k2-sf-remove-integration [config]=\"deleteFormPopupConfig\" [isResultPage]=\"true\" [isAllPageIndicatorsHidden]=\"true\"></k2-sf-remove-integration>\r\n    </k2-wizard-popup-host>\r\n\r\n    <k2-wizard-popup-host *ngIf=\"isDeleteSharePointPopupWizardActive\"\r\n            [(isPopupWizardActive)]=\"isDeleteSharePointPopupWizardActive\"\r\n            (closeDialogReason)=\"onWizardPopupClosed($event)\"\r\n            [heading]=\"getString('sharepoint_integration_remove_integration')\"\r\n            [isInfoPopupHidden]=\"true\">\r\n        <k2-sp-remove-integration [config]=\"deleteSharePointPopupConfig\" [isAllPageIndicatorsHidden]=\"true\"></k2-sp-remove-integration>\r\n        <k2-sp-remove-integration [config]=\"deleteSharePointPopupConfig\" [isAllPageIndicatorsHidden]=\"true\" [isResultPage]=\"true\"></k2-sp-remove-integration>\r\n    </k2-wizard-popup-host>\r\n\r\n    <k2-wizard-popup-host *ngIf=\"isEventPlatformPopupWizardActive\"\r\n            [(isPopupWizardActive)]=\"isEventPlatformPopupWizardActive\"\r\n            (closeDialogReason)=\"onEventPlatformIntegrationClosed($event)\"\r\n            [heading]=\"getString('event_platform_when_any_workflow_errors')\"\r\n            headingIcon=\"workflowerrorstartevent\"\r\n            [isInfoPopupHidden]=\"true\"\r\n            customClass=\"event-platform\">\r\n        <k2-event-platform-add [config]=\"eventPlatformPopupConfig\" [isAllPageIndicatorsHidden]=\"true\"></k2-event-platform-add>\r\n    </k2-wizard-popup-host>\r\n\r\n    <k2-wizard-popup-host *ngIf=\"isDeleteEventPlatformPopupWizardActive\"\r\n            [(isPopupWizardActive)]=\"isDeleteEventPlatformPopupWizardActive\"\r\n            (closeDialogReason)=\"onWizardPopupClosed($event)\"\r\n            [heading]=\"getString('event_platform_when_any_workflow_errors')\"\r\n            [isInfoPopupHidden]=\"true\"\r\n            customClass=\"event-platform\">\r\n        <k2-event-platform-remove [config]=\"deleteEventPlatformPopupConfig\" [isAllPageIndicatorsHidden]=\"true\"></k2-event-platform-remove>\r\n        <k2-event-platform-result [config]=\"deleteEventPlatformPopupConfig\" [isAllPageIndicatorsHidden]=\"true\"></k2-event-platform-result>\r\n    </k2-wizard-popup-host>\r\n    \r\n    <div class=\"content-section fadeMeIn\" *ngIf=\"configuredPluginsLoaded\">\r\n        <div class=\"flex midcenter task-details-actions\">\r\n            <i class=\"icon icon-set-steps icon-size64 ic-startevent\"></i>\r\n        </div>\r\n\r\n        <div class=\"section-heading start-event\">\r\n            {{getFromResx(\"Wizards\", \"wizard_workflow_integration_parameter_heading\") | async}}\r\n        </div>\r\n\r\n        <div class=\"section-content-separator\"></div>\r\n\r\n        <div class=\"section-sub-heading\" #popupTarget>\r\n            {{getFromResx(\"Wizards\", \"wizard_workflow_integration_parameter_description\") | async}}\r\n        </div>\r\n        <div class=\"section-content\">\r\n            <k2-info-popup *ngIf=\"configuredPluginsLoaded\"\r\n                           [gotItType]=\"infoPopupGotItType\"\r\n                           [target]=\"popupTarget\"\r\n                           popupClass=\"decision\"\r\n                           [position]=\"positioning.left\"\r\n                           [forceHideWhenNoPosition]=\"true\">\r\n                <ng-template k2-info-popup-template let-popup>\r\n                    <div class=\"info-popup-start-workflow text-center\">\r\n                        <p class=\"title\">\r\n                            {{getFromResx(\"Resources\", \"InfoPopup_Start_Workflow_Help_Title\") | async }}\r\n                        </p>\r\n                        <div class=\"image\">\r\n                            <img src=\"images/StartEvent@{{popup.imageResolution}}.gif\" />\r\n                        </div>\r\n                        <p class=\"description\">\r\n                            {{getFromResx(\"Resources\", \"InfoPopup_Start_Workflow_Help_Description\") | async}}\r\n                        </p>\r\n                        <button class=\"btn-got-it\" (click)=\"popup.close(true)\">\r\n                            {{getFromResx(\"Resources\", \"Got_It\") | async }}\r\n                        </button>\r\n                    </div>\r\n                </ng-template>\r\n            </k2-info-popup>\r\n\r\n            <div class=\"content-row-separator\"></div>\r\n            <div class=\"content-row k2-list-item-actions-placeholder-container start-event\"\r\n                 *ngIf=\"!configuredPluginDefinitions?.length && configuredPluginsLoaded\">\r\n                <div class=\"watermark-text flex midcenter task-details-actions column\">\r\n                    <div *ngFor=\"let processDefPlugin of processDefinitionPluginsItems\"\r\n                         class=\"processDefinitionPluginsItems icon-container icon-mode-empty\"\r\n                         (click)=\"showProcessDefinitionPlugin(processDefPlugin.metaData)\"\r\n                         k2-tab-index\r\n                         tabindex=\"0\">\r\n                        <div class=\"func-icon\">\r\n                            <svg class=\"icon icon-size24\">\r\n                                <use xlink:href=\"\" [attr.href]=\"'App_Themes/Designer/_svg/steps_medium.svg#'+processDefPlugin.icon\" />\r\n                            </svg>\r\n                        </div>\r\n\r\n                        <div class=\"labelsContainer\">\r\n                            <label [innerHTML]=\"processDefPlugin.additionalValueProperty\"></label>\r\n                            <label class=\"actions\" [innerHTML]=\"processDefPlugin.title\"></label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"content-row\" *ngIf=\"configuredPluginDefinitions.length > 0 && configuredPluginsLoaded\">\r\n                <div class=\"k2-list-item-outcome\" *ngFor=\"let plugin of configuredPluginDefinitions\">\r\n                    <ng-template #rightIconTemplate>\r\n                        <div class=\"control-column fixed\" (click)=\"editPlugin(plugin)\">\r\n                            <div class=\"flexrow list-item-icons text-item vertical vertical right-edit-link\">\r\n                                <span class=\"hyperlink-control primary\">{{getFromResx(\"Controls\", \"saveReference_Edit\") | async}}</span>\r\n                            </div>\r\n                        </div>\r\n                    </ng-template>\r\n                    <k2-list-item customClass=\"k2-list-item-no-repeat-space\"\r\n                                  (keydown)=\"onKeyDown($event)\"\r\n                                  [isSelectable]=\"true\"\r\n                                  [isSelected]=\"plugin.selected\"\r\n                                  (listItemSelected)=\"selectConfiguredPluginDefinition(plugin)\"\r\n                                  [listItemModel]=\"plugin\"\r\n                                  textProperty=\"title\"\r\n                                  [subText]=\"plugin.subTitle\"\r\n                                  [subTextTooltip]=\"plugin.subTitle?.length > 70 ? item.subTitle : ''\"\r\n                                  [leftIconData]=\"{ iconClass: plugin.leftIconClass, isVertical: true, isIconSvg: true }\"\r\n                                  [rightIconData]=\"{ iconTemplate: rightIconTemplate }\"\r\n                                  (textBoxBlurred)=\"onPluginTitleChanged($event)\"\r\n                                  [isReadonly]=\"plugin.integrationType !== integrationType.WorkflowError\">\r\n                    </k2-list-item>\r\n                    <k2-badges [k2Model]=\"eventPlatformModel\" class=\"buttonBadge\" *ngIf=\"plugin.integrationType === integrationType.WorkflowError\"></k2-badges>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"content-row-separator\"></div>\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row add-delete-row\">\r\n                <div class=\"btn k2-btn k2-btn-add\">\r\n                    <k2-drop-down class=\"icon icon-set-buttons icon-size24 ic-add_button\"\r\n                                  customMenuClass=\"medium-container\"\r\n                                  [menuItems]=\"processDefinitionPluginsItems\"\r\n                                  (onItemSelected)=\"processDefinitionPluginSelected($event)\"\r\n                                  trianglePosition=\"center\"></k2-drop-down>\r\n                </div>\r\n                <div class=\"trash bin\" *ngIf=\"configuredPluginDefinitions.length > 0\" (click)=\"removeConfiguredPluginDefinition()\">\r\n                    <div class=\"icon icon-set-buttons icon-size24 ic-bin_button {{hoverClass}}\" (mouseenter)=\"hoverClass = 'disabled'\" (mouseleave)=\"hoverClass = ''\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"content-section-separator\"></div>\r\n    <div class=\"content-transition-placeholder\"></div>\r\n\r\n    <!-- Conditional Start Rule Section -->\r\n    <div class=\"content-section\">\r\n        <div class=\"section-sub-heading\">\r\n            {{getFromResx(\"Wizards\", \"wizard_workflow_integration_conditions_heading\") | async}}\r\n        </div>\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row-separator\"></div>\r\n            <!-- Always Start Radio Button -->\r\n            <div class=\"content-row has-margin\">\r\n                <!-- startMode for the selectConditionalStartRule 0 = AlwaysStart -->\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                      displayText=\"{{ getFromResx('Wizards', 'wizard_workflow_integration_conditions_always_start') | async }}\"\r\n                                      [checked]=\"!hasConditionalStartRule()\"\r\n                                      (checkedChange)=\"$event ? selectRuleType(0): null\"\r\n                                      id=\"conditionalStartRuleAlwaysStart\"\r\n                                      name=\"conditionalStartRuleGroup\">\r\n                </k2-choose-control-v2>\r\n                <div class=\"row-left-gutter inner-description\">\r\n                    {{getFromResx(\"Wizards\", \"wizard_workflow_integration_conditions_always_start_description\") | async}}\r\n                </div>\r\n            </div>\r\n            <div class=\"content-row-separator\"></div>\r\n            <!-- Certain Recipients Radio Button -->\r\n            <div class=\"content-row\">\r\n                <!-- startMode for the selectConditionalStartRule 1 = ConditionalStart -->\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                      displayText=\"{{ getFromResx('Wizards', 'wizard_workflow_integration_conditions_condition_start' ) | async }}\"\r\n                                      [checked]=\"hasConditionalStartRule()\"\r\n                                      (checkedChange)=\"$event ? selectRuleType(1): null\"\r\n                                      id=\"conditionalStartRuleConditionalStart\"\r\n                                      name=\"conditionalStartRuleGroup\">\r\n                </k2-choose-control-v2>\r\n                <div class=\"row-left-gutter inner-description\">\r\n                    {{getFromResx(\"Wizards\", \"wizard_workflow_integration_conditions_condition_start_description\") | async}}\r\n                </div>\r\n            </div>\r\n            <div class=\"content-row-separator\"></div>\r\n            <div class=\"content-row\" [class.is-disabled]=\"!hasConditionalStartRule()\">\r\n                <div class=\"row-left-gutter\">\r\n                    <button k2-tab-index class=\"panel-toggle-control\" (click)=\"toggleRulesDesigner()\"\r\n                            [class.hover]=\"isToggleBtnHover\"\r\n                            [class.selected]=\"isRulesActive()\"\r\n                            (mouseenter)=\"isToggleBtnHover = true\"\r\n                            (mouseleave)=\"isToggleBtnHover = false\"\r\n                            [disabled]=\"!hasConditionalStartRule()\">\r\n                        <div class=\"control-icon\">\r\n                            <span class=\"icon icon-set-outcomes icon-size24 ic-rulestoggle \" [class.hover]=\"isToggleBtnHover\"></span>\r\n                        </div>\r\n                        <div class=\"control-content\">\r\n                            <div class=\"title\">\r\n                                {{getFromResx(\"Wizards\", \"wizard_workflow_integration_edit_start_rule\") | async}}\r\n                            </div>\r\n                            <div class=\"sub-title\">\r\n                                {{getFromResx(\"Wizards\", \"wizard_workflow_integration_edit_start_rule_description\") | async}}\r\n                            </div>\r\n                        </div>\r\n                        <span class=\"pull-right icon icon-set-toolbox icon-size16 ic-expandmenu control-toggle-icon\" [class.hover]=\"isToggleBtnHover\"></span>\r\n                    </button>\r\n                    <!-- The clientEventConfiguration.destintationRule needs to point to the correct object model object for the ConditionalStartRule -->\r\n                    <k2-badges [k2Model]=\"startRule\" class=\"buttonBadge\"></k2-badges>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, ElementRef, Inject, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { ListItemComponent } from 'src/app/components/common/list-item/list-item.component';\r\nimport { TimeSpanComponent } from 'src/app/components/common/time-span/time-span.component';\r\nimport { ConfigPanelServiceToken } from 'src/app/services/config-panel/config-panel-service-factory';\r\nimport { ResourceService } from 'src/app/services/resource/resource.service';\r\nimport { UndoRedoServiceToken } from 'src/app/services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from 'src/app/services/validation/validation-service-factory';\r\nimport { ChooseControlTypes } from 'src/app/shared/enums/choose-control/choose-control-types';\r\nimport { DeadlineOptions } from 'src/app/shared/enums/deadline/deadline-options';\r\nimport { TextBoxConstraint } from 'src/app/shared/enums/text-box/text-box-constraint';\r\nimport { showDatePicker } from 'src/app/shared/utils/date-picker';\r\nimport { IConfigPanelTab } from 'src/types/models/config-panel/i-config-panel-tab';\r\nimport { IActivityConfiguration } from 'src/types/models/process/activities/configuration/i-activity-configuration';\r\nimport { IActivity } from 'src/types/models/process/activities/i-activity';\r\nimport { IConfigPanelService } from 'src/types/services/config-panel/i-config-panel-service';\r\nimport { IListItemIconData } from 'src/types/uiComponents/list-item/i-list-item-icon-data';\r\nimport { IValidationService } from '../../../../../../../types/services/validation/ivalidation.service';\r\nimport { PluginBaseComponent } from '../../../base/plugin-base/plugin-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-timer-step',\r\n    templateUrl: './timer-step.component.html',\r\n    styleUrls: ['./timer-step.component.less']\r\n})\r\nexport class TimerStepComponent extends PluginBaseComponent implements OnInit {\r\n\r\n    @Input() activity: IActivity;\r\n\r\n    /**\r\n     * NOTE/TODO: When config panel feature is worked on, the config panel tab should be set from parent component\r\n     * (not from child as is currently)\r\n     */\r\n    @Input() configPanelTab: IConfigPanelTab;\r\n\r\n    get configuration(): IActivityConfiguration {\r\n        return this.activity?.configuration as IActivityConfiguration;\r\n    }\r\n\r\n    get dateChecked(): boolean {\r\n        return this.configuration.deadline.dateChecked;\r\n    }\r\n    set dateChecked(value: boolean) {\r\n        this.configuration.deadline.dateChecked = value;\r\n    }\r\n\r\n    get timeChecked(): boolean {\r\n        return this.configuration.deadline.timeChecked;\r\n    }\r\n    set timeChecked(value: boolean) {\r\n        this.configuration.deadline.timeChecked = value;\r\n    }\r\n\r\n    rightIconData: IListItemIconData = {\r\n        customClassFlexRow: 'list-item-icons',\r\n        iconClass: 'icon icon-set-datatypes icon-size16 ic-datetime fdatepicker',\r\n        isVertical: true,\r\n        isWrappedInContentDiv: true\r\n    };\r\n\r\n    @ViewChild(ListItemComponent) datePicker: ListItemComponent;\r\n    @ViewChild(TimeSpanComponent) afterTimeSpan: TimeSpanComponent;\r\n\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n    textBoxConstraint: typeof TextBoxConstraint = TextBoxConstraint;\r\n    deadlineOptions: typeof DeadlineOptions = DeadlineOptions;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        @Inject(ValidationServiceToken) protected validationService: IValidationService,\r\n        @Inject(ConfigPanelServiceToken) protected configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) protected undoRedoService: IUndoRedoService) {\r\n        super(validationService, configPanelService, resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        //Set activity configuration as tab validation object (this cannot be done in the 'super', because inputs are not accessible yet)\r\n        this.setTabValidationObject(this.activity.configuration, this.configPanelTab);\r\n    }\r\n\r\n    /**\r\n     * Changes the timer step configuration according to deadline option provided\r\n     *\r\n     * @param deadlineOption deadline option of either a specific date or a period\r\n     */\r\n    changeTimerConfig(deadlineOption: DeadlineOptions): void {\r\n        this.undoRedoService.addUndoMarker('--timer step: change timer step configuration--');\r\n\r\n        //Date configuration\r\n        if (deadlineOption === DeadlineOptions.specificDate && !this.configuration.deadline.dateChecked) {\r\n            this.configuration.deadline.timeChecked = false;\r\n            this.configuration.deadline.dateChecked = true;\r\n            this.clearTimeConfiguration();\r\n        }\r\n\r\n        //Time configuration\r\n        if (deadlineOption === DeadlineOptions.afterTime && !this.configuration.deadline.timeChecked) {\r\n            this.configuration.deadline.timeChecked = true;\r\n            this.configuration.deadline.dateChecked = false;\r\n            this.configuration.deadline.specificDate.smartFields.clear();\r\n            this.datePicker.isTextBoxFocused = false; // Removing focus from datepicker if set\r\n        }\r\n    }\r\n\r\n    onTextBoxFocus() {\r\n        this.changeTimerConfig(DeadlineOptions.specificDate);\r\n    }\r\n\r\n    openCalendarControl(eventTarget: EventTarget): void {\r\n        showDatePicker(eventTarget, (ev) => {\r\n            this.undoRedoService.addUndoMarker('--timer step: change timer date--');\r\n            this.configuration.deadline.specificDate.smartFields.clear();\r\n            this.configuration.deadline.specificDate.smartFields.push(\r\n                sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.DateTimeField.createInstance({\r\n                    title: ev.formatted,\r\n                    dateTime: ev.formatted\r\n                })\r\n            );\r\n        });\r\n    }\r\n\r\n    private clearTimeConfiguration() {\r\n        this.configuration.deadline.expressDays.smartFields.clear();\r\n        this.configuration.deadline.expressHours.smartFields.clear();\r\n        this.configuration.deadline.expressMinutes.smartFields.clear();\r\n        this.configuration.deadline.expressSeconds.smartFields.clear();\r\n    }\r\n\r\n}\r\n","<div>\r\n    <div class=\"content-section\">\r\n        <div class=\"section-heading\">\r\n            {{ getFromResx('Wizards', 'wizard_TimerStep_SubHeader1')|async }}\r\n        </div>\r\n\r\n        <div class=\"section-content-separator\"></div>\r\n\r\n        <div class=\"section-sub-heading\">\r\n            {{ getFromResx('Wizards', 'wizard_TimerStep_SubHeader2')|async }}\r\n        </div>\r\n\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row-separator\"></div>\r\n            <div class=\"content-row\">\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                      [displayText]=\"getFromResx('Wizards', 'wizard_TimerStep_Date')|async\"\r\n                                      (checkedChange)=\"changeTimerConfig(deadlineOptions.specificDate)\"\r\n                                      [(checked)]=\"dateChecked\"\r\n                                      name=\"waitForRbGroup\">\r\n                </k2-choose-control-v2>\r\n            </div>\r\n            <div class=\"content-row \" (click)=\"changeTimerConfig(deadlineOptions.specificDate)\" [class.is-disabled]=\"!dateChecked\">\r\n                <div class=\"row-left-gutter date-picker-field\">\r\n                    <k2-list-item #timerDatePicker\r\n                        [listItemModel]=\"configuration.deadline.specificDate\"\r\n                        [isEditable]=\"dateChecked\"\r\n                        [shouldAllowDrop]=\"true\"\r\n                        (textBoxFocused)=\"onTextBoxFocus\"\r\n                        [rightIconData]=\"rightIconData\"\r\n                        (rightIconClicked)=\"openCalendarControl($event)\"\r\n                        [watermark]=\"getString('textbox_watermark_dropselect')\"\r\n                        [textBoxConstraint]=\"textBoxConstraint.DropSelect\"\r\n                        customClass=\"date-picker-relative\">\r\n                    </k2-list-item>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"section-content-separator\"></div>\r\n\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row\">\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                      [displayText]=\"getFromResx('Wizards', 'wizard_TimerStep_Time')|async\"\r\n                                      (checkedChange)=\"changeTimerConfig(deadlineOptions.afterTime)\"\r\n                                      [(checked)]=\"timeChecked\"\r\n                                      name=\"waitForRbGroup\">\r\n                </k2-choose-control-v2>\r\n            </div>\r\n            <div class=\"content-row\" (click)=\"changeTimerConfig(deadlineOptions.afterTime)\">\r\n                <k2-time-span #afterTimeSpan\r\n                    [isDisabled]=\"!timeChecked\"\r\n                    (k2OnFocus)=\"changeTimerConfig(deadlineOptions.afterTime)\"\r\n                    [daysExpression]=\"configuration.deadline.expressDays\"\r\n                    [hoursExpression]=\"configuration.deadline.expressHours\"\r\n                    [minutesExpression]=\"configuration.deadline.expressMinutes\"\r\n                    [secondsExpression]=\"configuration.deadline.expressSeconds\">\r\n                </k2-time-span>\r\n            </div>\r\n        </div>\r\n        <div class=\"section-content-separator\"></div>\r\n        <div class=\"section-content-separator\"></div>\r\n    </div>\r\n    <div class=\"content-section-separator\"></div>\r\n    <div class=\"content-section-separator\"></div>\r\n</div>","import { Input } from '@angular/core';\r\nimport { Component, Inject, OnInit } from '@angular/core';\r\nimport { forEach } from 'angular';\r\nimport { IConfigPanelTab } from '../../../../../../types/models/config-panel/i-config-panel-tab';\r\nimport { IActivity } from '../../../../../../types/models/process/activities/i-activity';\r\nimport { ICanvasService } from '../../../../../../types/services/canvas/i-canvas.service';\r\nimport { IValidationService } from '../../../../../../types/services/validation/ivalidation.service';\r\nimport { CanvasServiceToken } from '../../../../../services/canvas/canvas-service-factory';\r\nimport { ProcessService } from '../../../../../services/process/process.service';\r\nimport { ResourceService } from '../../../../../services/resource/resource.service';\r\nimport { ValidationServiceToken } from '../../../../../services/validation/validation-service-factory';\r\nimport { ActivityPriorityTypes } from '../../../../../shared/enums/activities/activity-priority-types';\r\nimport { StepTemplates } from '../../../../../shared/enums/activities/step-template-names';\r\nimport { ChooseControlTypes } from '../../../../../shared/enums/choose-control/choose-control-types';\r\nimport { DropDownMenuAlignment } from '../../../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropDownMenuTrianglePosition } from '../../../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { containsSpecialCharacters } from '../../../../../shared/utils/name-helper';\r\nimport { BaseResourceComponent } from '../../../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-activity-settings',\r\n    templateUrl: './activity-settings.component.html',\r\n    styleUrls: ['./activity-settings.component.less']\r\n})\r\nexport class ActivitySettingsComponent extends BaseResourceComponent implements OnInit {\r\n    @Input() activity: IActivity;\r\n    @Input() items: IConfigPanelTab[];\r\n\r\n    public wizardName: string;\r\n    public wizardIcon: string;\r\n    public wizardDescription: string;\r\n    public priorityItems: IDropDownMenuItem[];\r\n    public selectedItem: IDropDownMenuItem;\r\n    public mustShowPriority: boolean;\r\n\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n    dropDownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n\r\n    private wizardConfiguration: sourceCode.k2Designer.objectModel.workflow.smartWizards.ISmartWizardDefinition;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        @Inject(CanvasServiceToken) private canvasService: ICanvasService,\r\n        protected processService: ProcessService,\r\n        @Inject(ValidationServiceToken) private validationService: IValidationService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.priorityItems = [];\r\n\r\n        //Priority dropdown\r\n        this.priorityItems.push({\r\n            key: ActivityPriorityTypes.low.toString(),\r\n            icon: 'icon-set-dropdownset ic-priority_low',\r\n            isSeparator: false,\r\n            title: this.resourceService.getString('priority_low'),\r\n            isSelected: this.activity.configuration.priority === ActivityPriorityTypes.low\r\n        } as IDropDownMenuItem);\r\n\r\n        this.priorityItems.push({\r\n            key: ActivityPriorityTypes.med.toString(),\r\n            icon: 'icon-set-dropdownset ic-priority_medium',\r\n            isSeparator: false,\r\n            title: this.resourceService.getString('priority_med'),\r\n            isSelected: this.activity.configuration.priority === ActivityPriorityTypes.med\r\n        } as IDropDownMenuItem);\r\n\r\n        this.priorityItems.push({\r\n            key: ActivityPriorityTypes.high.toString(),\r\n            icon: 'icon-set-dropdownset ic-priority_high',\r\n            isSeparator: false,\r\n            title: this.resourceService.getString('priority_high'),\r\n            isSelected: this.activity.configuration.priority === ActivityPriorityTypes.high\r\n        } as IDropDownMenuItem);\r\n\r\n        for (const priorityItem of this.priorityItems) {\r\n            if (priorityItem.isSelected) {\r\n                this.selectedItem = priorityItem;\r\n            }\r\n        }\r\n\r\n        if (this.activity?.children?.length <= 1) {\r\n            if (this.activity.ui.template.toLowerCase() !== StepTemplates.PlaceHolderStep.toLocaleLowerCase()) {\r\n                const wizard: IConfigPanelTab = this.items[0];\r\n\r\n                this.wizardName = this.processService.getActivityDefaultNameFromActivity(this.activity);\r\n                this.wizardIcon = wizard.spriteClass;\r\n                this.wizardDescription = this.getDescriptionOf(wizard);\r\n                this.wizardConfiguration = (wizard.objectModel as any).wizardConfiguration;\r\n            }\r\n            else {\r\n                this.wizardName = this.resourceService.getString('workflow_step_placeholder');\r\n                this.wizardIcon = 'ic-placeholderevent';\r\n                this.wizardDescription = this.resourceService.getString('wizarddescription_placeholder_step');\r\n            }\r\n        }\r\n\r\n        this.mustShowPriority = false;\r\n\r\n        for (const child of this.activity.children) {\r\n            if (child?.instanceOf(sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.client.ClientEvent.implementor)) {\r\n                this.mustShowPriority = true;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    getSvgIcon(): string {\r\n        if (this.wizardConfiguration &&\r\n            this.canvasService.getIcons()[this.wizardConfiguration.icon]) {\r\n            return this.wizardConfiguration.icon;\r\n        } else {\r\n            return 'fallbackIcon';\r\n        }\r\n    }\r\n\r\n    resetTitle(): void {\r\n        this.activity.customTitle = false;\r\n        if (this.activity.children?.length > 0 && this.activity.children[0].wizardId > 0) {\r\n            this.activity.title = this.processService.getActivityDefaultName(this.activity.children[0].wizardId, null);\r\n            //Sets the Event Title same as Activity Title\r\n            if (this.activity.children.length === 1) {\r\n                this.activity.children[0].title = this.activity.title;\r\n            }\r\n        } else {\r\n            this.activity.title = this.processService.getActivityDefaultName(null, this.activity.ui.template);\r\n        }\r\n    }\r\n\r\n    validateTitle(): void {\r\n        if (!this.activity.title || this.activity.title === '') {\r\n            this.resetTitle();\r\n        }\r\n    }\r\n\r\n    validateAndSetTitle(newValue: string): void {\r\n        //if title is empty, keep it empty until the user focus out\r\n        if (newValue === '') {\r\n            this.activity.title = newValue;\r\n            this.activity.customTitle = true;\r\n        } else if (this.activity.title !== newValue) {\r\n            this.activity.ui.showLabel = true;\r\n\r\n            if (!containsSpecialCharacters(newValue, this.validationService)) {\r\n                this.activity.title = newValue;\r\n                this.activity.customTitle = true;\r\n                //Ensure that event child's title equal to activity's title\r\n                sourceCode.k2Designer.objectModel.workflow.process.k2Process.ensureTitle(this.activity as any);\r\n            }\r\n        }\r\n    }\r\n\r\n    checkForSpecialCharacters(keyBoardEvent: KeyboardEvent): void {\r\n        if (containsSpecialCharacters(keyBoardEvent.key, this.validationService)) {\r\n            keyBoardEvent.preventDefault();\r\n        }\r\n    }\r\n\r\n    showLabelChanged(): void {\r\n        this.activity.ui.showLabel = !this.activity.ui.showLabel;\r\n    }\r\n\r\n    onDescriptionChanged(text: string): void {\r\n        this.activity.description = text;\r\n    }\r\n\r\n    itemSelected(item: IDropDownMenuItem): void {\r\n        this.selectedItem = item;\r\n\r\n        this.activity.configuration.priority = Number(item.key);\r\n\r\n        for (const priorityItem of this.priorityItems) {\r\n            if (priorityItem.title !== item.title) {\r\n                priorityItem.isSelected = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    onNotesChanged(notes: string): void {\r\n        this.activity.notes = notes;\r\n    }\r\n\r\n    private getDescriptionOf(wizard: IConfigPanelTab): string {\r\n        let description = '';\r\n\r\n        if (wizard.descriptionToken !== '') {\r\n            description = this.resourceService.getString(wizard.descriptionToken);\r\n            if (description === wizard.descriptionToken) {\r\n                description = '';\r\n            }\r\n        }\r\n\r\n        return description;\r\n    }\r\n}\r\n","<div class=\"wizard-container-stretch\">\r\n    <div class=\"content-section\">\r\n        <div class=\"section-content\">\r\n            <div class=\"content-row\" *ngIf=\"activity?.children?.length <= 1\">\r\n                <div class=\"understand-activity text-center\">\r\n                    <i *ngIf=\"wizardIcon\" class=\"icon icon-set-steps icon-size64 {{wizardIcon}}\"></i>\r\n                    <svg class=\"icon icon-size64\" *ngIf=\"!wizardIcon\">\r\n                        <use [attr.xlink:href]=\"'#' + getSvgIcon()\"></use>\r\n                    </svg>\r\n                    <div class=\"title\">\r\n                        {{wizardName}}\r\n                    </div>\r\n                    <div class=\"description\">\r\n                        {{wizardDescription}}\r\n                    </div>\r\n                </div>\r\n                <div class=\"content-section-border-separator\">\r\n                </div>\r\n            </div>\r\n            <div class=\"content-row\">\r\n                {{getFromResx('Wizards', 'wizard_ActivitySettings_Title')|async}}\r\n                <div class=\"content-row-separator\"></div>\r\n            </div>\r\n            <div class=\"content-row\">\r\n                <k2-input class=\"k2-control control-background\"\r\n                          [maxLength]=\"50\"\r\n                          (k2Blur)=\"validateTitle()\"\r\n                          (k2Change)=\"validateAndSetTitle($event)\"\r\n                          [value]=\"activity.title\"\r\n                          (keyPressed)=\"checkForSpecialCharacters($event)\"></k2-input>\r\n            </div>\r\n\r\n            <div class=\"content-row-separator\"></div>\r\n\r\n            <div class=\"content-row\">\r\n                <span class=\"hyperlink-control primary pull-right\" [class.is-disabled]=\"!activity.customTitle\" (click)=\"resetTitle()\">\r\n                    {{getFromResx('Wizards', 'wizard_ActivitySettings_ResetTitle')|async}}\r\n                </span>\r\n            </div>\r\n\r\n            <div class=\"content-row-separator\"></div>\r\n\r\n            <div class=\"content-row\">\r\n                <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                                      [displayText]=\"getFromResx('Wizards', 'wizard_ActivitySettings_ShowLabel')|async\"\r\n                                      [checked]=\"activity.ui.showLabel\"\r\n                                      [name]=\"activity.ui.showLabel\"\r\n                                      (checkedChange)=\"showLabelChanged()\">\r\n                </k2-choose-control-v2>\r\n            </div>\r\n\r\n            <div class=\"content-row-separator\"></div>\r\n\r\n            <div class=\"content-row\">\r\n                {{getFromResx('Wizards', 'wizard_ActivitySettings_Description')|async}}\r\n                <div class=\"content-row-separator\"></div>\r\n            </div>\r\n\r\n            <div class=\"content-row\">\r\n                <k2-text-area class=\"k2-control k2-text-area control-background\"\r\n                              [maxLength]=\"256\"\r\n                              [rows]=\"5\"\r\n                              [value]=\"activity.description\"\r\n                              (k2Change)=\"onDescriptionChanged($event)\"\r\n                              [placeholder]=\"getFromResx('Wizards', 'wizard_settings_description_placeholder')|async\">\r\n                </k2-text-area>\r\n            </div>\r\n\r\n            <div class=\"content-row-separator\"></div>\r\n\r\n            <div class=\"content-row\" *ngIf=\"mustShowPriority\">\r\n                {{getFromResx('Wizards', 'wizard_Settings_priority')|async}}\r\n                <div class=\"content-row-separator\"></div>\r\n            </div>\r\n\r\n            <div class=\"content-row\" *ngIf=\"mustShowPriority\">\r\n                <k2-drop-down class=\"k2-dropdown-parent\"\r\n                              [menuAlignment]=\"dropDownMenuAlignment.centered\"\r\n                              [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                              [menuItems]=\"priorityItems\"\r\n                              (onItemSelected)=\"itemSelected($event)\">\r\n\r\n                    <div class=\"k2-dd-flexChild k2-dd-rowParent k2-dd-container k2-control control-background k2-dropdown-div icon-container\">\r\n                        <div class=\"k2-dd-icon\"><span class=\"icon-dd icon icon-set-dropdownset icon-size16 {{selectedItem.icon}}\"></span></div>\r\n                        <div class=\"k2-dd-flexChild k2-dd-text\">{{selectedItem.title}}</div>\r\n                        <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                            <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                        </div>\r\n                    </div>\r\n                </k2-drop-down>\r\n            </div>\r\n\r\n            <div class=\"content-row-separator\"></div>\r\n\r\n            <div class=\"content-row\">\r\n                {{getFromResx('Wizards', 'wizard_ActivitySettings_Notes')|async}}\r\n                <div class=\"content-row-separator\"></div>\r\n            </div>\r\n\r\n            <div class=\"content-row\">\r\n                <k2-text-area class=\"k2-control k2-text-area control-background\"\r\n                              [rows]=\"10\"\r\n                              [value]=\"activity.notes\"\r\n                              (k2Change)=\"onNotesChanged($event)\"\r\n                              [placeholder]=\"getFromResx('Wizards', 'wizard_settings_notes_placeholder')|async\">\r\n                </k2-text-area>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Directive, ElementRef, Injector, Input } from '@angular/core';\r\nimport { UpgradeComponent } from '@angular/upgrade/static';\r\nimport IDropDownMenuItem from '../../shared/enums/drop-down/drop-down-menu-item';\r\n//Extending old upgraded directive (directives/k2DataFieldMapper/k2DataFieldMapper)\r\n\r\n@Directive({\r\n    selector: 'k2-data-field-mapper'\r\n})\r\nexport class DataFieldMapperComponent extends UpgradeComponent {\r\n\r\n    /**\r\n     *  Datafields collection (Left drop down)\r\n     */\r\n    @Input() datafields: sourceCode.k2Designer.objectModel.core.model.IModelArray<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IDataField>;\r\n\r\n    /**\r\n     *  Rows to be mapped\r\n     */\r\n    @Input() rows: sourceCode.k2Designer.objectModel.core.model.IModelArray<sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.setDataFields.ISetDataFieldMapping>;\r\n\r\n    /**\r\n     *  Title that will display on control\r\n     */\r\n    @Input() title: string;\r\n\r\n    /**\r\n     *  Icon that will display on control\r\n     */\r\n    @Input() icon: string;\r\n\r\n    /**\r\n     *  Collection of items that is available to select from (Right Dropdown)\r\n     */\r\n    @Input() values: IDropDownMenuItem[];\r\n\r\n    constructor(elementRef: ElementRef, injector: Injector) {\r\n        super('k2DataFieldMapper', elementRef, injector);\r\n    }\r\n\r\n}\r\n","import { Component, EventEmitter, Inject, Input, OnInit, Output } from '@angular/core';\r\nimport { LegacyResourceServiceToken } from 'src/app/legacy-service-factories/resource-service-factory';\r\nimport { INotificationService } from '../../../../types/services/notification/i-notification.service';\r\nimport { ILegacyResourceService } from '../../../../types/services/resources/i-legacy-resource.service';\r\nimport { IValidationService } from '../../../../types/services/validation/ivalidation.service';\r\nimport { NotificationServiceToken } from '../../../services/notification/notification-service-factory';\r\nimport { ProcessService } from '../../../services/process/process.service';\r\nimport { ValidationServiceToken } from '../../../services/validation/validation-service-factory';\r\nimport { ToastrTypes } from '../../../shared/enums/model/toastr-types';\r\n\r\n@Component({\r\n    selector: 'k2-error-bar-console',\r\n    templateUrl: './error-bar-console.component.html',\r\n    styleUrls: ['./error-bar-console.component.less']\r\n})\r\nexport class ErrorBarConsoleComponent implements OnInit {\r\n\r\n    @Input() public clientErrorList: Array<any> = [];\r\n    @Input() public serverErrorList: Array<any> = [];\r\n    @Input() public signalRErrorList: Array<any> = [];\r\n\r\n    @Output() public onClose: EventEmitter<any> = new EventEmitter();\r\n    @Output() public onFocusNode: EventEmitter<sourceCode.k2Designer.objectModel.core.model.IErrorInformation> =\r\n        new EventEmitter<sourceCode.k2Designer.objectModel.core.model.IErrorInformation>();\r\n\r\n    public errorBarLinkText: string;\r\n    public errorBarTitle: string;\r\n    public errorBarCopy: string;\r\n    public errorBarSmalltext: string;\r\n    public copyBtnHover: boolean;\r\n    public closeBtnHover: boolean;\r\n\r\n    private _isWaiting = false;\r\n\r\n    constructor(@Inject(LegacyResourceServiceToken) private _resourceService: ILegacyResourceService,\r\n        @Inject(NotificationServiceToken) private _notificationService: INotificationService,\r\n        @Inject(ValidationServiceToken) private _validationService: IValidationService,\r\n        private _processService: ProcessService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.errorBarLinkText = this._resourceService.getString('error_bar_console_link_text');\r\n        this.errorBarTitle = this._resourceService.getString('error_bar_console_title');\r\n        this.errorBarCopy = this._resourceService.getString('error_bar_copy_button_label');\r\n        this.errorBarSmalltext = this._resourceService.getString('error_bar_console_small_text');\r\n        this.copyBtnHover = false;\r\n\r\n        //Initialize default button states for lists\r\n        for (let c = 0; c < this.clientErrorList.length; c++) {\r\n            this.initRowButtonExpandHoverState(this.clientErrorList[c]);\r\n            this.initRowButtonCollapseState(this.clientErrorList[c]);\r\n        }\r\n\r\n        for (let s = 0; s < this.serverErrorList.length; s++) {\r\n            this.initRowButtonExpandHoverState(this.serverErrorList[s]);\r\n            this.initRowButtonCollapseState(this.serverErrorList[s]);\r\n        }\r\n\r\n        for (let sr = 0; sr < this.signalRErrorList.length; sr++) {\r\n            this.initRowButtonExpandHoverState(this.signalRErrorList[sr]);\r\n            this.initRowButtonCollapseState(this.signalRErrorList[sr]);\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Returns a string error message compiled from the provided error object\r\n     */\r\n    public resolveErrorMsg(errorObj: sourceCode.k2Designer.objectModel.core.model.IErrorInformation): string {\r\n        let result: string = null;\r\n\r\n        if (errorObj) {\r\n            const modelObj: sourceCode.k2Designer.objectModel.core.model.IModelObject = this._processService.root.findItem(errorObj.reference);\r\n\r\n            if (modelObj) {\r\n                result = this._resourceService.resolveTokenResourceString(errorObj.errorMessage, errorObj.errorResourceTokens, modelObj);\r\n            } else {\r\n                //Orphaned error, was removed before resolveErrorMsg called with scope digest, need to refresh list\r\n\r\n                // Wait a while after updating error flat list before allowing additional updates.\r\n                // This prevents spamming the update list method, the updateErrorFlatList method itself\r\n                // has a deferred implementation internally\r\n                if (!this._isWaiting) {\r\n\r\n                    this._isWaiting = true;\r\n                    setTimeout(() => {\r\n                        this._isWaiting = false;\r\n                    }, 110);\r\n\r\n                    this._validationService.updateErrorFlatList(errorObj, this._processService);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!result) {\r\n            result = this._resourceService.getString('resource_service_unresolved_msg');\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Closes the error console\r\n     */\r\n    public performClose(): void {\r\n        this.onClose.emit();\r\n    }\r\n\r\n    /**\r\n     * Opens the config panel and focusses the tab on which the error is present\r\n     */\r\n    public performFocusNode(reference: sourceCode.k2Designer.objectModel.core.model.IErrorInformation): void {\r\n        this.onFocusNode.emit(reference);\r\n    }\r\n\r\n    /**\r\n     * Ensures there are no trailing whitespace on message\r\n     */\r\n    public isMsgTruncated(evt: JQueryEventObject) {\r\n        const elem: JQuery = $(evt.target).find('span').addBack('span');\r\n\r\n        if (elem.length > 0) {\r\n            return elem[0].offsetWidth < elem[0].scrollWidth;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Copy the currently displayed error messages to a user's clipboard\r\n     */\r\n    public copyErrorMessages(): void {\r\n\r\n        const textToCopy = this.getErrorMessagesAsAString();\r\n\r\n        //Create a temporary dom element, append it to the body\r\n        const temp = $('<textarea>');\r\n        $('body').append(temp);\r\n\r\n        //Set and select the text we want to copy\r\n        temp.html(textToCopy);\r\n        temp.select();\r\n\r\n        let success = false;\r\n        //Save the selection to the clipboard\r\n        try {\r\n            //This returns true even if nothing is copied and/or clipboard permission is denied.\r\n            success = document.execCommand('copy');\r\n        } catch (error) {\r\n            console.error(error);\r\n            success = false;\r\n        }\r\n\r\n        //remove the element from the DOM\r\n        temp.remove();\r\n\r\n        //If the browser is IE, display a copy fail toast if the user does not allow clipboard access\r\n        if (navigator.appVersion.indexOf('Trident') !== -1 && navigator.appVersion.indexOf('Chrome') === -1 && navigator.appVersion.indexOf('Edge') === -1) {\r\n\r\n            const textOnClipboard = ((<any>window) as IEWindow).clipboardData.getData('Text');\r\n\r\n            const filteredTextOnClipboard = textOnClipboard.replace(new RegExp('\\n', 'g'), '').replace(new RegExp('\\r', 'g'), '');\r\n            const filteredTextToCopy = textToCopy.replace(new RegExp('\\n', 'g'), '').replace(new RegExp('\\r', 'g'), '');\r\n\r\n            //Check that the text we wanted to copy matches what is currently on the clipboard\r\n            if (filteredTextOnClipboard === filteredTextToCopy) {\r\n                success = true;\r\n            } else {\r\n                success = false;\r\n            }\r\n        }\r\n\r\n        //Display toast\r\n        if (success === true) {\r\n            this._notificationService.toastr(this._resourceService.getString('workflow_copy_error_button_success_toast_title'),\r\n                this._resourceService.getString('workflow_copy_error_button_success_toast_description'),\r\n                ToastrTypes.copySuccess, 2000);\r\n        } else {\r\n            this._notificationService.toastr(this._resourceService.getString('workflow_copy_error_button_failure_toast_title'),\r\n                this._resourceService.getString('workflow_copy_error_button_failure_toast_description'),\r\n                ToastrTypes.copyFail, 2000);\r\n        }\r\n\r\n        //Interface for allowing access to clipboard data for Internet Explorer Windows\r\n        interface IEWindow extends Window {\r\n            clipboardData: {\r\n                getData: (key: string) => string;\r\n            };\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the error messages and returns them as a single string\r\n     */\r\n    public getErrorMessagesAsAString() {\r\n        let textToCopy = '';\r\n        const errorList = [];\r\n        const fullClientErrorList = this.clientErrorList;\r\n        const serverErrorList = this.serverErrorList;\r\n        const signalRErrorList = this.signalRErrorList;\r\n        const clientWarningList = [];\r\n\r\n        if (fullClientErrorList) {\r\n\r\n            //Sort the client error list by reference\r\n            fullClientErrorList.sort((a, b) => a.reference.localeCompare(b.reference));\r\n\r\n            //Add only the client errors to the error list. The warnings are added to a new array to push at the end\r\n            for (let i = 0; i < fullClientErrorList.length; i++) {\r\n                if (fullClientErrorList[i].errorSeverity != 1) {\r\n                    errorList.push(this.resolveErrorMsg(fullClientErrorList[i]));\r\n                }\r\n                else {\r\n                    clientWarningList.push(this.resolveErrorMsg(fullClientErrorList[i]));\r\n                }\r\n            }\r\n        }\r\n\r\n        if (serverErrorList) {\r\n\r\n            //Sort the server error list by reference\r\n            serverErrorList.sort((a, b) => a.errorMessage.localeCompare(b.errorMessage));\r\n\r\n            //Add the server errors to the error list\r\n            for (let i = 0; i < serverErrorList.length; i++) {\r\n                errorList.push(this.resolveErrorMsg(fullClientErrorList[i]));\r\n            }\r\n        }\r\n\r\n        if (signalRErrorList) {\r\n\r\n            //Sort the signalR error list by reference\r\n            signalRErrorList.sort((a, b) => a.errorMessage.localeCompare(b.errorMessage));\r\n\r\n            //Add the signalR errors to the error list\r\n            for (let i = 0; i < signalRErrorList.length; i++) {\r\n                errorList.push(this.resolveErrorMsg(fullClientErrorList[i]));\r\n            }\r\n        }\r\n\r\n        if (clientWarningList) {\r\n\r\n            //Add the client warnings to the error list\r\n            for (let i = 0; i < clientWarningList.length; i++) {\r\n                errorList.push(clientWarningList[i]);\r\n            }\r\n        }\r\n\r\n        //Format the error list as a single string\r\n        for (let i = 0; i < errorList.length; i++) {\r\n            textToCopy += errorList[i] + '\\n';\r\n        }\r\n\r\n        //Remove extra new line at the end of the string\r\n        textToCopy = textToCopy.slice(0, -1);\r\n        return textToCopy;\r\n    }\r\n\r\n    /**\r\n     * Inverts current hover state for the copy button\r\n     */\r\n    public changeCopyButtonHoverState() {\r\n        this.copyBtnHover = !this.copyBtnHover;\r\n    }\r\n\r\n    /**\r\n     * Inverts current hover state for the close button\r\n     */\r\n    public changeCloseButtonHoverState() {\r\n        this.closeBtnHover = !this.closeBtnHover;\r\n    }\r\n\r\n    /**\r\n     * Inverts current hover state for the row expand button\r\n     */\r\n    public changeRowButtonExpandHoverState(row: any) {\r\n        row.expandBtnHover = !row.expandBtnHover;\r\n    }\r\n\r\n    /**\r\n     * Sets initial value for row expand button to not show hover state\r\n     */\r\n    public initRowButtonExpandHoverState(row: any) {\r\n        row.expandBtnHover = false;\r\n    }\r\n\r\n    /**\r\n     * Inverts current hover state for the row collapse button\r\n     */\r\n    public changeRowButtonCollapseHoverState(row: any) {\r\n        row.expandBtnHover = !row.expandBtnHover;\r\n    }\r\n\r\n    /**\r\n     * Sets initial value for row collaps button to not show hover state\r\n     */\r\n    public initRowButtonCollapseState(row: any) {\r\n        row.expandBtnHover = false;\r\n    }\r\n}\r\n","<div class=\"k2-error-bar-console outer\">\r\n    <div class=\"k2-error-bar-console inner\">\r\n        <div class=\"header\">\r\n            <div class=\"mast\">\r\n                <div class=\"left-content\">\r\n                    <div class=\"header-content\">\r\n                        <label>{{errorBarTitle}}</label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"right-content\">\r\n                    <div class=\"copy-bar icon-container\" [ngClass]=\"{ 'hover' : copyBtnHover }\"\r\n                         (click)=\"copyErrorMessages()\"\r\n                         (mouseenter)=\"changeCopyButtonHoverState()\"\r\n                         (mouseleave)=\"changeCopyButtonHoverState()\">\r\n                        <div class=\"copy-icon\">\r\n                            <i class=\"icon icon-set-toolbar icon-size16 ic-copy\" [ngClass]=\"{ 'hover' : copyBtnHover }\"></i>\r\n                        </div>\r\n                        <div [ngClass]=\"{ 'hover' : copyBtnHover }\">\r\n                            <label class=\"copy-label\">{{errorBarCopy}}</label>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"separator\"></div>\r\n                    <div class=\"header-close\"\r\n                         (click)=\"performClose()\"\r\n                         (mouseenter)=\"changeCloseButtonHoverState()\"\r\n                         (mouseleave)=\"changeCloseButtonHoverState()\">\r\n                        <i class=\"icon icon-set-steps icon-size16 ic-headerclose\" [ngClass]=\"{ 'hover' : closeBtnHover }\"></i>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <hr class=\"horizontal-rule flat\" />\r\n        <div class=\"body\" k2-scrollbar>\r\n            <div class=\"scrollme\">\r\n                <div class=\"error-row\" *ngFor=\"let row of clientErrorList\">\r\n                    <ng-container *ngIf=\"row.errorSeverity != 1\">\r\n                        <div class=\"icon icon-set-badges icon-size18 ic-errorbadge\"></div>\r\n                        <div class=\"message\"\r\n                             [ngClass]=\"{ 'expand' : row.expand, 'truncated' : row.isTruncated }\"\r\n                             (mouseenter)=\"row.isTruncated = isMsgTruncated($event)\">\r\n                            <span>{{resolveErrorMsg(row)}}</span>\r\n                            <i *ngIf=\"row.expand\"\r\n                               class=\"icon icon-set-panel icon-size16 ic-arrowexpanded\"\r\n                               (mouseenter)=\"changeRowButtonExpandHoverState(row)\"\r\n                               (mouseleave)=\"changeRowButtonExpandHoverState(row)\"\r\n                               [ngClass]=\"{ 'hover' : row.expandBtnHover }\"\r\n                               (click)=\"row.expand = false\"></i>\r\n                            <i *ngIf=\"!row.expand\"\r\n                               class=\"icon icon-set-panel icon-size16 ic-arrowcollapsed\"\r\n                               (mouseenter)=\"changeRowButtonCollapseHoverState(row)\"\r\n                               (mouseleave)=\"changeRowButtonCollapseHoverState(row)\"\r\n                               [ngClass]=\"{ 'hover' : row.collapseBtnHover }\"\r\n                               (click)=\"row.expand = row.isTruncated\"></i>\r\n                        </div>\r\n                        <a class=\"hyperlink-control primary\"\r\n                           *ngIf=\"row.reference && row.reference.length > 0 && !row.hideShowMe\"\r\n                           (click)=\"performFocusNode(row)\">{{errorBarLinkText}}</a>\r\n                    </ng-container>\r\n                </div>\r\n                <div class=\"error-row\" *ngFor=\"let row of serverErrorList\">\r\n                    <div class=\"icon icon-set-badges icon-size18 ic-errorbadge\"></div>\r\n                    <div class=\"message\"\r\n                         [ngClass]=\"{ 'expand' : row.expand, 'truncated' : row.isTruncated }\"\r\n                         (mouseenter)=\"row.isTruncated = isMsgTruncated($event)\">\r\n                        <span [textContent]=\"row.errorMessage\"></span>\r\n                        <i *ngIf=\"row.expand\"\r\n                           class=\"icon icon-set-panel icon-size16 ic-arrowexpanded\"\r\n                           (mouseenter)=\"changeRowButtonExpandHoverState(row)\"\r\n                           (mouseleave)=\"changeRowButtonExpandHoverState(row)\"\r\n                           [ngClass]=\"{ 'hover' : row.expandBtnHover }\"\r\n                           (click)=\"row.expand = false\"></i>\r\n                        <i *ngIf=\"!row.expand\"\r\n                           class=\"icon icon-set-panel icon-size16 ic-arrowcollapsed\"\r\n                           (mouseenter)=\"changeRowButtonCollapseHoverState(row)\"\r\n                           (mouseleave)=\"changeRowButtonCollapseHoverState(row)\"\r\n                           [ngClass]=\"{ 'hover' : row.collapseBtnHover }\"\r\n                           (click)=\"row.expand = row.isTruncated\"></i>\r\n                    </div>\r\n                    <a class=\"hyperlink-control primary\"\r\n                       *ngIf=\"row.reference && row.reference.length > 0\"\r\n                       (click)=\"performFocusNode(row)\">{{errorBarLinkText}}</a>\r\n                </div>\r\n                <div class=\"error-row\" *ngFor=\"let row of signalRErrorList\">\r\n                    <div class=\"icon icon-set-badges icon-size18 ic-errorbadge\"></div>\r\n                    <div class=\"message\"\r\n                         [ngClass]=\"{ 'expand' : row.expand, 'truncated' : row.isTruncated }\"\r\n                         (mouseenter)=\"row.isTruncated = isMsgTruncated($event)\">\r\n                        <span [textContent]=\"row.errorMessage\"></span>\r\n                        <i *ngIf=\"row.expand\"\r\n                           class=\"icon icon-set-panel icon-size16 ic-arrowexpanded\"\r\n                           (mouseenter)=\"changeRowButtonExpandHoverState(row)\"\r\n                           (mouseleave)=\"changeRowButtonExpandHoverState(row)\"\r\n                           [ngClass]=\"{ 'hover' : row.expandBtnHover }\"\r\n                           (click)=\"row.expand = false\"></i>\r\n                        <i *ngIf=\"!row.expand\"\r\n                           class=\"icon icon-set-panel icon-size16 ic-arrowcollapsed\"\r\n                           (mouseenter)=\"changeRowButtonCollapseHoverState(row)\"\r\n                           (mouseleave)=\"changeRowButtonCollapseHoverState(row)\"\r\n                           [ngClass]=\"{ 'hover' : row.collapseBtnHover }\"\r\n                           (click)=\"row.expand = row.isTruncated\"></i>\r\n                    </div>\r\n                    <a class=\"hyperlink-control primary\"\r\n                       *ngIf=\"row.reference && row.reference.length > 0\"\r\n                       (click)=\"performFocusNode(row)\">{{errorBarLinkText}}</a>\r\n                </div>\r\n                <div class=\"error-row\" *ngFor=\"let row of clientErrorList\">\r\n                    <ng-container *ngIf=\"row.errorSeverity === 1\">\r\n                        <div class=\"icon icon-set-badges icon-size18 ic-misconfiguredbadge\"></div>\r\n                        <div class=\"message\"\r\n                             [ngClass]=\"{ 'expand' : row.expand, 'truncated' : row.isTruncated }\"\r\n                             (mouseenter)=\"row.isTruncated = isMsgTruncated($event)\">\r\n                            <span [textContent]=\"resolveErrorMsg(row)\"></span>\r\n                            <i *ngIf=\"row.expand\"\r\n                               class=\"icon icon-set-panel icon-size16 ic-arrowexpanded\"\r\n                               (mouseenter)=\"changeRowButtonExpandHoverState(row)\"\r\n                               (mouseleave)=\"changeRowButtonExpandHoverState(row)\"\r\n                               [ngClass]=\"{ 'hover' : row.expandBtnHover }\"\r\n                               (click)=\"row.expand = false\"></i>\r\n                            <i *ngIf=\"!row.expand\"\r\n                               class=\"icon icon-set-panel icon-size16 ic-arrowcollapsed\"\r\n                               (mouseenter)=\"changeRowButtonCollapseHoverState(row)\"\r\n                               (mouseleave)=\"changeRowButtonCollapseHoverState(row)\"\r\n                               [ngClass]=\"{ 'hover' : row.collapseBtnHover }\"\r\n                               (click)=\"row.expand = row.isTruncated\"></i>\r\n                        </div>\r\n                        <a class=\"hyperlink-control primary\"\r\n                           *ngIf=\"row.reference && row.reference.length > 0 && !row.hideShowMe\"\r\n                           (click)=\"performFocusNode(row)\">{{errorBarLinkText}}</a>\r\n                    </ng-container>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"small\"><span>{{errorBarSmalltext}}</span></div>\r\n    </div>\r\n</div>\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'k2-error-bar-notifier',\r\n    templateUrl: './error-bar-notifier.component.html',\r\n    styleUrls: ['./error-bar-notifier.component.less']\r\n})\r\nexport class ErrorBarNotifierComponent implements OnInit {\r\n\r\n    @Input() public clientErrorList: Array<any> = [];\r\n    @Input() public serverErrorList: Array<any> = [];\r\n    @Input() public signalRErrorList: Array<any> = [];\r\n    @Input() public errorSeverity: number;\r\n\r\n    @Output() public onClick: EventEmitter<any> = new EventEmitter();\r\n\r\n    constructor() { }\r\n\r\n    /**\r\n     * When called, will emit the onClick event to show the console\r\n     */\r\n    public performClick(): void {\r\n        this.onClick.emit();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"k2-error-bar-notifier\" [ngClass]=\"{ 'warning-color' : errorSeverity === 1}\" (click)=\"performClick()\">\r\n    <span>{{clientErrorList.length + serverErrorList.length + signalRErrorList.length}}</span>\r\n</div>\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { ICanvasService } from '../../../types/services/canvas/i-canvas.service';\r\nimport { IConfigPanelService } from '../../../types/services/config-panel/i-config-panel-service';\r\nimport { IObjectModelService } from '../../../types/services/object-model/i-object-model-service';\r\nimport { IValidationService } from '../../../types/services/validation/ivalidation.service';\r\nimport { CanvasServiceToken } from '../../services/canvas/canvas-service-factory';\r\nimport { ConfigPanelServiceToken } from '../../services/config-panel/config-panel-service-factory';\r\nimport { ObjectModelServiceToken } from '../../services/object-model/object-model-service-factory';\r\nimport { ProcessService } from '../../services/process/process.service';\r\nimport { ValidationServiceToken } from '../../services/validation/validation-service-factory';\r\nimport { ErrorSeverity } from '../../shared/enums/model/error-severity';\r\nimport { isUndefinedOrNull } from '../../shared/utils/general';\r\n\r\n@Component({\r\n    selector: 'k2-error-bar',\r\n    templateUrl: './error-bar.component.html',\r\n    styleUrls: ['./error-bar.component.less']\r\n})\r\nexport class ErrorBarComponent implements OnInit {\r\n    public clientErrorList: Array<sourceCode.k2Designer.objectModel.core.model.IErrorInformation>;\r\n    public serverErrorList: Array<sourceCode.k2Designer.objectModel.core.model.IErrorInformation>;\r\n    public signalRErrorList: Array<sourceCode.k2Designer.objectModel.core.model.IErrorInformation>;\r\n    public state: string;\r\n    public errorSeverity: ErrorSeverity;\r\n\r\n    constructor(@Inject(ValidationServiceToken) private _validationService: IValidationService,\r\n        private _processService: ProcessService,\r\n        @Inject(ConfigPanelServiceToken) private _configPanelService: IConfigPanelService,\r\n        @Inject(CanvasServiceToken) private _canvasService: ICanvasService,\r\n        @Inject(ObjectModelServiceToken) private _objectModelService: IObjectModelService<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process>) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.errorSeverity = ErrorSeverity.Error;\r\n\r\n        this.state = this.state ? this.state : 'collapsed';\r\n\r\n        this.clientErrorList = this._validationService.getErrorList();\r\n        this.serverErrorList = this._processService.getErrorList();\r\n        this.signalRErrorList = this._objectModelService.getErrorList();\r\n\r\n        this._validationService.listenForErrorList(this.setClientErrorList.bind(this));\r\n        this._processService.listenForErrorList(this.setServerErrorList.bind(this));\r\n        this._objectModelService.listenForSRErrorList(this.setSignalRErrorList.bind(this));\r\n    }\r\n\r\n    private setClientErrorList(errorList: Array<sourceCode.k2Designer.objectModel.core.model.IErrorInformation>): void {\r\n\r\n        const list: Array<sourceCode.k2Designer.objectModel.core.model.IErrorInformation> = [];\r\n\r\n        errorList.forEach((error: sourceCode.k2Designer.objectModel.core.model.IErrorInformation): void => {\r\n\r\n            // Finding related items\r\n            const related: Array<sourceCode.k2Designer.objectModel.core.model.IErrorInformation> = list.filter((err: sourceCode.k2Designer.objectModel.core.model.IErrorInformation): boolean => {\r\n                let isRelated = true;\r\n\r\n                // Continue if the validation type, severity, & message match\r\n                if (!(isRelated = error.validationType === err.validationType && error.errorSeverity === err.errorSeverity && error.errorMessage === err.errorMessage)) {\r\n                    return isRelated;\r\n                }\r\n\r\n                // Comparing resource tokens with potential match\r\n                if (isRelated = error.errorResourceTokens.length === err.errorResourceTokens.length) {\r\n                    isRelated = error.errorResourceTokens.every((token: string, index: number): boolean => err.errorResourceTokens.indexOf(token) === index);\r\n\r\n                    if (!isRelated) {\r\n                        return isRelated;\r\n                    }\r\n\r\n                    // Do the items relate by reference path (one a descendent of the other)\r\n                    isRelated = (error.reference.indexOf(err.reference) > -1 || err.reference.indexOf(error.reference) > -1);\r\n                }\r\n                else {\r\n                    return isRelated;\r\n                }\r\n\r\n                return isRelated;\r\n            });\r\n\r\n            // Only if the error appears to be unique, continue\r\n            if (related.length === 0) {\r\n                list.push(error);\r\n            }\r\n\r\n        });\r\n\r\n        // If the list was filtered, use the filtered list instead\r\n        if (errorList.length !== list.length) {\r\n            errorList = list;\r\n        }\r\n\r\n        if (this.clientErrorList !== errorList) {\r\n            this.clientErrorList = errorList;\r\n        }\r\n\r\n        // Reset to default state when error list is empty.\r\n        if (this.clientErrorList.length === 0 && this.serverErrorList.length === 0 && this.signalRErrorList.length === 0) {\r\n            this.state = 'collapsed';\r\n        }\r\n\r\n        this.setErrorSeverity();\r\n    }\r\n\r\n    private setServerErrorList(errorList: Array<sourceCode.k2Designer.objectModel.core.model.IErrorInformation>): void {\r\n\r\n        //Check that signalR has not already added the same error\r\n        this.addDeploymentErrorInfo(errorList);\r\n\r\n        // Reset to default state when error list is empty.\r\n        if (this.clientErrorList.length === 0 && this.serverErrorList.length === 0 && this.signalRErrorList.length === 0) {\r\n            this.state = 'collapsed';\r\n        }\r\n\r\n        this.setErrorSeverity();\r\n    }\r\n\r\n    private setSignalRErrorList(errorList: Array<sourceCode.k2Designer.objectModel.core.model.IErrorInformation>): void {\r\n\r\n        //Check that deployment has not already added the same error, and replace if it has\r\n        this.addSignalRErrorInfo(errorList);\r\n\r\n        // Reset to default state when error list is empty.\r\n        if (this.clientErrorList.length === 0 && this.serverErrorList.length === 0 && this.signalRErrorList.length === 0) {\r\n            this.state = 'collapsed';\r\n        }\r\n\r\n        this.setErrorSeverity();\r\n    }\r\n\r\n    /**\r\n     * Method to set the error bar severity, the errorBar Notifier errorSeverity is bound to this scope errorSeverity property.\r\n     * It will determine if the error bar severity is 'Warning', 'Error'. If any errors including server errors, the state will be\r\n     * error otherwise it will be warning.\r\n     */\r\n    private setErrorSeverity(): void {\r\n\r\n        let clientErrorListContainsErrors = false;\r\n        //Only do this if no signalR or server errors to determine if it contains errors with error severity.\r\n        if (this.serverErrorList.length === 0 || this.signalRErrorList.length === 0) {\r\n            for (let i = 0; i < this.clientErrorList.length; i++) {\r\n                if (isUndefinedOrNull(this.clientErrorList[i].errorSeverity) ||\r\n                    (!isUndefinedOrNull(this.clientErrorList[i].errorSeverity) &&\r\n                        this.clientErrorList[i].errorSeverity === ErrorSeverity.Error)) {\r\n                    clientErrorListContainsErrors = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (clientErrorListContainsErrors || this.serverErrorList.length > 0 || this.signalRErrorList.length > 0) {\r\n            this.errorSeverity = ErrorSeverity.Error;\r\n        } else if (this.clientErrorList.length > 0) {\r\n            this.errorSeverity = ErrorSeverity.Warning;\r\n        }\r\n    }\r\n\r\n    private addDeploymentErrorInfo(errorList: Array<sourceCode.k2Designer.objectModel.core.model.IErrorInformation>): void {\r\n        this.serverErrorList = [];\r\n        for (let i = 0; i < errorList.length; i++) {\r\n            const deployError = errorList[i];\r\n            const index = this.findIndexByExceptionMessage(this.signalRErrorList, deployError.errorMessage);\r\n            if (index > -1) {\r\n                //remove duplicate from signalR error list since we will have the error in server error list that should persist till next deployment\r\n                this.signalRErrorList.splice(index);\r\n                this.serverErrorList.push(deployError);\r\n            }\r\n            else {\r\n                this.serverErrorList.push(deployError);\r\n            }\r\n        }\r\n    }\r\n\r\n    private addSignalRErrorInfo(errorList: Array<sourceCode.k2Designer.objectModel.core.model.IErrorInformation>): void {\r\n\r\n        this.signalRErrorList = [];\r\n        for (let i = 0; i < errorList.length; i++) {\r\n            const srError = errorList[i];\r\n            const index = this.findIndexByExceptionMessage(this.serverErrorList, srError.errorMessage);\r\n            if (index > -1) {\r\n                //remove duplicate error from signal R error list and add to the server error list so that the error persist until next deployment\r\n                this.serverErrorList.push(srError);\r\n                this.signalRErrorList.splice(index);\r\n            }\r\n            else {\r\n                //add signal R error such as 'K2 server down' to the list\r\n                this.signalRErrorList.push(srError);\r\n            }\r\n        }\r\n    }\r\n\r\n    private findIndexByExceptionMessage(targetArray: Array<sourceCode.k2Designer.objectModel.core.model.IErrorInformation>, errorMessage: string): number {\r\n        for (let i = 0; i < targetArray.length; i++) {\r\n            const tException: sourceCode.k2Designer.objectModel.core.model.IErrorInformation = targetArray[i];\r\n            if (errorMessage === tException.errorMessage) return i;\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    /**\r\n     * When called, will set the state to expanded, showing the console\r\n     */\r\n    public expand(): void {\r\n        this.state = 'expanded';\r\n    }\r\n\r\n    /**\r\n     * When caleld, will the state to collapsed, hiding the console\r\n     */\r\n    public collapse(): void {\r\n        this.state = 'collapsed';\r\n    }\r\n\r\n    /**\r\n     * Simulates a click on canvas for step in error. Opens config panel and selects correct tab when 'SHOW ME' is clicked in error bar.\r\n     *\r\n     * @param errorObj\r\n     */\r\n    public focusDesignerNode(errorObj: sourceCode.k2Designer.objectModel.core.model.IErrorInformation): void {\r\n        if (!isUndefinedOrNull(errorObj)) {\r\n            let reference = errorObj.reference;\r\n\r\n            if (this._canvasService && reference) {\r\n                const currentTab = this._configPanelService.currentPnl.currentItem.descriptionToken;\r\n\r\n                const modelObj: sourceCode.k2Designer.objectModel.core.model.IModelObject = this._processService.root.findItem(reference);\r\n\r\n                if (isUndefinedOrNull(modelObj)) {\r\n                    // remove item valiation\r\n                    const deepestExisting: sourceCode.k2Designer.objectModel.core.model.IModelObject = this._processService.root.findDeepestExisting(reference);\r\n                    this._validationService.removeErrorsFrom(deepestExisting, reference);\r\n                } else {\r\n                    if (!isUndefinedOrNull(errorObj.metadata) && !isUndefinedOrNull(errorObj.metadata.referencingNode)) {\r\n                        const nodeUsingItemReference: sourceCode.k2Designer.objectModel.core.model.IModelObject = this._processService.root.findItem(errorObj.metadata.referencingNode);\r\n                        if (!isUndefinedOrNull(nodeUsingItemReference)) {\r\n                            reference = nodeUsingItemReference.getReference();\r\n                        }\r\n                    }\r\n                    this._validationService.reevaluateErrors([errorObj]);\r\n                }\r\n\r\n                if (modelObj.getReference().indexOf(this._processService.root.configuration.startRule.getReference()) >= 0 ||\r\n                    (this._processService.root.configuration.eventPlatformConfiguration &&\r\n                        modelObj.getReference().indexOf(this._processService.root.configuration.eventPlatformConfiguration.getReference()) >= 0)) {\r\n\r\n                    //set the reference to the Start Activity\r\n                    reference = this._processService.root.nodes[0].getReference();\r\n                }\r\n\r\n                this._canvasService.selectStepByReference(reference);\r\n\r\n                // If it's a tab on the same step, just immediately go to the tab, else only focus it when they are loaded\r\n                if (currentTab !== this._configPanelService.currentPnl.currentItem.descriptionToken) {\r\n                    this._configPanelService.configTabErrorDataSetListener = this.onConfigPanelTabErrorDataLoaded.bind(this, reference);\r\n                } else {\r\n                    const tabs = this._configPanelService.currentPnl.items;\r\n                    tabs.forEach((tab) => {\r\n                        this.onConfigPanelTabErrorDataLoaded(reference, tab);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This event fires when config panel is opened and controller was loaded for config panel, meaning it is ready\r\n     * to select the correct tab after 'SHOW ME' was clicked.\r\n     * It will go through all components in error for this tab and if it matches the reference of the error information, select tab.\r\n     *\r\n     * @param errorReference reference configured in error information on error on which 'SHOW ME' was clicked\r\n     * @param loadedTab tab which fired the loaded event\r\n     */\r\n    private onConfigPanelTabErrorDataLoaded(errorReference: string, loadedTab: sourceCode.k2Designer.objectModel.configPanel.IConfigPanelTab): void {\r\n        const tempTab = new sourceCode.k2Designer.objectModel.configPanel.ConfigPanelTab(null, [], '', '', '', '', [], '', '', '', []);\r\n        let tabToSelect: sourceCode.k2Designer.objectModel.configPanel.IConfigPanelTab = null;\r\n\r\n        if (!isUndefinedOrNull(loadedTab) && loadedTab.containsErrors) {\r\n            for (const comp of loadedTab.componentsToWatch) {\r\n                //See if this component causes tab to be in error\r\n                if (tempTab.componentInError(comp)) {\r\n                    //See if component error matches error console error\r\n                    const obj = comp.componentObj;\r\n                    const matches = (comp.compareFullReference && errorReference === obj.getReference()) ||\r\n                        (!comp.compareFullReference && errorReference.indexOf(obj.getReference()) === 0);\r\n                    if (matches) {\r\n                        tabToSelect = loadedTab;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (!isUndefinedOrNull(tabToSelect)) {\r\n            this._configPanelService.selectConfigTab(tabToSelect);\r\n        }\r\n    }\r\n\r\n}\r\n","<div class=\"error-bar-container\" [ngClass]=\"state\">\r\n    <k2-error-bar-notifier *ngIf=\"clientErrorList.length !== 0 || serverErrorList.length !== 0 || signalRErrorList.length !== 0\"\r\n                           [ngClass]=\"{ 'animate-hidden' : state === 'expanded' }\"\r\n                           (onClick)=\"expand()\"\r\n                           [clientErrorList]=\"clientErrorList\"\r\n                           [serverErrorList]=\"serverErrorList\"\r\n                           [signalRErrorList]=\"signalRErrorList\"\r\n                           [errorSeverity]=\"errorSeverity\">\r\n    </k2-error-bar-notifier>\r\n    <k2-error-bar-console *ngIf=\"clientErrorList.length !== 0 || serverErrorList.length !== 0 || signalRErrorList.length !== 0\"\r\n                          [ngClass]=\"{ 'slide-up' : state === 'expanded', 'slide-down' : state === 'collapsed' }\"\r\n                          (onClose)=\"collapse()\"\r\n                          [clientErrorList]=\"clientErrorList\"\r\n                          [serverErrorList]=\"serverErrorList\"\r\n                          [signalRErrorList]=\"signalRErrorList\"\r\n                          (onFocusNode)=\"focusDesignerNode($event)\">\r\n    </k2-error-bar-console>\r\n</div>\r\n","import { AfterViewInit, Component, EventEmitter, Inject, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { ISmartFormItemReference } from '../../../types/models/smart-forms/i-smart-form-item-reference';\r\nimport { IProcessService } from '../../../types/services/process/i-process-service';\r\nimport { IListItemIconData } from '../../../types/uiComponents/list-item/i-list-item-icon-data';\r\nimport { ProcessService } from '../../services/process/process.service';\r\nimport { ResourceService } from '../../services/resource/resource.service';\r\nimport { listItemIcons } from '../../shared/constants/list-item';\r\nimport { findUniqueName } from '../../shared/utils/name-helper';\r\nimport { BaseResourceComponent } from '../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-item-references',\r\n    templateUrl: './item-references.component.html'\r\n})\r\nexport class ItemReferencesComponent extends BaseResourceComponent implements OnInit, OnChanges {\r\n\r\n    @Input() heading: string;\r\n    @Input() subHeading: string;\r\n    @Input() createHeading: string;\r\n    @Input() illustration: string;\r\n    @Input() noSuggestionText: string;\r\n    @Input() noSuggestionIcon: string;\r\n    @Input() learnMoreLink: string;\r\n    @Input() isLoading: boolean;\r\n    @Input() referenceToCreateCount: number;\r\n    @Input() learnMoreId: number;\r\n    @Input() sourceItemReferences: ISmartFormItemReference[] = [];\r\n    @Input() newItemReferences: ISmartFormItemReference[] = [];\r\n    @Input() existingItemReferences: ISmartFormItemReference[] = [];\r\n\r\n    @Output() itemReferenceUpdated: EventEmitter<ISmartFormItemReference[]> = new EventEmitter<ISmartFormItemReference[]>();\r\n    @Output() componentLoaded: EventEmitter<void> = new EventEmitter<void>();\r\n    @Output() updateCreateCount: EventEmitter<number> = new EventEmitter<number>();\r\n\r\n    loadingText: string;\r\n    existingReferenceText: string;\r\n    formReferenceText: string;\r\n    formSourcesHeadingText: string;\r\n    formSourcesSubHeadingText: string;\r\n    newRefListLeftIcon: IListItemIconData = listItemIcons.itemRefIcon;\r\n    startProcRightIcon: IListItemIconData = listItemIcons.startProcessIcon;\r\n    /**\r\n     * Property to determine if existing references is expanded or not.\r\n     */\r\n    isExistingReferencesExpanded = false;\r\n\r\n    constructor(private processService: ProcessService,\r\n        protected resourceService: ResourceService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.setResources();\r\n        this.componentLoaded.emit();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.sourceItemReferences) {\r\n            this.updateReferencesFromForm();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Remove or restore item reference (disabe/enable)\r\n     *\r\n     * @param itemReference\r\n     */\r\n    toggleItemReference(itemReference: ISmartFormItemReference): void {\r\n\r\n        itemReference.disabled = !itemReference.disabled;\r\n\r\n        this.checkIfItemReferenceNeedsToBeCreated();\r\n\r\n    }\r\n\r\n    /**\r\n     * Ensures item reference name is unique.\r\n     */\r\n    setUniqueItemReferenceName(selectedItemReference: ISmartFormItemReference): void {\r\n\r\n        selectedItemReference.displayName = findUniqueName(this.processService.root.configuration.itemReferences,\r\n            'title', selectedItemReference.displayName, null, false);\r\n    }\r\n\r\n    /**\r\n     * Restore a disabled item reference\r\n     *\r\n     * @param itemReference\r\n     */\r\n    restoreItemReference(itemReference: ISmartFormItemReference): void {\r\n\r\n        //Set item reference state to enabled.\r\n        itemReference.disabled = false;\r\n\r\n        this.checkIfItemReferenceNeedsToBeCreated();\r\n    }\r\n\r\n    private setResources() {\r\n        this.existingReferenceText = this.getString('wizard_workflow_integration_existing_references');\r\n        this.formReferenceText = this.getString('wizard_wfi_create_form_references');\r\n        this.formSourcesHeadingText = this.getString('wizard_wfi_create_form_no_sources_heading');\r\n        this.formSourcesSubHeadingText = this.getString('wizard_wfi_create_form_no_sources_sub_heading');\r\n        this.loadingText = this.getString('popup_state_loading');\r\n    }\r\n\r\n    /**\r\n     * Method to check for any new item reference to be created.\r\n     */\r\n    private checkIfItemReferenceNeedsToBeCreated(): void {\r\n\r\n        this.referenceToCreateCount = this.newItemReferences.filter(i => !i.disabled).length;\r\n\r\n        this.onItemReferenceUpdated();\r\n    }\r\n\r\n    /**\r\n     * Method to call when an item references was updated in the directive.\r\n     */\r\n    private onItemReferenceUpdated(): void {\r\n\r\n        this.itemReferenceUpdated.emit(this.newItemReferences);\r\n\r\n        this.updateCreateCount.emit(this.referenceToCreateCount);\r\n    }\r\n\r\n    /**\r\n     * Method to match and assign item references to new & existing collections according to item references found in the process vs form sources.\r\n     * Ensures unique names for references\r\n     */\r\n    private updateReferencesFromForm(): void {\r\n        this.newItemReferences = [];\r\n\r\n        if (this.sourceItemReferences.length === 0) {\r\n            return;\r\n        }\r\n\r\n        //Get the primary item reference from the source item references (there can be only 1 primary)\r\n        const primarySourceItemRef = this.sourceItemReferences.find(i => i.primary);\r\n        if (!primarySourceItemRef) {\r\n            console.error('No primary item reference found in source');\r\n            return;\r\n        }\r\n\r\n        const process = this.processService.root as sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2ProcessExtended;\r\n\r\n        //Build up new and existing itemreferences collections\r\n        this.sourceItemReferences.forEach((sourceItemRef: ISmartFormItemReference) => {\r\n            //First try to find by name\r\n            let existingRef = process\r\n                .findWorkflowItemReferenceByNameAndStartMode(sourceItemRef.name, sourceItemRef.startMode);\r\n            //Then try to get item reference on process by smo name and method name, this is when the field have been renamed or already exists\r\n            if (!existingRef) {\r\n                existingRef = process\r\n                    .findWorkflowItemReference(sourceItemRef.smartObjectName,\r\n                        sourceItemRef.smartObjectMethodName,\r\n                        //have to cast to unknown because findWorkflowItemReference method takes ProcessService instead of IProcessService\r\n                        this.processService as any,\r\n                        sourceItemRef.primary,\r\n                        sourceItemRef.startMode,\r\n                        sourceItemRef.primaryReference);\r\n            }\r\n\r\n            if (existingRef) {\r\n                if (this.existingItemReferences.indexOf(sourceItemRef) === -1) {\r\n\r\n                    const matchingExistingReferences = this.existingItemReferences\r\n                        .filter(x => {\r\n                            for (const [k, v] of Object.entries(x)) {\r\n                                // Only check strings, but remove entries which do not match every field\r\n                                if (typeof sourceItemRef[k] === 'string' && sourceItemRef[k] !== v) {\r\n                                    return false;\r\n                                }\r\n                            }\r\n\r\n                            return true;\r\n                        });\r\n\r\n                    if (matchingExistingReferences.length === 0) {\r\n                        sourceItemRef.displayName = existingRef.title;\r\n                        this.existingItemReferences.push(sourceItemRef);\r\n                    }\r\n                }\r\n            } else {\r\n                //New\r\n                const uniqueItemReferenceName = findUniqueName(this.processService.root.configuration.itemReferences,\r\n                    'systemName', sourceItemRef.name, null, false, '_');\r\n\r\n                const uniqueItemReferenceTitle = findUniqueName(this.processService.root.configuration.itemReferences,\r\n                    'title',\r\n                    sourceItemRef.displayName,\r\n                    null,\r\n                    false\r\n                );\r\n\r\n                sourceItemRef.name = uniqueItemReferenceName;\r\n                sourceItemRef.displayName = uniqueItemReferenceTitle;\r\n\r\n                this.newItemReferences.push(sourceItemRef);\r\n            }\r\n        });\r\n\r\n        //Get updated primary name:\r\n        const primaryItemReferenceName = primarySourceItemRef.name;\r\n\r\n        //Update all non-primary references to have a correct reference to the primary\r\n        this.sourceItemReferences.filter(i => !i.primary).forEach((nonPrimaryRef: ISmartFormItemReference) => {\r\n            nonPrimaryRef.primaryReference = primaryItemReferenceName;\r\n        });\r\n\r\n        this.checkIfItemReferenceNeedsToBeCreated();\r\n    }\r\n}\r\n","<div class=\"section vertical twenty backdrop\">\r\n    <div class=\"column centered\">\r\n        <i class=\"icon icon-set-illustration {{illustration}}\"></i>\r\n    </div>\r\n    <div class=\"column\">\r\n        <div class=\"row heading\">\r\n            <label class=\"heading\" *ngIf=\"heading\">{{heading}}</label>\r\n        </div>\r\n        <div class=\"row description\" *ngIf=\"heading\">\r\n            <span>\r\n                <span class=\"subheading\">{{subHeading}}</span>\r\n                &nbsp;&nbsp;\r\n                <span class=\"hyperlink-control primary mouse-focus\"><k2-help-link [k2ContextId]=\"learnMoreId\"></k2-help-link></span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"section vertical twenty scrollme\" k2-scrollbar>\r\n    <div class=\"state fadeMeIn\" *ngIf=\"isLoading\">\r\n        <div class=\"fourty\"></div>\r\n        <div class=\"state-icon padding-bottom\">\r\n            <k2-spinner classNames=\"k2-item-references\" [overlay]=\"false\" [inline]=\"true\" [visible]=\"true\" [text]=\"loadingText\"></k2-spinner>\r\n        </div>\r\n    </div>\r\n    <div class=\"section vertical\" *ngIf=\"newItemReferences?.length > 0 && createHeading?.length > 0\">\r\n        <div class=\"column\">\r\n            <div class=\"row no-margin references\">\r\n                <figure class=\"new\">\r\n                    <figcaption>{{newItemReferences.length}}</figcaption>\r\n                </figure>\r\n                <label class=\"justified\" [innerHtml]=\"createHeading | safe:'html'\"></label>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div *ngIf=\"newItemReferences?.length && createHeading?.length > 0\">\r\n        <div class=\"twenty\"></div>\r\n        <k2-list-item class=\"k2-list-item-repeat-padding-large new fadeMeIn\"\r\n                      *ngFor=\"let item of newItemReferences\"\r\n                      [listItemModel]=\"item\"\r\n                      [isSelectable]=\"true\"\r\n                      textProperty=\"displayName\"\r\n                      [isDisabled]=\"item.disabled\"\r\n                      [shouldShowToggleEnabled]=\"true\"\r\n                      (enabledStateToggled)=\"toggleItemReference(item)\"\r\n                      [subText]=\"item.smartObjectDisplayName\"\r\n                      [shouldShowView]=\"item.viewDisplayName?.length > 0\"\r\n                      [viewName]=\"item.viewDisplayName\"\r\n                      [leftIconData]=\"newRefListLeftIcon\"\r\n                      [rightIconData]=\"startProcRightIcon\"\r\n                      (textBoxBlurred)=\"setUniqueItemReferenceName(item)\">\r\n        </k2-list-item>\r\n    </div>\r\n\r\n    <div class=\"column\" *ngIf=\"newItemReferences?.length === 0 && existingItemReferences?.length > 0 && !isLoading\">\r\n        <div class=\"row no-margin\">\r\n            <div class=\"section vertical no-existing-suggestions\">\r\n                <div class=\"dotted-box\">\r\n                    <i class=\"icon icon-set-steps icon-size16 {{noSuggestionIcon}}\"></i>\r\n                    <label>{{noSuggestionText}}</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div [ngClass]=\"newItemReferences?.length === 0 && existingItemReferences?.length > 0  && !isLoading ? 'fourty' : 'thirty'\">\r\n        <div class=\"section vertical existing-references\"\r\n             *ngIf=\"existingItemReferences?.length > 1 && !isExistingReferencesExpanded\"\r\n             (click)=\"isExistingReferencesExpanded = true\">\r\n            <div class=\"k2-list-item-repeat-padding control-row fix k2-list-item-container content-section existing-reference-collapsed\">\r\n                <div class=\"flexrow k2-list-item\">\r\n                    <div class=\"control-column fixed\">\r\n                        <div class=\"flexrow list-item-icons vertical smart-field-workflow-param-background\">\r\n                            <span class=\"icon-sprite icon icon-set-steps icon-size16 ic-itemreferenceevent selected transparent\"></span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"control-column float reference-link\">\r\n                        <div class=\"hyperlink-control primary mouse-focus\">{{existingItemReferences.length}}&nbsp;{{existingReferenceText}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"k2-list-item-repeat-padding control-row fix k2-list-item-container existing-reference-collapsed-duplicate\">\r\n                <div class=\"flexrow k2-list-item\">\r\n                    <div class=\"control-column fixed\">\r\n                        <div class=\"flexrow list-item-icons vertical smart-field-workflow-param-background\">\r\n                            <span class=\"icon-sprite icon icon-set-steps icon-size16 ic-itemreferenceevent selected transparent\"></span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"fourty\"></div>\r\n        </div>\r\n        <div *ngIf=\"(existingItemReferences?.length > 0 && isExistingReferencesExpanded) || existingItemReferences.length == 1\">\r\n            <k2-list-item class=\"k2-list-item-repeat-padding-large fadeMeIn\"\r\n                          *ngFor=\"let item of existingItemReferences\"\r\n                          [listItemModel]=\"item\"\r\n                          [isSelectable]=\"true\"\r\n                          textProperty=\"displayName\"\r\n                          [isDisabled]=\"item.disabled\"\r\n                          [shouldShowToggleEnabled]=\"true\"\r\n                          (enabledStateToggled)=\"restoreItemReference(item)\"\r\n                          [subText]=\"item.smartObjectDisplayName\"\r\n                          [shouldShowView]=\"item.viewDisplayName?.length > 0\"\r\n                          [viewName]=\"item.viewDisplayName\"\r\n                          [leftIconData]=\"newRefListLeftIcon\"\r\n                          [rightIconData]=\"startProcRightIcon\"\r\n                          (textBoxBlurred)=\"setUniqueItemReferenceName(item)\">\r\n            </k2-list-item>\r\n            <div class=\"fourty\"></div>\r\n        </div>\r\n\r\n        <div class=\"section vertical no-form-references fadeMeIn\" *ngIf=\"!isLoading && existingItemReferences.length === 0 && newItemReferences.length == 0\">\r\n            <div class=\"blox\">\r\n                <i class=\"icon icon-set-filetypes icon-size48 ic-view-empty\"></i>\r\n                <label>{{formReferenceText}}</label>\r\n                <hr class=\"horizontal-rule flat\" />\r\n                <label class=\"description\">\r\n                    {{formSourcesHeadingText}}<br />\r\n                    {{formSourcesSubHeadingText}}\r\n                </label>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, EventEmitter, Input, OnInit, Output, TemplateRef, ViewChild } from '@angular/core';\r\nimport { IPopupConfiguration } from '../../../../types/models/popup/i-popup-configuration';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { ActionPopupTemplate } from '../../../shared/enums/popup/action-popup-template';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-action-popup',\r\n    templateUrl: './action-popup.component.html',\r\n    styleUrls: ['./action-popup.component.less']\r\n})\r\nexport class ActionPopupComponent extends BaseResourceComponent implements OnInit {\r\n    @Input() config: IPopupConfiguration;\r\n    @Input() template: ActionPopupTemplate;\r\n\r\n    @Output() buttonClicked = new EventEmitter<any>();\r\n\r\n    @ViewChild('OAuthError') oAuthErrorTemplate: TemplateRef<any>;\r\n    @ViewChild('customError') customError: TemplateRef<any>;\r\n\r\n    selectedTemplate: TemplateRef<any>;\r\n\r\n    constructor(resourceService: ResourceService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.template) {\r\n            switch (this.template) {\r\n                case ActionPopupTemplate.oAuth:\r\n                    this.selectedTemplate = this.oAuthErrorTemplate;\r\n                    break;\r\n                default: this.selectedTemplate = this.customError;\r\n            }\r\n        }\r\n    }\r\n\r\n    onButtonClicked(button) {\r\n        this.buttonClicked.emit(button);\r\n    }\r\n}\r\n","<ng-template #customError>\r\n    <div class=\"custom-error\">\r\n        <div class=\"wrapper\">\r\n            <div class=\"icon\">\r\n                <i class=\"icon icon-set-badges icon-size32 ic-errorbadge\"></i>\r\n            </div>\r\n            <div class=\"text\">\r\n                {{config?.errorMessage}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n<ng-template #OAuthError>\r\n    <div class=\"oauth-error\">\r\n        <div class=\"oauth-error-icon padding-bottom\">\r\n            <span class=\"icon icon-set-badges icon-size64 ic-errorbadge\"></span>\r\n            <div class=\"oauth-error-icon-heading\">\r\n                {{getFromResx(\"Wizards\", \"popup_state_oops\") |async}}\r\n            </div>\r\n        </div>\r\n        <div class=\"error-message padding-bottom\">\r\n            {{getFromResx(\"Wizards\", \"popup_oAuthError_description\") |async}}\r\n        </div>\r\n        <ng-container *ngIf=\"config.actionButtons?.length\">\r\n            <div class=\"button-padding-bottom\" *ngFor=\"let button of config.actionButtons; let $first = first\">\r\n                <button [ngClass]=\"{ 'secondary' : !$first }\" class=\"button\" type=\"button\" (click)=\"onButtonClicked(button)\" [innerHTML]=\"button.text\">\r\n                </button>\r\n                <div class=\"error-message-explained padding-top\" *ngIf=\"$first\">\r\n                    {{getFromResx(\"Wizards\", \"popup_oAuthError_explained\") |async}}\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n    </div>\r\n</ng-template>\r\n\r\n<div class=\"action-popup\" *ngTemplateOutlet=\"selectedTemplate || customError\">\r\n</div>\r\n","import { Component, ElementRef, HostListener, Inject, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { ICategoryDialogContext } from '../../../../types/models/popup/i-category-dialog-context';\r\nimport { ICategoryDialogData } from '../../../../types/models/popup/i-category-dialog-data';\r\nimport { ICategoryItem } from '../../../../types/models/popup/i-category-item';\r\nimport { IPopupButton } from '../../../../types/models/popup/i-popup-button';\r\nimport { IPopupConfiguration } from '../../../../types/models/popup/i-popup-configuration';\r\nimport { IEnvironmentService } from '../../../../types/services/environment/i-environment-service';\r\nimport { EnvironmentServiceToken } from '../../../services/environment/environment-service-factory';\r\nimport { PopupService } from '../../../services/popup/popup.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { popup } from '../../../shared/constants/wizard-popup';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\nimport { ScrollbarComponent } from '../../common/scrollbar/scrollbar.component';\r\n\r\n@Component({\r\n    selector: 'k2-category-dialog',\r\n    templateUrl: './category-dialog.component.html',\r\n    styleUrls: ['./category-dialog.component.less']\r\n})\r\nexport class CategoryDialogComponent extends BaseResourceComponent implements OnInit, OnDestroy {\r\n    @Input() config: IPopupConfiguration;\r\n\r\n    loading: boolean;\r\n    selectedItem: sourceCode.k2Designer.objectModel.core.categories.ICategoryItem;\r\n    addItemToCrumb: IBreadCrumbItem;\r\n    busyEditing = false;\r\n    newFolderName: string;\r\n\r\n\r\n    @ViewChild('editItem', { read: ElementRef, static: false }) set editItem(item: ElementRef<HTMLElement>) {\r\n        if (!item) return;\r\n        if (this.scrollBar?.scrollbarVisible) {\r\n            this.scrollBar.scrollToElement(item.nativeElement);\r\n        }\r\n        this._editItem = item;\r\n    };\r\n    @ViewChild('scrollBar') scrollBar: ScrollbarComponent;\r\n\r\n    private createButtonSub: Subscription;\r\n    private closeSub: Subscription;\r\n    private _editItem: ElementRef<HTMLElement>;\r\n\r\n    get context(): ICategoryDialogContext {\r\n        return this.config?.context as ICategoryDialogContext;\r\n    }\r\n\r\n    constructor(resourceService: ResourceService,\r\n        @Inject(EnvironmentServiceToken) private _env: IEnvironmentService,\r\n        private _popupService: PopupService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.config?.buttons?.createButton) {\r\n            this.createButtonSub = this.config?.buttons?.createButton.onClick.subscribe((button: IPopupButton) => {\r\n                this.addNewFolderItem(true);\r\n            });\r\n        }\r\n        this.closeSub = this.config.closeEvent.subscribe((button: IPopupButton) => {\r\n            if (this.busyEditing) {\r\n                this.removeTemporaryItem();\r\n            }\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.createButtonSub?.unsubscribe();\r\n        this.closeSub?.unsubscribe();\r\n    }\r\n\r\n    onCrumbItemSelected(event: IBreadCrumbItemEvent): void {\r\n        let id = 1;\r\n\r\n        if (event.item !== null) {\r\n            id = Number(event.item.key);\r\n        }\r\n\r\n        this.loading = true;\r\n\r\n        this._env.dataService.httpGet('api/category/category', {\r\n            systemId: this._env.currentEnvironment.defaultConfig.category.defaultSystemId,\r\n            category: id,\r\n            host: this._env.currentEnvironment.hostId\r\n        }, this.onCollectionComplete, this._env, false, this.onProgress.bind(this));\r\n        (<ICategoryDialogContext>this.config.context).breadCrumbItems = event.newCrumbs;\r\n    }\r\n\r\n    itemClicked(item: ICategoryItem): void {\r\n        if (!this.busyEditing) {\r\n            for (const item of (<ICategoryDialogContext>this.config.context).listItems) {\r\n                item.selected = false;\r\n            }\r\n\r\n            (<any>this.config.buttons).okButton.enabled = true;\r\n\r\n            item.selected = true;\r\n            this.selectedItem = item;\r\n            this.config.returnData = <ICategoryDialogData>{\r\n                selectedItem: this.selectedItem\r\n            };\r\n        }\r\n    }\r\n\r\n    itemDoubleClicked(item: ICategoryItem): void {\r\n        if (!this.busyEditing) {\r\n            this.config.buttons[popup.buttons.create].enabled = true;\r\n\r\n            const crumbItem = <IBreadCrumbItem>{\r\n                key: item.id.toString(),\r\n                title: item.name\r\n            };\r\n\r\n            this.addItemToCrumb = crumbItem;\r\n\r\n            const newBreadCrumbItems = (<ICategoryDialogContext>this.config.context).breadCrumbItems.concat();\r\n            newBreadCrumbItems.push(crumbItem);\r\n            (<ICategoryDialogContext>this.config.context).breadCrumbItems = newBreadCrumbItems;\r\n\r\n            this.loading = true;\r\n\r\n            if (item.childCount === 0) {\r\n                (<ICategoryDialogContext>this.config.context).listItems = [];\r\n                this.loading = false;\r\n            }\r\n            else {\r\n                this._env.dataService.httpGet('api/category/category', {\r\n                    systemId: this._env.currentEnvironment.defaultConfig.category.defaultSystemId,\r\n                    category: item.id,\r\n                    host: this._env.currentEnvironment.hostId\r\n                }, this.onCollectionComplete, this._env, false, this.onProgress.bind(this));\r\n            }\r\n        }\r\n    }\r\n\r\n    private onCollectionComplete = (result: any): void => {\r\n        (<ICategoryDialogContext>this.config.context).listItems = result.items;\r\n        this.config.buttons.okButton.enabled = false; // using popup.buttons.ok here causes the callback to not be able to reference the const 'popup'\r\n        this.loading = false;\r\n    };\r\n\r\n    private onProgress(key: number): void {\r\n\r\n    }\r\n\r\n    cancelNew() {\r\n        if ((<ICategoryDialogContext>this.config.context).listItems.length > 0 &&\r\n            (<ICategoryDialogContext>this.config.context).listItems[(<ICategoryDialogContext>this.config.context).listItems.length - 1].id === -1) {\r\n            this.removeTemporaryItem();\r\n            this.doneEditing();\r\n        }\r\n    }\r\n\r\n    createNewFolder = (oldValue: string, newValue: string) => {\r\n        if (newValue.length > 0) {\r\n            //Try to create the new category\r\n            this._env.dataService.httpGet('api/category/createCategory', {\r\n                name: newValue,\r\n                systemId: this._env.currentEnvironment.defaultConfig.category.defaultSystemId,\r\n                parentCategoryId: this.addItemToCrumb ? this.addItemToCrumb.key : '',\r\n                host: this._env.currentEnvironment.hostId\r\n            }, this.createNewFolderCompleted.bind(this), this._env, false, this.onProgress.bind(this), false);\r\n\r\n        }\r\n        else {\r\n            this._popupService.showActionErrorDialog(this.getString('category_popup_empty_folder'),\r\n                this.getString('category_popup_empty_folder_error'),\r\n                this.errorOkClicked);\r\n        }\r\n        return true;\r\n    };\r\n\r\n    private doneEditing(): void {\r\n        this.config.buttons[popup.buttons.create].enabled = true;\r\n        this.busyEditing = false;\r\n    }\r\n\r\n    private addNewFolderItem(newFolder: boolean): void {\r\n        //Placeholder in collection for new item.\r\n        this.busyEditing = true;\r\n        this.config.buttons[popup.buttons.create].enabled = false;\r\n\r\n        (<ICategoryDialogContext>this.config.context).listItems.push(sourceCode.k2Designer.objectModel.core.categories.CategoryItem.createInstance({\r\n            id: -1,\r\n            name: this.getString('category_popup_new_folder')\r\n        }));\r\n    }\r\n\r\n    private removeTemporaryItem(): void {\r\n        //if the user cancelled by pressing escape, remove the temporary item. Check if it is the temporary item before deleting.\r\n        if ((<ICategoryDialogContext>this.config.context).listItems.length > 0 &&\r\n            (<ICategoryDialogContext>this.config.context).listItems[(<ICategoryDialogContext>this.config.context).listItems.length - 1].id === -1) {\r\n            (<ICategoryDialogContext>this.config.context).listItems.pop();\r\n        }\r\n    }\r\n\r\n    private createNewFolderCompleted(result: any, error: boolean): void {\r\n        if (!error) {\r\n            if (result.Success) {\r\n                (<ICategoryDialogContext>this.config.context).listItems[(<ICategoryDialogContext>this.config.context).listItems.length - 1].id = JSON.parse(result.Success).Id;\r\n                (<ICategoryDialogContext>this.config.context).listItems[(<ICategoryDialogContext>this.config.context).listItems.length - 1].path = JSON.parse(result.Success).Path;\r\n            }\r\n            else if (result.Error) {\r\n                //Remove must be before errorOkClicked callback.\r\n                this._popupService.showActionErrorDialog(this.getString('category_popup_duplicate_folder'),\r\n                    result.Error,\r\n                    this.errorOkClicked);\r\n\r\n            }\r\n        } else if (JSON.parse(result).Message) {\r\n            //Server error\r\n            this._popupService.showActionErrorDialog(JSON.parse(result).Message,\r\n                JSON.parse(result).ExceptionMessage,\r\n                this.errorOkClicked);\r\n        }\r\n\r\n        this.doneEditing();\r\n    }\r\n\r\n    private errorOkClicked = (): void => {\r\n        this.busyEditing = false;\r\n        setTimeout(() => {\r\n            this.busyEditing = true;\r\n        }, 0);\r\n    };\r\n\r\n    @HostListener('document:keydown.escape', ['$event']) onKeydownHandler(event: KeyboardEvent) {\r\n        this._popupService.hide('', this.config);\r\n    }\r\n}\r\n","<div class=\"categorydialog\">\r\n    <div class=\"breadcrumbs\">\r\n        <k2-bread-crumb (onCrumbItemSelected)=\"onCrumbItemSelected($event)\"\r\n                        [hideSearch]=\"true\"\r\n                        [crumbItems]=\"context.breadCrumbItems\"\r\n                        [selectedItem]=\"addItemToCrumb\">\r\n        </k2-bread-crumb>\r\n    </div>\r\n    <hr class=\"horizontal-rule flat\" />\r\n    <div class=\"explorer scrollme\" k2-scrollbar #scrollBar>\r\n        <div *ngIf=\"context?.listItems?.length === 0\" class=\"fadeMeIn empty-state-container\">\r\n            <div class=\"icon\">\r\n                <div class=\"icon icon-set-panel icon-size48 ic-emptyfolder\"></div>\r\n            </div>\r\n            <div class=\"message\">{{getFromResx(\"Resources\", \"category_empty_folder\")|async}}</div>\r\n            <hr class=\"horizontal-rule flat seperator\">\r\n            <div class=\"hyperlink-control primary action\" (click)=\"addNewFolderItem(true)\">{{getFromResx(\"Resources\", \"category_create_new_folder\")|async}}</div>\r\n        </div>\r\n\r\n        <ul class=\"items\" *ngIf=\"context?.listItems?.length\">\r\n            <li class=\"listitem\" *ngFor=\"let item of context.listItems;let $index = index\"\r\n                (mouseenter)=\"hovered = true\"\r\n                (mouseleave)=\"hovered = false\"\r\n                [attr.hovered]=\"hovered && item.id !== -1\"\r\n                [ngClass]=\" { 'selected' : item.selected === true && item.id !== -1 } \"\r\n                (dblclick)=\"itemDoubleClicked(item)\"\r\n                (click)=\"itemClicked(item)\">\r\n                <div class=\"item-wrapper\">\r\n                    <div class=\"category-item-root\">\r\n                        <i *ngIf=\"item.id > -1 || (item.id === -1 && !inProgress)\" class=\"icon icon-set-assetbrowser icon-size16 ic-categoryserver\" [ngClass]=\"{'selected': hovered === true || item.selected === true}\"></i>\r\n                        <k2-spinner *ngIf=\"!inProgress || item.id > -1\" classNames=\"category-spinner\" [overlay]=\"false\" [inline]=\"true\"></k2-spinner>\r\n                        <div *ngIf=\"item.id > -1\" [ngClass]=\"{ 'with-items-container-item-button' : item.selectable === true }\" class=\"items-container-item-text\" [innerHTML]=\"item.name\" k2-tooltip-basic></div>\r\n                        <k2-click-to-edit #editItem *ngIf=\"item.id === -1 && busyEditing\"\r\n                                          (cancelled)=\"cancelNew()\"\r\n                                          [edit]=\"busyEditing\"\r\n                                          class=\"text-heading add-category\"\r\n                                          [(model)]=\"item.name\"\r\n                                          [onEditFinished]=\"createNewFolder\"></k2-click-to-edit>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n        <div class=\"loading\" *ngIf=\"loading\">\r\n            <div class=\"ispinner ispinner--gray ispinner--large ispinner--animating\">\r\n                <div class=\"ispinner__blade\"></div>\r\n                <div class=\"ispinner__blade\"></div>\r\n                <div class=\"ispinner__blade\"></div>\r\n                <div class=\"ispinner__blade\"></div>\r\n                <div class=\"ispinner__blade\"></div>\r\n                <div class=\"ispinner__blade\"></div>\r\n                <div class=\"ispinner__blade\"></div>\r\n                <div class=\"ispinner__blade\"></div>\r\n                <div class=\"ispinner__blade\"></div>\r\n                <div class=\"ispinner__blade\"></div>\r\n                <div class=\"ispinner__blade\"></div>\r\n                <div class=\"ispinner__blade\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { IChooseCreateChangeOutcomeContext } from '../../../../types/models/popup/i-choose-create-change-outcome-context';\r\nimport { IOutcome } from '../../../../types/models/process/outcomes/i-outcome';\r\nimport { ISaveReferencePopupConfiguration } from '../../../../types/uiComponents/pluginWizards/i-save-reference-popup-configuration';\r\nimport { PopupService } from '../../../services/popup/popup.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { popup } from '../../../shared/constants/wizard-popup';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-choose-create-change-outcome',\r\n    templateUrl: './choose-create-change-outcome.component.html',\r\n    styleUrls: ['./choose-create-change-outcome.component.less']\r\n})\r\nexport class ChooseCreateChangeOutcomeComponent extends BaseResourceComponent implements OnInit {\r\n    @Input() config: ISaveReferencePopupConfiguration;\r\n\r\n    get context(): IChooseCreateChangeOutcomeContext {\r\n        return this.config?.context as IChooseCreateChangeOutcomeContext;\r\n    }\r\n\r\n    selectedOutcomeObjectRef: string; //Used for legacy (not needed for migrated components using this popup)\r\n    objectList: IOutcome[];\r\n    expiredList: IOutcome[];\r\n    //Default expired outcome reference\r\n    DEFAULT_EXPIRED_REFERENCE = 'Expired';\r\n\r\n    constructor(resourceService: ResourceService,\r\n        private popupService: PopupService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.context.selectedItem) {\r\n            this.selectedOutcomeObjectRef = this.context.selectedItem.getReference();\r\n            this.selectedOutcome = this.context.selectedItem;\r\n        }\r\n\r\n        this.objectList = [];\r\n        this.expiredList = [];\r\n        if (this.context.contextObjectList) {\r\n            for (const item of this.context.contextObjectList) {\r\n                if (item.isExpiredOutcome !== true) {\r\n                    this.objectList.push(item);\r\n                }\r\n                else {\r\n                    this.expiredList.push(item);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    get selectedOutcome(): IOutcome {\r\n        return (this.config.context as IChooseCreateChangeOutcomeContext).selectedItem;\r\n    }\r\n\r\n    set selectedOutcome(val) {\r\n        (this.config.context as IChooseCreateChangeOutcomeContext).selectedItem = val;\r\n        this.setReturnData();\r\n    }\r\n\r\n    /**\r\n     * No outcome selected\r\n     * */\r\n    selectNone(): void {\r\n        this.selectedOutcomeObjectRef = null;\r\n        this.selectedOutcome = null;\r\n        this.setReturnData();\r\n    }\r\n\r\n    /**\r\n     * Expired outcome that needs to created\r\n     * */\r\n    selectNewExpired(): void {\r\n        this.selectedOutcome = null;\r\n        this.selectedOutcomeObjectRef = this.DEFAULT_EXPIRED_REFERENCE;\r\n        this.setReturnData(true);\r\n    }\r\n\r\n    /**\r\n     * Existing outcome selected from row (expired or normal)\r\n     *\r\n     * @param selectedRow\r\n     */\r\n    selectOutcomeRow(selectedRow: IOutcome): void {\r\n        this.selectedOutcomeObjectRef = selectedRow.getReference();\r\n        this.selectedOutcome = selectedRow;\r\n        this.setReturnData();\r\n    }\r\n\r\n    /**\r\n     * Binds to the method that executes after validation completed and before the popup closes.\r\n     */\r\n    private setReturnData(shouldCreateNewExpired: boolean = false): void {\r\n        this.config.returnData =\r\n        {\r\n            selectedReference: this.selectedOutcome,\r\n            isNewReference: shouldCreateNewExpired\r\n        };\r\n    }\r\n\r\n    closeOnDoubleClick(): void {\r\n        this.popupService.hideContextPopup(popup.buttons.ok, popup.buttons.okResult);\r\n    }\r\n\r\n    getLinkedToText(outcome: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IOutcome): string {\r\n        if (outcome.linkedActionReference && outcome.linkedActionReference.length > 0) {\r\n            const action = outcome\r\n                .getRoot<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process>()\r\n                .findItem<sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.client.IClientEventConfigurationAction>(outcome.linkedActionReference);\r\n            return this.getString('wizard_Task_Voting_Link_To_ActionName').format(action.actionTitle);\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n}\r\n","<div class=\"save-reference-popup\">\r\n    <!-- Content -->\r\n    <div class=\"row content\" k2-scrollbar>\r\n        <!-- Row Item: None selection item -->\r\n        <div class=\"flexrow row-item\" [ngClass]=\"selectedOutcomeObjectRef === null ? 'selected-outcome' : ''\"\r\n             (click)=\"selectNone()\" (dblclick)=\"selectNone(); closeOnDoubleClick()\">\r\n            <!-- LEFT NONE ICON -->\r\n            <!-- All styles & content defined inside the template -->\r\n            <div class=\"vertical item-icon\">\r\n                <div class=\"control-column fixed\">\r\n                    <div class=\"flexrow list-item-icons vertical none-icon-background\">\r\n                        <span class=\"icon icon-set-steps icon-size16 ic-noentry\"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- NONE ITEM TEXT -->\r\n            <div class=\"text-parts\">\r\n                <div class=\"input-with-icon has-label title-with-no-action\">\r\n                    {{getFromResx(\"Wizards\", \"popup_SaveReferenceDialog_None\")| async }}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- Row Item: Expired selection item if any -->\r\n        <ng-container *ngIf=\"expiredList.length > 0\">\r\n            <div class=\"flexrow row-item\" [ngClass]=\"selectedOutcomeObjectRef === expiredItem.getReference() ? 'selected-outcome' : ''\"\r\n                 (click)=\"selectOutcomeRow(expiredItem)\" (dblclick)=\"selectOutcomeRow(expiredItem); closeOnDoubleClick()\"\r\n                 *ngFor=\"let expiredItem of expiredList\">\r\n                <!-- LEFT ICON -->\r\n                <!-- All styles & content defined inside the template -->\r\n                <div class=\"vertical item-icon\">\r\n                    <div class=\"control-column fixed\">\r\n                        <div class=\"flexrow list-item-icons vertical voting-icon-background\">\r\n                            <span class=\"icon icon-set-steps icon-size24 ic-voting selected\"></span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- INPUT/TEXT/LABEL -->\r\n                <div class=\"text-parts control-column float\">\r\n                    <!-- label with no drop-down -->\r\n                    <div k2-tooltip-basic [ngClass]=\"expiredItem.linkedActionReference?.length ? 'title-with-action' : 'title-with-no-action'\" [innerHTML]=\"expiredItem.inferredTitle\"></div>\r\n                    <!-- Add Sub Text -->\r\n                    <div k2-tooltip-basic class=\"sub-title\" *ngIf=\"expiredItem.linkedActionReference?.length\" [innerHTML]=\"getLinkedToText(expiredItem)\"></div>\r\n                </div>\r\n\r\n                <!-- Link Icon because an Expired Outcome is linked -->\r\n                <span *ngIf=\"expiredItem.linkedActionReference?.length\" class=\"last-icon icon icon-set-outcomes icon-size24 ic-hyperlink\"></span>\r\n            </div>\r\n        </ng-container>\r\n        <!-- Row Item: Expired selection item if expired list is empty, add default expired item -->\r\n        <div class=\"flexrow row-item\" *ngIf=\"expiredList.length === 0\" [ngClass]=\"selectedOutcomeObjectRef === DEFAULT_EXPIRED_REFERENCE ? 'selected-outcome' : ''\"\r\n             (click)=\"selectNewExpired()\" (dblclick)=\"selectNewExpired(); closeOnDoubleClick()\">\r\n            <!-- LEFT ICON -->\r\n            <!-- All styles & content defined inside the template -->\r\n            <div class=\"vertical item-icon\">\r\n                <div class=\"control-column fixed\">\r\n                    <div class=\"flexrow list-item-icons vertical voting-icon-background\">\r\n                        <span class=\"icon icon-set-steps icon-size24 ic-voting selected\"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- INPUT/TEXT/LABEL -->\r\n            <div class=\"text-parts control-column float\">\r\n                <!-- label with no drop-down -->\r\n                <div class=\"title-with-action\">\r\n                    {{getFromResx(\"Wizards\", \"popup_SaveReferenceDialog_Expired\")| async }}\r\n                </div>\r\n                <div class=\"sub-title\">\r\n                    {{getFromResx(\"Wizards\", \"popup_SaveReferenceDialog_LinkedToDeadline\")| async }}\r\n                </div>\r\n                <!-- Add Sub Text -->\r\n            </div>\r\n\r\n            <!-- Link Icon because an Expired Outcome is linked -->\r\n            <span class=\"last-icon icon icon-set-outcomes icon-size24 ic-hyperlink\"></span>\r\n        </div>\r\n        <!-- Divider between normal outcomes and Expired outcomes -->\r\n        <div class=\"flexrow divider-row\">\r\n        </div>\r\n        <!-- Row Item: Selection of normal outcomes -->\r\n        <div class=\"flexrow row-item\" [ngClass]=\"selectedOutcomeObjectRef === item.getReference() ? 'selected-outcome' : ''\"\r\n             (click)=\"selectOutcomeRow(item)\" (dblclick)=\"selectOutcomeRow(item); closeOnDoubleClick()\"\r\n             *ngFor=\"let item of objectList\">\r\n            <ng-container *ngIf=\"item\">\r\n                <!-- LEFT ICON -->\r\n                <!-- All styles & content defined inside the template -->\r\n                <div class=\"vertical item-icon\">\r\n                    <div class=\"control-column fixed\">\r\n                        <div class=\"flexrow list-item-icons vertical voting-icon-background\">\r\n                            <span class=\"icon icon-set-steps icon-size24 ic-voting selected\"></span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- INPUT/TEXT/LABEL -->\r\n                <div class=\"text-parts control-column float\">\r\n                    <!-- label with no drop-down -->\r\n                    <div k2-tooltip-basic [ngClass]=\"item.linkedActionReference?.length ? 'title-with-action' : 'title-with-no-action'\" [innerHTML]=\"item.inferredTitle\"></div>\r\n                    <!-- Add Sub Text -->\r\n                    <div k2-tooltip-basic class=\"sub-title\" *ngIf=\"item.linkedActionReference?.length\" [innerHTML]=\"getLinkedToText(item)\"></div>\r\n                </div>\r\n\r\n                <!-- Link Icon because an Expired Outcome is linked -->\r\n                <span *ngIf=\"item.linkedActionReference?.length\" class=\"last-icon icon icon-set-outcomes icon-size24 ic-hyperlink\"></span>\r\n            </ng-container>\r\n        </div>\r\n        <!-- Row Item: To show if there are no Outcomes -->\r\n        <div class=\"flexrow vertical no-items\" *ngIf=\"!objectList?.length\">\r\n            {{getFromResx(\"Wizards\", \"popup_SaveReferenceDialog_noItemsToDisplay\")| async }}\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, Input, OnInit } from '@angular/core';\r\nimport { IDeleteProcessContext } from '../../../../types/models/popup/i-delete-process-context';\r\nimport { IPopupButton } from '../../../../types/models/popup/i-popup-button';\r\nimport { IPopupConfiguration } from '../../../../types/models/popup/i-popup-configuration';\r\nimport { IDataService } from '../../../../types/services/data/i-data-service';\r\nimport { IEnvironmentService } from '../../../../types/services/environment/i-environment-service';\r\nimport { DataServiceToken } from '../../../services/data/data-service-factory';\r\nimport { EnvironmentServiceToken } from '../../../services/environment/environment-service-factory';\r\nimport { ProcessService } from '../../../services/process/process.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-delete-process',\r\n    templateUrl: './delete-process.component.html',\r\n    styleUrls: ['./delete-process.component.less']\r\n})\r\nexport class DeleteProcessComponent extends BaseResourceComponent implements OnInit {\r\n    @Input() config: IPopupConfiguration;\r\n\r\n    get context(): IDeleteProcessContext {\r\n        return this.config.context as IDeleteProcessContext;\r\n    }\r\n\r\n    constructor(\r\n        @Inject(EnvironmentServiceToken) private environmentService: IEnvironmentService,\r\n        resourceService: ResourceService,\r\n        private processService: ProcessService,\r\n        @Inject(DataServiceToken) private dataService: IDataService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.config.buttons?.okButton) {\r\n            this.config.buttons.okButton.onClick.subscribe((button: IPopupButton) => {\r\n                if (this.context.processToDeleteFQN && this.context.processToDeleteFQN.length) {\r\n                    $(document).trigger('DesignerStateChange', ['Busy']);\r\n                    this.processService.requestProcessingCompleteNotification(true, true, this.doDeleteProcess);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    doDeleteProcess = () => {\r\n        let success = false;\r\n        //Make delete service call:\r\n        this.dataService.httpGet('api/process/deletebyname', {\r\n            host: this.environmentService.currentEnvironment.hostId,\r\n            processName: this.context.processToDeleteFQN,\r\n            deleteDeployedVersion: false, //Do not delete deployed version\r\n            deleteLogEntries: false\r\n        }, (message: string, error: boolean, errorCode: number) => {\r\n            if (!error) {\r\n                success = true;\r\n                this.context.onDeleteCompletedCallback(success);\r\n            }\r\n            $(document).trigger('DesignerStateChange', ['Normal']);\r\n        }, this.environmentService, false);\r\n        return success;\r\n    };\r\n}\r\n","<div class=\"dialog\">\r\n    <div class=\"content-section\">\r\n        <div class=\"header-icon\"><i class=\"icon icon-set-steps icon-size32 ic-errorhandling\"></i></div>\r\n        <div class=\"message\">{{getString(\"delete_process_draft_text\")}}</div>\r\n    </div>\r\n</div>\r\n","import { Component, ElementRef, Inject, Input, OnInit } from '@angular/core';\r\nimport { PopupConfigStates } from 'src/app/shared/enums/popup/popup-config-states';\r\nimport { IPopupButton } from '../../../../types/models/popup/i-popup-button';\r\nimport { IRecentsService } from '../../../../types/services/recents/i-recents-service';\r\nimport { IContextPopupConfiguration } from '../../../../types/uiComponents/pluginWizards/i-context-popup-configuration';\r\nimport { IHierarchyDialogContext } from '../../../../types/uiComponents/pluginWizards/IHierarchyDialogContext';\r\nimport { PopupService } from '../../../services/popup/popup.service';\r\nimport { RecentsServiceToken } from '../../../services/recents/recents-service-factory';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { popup } from '../../../shared/constants/wizard-popup';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\n\r\ntype IAssetItem = sourceCode.k2Designer.objectModel.core.itemProvider.IAssetItem;\r\n\r\n@Component({\r\n    selector: 'k2-hierarchy-dialog',\r\n    templateUrl: './hierarchy-dialog.component.html',\r\n    styleUrls: ['./hierarchy-dialog.component.less']\r\n})\r\nexport class HierarchyDialogComponent extends BaseResourceComponent implements OnInit {\r\n    @Input() public config: IContextPopupConfiguration;\r\n    @Input() public buttonClicked: (button: IPopupButton) => void;\r\n\r\n    //Resource string for recents header\r\n    public recentsHeader = '';\r\n\r\n    public context: IHierarchyDialogContext;\r\n\r\n    /**\r\n     * Selected item when not drilled downed.\r\n     */\r\n    public selectedItem: IAssetItem;\r\n\r\n    /**\r\n     * PopupConfigState enum\r\n     */\r\n    public state = PopupConfigStates;\r\n\r\n    /**\r\n     * Add item to the breadcrumb.\r\n     */\r\n    crumbToAdd: IBreadCrumbItem;\r\n\r\n    /**\r\n     * String that will display in the breadcrumb search box.\r\n     */\r\n    public searchText: string;\r\n\r\n    public hierarchySectionWidth: string;\r\n\r\n    //Private members\r\n    private _recentItemSelected = false;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        private popupService: PopupService,\r\n        @Inject(RecentsServiceToken) private recentsService: IRecentsService,\r\n        private element: ElementRef) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.context = this.config.context as IHierarchyDialogContext;\r\n\r\n        //Initalize recents and state\r\n        if (!this.recentsService.hasContext(this.context.recentContextString)) {\r\n            this.recentsService.registerContext(this.context.recentContextString, 25);\r\n        }\r\n        this.context.recentItems = this.getRecentItems();\r\n        this.context.stateConfiguration ??= { state: PopupConfigStates.normal };\r\n\r\n        this.getPersistedAssetItem();\r\n    }\r\n\r\n    /**\r\n     * Method called when clicked on a recent item.\r\n     */\r\n    public recentItemClicked(selectedRecentItem: IAssetItem): void {\r\n        this.config.validationModel = [selectedRecentItem];\r\n        this.selectedItem = selectedRecentItem;\r\n        this._recentItemSelected = true;\r\n        this.config.buttons.okButton.enabled = true;\r\n        this.setReturnData();\r\n    }\r\n\r\n    /**\r\n     * Method called when clicked on a list item.\r\n     */\r\n    public listItemClicked(item: IAssetItem): void {\r\n        //if drilldown is allowed then add it to the breadcrumb\r\n        if (item.allowDrillDown || item.allowAlternateDrillDown) {\r\n            if (item.path) {\r\n                item.path.length = 0;\r\n\r\n                if (this.context.crumbItems &&\r\n                    this.context.crumbItems.indexOf(item as IBreadCrumbItem) === -1) {\r\n                    item.path.push(...this.context.crumbItems);\r\n                }\r\n            }\r\n\r\n            if (this.context.crumbItems &&\r\n                this.context.crumbItems.indexOf(item as IBreadCrumbItem) === -1) {\r\n                const newBreadCrumbItems = this.context.crumbItems.concat();\r\n                newBreadCrumbItems.push(item as any);\r\n\r\n                this.context.crumbItems = newBreadCrumbItems;\r\n                this.crumbToAdd = item as IBreadCrumbItem;\r\n\r\n                this.context.onBreadCrumbAdded(item as IBreadCrumbItem);\r\n            }\r\n\r\n            if (this.config.validationModel) {\r\n                this.config.validationModel.length = 0;\r\n            }\r\n            this.config.buttons.okButton.enabled = false;\r\n        }\r\n        else {\r\n            this.config.validationModel = [item];\r\n            this.selectedItem = item;\r\n            this.setReturnData();\r\n\r\n            this.config.buttons.okButton.enabled = true;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Method called when clicked on a list item.\r\n     */\r\n    public listItemDblClicked(selectedItem: IAssetItem): void {\r\n        if (!selectedItem.allowDrillDown) {\r\n            this.config.validationModel = [selectedItem];\r\n            this.selectedItem = selectedItem;\r\n\r\n            this.setReturnData();\r\n            this.popupService.hide(popup.buttons.okResult, this.config);\r\n        }\r\n    }\r\n\r\n    /***\r\n     * Breadcrumb search text changed\r\n     * */\r\n    public onSearch() {\r\n        if (this.searchText && this.searchText.length >= 2 ||\r\n            (this.searchText && this.searchText.length === 0)) {\r\n\r\n            //Callback method to invoke on implementation side.\r\n            this.context.onSearch(this.searchText);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Window object (wrapped for testing purposes)\r\n     */\r\n    public get window(): any {\r\n        return window;\r\n    }\r\n\r\n    /**\r\n     * Event that fires when an crumb item is selected\r\n     */\r\n    public onCrumbItemSelected(event: IBreadCrumbItemEvent): void {\r\n        this.context.crumbItems = event.newCrumbs;\r\n        this.context.onBreadCrumbClicked(event.item);\r\n    }\r\n\r\n    /**\r\n     * Get the recent items that is added by the hierarchy control.\r\n     */\r\n    private getRecentItems(): IAssetItem[] {\r\n        const recentContext: string = this.context.recentContextString;\r\n        if (this.recentsService.itemCount(recentContext) > 0) {\r\n            const _mapping = {\r\n                name: 'name',\r\n                key: 'key',\r\n                title: 'title',\r\n                allowDrillDown: 'allowDrillDown',\r\n                spriteClass: 'spriteClass',\r\n                metaData: 'metaData',\r\n                path: 'path'\r\n            };\r\n            const items = this.recentsService.getItems(this.context.recentContextString)\r\n                .map<IAssetItem>(\r\n                    (item: any): IAssetItem => {\r\n                        const result: IAssetItem = <any>{};\r\n                        for (const p in _mapping) {\r\n                            result[p] = item[_mapping[p]];\r\n                        }\r\n                        (<any>result).__originalItem = item;\r\n                        return result;\r\n                    });\r\n            return items;\r\n        }\r\n    }\r\n\r\n    //Loop through all list items to get last selected asset item.\r\n    private getPersistedAssetItem(): void {\r\n        if (this.context.persistedAssetItemKey && this.context.persistedAssetItemKey.length > 0) {\r\n            for (let i = 0; i < this.context.listItems.length; i++) {\r\n                if (this.context.listItems[i].key === this.context.persistedAssetItemKey) {\r\n                    this.listItemClicked(this.context.listItems[i]);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Method that gets called when this dialog closes\r\n     */\r\n    private setReturnData(): void {\r\n        if (this.selectedItem.path && this._recentItemSelected !== true) {\r\n            this.selectedItem.path.length = 0;\r\n\r\n            if (this.context.crumbItems) {\r\n                this.selectedItem.path.push(...this.context.crumbItems);\r\n            }\r\n        }\r\n\r\n        this.config.returnData = {\r\n            selectedItem: this.selectedItem,\r\n            selectedFromRecent: this._recentItemSelected,\r\n            recentContextString: this.context.recentContextString\r\n        };\r\n    }\r\n}\r\n","<div class=\"dialog hierarchy\">\r\n    <div class=\"dialog-content\">\r\n        <div class=\"content-recents\">\r\n            <div class=\"hierarchy-dialog-items-container\" k2-scrollbar *ngIf=\"!context.hideRecents\">\r\n                <div class=\"hierarchy-dialog-header\">\r\n                    <label>{{getFromResx(\"Resources\", \"Recents\") | async}}</label>\r\n                </div>\r\n                <div class=\"hierarchy-dialog-recent-item\"\r\n                     *ngFor=\"let item of context.recentItems\"\r\n                     (click)=\"recentItemClicked(item)\"\r\n                     (dblclick)=\"recentItemDblClicked(item)\"\r\n                     [ngClass]=\"{'selected' : item === selectedItem}\">\r\n                    <div class=\"hierarchy-dialog-recent-item-icon sprite-no-icon16 {{item.spriteClass}}\"\r\n                         [ngClass]=\"{'selected': item === selectedItem}\"></div>\r\n                    <div class=\"hierarchy-dialog-recent-item-text\">{{item.title}}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"content-items\">\r\n            <div class=\"hierarchy-dialog-items-breadcrumb-container\">\r\n                <k2-bread-crumb [hideSearch]=\"true\"\r\n                                (onCrumbItemSelected)=\"onCrumbItemSelected($event)\"\r\n                                [crumbItems]=\"context.crumbItems\"\r\n                                [searchText]=\"searchText\"\r\n                                [selectedItem]=\"crumbToAdd\"\r\n                                (searchTextChanged)=\"onSearch()\">\r\n                </k2-bread-crumb>\r\n            </div>\r\n            <div class=\"hierarchy-dialog-states\" *ngIf=\"context.stateConfiguration?.state && context.stateConfiguration.state !== state.normal\">\r\n                <k2-popup-states [stateConfiguration]=\"context.stateConfiguration\"></k2-popup-states>\r\n            </div>\r\n            <div class=\"container-wrapper h-100\" *ngIf=\"context.stateConfiguration?.state === 'normal' && context?.listItems\">\r\n                <div class=\"container-wrapper-inner\">\r\n                    <div class=\"hierarchy-dialog-items-container scrollme\" k2-scrollbar horizontal=\"true\">\r\n                        <ul class=\"hierarchy-item-container\">\r\n                            <ng-container *ngFor=\"let item of context.listItems\">\r\n                                <li class=\"hierarchy-list-item\" [ngClass]=\"{ 'selected' : item === selectedItem }\"\r\n                                    (dblclick)=\"item.selectable === true ? listItemClicked(item) : listItemDblClicked(item)\"\r\n                                    (click)=\"item.selectable === true ? selectListItem(item) : listItemClicked(item)\">\r\n                                    <div class=\"item-wrapper\">\r\n                                        <i class=\"items-container-item-icon sprite-no-icon16 {{item.spriteClass}}\"\r\n                                           [ngClass]=\"{'selected': item === selectedItem}\"></i>\r\n                                        <div [ngClass]=\"{ 'with-items-container-item-button' : item.selectable === true }\" class=\"items-container-item-text\"\r\n                                             k2-tooltip-basic [ng-style]=\"{'width': context.listItems.length <= 14 ? 'unset' : '200px'}\">\r\n                                            {{item.title}}\r\n                                        </div>\r\n                                    </div>\r\n                                </li>\r\n                            </ng-container>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { IDataField } from '../../../../../types/models/data-field/i-data-field';\r\nimport { INewDataFieldContext } from '../../../../../types/models/popup/i-new-datafield-context';\r\nimport { IContextPopupConfiguration } from '../../../../../types/uiComponents/pluginWizards/i-context-popup-configuration';\r\nimport { DataTypeResolverService } from '../../../../services/plugins/data-type-resolver/data-type-resolver.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { BaseResourceComponent } from '../../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-data-field-popup-header',\r\n    templateUrl: './data-field-popup-header.component.html',\r\n    styleUrls: ['./data-field-popup-header.component.less']\r\n})\r\nexport class DataFieldPopupHeaderComponent extends BaseResourceComponent implements OnInit {\r\n\r\n    @Output() onDialogClosed = new EventEmitter<void>();\r\n    @Input() config: IContextPopupConfiguration;\r\n    dataField: IDataField;\r\n\r\n    public dataFieldIcon: string;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        private dataTypeResolver: DataTypeResolverService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.dataField = (this.config.context as INewDataFieldContext)\r\n            .existingDataField;\r\n        this.dataFieldIcon = this.dataTypeResolver.getSpriteClassFromDataType(this.dataField.type.toString());\r\n    }\r\n\r\n    /**Emits the dialogClosed event so that\r\n     * components using this header can call the host's dialogClosed functionality when triggered.\r\n     * */\r\n    public emitDialogClosed(): void {\r\n        this.onDialogClosed.emit();\r\n    }\r\n}\r\n","<div class=\"header-icon\">\r\n    <div class=\"new-datafield-type\" data-k2-disable-right-click=\"\">\r\n        <i class=\"header-dd datafield-icon icon icon-size16 icon-set-datatypes ic-{{dataFieldIcon}}\"></i>\r\n    </div>\r\n</div>\r\n<div class=\"header-content\">\r\n    <div class=\"header-text\" title=\"{{dataField.title}}\">{{dataField.title}}</div>\r\n    <label>{{getFromResx('Workflow', 'popup_newDataField_label_scope')|async}}</label>\r\n</div>\r\n<div class=\"header-close\" (click)=\"emitDialogClosed()\">\r\n    <i class=\"icon icon-set-steps icon-size16 ic-headerclose\"></i>\r\n</div>\r\n","import { Component, Inject, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { IDataField } from '../../../../types/models/data-field/i-data-field';\r\nimport { INewDataFieldContext } from '../../../../types/models/popup/i-new-datafield-context';\r\nimport { IPopupButton } from '../../../../types/models/popup/i-popup-button';\r\nimport { IListItemIconData } from '../../../../types/uiComponents/list-item/i-list-item-icon-data';\r\nimport { IContextPopupConfiguration } from '../../../../types/uiComponents/pluginWizards/i-context-popup-configuration';\r\nimport { EventNotifierService } from '../../../services/event-notifier/event-notifier.service';\r\nimport { DataTypeResolverService } from '../../../services/plugins/data-type-resolver/data-type-resolver.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\nimport { popup } from '../../../shared/constants/wizard-popup';\r\nimport { ChooseControlTypes } from '../../../shared/enums/choose-control/choose-control-types';\r\nimport { DropDownMenuAlignment } from '../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropDownMenuTrianglePosition } from '../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { DataFieldTypes } from '../../../shared/enums/model/workflow/process/data-field-types';\r\nimport { TextBoxConstraint } from '../../../shared/enums/text-box/text-box-constraint';\r\nimport { showDatePicker } from '../../../shared/utils/date-picker';\r\nimport { shortUid } from '../../../shared/utils/general';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\n\r\n\r\n@Component({\r\n    selector: 'k2-new-data-field',\r\n    templateUrl: './new-data-field.component.html',\r\n    styleUrls: ['./new-data-field.component.less']\r\n})\r\nexport class NewDataFieldComponent extends BaseResourceComponent implements OnInit, OnDestroy {\r\n    @Input() config: IContextPopupConfiguration;\r\n\r\n    //Enums\r\n    public dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    public dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    public chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n    public textBoxConstraint: typeof TextBoxConstraint = TextBoxConstraint;\r\n    public dataFieldTypes: typeof DataFieldTypes = DataFieldTypes;\r\n\r\n    //Generated unique ids for the choose controls\r\n    public hiddenId: string = shortUid();\r\n    public onDemandId: string = shortUid();\r\n    public auditId: string = shortUid();\r\n    public sharedId: string = shortUid();\r\n    public rdbTrueId: string = shortUid();\r\n    public rdbFalseId: string = shortUid();\r\n    public emptyValueId: string = shortUid();\r\n\r\n    public dropDownItems: IDropDownMenuItem[];\r\n    public hover = false;\r\n    public rightIconData: IListItemIconData = {\r\n        customClassFlexRow: 'list-item-icons',\r\n        iconClass: 'icon icon-set-datatypes icon-size16 ic-datetime fdatepicker',\r\n        isVertical: true,\r\n        isWrappedInContentDiv: true\r\n    };\r\n\r\n    //Javascript root element (the main taskConditionBlock element)\r\n    private closingEventSubscription: Subscription;\r\n    private rePositionSubscription: Subscription;\r\n\r\n    constructor(@Inject(UndoRedoServiceToken) private undoRedoService,\r\n        protected resourceService: ResourceService,\r\n        private dataTypeResolver: DataTypeResolverService,\r\n        private eventService: EventNotifierService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.dataField.title = this.dataField.title || '';\r\n        this.dataField.description = this.dataField.description || '';\r\n        this.config.returnData = this.dataField;\r\n\r\n        /*  Older builds would determine if the 'Empty Value' checkbox should be checked based on whether or not the Intial Value field was empty.\r\n            New builds use a specific isEmptyValue property and persist the checkbox selection regardless of whether or not the initial value field has a value.\r\n            See Bug 824517\r\n        */\r\n        this.dataField.manuallySetEmptyCheckbox = true;\r\n\r\n        this.buildTypeDropDownItems();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.rePositionSubscription?.unsubscribe();\r\n    }\r\n\r\n    get dataField(): IDataField {\r\n        return (this.config.context as INewDataFieldContext).existingDataField;\r\n    }\r\n\r\n    set dataField(val) {\r\n        (this.config.context as INewDataFieldContext).existingDataField = val;\r\n        this.config.returnData = val;\r\n    }\r\n\r\n    getTypeTitle(): string {\r\n        let typeTitle = '';\r\n        switch (this.dataField.type) {\r\n            case DataFieldTypes.yesNo:\r\n                typeTitle = this.resourceService.getString('workflow_dataFieldType_yesNo'); break;\r\n            case DataFieldTypes.dateTime:\r\n                typeTitle = this.resourceService.getString('workflow_dataFieldType_dateTime'); break;\r\n            case DataFieldTypes.decimal:\r\n                typeTitle = this.resourceService.getString('workflow_dataFieldType_decimal'); break;\r\n            case DataFieldTypes.number:\r\n                typeTitle = this.resourceService.getString('workflow_dataFieldType_number'); break;\r\n            default:\r\n                typeTitle = this.resourceService.getString('workflow_dataFieldType_string');\r\n        }\r\n        return typeTitle;\r\n    }\r\n\r\n    getIconFromType(): string {\r\n        return this.dataTypeResolver.getSpriteClassFromDataType(this.dataField.type.toString());\r\n    }\r\n\r\n    onTypeDropDownItemSelected(item: IDropDownMenuItem): void {\r\n        if (this.dataField.type !== parseInt(item.key)) {\r\n            this.dataField.type = parseInt(item.key);\r\n\r\n            this.dataField.isEmptyValue = true;\r\n            this.dataField.isXMLDataField = false;\r\n\r\n            //Set default values for dataField type-values:\r\n            this.dataField.stringValue = undefined;\r\n            this.dataField.numberValue = undefined;\r\n            this.dataField.boolValue = undefined;\r\n            this.dataField.dateTimeValue = undefined;\r\n            this.dataField.schema = undefined;\r\n\r\n            switch (item.key) {\r\n                case DataFieldTypes.number.toString():\r\n                case DataFieldTypes.decimal.toString():\r\n                    this.dataField.numberValue = 0;\r\n                    break;\r\n                case DataFieldTypes.yesNo.toString():\r\n                    this.dataField.boolValue = false;\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private buildTypeDropDownItems(): void {\r\n        const types = this.dataTypeResolver.getDataFieldTypesList();\r\n        this.dropDownItems = [];\r\n\r\n        if (types) {\r\n            for (let i = 0; i < types.length; i++) {\r\n                const sprite = this.dataTypeResolver.getSpriteClassFromDataType(types[i].key.toString());\r\n                const dropDownItem: IDropDownMenuItem = {\r\n                    key: types[i].key.toString(),\r\n                    title: types[i].title,\r\n                    icon: 'icon-set-datatypes ic-' + sprite,\r\n                    isSelected: this.dataField.type == types[i].key\r\n                };\r\n\r\n                this.dropDownItems.push(dropDownItem);\r\n            }\r\n        }\r\n    }\r\n\r\n    //Sets the values to default.\r\n    public OnEmptyValueSelect(val: boolean): void {\r\n        if (!val) return;\r\n        switch (this.dataField.type.toString()) {\r\n            case DataFieldTypes.string.toString():\r\n                this.dataField.stringValue = '';\r\n                break;\r\n            case DataFieldTypes.number.toString():\r\n                this.dataField.numberValue = 0;\r\n                break;\r\n            case DataFieldTypes.decimal.toString():\r\n                this.dataField.numberValue = 0;\r\n                break;\r\n            case DataFieldTypes.yesNo.toString():\r\n                this.dataField.boolValue = false;\r\n                break;\r\n            case DataFieldTypes.dateTime.toString():\r\n                this.dataField.dateTimeValue = undefined;\r\n                break;\r\n        }\r\n    }\r\n\r\n    openCalendarControl(eventTarget: EventTarget): void {\r\n        showDatePicker(eventTarget, (ev) => {\r\n            this.undoRedoService.enabledAndBeginUndoGroupWithMarkerAndFinish('--newDataFieldController: change timer date--');\r\n\r\n            this.dataField.dateTimeValue = ev.formatted;\r\n        });\r\n    }\r\n}\r\n","<div class=\"row\">\r\n    {{getFromResx('Wizards', 'wizard_ActivitySettings_Title')|async}}\r\n    <div class=\"content-row-separator\"></div>\r\n\r\n    <k2-input class=\"k2-control control-background\"\r\n              [(value)]=\"dataField.title\"\r\n              [maxLength]=\"50\"\r\n              [validationTypes]=\"['DataField']\"></k2-input>\r\n</div>\r\n<div class=\"row\">\r\n    {{getFromResx('Workflow', 'popup_newDataField_label_datatype')|async}}\r\n    <div class=\"content-row-separator\"></div>\r\n    <k2-drop-down class=\"k2-dropdown-parent\"\r\n                  [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                  [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                  [menuItems]=\"dropDownItems\"\r\n                  (onItemSelected)=\"onTypeDropDownItemSelected($event)\"\r\n                  [isMultiSelect]=\"false\"\r\n                  [selectedItemKey]=\"1\">\r\n\r\n        <div class=\"k2-dd-flexChild k2-dd-rowParent k2-dd-container k2-control control-background k2-dropdown-div\"\r\n             (mouseenter)=\"hover = true\"\r\n             (mouseleave)=\"hover = false\">\r\n            <div class=\"k2-dd-icon\">\r\n                <span class=\"header-dd icon icon-size16 icon-set-datatypes ic-{{getIconFromType()}}\"></span>\r\n            </div>\r\n            <div class=\"k2-dd-flexChild k2-dd-text\">{{getTypeTitle()}}</div>\r\n            <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\" [ngClass]=\"{ 'hover' : hover }\"></span>\r\n            </div>\r\n        </div>\r\n    </k2-drop-down>\r\n</div>\r\n<div class=\"row\">\r\n    {{getFromResx('Workflow', 'popup_newDataField_label_description')|async}}\r\n    <k2-input class=\"k2-control control-background\"\r\n              [(value)]=\"dataField.description\"\r\n              [maxLength]=\"50\"\r\n              [alwaysHideBadge]=\"true\"></k2-input>\r\n</div>\r\n<div class=\"clear-twenty\"></div>\r\n<div class=\"row\">\r\n    <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                          [displayText]=\"getFromResx('Workflow', 'popup_newDataField_label_empty_value')|async\"\r\n                          [(checked)]=\"dataField.isEmptyValue\"\r\n                          [modelValue]=\"dataField.isEmptyValue\"\r\n                          [id]=\"emptyValueId\"\r\n                          name=\"Group1\">\r\n    </k2-choose-control-v2>\r\n</div>\r\n<div class=\"clear-ten\"></div>\r\n<div class=\"row\" data-type=\"dataField.type\" [ngClass]=\"{'is-disabled':dataField.isEmptyValue}\">\r\n    <div class=\"row\"\r\n         *ngIf=\"dataField.type === dataFieldTypes.string\">\r\n        <label>{{getFromResx('Workflow', 'popup_newDataField_label_initial_value')|async}}</label>\r\n        <k2-input class=\"k2-control control-background\"\r\n                  [(value)]=\"dataField.stringValue\"\r\n                  [maxLength]=\"50\"\r\n                  [alwaysHideBadge]=\"true\"\r\n                  [isDisabled]=\"dataField.isEmptyValue\"\r\n                  [isReadOnly]=\"dataField.isEmptyValue\">\r\n        </k2-input>\r\n    </div>\r\n    <div class=\"row\"\r\n         *ngIf=\"dataField.type === dataFieldTypes.decimal || dataField.type === dataFieldTypes.number\"\r\n         [ngClass]=\"{'is-disabled':dataField.isEmptyValue}\">\r\n        <label>{{getFromResx('Workflow', 'popup_newDataField_label_initial_value')|async}}</label>\r\n        <k2-input [(value)]=\"dataField.numberValue\"\r\n                  [maxLength]=\"50\"\r\n                  [alwaysHideBadge]=\"true\"\r\n                  [isDisabled]=\"dataField.isEmptyValue\"\r\n                  [isReadOnly]=\"dataField.isEmptyValue\"\r\n                  k2-allow-drop=\"false\">\r\n        </k2-input>\r\n    </div>\r\n\r\n    <div class=\"row\" *ngIf=\"dataField.type === dataFieldTypes.yesNo\"\r\n         [ngClass]=\"{'is-disabled':dataField.isEmptyValue}\"\r\n         [disabled]=\"dataField.isEmptyValue\">\r\n        <label>{{getFromResx('Workflow', 'popup_newDataField_label_initial_value')|async}}</label>\r\n        <div>\r\n            <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                  [displayText]=\"getFromResx('Workflow', 'popup_newDataField_label_value_true')|async\"\r\n                                  [(checked)]=\"dataField.boolValue\"\r\n                                  [id]=\"rdbTrueId\"\r\n                                  name=\"rdbBoolType\">\r\n            </k2-choose-control-v2>\r\n        </div>\r\n        <div>\r\n            <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                  [displayText]=\"getFromResx('Workflow', 'popup_newDataField_label_value_false')|async\"\r\n                                  [checked]=\"!dataField.boolValue\"\r\n                                  [id]=\"rdbFalseId\"\r\n                                  name=\"rdbBoolType\">\r\n            </k2-choose-control-v2>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"row\" *ngIf=\"dataField.type === dataFieldTypes.dateTime\"\r\n         [ngClass]=\"{'is-disabled':dataField.isEmptyValue}\"\r\n         [disabled]=\"dataField.isEmptyValue\">\r\n        <label>{{getFromResx('Workflow', 'popup_newDataField_label_initial_value')|async}}</label>\r\n        <k2-list-item customClass=\"date-picker-relative\"\r\n                      [isDisabled]=\"dataField.isEmptyValue\"\r\n                      [isEditable]=\"!dataField.isEmptyValue\"\r\n                      [shouldAllowDrop]=\"false\"\r\n                      [listItemModel]=\"dataField\"\r\n                      textProperty=\"dateTimeValue\"\r\n                      [watermark]=\"getString('textbox_watermark_select')\"\r\n                      [textBoxConstraint]=\"textBoxConstraint.DropSelect\"\r\n                      [rightIconData]=\"rightIconData\"\r\n                      (rightIconClicked)=\"openCalendarControl($event)\"\r\n                      [isToggleEnabled]=\"true\"\r\n                      [shouldAlwaysHideBadge]=\"true\">\r\n        </k2-list-item>\r\n    </div>\r\n</div>\r\n<div class=\"clear-twenty\"></div>\r\n<div class=\"row seperator\"></div>\r\n<div class=\"clear-twenty\"></div>\r\n<div class=\"row horizontal\">\r\n    <div class=\"icon\">\r\n        <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                              [displayText]=\"\"\r\n                              [(checked)]=\"dataField.hidden\"\r\n                              [modelValue]=\"dataField.hidden\"\r\n                              [id]=\"hiddenId\"\r\n                              name=\"hiddenCb\">\r\n        </k2-choose-control-v2>\r\n    </div>\r\n    <div class=\"tenex\">\r\n        <div class=\"clear-ten\"></div>\r\n        <div class=\"tenex-icon\"><i class=\"icon icon-set-setsettings icon-size24 ic-reportsettings checkbox-image\"></i></div>\r\n        <div class=\"clear-ten\"></div>\r\n        <div class=\"text\">\r\n            <label class=\"checkbox-description-main\">{{getFromResx('Workflow', 'popup_newDataField_label_hidden')|async}}</label>\r\n            <div class=\"checkbox-description-sub\">{{getFromResx('Workflow', 'popup_newDataField_label_hidden_sub')|async}}</div>\r\n        </div>\r\n        <div class=\"clear-ten\"></div>\r\n    </div>\r\n</div>\r\n<div class=\"clear-ten\"></div>\r\n<div class=\"row horizontal\">\r\n    <div class=\"icon\">\r\n        <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                              [displayText]=\"\"\r\n                              [(checked)]=\"dataField.onDemand\"\r\n                              [modelValue]=\"dataField.onDemand\"\r\n                              [id]=\"onDemandId\"\r\n                              name=\"onDemandCb\">\r\n        </k2-choose-control-v2>\r\n    </div>\r\n    <div class=\"tenex\">\r\n        <div class=\"clear-ten\"></div>\r\n        <div class=\"tenex-icon\"><i class=\"icon icon-set-setsettings icon-size24 ic-fieldssettings checkbox-image\"></i></div>\r\n        <div class=\"clear-ten\"></div>\r\n        <div class=\"text\">\r\n            <label class=\"checkbox-description-main\">{{getFromResx('Workflow', 'popup_newDataField_label_on_demand')|async}}</label>\r\n            <div class=\"checkbox-description-sub\">{{getFromResx('Workflow', 'popup_newDataField_label_on_demand_sub')|async}}</div>\r\n        </div>\r\n        <div class=\"clear-ten\"></div>\r\n    </div>\r\n</div>\r\n<div class=\"clear-ten\"></div>\r\n<div class=\"row horizontal\">\r\n    <div class=\"icon\">\r\n        <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                              [displayText]=\"\"\r\n                              [(checked)]=\"dataField.audit\"\r\n                              [modelValue]=\"dataField.audit\"\r\n                              [id]=\"auditId\"\r\n                              name=\"auditCb\">\r\n        </k2-choose-control-v2>\r\n    </div>\r\n    <div class=\"tenex\">\r\n        <div class=\"clear-ten\"></div>\r\n        <div class=\"tenex-icon\"><i class=\"icon icon-set-setsettings icon-size24 ic-settingssettings checkbox-image\"></i></div>\r\n        <div class=\"clear-ten\"></div>\r\n        <div class=\"text\">\r\n            <label class=\"checkbox-description-main\">{{getFromResx('Workflow', 'popup_newDataField_label_on_audit')|async}}</label>\r\n            <div class=\"checkbox-description-sub\">{{getFromResx('Workflow', 'popup_newDataField_label_on_audit_sub')|async}}</div>\r\n        </div>\r\n        <div class=\"clear-ten\"></div>\r\n    </div>\r\n</div>\r\n<div class=\"clear-ten hide\"></div>\r\n<div class=\"row horizontal hide\">\r\n    <div class=\"icon\">\r\n        <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                              [displayText]=\"\"\r\n                              [(checked)]=\"dataField.shared\"\r\n                              [modelValue]=\"dataField.shared\"\r\n                              [id]=\"sharedId\"\r\n                              name=\"sharedCb\">\r\n        </k2-choose-control-v2>\r\n    </div>\r\n    <div class=\"tenex\">\r\n        <div class=\"clear-ten\"></div>\r\n        <div class=\"tenex-icon\"><i class=\"icon icon-set-setsettings icon-size24 ic-referencessettings checkbox-image bigger-box-item\"></i></div>\r\n        <div class=\"clear-ten\"></div>\r\n        <div class=\"text\">\r\n            <label class=\"checkbox-description-main\">{{getFromResx('Workflow', 'popup_newDataField_label_on_shared')|async}}</label>\r\n            <div class=\"checkbox-description-sub\">{{getFromResx('Workflow', 'popup_newDataField_label_on_shared_sub')|async}}</div>\r\n        </div>\r\n        <div class=\"clear-ten\"></div>\r\n    </div>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { PopupConfigStates } from '../../../shared/enums/popup/popup-config-states';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-popup-states',\r\n    templateUrl: './popup-states.component.html',\r\n    styleUrls: ['./popup-states.component.less']\r\n})\r\nexport class PopupStatesComponent extends BaseResourceComponent implements OnInit {\r\n    @Input() stateConfiguration: any;\r\n\r\n    get misconfigured(): boolean {\r\n        return this.stateConfiguration?.state == PopupConfigStates.misconfigured;\r\n    }\r\n    get loading(): boolean {\r\n        return this.stateConfiguration?.state == PopupConfigStates.loading;\r\n    }\r\n    get oAuthError(): boolean {\r\n        return this.stateConfiguration?.state == PopupConfigStates.oautherror;\r\n    }\r\n    get error(): boolean {\r\n        return this.stateConfiguration?.state == PopupConfigStates.error;\r\n    }\r\n    get normal(): boolean {\r\n        return this.stateConfiguration?.state == PopupConfigStates.normal;\r\n    }\r\n\r\n    constructor(resourceService: ResourceService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n}\r\n","<div class=\"state\" *ngIf=\"stateConfiguration?.state && !normal\">\r\n    <div class=\"state-icon padding-bottom\">\r\n        <ng-container *ngIf=\"error || misconfigured || oAuthError\">\r\n            <span class=\"icon icon-set-badges icon-size64\" [class.ic-errorbadge]=\"!misconfigured\" [class.ic-misconfiguredbadge]=\"misconfigured\"></span>\r\n            <div class=\"state-icon-heading\">{{getFromResx(\"Wizards\", \"popup_state_oops\")| async}}</div>\r\n        </ng-container>\r\n        <k2-spinner *ngIf=\"loading\" classNames=\"popup-state\" [inline]=\"true\" [overlay]=\"false\" [visible]=\"true\"></k2-spinner>\r\n    </div>\r\n\r\n    <div class=\"padding-bottom\" [class.error-message]=\"error || oAuthError\"\r\n         *ngIf=\"stateConfiguration.message && stateConfiguration.message.length > 0\"\r\n         [innerHTML]=\"stateConfiguration.message\">\r\n    </div>\r\n\r\n    <ng-container *ngIf=\"stateConfiguration.actionButtons?.length\">\r\n        <div class=\"button-padding-bottom\" *ngFor=\"let button of stateConfiguration.actionButtons; let $first = first\">\r\n            <button class=\"button\"\r\n                    type=\"button\"\r\n                    [class.secondary]=\"!$first\"\r\n                    [class.hidden]=\"!button.visible\"\r\n                    (click)=\"button.onClick?.emit(button)\"\r\n                    [innerHTML]=\"button.text\">\r\n            </button>\r\n            <div class=\"error-message-explained padding-top\" *ngIf=\"$first && oAuthError\">\r\n                {{getFromResx(\"Wizards\", \"popup_oAuthError_explained\")| async}}\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</div>\r\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnInit, TemplateRef, ViewChild } from '@angular/core';\r\nimport { IPopupButton } from '../../../types/models/popup/i-popup-button';\r\nimport { INotificationService } from '../../../types/services/notification/i-notification.service';\r\nimport { IValidationService } from '../../../types/services/validation/ivalidation.service';\r\nimport { IContextPopupConfiguration } from '../../../types/uiComponents/pluginWizards/i-context-popup-configuration';\r\nimport { NotificationServiceToken } from '../../services/notification/notification-service-factory';\r\nimport { PopupService } from '../../services/popup/popup.service';\r\nimport { ResourceService } from '../../services/resource/resource.service';\r\nimport { ValidationServiceToken } from '../../services/validation/validation-service-factory';\r\nimport { keyCodes } from '../../shared/constants/general';\r\nimport { popup } from '../../shared/constants/wizard-popup';\r\nimport { ToastrTypes } from '../../shared/enums/model/toastr-types';\r\nimport { PopupHeaderTemplate } from '../../shared/enums/popup/popup-header-template';\r\nimport { PopupTemplate } from '../../shared/enums/popup/popup-template';\r\nimport { BaseResourceComponent } from '../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-popup',\r\n    templateUrl: './popup.component.html',\r\n    styleUrls: ['./popup.component.less']\r\n})\r\nexport class PopupComponent extends BaseResourceComponent implements OnInit {\r\n    @Input() config: IContextPopupConfiguration;\r\n\r\n    selectedHeaderTemplate: TemplateRef<any>;\r\n    selectedFooterTemplate: TemplateRef<any>;\r\n\r\n    popupTemplates = PopupTemplate;\r\n\r\n    @ViewChild('dataFieldHeader') dataFieldHeaderTemplate: TemplateRef<any>;\r\n    @ViewChild('wiz') wizard: ElementRef<HTMLElement>;\r\n    @ViewChild('header') header: ElementRef<HTMLElement>;\r\n    @ViewChild('footer') footer: ElementRef<HTMLElement>;\r\n\r\n    constructor(private _popupService: PopupService,\r\n        @Inject(ValidationServiceToken) private validationService: IValidationService,\r\n        @Inject(NotificationServiceToken) private notificationService: INotificationService,\r\n        resourceService: ResourceService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.config?.headerTemplate) {\r\n            switch (this.config.headerTemplate) {\r\n                case PopupHeaderTemplate.dataField:\r\n                    this.selectedHeaderTemplate = this.dataFieldHeaderTemplate;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        if (this.config?.buttons) {\r\n            for (const button in this.config.buttons) {\r\n                if (!(this.config.buttons[button].onClick instanceof EventEmitter)) {\r\n                    this.config.buttons[button].onClick = new EventEmitter<IPopupButton>();\r\n                }\r\n            }\r\n        }\r\n        this.config.closeEvent = new EventEmitter<IPopupButton>();\r\n    }\r\n\r\n    onKeyDown(e: KeyboardEvent): void {\r\n        if (e.keyCode === keyCodes.ENTER) {\r\n            const okButton: IPopupButton = this.config.buttons.okButton;\r\n\r\n            if (okButton && okButton.enabled === true) {\r\n                this.buttonClicked(okButton);\r\n            }\r\n        } else if (e.keyCode === keyCodes.ESCAPE) {\r\n            this.dialogClosed();\r\n        }\r\n    }\r\n\r\n    dialogClosed() {\r\n        this.config.closeEvent.emit({ key: popup.buttons.topRightClose, dismissResult: popup.buttons.cancelResult });\r\n        this._popupService.hide('', this.config);\r\n    }\r\n\r\n    buttonClicked(button: IPopupButton) {\r\n        const res = true;\r\n        let validationFailed = false;\r\n        let validationResults: sourceCode.k2Designer.objectModel.core.model.IErrorInformation[];\r\n\r\n        if (button.invokeValidation === true) {\r\n            this.validationService.overrideEnabled = true;\r\n            validationResults = this.validationService.evaluate([this.config.validationContext], this.config.validationModel);\r\n            validationFailed = validationResults.length > 0;\r\n        }\r\n        this.validationService.overrideEnabled = false;\r\n\r\n        if (validationFailed === false) {\r\n            button.onClick.emit(button);\r\n\r\n            if (button.dismissResult != null && button.dismissResult.length > 0 && res) {\r\n                this.config.closeEvent.emit(button);\r\n                this._popupService.hide(button.dismissResult, this.config);\r\n            }\r\n        } else {\r\n            //validation failed upon clicking OK button. Display the error messages.\r\n            for (let i = 0, len = validationResults.length; i < len; i++) {\r\n                const validationResult: any = validationResults[i].getJson();\r\n                const errorMessageKey: string = validationResult.errorMessage;\r\n\r\n                this.notificationService.toastr('', this.getString(errorMessageKey), ToastrTypes.error, 2000);\r\n            }\r\n        }\r\n    }\r\n}\r\n","<ng-template #dataFieldHeader>\r\n    <k2-data-field-popup-header [config]=\"config\" (onDialogClosed)=\"dialogClosed()\" class=\"mast settings-header\"></k2-data-field-popup-header>\r\n</ng-template>\r\n<ng-template #defaultHeader>\r\n    <div class=\"mast\">\r\n        <div class=\"header-content\">\r\n            <label [innerHTML]=\"config.heading\"></label>\r\n        </div>\r\n        <div class=\"header-close\" (click)=\"dialogClosed()\"><i class=\"icon icon-set-steps icon-size16 ic-headerclose\"></i></div>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #defaultFooter>\r\n    <ng-container *ngIf=\"config.buttons\">\r\n        <ng-container *ngFor=\"let button of config.buttons | keyvalue\">\r\n            <button *ngIf=\"button.value?.visible\" class=\"button\"\r\n                    [ngClass]=\"{'is-disabled' : button.value.enabled === false,\r\n\t\t                'left-button': button.value.showLeft,\r\n\t\t                'secondary': button.value.buttonStyleType === 2,\r\n\t\t                'tertiary': button.value.buttonStyleType === 3}\"\r\n                    type=\"button\" (click)=\"buttonClicked(button.value)\">\r\n                <span [innerHTML]=\"button.value.text\"></span>\r\n            </button>\r\n        </ng-container>\r\n    </ng-container>\r\n</ng-template>\r\n\r\n<div class=\"k2-modal show\">\r\n    <div class=\"k2-dialog\">\r\n        <div class=\"field-settings-wizard {{config.type}}\" [style.height.px]=\"config.height\" [style.width.px]=\"config.width\" #wiz>\r\n            <div class=\"header\" #header>\r\n                <ng-container *ngTemplateOutlet=\"selectedHeaderTemplate || defaultHeader\"></ng-container>\r\n            </div>\r\n            <hr class=\"horizontal-rule flat\" />\r\n\r\n            <div class=\"body\" [ngSwitch]=\"config.template\" [style.height.px]=\"config.bodyHeight\" [style.width.px]=\"config.bodyWidth\">\r\n                <k2-action-popup class=\"h-100 action-popup\" [config]=\"config\" (buttonClicked)=\"buttonClicked($event)\" *ngSwitchCase=\"popupTemplates.actionPopup\"></k2-action-popup>\r\n                <k2-category-dialog class=\"contents\" [config]=\"config\" (overrideOnButtonClicked)=\"overrideOnButtonClicked\" *ngSwitchCase=\"popupTemplates.categoryDialog\"></k2-category-dialog>\r\n                <k2-delete-process class=\"contents\" [config]=\"config\" (overrideOnKeyDown)=\"overrideOnKeyDown($event)\" (overrideOnClosing)=\"overrideOnClosing($event)\" (overrideOnButtonClicked)=\"overrideOnButtonClicked\" *ngSwitchCase=\"popupTemplates.deleteProcess\"></k2-delete-process>\r\n                <k2-new-data-field [config]=\"config\" class=\"settings-body h-100\" (overrideOnKeyDown)=\"overrideOnKeyDown($event)\" (overrideOnClosing)=\"overrideOnClosing($event)\" (overrideOnButtonClicked)=\"overrideOnButtonClicked\" *ngSwitchCase=\"popupTemplates.newDataField\"></k2-new-data-field>\r\n                <k2-hierarchy-dialog class=\"contents\" [config]=\"config\" (overrideOnKeyDown)=\"overrideOnKeyDown($event)\" (overrideOnClosing)=\"overrideOnClosing($event)\" (overrideOnButtonClicked)=\"overrideOnButtonClicked\" *ngSwitchCase=\"popupTemplates.hierarchyDialog\"></k2-hierarchy-dialog>\r\n                <k2-user-dialog class=\"h-100\" [config]=\"config\" (overrideOnKeyDown)=\"overrideOnKeyDown($event)\" (overrideOnClosing)=\"overrideOnClosing($event)\" *ngSwitchCase=\"popupTemplates.userDialog\"></k2-user-dialog>\r\n                <k2-choose-create-change-outcome class=\"h-100\" [config]=\"config\" (overrideOnKeyDown)=\"overrideOnKeyDown($event)\" (overrideOnClosing)=\"overrideOnClosing($event)\" *ngSwitchCase=\"popupTemplates.chooseCreateChangeOutcome\"></k2-choose-create-change-outcome>\r\n                <k2-save-smart-field-choose-dialog class=\"h-100\" [config]=\"config\" (overrideOnKeyDown)=\"overrideOnKeyDown($event)\" (overrideOnClosing)=\"overrideOnClosing($event)\" *ngSwitchCase=\"popupTemplates.saveSmartFieldChooseDialog\"></k2-save-smart-field-choose-dialog>\r\n            </div>\r\n\r\n            <hr class=\"horizontal-rule flat\" *ngIf=\"config.showFooter !== false\" />\r\n            <div class=\"footer\" *ngIf=\"config.showFooter !== false\" #footer>\r\n                <div class=\"hull {{config.footerCssClass}}\" [ngStyle]=\"config?.hull?.style\">\r\n                    <ng-container *ngTemplateOutlet=\"selectedFooterTemplate || defaultFooter\"></ng-container>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { DataTypeResolverService } from 'src/app/services/plugins/data-type-resolver/data-type-resolver.service';\r\nimport { popup } from 'src/app/shared/constants/wizard-popup';\r\nimport { IContextWizardPopupConfiguration } from 'src/types/uiComponents/pluginWizards/i-context-wizard-popup-configuration';\r\nimport { ISmartFieldContext } from 'src/types/uiComponents/pluginWizards/i-smart-field-context';\r\nimport { IDataField } from '../../../../types/models/data-field/i-data-field';\r\nimport { PopupService } from '../../../services/popup/popup.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-save-smart-field-choose-dialog',\r\n    templateUrl: './save-smart-field-choose-dialog.component.html',\r\n    styleUrls: ['./save-smart-field-choose-dialog.component.less']\r\n})\r\nexport class SaveSmartFieldChooseDialogComponent extends BaseResourceComponent implements OnInit {\r\n    @Input() public config: IContextWizardPopupConfiguration;\r\n\r\n    public selectedItemTitle: string;\r\n\r\n    public objectList: IDataField[];\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        private popupService: PopupService,\r\n        private dataTypeResolverService: DataTypeResolverService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        const smartFieldContext = this.config.context as ISmartFieldContext;\r\n        if (smartFieldContext.selectedItem) {\r\n            this.selectedItemTitle = smartFieldContext.selectedItem[smartFieldContext.titleProperty || 'title'];\r\n            this.setReturnData();\r\n        } else {\r\n            this.selectNone();\r\n        }\r\n\r\n        this.objectList = smartFieldContext.contextObjectList.filter((field) => !field.systemField); // dont include system fields in display list\r\n\r\n        if (!this.objectList || this.objectList.length === 0) {\r\n            this.config.returnData =\r\n            {\r\n                selectedReference: null,\r\n                isNewReference: false\r\n            };\r\n        }\r\n    }\r\n\r\n    public selectNone(): void {\r\n        this.selectedItemTitle = '';\r\n        (<any>this.config.context).selectedItem = null;\r\n        this.setReturnData();\r\n    }\r\n\r\n    public selectItem(selectedItem: any): void {\r\n        const smartFieldContext = this.config.context as ISmartFieldContext;\r\n        smartFieldContext.selectedItem = selectedItem;\r\n        this.selectedItemTitle = '';\r\n        if (smartFieldContext.selectedItem) {\r\n            this.selectedItemTitle = smartFieldContext.selectedItem[smartFieldContext.titleProperty || 'title'];\r\n        }\r\n        this.setReturnData();\r\n    }\r\n\r\n    public closeOnDoubleClick(): void {\r\n        this.popupService.hideContextPopup(popup.buttons.ok, popup.buttons.okResult);\r\n    }\r\n\r\n    public getItemIcon(item: IDataField): string {\r\n        if (item) {\r\n            return `icon icon-size16 icon-set-datatypes ic-${this.dataTypeResolverService.getSpriteClassFromDataType(item.type?.toString())} selected`;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Binds to the method that executes after validation completed and before the popup closes.\r\n     */\r\n    private setReturnData(): void {\r\n        const smartFieldContext = this.config.context as ISmartFieldContext;\r\n        this.config.returnData =\r\n        {\r\n            selectedReference: smartFieldContext.selectedItem,\r\n            isNewReference: false\r\n        };\r\n    }\r\n}\r\n","<div class=\"save-reference-popup\">\r\n    <!-- Content -->\r\n    <div class=\"row content\">\r\n        <!-- Row Item: None selection item -->\r\n        <div class=\"flexrow row-item\" [ngClass]=\"{'selected-outcome': !selectedItemTitle}\"\r\n             (click)=\"selectNone()\" (dblclick)=\"selectNone(); closeOnDoubleClick()\">\r\n            <!-- LEFT NONE ICON -->\r\n            <div class=\"control-column fixed\">\r\n                <div class=\"flexrow list-item-icons vertical none-icon-background\">\r\n                    <span class=\"icon icon-set-steps icon-size16 ic-noentry\"></span>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- NONE ITEM TEXT -->\r\n            <div class=\"text-parts\">\r\n                <div class=\"input-with-icon has-label title-with-no-action\">\r\n                    {{getFromResx('Wizards','popup_SaveReferenceDialog_None') | async}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Divider between None and Data Fields -->\r\n        <div class=\"flexrow divider-row\">\r\n        </div>\r\n\r\n        <!-- Row Item: Selection of Data Fields-->\r\n        <ng-container *ngIf=\"objectList?.length\">\r\n            <div class=\"flexrow row-item\"\r\n                 [ngClass]=\"selectedItemTitle === item.title ? 'selected-outcome' : ''\"\r\n                 (click)=\"selectItem(item)\" (dblclick)=\"selectItem(item); closeOnDoubleClick()\"\r\n                 *ngFor=\"let item of objectList\">\r\n                <ng-container *ngIf=\"item.systemField !== true\">\r\n                    <!-- LEFT ICON -->\r\n                    <div class=\"vertical item-icon\">\r\n                        <div class=\"control-column fixed\">\r\n                            <div class=\"flexrow list-item-icons vertical reference-icon-background\">\r\n                                <span [ngClass]=\"getItemIcon(item)\"></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- INPUT/TEXT/LABEL -->\r\n                    <div class=\"text-parts text-parts control-column float\">\r\n                        <div k2TooltipBasic class=\"title-with-no-action\">{{item.title}}</div>\r\n                    </div>\r\n                </ng-container>\r\n            </div>\r\n        </ng-container>\r\n        <!-- Row Item: To show if there are no Data Fiels -->\r\n        <div class=\"flexrow vertical no-items\" *ngIf=\"!objectList?.length\">\r\n            {{getFromResx('Wizards','popup_SaveReferenceDialog_noItemsToDisplay') | async}}\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, Input, OnInit } from '@angular/core';\r\nimport { IdentityService } from 'src/app/services/identity/identity.service';\r\nimport { RecentsServiceToken } from 'src/app/services/recents/recents-service-factory';\r\nimport { ResourceService } from 'src/app/services/resource/resource.service';\r\nimport { DropDownMenuAlignment } from 'src/app/shared/enums/drop-down/drop-down-menu-alignment';\r\nimport { DropDownMenuTrianglePosition } from 'src/app/shared/enums/drop-down/drop-down-triangle-position';\r\nimport { WorkflowContextBrowserItemTypes } from 'src/app/shared/enums/model/workflow/item-provider/workflow-context-browser-item-types';\r\nimport { PopupConfigStates } from 'src/app/shared/enums/popup/popup-config-states';\r\nimport { CommonContexts } from 'src/app/shared/enums/services/recents/common-contexts';\r\nimport { IRecentsService } from 'src/types/services/recents/i-recents-service';\r\nimport { IPopupConfiguration } from '../../../../types/models/popup/i-popup-configuration';\r\nimport { IUserDialogContext } from '../../../../types/models/popup/i-user-dialog-context';\r\nimport { PopupService } from '../../../services/popup/popup.service';\r\nimport { popup } from '../../../shared/constants/wizard-popup';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-user-dialog',\r\n    templateUrl: './user-dialog.component.html',\r\n    styleUrls: ['./user-dialog.component.less'],\r\n    providers: [\r\n        IdentityService\r\n    ]\r\n})\r\nexport class UserDialogComponent extends BaseResourceComponent implements OnInit {\r\n    @Input() config: IPopupConfiguration;\r\n\r\n    get context(): IUserDialogContext {\r\n        if ((this.config?.context as any)?.umUserDialogSettings) { // legacy has a dialog settings in the context\r\n            return (this.config.context as any).umUserDialogSettings;\r\n        }\r\n        return this.config?.context as IUserDialogContext;\r\n    }\r\n\r\n    public stateConfiguration: sourceCode.k2Designer.objectModel.popup.IPopupStateConfiguration;\r\n    public breadCrumbItems: sourceCode.k2Designer.components.IBreadCrumbItem[];\r\n    public selectedUmFilter: string;\r\n    public searchText = '';\r\n    public isSearching: boolean;\r\n    public selectedUserData: sourceCode.k2Designer.objectModel.workflow.itemProvider.IUserItem;\r\n    public isGroupOrRole: boolean;\r\n    public umFilterDropdownItems: sourceCode.k2Designer.objectModel.dropDownMenu.IDropDowntMenuItem[] = [];\r\n    public recentSelectedUsers: sourceCode.k2Designer.objectModel.workflow.itemProvider.IUserItem[];\r\n\r\n    /**\r\n     * This is the entire Controls Object Data\r\n     */\r\n    public umUserDialogObjectData: sourceCode.k2Designer.objectModel.workflow.itemProvider.IUserItem[];\r\n\r\n    /*\r\n     * Enums\r\n     */\r\n    public dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    public dropDownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    public popupConfigStates: typeof PopupConfigStates = PopupConfigStates;\r\n\r\n    get hasRecents(): boolean {\r\n        return !!this.recentSelectedUsers?.length;\r\n    }\r\n    private _mapping: any = JSON.parse('{ \\'displayName\\': \\'displayName\\', \\'email\\': \\'email\\', \\'type\\': \\'type\\', \\'systemName\\' : \\'systemName\\', \\'description\\' : \\'description\\', \\'label\\' : \\'label\\' }'.replace(/'/g, '\"'));\r\n    private _umFilterOptions: string[] = [];\r\n\r\n    constructor(\r\n        private popupService: PopupService,\r\n        @Inject(RecentsServiceToken) private recentsService: IRecentsService,\r\n        protected resourceService: ResourceService,\r\n        private identityService: IdentityService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.identityService\r\n            .getLabels()\r\n            .subscribe(this.onLabelsLoaded);\r\n\r\n        this.breadCrumbItems = [];\r\n\r\n        this.stateConfiguration = {\r\n            message: '',\r\n            state: PopupConfigStates.normal,\r\n            actionButtons: [{\r\n                key: 'btnRefresh',\r\n                text: this.resourceService.getString('refresh'),\r\n                onClick: this.refreshSearch.bind(this),\r\n                visible: false\r\n            } as sourceCode.k2Designer.objectModel.popup.IPopupButton]\r\n        } as sourceCode.k2Designer.objectModel.popup.IPopupStateConfiguration;\r\n\r\n        // get first 5\r\n        this.recentSelectedUsers = this.getRecentUsers()?.slice(0, 5);\r\n    }\r\n\r\n    /**\r\n     * When an item is selected\r\n     *\r\n     * @param item\r\n     * @param newBreadCrumbItems\r\n     */\r\n    itemSelected(event: IBreadCrumbItemEvent) {\r\n        this.breadCrumbItems = event.newCrumbs;\r\n        if (!event.item) {\r\n            this.breadCrumbItems.length = 0;\r\n            this.getUsersForSelection(this.selectedUmFilter, this.searchText);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * When the search string changes\r\n     *\r\n     * @param value\r\n     */\r\n    refreshSearch(value: string): void {\r\n        this.searchText = value;\r\n        if (this.searchText != null && this.searchText != undefined && this.searchText.length > 0) {\r\n            this.isSearching = true;\r\n            this.getUsersForSelection(this.selectedUmFilter, this.searchText);\r\n        }\r\n        else {\r\n            this.isSearching = false;\r\n            this.searchText = '';\r\n            this.stateConfiguration.state = PopupConfigStates.normal;\r\n            this.identityService.abortGetIdentities();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Double click selects a user and closes the popup\r\n     *\r\n     * @param selectedUser\r\n     */\r\n    closeOnDoubleClick(selectedUser: sourceCode.k2Designer.objectModel.workflow.itemProvider.IUserItem): void {\r\n        this.selectUser(selectedUser);\r\n        this.popupService.hide(popup.buttons.okResult, this.config);\r\n    }\r\n\r\n    /**\r\n     * Handle user selection\r\n     *\r\n     * @param selectedUser\r\n     */\r\n    selectUser(selectedUser: sourceCode.k2Designer.objectModel.workflow.itemProvider.IUserItem): void {\r\n        if (this.selectedUserData !== selectedUser) {\r\n            this.selectedUserData = selectedUser;\r\n            this.config.returnData = this.selectedUserData;\r\n        }\r\n        this.config.buttons.okButton.enabled = true;\r\n    }\r\n\r\n    /**\r\n     * Get the applicable icon for the identity type\r\n     *\r\n     * @param item\r\n     * @returns\r\n     */\r\n    getIcon(item: sourceCode.k2Designer.objectModel.workflow.itemProvider.IUserItem): string {\r\n        switch (item.type) {\r\n            case WorkflowContextBrowserItemTypes.identityRole:\r\n                this.isGroupOrRole = true;\r\n                return 'icon icon-size24 icon-set-steps ic-roles';\r\n            case WorkflowContextBrowserItemTypes.identityGroup:\r\n                this.isGroupOrRole = true;\r\n                return 'icon icon-size24 icon-set-steps ic-group';\r\n            case WorkflowContextBrowserItemTypes.identityUser:\r\n                this.isGroupOrRole = false;\r\n                return 'icon icon-size24 icon-set-steps ic-user';\r\n            default:\r\n                this.isGroupOrRole = false;\r\n                return 'icon icon-size24 icon-set-steps ic-disableuser';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This is the call for the users\r\n     */\r\n    getUsersForGroup(label: string, identity: sourceCode.k2Designer.objectModel.workflow.itemProvider.IUserItem): void {\r\n        this.breadCrumbItems = [];\r\n        this.breadCrumbItems = <sourceCode.k2Designer.components.IBreadCrumbItem[]>\r\n            [\r\n                {\r\n                    allowDrillDown: false,\r\n                    title: identity.displayName,\r\n                    key: identity.displayName,\r\n                    isCrumbItem: true\r\n                }\r\n            ];\r\n\r\n        this.identityService\r\n            .getIdentitiesByGroup(label, identity.systemName)\r\n            .subscribe((result: sourceCode.k2Designer.objectModel.workflow.itemProvider.IUserItem[]) => {\r\n                if (result) {\r\n                    this.umUserDialogObjectData = result;\r\n                }\r\n            });\r\n    }\r\n\r\n    /**\r\n     * When the call to retrieve labels returns\r\n     *\r\n     * @param labels The result of request for users\r\n     */\r\n    private onLabelsLoaded = (labels: any): void => {\r\n\r\n        this._umFilterOptions = labels.valueList;\r\n        this.selectedUmFilter = labels.defaultLabel;\r\n\r\n        if (this._umFilterOptions) {\r\n            let itemIndex = -1;\r\n\r\n            for (let i = 0; i < this._umFilterOptions.length; i++) {\r\n                const isSelectedDefault: boolean = this.selectedUmFilter === this._umFilterOptions[i];\r\n\r\n                // Item\r\n                this.umFilterDropdownItems.push({\r\n                    key: (itemIndex++).toString(),\r\n                    title: this._umFilterOptions[i],\r\n                    onSelected: this.onUmFilterSelected,\r\n                    isSelected: isSelectedDefault\r\n                } as sourceCode.k2Designer.objectModel.dropDownMenu.IDropDowntMenuItem);\r\n\r\n                // Separator\r\n                this.umFilterDropdownItems.push({\r\n                    key: (itemIndex++).toString(),\r\n                    isSeparator: true\r\n                } as sourceCode.k2Designer.objectModel.dropDownMenu.IDropDowntMenuItem);\r\n            }\r\n        }\r\n\r\n        this.umFilterDropdownItems.push({\r\n            key: 'userManagers',\r\n            icon: 'icon icon-set-buttons icon-size24 ic-help_button',\r\n            isSeparator: false,\r\n            title: this.resourceService.getString('umUser_popup_user_managers')\r\n        });\r\n    };\r\n\r\n    private onUmFilterSelected = (item: sourceCode.k2Designer.objectModel.dropDownMenu.IDropDowntMenuItem) => {\r\n        this.selectedUmFilter = item.title;\r\n\r\n        if (this.searchText.length > 0) {\r\n            this.getUsersForSelection(this.selectedUmFilter, this.searchText);\r\n        }\r\n    };\r\n\r\n    private getUsersForSelection(label: string, filter: string): void {\r\n        this.umUserDialogObjectData = [];\r\n        this.stateConfiguration.message = '';\r\n        this.stateConfiguration.state = PopupConfigStates.loading;\r\n        this.stateConfiguration.actionButtons[0].visible = false;\r\n\r\n        this.identityService\r\n            .getIdentities(label, filter, this.context.assetType)\r\n            .subscribe({\r\n                next: (result: any) => {\r\n                    this.stateConfiguration.state = PopupConfigStates.normal;\r\n                    this.umUserDialogObjectData = result;\r\n                },\r\n                error: (result: any) => {\r\n                    const exception = <any>JSON.parse(result);\r\n                    this.stateConfiguration.message = exception.ExceptionDetail ? exception.ExceptionDetail.Message : exception.Message;\r\n                    this.stateConfiguration.state = PopupConfigStates.error;\r\n                    this.stateConfiguration.actionButtons[0].visible = true;\r\n                }\r\n            });\r\n    }\r\n\r\n    private getRecentUsers(): sourceCode.k2Designer.objectModel.workflow.itemProvider.IUserItem[] {\r\n        if (this.recentsService.itemCount(CommonContexts.RecentlySelectedUsers) > 0) {\r\n            let items = [];\r\n            items = items\r\n                .concat(this.recentsService\r\n                    .getItems(CommonContexts.RecentlySelectedUsers)\r\n                    .map((item: any) => {\r\n                        let result: sourceCode.k2Designer.objectModel.workflow.itemProvider.IUserItem;\r\n\r\n                        // This whole mapping thing seems questionable...\r\n                        if (this._mapping) {\r\n                            const userObject = {} as any;\r\n\r\n                            for (const p in this._mapping) {\r\n                                userObject[p] = item[this._mapping[p]];\r\n                            }\r\n\r\n                            for (let typeCount = 0; typeCount < this.context.assetType.length; typeCount++) {\r\n                                if (this.getAssetTypeID(this.context.assetType[typeCount]) === userObject.type) {\r\n                                    result = userObject as any;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            result = <any>item;\r\n                        }\r\n                        return result;\r\n                    }))\r\n                .filter(x => !!x);\r\n            return items;\r\n        }\r\n    }\r\n\r\n    private getAssetTypeID(assetType: string): number {\r\n        switch (assetType) {\r\n            case 'Roles':\r\n                return WorkflowContextBrowserItemTypes.identityRole;\r\n            case 'Groups':\r\n                return WorkflowContextBrowserItemTypes.identityGroup;\r\n            case 'Users':\r\n                return WorkflowContextBrowserItemTypes.identityUser;\r\n            default:\r\n                return WorkflowContextBrowserItemTypes.identityUser;\r\n        }\r\n    }\r\n}\r\n","<div class=\"user-dialog\">\r\n    <div class=\"ud-bc-row\">\r\n        <div class=\"ud-bc-container\">\r\n            <k2-bread-crumb (onCrumbItemSelected)=\"itemSelected($event)\"\r\n                            [crumbItems]=\"breadCrumbItems\"\r\n                            [searchText]=\"searchText\"\r\n                            (searchTextChanged)=\"refreshSearch($event)\"\r\n                            [searchInputDelay]=\"300\"\r\n                            [placeholderText]=\"getString('breadcrumb_users_placeholder_text')\"\r\n                            [autofocusOnInput]=\"true\">\r\n            </k2-bread-crumb>\r\n        </div>\r\n        <div class=\"ud-dd-container\">\r\n            <k2-drop-down class=\"k2-dropdown-parent\"\r\n                          [menuAlignment]=\"dropDownMenuAlignment.centered\"\r\n                          [menuItems]=\"umFilterDropdownItems\"\r\n                          [trianglePosition]=\"dropDownMenuTrianglePosition.right\">\r\n                <div class=\"k2-dd-flexChild k2-dd-rowParent k2-dd-container k2-control k2-dropdown-div icon-container\">\r\n                    <div class=\"k2-dd-flexChild k2-dd-text\">{{selectedUmFilter}}</div>\r\n                    <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                        <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                    </div>\r\n                </div>\r\n            </k2-drop-down>\r\n        </div>\r\n    </div>\r\n    <div class=\"ud-content scrollme\" k2-scrollbar>\r\n        <div class=\"dialog-states\" *ngIf=\"stateConfiguration && stateConfiguration.state !== 'normal'\">\r\n            <k2-popup-states [stateConfiguration]=\"stateConfiguration\"></k2-popup-states>\r\n        </div>\r\n        <ng-container *ngIf=\"isSearching\">\r\n            <div class=\"item-row\"\r\n                 [ngClass]=\"{ 'selected' : rowItem == selectedUserData }\"\r\n                 *ngFor=\"let rowItem of umUserDialogObjectData\"\r\n                 (dblclick)=\"closeOnDoubleClick(rowItem)\"\r\n                 (click)=\"selectUser(rowItem)\">\r\n                <div class=\"item-icon\">\r\n                    <span [ngClass]=\"getIcon(rowItem)\"></span>\r\n                </div>\r\n                <div class=\"item-content\">\r\n                    <div class=\"item-name\" [ngClass]=\"{ 'center' : !rowItem.email && !rowItem.description }\">{{rowItem.displayName}}</div>\r\n                    <div class=\"item-desc\" *ngIf=\"rowItem.email || rowItem.description\">{{rowItem.email || rowItem.description}}</div>\r\n                </div>\r\n                <div class=\"item-label\" *ngIf=\"!isGroupOrRole\">{{rowItem.systemName}}</div>\r\n                <div class=\"item-label\" *ngIf=\"isGroupOrRole\">\r\n                    <div class=\"pull-right hyperlink primary\" *ngIf=\"rowItem.type !== 8\" (click)=\"getUsersForGroup(selectedUmFilter, rowItem)\">\r\n                        {{getFromResx(\"Wizards\", \"general_see_users\")|async }}\r\n                    </div>\r\n                    <div class=\"disabled-opacity\" title=\"\" *ngIf=\"rowItem.type === 8\">\r\n                        {{getFromResx(\"Wizards\", \"wizard_coming_soon\")|async}}\r\n                        <div class=\"pull-right hyperlink primary is-disabled\" (click)=\"getUsersForGroup(selectedUmFilter, rowItem)\">\r\n                            {{getFromResx(\"Wizards\", \"general_see_users\")|async}}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n\r\n        <div class=\"ud-recents\" *ngIf=\"!isSearching\">\r\n            <span>\r\n                {{getFromResx(\"Wizards\", \"general_RECENT\")|async}}\r\n            </span>\r\n            <ng-container *ngIf=\"hasRecents\">\r\n                <!-- limit to 5 -->\r\n                <div class=\"ud-recents-row\"\r\n                     *ngFor=\"let recentItem of recentSelectedUsers; let $first = first;let $last = last;\"\r\n                     [ngClass]=\"{'last':$last, 'first':$first, 'selected':recentItem === selectedUserData}\"\r\n                     (dblclick)=\"closeOnDoubleClick(recentItem)\"\r\n                     (click)=\"selectUser(recentItem)\">\r\n                    <div class=\"recent-icon\">\r\n                        <span [ngClass]=\"getIcon(recentItem)\"></span>\r\n                    </div>\r\n                    <div class=\"recent-content\">\r\n                        <div class=\"recent-name\">{{recentItem.displayName}}</div>\r\n                        <div class=\"recent-desc\">{{recentItem.email || recentItem.description}}</div>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n            <div class=\"ud-recents-row empty\" *ngIf=\"!hasRecents\">\r\n                {{getFromResx(\"Wizards\", \"general_No_Recents\")|async}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"ud-footer\" style=\"display: none; visibility: hidden;\">\r\n        <div class=\"footer-label\">\r\n            {{getFromResx(\"Wizards\", \"popup_UserDialog_Label_UserGroup\")|async}}\r\n        </div>\r\n        <div class=\"item-icon\">\r\n            <span *ngIf=\"selectedUserData\" [ngClass]=\"getIcon(selectedUserData)\"></span>\r\n        </div>\r\n        <div class=\"footer-input\">\r\n            <input type=\"text\"\r\n                   class=\"hierarchy-dialog-footer-textbox\"\r\n                   disabled [attr.placeholder]=\"getFromResx('Wizards','popup_UserDialog_Label_UserGroup') | async\"\r\n                   value=\"{{selectedUserData?.displayName}}\" />\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, OnInit, OnDestroy, Input, ComponentFactoryResolver, ViewChild, HostListener, ElementRef } from '@angular/core';\r\nimport { ITabComponent } from '../../../types/uiComponents/ribbon/ITabComponent';\r\nimport { TabHomeComponent } from '../ribbon/tab-home/tab-home.component';\r\nimport { TabHostDirective } from '../../directives/tab-host/tab-host.directive';\r\nimport { IRibbonConfiguration } from '../../../types/uiComponents/ribbon/IRibbonConfiguration';\r\nimport { TabFileComponent } from './tab-file/tab-file.component';\r\nimport { TabViewComponent } from './tab-view/tab-view.component';\r\nimport { EnvironmentServiceToken } from '../../services/environment/environment-service-factory';\r\nimport { IEnvironmentService } from '../../../types/services/environment/i-environment-service';\r\nimport { LegacyResourceServiceToken } from '../../legacy-service-factories/resource-service-factory';\r\nimport { ILegacyResourceService } from '../../../types/services/resources/i-legacy-resource.service';\r\nimport { ObjectModelServiceToken } from '../../services/object-model/object-model-service-factory';\r\nimport { IObjectModelService } from '../../../types/services/object-model/i-object-model-service';\r\nimport { UndoRedoServiceToken } from '../../services/undo-redo/undo-redo-service-factory';\r\nimport { SelectionServiceToken } from '../../services/selection/selection-service-factory';\r\nimport { ISelectionService } from '../../../types/services/selection/i-selection-service';\r\nimport { ContextProviderServiceToken } from '../../services/context-provider/context-provider-service-factory';\r\nimport { IContextProviderService } from '../../../types/services/context-provider/i-context-provider-service';\r\nimport { ProgressBarServiceToken } from '../../services/progress-bar/progress-bar-service-factory';\r\nimport { IProgressBarService } from '../../../types/services/progress-bar/i-progress-bar-service';\r\nimport { RibbonBarServiceToken } from '../../services/ribbon-bar/ribbon-bar-service-factory';\r\nimport { IRibbonService } from '../../../types/services/ribbon-bar/i-ribbon-bar-service';\r\nimport { DesignerServiceToken } from '../../services/designer/designer-service-factory';\r\nimport { IDesignerService } from '../../../types/services/designer/i-designer-service';\r\nimport { ItemProviderServiceToken } from '../../services/item-provider/item-provider-service-factory';\r\nimport { IItemProviderService } from '../../../types/services/item-provider/i-item-provider-service';\r\n\r\n@Component({\r\n    selector: 'k2-ribbon',\r\n    templateUrl: './ribbon.component.html',\r\n    styleUrls: ['./ribbon.component.less']\r\n})\r\n\r\nexport class RibbonComponent implements OnInit, OnDestroy {\r\n\r\n    @Input() public uiComp: sourceCode.k2Designer.objectModel.plugin.IDefinition;\r\n    @ViewChild(TabHostDirective, { static: true }) tabHost: TabHostDirective;\r\n\r\n    // #region - private properties -\r\n    private _timeout: ng.ITimeoutService;\r\n    private _element: ng.IAugmentedJQuery;\r\n    private _config: sourceCode.k2Designer.objectModel.plugin.IDefinition;\r\n    private _rbbnCnf: IRibbonConfiguration;\r\n    private _contextProvider: sourceCode.k2Designer.objectModel.contextProvider.WorkflowContextProvider;\r\n    /**\r\n     * Seting the path of the ProgressBarService to the local variable\r\n     */\r\n    private static SAVE_BUTTON_PULSE_TIMEOUT = 3000;\r\n    private _resourceHash: string;\r\n    // #endregion - private properties -\r\n\r\n    //#region -scope interface properties\r\n    public tabs: ITabComponent[];\r\n    public contextTabs: ITabComponent[];\r\n    public currentTab: ITabComponent;\r\n    public getString: (resourceId: string, collectionId?: string) => string;\r\n    public designerSvc: sourceCode.k2Designer.services.studio.DesignerService;\r\n    public hasContext: boolean;\r\n    public currentContextTabs: ITabComponent[];\r\n    public finishing: boolean;\r\n    public finished: boolean;\r\n    public saving: boolean;\r\n    public manual: boolean;\r\n    public canRedo: boolean;\r\n    public canUndo: boolean;\r\n    public canSave: boolean;\r\n    public loaderHasLoaded: boolean;\r\n    public hideStudioNavTop: boolean;\r\n    public undoRedoEnabled: boolean;\r\n    public showFinishButton: boolean;\r\n    public saveErrorMessage: string;\r\n    public selectTab: (tab: ITabComponent) => void;\r\n    public togglePin: () => void;\r\n    public unpin: () => void;\r\n    public getCurrentActivity: () => void;\r\n    public loadContextTabs: (onCompleted: () => void) => void;\r\n    public isContextTab: (tab: ITabComponent) => boolean;\r\n    public invokeUndo: () => void;\r\n    public invokeRedo: () => void;\r\n    public invokeSave: (closeproject: boolean) => void;\r\n    public onFinishButtonClicked: () => void;\r\n    public isHosted: boolean;\r\n    //Resource object containing localized resources\r\n    public resources: {\r\n        [resourceId: string]: string;\r\n    };\r\n    // #endregion - scope interface properties -\r\n\r\n    constructor(@Inject('$rootElement') element,\r\n        @Inject(EnvironmentServiceToken) private _envService: IEnvironmentService,\r\n        @Inject(ProgressBarServiceToken) private _progressBarService: IProgressBarService,\r\n        @Inject(RibbonBarServiceToken) private _ribbonBarService: IRibbonService,\r\n        @Inject(LegacyResourceServiceToken) private _resourceService: ILegacyResourceService,\r\n        @Inject(ObjectModelServiceToken) private _objectModelService: IObjectModelService<sourceCode.k2Designer.objectModel.workflow.process.k2Process.K2Process>,\r\n        @Inject(UndoRedoServiceToken) private _undoRedoService: IUndoRedoService,\r\n        @Inject(SelectionServiceToken) private _selectionService: ISelectionService,\r\n        @Inject(ContextProviderServiceToken) private _contextProviderService: IContextProviderService,\r\n        @Inject(ItemProviderServiceToken) private _itemProviderService: IItemProviderService,\r\n        private componentFactoryResolver: ComponentFactoryResolver,\r\n        private elementRef: ElementRef) {\r\n        this._element = element;\r\n\r\n        this._resourceService.onGetResourceFileCompletedCallbacks.push(this.onGetResourceFileCompleted.bind(this));\r\n        this._resourceHash = this._resourceService.getResxFile('Ribbon');\r\n\r\n        this.getString = this._resourceService.getString.bind(this._resourceService);\r\n\r\n        this.saveErrorMessage = this.getString('workflow_save_error_message').format(this._envService.workflowFullname);\r\n\r\n        this.invokeRedo = this._invokeRedo.bind(this);\r\n        this.invokeUndo = this._invokeUndo.bind(this);\r\n        this.invokeSave = this._invokeSave.bind(this);\r\n        this.onFinishButtonClicked = this._onFinishButtonClicked.bind(this);\r\n\r\n        this._envService.notifyOnReady(this.onEnvironmentServiceReady.bind(this));\r\n        this.isHosted = this._isHosted.bind(this);\r\n\r\n        this.finishing = false;\r\n        this.finished = false;\r\n        this.manual = false;\r\n        this.saving = false;\r\n        this.showFinishButton = false;\r\n\r\n        this._objectModelService.registerEventListener('onStartSaving', {\r\n            notify: this.onStartSaving.bind(this),\r\n            id: 'ribbonContller.onStartSaving'\r\n        });\r\n\r\n        this._objectModelService.registerEventListener('onFinishSaving', {\r\n            notify: this.onFinishSaving.bind(this),\r\n            id: 'ribbonContller.onFinishSaving'\r\n        });\r\n\r\n        this.undoRedoEnabled = this._undoRedoService.undoRedoEnabled;\r\n\r\n        if (this.undoRedoEnabled !== false) {\r\n            this._undoRedoService.listen(this.onUndoRedo.bind(this));\r\n        }\r\n\r\n        // Call the method that registers a callback function to listen for the loader to complete\r\n        this.listenForLoadCompletion();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this._config = this.uiComp;\r\n        this._rbbnCnf = <IRibbonConfiguration>this._config.cnf;\r\n\r\n        this.currentTab = null;\r\n        this.selectTab = this._selectTab.bind(this);\r\n        this.togglePin = this._togglePin.bind(this);\r\n        this.unpin = this._unpin.bind(this);\r\n        this._selectionService.listen(this.onCanvasSelectionChanged.bind(this));\r\n        this.getCurrentActivity = this._getCurrentActivity.bind(this);\r\n        this.hasContext = false;\r\n        this.loadContextTabs = this._loadContextTabs.bind(this);\r\n        this.currentContextTabs = [];\r\n        this.isContextTab = this._isContextTab.bind(this);\r\n        this.isHosted = this._isHosted();\r\n\r\n        this._contextProvider = this._contextProviderService.getContextProviderFromType<sourceCode.k2Designer.objectModel.contextProvider.WorkflowContextProvider>(sourceCode.k2Designer.objectModel.contextProvider.WorkflowContextProvider);\r\n\r\n        // load all tab-plugins\r\n        this.onTabsLoaded();\r\n        this._loadContextTabs(this.onContextTabsLoaded.bind(this));\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        //clear timeouts etc.\r\n    }\r\n\r\n    /**\r\n     * Registers a callback function to listen for the loader to complete\r\n     */\r\n    public listenForLoadCompletion(): void {\r\n        this._progressBarService.listenLoadedComplete(() => {\r\n            this.loaderHasLoaded = true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Close tab if clicked outside\r\n     *\r\n     * @param data\r\n     */\r\n    @HostListener('document:click', ['$event'])\r\n    clickout(event) {\r\n        if (this.currentTab == null) return;\r\n\r\n        if (this.elementRef.nativeElement == event.target) return;\r\n\r\n        //Did we click on the current tab menu item?\r\n        if (event.target.href != null && event.target.href.indexOf(this.currentTab.id) > -1) return;\r\n\r\n        //Did we click inside currently active tab?\r\n        const currentTabId = `current-tab-${this.currentTab.id}`;\r\n\r\n        if (event.target.id === currentTabId) return;\r\n\r\n        //Clicking on current tab to close or on 'Show Me' button\r\n        if ((event.target.closest(`#${currentTabId}`) === null || event.target.id === 'btnShowStartStep')\r\n            && event.target.closest('.delete-process') === null) {\r\n            this._deselectTab();\r\n        }\r\n    }\r\n\r\n    //called from objeceModelService upon auto save start\r\n    private onStartSaving(data: any) {\r\n        this.saving = true;\r\n    }\r\n\r\n    //called from objeceModelService upon auto save finish\r\n    private onFinishSaving(data: any) {\r\n        //timeout needed for animation to pulse in regular pattern\r\n        setTimeout(() => {\r\n            if (this.manual === false) {\r\n                this.saving = false;\r\n                //TODO: find out if we are still supporting IE 11?\r\n                if (sourceCode.k2Designer.core.isIE11) {\r\n                    //IE11 only - need to force reflow the element to stop animation\r\n                    this._element.find('.qat.sav').height();\r\n                }\r\n            }\r\n        }, RibbonComponent.SAVE_BUTTON_PULSE_TIMEOUT);\r\n    }\r\n\r\n    private _isHosted(): boolean {\r\n        this.hideStudioNavTop = this._envService.query.hosted;\r\n        if (this.hideStudioNavTop || this.currentTab?.id === 'File') {\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    private onEnvironmentServiceReady(): void {\r\n        this.undoRedoEnabled = this._undoRedoService.undoRedoEnabled;\r\n\r\n        if (this.undoRedoEnabled) {\r\n            this._undoRedoService.listenStateChanged(this.onUndoRedoServiceCallBack.bind(this));\r\n        }\r\n\r\n        this.canRedo = false;\r\n        this.canUndo = false;\r\n        this.canSave = true;\r\n    }\r\n\r\n    private _invokeRedo(): void {\r\n        if (this.canRedo) this._undoRedoService.redo();\r\n    }\r\n\r\n    private _invokeUndo(): void {\r\n        if (this.canUndo) this._undoRedoService.undo();\r\n    }\r\n\r\n    private onUndoRedo() {\r\n        //Do nothing for now\r\n    }\r\n\r\n    private _invokeSave(closeproject: boolean = false): void {\r\n        //begin saving indicator pulse\r\n        this.saving = true;\r\n        this.manual = true;\r\n\r\n        //before attempt to save, make sure saving is not currently in progress\r\n        if (this._objectModelService.busyProcessingInstructions() == false) {\r\n            this._objectModelService.flush(null, null, closeproject);\r\n        }\r\n        else {\r\n            const that = this;\r\n            var saveProcessCallBack = {\r\n                subscriberId: 'invokeSave_saveProcessCallBack',\r\n                notify(data) {\r\n                    this._objectModelService.unRegisterEventListener(sourceCode.k2Designer.services.studioItem.ObjectModelService.ProcessingCompleteEvent, saveProcessCallBack.subscriberId);\r\n                    this._objectModelService.flush(null, null, closeproject);\r\n                }\r\n            };\r\n            //Will invoke a processBulk and call back to this when complete\r\n            this._objectModelService.registerEventListener(sourceCode.k2Designer.services.studioItem.ObjectModelService.ProcessingCompleteEvent, saveProcessCallBack);\r\n        }\r\n\r\n        // pulse save indicator for approx 3 times even though auto save may have taken care of the business but we still need to show users\r\n        setTimeout(() => {\r\n            //end saving indicator pulse\r\n            this.saving = false;\r\n            this.manual = false;\r\n        }, RibbonComponent.SAVE_BUTTON_PULSE_TIMEOUT);\r\n    }\r\n\r\n    private _onFinishButtonClicked(): void {\r\n        this.finished = false;\r\n        this.finishing = true;\r\n        this.invokeSave(true);\r\n    }\r\n\r\n    private _updateUndoRedoUi: number;\r\n    private onUndoRedoServiceCallBack(): void {\r\n        if (!this._updateUndoRedoUi) {\r\n            this._updateUndoRedoUi = window.setTimeout(this.doUndoRedoStateUpdate.bind(this), 500);\r\n        }\r\n    }\r\n\r\n    private doUndoRedoStateUpdate(): void {\r\n        this._updateUndoRedoUi = null;\r\n        this.canRedo = this._undoRedoService.canRedo();\r\n        this.canUndo = this._undoRedoService.canUndo();\r\n    }\r\n\r\n    // #region - private methods -\r\n\r\n    private _pinned = false;\r\n    private _togglePin(): void {\r\n        this._pinned = !this._pinned;\r\n        if (this._pinned) {\r\n            this._envService.changeSectionLayout(132);\r\n        } else {\r\n            this._envService.changeSectionLayout(30);\r\n        }\r\n    }\r\n\r\n    private _unpin(): void {\r\n        if (this._pinned) {\r\n            this._envService.changeSectionLayout(30);\r\n            this._pinned = false;\r\n        }\r\n    }\r\n\r\n    private _isChangingSelection = false;\r\n    private onCanvasSelectionChanged(context: string, previous: any[], current: any[]): void {\r\n        if (this._isChangingSelection === true) return;\r\n        this._isChangingSelection = true;\r\n        if (current !== null && current !== undefined && current.length > 0) {\r\n            this.getCurrentActivity();\r\n        }\r\n        else {\r\n            this.hasContext = false;\r\n            this._updateRibbon(null);\r\n            this.unpin();\r\n        }\r\n        this._isChangingSelection = false;\r\n    }\r\n\r\n    private _getCurrentActivity(): void {\r\n        if (this._contextProvider.getCntx() != null) {\r\n            const activityData = (<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivity>this._contextProvider.getCntx()[0]);\r\n            if (activityData != null) {\r\n                if (activityData.children != null) {\r\n                    for (let i = 0; i < activityData.children.length; i++) {\r\n                        const cnf: any = activityData.children[i].wizardDefinition || // changed to any because these properties dont exist on any objects (hascontext and contextribbontabs)\r\n                            (<sourceCode.k2Designer.uiComponents.toolbox.plugins.WizardsController>this._itemProviderService.getItemProvider(sourceCode.k2Designer.uiComponents.toolbox.plugins.WizardsController)).getWizardDefinition(activityData.children[i].wizardId);\r\n                        if (cnf != null || cnf != undefined) {\r\n                            if (cnf.hasContext != null || cnf.hasContext != undefined) {\r\n                                this.hasContext = <boolean>cnf.hasContext;\r\n                                if (this.hasContext) {\r\n                                    if (cnf.contextRibbonTabs.length > 0) {\r\n                                        this._updateRibbon(cnf.contextRibbonTabs[0]);\r\n                                    }\r\n                                }\r\n                            }\r\n                            else {\r\n                                this.hasContext = false;\r\n                                this._updateRibbon(null);\r\n                                this.unpin();\r\n                            }\r\n                        }\r\n                        else {\r\n                            this.hasContext = false;\r\n                            this._updateRibbon(null);\r\n                            this.unpin();\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    this.hasContext = false;\r\n                    this._updateRibbon(null);\r\n                    this.unpin();\r\n                }\r\n            }\r\n            else {\r\n                this.hasContext = false;\r\n                this._updateRibbon(null);\r\n                this.unpin();\r\n            }\r\n        }\r\n        else {\r\n            this.hasContext = false;\r\n            this._updateRibbon(null);\r\n            this.unpin();\r\n        }\r\n    }\r\n\r\n    private _updateRibbon(ctxTab: string): void {\r\n        if (this.hasContext) {\r\n            if (ctxTab != null) {\r\n                if (this.currentContextTabs.length > 0) {\r\n                    for (var d = 0; d < this.currentContextTabs.length; d++) {\r\n                        for (var k = 0; k < this.tabs.length; k++) {\r\n                            if (this.tabs[k].id === this.currentContextTabs[d].id) {\r\n                                var idx: number = this.tabs.indexOf(this.currentContextTabs[d]);\r\n                                this.tabs.splice(idx, 1);\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    this.currentContextTabs = [];\r\n                    this.unpin();\r\n                }\r\n\r\n                for (var d = 0; d < this.contextTabs.length; d++) {\r\n                    if (this.contextTabs[d].id === ctxTab) {\r\n                        for (var k = 0; k < this.tabs.length; k++) {\r\n                            if (this.tabs[k].id !== this.contextTabs[d].id) {\r\n                                this.onScriptsLoaded(this.contextTabs[d]);\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (this.currentContextTabs.length > 0) {\r\n                for (var d = 0; d < this.currentContextTabs.length; d++) {\r\n                    for (var k = 0; k < this.tabs.length; k++) {\r\n                        if (this.tabs[k].id === this.currentContextTabs[d].id) {\r\n                            var idx: number = this.tabs.indexOf(this.currentContextTabs[d]);\r\n                            this.tabs.splice(idx, 1);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                this.currentContextTabs = [];\r\n                this.unpin();\r\n            }\r\n        }\r\n    }\r\n\r\n    private onScriptsLoaded(tab: ITabComponent): void {\r\n        this.tabs.push(tab);\r\n        this.currentContextTabs.push(tab);\r\n    }\r\n\r\n    /**\r\n     * Callback function when loading of tabs completed\r\n     */\r\n    private onTabsLoaded(): void {\r\n        this.tabs = this._rbbnCnf.tabs;\r\n        this._progressBarService.incrementGlobalProgressBar();\r\n    }\r\n\r\n    /**\r\n     * Callback function when loading of context tabs completed\r\n     */\r\n    private onContextTabsLoaded(): void {\r\n        this._progressBarService.incrementGlobalProgressBar();\r\n        this.contextTabs = this._rbbnCnf.contextTabs;\r\n    }\r\n\r\n    private _selectTab(tab: ITabComponent): void {\r\n        if (this.currentTab && this.currentTab.id == tab.id) {\r\n            this._deselectTab();\r\n        }\r\n        else {\r\n            this.currentTab = tab;\r\n            this._ribbonBarService.ribbonTabChanged();\r\n            this.loadTabComponent(tab);\r\n        }\r\n    }\r\n\r\n    private _deselectTab(): void {\r\n        const viewContainerRef = this.tabHost.viewContainerRef;\r\n        viewContainerRef.clear();\r\n        this.currentTab = null;\r\n        this._element.find('.ribbon-nav-top .items-list li.active').removeClass('active');\r\n    }\r\n\r\n    private _isContextTab(tab: ITabComponent): boolean {\r\n        let retValue = false;\r\n        if (this.hasContext) {\r\n            if (this.currentContextTabs.length > 0) {\r\n                if (this.currentContextTabs.indexOf(tab) > -1) {\r\n                    retValue = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return retValue;\r\n    }\r\n\r\n    private loadTabComponent(tab: ITabComponent): void {\r\n        switch (tab.componentName) {\r\n            case 'TabHomeComponent': tab.component = TabHomeComponent; break;\r\n            case 'TabFileComponent': tab.component = TabFileComponent; break;\r\n            case 'TabViewComponent': tab.component = TabViewComponent; break;\r\n        }\r\n\r\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(tab.component);\r\n\r\n        const viewContainerRef = this.tabHost.viewContainerRef;\r\n        if (viewContainerRef) {\r\n            viewContainerRef.clear();\r\n        }\r\n\r\n        if (componentFactory) {\r\n            const componentRef = viewContainerRef.createComponent<ITabComponent>(componentFactory);\r\n            componentRef.instance.descTk = tab.descTk;\r\n            componentRef.instance.drpDn = tab.drpDn;\r\n            componentRef.instance.id = tab.id;\r\n            componentRef.instance.nameTk = tab.nameTk;\r\n            componentRef.instance.navItms = tab.navItms;\r\n            componentRef.instance.rsc = tab.rsc;\r\n            componentRef.instance.uiComp = this.uiComp;\r\n            componentRef.instance.togglePin = this.togglePin;\r\n            componentRef.instance.getString = this.getString.bind(this);\r\n        }\r\n    }\r\n\r\n    private loadTabs(onCompleted: () => void): void {\r\n        sourceCode.k2Designer.utilities.forEachAsync(\r\n            this._rbbnCnf.tabs,\r\n            (tab: ITabComponent, idx: number, tabLoaded: () => void) => {\r\n                tabLoaded();\r\n            },\r\n            () => {\r\n                onCompleted();\r\n            });\r\n    }\r\n\r\n    private _loadContextTabs(onCompleted: () => void): void {\r\n        sourceCode.k2Designer.utilities.forEachAsync(\r\n            this._rbbnCnf.contextTabs,\r\n            (tab: ITabComponent, idx: number, tabLoaded: () => void) => {\r\n                tabLoaded();\r\n            },\r\n            () => {\r\n                onCompleted();\r\n            });\r\n    }\r\n\r\n    private onGetResourceFileCompleted(): void {\r\n        this.resources = this._resourceService.strings[this._resourceHash];\r\n    }\r\n}\r\n","<div class=\"ribbon-nav-top\" >\r\n    <div class=\"flex-container\">\r\n        <div class=\"items-sct\">\r\n            <ul class=\"items-list\">\r\n                <li *ngFor=\"let tab of tabs;\" data-tab-id=\"{{tab.id}}\"\r\n                    [ngClass]=\"{ 'ribbon-bar-app-tab dropdown': tab.drpDn == true, \r\n                    'is-ctx-tab' : isContextTab(tab),\r\n                    'active': currentTab != null && currentTab.id == tab.id }\">\r\n                    <a href=\"#{{tab.id}}\"\r\n                       *ngIf=\"tab.display\"\r\n                       (click)=\"selectTab(tab)\"\r\n                       (dblclick)=\"unpin()\" class=\"tabItems\" role=\"tab\"\r\n                       data-toggle=\"tab\">{{getString(tab.nameTk)}}</a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"tools-sct\">\r\n            <div class=\"qat-block\">\r\n                <div class=\"qat undo\"\r\n                     k2TooltipSimple\r\n                     (click)=\"invokeUndo()\"\r\n                     [ngClass]=\"{'disabled': !canUndo, 'hide': !undoRedoEnabled}\"\r\n                     [k2TooltipTitle]='getString(\"tooltip_ribbon_undo\")'\r\n                     k2TooltipPosition='bottomleft'\r\n                     [k2TooltipVisible]=\"canUndo\">\r\n                    <i class=\"icon icon-set-quickaccesstoolbar icon-size16 ic-undo\"></i>\r\n                </div>\r\n                <div class=\"qat redo\"\r\n                     (click)=\"invokeRedo()\"\r\n                     [ngClass]=\"{'disabled': !canRedo, '' : canRedo, 'hide': !undoRedoEnabled}\"\r\n                     k2TooltipSimple\r\n                     [k2TooltipTitle]='getString(\"tooltip_ribbon_redo\")'\r\n                     k2TooltipPosition='bottomleft'\r\n                     [k2TooltipVisible]=\"canRedo\">\r\n                    <i class=\"icon icon-set-quickaccesstoolbar icon-size16 ic-redo\"></i>\r\n                </div>\r\n                <div class=\"qat save\" *ngIf=\"loaderHasLoaded\"\r\n                     [ngClass]=\"{'saving': saving, 'manual': manual}\"\r\n                     (click)=\"invokeSave()\"\r\n                     k2TooltipSimple\r\n                     [k2TooltipDescription]='getString(\"tooltip_ribbon_autosave_desc\")'\r\n                     k2TooltipPosition='bottomleft'\r\n                     [k2TooltipVisible]=\"true\">\r\n                    <i class=\"icon icon-set-quickaccesstoolbar icon-size16 ic-save\"></i>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <button class=\"button finish-button\"\r\n                [ngClass]=\"{'finishing': finishing, 'finished': finished}\"\r\n                (click)=\"onFinishButtonClicked()\"\r\n                *ngIf=\"showFinishButton\">\r\n            <span class=\"finish-text\">{{resources[\"workflow_contextPopup_finishButton\"]}}</span>\r\n            <k2-spinner [overlay]=\"false\" [inline]=\"true\" [visible]=\"finishing\"></k2-spinner>\r\n            <span class=\"icon icon-set-indicators icon-size16 ic-selectedrowindicator selected\" *ngIf=\"finished\"></span>\r\n        </button>\r\n    </div>\r\n    <div class=\"tab-content\" [hidden]=\"currentTab == null\">\r\n        <div id=\"current-tab-{{currentTab?.id}}\" class=\"tab-pane ribbon-bar-tab\" \r\n             [ngClass]=\"{'top' : isHosted, \r\n             'active': currentTab != null, \r\n             'file-menu': currentTab != null && currentTab.id === 'File', \r\n             'showing': currentTab != null && currentTab.id !== 'File'}\">\r\n            <ng-template k2TabHost></ng-template>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { DatePipe } from '@angular/common';\r\nimport { Component, ComponentFactoryResolver, ComponentRef, Inject, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { IDataService } from '../../../../types/services/data/i-data-service';\r\nimport { IEnvironmentService } from '../../../../types/services/environment/i-environment-service';\r\nimport { IRedirectService } from '../../../../types/services/redirect/i-redirect-service';\r\nimport { IRibbonService } from '../../../../types/services/ribbon-bar/i-ribbon-bar-service';\r\nimport { ICloseWFData } from '../../../../types/uiComponents/ribbon/ICloseWFData';\r\nimport { IFileInfoModel } from '../../../../types/uiComponents/ribbon/IFileInfoModel';\r\nimport { IRibbonConfiguration } from '../../../../types/uiComponents/ribbon/IRibbonConfiguration';\r\nimport { ISubTabComponent } from '../../../../types/uiComponents/ribbon/ISubTabComponent';\r\nimport { ITabComponent } from '../../../../types/uiComponents/ribbon/ITabComponent';\r\nimport { TabHostDirective } from '../../../directives/tab-host/tab-host.directive';\r\nimport { DataServiceToken } from '../../../services/data/data-service-factory';\r\nimport { EnvironmentServiceToken } from '../../../services/environment/environment-service-factory';\r\nimport { ProcessService } from '../../../services/process/process.service';\r\nimport { RedirectServiceToken } from '../../../services/redirect/redirect-service-factory';\r\nimport { RibbonBarServiceToken } from '../../../services/ribbon-bar/ribbon-bar-service-factory';\r\nimport { TabItemInfoComponent } from '../tab-file/tab-item-info/tab-item-info.component';\r\nimport { TabItemOptionsComponent } from '../tab-file/tab-item-options/tab-item-options.component';\r\n\r\nexport interface IFileInfoModelResult {\r\n    categoryId: number;\r\n    categoryName: string;\r\n    path: string;\r\n    owner: string;\r\n    modifiedOwner: string;\r\n    createdDate: string;\r\n    modifiedDate: string;\r\n    title: string;\r\n    clientIdentifier: string;\r\n}\r\n\r\n@Component({\r\n    selector: 'app-tab-file',\r\n    templateUrl: './tab-file.component.html',\r\n    styleUrls: ['./tab-file.component.less'],\r\n    providers: [DatePipe]\r\n})\r\nexport class TabFileComponent implements OnInit {\r\n\r\n    @Input() uiComp: sourceCode.k2Designer.objectModel.plugin.IDefinition;\r\n    @Input() ribbonCnf: IRibbonConfiguration;\r\n    @Input() public getString: (resourceId: string, collectionId?: string) => string;\r\n    @ViewChild(TabHostDirective, { static: true }) tabHost: TabHostDirective;\r\n\r\n    public showInfoOption: boolean;\r\n    public currentItem: ISubTabComponent;\r\n    public isStandalone: boolean;\r\n    public fileInfo: IFileInfoModel;\r\n\r\n    private _config: sourceCode.k2Designer.objectModel.plugin.IDefinition;\r\n    private _rbbnCnf: IRibbonConfiguration;\r\n    private _busyClosing = false;\r\n    private fileMenuItems: sourceCode.k2Designer.objectModel.ribbon.IFileMenuItem[];\r\n    private isDeployingProcess: boolean;\r\n    private saveErrorMessage: string;\r\n    private ribbonTabChangedCallback: sourceCode.k2Designer.services.studio.IRibbonTabChangedCallback;\r\n    private _busyClosingEventSubscription: Subscription;\r\n\r\n    private _userOptionsService: sourceCode.k2Designer.services.studio.UserOptionsService;\r\n\r\n    constructor(@Inject(EnvironmentServiceToken) private _envService: IEnvironmentService,\r\n        @Inject(RedirectServiceToken) private _redirectService: IRedirectService,\r\n        @Inject(RibbonBarServiceToken) private _ribbonBarService: IRibbonService,\r\n        @Inject(DataServiceToken) private _dataService: IDataService,\r\n        private _processService: ProcessService,\r\n        private datePipe: DatePipe,\r\n        private componentFactoryResolver: ComponentFactoryResolver) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n\r\n        this._config = this.uiComp;\r\n        this._rbbnCnf = <IRibbonConfiguration>this._config.cnf;\r\n\r\n        this.showInfoOption = true; //No Apps context\r\n\r\n        // opening from legacy hostId will be 'smartforms'\r\n        this.isStandalone = this._envService.currentEnvironment.hostId.toUpperCase() === 'STANDALONE';\r\n\r\n        this.populateItems(this._rbbnCnf.tabs);\r\n        this.isDeployingProcess = false;\r\n\r\n        this.saveErrorMessage = this.getString('workflow_save_error_message').format(this._envService.workflowFullname);\r\n\r\n        this.initOptionsData();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this._ribbonBarService.removeRibbonTabChanged(this.ribbonTabChangedCallback);\r\n        this._busyClosingEventSubscription.unsubscribe();\r\n    }\r\n\r\n    public selectMenuItem(itemName: string): void {\r\n        for (let i = 0; i < this.fileMenuItems.length; i++) {\r\n            if (this.fileMenuItems[i].name === itemName) {\r\n                this.currentItem = <ISubTabComponent>this.fileMenuItems[i];\r\n                break;\r\n            }\r\n        }\r\n\r\n        this.loadFileMenuComponent(this.currentItem);\r\n    }\r\n\r\n    public isCloseEnabled(): boolean {\r\n        //Process service might not be done loading\r\n        //TODO: ideally ngOnInit should await the service loaded callback before completing\r\n\r\n        if (!this._envService || !this._processService) return false;\r\n\r\n        if (this.isDeployingProcess === true\r\n            || this._dataService.getOpenRequestCount() > 0\r\n            || this._processService.getInstructionCount() > 0\r\n            || this._processService.allowProcessing() === false) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public createNewStudioItem(): void {\r\n        if (this._busyClosing === false) {\r\n            this._busyClosing = true;\r\n\r\n            const that = this;\r\n            const exit = function() {\r\n                that.exit.call(that, false, null);\r\n                $(document).trigger('DesignerStateChange', ['Normal']);\r\n            };\r\n            this.processRedirect(exit, exit);\r\n        }\r\n    }\r\n\r\n    public getClosingStatus(): string {\r\n        let result = '';\r\n\r\n        //Process service might not be done loading\r\n        //TODO: ideally ngOnInit should await the service loaded callback before completing\r\n        if (!this._envService || !this._processService) return result;\r\n\r\n        if (this.isDeployingProcess) {\r\n            result = this.getString('workflow_deployment_in_progress');\r\n        }\r\n        else if (this._dataService.getOpenRequestCount() > 0\r\n            || this._processService.getInstructionCount() > 0\r\n            || this._processService.allowProcessing() === false) {\r\n            result = this.getString('workflow_deployment_disabled_saving_workflow_to_server');\r\n        }\r\n        return result;\r\n    }\r\n\r\n    //Close\r\n    public selectItem(item?: sourceCode.k2Designer.objectModel.ribbon.IFileMenuItem): void {\r\n\r\n        if (this._busyClosing === false) {\r\n            this._busyClosing = true;\r\n\r\n            const that = this;\r\n            const complete = () => {\r\n                const closingData: ICloseWFData = {\r\n                    close: true,\r\n                    item,\r\n                    params: {},\r\n                    categoryId: this.fileInfo?.category?.id\r\n                };\r\n                that.exit.call(that, closingData);\r\n                //TODO: Change to emit event with EventEmitter which can be subscribed to in upgraded components\r\n                $(document).trigger('DesignerStateChange', ['Normal']);\r\n            };\r\n            const fail = () => {\r\n                const closingData: ICloseWFData = {\r\n                    close: true,\r\n                    item,\r\n                    params: {},\r\n                    categoryId: this.fileInfo?.category?.id\r\n                };\r\n                that.onFlushCompleteWithFailure.call(that, function() { that.exit.call(that, closingData); });\r\n                //TODO: Change to emit event with EventEmitter which can be subscribed to in upgraded components\r\n                $(document).trigger('DesignerStateChange', ['Error']);\r\n            };\r\n\r\n            this.processRedirect(complete, fail);\r\n        }\r\n    }\r\n\r\n    private onFlushCompleteWithFailure(callback: () => void) {\r\n        this._busyClosing = false;\r\n        callback();\r\n    }\r\n\r\n    private populateItems(tabs: ITabComponent[]): void {\r\n        let _menuItems: ISubTabComponent[];\r\n\r\n        for (let d = 0; d < tabs.length; d++) {\r\n            if (tabs[d].drpDn) {\r\n                _menuItems = <ISubTabComponent[]>tabs[d].navItms;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (_menuItems != null && _menuItems.length > 0) {\r\n            this.fileMenuItems = _menuItems;\r\n            this.currentItem = _menuItems[0];\r\n            this.selectMenuItem(this.currentItem.name);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Will use redirect service to exit designer\r\n     *\r\n     * @param close boolean indication whether closing the page or creating new workflow\r\n     * @param item optional - current item\r\n     * @param params optional - additional parameters to append to exit url\r\n     */\r\n    private exit(closingData: ICloseWFData) {\r\n        this._busyClosing = false;\r\n        if (closingData.item === null) {\r\n            this._redirectService.exit(closingData.categoryId, closingData.close, closingData.params);\r\n        }\r\n        else {\r\n            this.currentItem = <any>closingData.item;\r\n        }\r\n    }\r\n\r\n    //Close or New\r\n    private processRedirect(onFlushCompleted?: () => void, onFlushFail?: () => void): void {\r\n        $(document).trigger('DesignerStateChange', ['Busy']);\r\n        const onEventRaisedCallBack = () => {\r\n            try {\r\n                this._processService.flush(onFlushCompleted, onFlushFail, true);\r\n            }\r\n            catch (e) {\r\n                $(document).trigger('DesignerStateChange', ['Error']);\r\n                this._busyClosing = false;\r\n                console.error('processRedirect error: ' + e.toString());\r\n                this.exit({close: true, categoryId: this.fileInfo?.category?.id, item: null, params: null });\r\n            }\r\n        };\r\n        this._processService.requestProcessingCompleteNotification(true, true, onEventRaisedCallBack);\r\n    }\r\n\r\n    private initOptionsData() {\r\n\r\n        if (!this.showInfoOption) {\r\n            this.selectMenuItem('Options');\r\n        }\r\n    }\r\n\r\n    private initFileInfo(componentRef: ComponentRef<TabItemInfoComponent>): void {\r\n\r\n        //Get File Information if it was not already fetched:\r\n        if (!this.fileInfo) {\r\n            const processId = this._envService.query.guid || this._envService.query.id;\r\n\r\n            if (processId) {\r\n                this._dataService.httpGet('api/process/getfileinfomodelbyprocessid',\r\n                    {\r\n                        processId\r\n                    }, this.onFileInfoFetched.bind(this, componentRef), null, false);\r\n            }\r\n            else {\r\n                if (this._processService) {\r\n\r\n                    const that = this;\r\n                    var updateProcessInfoSubscriber = {\r\n                        subscriberId: 'rootIdChangedSubscriberFromFileController',\r\n                        notify(data) {\r\n\r\n                            that._dataService.httpGet('api/process/getfileinfomodelbyjsonid', //TODO: Apps: implement provider method\r\n                                {\r\n                                    jsonId: data\r\n                                }, that.onFileInfoFetched.bind(that, componentRef), null, false);\r\n                            that._processService.unRegisterObjectModelServiceEventListner('rootId', updateProcessInfoSubscriber.subscriberId);\r\n                        }\r\n                    };\r\n                    if (!this._processService.rootId) {\r\n                        //the process service is not always available,\r\n                        //create a subscription to the services property we need\r\n                        //so we can execute when the value is available\r\n                        this._processService.registerObjectModelServiceEventListner('rootId', updateProcessInfoSubscriber);\r\n                    }\r\n                    else {\r\n                        //if the value is available\r\n                        updateProcessInfoSubscriber.notify(this._processService.rootId);\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            this.loadFileInfoComponent(componentRef);\r\n        }\r\n    }\r\n\r\n    private loadFileMenuComponent(menuItem: ISubTabComponent): void {\r\n\r\n        switch (menuItem.componentName) {\r\n            case 'TabItemInfoComponent': menuItem.component = TabItemInfoComponent; break;\r\n            case 'TabItemOptionsComponent': menuItem.component = TabItemOptionsComponent; break;\r\n        }\r\n\r\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(menuItem.component);\r\n\r\n        const viewContainerRef = this.tabHost.viewContainerRef;\r\n        if (viewContainerRef) {\r\n            viewContainerRef.clear();\r\n        }\r\n\r\n        const componentRef = viewContainerRef.createComponent(componentFactory);\r\n        componentRef.instance.getString = this.getString.bind(this);\r\n\r\n        if (componentFactory) {\r\n            if (menuItem.componentName === 'TabItemInfoComponent') {\r\n                this.initFileInfo(componentRef);\r\n                componentRef.instance.isBusyDeploying.subscribe(isBusy => this.isDeployingProcess = isBusy);\r\n                componentRef.instance.fileItemConfig = menuItem.cnf;\r\n                this._busyClosingEventSubscription = componentRef.instance.isBusyClosing.subscribe(closingData => this.exit(closingData));\r\n            }\r\n        }\r\n    }\r\n\r\n    private loadFileInfoComponent(componentRef: ComponentRef<TabItemInfoComponent>): void {\r\n        componentRef.instance.fileItemInfo = this.fileInfo;\r\n    }\r\n\r\n    private onFileInfoFetched(componentRef: ComponentRef<TabItemInfoComponent>, result: IFileInfoModelResult, error: boolean): void {\r\n        if (!error && result) {\r\n            this.fileInfo = {\r\n                owner: (result.owner) ? result.owner.substring(result.owner.indexOf('\\\\') + 1) : this.getString('concierge_workflow_no_results'),\r\n                createdDate: (result.createdDate) ?\r\n                    this.datePipe.transform(result.createdDate, 'MM/dd/yyyy HH:mm a') :\r\n                    this.getString('concierge_workflow_no_results'),\r\n                modifiedOwner: (result.modifiedOwner) ?\r\n                    result.modifiedOwner.substring(result.modifiedOwner.indexOf('\\\\') + 1) :\r\n                    this.getString('concierge_workflow_no_results'),\r\n                modifiedDate: (result.modifiedDate) ?\r\n                    this.datePipe.transform(result.modifiedDate, 'MM/dd/yyyy HH:mm a') :\r\n                    this.getString('concierge_workflow_no_results'),\r\n                category: {\r\n                    name: (result.path) ? sourceCode.k2Designer.utilities.ellipsePath(result.path, 'start') : this.getString('concierge_workflow_no_results'),\r\n                    url: '/designer/#app=AppStudio&action=list&filter=category&catid=' + result.categoryId,\r\n                    id: result.categoryId,\r\n                    path: result.path\r\n                },\r\n                title: result.title,\r\n                clientIdentifier: result.clientIdentifier\r\n            };\r\n\r\n            if (result.path && result.path.length) {\r\n                const pieces: string[] = result.path.split('/');\r\n\r\n                this._envService.workFlowCategoryName = (pieces[pieces.length - 1]);\r\n            }\r\n\r\n            if (componentRef) {\r\n                this.loadFileInfoComponent(componentRef);\r\n            }\r\n        } else {\r\n            console.error('Could not render FileInfo ' + (<any>result).toString());\r\n        }\r\n    }\r\n\r\n}\r\n","<div style=\"height: 100%\">\r\n\r\n    <div class=\"rbbn-flex-container\">\r\n        <div class=\"file-nav-items\">\r\n            <div class=\"file-menu-item\" data-isselected=\"true\" (click)=\"selectMenuItem('Info')\" *ngIf=\"showInfoOption\">\r\n                <div>{{getString(\"fileRibbon_info\")}}</div>\r\n            </div>\r\n            <div class=\"file-menu-item\" (click)=\"createNewStudioItem()\" *ngIf=\"isStandalone\">\r\n                <div>{{getString(\"fileRibbon_new\")}}</div>\r\n            </div>\r\n            <div class=\"file-menu-item\" data-isselected=\"false\" (click)=\"selectMenuItem('Options')\">\r\n                <div>{{getString(\"fileRibbon_options\")}}</div>\r\n            </div>\r\n            <div class=\"file-menu-item\" [attr.title]=\"getClosingStatus()\" [ngClass]=\"{'disabled-opacity': !isCloseEnabled()}\" (click)=\"!isCloseEnabled() || selectItem(null)\">\r\n                <div>{{getString(\"fileRibbon_close\")}}</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"file-props\">\r\n            <ng-template k2TabHost></ng-template>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n","import { Component, EventEmitter, Inject, Input, OnDestroy, OnInit, Output } from '@angular/core';\r\nimport { IDeleteProcessContext } from '../../../../../types/models/popup/i-delete-process-context';\r\nimport { ICanvasService } from '../../../../../types/services/canvas/i-canvas.service';\r\nimport { IDataService } from '../../../../../types/services/data/i-data-service';\r\nimport { IEnvironmentService } from '../../../../../types/services/environment/i-environment-service';\r\nimport { INotificationService } from '../../../../../types/services/notification/i-notification.service';\r\nimport { ILegacyResourceService } from '../../../../../types/services/resources/i-legacy-resource.service';\r\nimport { IUserOptions } from '../../../../../types/services/user-options/i-user-options-service';\r\nimport { IValidationService } from '../../../../../types/services/validation/ivalidation.service';\r\nimport { ICloseWFData } from '../../../../../types/uiComponents/ribbon/ICloseWFData';\r\nimport { IFileInfoModel } from '../../../../../types/uiComponents/ribbon/IFileInfoModel';\r\nimport { LegacyResourceServiceToken } from '../../../../legacy-service-factories/resource-service-factory';\r\nimport { CanvasServiceToken } from '../../../../services/canvas/canvas-service-factory';\r\nimport { DataServiceToken } from '../../../../services/data/data-service-factory';\r\nimport { EnvironmentServiceToken } from '../../../../services/environment/environment-service-factory';\r\nimport { NotificationServiceToken } from '../../../../services/notification/notification-service-factory';\r\nimport { PopupService } from '../../../../services/popup/popup.service';\r\nimport { ProcessService } from '../../../../services/process/process.service';\r\nimport { UserOptionsServiceToken } from '../../../../services/user-options/user-options-service-factory';\r\nimport { ValidationServiceToken } from '../../../../services/validation/validation-service-factory';\r\nimport { ErrorSeverity } from '../../../../shared/enums/model/error-severity';\r\nimport { ToastrTypes } from '../../../../shared/enums/model/toastr-types';\r\n\r\n@Component({\r\n    selector: 'app-tab-item-info',\r\n    templateUrl: './tab-item-info.component.html',\r\n    styleUrls: ['./tab-item-info.component.less']\r\n})\r\nexport class TabItemInfoComponent implements OnInit, OnDestroy {\r\n\r\n    @Input() public getString: (resourceId: string, collectionId?: string) => string;\r\n    @Output() public isBusyDeploying = new EventEmitter<boolean>();\r\n    @Output() public isBusyClosing = new EventEmitter<ICloseWFData>();\r\n    @Input() public showNoStartEventsMessage: boolean;\r\n    @Input() fileItemConfig: sourceCode.k2Designer.objectModel.plugin.IConfiguration;\r\n    @Input() public fileItemInfo: IFileInfoModel;\r\n\r\n    public isDeployingProcess: boolean;\r\n    public containsWarnings: boolean;\r\n    public containsErrors: boolean;\r\n    public validationGroups: sourceCode.k2Designer.objectModel.ribbon.IValidationGroup[];\r\n    public workflowTitle: string;\r\n    public workflowDesc: string;\r\n\r\n    private _errorListener: Function;\r\n    private _warningListener: Function;\r\n\r\n    constructor(@Inject(EnvironmentServiceToken) private _envService: IEnvironmentService,\r\n        private _processService: ProcessService,\r\n        @Inject(UserOptionsServiceToken) private _userOptionsService: IUserOptions,\r\n        @Inject(CanvasServiceToken) private _canvasService: ICanvasService,\r\n        @Inject(ValidationServiceToken) private _validationService: IValidationService,\r\n        @Inject(LegacyResourceServiceToken) private _resourceService: ILegacyResourceService,\r\n        @Inject(DataServiceToken) private _dataService: IDataService,\r\n        @Inject(NotificationServiceToken) private _notificationService: INotificationService,\r\n        private _popupService: PopupService) {\r\n\r\n        //TODO: This flag should be set in the process service where deployment is done to ensure it does not reset itself when ribbon unloads\r\n        this.isDeployingProcess = false;\r\n        this.containsWarnings = false;\r\n        this.validationGroups = [];\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        //Show start events warning messages:\r\n        this.setupGotItButtons();\r\n\r\n        const errorList = this._validationService.getErrorList(ErrorSeverity.Error);\r\n        this.containsErrors = errorList.length > 0;\r\n        const warningList = this._validationService.getErrorList(ErrorSeverity.Warning);\r\n        this.containsWarnings = warningList.length > 0;\r\n\r\n        //Listen for changes on validation service, update the containsError flag if there is any errors with error ErrorSeverity\r\n        this._errorListener = this._validationService.listenForErrorList(this.errorListUpdated.bind(this),\r\n            ErrorSeverity.Error);\r\n        if (this.containsErrors) {\r\n            this.errorListUpdated(errorList);\r\n        }\r\n\r\n        //Listen for changes on validation service, update the containsWarning flag if there is any errors with warning ErrorSeverity\r\n        this._warningListener = this._validationService.listenForErrorList(this.warningListUpdated.bind(this),\r\n            ErrorSeverity.Warning);\r\n        if (this.containsWarnings) {\r\n            this.warningListUpdated(warningList);\r\n        }\r\n\r\n        //Workflow Information:\r\n        this.workflowTitle = this._envService.workflowFullname;\r\n        this.workflowDesc = (this._processService.root.description)\r\n            ? this._processService.root.description\r\n            : this.getString('concierge_workflow_no_results');\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this._errorListener();\r\n        this._warningListener();\r\n    }\r\n\r\n    public getDeploymentStatus(): string {\r\n        let result = '';\r\n\r\n        if (this.isDeployingProcess) {\r\n            result = this._resourceService.getString('workflow_deployment_in_progress');\r\n        }\r\n        else if (this.containsErrors) {\r\n            result = this._resourceService.getString('workflow_deployment_disabled_errors');\r\n        }\r\n        else if (this._dataService.getOpenRequestCount() > 0\r\n            || this._processService.getInstructionCount() > 0\r\n            || this._processService.allowProcessing() === false) {\r\n            result = this._resourceService.getString('workflow_deployment_disabled_saving_workflow_to_server');\r\n        }\r\n        return result;\r\n    }\r\n\r\n    //Deploy\r\n    private deploymentToastr: PNotify;\r\n    public deployProcess(): void {\r\n        if (this.isDeployingProcess === false && this.isDeploymentEnabled()) {\r\n            this.isDeployingProcess = true;\r\n\r\n            const onEventRaisedCallBack = () => {\r\n                try {\r\n\r\n                    this._processService.deployProcess(this.onDeploymentCompleted.bind(this));\r\n                }\r\n                catch (e) {\r\n                    this._processService.enableProcessing();\r\n                    this.isDeployingProcess = false;\r\n                    if (this.deploymentToastr) {\r\n                        this.deploymentToastr.remove();\r\n                        this.deploymentToastr = null;\r\n                    }\r\n                    console.error('deployProcess error: ' + e.toString());\r\n                }\r\n            };\r\n\r\n            this.deploymentToastr = this._notificationService.toastr(this.getString('workflow_deployment_started_title'),\r\n                this.getString('workflow_deployment_started'), ToastrTypes.deployment);\r\n            this._processService.requestProcessingCompleteNotification(true, false, onEventRaisedCallBack);\r\n\r\n            this.isBusyDeploying.emit(this.isDeployingProcess);\r\n        }\r\n    }\r\n\r\n    public isDeploymentEnabled(): boolean {\r\n        let result = false;\r\n\r\n        if (this._validationService) {\r\n            result = !this.containsErrors;\r\n        }\r\n        if (this._dataService.getOpenRequestCount() > 0) {\r\n            return false;\r\n        }\r\n        if (this._processService.getInstructionCount() > 0) {\r\n            return false;\r\n        }\r\n        if (this._processService.allowProcessing() === false) {\r\n            return false;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private setupGotItButtons(): void {\r\n        if (!this._userOptionsService || !this._envService) {\r\n            this.showNoStartEventsMessage = false;\r\n            return;\r\n        }\r\n\r\n        this.showNoStartEventsMessage =\r\n            this._userOptionsService.userOptions.tips[<number>sourceCode.k2Designer.objectModel.workflow.itemProvider.UserOptionsTipTypes.HelpStartWorkflowTips] &&\r\n            !this._envService.getGlobalAttributeValue('StartWorkflowIntegrationExists');\r\n    }\r\n\r\n    public btnGotItClick(): void {\r\n        this.showNoStartEventsMessage = false;\r\n\r\n        this._userOptionsService.setTipValue(sourceCode.k2Designer.objectModel.workflow.itemProvider.UserOptionsTipTypes.HelpStartWorkflowTips, false);\r\n    }\r\n\r\n    public btnShowStartStepClick(): void {\r\n        this._canvasService.selectStepByReference(this._processService.root.nodes[0].getReference());\r\n    }\r\n\r\n    /**\r\n     * Invokes the delete confirmation popup\r\n     */\r\n    public deleteProcess(): void {\r\n        const context = <IDeleteProcessContext>{\r\n            processToDeleteFQN: this._envService.workflowFullname,\r\n            onDeleteCompletedCallback: this.onDeleteComplete.bind(this)\r\n        };\r\n\r\n        this._popupService.showDeleteProcessDialog(this.getString('delete_process_heading_text'), context);\r\n    }\r\n\r\n    /**\r\n     * This function is the callback that will fire after workflow has been deleted from server.\r\n     * It will close and return to exit url (designer)\r\n     *\r\n     * @param deleteSuccess - indicates if delete was successful. if delete was not succesful, error toast would have displayed and popup\r\n     * and workflow designer will remain open.\r\n     */\r\n    private onDeleteComplete(deleteSuccess: boolean): void {\r\n        if (deleteSuccess) {\r\n            //add parameters to exit url that will let exit page know that workflow was deleted\r\n            const processId = this._envService.query.guid || this._envService.query.id;\r\n            const params = {\r\n                wfaction: 'delete',\r\n                wfid: processId\r\n            };\r\n            //close without flushing (nothing to flush)\r\n            this.isBusyClosing.emit({\r\n                close: true,\r\n                item: null,\r\n                params,\r\n                categoryId: this.fileItemInfo?.category?.id\r\n            });\r\n        }\r\n    }\r\n\r\n    private onDeploymentCompleted(title: string, message: string, type: ToastrTypes): void {\r\n        this._processService.enableProcessing();\r\n        this.isDeployingProcess = false;\r\n\r\n        if (type === ToastrTypes.success) {\r\n            const adr = this._envService.autoDiscoverResult;\r\n            if (adr && adr.webService && adr.webService.Value && adr.webService.Value.length > 0) {\r\n                let urlStr: string = sourceCode.k2Designer.utilities.getsmartFormsBaseUrl(this._envService);\r\n\r\n                // All workflows\r\n                if (urlStr[urlStr.length - 1] !== '/') {\r\n                    urlStr += '/Management/#WorkflowServer/Workflows';\r\n                }\r\n                else {\r\n                    urlStr += 'Management/#WorkflowServer/Workflows';\r\n                }\r\n\r\n                // Attempt Workflow Category\r\n                if (this._envService.workflowPrefixedCategory) {\r\n                    urlStr += '/' + this._envService.workflowPrefixedCategory;\r\n                }\r\n\r\n                message += ` ${this.getString('workflow_deployment_management_pre_link')}\r\n<a href=\"${urlStr}\" target=\"_blank\" class=\"\">${this.getString('workflow_deployment_management_link')}</a>`;\r\n\r\n            }\r\n\r\n            this.isBusyDeploying.emit(this.isDeployingProcess);\r\n        }\r\n\r\n        if (this.deploymentToastr && (this.deploymentToastr.state === 'open' || this.deploymentToastr.state === 'opening')) {\r\n            this._notificationService.toastr(title, message, type, 0, null, this.deploymentToastr);\r\n        }\r\n        else {\r\n            this._notificationService.toastr(title, message, type, 0, null, null);\r\n        }\r\n        this.deploymentToastr = null;\r\n\r\n        //if (!this._scope.$$phase)\r\n        //    this._scope.$apply();\r\n    }\r\n\r\n    /**\r\n     * Listen for changes on validation service, update the containsWarning flag if there is any errors with warning severity\r\n     */\r\n    private warningListUpdated(warningList: Array<sourceCode.k2Designer.objectModel.core.model.IErrorInformation>): void {\r\n\r\n        this.containsWarnings = warningList.length > 0;\r\n\r\n        const deployWarningCnf = <sourceCode.k2Designer.objectModel.ribbon.IDeploymentWarningsConfiguration>this.fileItemConfig;\r\n\r\n        const validationGroupsDictionary = {};\r\n\r\n        const warningsDictionary = {};\r\n\r\n        this.validationGroups = [];\r\n\r\n        for (const warning of warningList) {\r\n            warningsDictionary[warning.validationType] = true;\r\n        }\r\n\r\n        //go through each warning and filter each validationGroup object down to objects that have validationTypes that match for that warning's validation type\r\n        this.validationGroups = deployWarningCnf.validationGroups.filter((validationGroup) => {\r\n            const valTypes = validationGroup.validationTypes.filter((valType) => {\r\n\r\n                if (warningsDictionary[sourceCode.k2Designer.objectModel.core.model.ValidationTypes[valType]]\r\n                    && !validationGroupsDictionary[validationGroup.validationGroupName]) {\r\n                    validationGroupsDictionary[validationGroup.validationGroupName] = true;\r\n                    return true;\r\n                }\r\n                return false;\r\n\r\n            });\r\n            return valTypes.length > 0;\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * Listen for changes on validation service, update the containsError flag if there is any errors with error severity\r\n     */\r\n    private errorListUpdated(errorList: Array<sourceCode.k2Designer.objectModel.core.model.IErrorInformation>): void {\r\n\r\n        this.containsErrors = errorList.length > 0;\r\n    }\r\n}\r\n","<div class=\"file-item-container\">\r\n\r\n    <div class=\"left\">\r\n        <div class=\"row\">\r\n            <div class=\"content\" [attr.title]=\"getDeploymentStatus()\"\r\n                 [ngClass]=\"{ 'disabled-opacity' : !isDeploymentEnabled() || isDeployingProcess }\"\r\n                 (click)=\"deployProcess()\">\r\n                <k2-badges class=\"icon icon-set-toolbar icon-size32 ic-deploy\"\r\n                           [forceShow]=\"containsErrors\"></k2-badges>\r\n                <div class=\"text\">\r\n                    <div class=\"heading\">{{getString(\"Ribbon_File_Info_Deploy\")}}</div>\r\n                    <div class=\"description\">{{getString(\"Ribbon_File_Info_Deploy_description\")}}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"no-start-events-container row\" *ngIf=\"showNoStartEventsMessage\">\r\n            <div>\r\n                <span class=\"icon icon-set-steps icon-size32 ic-startevent icon-container\"></span>\r\n                <div class=\"heading\">{{getString(\"Ribbon_File_Info_No_Start_Events_Header\")}}</div>\r\n            </div>\r\n            <p class=\"description\">\r\n                {{getString(\"Ribbon_File_Info_No_Start_Events_Desciption\")}}\r\n            </p>\r\n            <div>\r\n                <button id=\"btnGotIt\" class=\"btn-got-it\" (click)=\"btnGotItClick()\">{{getString(\"Ribbon_File_Info_Got_It\")}}</button>\r\n                <button id=\"btnShowStartStep\" class=\"button btn-show-me\" (click)=\"btnShowStartStepClick()\">{{getString(\"Ribbon_File_Info_Show_Me\")}}</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"warnings-container row\" *ngIf=\"containsWarnings && !containsErrors\">\r\n            <div class=\"warning-item\" [attr.title]=\"getString(item.validationString)\" *ngFor=\"let item of validationGroups\">\r\n                <div class=\"warning-icon\">\r\n                    <span [ngClass]=\"item.validationIconClass\"></span>\r\n                </div>\r\n                <div class=\"warning-text\">\r\n                    <div>\r\n                        {{getString(item.validationString)}}\r\n                        <k2-help-link [k2ContextId]=\"item.validationHelpLinkId\"></k2-help-link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--TODO these components are permanently hidden in legacy, so have not yet been converted to new Angular\r\n            Might be able to remove completely if discovered that they will no longer needed?\r\n        <div class=\"row hide\" data-ng-include=\"'uiComponents/ribbon/plugins/file/fileMenuItems/infoTabItems/saveDraft.aspx'\">\r\n        </div>\r\n\r\n        <div class=\"row hide\" data-ng-include=\"'uiComponents/ribbon/plugins/file/fileMenuItems/infoTabItems/versions.aspx'\">\r\n        </div>\r\n\r\n        <div class=\"row hide\" data-ng-include=\"'uiComponents/ribbon/plugins/file/fileMenuItems/infoTabItems/exportToFile.aspx'\">\r\n        </div>\r\n\r\n        <div class=\"row hide\" data-ng-include=\"'uiComponents/ribbon/plugins/file/fileMenuItems/infoTabItems/importFromFile.aspx'\">\r\n        </div>-->\r\n\r\n        <div class=\"content row\" (click)=\"deleteProcess()\">\r\n            <span class=\"icon icon-set-toolbar icon-size32 ic-delete\"></span>\r\n            <div class=\"text\">\r\n                <div class=\"heading\">{{getString(\"Ribbon_File_Info_Delete_text\")}}</div>\r\n                <div class=\"description\">{{getString(\"Ribbon_File_Info_Delete_description\")}}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"right\">\r\n        <div class=\"row\">\r\n            <div class=\"content\">\r\n                <h4>{{getString(\"Ribbon_File_Info_Properties\")}}</h4>\r\n                <div class=\"\">\r\n                    <div class=\"left\">\r\n                        <span class=\"text\">{{getString(\"Ribbon_File_Info_PropertiesName\")}}</span>\r\n                    </div>\r\n                    <div class=\"right\">\r\n                        <div class=\"file-property-workflow-title\" k2TooltipBasic=\"\">\r\n                            <span class=\"text\" [attr.title]=\"workflowTitle\">{{workflowTitle}}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"\">\r\n                    <div class=\"left\">\r\n                        <span class=\"text\">{{getString(\"Ribbon_File_Info_PropertiesDescription\")}}</span>\r\n                    </div>\r\n                    <div class=\"right\">\r\n                        <div class=\"file-property-workflow-desc\" k2TooltipBasic=\"\">\r\n                            <span class=\"text\" [attr.title]=\"workflowDesc\">{{workflowDesc}}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"\">\r\n                    <div class=\"left\">\r\n                        <span class=\"text\">{{getString(\"Ribbon_File_Info_PropertiesLocation\")}}</span>\r\n                    </div>\r\n                    <div class=\"right\">\r\n                        <a class=\"hyperlink-control secondary underline file-property-workflow-title\" target=\"_blank\"\r\n                           href=\"{{fileItemInfo?.category?.url}}\" [attr.title]=\"fileItemInfo?.category?.name\">{{fileItemInfo?.category?.name}}</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"row\">\r\n            <div class=\"content\">\r\n                <h4>{{getString(\"Ribbon_File_Info_Dates\")}}</h4>\r\n                <div class=\"\">\r\n                    <div class=\"left\">\r\n                        <span class=\"text\">{{getString(\"Ribbon_File_Info_DatesLastModified\")}}</span>\r\n                    </div>\r\n                    <div class=\"right\">\r\n                        <span class=\"text\">{{fileItemInfo?.modifiedDate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"\">\r\n                    <div class=\"left\">\r\n                        <span class=\"text\">{{getString(\"Ribbon_File_Info_DatesCreated\")}}</span>\r\n                    </div>\r\n                    <div class=\"right\">\r\n                        <span class=\"text\">{{fileItemInfo?.createdDate}}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"row\">\r\n            <div class=\"content\">\r\n                <h4>{{getString(\"Ribbon_File_Info_People\")}}</h4>\r\n                <div class=\"\">\r\n                    <div class=\"left\">\r\n                        <span class=\"text\">{{getString(\"Ribbon_File_Info_PeopleAuthor\")}}</span>\r\n                    </div>\r\n                    <div class=\"right\">\r\n                        <span class=\"text\">{{fileItemInfo?.owner}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"\">\r\n                    <div class=\"left\">\r\n                        <span class=\"text\">{{getString(\"Ribbon_File_Info_PeopleLastModified\")}}</span>\r\n                    </div>\r\n                    <div class=\"right\">\r\n                        <span class=\"text\">{{fileItemInfo?.modifiedOwner}}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--TODO these components are permanently hidden in legacy, so have not yet been converted to new Angular\r\n        Might be able to remove completely if discovered that they will no longer needed?\r\n        <div class=\"row hide\" data-ng-include=\"'uiComponents/ribbon/plugins/file/fileMenuItems/infoTabItems/dependencies.aspx'\">\r\n        </div>-->\r\n    </div>\r\n</div>\r\n","import { Component, OnInit, Inject, Input } from '@angular/core';\r\nimport { IEnvironmentService } from '../../../../../types/services/environment/i-environment-service';\r\nimport { IUserOptions } from '../../../../../types/services/user-options/i-user-options-service';\r\nimport { EnvironmentServiceToken } from '../../../../services/environment/environment-service-factory';\r\nimport { UserOptionsServiceToken } from '../../../../services/user-options/user-options-service-factory';\r\nimport { ChooseControlTypes } from '../../../../shared/enums/choose-control/choose-control-types';\r\n\r\nexport interface ITip {\r\n    val: boolean;\r\n    title: string;\r\n}\r\n\r\n@Component({\r\n    selector: 'app-tab-item-options',\r\n    templateUrl: './tab-item-options.component.html',\r\n    styleUrls: ['./tab-item-options.component.less']\r\n})\r\nexport class TabItemOptionsComponent implements OnInit {\r\n\r\n    @Input() public getString: (resourceId: string, collectionId?: string) => string;\r\n\r\n    public tips: { [key: number]: ITip };\r\n    public objectKeys: (o: object) => string[];\r\n    public k2ToggleButtonClicked: (checked: boolean, model: any) => void;\r\n    public chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n    constructor(@Inject(UserOptionsServiceToken) private _userOptionsService: IUserOptions) {\r\n\r\n        this.tips = {};\r\n        for (const key in this._userOptionsService.userOptions.tips) {\r\n            const keyNum: number = parseInt(key, 10);\r\n            this.tips[key] = {\r\n                val: this._userOptionsService.userOptions.tips[key],\r\n                title: sourceCode.k2Designer.objectModel.workflow.itemProvider.UserOptionsTipTypesImplementor(keyNum)\r\n            };\r\n        }\r\n        this.objectKeys = Object.keys;\r\n        this.k2ToggleButtonClicked = this._k2ToggleButtonClicked.bind(this);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    public k2SetAlltipsClicked(): void {\r\n        this._userOptionsService.setAllTipsValue();\r\n\r\n        for (const key in this._userOptionsService.userOptions.tips) {\r\n            this._userOptionsService.userOptions.tips[key] = true;\r\n            this.tips[key].val = true;\r\n        }\r\n    }\r\n\r\n    private _k2ToggleButtonClicked(checked: boolean, model: any): void {\r\n        this._userOptionsService.setTipValue(<sourceCode.k2Designer.objectModel.workflow.itemProvider.UserOptionsTipTypes>(<number>model), checked);\r\n        this.tips[model].val = checked;\r\n    };\r\n\r\n    public getUserTipTitle(key: any): string {\r\n        return sourceCode.k2Designer.objectModel.workflow.itemProvider.UserOptionsTipTypesImplementor(<number>key);\r\n    }\r\n\r\n    get isCanvasSelectionInverted(): boolean {\r\n        return this._userOptionsService?.userOptions?.canvasSelectionInverted;\r\n    }\r\n\r\n    set isCanvasSelectionInverted(val: boolean) {\r\n        if (this.isCanvasSelectionInverted !== val) {\r\n            this._userOptionsService?.changeCanvasSelectionInverted();\r\n        }\r\n    }\r\n}\r\n","<div class=\"file-item-container\">\r\n    <div class=\"flexbox-container-file-options\">\r\n        <div>\r\n            <div class=\"user-options-tips-container\">\r\n                <div class=\"header\">\r\n                    {{getString(\"Ribbon_File_Options_TipHeader\")}}\r\n                </div>\r\n                <div class=\"description\">\r\n                    {{getString(\"Ribbon_File_Options_TipDescription\")}}\r\n                </div>\r\n                <div class=\"user-options-tips\">\r\n                    <div class=\"user-options-tip reset-all\">\r\n                        <div class=\"k2-btn k2-btn-add\" (click)=\"k2SetAlltipsClicked()\">\r\n                            <a class=\"hyperlink-control primary\">\r\n                                {{getString(\"Ribbon_File_Options_Tips_ResetAll\")}}\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"user-options-tip\" *ngFor=\"let key of objectKeys(tips)\">\r\n                        <k2-toggle-switch class=\"user-options-tip-toggle\" [k2Checked]=\"tips[key].val\" [k2Model]=\"key\" [k2ToggleButtonClicked]=\"k2ToggleButtonClicked\"></k2-toggle-switch>\r\n                        <label>{{tips[key].title}}</label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <div class=\"user-options-tips-container\">\r\n                <div class=\"header\">\r\n                    {{getString(\"Ribbon_File_Options_CanvasInteractionHeader\")}}\r\n                </div>\r\n                <div class=\"description\">\r\n                    {{getString(\"Ribbon_File_Options_CanvasInteractionDescription\")}}\r\n                </div>\r\n                <div class=\"user-options-tips\">\r\n                    <div class=\"user-options-tip reset-all\">\r\n                        <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                                              [(checked)]=\"isCanvasSelectionInverted\"\r\n                                              id=\"chkSelectionInverted\"\r\n                                              name=\"chkSelectionInverted\"\r\n                                              [displayText]=\"getString('Ribbon_File_Options_CanvasInteraction_Inverted')\">\r\n                        </k2-choose-control-v2>\r\n                    </div>\r\n                    <div class=\"user-options-tip full-height\">\r\n                        <div class=\"option-container\">\r\n                            <div class=\"func-icon\"><i class=\"icon icon-set-setsettings icon-size32 ic-pancanvas\"></i></div>\r\n                            <div class=\"labels-container\">\r\n                                <label class=\"main-text\">{{getString(\"Ribbon_File_Options_CanvasInteraction_PanCanvasText\")}}</label>\r\n                                <label class=\"sub-text\" *ngIf=\"!isCanvasSelectionInverted\">{{getString(\"Ribbon_File_Options_CanvasInteraction_PanCanvasSubText\")}}</label>\r\n                                <label class=\"sub-text\" *ngIf=\"isCanvasSelectionInverted\">{{getString(\"Ribbon_File_Options_CanvasInteraction_DragSelectSubText\")}}</label>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"option-container\">\r\n                            <div class=\"func-icon\"><i class=\"icon icon-set-setsettings icon-size32 ic-dragselect\"></i></div>\r\n                            <div class=\"labels-container\">\r\n                                <label class=\"main-text\">{{getString(\"Ribbon_File_Options_CanvasInteraction_DragSelectText\")}}</label>\r\n                                <label class=\"sub-text\" *ngIf=\"!isCanvasSelectionInverted\">{{getString(\"Ribbon_File_Options_CanvasInteraction_DragSelectSubText\")}}</label>\r\n                                <label class=\"sub-text\" *ngIf=\"isCanvasSelectionInverted\">{{getString(\"Ribbon_File_Options_CanvasInteraction_PanCanvasSubText\")}}</label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit, Inject, Input } from '@angular/core';\r\nimport { IContextProviderService } from '../../../../types/services/context-provider/i-context-provider-service';\r\nimport { IObjectModelService } from '../../../../types/services/object-model/i-object-model-service';\r\nimport { ILegacyResourceService } from '../../../../types/services/resources/i-legacy-resource.service';\r\nimport { ISelectionService } from '../../../../types/services/selection/i-selection-service';\r\nimport { LegacyResourceServiceToken } from '../../../legacy-service-factories/resource-service-factory';\r\nimport { ClipboardServiceToken } from '../../../services/clipboard/clipboard-service-factory';\r\nimport { CommandServiceToken } from '../../../services/command/command-service-factory';\r\nimport { ContextProviderServiceToken } from '../../../services/context-provider/context-provider-service-factory';\r\nimport { ObjectModelServiceToken } from '../../../services/object-model/object-model-service-factory';\r\nimport { SelectionServiceToken } from '../../../services/selection/selection-service-factory';\r\n\r\n@Component({\r\n    selector: 'tab-home',\r\n    templateUrl: './tab-home.component.html',\r\n    styleUrls: ['./tab-home.component.less']\r\n})\r\n\r\nexport class TabHomeComponent implements OnInit {\r\n\r\n    @Input() uiComp: sourceCode.k2Designer.objectModel.plugin.IDefinition;\r\n    @Input() public togglePin: () => void;\r\n    @Input() public getString: (resourceId: string, collectionId?: string) => string;\r\n\r\n    public resources?: any;\r\n    public canCopy: boolean;\r\n    public canPaste: boolean;\r\n    public canCut: boolean;\r\n    public clipboardEnabled: boolean;\r\n\r\n    private _context: string;\r\n\r\n    constructor(@Inject(LegacyResourceServiceToken) private _resourceService: ILegacyResourceService,\r\n        @Inject(ClipboardServiceToken) private _clipBoardService: IClipboardService,\r\n        @Inject(CommandServiceToken) private _commandService: ICommandService,\r\n        @Inject(SelectionServiceToken) private _selectionService: ISelectionService,\r\n        @Inject(ObjectModelServiceToken) private _objectModelService: IObjectModelService<any>,\r\n        @Inject(ContextProviderServiceToken) private _contextProviderService: IContextProviderService) {\r\n\r\n        this.resources = {\r\n            homeRibbon_paste: this._resourceService.getString('homeRibbon_paste'),\r\n            homeRibbon_cut: this._resourceService.getString('homeRibbon_cut'),\r\n            homeRibbon_copy: this._resourceService.getString('homeRibbon_copy'),\r\n            homeRibbon_selectAll: this._resourceService.getString('homeRibbon_selectAll'),\r\n            homeRibbon_alignTop: this._resourceService.getString('homeRibbon_alignTop'),\r\n            homeRibbon_alignBottom: this._resourceService.getString('homeRibbon_alignBottom'),\r\n            homeRibbon_alignLeft: this._resourceService.getString('homeRibbon_alignLeft'),\r\n            homeRibbon_color: this._resourceService.getString('homeRibbon_color'),\r\n            homeRibbon_rename: this._resourceService.getString('homeRibbon_rename'),\r\n            ribbon_watermark_align: this._resourceService.getString('ribbon_watermark_align'),\r\n            ribbon_watermark_step: this._resourceService.getString('ribbon_watermark_step'),\r\n            homeRibbon_notes: this._resourceService.getString('homeRibbon_notes'),\r\n            homeRibbon_properties: this._resourceService.getString('homeRibbon_properties'),\r\n            homeRibbon_grid: this._resourceService.getString('homeRibbon_grid'),\r\n            homeRibbon_1to1: this._resourceService.getString('homeRibbon_1to1'),\r\n            homeRibbon_fittowindow: this._resourceService.getString('homeRibbon_fittowindow'),\r\n            ribbon_watermark_view: this._resourceService.getString('ribbon_watermark_view'),\r\n            homeRibbon_startProcess: this._resourceService.getString('homeRibbon_startProcess')\r\n        };\r\n\r\n        this._context = 'WorkflowDesigner';\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.updateVars();\r\n    }\r\n\r\n    public canPasteItem(): boolean {\r\n        this.updateVars();\r\n        return this.canPaste && this._clipBoardService.hasData();\r\n    }\r\n\r\n    public pasteItem(): void {\r\n        this.updateVars();\r\n        if (this.canPaste) {\r\n            if (this._clipBoardService.paste()) {\r\n                this.updateVars();\r\n            }\r\n        }\r\n    }\r\n\r\n    public copyItem(): void {\r\n        if (this.canCopy) {\r\n            if (this._clipBoardService.copy()) {\r\n                this.updateVars();\r\n            }\r\n        }\r\n    }\r\n\r\n    public cutItem(): void {\r\n        this.updateVars();\r\n        if (this.canCut) {\r\n            if (this._clipBoardService.cut()) {\r\n                this.updateVars();\r\n            }\r\n        }\r\n    }\r\n\r\n    public canCutItem(): boolean {\r\n        this.updateVars();\r\n        const currentContext = this.getCurrentContext();\r\n\r\n        return this.canCut && currentContext && currentContext.length !== 0;\r\n    }\r\n\r\n    public canCopyItem(): boolean {\r\n        this.updateVars();\r\n        const currentContext = this.getCurrentContext();\r\n\r\n        return this.canCopy && currentContext && currentContext.length !== 0;\r\n    }\r\n\r\n    public selectAll(): void {\r\n        this._commandService.invokeCommand('Select All', false, false, false, true);\r\n        this.updateVars();\r\n    }\r\n\r\n    public canAlign(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public canRename(): boolean {\r\n        const selection_count = this._selectionService.getSelection(this._context).length;\r\n\r\n        if (selection_count === 1) {\r\n            return this._selectionService.hasSelection(this._context);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public renameSelection(): void {\r\n        this._commandService.setCurrentContext(this._context);\r\n        this._commandService.invokeCommand('Rename', true, false, false, true);\r\n    }\r\n\r\n    private getCurrentContext(): any[] {\r\n        return this._contextProviderService.getContextProviderFromModel(this._objectModelService.root).getCntx();\r\n    }\r\n\r\n    private updateVars(): void {\r\n        this.canCopy = this._clipBoardService.canCopy();\r\n        this.canPaste = this._clipBoardService.canPaste();\r\n        this.canCut = this._clipBoardService.canCut();\r\n        this.clipboardEnabled = this._clipBoardService.clipboardEnabled === true;\r\n    }\r\n\r\n}\r\n","<div>\r\n    <div class=\"ribbon-content max-ribbon\">\r\n        <!--Start of the full size content-->\r\n        <div class=\"ribbon-bar-group\" [ngClass]=\"{ 'hide': !clipboardEnabled }\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\" [ngClass]=\"{ 'disabled': !canPasteItem(), '': canPasteItem() }\" (click)=\"pasteItem()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-paste\"></i>{{getString(\"homeRibbon_paste\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\" [ngClass]=\"{ 'disabled': !canCutItem(), '': canCutItem() }\" (click)=\"cutItem()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-cut\"></i>{{getString(\"homeRibbon_cut\")}}</a>\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\" [ngClass]=\"{ 'disabled': !canCopyItem(), '': canCopyItem() }\" (click)=\"copyItem()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-copy\"></i>{{getString(\"homeRibbon_copy\")}}</a>\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\" (click)=\"selectAll()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-selectall\"></i>{{getString(\"homeRibbon_selectAll\")}}</a>\r\n            </div>\r\n            <label class=\"ribbon-bar-group-label\">{{getString(\"ribbon_watermark_clipboard\")}}</label>\r\n        </div>\r\n        <div class=\"ribbon-bar-group\" [ngClass]=\"{ 'hide': clipboardEnabled }\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <div>\r\n                    <a class=\"btn ribbon-btn-lg\" (click)=\"selectAll()\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-selectall\"></i>{{getString(\"homeRibbon_selectAll\")}}</a>\r\n                </div>\r\n            </div>\r\n            <label class=\"ribbon-bar-group-label\">{{getString(\"ribbon_watermark_clipboard\")}}</label>\r\n        </div>\r\n\r\n        <div class=\"ribbon-bar-group hide\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-md\" [ngClass]=\"{'disabled': !canAlign()}\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-aligntop\"></i>{{getString(\"homeRibbon_alignTop\")}}</a>\r\n                <a class=\"btn ribbon-btn-md\" [ngClass]=\"{'disabled': !canAlign()}\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-alignbottom\"></i>{{getString(\"homeRibbon_alignBottom\")}}</a>\r\n                <a class=\"btn ribbon-btn-md \" [ngClass]=\"{'disabled': !canAlign()}\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-alignleft\"></i>{{getString(\"homeRibbon_alignLeft\")}}</a>\r\n            </div>\r\n            <label class=\"ribbon-bar-group-label\">{{getString(\"ribbon_watermark_align\")}}</label>\r\n        </div>\r\n        <div class=\"ribbon-bar-group\">\r\n            <div class=\"ribbon-bar-group-segment hide\">\r\n                <a class=\"btn ribbon-btn-lg dropdown-toggle\" role=\"button\" data-toggle=\"dropdown\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-color\"></i>{{getString(\"homeRibbon_color\")}} <span class=\"caret\"></span></a>\r\n                <ul class=\"dropdown-menu\" role=\"menu\">\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 1</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 2</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 3</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 4</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 5</a></li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <div>\r\n                    <a class=\"btn ribbon-btn-lg\" [ngClass]=\"{'disabled': !canRename()}\" (click)=\"renameSelection()\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-rename\"></i>{{getString(\"homeRibbon_rename\")}}></a>\r\n                </div>\r\n            </div>\r\n            <label class=\"ribbon-bar-group-label\">{{getString(\"ribbon_watermark_step\")}}</label>\r\n        </div>\r\n        <div class=\"ribbon-bar-group hide\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-notes\"></i>{{getString(\"homeRibbon_Notes\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-properties\"></i>{{getString(\"homeRibbon_properties\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment hide\">\r\n                <a class=\"btn ribbon-btn-lg dropdown-toggle\" role=\"button\" data-toggle=\"dropdown\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-resizegrid_gridsizedialog\"></i>{{getString(\"homeRibbon_grid\")}} <span class=\"caret\"></span></a>\r\n                <ul class=\"dropdown-menu\" role=\"menu\">\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>{{getString(\"homeRibbon_grid\")}}</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>{{getString(\"homeRibbon_1to1\")}}</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>{{getString(\"homeRibbon_fittowindow\")}}</a></li>\r\n                </ul>\r\n            </div>\r\n            <label class=\"ribbon-bar-group-label\">{{getString(\"ribbon_watermark_view\")}}</label>\r\n        </div>\r\n        <div class=\"ribbon-bar-group hide\" data-wfrbngrprszord=\"3\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-startprocess\"></i>{{getString(\"homeRibbon_startProcess\")}}</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!--End of the full size content-->\r\n    <div class=\"ribbon-content mid-ribbon not-showing\">\r\n        <!--Start of the mid size content-->\r\n        <div class=\"ribbon-bar-group\" [ngClass]=\"{ 'hide': !clipboardEnabled }\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\" [ngClass]=\"{ 'disabled': !canPaste, '': canPaste }\" (click)=\"pasteItem()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-paste\"></i>{{getString(\"homeRibbon_paste\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\" [ngClass]=\"{ 'disabled': !canCut, '': canCut }\" (click)=\"cutItem()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-cut\"></i>{{getString(\"homeRibbon_cut\")}}</a>\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\" [ngClass]=\"{ 'disabled': !canCopy, '': canCopy }\" (click)=\"copyItem()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-copy\"></i>{{getString(\"homeRibbon_copy\")}}</a>\r\n                <a class=\"btn ribbon-btn-md \" role=\"button\"><i class=\"ribbon-sprite sprite-no-icon16\"></i>Select All</a>\r\n            </div>\r\n        </div>\r\n        <div class=\"ribbon-bar-group\" [ngClass]=\"{ 'hide': clipboardEnabled }\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <div>\r\n                    <a class=\"btn ribbon-btn-lg\" (click)=\"selectAll()\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-selectall\"></i>{{getString(\"homeRibbon_selectAll\")}}</a>\r\n                </div>\r\n            </div>\r\n            <label class=\"ribbon-bar-group-label\">{{getString(\"ribbon_watermark_clipboard\")}}</label>\r\n        </div>\r\n        <div class=\"ribbon-bar-group hide\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-aligntop\"></i>{{getString(\"homeRibbon_alignTop\")}}</a>\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-alignbottom\"></i>{{getString(\"homeRibbon_alignBottom\")}}</a>\r\n                <a class=\"btn ribbon-btn-md \" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-alignleft\"></i>{{getString(\"homeRibbon_alignLeft\")}}</a>\r\n            </div>\r\n        </div>\r\n        <div class=\"ribbon-bar-group hide\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg dropdown-toggle\" role=\"button\" data-toggle=\"dropdown\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-color\"></i>{{getString(\"homeRibbon_color\")}} <span class=\"caret\"></span></a>\r\n                <ul class=\"dropdown-menu\" role=\"menu\">\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 1</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 2</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 3</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 4</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 5</a></li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-rename\"></i>{{getString(\"homeRibbon_rename\")}}></a>\r\n            </div>\r\n        </div>\r\n        <div class=\"ribbon-bar-group hide\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-notes\"></i>{{getString(\"homeRibbon_Notes\")}}</a>\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-properties\"></i>{{getString(\"homeRibbon_properties\")}}</a>\r\n                <a class=\"btn ribbon-btn-md dropdown-toggle\" role=\"button\" data-toggle=\"dropdown\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-resizegrid_gridsizedialog\"></i>{{getString(\"homeRibbon_grid\")}} <span class=\"caret\"></span></a>\r\n                <ul class=\"dropdown-menu\" role=\"menu\">\r\n                    <li><a tabindex=\"-1\" href=\"#\"><i class=\"icon generic icon-icon-placeholder\"></i>{{getString(\"homeRibbon_grid\")}}</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"#\"><i class=\"icon generic icon-icon-placeholder\"></i>{{getString(\"homeRibbon_1to1\")}}</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"#\"><i class=\"icon generic icon-icon-placeholder\"></i>{{getString(\"homeRibbon_fittowindow\")}}</a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class=\"ribbon-bar-group hide\" data-wfrbngrprszord=\"3\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-startprocess\"></i>{{getString(\"homeRibbon_startProcess\")}}</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!--End of the mid size content-->\r\n    <div class=\"ribbon-content small-ribbon not-showing\">\r\n        <!--Start of the small size content-->\r\n        <div class=\"ribbon-bar-group\" [ngClass]=\"{ 'hide': !clipboardEnabled }\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\" [ngClass]=\"{ 'disabled': !canPaste, '': canPaste }\" (click)=\"pasteItem()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-paste\"></i>{{getString(\"homeRibbon_paste\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\" [ngClass]=\"{ 'disabled': !canCut, '': canCut }\" (click)=\"cutItem()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-cut\"></i>{{getString(\"homeRibbon_cut\")}}</a>\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\" [ngClass]=\"{ 'disabled': !canCopy, '': canCopy }\" (click)=\"copyItem()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-copy\"></i>{{getString(\"homeRibbon_copy\")}}</a>\r\n                <a class=\"btn ribbon-btn-md \" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-selectall\"></i>{{getString(\"homeRibbon_selectAll\")}}</a>\r\n            </div>\r\n        </div>\r\n        <div class=\"ribbon-bar-group\" [ngClass]=\"{ 'hide': clipboardEnabled }\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <div>\r\n                    <a class=\"btn ribbon-btn-lg\" (click)=\"selectAll()\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-selectall\"></i>{{getString(\"homeRibbon_selectAll\")}}</a>\r\n                </div>\r\n            </div>\r\n            <label class=\"ribbon-bar-group-label\">{{getString(\"ribbon_watermark_clipboard\")}}</label>\r\n        </div>\r\n        <div class=\"ribbon-bar-group hide\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg dropdown-toggle\" role=\"button\" data-toggle=\"dropdown\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-aligntop\"></i>{{getString(\"homeRibbon_align\")}} <span class=\"caret\"></span></a>\r\n                <ul class=\"dropdown-menu\" role=\"menu\">\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>{{getString(\"homeRibbon_alignBottom\")}}</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>{{getString(\"homeRibbon_alignTop\")}}</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>{{getString(\"homeRibbon_alignLeft\")}}</a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class=\"ribbon-bar-group hide\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg dropdown-toggle\" role=\"button\" data-toggle=\"dropdown\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-color\"></i>{{getString(\"homeRibbon_color\")}} <span class=\"caret\"></span></a>\r\n                <ul class=\"dropdown-menu\" role=\"menu\">\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 1</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 2</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 3</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 4</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder\"></i>Color 5</a></li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-rename\"></i>{{getString(\"homeRibbon_rename\")}}></a>\r\n            </div>\r\n        </div>\r\n        <div class=\"ribbon-bar-group hide\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-notes\"></i>{{getString(\"homeRibbon_Notes\")}}</a>\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-properties\"></i>{{getString(\"homeRibbon_properties\")}}</a>\r\n                <a class=\"btn ribbon-btn-md dropdown-toggle\" role=\"button\" data-toggle=\"dropdown\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-resizegrid_gridsizedialog\"></i>{{getString(\"homeRibbon_grid\")}} <span class=\"caret\"></span></a>\r\n                <ul class=\"dropdown-menu\" role=\"menu\">\r\n                    <li><a tabindex=\"-1\" href=\"#\"><i class=\"icon generic icon-icon-placeholder\"></i>{{getString(\"homeRibbon_grid\")}}</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"#\"><i class=\"icon generic icon-icon-placeholder\"></i>{{getString(\"homeRibbon_1to1\")}}</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"#\"><i class=\"icon generic icon-icon-placeholder\"></i>{{getString(\"homeRibbon_fittowindow\")}}</a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class=\"ribbon-bar-group hide\" data-wfrbngrprszord=\"3\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-startprocess\"></i>{{getString(\"homeRibbon_startProcess\")}}</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!--End of the small size content-->\r\n    <div class=\"anchor-toggle hide\" (click)=\"togglePin()\"><a href=\"\"><span class=\"glyphicon glyphicon-pushpin\"></span></a></div>\r\n</div>","import { Component, OnInit, Inject, Input } from '@angular/core';\r\nimport { IEnvironmentService } from '../../../../types/services/environment/i-environment-service';\r\nimport { CommandServiceToken } from '../../../services/command/command-service-factory';\r\nimport { EnvironmentServiceToken } from '../../../services/environment/environment-service-factory';\r\n\r\n@Component({\r\n    selector: 'app-tab-view',\r\n    templateUrl: './tab-view.component.html',\r\n    styleUrls: ['./tab-view.component.less']\r\n})\r\nexport class TabViewComponent implements OnInit {\r\n\r\n    @Input() public getString: (resourceId: string, collectionId?: string) => string;\r\n    @Input() public togglePin: () => void;\r\n\r\n    constructor(@Inject(CommandServiceToken) private _commandService: ICommandService) { }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    public centerToStart(): void {\r\n        this._commandService.invokeCommand('Center Start', false, false, true, true);\r\n    }\r\n\r\n    public scaleToDefault(): void {\r\n        this._commandService.invokeCommand('Scale Default', false, false, true, true);\r\n    }\r\n\r\n    public scaleToCanvas(): void {\r\n        this._commandService.invokeCommand('Fit To Window', false, false, true, true);\r\n    }\r\n\r\n    public zoomInCanvas(): void {\r\n        this._commandService.invokeCommand('Zoom In', false, false, false, true);\r\n    }\r\n\r\n    public zoomOutCanvas(): void {\r\n        this._commandService.invokeCommand('Zoom Out', false, false, false, true);\r\n    }\r\n\r\n}\r\n","<div>\r\n    <div class=\"ribbon-content max-ribbon\">\r\n        <!--Start of the full size content-->\r\n        <div class=\"ribbon-bar-group\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\" (click)=\"centerToStart()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-gotostart\"></i>{{getString(\"ribbon_gottostart\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\" (click)=\"scaleToDefault()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-1to\"></i>{{getString(\"homeRibbon_1to1\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-md hide\" role=\"button\" (click)=\"scaleToCanvas()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-fittowindow\"></i>{{getString(\"homeRibbon_fitToWindow\")}}</a>\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\" (click)=\"zoomOutCanvas()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-zoomoutribbon\"></i>{{getString(\"ribbon_zoom_out\")}}</a>\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\" (click)=\"zoomInCanvas()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-zoominribbon\"></i>{{getString(\"ribbon_zoom_in\")}}</a>\r\n            </div>\r\n            <label class=\"ribbon-bar-group-label\">{{getString(\"ribbon_watermark_zoom\")}}</label>\r\n        </div>\r\n        <!--TODO: This section is hidden, investigate if needed-->\r\n        <!--<div class=\"ribbon-bar-group hide\">\r\n            <div class=\"ribbon-bar-group-segment hide\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-notes\"></i>{{getString(\"homeRibbon_notes\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment hide\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-resizegrid_gridsizedialog\"></i>{{getString(\"homeRibbon_grid\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment hide\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-errorhandling\"></i>{{getString(\"ribbon_error\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\" (click)=\"toggleToolbox()\"><i class=\"ribbon-sprite icon icon-set-toolbox icon-size32 ic-controls\"></i>{{getString(\"ribbon_toolbox\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\" [ngClass]=\"{'disabled': !selectedArtifacts()}\" (click)=\"toggleConfig()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-properties\"></i>{{getString(\"ribbon_propertiesPanel\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment hide\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\" [ngClass]=\"{'disabled': !selectedArtifacts()}\" (click)=\"showRulesPopup()\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-rulesribbon\"></i>{{getString(\"ribbon_rulesPanel\")}}</a>\r\n            </div>\r\n        </div>\r\n        <div class=\"ribbon-bar-group hide\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-search\"></i>{{getString(\"ribbon_search\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-report\"></i>{{getString(\"ribbon_report\")}}</a>\r\n            </div>\r\n        </div>-->\r\n    </div>\r\n    <!--End of the full size content-->\r\n    <div class=\"ribbon-content mid-ribbon hide not-showing\">\r\n        <!--Start of the mid size content-->\r\n        <div class=\"ribbon-bar-group\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-1to1_\"></i>{{getString(\"homeRibbon_1to1\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-fittowindow\"></i>{{getString(\"homeRibbon_fitToWindow\")}}</a>\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-search\"></i>{{getString(\"ribbon_zoom\")}}</a>\r\n            </div>\r\n        </div>\r\n        <div class=\"ribbon-bar-group\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-notes\"></i>{{getString(\"homeRibbon_notes\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-resizegrid_gridsizedialog\"></i>{{getString(\"homeRibbon_grid\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-errorhandling\"></i>{{getString(\"ribbon_error\")}}</a>\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-toolbox\"></i>{{getString(\"ribbon_toolbox\")}}</a>\r\n                <a class=\"btn ribbon-btn-md \" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-properties\"></i>{{getString(\"ribbon_propertiesPanel\")}}</a>\r\n            </div>\r\n        </div>\r\n        <div class=\"ribbon-bar-group\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-search\"></i>{{getString(\"ribbon_search\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-report\"></i>{{getString(\"ribbon_report\")}}</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!--End of the mid size content-->\r\n    <div class=\"ribbon-content small-ribbon hide not-showing\">\r\n        <!--Start of the small size content-->\r\n        <div class=\"ribbon-bar-group\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-1to1_\"></i>{{getString(\"homeRibbon_1to1\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size16 ic-fittowindow\"></i>{{getString(\"homeRibbon_fitToWindow\")}}</a>\r\n                <a class=\"btn ribbon-btn-md\" role=\"button\"><i class=\"ribbon-sprite sprite-no-icon16\"></i>{{getString(\"ribbon_zoom\")}}</a>\r\n            </div>\r\n        </div>\r\n        <div class=\"ribbon-bar-group\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg dropdown-toggle\" role=\"button\" data-toggle=\"dropdown\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-notes\"></i>{{getString(\"homeRibbon_notes\")}} <span class=\"caret\"></span></a>\r\n                <ul class=\"dropdown-menu\" role=\"menu\">\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder16\"></i>{{getString(\"homeRibbon_grid\")}}</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder16\"></i>{{getString(\"ribbon_error\")}}</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder16\"></i>{{getString(\"ribbon_toolbox\")}}</a></li>\r\n                    <li><a tabindex=\"-1\" href=\"\"><i class=\"icon generic icon-icon-placeholder16\"></i>{{getString(\"ribbon_propertiesPanel\")}}</a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class=\"ribbon-bar-group\">\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-search\"></i>{{getString(\"ribbon_search\")}}</a>\r\n            </div>\r\n            <div class=\"ribbon-bar-group-segment\">\r\n                <a class=\"btn ribbon-btn-lg\" role=\"button\"><i class=\"ribbon-sprite icon icon-set-ribbon icon-size32 ic-report\"></i>{{getString(\"ribbon_report\")}}</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!--End of the small size content-->\r\n    <div class=\"anchor-toggle hide\" (click)=\"togglePin()\"><a href=\"\"><span class=\"glyphicon glyphicon-pushpin\"></span></a></div>\r\n</div>\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { IPluginService } from '../../../../../types/services/plugin/i-plugin-service';\r\nimport { PluginServiceToken } from '../../../../services/plugin/plugin-service-factory';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../../services/ruleplugin/rule-plugin-service';\r\nimport { plugins } from '../../../../shared/constants/plugins';\r\n\r\n@Component({\r\n    selector: 'k2-empty-rule-designer',\r\n    templateUrl: './empty-rule-designer.component.html',\r\n    styleUrls: ['./empty-rule-designer.component.less']\r\n})\r\nexport class EmptyRuleDesignerComponent implements OnInit {\r\n\r\n    constructor(private _resourceService: ResourceService,\r\n        private _rulePluginSvc: RulePluginService,\r\n        @Inject(PluginServiceToken) private _pluginService: IPluginService) { }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    getFromResx = (resourceName: string, key: string) => this._resourceService.getFromResx(resourceName, key);\r\n\r\n    public isNotValid(): boolean {\r\n        return this._rulePluginSvc.isNewTab;\r\n    }\r\n\r\n    public toggleRulesDesigner(): void {\r\n        this._pluginService.toggleState(plugins.panels.rulesDesigner);\r\n    }\r\n\r\n}\r\n","<div class=\"empty-template-section\" *ngIf=\"!isNotValid()\">\r\n    <div>\r\n        <span class=\"icon icon-set-panel icon-size48 ic-emptyautoconfiguration\"></span>\r\n    </div>\r\n    <div class=\"content\">\r\n        <div class=\"header bottom-line\">{{getFromResx('RulesDesigner', 'ruleDesigner_DefaultEmptyRule_Title')|async}}</div>\r\n        <div class=\"description\">\r\n            <div>{{getFromResx('RulesDesigner', 'ruleDesigner_DefaultEmptyRule_DescRow1')|async}}</div>\r\n            <div>{{emptyRuleString}}</div>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <a class=\"btn-close hyperlink-control tertiary\" (click)=\"toggleRulesDesigner()\" tabindex=\"-1\">{{getFromResx('Resources', 'general_close')|async}}</a>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"empty-template-section\" *ngIf=\"isNotValid()\">\r\n    <div>\r\n        <span class=\"icon icon-set-panel icon-size48 ic-invalidpanel\"></span>\r\n    </div>\r\n    <div class=\"content\">\r\n        <div class=\"header bottom-line\">{{getFromResx('Wizards', 'general_not_the_panel')|async}}</div>\r\n        <div class=\"description\">\r\n            <div>{{getFromResx('Wizards', 'general_not_the_panel_desc')|async}}/div>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <a class=\"btn-close hyperlink-control tertiary\" (click)=\"toggleRulesDesigner()\" tabindex=\"-1\">{{getFromResx('Resources', 'general_close')|async}}</a>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, Input, OnInit } from '@angular/core';\r\nimport { IEnvironmentService } from '../../../../../types/services/environment/i-environment-service';\r\nimport { IPluginService } from '../../../../../types/services/plugin/i-plugin-service';\r\nimport { EnvironmentServiceToken } from '../../../../services/environment/environment-service-factory';\r\nimport { PluginServiceToken } from '../../../../services/plugin/plugin-service-factory';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { isUndefinedOrNull } from '../../../../shared/utils/general';\r\n\r\n@Component({\r\n    selector: 'k2-no-context-panel',\r\n    templateUrl: './no-context-panel.component.html',\r\n    styleUrls: ['./no-context-panel.component.less']\r\n})\r\nexport class NoContextPanelComponent implements OnInit {\r\n    @Input() public item: sourceCode.k2Designer.objectModel.plugin.IDefinition;\r\n\r\n    constructor(private _resourceService: ResourceService,\r\n        @Inject(PluginServiceToken) private _pluginService: IPluginService,\r\n        @Inject(EnvironmentServiceToken) private _envService: IEnvironmentService) { }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    getFromResx = (resourceName: string, key: string) => this._resourceService.getFromResx(resourceName, key);\r\n\r\n    public showContextBrowserToggleButton(): boolean {\r\n        const panel: sourceCode.k2Designer.objectModel.plugin.IInstance = this._pluginService.getRightMostPanel();\r\n\r\n        if (isUndefinedOrNull(panel) || panel.plgnDef.name === this.item.name) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public togglePanel(name?: string) {\r\n        const panelName = name || this.item.name;\r\n        this._pluginService.toggleState(panelName);\r\n    }\r\n\r\n    public closePanel(name?: string) {\r\n        const panelName = name || this.item.name;\r\n\r\n        //Hide the 4th panel (for example filter panel) once the associated panel (3rd panel) gets hidden from config panel.\r\n        const plugin = this._pluginService.getPlugin(panelName);\r\n\r\n        if (plugin?.plgnDef?.collapseAssociatedPanel) {\r\n            this._pluginService.toggleCollapsed(plugin.plgnDef.collapseAssociatedPanel);\r\n        }\r\n\r\n        this._pluginService.toggleCollapsed(panelName);\r\n    }\r\n\r\n    public isPanelActive(name?: string): boolean {\r\n        let result = false;\r\n        const panelName = name || this.item.name;\r\n\r\n        result = this._envService.activeStudioItem.pluginStates[panelName] === 'expanded';\r\n\r\n        return result;\r\n    }\r\n}\r\n","<div class=\"panel-container\">\r\n    <div class=\"panel-header\">\r\n        <button class=\"btn-toggle-contextBrowser has-padding\"\r\n                *ngIf=\"showContextBrowserToggleButton()\"\r\n                (click)=\"togglePanel('contextBrowser')\"\r\n                [ngClass]=\"{'active': isPanelActive('contextBrowser'), '': !isPanelActive('contextBrowser')}\"\r\n                K2TooltipSimple\r\n                [k2TooltipTitle]=\"getFromResx('Wizards', 'configpanel_tooltip_togglebutton_title')|async\"\r\n                [k2TooltipDescription]=\"getFromResx('Wizards', 'configpanel_tooltip_togglebutton_description')|async\"\r\n                k2TooltipPosition=\"left\">\r\n            <span class=\"icon icon-set-buttons icon-size24 ic-contextbrowserbutton\"></span>\r\n        </button>\r\n    </div>\r\n    <div class=\"panel-content\">\r\n        <div>\r\n            <span class=\"icon icon-set-panel icon-size48 ic-invalidpanel\"></span>\r\n        </div>\r\n        <div class=\"content\">\r\n            <div class=\"header bottom-line\"></div>\r\n            <div class=\"description\">\r\n                <div>{{getFromResx('Wizards', 'general_not_the_panel_desc')|async}}</div>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <a class=\"btn-close hyperlink-control tertiary\" (click)=\"closePanel()\" tabindex=\"-1\">{{getFromResx('Resources', 'general_close')|async}}</a>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, Input, OnInit } from '@angular/core';\r\nimport { IPluginService } from '../../../../../types/services/plugin/i-plugin-service';\r\nimport { PluginServiceToken } from '../../../../services/plugin/plugin-service-factory';\r\n\r\n@Component({\r\n    selector: 'k2-panel-gutter',\r\n    templateUrl: './panel-gutter.component.html',\r\n    styleUrls: ['./panel-gutter.component.less']\r\n})\r\nexport class PanelGutterComponent implements OnInit {\r\n    @Input() public item: any;\r\n\r\n    constructor(@Inject(PluginServiceToken) private _pluginService: IPluginService) { }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    public closePanel(name?: string) {\r\n        const panelName = name || this.item.name;\r\n\r\n        //Hide the 4th panel (for example filter panel) once the associated panel (3rd panel) gets hidden from config panel.\r\n        const plugin = this._pluginService.getPlugin(panelName);\r\n\r\n        if (plugin?.plgnDef?.collapseAssociatedPanel) {\r\n            this._pluginService.toggleCollapsed(plugin.plgnDef.collapseAssociatedPanel);\r\n        }\r\n\r\n        this._pluginService.toggleCollapsed(panelName);\r\n    }\r\n\r\n}\r\n","<div class=\"header\">\r\n    <div class=\"heading-toggle\" (click)=\"closePanel()\">\r\n        <div class=\"heading-panel-toggle heading-panel-toggle-active\">\r\n            <span class=\"icon icon-set-toolbox icon-size16 ic-expandmenu selected\"></span>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"main\"></div>\r\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { IConfigPanelService } from '../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { IRulePluginService } from '../../../../../types/services/rules/i-rule-plugin.service';\r\nimport { ISelectionService } from '../../../../../types/services/selection/i-selection-service';\r\nimport { CommandServiceToken } from '../../../../services/command/command-service-factory';\r\nimport { ConfigPanelServiceToken } from '../../../../services/config-panel/config-panel-service-factory';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { RulePluginService } from '../../../../services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from '../../../../services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { rules } from '../../../../shared/constants/rules';\r\nimport { RuleControlStates } from '../../../../shared/enums/rules/rule-control-states';\r\nimport { RuleDesignerItemBaseComponent } from '../rule-designer-item-base/rule-designer-item-base.component';\r\nimport { IExpression } from '../../../../../types/models/rules/i-expression';\r\nimport IDropDownMenuItem from 'src/app/shared/enums/drop-down/drop-down-menu-item';\r\nimport { command } from 'src/types/models/rules/i-expression-command';\r\nimport { ResourceService } from 'src/app/services/resource/resource.service';\r\nimport { DropdownMenuItemTemplates } from 'src/app/shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { operator } from 'src/types/models/rules/i-expression-operator';\r\nimport { IConfiguredExpression } from 'src/types/models/rules/i-configured-expression';\r\nimport { DropDownComponent } from 'src/app/components/common/drop-down/drop-down.component';\r\nimport { DragDropData } from 'src/app/shared/models/drag-drop-data';\r\n\r\n@Component({\r\n    selector: 'k2-expression-base',\r\n    template: '<p> Empty Template since it wont be used </p>'\r\n})\r\nexport class ExpressionBaseComponent extends RuleDesignerItemBaseComponent implements OnInit, OnDestroy, IExpression {\r\n\r\n    protected composerActiveEvent: EventEmitter<void>;\r\n    private _composerActiveSubscription: Subscription;\r\n\r\n    @Input() public index = 0;\r\n\r\n    constructor(@Inject(SelectionServiceToken) selService: ISelectionService,\r\n        rulePluginService: RulePluginService,\r\n        @Inject(CommandServiceToken) commandService: ICommandService,\r\n        @Inject(ConfigPanelServiceToken) configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) undoRedoService: IUndoRedoService,\r\n        eventService: EventNotifierService,\r\n        protected rootElement: ElementRef<HTMLElement>,\r\n        protected resourceService: ResourceService) {\r\n\r\n        super(selService, rulePluginService, commandService, configPanelService,\r\n            undoRedoService, eventService, rootElement);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n\r\n        //Add and subscribe to the textbox composer active event:\r\n        this.composerActiveEvent = this.eventService.addEvent(rules.events.textboxComposerActive);\r\n        this._composerActiveSubscription = this.eventService.subscribe(rules.events.textboxComposerActive,\r\n            this.onTextboxActiveComposer);\r\n\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n        this._composerActiveSubscription.unsubscribe();\r\n    }\r\n\r\n    textBoxOnBlur = () => {\r\n        this.states.remove(RuleControlStates.textboxFocus);\r\n    };\r\n\r\n    textBoxOnFocus = () => {\r\n        this.states.add(RuleControlStates.textboxFocus);\r\n    };\r\n\r\n    getDragItem(item: IConfiguredExpression, context: any): IDragDropData {\r\n        item.index = this.index;\r\n        return new DragDropData<any, any, any>(item, context, this.getDragData, this.getDropData, null);\r\n    }\r\n\r\n    getDragData = (source: any): any => source;\r\n\r\n    getDropData = (source: any, dragData: any): any => source || dragData;\r\n\r\n    /*override*/ delete = (): Promise<boolean> => {\r\n\r\n        let isDeleted = false;\r\n\r\n        if (this.expressionModel && this.deleteExpression(this.expressionModel)) {\r\n            isDeleted = true;\r\n        }\r\n\r\n        const promise = new Promise<boolean>((resolve) => {\r\n            resolve(isDeleted);\r\n        });\r\n\r\n        return promise;\r\n    };\r\n\r\n    getFromResx = (resourceName: string, key: string) => this.resourceService.getFromResx(resourceName, key);\r\n\r\n    /**\r\n     * Populate the supplied dropdown menu item list with the supplied operators\r\n     *\r\n     * @param operators\r\n     * @param dropDownMenuItems\r\n     * @param selectedOperator\r\n     */\r\n    protected populateLogicalOperators(operators: operator[], dropDownMenuItems: IDropDownMenuItem[], selectedOperator: string) {\r\n\r\n        for (let i = 0; i < operators.length; i++) {\r\n\r\n            i > 0 && dropDownMenuItems.push(DropDownComponent.separator);\r\n\r\n            dropDownMenuItems.push({\r\n                key: operators[i].name,\r\n                title: this.resourceService.getString(operators[i].titleToken),\r\n                icon: operators[i].icon,\r\n                innerItemComponent: DropdownMenuItemTemplates.SimpleExpressionOperator,\r\n                isSelected: selectedOperator?.toString() === operators[i].name\r\n            });\r\n        }\r\n    }\r\n\r\n    protected deleteExpression(expressionToDelete: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression): boolean {\r\n        if (!expressionToDelete) return false;\r\n\r\n        this.undoRedoService.addUndoMarker('-- delete expression--');\r\n\r\n        const parentGroup = this.getExpressionParentGroup(expressionToDelete);\r\n        if (!parentGroup || !parentGroup.expressions || !parentGroup.expressions.length) {\r\n            expressionToDelete.removeFromModelArray();\r\n            return true;\r\n        }\r\n\r\n        if (parentGroup.expressions.length === 1) {\r\n            //If parent of object to delete only contains 1 object to delete, remove parent too\r\n            parentGroup.removeFromModelArray();\r\n        } else {\r\n            const expressionToRemoveIndex = parentGroup.expressions.indexOf(expressionToDelete);\r\n            //If expression to delete is contained between 2 operators, remove 1 operator (to prevent double operators remaining)\r\n            if (parentGroup.expressions.length > 2 && expressionToRemoveIndex > 0 &&\r\n                expressionToRemoveIndex < parentGroup.expressions.length - 1 &&\r\n                this.isOperatorType(parentGroup.expressions[expressionToRemoveIndex - 1]) &&\r\n                this.isOperatorType(parentGroup.expressions[expressionToRemoveIndex + 1])) {\r\n                parentGroup.expressions[expressionToRemoveIndex - 1].removeFromModelArray();\r\n            }\r\n\r\n            expressionToDelete.removeFromModelArray();\r\n        }\r\n\r\n        this.cleanupOperators(parentGroup);\r\n        this.updateGroupExpressionOf(parentGroup);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Returns logical parent group of expression\r\n     *\r\n     * @param expression\r\n     */\r\n    protected getExpressionParentGroup(expression: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression): sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredComplexLogicalGroupExpression {\r\n        return expression.getLogicalParentModel<sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredComplexLogicalGroupExpression>();\r\n    }\r\n\r\n    /**\r\n     * Returns true if expression is of type ConfiguredGroupOperator\r\n     *\r\n     * @param expression\r\n     */\r\n    protected isOperatorType(expression: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression): boolean {\r\n        return expression.componentId === sourceCode.k2Designer.objectModel.core.deployment.LookupTypes.ConfiguredGroupOperator;\r\n    }\r\n\r\n    /**\r\n     * Returns true if expression is of type ConfiguredComplexLogicalGroupExpression\r\n     *\r\n     * @param expression\r\n     */\r\n    protected isGroupType(expression: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression): boolean {\r\n        return expression.componentId === sourceCode.k2Designer.objectModel.core.deployment.LookupTypes.ConfiguredComplexLogicalGroupExpression;\r\n    }\r\n\r\n    /**\r\n     * Returns true if expression is of type ConfiguredSimpleExpression\r\n     *\r\n     * @param expression\r\n     */\r\n    protected isSimpleExpressionType(expression: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression): boolean {\r\n        return expression.componentId === sourceCode.k2Designer.objectModel.core.deployment.LookupTypes.ConfiguredSimpleExpression;\r\n    }\r\n\r\n    /**\r\n     * Ensures there will never be trailing / leading operators in a group\r\n     *\r\n     * @param droppedDataParent - logical parent of the dragged/dropped expression\r\n     */\r\n    protected cleanupOperators(parentGroup: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredComplexLogicalGroupExpression): void {\r\n        //Cleanup operators:\r\n        //If collection of expressions now ends with an operator, remove trailing operator:\r\n        if (parentGroup.expressions.length > 0 && this.isOperatorType(parentGroup.expressions[parentGroup.expressions.length - 1])) {\r\n            parentGroup.expressions[parentGroup.expressions.length - 1].removeFromModelArray();\r\n        }\r\n        //If collection of expressions now starts with an operator, remove leading operator:\r\n        if (parentGroup.expressions.length > 0 && this.isOperatorType(parentGroup.expressions[0])) {\r\n            parentGroup.expressions[0].removeFromModelArray();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Populate the supplied dropdown menu item list with the supplied commands\r\n     *\r\n     * @param commands\r\n     * @param dropDownMenuItems\r\n     */\r\n    protected populateOperatorCommands(commands: command[], dropDownMenuItems: IDropDownMenuItem[]) {\r\n        commands?.forEach(c => {\r\n            dropDownMenuItems.push(DropDownComponent.separator);\r\n\r\n            dropDownMenuItems.push({\r\n                key: c.name,\r\n                icon: c.icon,\r\n                title: this.resourceService.getString(c.titleToken),\r\n                innerItemComponent: DropdownMenuItemTemplates.Command,\r\n                onSelected: this.onCommandSelected\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handler for when a command is selected\r\n     *\r\n     * @param item\r\n     */\r\n    protected /*virtual*/ onCommandSelected = (item: sourceCode.k2Designer.objectModel.dropDownMenu.IDropDowntMenuItem) => {\r\n        item.key ===  rules.commands.delete && this.delete();\r\n    };\r\n\r\n    /**\r\n     * Consolidates groups and ungroup where needed.\r\n     * If group only contains 1 item, it should no longer be its own group\r\n     *\r\n     * @param parentGroup\r\n     */\r\n    protected updateGroupExpressionOf(parentGroup: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredComplexLogicalGroupExpression) {\r\n        //The expression's original parent group, now only contains 1 child\r\n        if (parentGroup && parentGroup.expressions.length === 1) {\r\n            if (this.isGroupType(parentGroup.expressions[0])) {\r\n                //The child is also a group. Move group one level up (to avoid groups only containing groups).\r\n                const innerGroup = <sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredComplexLogicalGroupExpression>parentGroup.expressions[0];\r\n                //Transfer inner group's expressions to outer group\r\n                for (let i = 0; i < innerGroup.expressions.length; i++) {\r\n                    const expressionClone = innerGroup.expressions[i].clone<sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression>();\r\n                    expressionClone.internalId = null; //reset internal id to force a new one and references to update\r\n                    parentGroup.expressions.push(expressionClone);\r\n                }\r\n                //Remove original inner goup\r\n                innerGroup.removeFromModelArray();\r\n                this.cleanupOperators(parentGroup);\r\n            } else if (this.isSimpleExpressionType(parentGroup.expressions[0])) {\r\n                //The child expression is not in another group, move one level up if possible and remove group (to avoid single expression in own group)\r\n                const parentOfParentGroup = this.getExpressionParentGroup(parentGroup);\r\n                if (parentOfParentGroup && parentOfParentGroup.expressions) {\r\n                    const parentGroupIndex = parentOfParentGroup.expressions.indexOf(parentGroup);\r\n                    const expressionClone = parentGroup.expressions[0].clone<sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression>();\r\n                    expressionClone.internalId = null; //reset internal id to force a new one and references to update\r\n                    parentOfParentGroup.expressions.splice(parentGroupIndex, 0, expressionClone);\r\n                    parentGroup.removeFromModelArray();\r\n                    this.cleanupOperators(parentOfParentGroup);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private onTextboxActiveComposer(event: ng.IAngularEvent) {\r\n\r\n        const expressionComposerActiveEvent = this.eventService.addEvent(rules.events.expressionComponserActive);\r\n        expressionComposerActiveEvent.emit(this);\r\n\r\n        event.stopPropagation();\r\n    }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { States } from '../../../../shared/control-helpers/states';\r\nimport { IControlState } from '../../../../../types/models/rules/i-control-state';\r\nimport { IStates } from '../../../../../types/models/rules/i-states';\r\n\r\n/**\r\n * This is the base component used for rules / expressions / statements\r\n * It is a combination of the following classes / interfaces in K2DesignerHost:\r\n * class K2States extends IK2States\r\n *\r\n * */\r\n@Component({\r\n    selector: 'k2-rule-base',\r\n    template: '<p> Empty Template since it wont be used </p>'\r\n})\r\nexport class RuleBaseComponent implements IControlState {\r\n\r\n    public states: IStates;\r\n\r\n    constructor() {\r\n        this.states = new States();\r\n    }\r\n}\r\n\r\n\r\n\r\n","import { Component, ElementRef, HostListener, Inject, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { IConfiguredExpression } from '../../../../../types/models/rules/i-configured-expression';\r\nimport { IConfiguredStatement } from '../../../../../types/models/rules/i-configured-statement';\r\nimport { IRuleDesignerItem } from '../../../../../types/models/rules/i-rule-designer-item';\r\nimport { IConfigPanelService } from '../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { ISelectionService } from '../../../../../types/services/selection/i-selection-service';\r\nimport { CommandServiceToken } from '../../../../services/command/command-service-factory';\r\nimport { ConfigPanelServiceToken } from '../../../../services/config-panel/config-panel-service-factory';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { RulePluginService } from '../../../../services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from '../../../../services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { RuleControlStates } from '../../../../shared/enums/rules/rule-control-states';\r\nimport { RuleDesignerSelectionBaseComponent } from '../rule-designer-selection-base/rule-designer-selection-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-rule-designer-item-base',\r\n    template: '<p> Empty Template since it wont be used </p>'\r\n})\r\nexport class RuleDesignerItemBaseComponent extends RuleDesignerSelectionBaseComponent implements OnInit, OnDestroy, IRuleDesignerItem {\r\n\r\n    @Input() public expressionModel: IConfiguredExpression;\r\n    @Input() public statementModel: IConfiguredStatement;\r\n    @Input() public isParent = false;\r\n\r\n    constructor(@Inject(SelectionServiceToken) selService: ISelectionService,\r\n        protected rulePluginService: RulePluginService,\r\n        @Inject(CommandServiceToken) private _commandService: ICommandService,\r\n        @Inject(ConfigPanelServiceToken) private _configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) protected undoRedoService: IUndoRedoService,\r\n        _eventService: EventNotifierService,\r\n        protected rootElement: ElementRef<HTMLElement>) {\r\n\r\n        super(selService, _eventService, rootElement);\r\n\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n\r\n        //Add to the collection in plugin service\r\n        this.rulePluginService.addRuleDesignerItem(this);\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.rulePluginService.removeRuleDesignerItem(this);\r\n    }\r\n\r\n    /**\r\n     *DESC: This method must be implemented in the subclass scope for the choice of its deletion algorithm.\r\n     *\r\n     * @param callback: The callback function will be called once deletion successfully executed.\r\n     */\r\n    public /*virtual*/ delete = (): Promise<boolean> => {\r\n        throw 'Implementation must be in the subclass';\r\n    };\r\n\r\n    /**\r\n     * Creates drag ghost element for element\r\n     *\r\n     * @param item\r\n     */\r\n    protected /*virtual*/ getDragImage(): HTMLElement {\r\n        const result: HTMLDivElement = document.createElement('div');\r\n\r\n        result.className = 'rules dragGhost';\r\n        result.innerHTML = this.rootElement.nativeElement.outerHTML;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Updates state to reflect drag start of rule designer item\r\n     * */\r\n    protected addDraggingState() {\r\n        this.states.add(RuleControlStates.dragging);\r\n    }\r\n\r\n    /**\r\n     * Updates state to reflect drag end of trule designer item\r\n     * */\r\n    protected removeDraggingState() {\r\n        this.states.remove(RuleControlStates.dragging);\r\n    }\r\n\r\n    /**\r\n     * DESC: This method is used to bind key event to the specific functionality. E.g. Delete/Backspace key is binded to delete the expression/statement directive.\r\n     *\r\n     * @param keyDownData: contains key event and current rule item object\r\n     */\r\n    @HostListener('keydown', ['$event'])\r\n    public onKeyPress(event: KeyboardEvent): void {\r\n        if (!this.states.isExist(RuleControlStates.textboxFocus)) {\r\n            //TODO: Test that the default key events are not interfering (Removed preventDefault)\r\n            event.stopPropagation(); // prevent k2 text box from stealing focus\r\n\r\n            switch (event.keyCode) {\r\n                case 90: // ctrl-z for undo\r\n                //Only allow one undo/redo operation at a time.\r\n                    if (event.ctrlKey && this._commandService.keyHaveBeenReleased()) {\r\n\r\n                        //Set flag on command service to keep track that key is pressed down.\r\n                        this._commandService.keyDown();\r\n                        this._configPanelService.undo();\r\n                    }\r\n                    break;\r\n                case 89: // ctrl-y for redo\r\n                //Only allow one undo/redo operation at a time.\r\n                    if (event.ctrlKey && this._commandService.keyHaveBeenReleased()) {\r\n\r\n                        //Set flag on command service to keep track that key is pressed down.\r\n                        this._commandService.keyDown();\r\n                        this._configPanelService.redo();\r\n                    }\r\n                    break;\r\n                case 46: case 8: //Delete Expression/Statement\r\n                    this.undoRedoService.addUndoMarker('-- delete rules expression --');\r\n                    this.delete().then(() => this.exit());\r\n                    break;\r\n\r\n                case 27: //ESC:\r\n                    this.exit();\r\n                    break;\r\n\r\n                case 13:\r\n                    this.enter();\r\n                    break;\r\n\r\n                case 9: //Tab\r\n                    if (!event.shiftKey) {\r\n                        this.focusNext();\r\n                    } else {\r\n                        this.focusPrevious();\r\n                    }\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Implementation should be done in child class\r\n     * */\r\n    public /*virtual*/ focusNext = (): boolean =>\r\n\r\n    //TODO: Test that the correct next element is focused.\r\n    //(In AngularJS this was done by manually finding the next focusable element by tabIndex and calling jQuery.focus  on it)\r\n\r\n        false;\r\n\r\n\r\n    /**\r\n     * Implementation should be done in child class\r\n     * */\r\n    public /*virtual*/ focusPrevious = (): boolean =>\r\n    //TODO: Test that the correct previous element is focused.\r\n    //(In AngularJS this was done by manually finding the previous focusable element by tabIndex and calling jQuery.focus  on it)\r\n\r\n        false;\r\n\r\n\r\n\r\n    private exit = () => {\r\n        //TODO: focus parent if in group\r\n    };\r\n\r\n    private enter = () => {\r\n\r\n        //TODO: focus first focusable element\r\n\r\n    };\r\n\r\n}\r\n","import { Component, EventEmitter, Inject, OnDestroy, OnInit, ElementRef } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { ISelectionService } from '../../../../../types/services/selection/i-selection-service';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { SelectionServiceToken } from '../../../../services/selection/selection-service-factory';\r\nimport { rules } from '../../../../shared/constants/rules';\r\nimport { RuleControlStates } from '../../../../shared/enums/rules/rule-control-states';\r\nimport { RuleBaseComponent } from '../rule-base/rule-base.component';\r\nimport { IRuleDesignerSelection } from '../../../../../types/models/rules/i-rule-designer-selection';\r\nimport { IConfiguredExpression } from '../../../../../types/models/rules/i-configured-expression';\r\nimport { IConfiguredStatement } from '../../../../../types/models/rules/i-configured-statement';\r\n\r\n@Component({\r\n    selector: 'k2-rule-designer-selection-base',\r\n    template: '<p> Empty Template since it wont be used </p>'\r\n})\r\nexport class RuleDesignerSelectionBaseComponent extends RuleBaseComponent implements OnInit, OnDestroy, IRuleDesignerSelection {\r\n\r\n    //Properties implemented from interface IRuleDesignerSelection:\r\n    isSelected: boolean;\r\n    isParentSelected: boolean;\r\n\r\n    protected expressionModel: IConfiguredExpression;\r\n    protected statementModel: IConfiguredStatement;\r\n    protected isParent = false;\r\n\r\n    protected ruleDesignerSelection: IRuleDesignerSelection;\r\n\r\n    private _ruleItemParentSelectedSubscription: Subscription;\r\n    private _ruleItemParentSelectedEvent: EventEmitter<boolean>;\r\n\r\n    constructor(@Inject(SelectionServiceToken) private _selService: ISelectionService,\r\n        protected eventService: EventNotifierService,\r\n        protected rootElement: ElementRef<HTMLElement>) {\r\n        super();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.isSelected = false;\r\n        this.isParentSelected = false;\r\n\r\n        if (this.isParent) {\r\n            this._selService.listen(this.onSelectServiceParentListener, rules.context.rule);\r\n            this.setSelected = this.setParentSelected;\r\n        } else {\r\n            this._selService.listen(this.onSelectServiceListener, rules.context.rule);\r\n        }\r\n\r\n        this._ruleItemParentSelectedEvent = this.eventService.addEvent(rules.events.ruleItemParentSelected);\r\n        this._ruleItemParentSelectedSubscription = this.eventService.subscribe(rules.events.ruleItemParentSelected, (event, value) => {\r\n            this.isParentSelected = value;\r\n            this.isSelected = value;\r\n\r\n            if (value) {\r\n                this.states.add(RuleControlStates.selected.toString());\r\n            } else {\r\n                this.states.remove(RuleControlStates.selected.toString());\r\n            }\r\n        });\r\n\r\n        //TODO: user story to consolidate expressionModel and statementModel\r\n        if (!!this.expressionModel && this.expressionModel.isSelectable) {\r\n            this.setSelected(true, this.expressionModel.createdFromIfDrop);\r\n        } else if (!!this.statementModel && this.statementModel.isSelectable) {\r\n            this.setSelected(true, this.statementModel.createdFromIfDrop);\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this._ruleItemParentSelectedSubscription.unsubscribe();\r\n    }\r\n\r\n    /**\r\n     * Triggered when rules context selection is changed and component is parent\r\n     * */\r\n    onSelectServiceParentListener = () => {\r\n        const selectedItems = this._selService.getSelection(rules.context.rule);\r\n\r\n        //if it's me and I'm selected\r\n        //TODO: user story to consolidate expressionModel and statementModel\r\n        if (selectedItems.indexOf(this.expressionModel) > -1 ||\r\n            selectedItems.indexOf(this.statementModel) > -1) {\r\n            this.isParentSelected = false;\r\n            this.isSelected = true;\r\n        } else if ((!this.isParentSelected || selectedItems.length === 0) && this.isSelected) {\r\n            this.isSelected = false;\r\n            //notify child scopes, set to false\r\n            this._ruleItemParentSelectedEvent.emit(this.isSelected);\r\n        } else {\r\n            this.isSelected = false;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Override for setSelected method if component is parent\r\n     *\r\n     * @param value\r\n     */\r\n    setParentSelected = (value: boolean) => {\r\n        this.setSelected(value);\r\n\r\n        //notify child scopes\r\n        this._ruleItemParentSelectedEvent.emit(this.isSelected);\r\n    };\r\n\r\n    /**\r\n     * Triggered when rules context selection is changed\r\n     * */\r\n    onSelectServiceListener = () => {\r\n        const selectedItems = this._selService.getSelection(rules.context.rule);\r\n\r\n        //if it's me and I'm selected\r\n        //TODO: user story to consolidate expressionModel and statementModel\r\n        if (selectedItems.indexOf(this.expressionModel) > -1 ||\r\n            selectedItems.indexOf(this.statementModel) > -1) {\r\n            this.isParentSelected = false;\r\n            this.isSelected = true;\r\n            this.states.add(RuleControlStates.selected.toString());\r\n            return;\r\n        } else if ((!this.isParentSelected || selectedItems.length === 0) && this.isSelected) {\r\n            this.isSelected = false;\r\n            this.states.remove(RuleControlStates.selected.toString());\r\n        } else {\r\n            this.isSelected = false;\r\n            this.states.remove(RuleControlStates.selected.toString());\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Set selected state\r\n     *\r\n     * @param value\r\n     * @param skipService\r\n     */\r\n    setSelected = (value: boolean, skipService?: boolean) => {\r\n        if (value) {\r\n            this.states.add(RuleControlStates.selected.toString());\r\n        } else {\r\n            this.states.remove(RuleControlStates.selected.toString());\r\n        }\r\n\r\n        if (skipService !== true) {\r\n            this.isSelected = value;\r\n            //set selection in rule context of selection service\r\n            //TODO: user story to consolidate expressionModel and statementModel\r\n            this._selService.setSelection([this.expressionModel || this.statementModel], rules.context.rule);\r\n        }\r\n    };\r\n}\r\n","import { Component, ElementRef, Inject, OnInit } from '@angular/core';\r\nimport { CommandServiceToken } from 'src/app/services/command/command-service-factory';\r\nimport { ConfigPanelServiceToken } from 'src/app/services/config-panel/config-panel-service-factory';\r\nimport { EventNotifierService } from 'src/app/services/event-notifier/event-notifier.service';\r\nimport { RulePluginService } from 'src/app/services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from 'src/app/services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from 'src/app/services/undo-redo/undo-redo-service-factory';\r\nimport { isUndefinedOrNull } from 'src/app/shared/utils/general';\r\nimport { IConfiguredSimpleExpression } from 'src/types/models/rules/i-configured-simple-expression';\r\nimport { IConfigPanelService } from 'src/types/services/config-panel/i-config-panel-service';\r\nimport { ISelectionService } from 'src/types/services/selection/i-selection-service';\r\nimport { RuleDesignerItemBaseComponent } from '../rule-designer-item-base/rule-designer-item-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-statement-base',\r\n    template: '<p> Empty Template since it wont be used </p>'\r\n})\r\nexport class StatementBaseComponent extends RuleDesignerItemBaseComponent implements OnInit {\r\n\r\n    constructor(@Inject(SelectionServiceToken) selService: ISelectionService,\r\n      protected rulePluginService: RulePluginService,\r\n      @Inject(CommandServiceToken) commandService: ICommandService,\r\n      @Inject(ConfigPanelServiceToken) configPanelService: IConfigPanelService,\r\n      @Inject(UndoRedoServiceToken) undoRedoService: IUndoRedoService,\r\n      eventService: EventNotifierService,\r\n      protected rootElement: ElementRef<HTMLElement>) {\r\n        super(selService, rulePluginService, commandService, configPanelService,\r\n            undoRedoService, eventService, rootElement);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n    }\r\n\r\n  public /*override*/ delete = (): Promise<boolean> => {\r\n\r\n      let isDeleted = false;\r\n\r\n      if (this.isStatementRemovable()) {\r\n          this.statementModel.removeFromModelArray();\r\n          isDeleted = true;\r\n      }\r\n\r\n      const promise = new Promise<boolean>((resolve) => {\r\n          resolve(isDeleted);\r\n      });\r\n\r\n      return promise;\r\n  };\r\n\r\n    /**\r\n     * Return an object of data that is associated with the current element\r\n     */\r\n    getDragItem = (item: IConfiguredSimpleExpression, context: any): sourceCode.k2Designer.objectModel.dragDropService.IDragDropData => new sourceCode.k2Designer.objectModel.dragDropService.DragDropData<any, any, any>(item, context, this.getDragData.bind(this), this.getDropData.bind(this), null);\r\n\r\n    getDragData(source: any, context: any, extraData: any): any {\r\n        return source || extraData || context;\r\n    }\r\n\r\n    getDropData(source: any, context: any, dragData: any, extraData: any): any {\r\n        return source || extraData || dragData || context;\r\n    }\r\n\r\n    private isStatementRemovable() {\r\n        const parent: sourceCode.k2Designer.objectModel.core.model.IModelBase = <sourceCode.k2Designer.objectModel.core.model.IModelBase>this.statementModel.getLogicalParentModel();\r\n\r\n        return isUndefinedOrNull(parent)\r\n            ? false : parent.instanceOf(sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredStatement.implementor);\r\n    }\r\n\r\n}\r\n","import { Component, EventEmitter, Inject, Input, OnInit, Output } from '@angular/core';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { ValidationServiceToken } from '../../../../services/validation/validation-service-factory';\r\nimport { RuleControlStates } from '../../../../shared/enums/rules/rule-control-states';\r\nimport { BaseComponent } from '../../../base/base.component';\r\nimport { States } from '../../../../shared/control-helpers/states';\r\nimport { IStates } from '../../../../../types/models/rules/i-states';\r\nimport { IValidationService } from '../../../../../types/services/validation/ivalidation.service';\r\n\r\n@Component({\r\n    selector: 'k2-end-point',\r\n    templateUrl: './end-point.component.html',\r\n    styleUrls: ['./end-point.component.less']\r\n})\r\nexport class EndPointComponent extends BaseComponent implements OnInit {\r\n    @Input() public expressionModel: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredEndPoint;\r\n    @Input() public value: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IExpression;\r\n    @Input() public k2ValidateWhen: any;\r\n    @Input() public k2Validation: any;\r\n    @Input() public states: IStates;\r\n\r\n    @Output() public addParentState: EventEmitter<string> = new EventEmitter<string>();\r\n    @Output() public removeParentState: EventEmitter<string> = new EventEmitter<string>();\r\n\r\n    constructor(@Inject(ValidationServiceToken) private _validationService: IValidationService,\r\n        private _resourceService: ResourceService) {\r\n        super(_validationService);\r\n    }\r\n\r\n    getFromResx = (resourceName: string, key: string) => this._resourceService.getFromResx(resourceName, key);\r\n\r\n    ngOnInit(): void {\r\n        this.setApplicableValidationTypes(this.k2Validation);\r\n        super.validateArrayOnChange(this.expressionModel.value, 'smartFields', this.k2ValidateWhen);\r\n\r\n        if (!this.states) {\r\n            this.states = new States();\r\n        }\r\n    }\r\n\r\n    public onDragEnter() {\r\n        this.updateParentState(RuleControlStates.selected);\r\n        this.states.add(RuleControlStates.focus);\r\n    }\r\n\r\n    public onDragLeave() {\r\n        this.updateParentState(RuleControlStates.selected, true);\r\n        this.states.remove(RuleControlStates.focus);\r\n    }\r\n\r\n    public onBlur() {\r\n        this.states.remove(RuleControlStates.focus);\r\n        this.updateParentState(RuleControlStates.textboxFocus, true);\r\n        this.updateParentState(RuleControlStates.selected, true);\r\n    }\r\n\r\n    public onFocus() {\r\n        this.states.add(RuleControlStates.focus);\r\n        this.updateParentState(RuleControlStates.textboxFocus);\r\n        this.updateParentState(RuleControlStates.selected);\r\n    }\r\n\r\n    private updateParentState(state: string, remove: boolean = false) {\r\n        if (remove) {\r\n            this.removeParentState.emit(state);\r\n        } else {\r\n            this.addParentState.emit(state);\r\n        }\r\n    }\r\n}\r\n","<k2-text-box tabindex=\"-1\"\r\n             [ngClass]=\"states.toString()\"\r\n             [k2Expression]=\"expressionModel.value\"\r\n             [k2Validation]=\"k2Validation\"\r\n             [k2Watermark]=\"getFromResx('Wizards', 'general_TypeDrop')|async\"\r\n             (k2TextboxOnDragEnter)=\"onDragEnter()\"\r\n             (k2TextboxOnDragLeave)=\"onDragLeave()\"\r\n             (k2TextboxOnFocus)=\"onFocus()\"\r\n             (k2TextboxOnBlur)=\"onBlur()\">\r\n</k2-text-box>\r\n","import { ChangeDetectorRef, Component, ElementRef, EventEmitter, Inject, Input, OnInit, Output, QueryList, Renderer2, ViewChildren } from '@angular/core';\r\nimport { TextboxComponent } from 'src/app/components/common/text-box/text-box.component';\r\nimport { ValidationServiceToken } from 'src/app/services/validation/validation-service-factory';\r\nimport { ComponentIdMapping } from 'src/app/shared/constants/components';\r\nimport { dataTypes } from 'src/app/shared/constants/data-types';\r\nimport { rules } from 'src/app/shared/constants/rules';\r\nimport { DropDownMenuAlignment } from 'src/app/shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from 'src/app/shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from 'src/app/shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from 'src/app/shared/enums/drop-down/drop-down-triangle-position';\r\nimport { ExternalReferenceState } from 'src/app/shared/enums/external-references/external-references';\r\nimport { EventTypes } from 'src/app/shared/enums/model/event-types';\r\nimport { ExternalReferenceUtilities } from 'src/app/shared/utils/external-references';\r\nimport { IConfiguredFilterExpression } from 'src/types/models/rules/i-configured-filter-expression';\r\nimport { IExpressionConfiguration } from 'src/types/models/rules/i-expression-configuration';\r\nimport { IConfigPanelService } from '../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { ISelectionService } from '../../../../../types/services/selection/i-selection-service';\r\nimport { IValidationService } from '../../../../../types/services/validation/ivalidation.service';\r\nimport { CommandServiceToken } from '../../../../services/command/command-service-factory';\r\nimport { ConfigPanelServiceToken } from '../../../../services/config-panel/config-panel-service-factory';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { ProcessService } from '../../../../services/process/process.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../../services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from '../../../../services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ExpressionBaseComponent } from '../../base/expression-base/expression-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-filter-expression',\r\n    templateUrl: './filter-expression.component.html',\r\n    styleUrls: ['./filter-expression.component.less']\r\n})\r\nexport class FilterExpressionComponent extends ExpressionBaseComponent implements OnInit {\r\n\r\n    // Used to get the textbox\r\n    @ViewChildren('txtValue') textBoxes: QueryList<TextboxComponent>;\r\n    private txtValue: TextboxComponent;\r\n\r\n    @Input() selectedIndex = 0;\r\n\r\n    @Input() selectedLeftItem;\r\n\r\n    @Input() leftItems = [];\r\n\r\n    @Input() simpleExpressionOperatorDropdownItems = [];\r\n\r\n    @Input() externalDefinitionParent: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectMethodField;\r\n\r\n    @Output() onGroupExpressionDropped: EventEmitter<number> = new EventEmitter<number>();\r\n\r\n    @Input() expression: IConfiguredFilterExpression;\r\n\r\n    operators: IDropDownMenuItem[] = [];\r\n    selectedOperatorItem: IDropDownMenuItem;\r\n    hasParentError = false;\r\n    parentErrorMessage = '';\r\n    rulesIcons = rules.icons;\r\n\r\n    private _expressionConfiguration: IExpressionConfiguration;\r\n    private _outsideClickListenerRemover: any;\r\n    private _propertyChangedWatch: Function;\r\n    private _isLeftItemsLoaded: boolean;\r\n    private _leftItemCheckIntervalHandle: NodeJS.Timeout;\r\n\r\n    dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    dropdownMenuItemTemplate: typeof DropdownMenuItemTemplates = DropdownMenuItemTemplates;\r\n\r\n    constructor(@Inject(SelectionServiceToken) _selService: ISelectionService,\r\n        rulePluginService: RulePluginService,\r\n        @Inject(CommandServiceToken) commandService: ICommandService,\r\n        @Inject(ConfigPanelServiceToken) configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) undoRedoService: IUndoRedoService,\r\n        resourceService: ResourceService,\r\n        eventService: EventNotifierService,\r\n        private _renderer: Renderer2,\r\n        private _el: ElementRef,\r\n        private _processService: ProcessService,\r\n        @Inject(ValidationServiceToken) private _validationService: IValidationService,\r\n        private _changeDetector: ChangeDetectorRef) {\r\n\r\n        super(_selService, rulePluginService, commandService, configPanelService, undoRedoService, eventService, _el, resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n\r\n        super.ngOnInit();\r\n\r\n        this.undoRedoService.forceDisable();\r\n\r\n        this.expressionModel = this.expression;\r\n\r\n        this.expression = this.expressionModel as IConfiguredFilterExpression;\r\n        this._expressionConfiguration = this.rulePluginService.getExpressionConfiguration(this.expression) as IExpressionConfiguration;\r\n\r\n        this.populateLogicalOperatorDropDown();\r\n\r\n        this.setInitialValues();\r\n\r\n        // clone, as they are passed in by reference\r\n        this.leftItems = this.leftItems.map(leftItem =>\r\n            typeof leftItem.clone === 'function' ? leftItem.clone() : {...leftItem}\r\n        );\r\n\r\n        this._propertyChangedWatch = this.expression.listen(EventTypes.propertyChanged, this.updateSelectedItem.bind(this));\r\n\r\n        this.undoRedoService.resetForceDisable();\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n\r\n        // The textbox won't render when this control loads, so we have to create a query, and subscribe to result changes\r\n        // Then we can get the first one to focus on when it is rendered.\r\n        this.textBoxes.changes.subscribe((components: QueryList<TextboxComponent>) => {\r\n            this.txtValue = components.first;\r\n        });\r\n\r\n        // Handle deselecting the condition\r\n        this._outsideClickListenerRemover = this._renderer.listen('document', 'mouseup', (evt) => {\r\n            if (this.rootElement.nativeElement !== evt?.target) {\r\n                this.setSelected(false);\r\n            }\r\n        });\r\n\r\n        /**\r\n         * All this because the left-items are updated after afterviewinit.\r\n         */\r\n        this._leftItemCheckIntervalHandle = setInterval(() => {\r\n            if (!this._isLeftItemsLoaded && this.leftItems.length > 0) {\r\n\r\n                this._isLeftItemsLoaded = true;\r\n                clearInterval(this._leftItemCheckIntervalHandle);\r\n\r\n                if (this.expression.property) {\r\n                    this.updateSelectedItem(null, 'property', null, null);\r\n                    this._changeDetector.detectChanges();\r\n                }\r\n            }\r\n        }, 50);\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        typeof this._outsideClickListenerRemover === 'function' && this._outsideClickListenerRemover();\r\n        typeof this._propertyChangedWatch === 'function' && this._propertyChangedWatch();\r\n        super.ngOnDestroy();\r\n    }\r\n\r\n    updateSelectedItem = (obj: sourceCode.k2Designer.objectModel.core.model.IModelObject, name: string, oldVal: any, newVal: any) => {\r\n\r\n        if (name !== 'property') {\r\n            return;\r\n        }\r\n\r\n        this.validateExternalReferenceParent();\r\n\r\n        const selectedProperty = this._processService.root.findItem<sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectPropertyField>\r\n        (this.expression.property);\r\n\r\n        if (!selectedProperty) {\r\n            this.selectedLeftItem = null;\r\n            return;\r\n        }\r\n\r\n        const wasInError: boolean = this.expression.errorInformation?.length > 0;\r\n\r\n        //Find selected item in item collection list\r\n        const matches = this.leftItems.filter(leftItem => leftItem.key === selectedProperty.systemName);\r\n\r\n        if (matches.length > 0) {\r\n            //Set selected item from the match in left items collection list\r\n            this.selectedLeftItem = matches[0];\r\n\r\n            if (wasInError) {\r\n                //Current selected property is valid, but previous selected property was a missing value in error\r\n                this._validationService.reevaluateErrors(this.expression.errorInformation, true);\r\n            }\r\n\r\n            this.expression.property = ExternalReferenceUtilities.getExternalDefinitionToken(this.externalDefinitionParent, this.selectedLeftItem.key, true);\r\n\r\n        } else if (selectedProperty.state !== ExternalReferenceState.Missing\r\n            && !this.hasParentError) {\r\n\r\n            //Property is not in a missing state but cannot be found in items collection, reset\r\n            this.selectedLeftItem = null;\r\n\r\n            return;\r\n        }\r\n\r\n        //Handle missing properties in error. We also need to ensure if the parent is in error we still display the property\r\n        if (selectedProperty.state === ExternalReferenceState.Missing ||\r\n            this.hasParentError) {\r\n\r\n            if (matches.length === 0) {\r\n\r\n                //Missing property has already been removed (in a previous configured filter), set selected property from external reference property\r\n                // Default icon\r\n                let propIcon = `${dataTypes.icons.prefix}${dataTypes.icons.default}`;\r\n\r\n                if (!!selectedProperty.type) {\r\n                    propIcon = `${dataTypes.icons.prefix}${selectedProperty.type.toLowerCase()}`;\r\n                }\r\n\r\n                // TODO before commit: See if we can refactor this?\r\n                this.selectedLeftItem = <IDropDownMenuItem>{\r\n                    key: selectedProperty.getReference(),\r\n                    title: selectedProperty.displayName || selectedProperty.systemName,\r\n                    icon: `${dataTypes.icons.base} ${propIcon}`,\r\n                    metaData: {\r\n                        type: selectedProperty.type,\r\n                        state: selectedProperty.state\r\n                    },\r\n                    isSelected: true\r\n                };\r\n\r\n            } else {\r\n\r\n                //Remove missing property from collection\r\n                for (let i: number = this.leftItems.length - 1; i >= 0; i--) {\r\n                    if (this.leftItems[i].key === this.selectedLeftItem.key) {\r\n                        this.leftItems.splice(i, 1);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Set default or existing values for the control\r\n     */\r\n    setInitialValues() {\r\n\r\n        this.expression.configuredOperator = this.expression.configuredOperator || rules.operators.equals;\r\n\r\n        this.expression.operatorIcon = this._expressionConfiguration\r\n            .operators\r\n            .find(o => o.name === this.expression.configuredOperator)\r\n            ?.icon;\r\n    }\r\n\r\n    onLeftItemSelected(item: IDropDownMenuItem) {\r\n        this.undoRedoService.addUndoMarker('--k2FilterExpression: left item selected--');\r\n\r\n        this.selectedLeftItem = item;\r\n        this.expression.propertyType = item.metaData.type;\r\n\r\n        this.expression.property = ExternalReferenceUtilities.getExternalDefinitionToken(this.externalDefinitionParent, item.key, true);\r\n\r\n        this.focusTextbox();\r\n    }\r\n\r\n    onOperatorSelected(item: IDropDownMenuItem) {\r\n        this.expression.configuredOperator = item.key;\r\n        this.expression.operatorIcon = item.icon;\r\n        this.selectedOperatorItem = item;\r\n    }\r\n\r\n    /**\r\n     * Handles state for hovering\r\n     *\r\n     * @param controlName\r\n     * @returns\r\n     */\r\n    isHovering(controlName: string) {\r\n        return this.states.isExist(`${controlName}-hover`);\r\n    }\r\n\r\n    /**\r\n     * Handles state for hovering\r\n     *\r\n     * @param controlName\r\n     * @returns\r\n     */\r\n    hoverOn(controlName: string) {\r\n        this.states.add(`${controlName}-hover`);\r\n    }\r\n\r\n    /**\r\n     * Handles state for hovering\r\n     *\r\n     * @param controlName\r\n     * @returns\r\n     */\r\n    hoverOff(controlName: string) {\r\n        this.states.remove(`${controlName}-hover`);\r\n    }\r\n\r\n    private focusTextbox() {\r\n        setTimeout(() => {\r\n            this.txtValue?.doFocus();\r\n        }, 100);\r\n    }\r\n\r\n    private populateLogicalOperatorDropDown() {\r\n        this.populateLogicalOperators(this._expressionConfiguration.operators, this.operators, this.expression.configuredOperator);\r\n        this.populateOperatorCommands(this._expressionConfiguration.commands, this.operators);\r\n    }\r\n\r\n    /**\r\n     * Set validation data if property mapper's parent external reference is missing\r\n     * */\r\n    private validateExternalReferenceParent() {\r\n\r\n        this.hasParentError = false;\r\n        this.parentErrorMessage = '';\r\n\r\n        if (this.externalDefinitionParent) {\r\n            //If parent method or parent SMO is missing:\r\n            const parent = this.externalDefinitionParent;\r\n            if (parent.componentId === ComponentIdMapping.SmartObjectMethodFieldExternalReference) {\r\n                let hasValidParent = this.externalDefinitionParent.state !== ExternalReferenceState.Missing;\r\n                if (hasValidParent) {\r\n                    const smartFieldParent = (this.externalDefinitionParent as sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectMethodFieldExtension)\r\n                        .parentSmartObjectField();\r\n                    if (!!smartFieldParent) {\r\n                        hasValidParent = smartFieldParent.state !== ExternalReferenceState.Missing;\r\n                        if (!hasValidParent) {\r\n                            const errorMessage = 'resource_service_removed_consumed_ext_reference_smartobject_by_property_mapper';\r\n                            this.parentErrorMessage = this.resourceService.resolveTokenResourceString(\r\n                                errorMessage, [smartFieldParent.displayName || smartFieldParent.systemName], smartFieldParent\r\n                            );\r\n                        }\r\n                    }\r\n                } else {\r\n                    const errorMessage = 'resource_service_removed_consumed_ext_reference_smartobject_method_by_property_mapper';\r\n                    this.parentErrorMessage = this.resourceService.resolveTokenResourceString(\r\n                        errorMessage, [parent.displayName || parent.systemName], parent\r\n                    );\r\n                }\r\n                this.hasParentError = !hasValidParent;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected deleteExpression(expressionToDelete: IConfiguredFilterExpression): boolean {\r\n        if (!expressionToDelete) return false;\r\n\r\n        this.undoRedoService.addUndoMarker('-- delete expression--');\r\n\r\n        const parentGroup = this.getExpressionParentGroup(expressionToDelete);\r\n\r\n        if (parentGroup.expressions.length === 1) {\r\n            // first set to null so that undo reverts it.\r\n            expressionToDelete.configuredOperator = null;\r\n\r\n            expressionToDelete.removeFromModelArray();\r\n        } else {\r\n            const expressionToRemoveIndex = parentGroup.expressions.indexOf(expressionToDelete);\r\n            //If expression to delete is contained between 2 operators, remove 1 operator (to prevent double operators remaining)\r\n            if (parentGroup.expressions.length > 2 && expressionToRemoveIndex > 0 &&\r\n                expressionToRemoveIndex < parentGroup.expressions.length - 1 &&\r\n                this.isOperatorType(parentGroup.expressions[expressionToRemoveIndex - 1]) &&\r\n                this.isOperatorType(parentGroup.expressions[expressionToRemoveIndex + 1])) {\r\n                parentGroup.expressions[expressionToRemoveIndex - 1].removeFromModelArray();\r\n            }\r\n\r\n            expressionToDelete.removeFromModelArray();\r\n        }\r\n\r\n        this.cleanupOperators(parentGroup);\r\n        this.updateGroupExpressionOf(parentGroup);\r\n        return true;\r\n    }\r\n\r\n    getDragImageFn = super.getDragImage.bind(this);\r\n\r\n}\r\n","<div class=\"main-container\">\r\n    <div tabindex=\"0\" class=\"condition-block\" [class.selected]=\"index === selectedIndex\"\r\n         K2Droppable\r\n         [k2Droptypes]=\"'ruleDesignerItem'\">\r\n        <k2-drop-down #leftDropDown tabindex=\"0\"\r\n                    class=\"property-dropdown\"\r\n                    [menuItems]=\"leftItems\"\r\n                    [innerItemComponent]=\"dropdownMenuItemTemplate.Default\"\r\n                    (onItemSelected)=\"onLeftItemSelected($event)\">\r\n            <div *ngIf=\"selectedLeftItem\">\r\n                <div class=\"icon-content\"><span [ngClass]=\"'icon icon-set-datatypes icon-size16 ic-'+selectedLeftItem.icon\"></span></div>\r\n                <div class=\"desc-content\">\r\n                    <div class=\"desc-content-text\" data-k2-tooltip-basic>{{selectedLeftItem.title}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"water-mark\" *ngIf=\"!selectedLeftItem\">{{resourceService.getFromResx(\"Controls\", \"filterExpression_choose_property\") | async}}</div>\r\n            <div class=\"icon-content-dd\">\r\n                <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                <k2-badges [k2Model]=\"expression\"\r\n                    [alwaysHideBadge]=\"(expression.errorInformation?.length === 0) \r\n                        && (expression.childErrorInformation?.length === 0)\">\r\n                </k2-badges>\r\n            </div>\r\n        </k2-drop-down>\r\n        <k2-drop-down #rightDropDown tabindex=\"0\"\r\n                    class=\"condition-operator\"\r\n                    [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                    [trianglePosition]=\"dropDownMenuTrianglePosition.left\"\r\n                    [menuItems]=\"operators\"\r\n                    (onItemSelected)=\"onOperatorSelected($event)\"\r\n                    customMenuClass=\"condition-block-menu\"\r\n                    (mouseenter)=\"hoverOn('operator')\"\r\n                    (mouseleave)=\"hoverOff('operator')\">\r\n            <span tabindex=\"-1\"\r\n                [ngClass]=\"isHovering('operator') ? rulesIcons.popoverArrow : expression.operatorIcon\">\r\n            </span>\r\n        </k2-drop-down>\r\n        <k2-text-box #textBox tabindex=\"-1\"\r\n                    [ngClass]=\"' condition-input right-operand'\"\r\n                    [k2Expression]=\"expression.rightExpression\"\r\n                    [k2Watermark]=\"getFromResx('Wizards', 'general_TypeDrop') | async\">\r\n        </k2-text-box>\r\n        <div class=\"condition-grip sortable-drag-handle\"\r\n            K2Draggable\r\n            k2Dragtype=\"ruleDesignerItem\"\r\n            [k2Dragitem]=\"getDragItem\"\r\n            [k2Dragcontext]=\"expression\"\r\n            [k2Dragghost]=\"getDragImageFn\">\r\n            <div tabindex=\"-1\" class=\"icon icon-set-steps icon-size16 ic-draghandle condition-icon\"></div>\r\n        </div>\r\n    </div>\r\n </div>\r\n","import { Component, EventEmitter, HostListener, Inject, Input, OnInit, Output } from '@angular/core';\r\nimport { LegacyResourceServiceToken } from 'src/app/legacy-service-factories/resource-service-factory';\r\nimport { UndoRedoServiceToken } from 'src/app/services/undo-redo/undo-redo-service-factory';\r\nimport { DropDownMenuAlignment } from 'src/app/shared/enums/drop-down/drop-down-menu-alignment';\r\nimport { DropdownMenuItemTemplates } from 'src/app/shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from 'src/app/shared/enums/drop-down/drop-down-triangle-position';\r\nimport { EventTypes } from 'src/app/shared/enums/model/event-types';\r\nimport { ComplexOperator } from 'src/app/shared/enums/rules/complex-operator';\r\nimport { ILegacyResourceService } from 'src/types/services/resources/i-legacy-resource.service';\r\nimport IDropDownMenuItem from '../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { isUndefinedOrNull } from '../../../../shared/utils/general';\r\nimport { RulePluginService } from '../../../../services/ruleplugin/rule-plugin-service';\r\n\r\n@Component({\r\n    selector: 'k2-group-boolean-operator-expression',\r\n    templateUrl: './group-boolean-operator-expression.component.html',\r\n    styleUrls: ['./group-boolean-operator-expression.component.less']\r\n})\r\nexport class GroupBooleanOperatorExpressionComponent implements OnInit {\r\n\r\n    @Input() configuredGroupOperator: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredGroupOperator;\r\n    @Input() index: number;\r\n\r\n    @Output() onDrop: EventEmitter<number> = new EventEmitter<number>();\r\n    @Output() onGroupOptionSelected: EventEmitter<number> = new EventEmitter<number>();\r\n\r\n    public multipleConditionAndOr: IDropDownMenuItem[] = [];\r\n    public title: string;\r\n\r\n    private _onModelPropertyChangedRemover: () => void;\r\n    private _isSelecting: boolean;\r\n    private _previousOperatorValue: sourceCode.k2Designer.objectModel.core.configuredRules.ComplexOperator;\r\n\r\n    // Enum imports for use in templates\r\n    public dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    public dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    public dropdownMenuItemTemplate: typeof DropdownMenuItemTemplates = DropdownMenuItemTemplates;\r\n\r\n    constructor(\r\n        @Inject(LegacyResourceServiceToken) private _resourceService: ILegacyResourceService,\r\n        private _rulePluginService: RulePluginService,\r\n        @Inject(UndoRedoServiceToken) private _undoRedoService: IUndoRedoService) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.setupMultipleConditionDropdownItems();\r\n\r\n        this.setTitle();\r\n\r\n        this._onModelPropertyChangedRemover = this.configuredGroupOperator\r\n            .listen(EventTypes.propertyChanged, this.onModelPropertyChanged.bind(this));\r\n    }\r\n\r\n    ngOnDestroy(): void{\r\n        if(this._onModelPropertyChangedRemover) {\r\n            this._onModelPropertyChangedRemover();\r\n        }\r\n    }\r\n\r\n    @HostListener('drop', ['$event'])\r\n    public dropped(evt: Event): boolean {\r\n        this.onDrop.emit(this.index);\r\n        return false;\r\n    }\r\n\r\n    @HostListener('dragleave', ['$event'])\r\n    private dragleft(evt: Event): boolean {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        return false;\r\n    }\r\n\r\n    @HostListener('dragenter', ['$event'])\r\n    private dragentered(evt: Event): boolean {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        return false;\r\n    }\r\n\r\n    private onModelPropertyChanged = ()=> {\r\n\r\n        if(!this._isSelecting) {\r\n            this.setSelectedItem();\r\n            this.setTitle();\r\n\r\n            this._previousOperatorValue = this.configuredGroupOperator.expressionOperator;\r\n        }\r\n    };\r\n\r\n    private setTitle = (): void => {\r\n        // By the time this is reached, the dropdown should have been set up, and the default item selected.\r\n        // If not, show that nothing is selected.\r\n        this.title = this.multipleConditionAndOr.find(x => x.isSelected)?.title ?? 'ERROR - NO OPTION SELECTED';\r\n    };\r\n\r\n    private setSelectedItem = (): void => {\r\n        this.multipleConditionAndOr.forEach(\r\n            x => {\r\n                x.isSelected = x.key === this.configuredGroupOperator.expressionOperator.toString()\r\n                    ? true\r\n                    : false;\r\n            });\r\n    };\r\n\r\n    private addCondition = (): void => {\r\n        const expression: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression =\r\n            this._rulePluginService.createExpression('SimpleExpression') as sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression;\r\n\r\n        this.addExpressionToModel(expression);\r\n    };\r\n\r\n    private addTaskCondition = (): void => {\r\n        const expression: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression =\r\n            this._rulePluginService.createExpression('TaskExpression') as sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression;\r\n\r\n        this.addExpressionToModel(expression);\r\n    };\r\n\r\n    private addFilterExpression = (): void => {\r\n        const expression: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression =\r\n            this._rulePluginService.createExpression('FilterExpression') as sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression;\r\n\r\n        this.addExpressionToModel(expression, true);\r\n    };\r\n\r\n    private addExpressionToModel(expression?: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression, isForFilterExpression: boolean = false): void {\r\n\r\n        const operator: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredGroupOperator = this._rulePluginService.createOperator('GroupBooleanOperator');\r\n        operator.configureForFilterControl = isForFilterExpression;\r\n\r\n        const parent: sourceCode.k2Designer.objectModel.core.model.IModelArray<sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression> =\r\n            this.configuredGroupOperator.getParentModel();\r\n\r\n        this._undoRedoService.addUndoMarker('-- group boolean operator - addExpression selected --');\r\n\r\n        //Insert after current expression.\r\n        const currentExpression_index = parent.indexOf(this.configuredGroupOperator);\r\n        parent.splice(currentExpression_index + 1, 0, expression);\r\n        parent.splice(currentExpression_index + 2, 0, operator);\r\n    }\r\n\r\n    private onItemSelected = (dropdownItem: IDropDownMenuItem): void => {\r\n        this._undoRedoService.addUndoMarker('-- group boolean operator selected --');\r\n\r\n        this._isSelecting = true;\r\n\r\n        this.title = dropdownItem.title;\r\n\r\n        switch (dropdownItem.key) {\r\n            case ComplexOperator.And.toString():\r\n                this.configuredGroupOperator.expressionOperator = ComplexOperator.And;\r\n                break;\r\n            case ComplexOperator.Or.toString():\r\n            default:\r\n                this.configuredGroupOperator.expressionOperator = ComplexOperator.Or;\r\n                break;\r\n        }\r\n\r\n        this._previousOperatorValue = this.configuredGroupOperator.expressionOperator;\r\n        this._isSelecting = false;\r\n    };\r\n\r\n    private setupMultipleConditionDropdownItems(): void {\r\n\r\n        this.multipleConditionAndOr = [{\r\n            key: ComplexOperator.And.toString(),\r\n            isSeparator: false,\r\n            title: this._resourceService.getString('ruledesigner_logical_and_operator_cap'),\r\n            isSelected: this.configuredGroupOperator.expressionOperator === ComplexOperator.And,\r\n            onSelected: this.onItemSelected\r\n        }, {\r\n            key: 'seperator-1',\r\n            isSeparator: true\r\n        }, {\r\n            key: ComplexOperator.Or.toString(),\r\n            isSeparator: false,\r\n            title: this._resourceService.getString('ruledesigner_logical_or_operator_cap'),\r\n            isSelected:  isUndefinedOrNull(this.configuredGroupOperator.expressionOperator) // if it is \"Or\", the value is removed from the model\r\n                || this.configuredGroupOperator.expressionOperator === ComplexOperator.Or,\r\n            onSelected: this.onItemSelected\r\n        }, {\r\n            key: 'seperator-2',\r\n            isSeparator: true\r\n        }];\r\n\r\n        if (!this.configuredGroupOperator.configureForFilterControl) {\r\n            this.multipleConditionAndOr.push({\r\n                key: 'g',\r\n                icon: 'icon icon-set-conditionsdropdown icon-size16 ic-groupconditions',\r\n                isSeparator: false,\r\n                title: this._resourceService.getString('ruledesigner_group_conditions_cap'),\r\n                ignoreUpdateSelection: true,\r\n                onSelected: () => {\r\n                    this.onGroupOptionSelected.emit(this.index);\r\n                }\r\n            });\r\n        }\r\n\r\n        this.multipleConditionAndOr.push({\r\n            key: 'c',\r\n            icon: 'icon icon-set-rulestoolbar icon-size16 ic-condition',\r\n            isSeparator: false,\r\n            title: this._resourceService.getString('ruledesigner_add_condition_cap'),\r\n            ignoreUpdateSelection: true,\r\n            onSelected: this.configuredGroupOperator.configureForFilterControl\r\n                ? this.addFilterExpression\r\n                : this.addCondition\r\n        });\r\n\r\n        if (!this.configuredGroupOperator.configureForFilterControl &&\r\n            this._rulePluginService.contextHandler.configuration.expressions.indexOf('TaskExpression') !== -1) {\r\n            this.multipleConditionAndOr.push({\r\n                key: 't',\r\n                icon: 'icon icon-set-rulestoolbar icon-size16 ic-taskcondition',\r\n                isSeparator: false,\r\n                title: this._resourceService.getString('ruledesigner_add_task_condition_cap'),\r\n                ignoreUpdateSelection: true,\r\n                onSelected: this.addTaskCondition\r\n            });\r\n        }\r\n    }\r\n}\r\n","<div class=\"main-container\">\r\n    <div class=\"group-operator-block\" K2Droppable (k2Dropped)=\"dropped($event)\" [k2WillBubbleToGrandparent]=\"true\" [k2Droptypes]=\"['ruleDesignerItem', 'ruleDesignerItem']\">\r\n        <k2-drop-down \r\n            class=\"group-operator\" \r\n            [menuAlignment]=\"dropdownMenuAlignment.centered\" \r\n            [trianglePosition]=\"dropDownMenuTrianglePosition.center\"\r\n            [menuItems]=\"multipleConditionAndOr\" \r\n            [isMultiSelect]=\"false\"\r\n            [innerItemComponent]=\"dropdownMenuItemTemplate.GroupBooleanOperatorExpression\"\r\n            [menuAlignElement]=\"operatorIcon\">\r\n            <span selected-item class=\"group-operator-icon\" #operatorIcon>{{title}}</span>\r\n        </k2-drop-down>\r\n    </div>\r\n</div> \r\n","import { Component, ElementRef, Inject, Input, OnInit } from '@angular/core';\r\nimport { IConfiguredExpression } from '../../../../../types/models/rules/i-configured-expression';\r\nimport { IConfiguredGroupExpression } from '../../../../../types/models/rules/i-configured-group-expression';\r\nimport { IConfigPanelService } from '../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { ISelectionService } from '../../../../../types/services/selection/i-selection-service';\r\nimport { CommandServiceToken } from '../../../../services/command/command-service-factory';\r\nimport { ConfigPanelServiceToken } from '../../../../services/config-panel/config-panel-service-factory';\r\nimport { DragDropService } from '../../../../services/drag-drop/drag-drop.service';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../../services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from '../../../../services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ExpressionBaseComponent } from '../../base/expression-base/expression-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-group-expression',\r\n    templateUrl: './group-expression.component.html',\r\n    styleUrls: ['./group-expression.component.less']\r\n})\r\nexport class GroupExpressionComponent extends ExpressionBaseComponent implements OnInit {\r\n    @Input() public expressionModel: IConfiguredGroupExpression;\r\n    @Input() public index: number;\r\n    @Input() public leftItems: sourceCode.k2Designer.objectModel.dropDownMenu.IDropDowntMenuItem[];\r\n    @Input() public externalDefinitionParent: sourceCode.k2Designer.objectModel.core.model.IComponent;\r\n    @Input() nested: boolean;\r\n    @Input() alternateColour: boolean;\r\n    @Input() hideSimpleExpressionDragGrip: boolean;\r\n    @Input() hideSimpleExpressionOperatorCommands: boolean;\r\n\r\n    @Input() public selectedK2Model: {\r\n        item: any;\r\n        index: number;\r\n    };\r\n\r\n    public isSorting: boolean;\r\n    public sortable: boolean;\r\n\r\n    constructor(private _dragDropService: DragDropService,\r\n        @Inject(SelectionServiceToken) _selService: ISelectionService,\r\n        @Inject(CommandServiceToken) commandService: ICommandService,\r\n        @Inject(ConfigPanelServiceToken) configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) undoRedoService: IUndoRedoService,\r\n        rulePluginService: RulePluginService,\r\n        public resourceService: ResourceService,\r\n        eventService: EventNotifierService,\r\n        _el: ElementRef) {\r\n        super(_selService, rulePluginService, commandService, configPanelService, undoRedoService, eventService, _el, resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n    }\r\n\r\n    public expressionSelected(i: number, item: IConfiguredExpression) {\r\n        this.selectedK2Model.index = i;\r\n        this.selectedK2Model.item = item;\r\n    }\r\n\r\n    /**\r\n     * Insert expression at the index\r\n     *\r\n     * @param index - destination index for moving expression\r\n     * @param droppedData - expression that is being dragged/dropped\r\n     */\r\n    public insertExpressionAt(index: number, droppedData: any): void {\r\n        const configuredOperator: IConfiguredExpression = this.rulePluginService.createOperator('GroupBooleanOperator');\r\n\r\n        //clone of moving expression to apply as destination expression (the original one will be removed eventually)\r\n        const droppedDataClone = droppedData.clone();\r\n\r\n        // end result\r\n        //[expression]   //existing item\r\n        //[operator]     <== inserted\r\n        //[expression]   <== inserted (this is the one you are drag/dropping)\r\n\r\n        //insert the dropping item to specified index\r\n        this.expressionModel.expressions.splice(index, 0, droppedDataClone);\r\n        //insert the subsequent operator ('AND' 'OR') below the dropping item row\r\n        this.expressionModel.expressions.splice(index, 0, configuredOperator);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param index - index of where the expression is dropped (i.e. destination)\r\n     * @param dropppedData - expression that is being drag/dropped\r\n     */\r\n    public moveExpression(index: number, droppedData: any): void {\r\n        //need this check to ensure dropped data is an expression and not IF/ELSE block or any other drappable items\r\n        if (!this.rulePluginService.isConfiguredExpression(droppedData)) {\r\n            return;\r\n        }\r\n\r\n        this.insertExpressionAt(index, droppedData);\r\n\r\n        //remove the originally dragged item because we don't need it anymore. we got a clone that was dropped to the target index\r\n        this.deleteExpression(droppedData);\r\n    }\r\n\r\n    /**\r\n     *  called when an expression is dropped onto the very top empty space.\r\n        this function moves the expression to new location (first row)\r\n     */\r\n    public onDropTop(): void {\r\n        if (this._dragDropService.hasItem('ruleDesignerItem')) {\r\n\r\n            const droppedData = <any>this._dragDropService.getItem('ruleDesignerItem').getSource();\r\n\r\n            if (this.rulePluginService.isExpressionPlugin(droppedData)) {\r\n                //it gets here when dropping an expression from the bottom toolbox area\r\n                const newExpression = this.rulePluginService.createExpression(droppedData.name);\r\n                this.insertExpressionAt(0, newExpression);\r\n            }\r\n            else {\r\n                const index = 0; //we know when an expression is dropped on top space, insertion index is 0\r\n                this.moveExpression(index, droppedData);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     *  called when an expression is dropped onto the very bottom empty space\r\n        this function moves the expression to new location (last row)\r\n     */\r\n    public onDropBottom(): void {\r\n        if (this._dragDropService.hasItem('ruleDesignerItem')) {\r\n            const droppedData: any = <any>this._dragDropService.getItem('ruleDesignerItem').getSource();\r\n\r\n            const index = this.expressionModel.expressions.length; //this gets the destination index of target block (group)\r\n\r\n            if (this.rulePluginService.isExpressionPlugin(droppedData)) {\r\n                //it gets here when dropping an expression from the bottom toolbox area\r\n                const newExpression = this.rulePluginService.createExpression(droppedData.name);\r\n                this.insertExpressionAt(index, newExpression);\r\n            } else {\r\n                this.moveExpression(index, droppedData);\r\n            }\r\n        }\r\n    }\r\n\r\n    public onDrop(index?: number): void {\r\n        // when an expression is dropped on empty space there is no index and we don't deal with it.\r\n        if (!index) {\r\n            return;\r\n        }\r\n\r\n        if (this._dragDropService.hasItem('ruleDesignerItem')) {\r\n\r\n            const droppedData: any = <any>this._dragDropService.getItem('ruleDesignerItem').getSource();\r\n\r\n            if (this.rulePluginService.isExpressionPlugin(droppedData)) {\r\n                //it gets here when dropping an expression from the bottom toolbox area\r\n\r\n                //create a new expression and insert\r\n                const newExpression = this.rulePluginService.createExpression(droppedData.name);\r\n                this.insertExpressionAt(index, newExpression);\r\n            } else {\r\n                //it gets here when an existing expression is dragged/dropped onto an operator area between expressions\r\n                this.moveExpression(index, droppedData);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This function gets called when the Drop event of a k2TaskExpression or k2SimpleExpression fires (something is dropped on an expression).\r\n     * It determines if dropped expression should form a group with dropped-on expression or be added to existing group.\r\n     *\r\n     * @param index - index of the dropped-on expression\r\n     */\r\n    public droppedGroupConditions(index: number): void {\r\n        if (!this._dragDropService.hasItem('ruleDesignerItem')) {\r\n            return; //Non-RuleDesigner item was dropped, invalid drop.\r\n        }\r\n\r\n        const dragDropServiceData: any = this._dragDropService.getItem('ruleDesignerItem').getSource();\r\n        let droppedData = <IConfiguredExpression>{};\r\n        let isCanvasItem = false;\r\n\r\n        if (this.rulePluginService.isConfiguredExpression(dragDropServiceData)) {\r\n            //Expression that was dropped, was dragged from somewhere else on RuleDesigner canvas\r\n            isCanvasItem = true;\r\n            droppedData = dragDropServiceData;\r\n        } else if (this.rulePluginService.isExpressionPlugin(dragDropServiceData)) {\r\n            //Expression that was dropped, was dragged from toolbar and did not exist on canvas before (new).\r\n            droppedData = this.rulePluginService.createExpression(dragDropServiceData.name);\r\n        } else {\r\n            return; //Invalid item dropped, do nothing.\r\n        }\r\n\r\n        if (isCanvasItem && this.isDroppedOnItself(droppedData, index)) return;\r\n\r\n        //Add dropped expression to the group\r\n        const shouldDeleteOriginal = this.addExpressionToGroup(droppedData, index, isCanvasItem);\r\n\r\n        //Remove dropped expression from where it was\r\n        if (shouldDeleteOriginal) {\r\n            this.deleteExpression(droppedData);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns true if index that expression was dropped on was the same as index of expression it was dropped on\r\n     *\r\n     * @param expression expression dropped\r\n     * @param index index of dropped-on expression\r\n     */\r\n    private isDroppedOnItself(expression: IConfiguredExpression,\r\n        index: number): boolean {\r\n        const droppedOnExpression = this.expressionModel.expressions[index];\r\n        return droppedOnExpression.getReference() === expression.getReference();\r\n    }\r\n\r\n    /**\r\n     * Moving existing expression and dropping on another expression to form a group\r\n     *\r\n     * @param expression\r\n     * @param index\r\n     * @param isCanvasItem\r\n     */\r\n    private addExpressionToGroup(expression: IConfiguredExpression,\r\n        index: number, isCanvasItem: boolean = true): boolean {\r\n\r\n        const group = this.getExpressionParentGroup();\r\n        let shouldDeleteOriginal = isCanvasItem;\r\n\r\n        //Always create a new group if expression was dragged from toolbar (not from canvas)\r\n        //Always create a new group if expression was dropped on an expression from another group/level.\r\n        //If expression was dropped on an expression from within the same group/level,\r\n        //only create a new group if there will be enough expressions left in this group (current group should contain more than 2 expressions or 1 group)\r\n        const shouldCreateNewGroup = !isCanvasItem ||\r\n            (!this.isDroppedWithinSameGroup(expression) ||\r\n                (this.isDroppedWithinSameGroup(expression) &&\r\n                    (this.getConfiguredExpressionsInGroup(group).length > 2 || this.getGroupsInGroup(group).length > 0)));\r\n\r\n        if (shouldCreateNewGroup) {\r\n            //Clone expression so it doesn't trigger unexpected events:\r\n            const expressionClone = expression.clone<IConfiguredExpression>();\r\n            //Reset clone internal id to ensure it is assigned a unique id when added to group:\r\n            expressionClone.internalId = null;\r\n            //Dropped expression will always be joined to dropped-on expression by a default (AND) operator\r\n            const newOperator = this.rulePluginService.createOperator('GroupBooleanOperator');\r\n\r\n            //Expression that was dropped on\r\n            const droppedOnExpression = this.expressionModel.expressions[index];\r\n            //Clone expression so it doesn't trigger unexpected events:\r\n            const droppedOnExpressionClone = droppedOnExpression.clone<IConfiguredExpression>();\r\n            droppedOnExpressionClone.internalId = null;\r\n\r\n            //Add the new group to the parent group at the same position the dropped-on expression was\r\n            const newGroup = this.createNewExpressionGroup();\r\n            group.expressions.splice(index + 1, 0, newGroup as any);\r\n\r\n            //Populate the new group\r\n            newGroup.expressions.push(droppedOnExpressionClone);\r\n            newGroup.expressions.push(newOperator);\r\n            newGroup.expressions.push(expressionClone);\r\n\r\n            //Remove original dropped-on expression, because it is now cloned into a new group\r\n            this.deleteExpression(droppedOnExpression);\r\n\r\n        } else {\r\n            shouldDeleteOriginal = false;\r\n        }\r\n\r\n        return shouldDeleteOriginal;\r\n    }\r\n\r\n    /**\r\n     * Returns the Group in which expression is contained (IConfiguredComplexLogicalGroupExpression)\r\n     *\r\n     * @param expression\r\n     */\r\n    protected /*override*/ getExpressionParentGroup(expression?: IConfiguredExpression): IConfiguredGroupExpression {\r\n        if (!expression) {\r\n            expression = this.expressionModel.expressions as any;\r\n        }\r\n        return super.getExpressionParentGroup(expression) as any;\r\n    }\r\n\r\n    /**\r\n     * Returns all configured expressions in the group (will exclude other groups contained in group)\r\n     *\r\n     * @param group\r\n     */\r\n    private getConfiguredExpressionsInGroup(group: IConfiguredGroupExpression):\r\n        IConfiguredExpression[] {\r\n        const expressions = group.expressions.filter((item) => item.componentId === sourceCode.k2Designer.objectModel.core.deployment.LookupTypes.ConfiguredSimpleExpression);\r\n        return expressions;\r\n    }\r\n\r\n    /**\r\n     * Returns all groups contained in the group (will exclude other expressions in group)\r\n     *\r\n     * @param group\r\n     */\r\n    private getGroupsInGroup(group: IConfiguredGroupExpression):\r\n        IConfiguredExpression[] {\r\n        const groups =\r\n            group.expressions.filter((item) => this.isGroupType(item));\r\n        return groups;\r\n    }\r\n\r\n    /**\r\n     * Returns true if dropped expression's group is the same as dropped-on expression's group\r\n     *\r\n     * @param expression\r\n     */\r\n    private isDroppedWithinSameGroup(expression: IConfiguredExpression): boolean {\r\n        const droppedOnGroup = this.getExpressionParentGroup(this.expressionModel.expressions as any);\r\n        const droppedFromGroup = this.getExpressionParentGroup(expression);\r\n        return droppedOnGroup.getReference() === droppedFromGroup.getReference();\r\n    }\r\n\r\n    private createNewExpressionGroup(): sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredComplexLogicalGroupExpression {\r\n        const newGroup = <sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredComplexLogicalGroupExpression>this.rulePluginService.createExpression('GroupExpression');\r\n        return newGroup;\r\n    }\r\n\r\n    private groupConditions(index: number): void {\r\n        const operator: IConfiguredExpression = this.expressionModel.expressions[index];\r\n        const aboveExpression: IConfiguredExpression = this.expressionModel.expressions[index - 1];\r\n        const belowExpression: IConfiguredExpression = this.expressionModel.expressions[index + 1];\r\n        const clonedAboveExpression: IConfiguredExpression = aboveExpression.clone<IConfiguredExpression>();\r\n        const clonedOperator: IConfiguredExpression = operator.clone<IConfiguredExpression>();\r\n        const clonedBelowExpression = belowExpression.clone<IConfiguredExpression>();\r\n\r\n        let containerSmallerThanThreeItems = false;\r\n\r\n        //This check is used to prevent empty groups being created\r\n        if (this.expressionModel.expressions.length <= 3) {\r\n            containerSmallerThanThreeItems = true;\r\n        }\r\n\r\n        //Create a group (Array) and replace the current item with this array, pushing the items into the new array\r\n        if (!containerSmallerThanThreeItems) {\r\n\r\n            const newValue = this.createNewExpressionGroup() as any;\r\n            this.expressionModel.expressions.splice(index, 1, newValue);\r\n\r\n            aboveExpression.removeFromModelArray();\r\n            belowExpression.removeFromModelArray();\r\n            operator.removeFromModelArray();\r\n\r\n            (<sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredComplexLogicalGroupExpression>newValue).expressions.push(clonedAboveExpression);\r\n            (<sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredComplexLogicalGroupExpression>newValue).expressions.push(clonedOperator);\r\n            (<sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredComplexLogicalGroupExpression>newValue).expressions.push(clonedBelowExpression);\r\n        }\r\n    }\r\n\r\n    protected /*override*/ getDragImage(): HTMLElement {\r\n        const result: HTMLDivElement = document.createElement('div');\r\n        result.innerHTML = this.rootElement.nativeElement.innerHTML.toString();\r\n        return result;\r\n    }\r\n\r\n}\r\n","<div class=\"complex-element shadow\"\r\n     [class.alternate]=\"alternateColour\"\r\n     [class.nested]=\"!nested\"\r\n     [class.multi-expressions]=\"expressionModel?.expressions?.length > 1\"\r\n     K2Droppable\r\n     (k2Dropped)=\"onDrop()\"\r\n     k2Droptypes=\"ruleDesignerItem smartField configuredSmartField\">\r\n    <div K2Droppable\r\n         (k2Dropped)=\"onDropTop()\"\r\n         class=\"expression-top-empty-row expression-empty-row\"></div>\r\n    <div *ngFor=\"let item of expressionModel?.expressions; index as i; last as $last\" class=\"fadeMeIn\">\r\n        <k2-simple-expression class=\"k2-expression-item\"\r\n                              *ngIf=\"item.directive === 'k2-simple-expression'\"\r\n                              [expressionModel]=\"item\"\r\n                              [index]=\"i\"\r\n                              [hideDragGrip]=\"hideSimpleExpressionDragGrip\"\r\n                              [hideOperatorCommands]=\"hideSimpleExpressionOperatorCommands\"\r\n                              (droppedGroupConditions)=\"droppedGroupConditions(i)\"></k2-simple-expression>\r\n        <k2-task-expression class=\"k2-expression-item\"\r\n                            *ngIf=\"item.directive === 'k2-task-expression'\"\r\n                            [expressionModel]=\"item\"\r\n                            [index]=\"i\"\r\n                            (onDropped)=\"droppedGroupConditions(i)\"></k2-task-expression>\r\n        <k2-this-response-expression k2-scrollbar-focus class=\"k2-expression-item\"\r\n                                     *ngIf=\"item.directive === 'k2-this-response-expression'\"\r\n                                     [expression]=\"item\"\r\n                                     [index]=\"i\"\r\n                                     [last]=\"$last\"></k2-this-response-expression>\r\n        <k2-voting-response-expression class=\"k2-expression-item fadeMeIn\"\r\n                                       *ngIf=\"item.directive === 'k2-voting-response-expression'\"\r\n                                       [expressionModel]=\"item\"\r\n                                       [index]=\"i\"\r\n                                       (onDropped)=\"droppedGroupConditions(i)\"></k2-voting-response-expression>\r\n        <k2-group-boolean-operator-expression k2-scrollbar-focus class=\"k2-expression-item\"\r\n                                              *ngIf=\"item.directive === 'k2-group-boolean-operator-expression'\"\r\n                                              (onGroupOptionSelected)=\"groupConditions(i)\"\r\n                                              (onDrop)=\"onDrop(i)\"\r\n                                              [configuredGroupOperator]=\"item\"\r\n                                              [index]=\"i\"></k2-group-boolean-operator-expression>\r\n        <k2-group-expression k2-scrollbar-focus class=\"k2-expression-item\"\r\n                             *ngIf=\"item.directive === 'k2-group-expression'\"\r\n                             [alternateColour]=\"!alternateColour\"\r\n                             [index]=\"i\"\r\n                             [expressionModel]=\"item\"></k2-group-expression>\r\n        <k2-filter-expression k2-scrollbar-focus class=\"k2-expression-item\"\r\n                              *ngIf=\"item.directive === 'k2-filter-expression'\"\r\n                              (click)=\"expressionSelected(i, item)\"\r\n                              [selectedIndex]=\"selectedK2Model.index\"\r\n                              [index]=\"i\"\r\n                              [expression]=\"item\"\r\n                              [leftItems]=\"leftItems\"\r\n                              [externalDefinitionParent]=\"externalDefinitionParent\"></k2-filter-expression>\r\n        <k2-merge-expression k2-scrollbar-focus\r\n                             class=\"k2-expression-item fadeMeIn\"\r\n                             *ngIf=\"item.directive === 'k2-merge-expression'\"\r\n                             [expressionModel]=\"item\"\r\n                             [index]=\"i\"\r\n                             [last]=\"$last\"></k2-merge-expression>\r\n    </div>\r\n    <div K2Droppable (k2Dropped)=\"onDropBottom()\" class=\"expression-bottom-empty-row expression-empty-row\"></div>\r\n</div>\r\n","import { Component, ElementRef, Inject, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { IMergeExpressionConfiguration } from '../../../../../types/config/rules/expressions/IMergeExpressionConfiguration';\r\nimport { IMergeDropDownContext } from '../../../../../types/models/rules-designer/expression/IMergeDropDownContext';\r\nimport { IConfigPanelService } from '../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { ISelectionService } from '../../../../../types/services/selection/i-selection-service';\r\nimport { CommandServiceToken } from '../../../../services/command/command-service-factory';\r\nimport { ConfigPanelServiceToken } from '../../../../services/config-panel/config-panel-service-factory';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../../services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from '../../../../services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { rules } from '../../../../shared/constants/rules';\r\nimport { DropDownMenuAlignment } from '../../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from '../../../../shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from '../../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { RuleControlStates } from '../../../../shared/enums/rules/rule-control-states';\r\nimport { isUndefinedOrNull } from '../../../../shared/utils/general';\r\nimport { DropDownComponent } from '../../../common/drop-down/drop-down.component';\r\nimport { ExpressionBaseComponent } from '../../base/expression-base/expression-base.component';\r\nimport { IConfiguredMergeExpression } from '../../../../../types/models/rules/i-configured-merge-expression';\r\n\r\n@Component({\r\n    selector: 'k2-merge-expression',\r\n    templateUrl: './merge-expression.component.html',\r\n    styleUrls: ['./merge-expression.component.less']\r\n})\r\nexport class MergeExpressionComponent extends ExpressionBaseComponent implements OnInit, OnDestroy {\r\n    public /*override*/ expressionModel: IConfiguredMergeExpression;\r\n\r\n    public mergePathsDropDownName = 'path-menu';\r\n    public mergePathsItems: IDropDownMenuItem[];\r\n    public mergePathsFooterItems: IDropDownMenuItem[];\r\n\r\n    public mergeStateDropDownName = 'state-menu';\r\n    public mergeStateItems: IDropDownMenuItem[];\r\n\r\n    // Enum imports for use in templates\r\n    public dropdownMenuAlignment = DropDownMenuAlignment;\r\n    public dropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    public dropdownMenuItemTemplate = DropdownMenuItemTemplates;\r\n\r\n    public pathsDropDownTemplate: DropdownMenuItemTemplates;\r\n    public stateDropDownTemplate: DropdownMenuItemTemplates;\r\n\r\n    @ViewChild('mergePathsDropDown')\r\n    public mergePathsDropDownRef: DropDownComponent;\r\n    @ViewChild('mergeStateDropDown')\r\n    public mergeStateDropDownRef: DropDownComponent;\r\n\r\n    private _allPaths: any[];\r\n    private selectedPathItem;\r\n    private selectedStateItem;\r\n    private activityConfListener;\r\n    private _isPathConnected = false;\r\n\r\n    constructor(@Inject(SelectionServiceToken) _selService: ISelectionService,\r\n        rulePluginService: RulePluginService,\r\n        @Inject(CommandServiceToken) commandService: ICommandService,\r\n        @Inject(ConfigPanelServiceToken) configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) undoRedoService: IUndoRedoService,\r\n        resourceService: ResourceService,\r\n        eventService: EventNotifierService,\r\n        private _el: ElementRef) {\r\n        super(_selService, rulePluginService, commandService, configPanelService, undoRedoService, eventService, _el, resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this._allPaths = (this.rulePluginService.getExpressionConfiguration(this.expressionModel) as IMergeExpressionConfiguration).paths;\r\n\r\n        this.setDefaultSelectedItem();\r\n        this.mergePathsItems = this.getPathsDropdownItems();\r\n        this.mergePathsFooterItems = this.getPathsDropdownFooterItems();\r\n        this.mergeStateItems = this.getStateDropDownItems();\r\n\r\n        const activityCnf = this.rulePluginService.contextModel.getParentModel<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivityConfiguration>();\r\n        this.activityConfListener = activityCnf?.listen(sourceCode.k2Designer.objectModel.core.model.EventTypes.anythingChanged, () => {\r\n            this.mergePathsItems = this.getPathsDropdownItems();\r\n            return true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Returns the operator classes for the given drop down instance\r\n     *\r\n     * @param dropdownInstance drop down instance to retrieve classes for\r\n     */\r\n    public getOperatorIcon(dropdownName: string): string {\r\n        if (!dropdownName) {\r\n            return '';\r\n        }\r\n        let iconClass: string = this.expressionModel.logicalOperatorIcon + ' selected';\r\n        const isOnHover = this.states.isExist(dropdownName + '-hover');\r\n        const isMenuActive = this.states.isExist(dropdownName + '-active');\r\n\r\n        if (isOnHover || isMenuActive) {\r\n            iconClass = rules.icons.operatorIconHoverOrActive;\r\n        }\r\n        return iconClass;\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n        if (this.activityConfListener) {\r\n            this.activityConfListener();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Event handler for drop down menu open\r\n     *\r\n     * @param dropdownInstance drop down which menu opened\r\n     */\r\n    public onMenuOpen(dropDownName: string) {\r\n        const actionMenuName = dropDownName + '-active';\r\n        this.states.add(actionMenuName);\r\n        this.states.add(RuleControlStates.edit);\r\n    }\r\n\r\n    /**\r\n     * Event handler for drop down menu close\r\n     *\r\n     * @param dropdownInstance drop down which menu closed\r\n     */\r\n    public onMenuClose(dropDownName: string, dropdownInstance: DropDownComponent) {\r\n        if (this.states.isExist(dropDownName + '-active')) {\r\n            this.states.remove(dropDownName + '-active');\r\n            dropdownInstance.el.nativeElement.focus();\r\n            this.states.remove(RuleControlStates.edit);\r\n        }\r\n    }\r\n\r\n    public addDraggingState() {\r\n        this.states.add(RuleControlStates.dragging);\r\n    }\r\n\r\n    public removeDraggingState() {\r\n        this.states.remove(RuleControlStates.dragging);\r\n    }\r\n\r\n    public operatorOnMouseEnter(dropDownName: string) {\r\n        const hoverMenuName = dropDownName + '-hover';\r\n        this.states.add(RuleControlStates.hover);\r\n        if (!isUndefinedOrNull(hoverMenuName)) {\r\n            this.states.add(hoverMenuName);\r\n        }\r\n    }\r\n\r\n    public operatorOnMouseLeave(dropDownName: string) {\r\n        const hoverMenuName = dropDownName + '-hover';\r\n        this.states.remove(RuleControlStates.hover);\r\n        if (!isUndefinedOrNull(hoverMenuName)) {\r\n            this.states.remove(hoverMenuName);\r\n        }\r\n    }\r\n\r\n\r\n    private setDefaultSelectedItem() {\r\n        const outcomes = this.getPaths();\r\n        const pathTitle = this.expressionModel?.pathTitle || '';\r\n\r\n        if (outcomes && outcomes.length > 0 && !pathTitle) {\r\n            this.expressionModel.pathTitle = this.resourceService.getString(this._allPaths[0].titleToken);\r\n            this.expressionModel.pathReference = this._allPaths[0].name;\r\n        }\r\n        if (!this.expressionModel.state) {\r\n            this.expressionModel.state = rules.mergeStates.completed;\r\n        }\r\n    }\r\n\r\n    //Paths related operations\r\n    private getPaths(): sourceCode.k2Designer.objectModel.workflow.process.k2Process.IOutcome[] {\r\n        let outcomes = [];\r\n        if (this.rulePluginService.contextModel) {\r\n            const activityCnf = this.rulePluginService.contextModel.getParentModel<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivityConfiguration>();\r\n            const split: any = activityCnf.getRoot<sourceCode.k2Designer.objectModel.core.model.ModelObject>().findItem(\r\n                (activityCnf as sourceCode.k2Designer.objectModel.workflow.process.k2Process.activities.mergeActivity.IMergeActivityConfiguration).selectedSplitStepReference);\r\n            if (!split) {\r\n                this._isPathConnected = false;\r\n            } else {\r\n                this._isPathConnected = true;\r\n                outcomes = split.configuration.outcomes;\r\n            }\r\n        }\r\n        return outcomes;\r\n    }\r\n\r\n    protected getPathsDropdownItems(): IDropDownMenuItem[] {\r\n        const outcomes = this.getPaths();\r\n        const items = [];\r\n        if (outcomes?.length > 0) {\r\n            for (let i = 0; i < outcomes.length; i++) {\r\n                if (i >= 1) {\r\n                    items.push(DropDownComponent.separator);\r\n                }\r\n\r\n                const isSelected: boolean = (!!this.expressionModel.pathReference && this.expressionModel.pathReference.length > 0)\r\n                    ? outcomes[i].getReference() === this.expressionModel.pathReference\r\n                    : false;\r\n\r\n                items.push({\r\n                    title: outcomes[i].title,\r\n                    key: outcomes[i].getReference(),\r\n                    icon: this.getIconFor(outcomes[i].getReference()),\r\n                    isSelected\r\n                });\r\n                this.pathsDropDownTemplate = DropdownMenuItemTemplates.SimpleExpressionOperator;\r\n            }\r\n        }\r\n\r\n        if (!this.isSelectedPathExist && this.expressionModel?.pathTitle?.trim().length > 0) {\r\n            if (items.length > 0) {\r\n                items.splice(0, 0, DropDownComponent.separator);\r\n            }\r\n\r\n            items.splice(0, 0, {\r\n                title: this.expressionModel.pathTitle,\r\n                key: this.expressionModel.pathReference,\r\n                icon: this.getIconFor(this.expressionModel.pathReference),\r\n                isSelected: true\r\n            });\r\n            this.pathsDropDownTemplate = DropdownMenuItemTemplates.Disabled;\r\n        }\r\n        return items;\r\n    }\r\n\r\n    protected getPathsDropdownFooterItems(): IDropDownMenuItem[] {\r\n        const items = [];\r\n        const paths = this._allPaths;\r\n\r\n        if (paths) {\r\n            for (let i = 0; i < paths.length; i++) {\r\n                if (i >= 1) {\r\n                    items.push(DropDownComponent.separator);\r\n                }\r\n                const isSelected: boolean = this.expressionModel.pathReference?.length && paths[i].name === this.expressionModel.pathReference;\r\n\r\n                items.push({\r\n                    title: this.resourceService.getString(paths[i].titleToken),\r\n                    key: paths[i].name,\r\n                    icon: paths[i].icon,\r\n                    isSelected,\r\n                    innerItemComponent: DropdownMenuItemTemplates.SimpleExpressionOperator\r\n                });\r\n\r\n                this.pathsDropDownTemplate = DropdownMenuItemTemplates.SimpleExpressionOperator;\r\n            }\r\n        }\r\n        return items;\r\n    }\r\n\r\n    private getIconFor(pathRef: string): string {\r\n        const icon = pathRef.toLowerCase() === this._allPaths[0].name\r\n            ? this._allPaths[0].icon\r\n            : 'icon icon-set-picker icon-size24 ic-outcomedecision';\r\n        return icon;\r\n    }\r\n\r\n    public get isSelectedPathExist() {\r\n        const pathRefs = this.getPaths().filter((item: any) => {\r\n            const title = item.title || '';\r\n            const k2ModelTitle = this.expressionModel.pathTitle || '';\r\n            return title.toLowerCase() === k2ModelTitle.toLowerCase()\r\n                || item.getReference() === this.expressionModel.pathReference;\r\n        });\r\n\r\n        const isPreConfiguredPath = this._allPaths.filter((item: any) => item.name === this.expressionModel.pathReference).length > 0;\r\n\r\n        return pathRefs?.length || isPreConfiguredPath;\r\n    }\r\n\r\n    public getEmptyPathsTemplate(): string {\r\n        let html: string;\r\n        let message = '';\r\n\r\n        if (this._isPathConnected) {\r\n            message = this.resourceService.getString('ruledesigner_merge_expression_mergePath_NoOutcome');\r\n        } else {\r\n            message = this.resourceService.getString('ruledesigner_merge_expression_mergePath_NotConnected');\r\n        }\r\n\r\n        html = '<span class=\"icon icon-set-picker icon-size24 ic-splittask\"></span><div class=\"empty-state-message\">' + message + '</div>';\r\n        return html;\r\n    }\r\n    // End of paths related ops\r\n\r\n    // State related operations\r\n    private getStateDropDownItems(): IDropDownMenuItem[] {\r\n        const operators = (this.rulePluginService.getExpressionConfiguration(this.expressionModel) as IMergeExpressionConfiguration).mergeStates;\r\n        const commands = (<sourceCode.k2Designer.objectModel.rulePlugins.IExpressionConfiguration>this.rulePluginService.getExpressionConfiguration(this.expressionModel)).commands;\r\n        const config = {\r\n            logicalOperators: operators,\r\n            commands\r\n        };\r\n\r\n        const selectedOperator = this.expressionModel.state;\r\n        const items: IDropDownMenuItem[] = [];\r\n\r\n        for (let i = 0; i < config.logicalOperators.length; i++) {\r\n            if (i >= 1) {\r\n                items.push(DropDownComponent.separator);\r\n            }\r\n\r\n            items.push(\r\n                <IDropDownMenuItem>{\r\n                    key: config.logicalOperators[i].name,\r\n                    title: this.resourceService.getString(config.logicalOperators[i].titleToken),\r\n                    icon: config.logicalOperators[i].icon,\r\n                    isSeparator: false,\r\n                    isSelected: selectedOperator === config.logicalOperators[i].name,\r\n                    innerItemComponent: DropdownMenuItemTemplates.SimpleExpressionOperator\r\n                });\r\n\r\n            this.stateDropDownTemplate = DropdownMenuItemTemplates.SimpleExpressionOperator;\r\n        }\r\n\r\n        super.populateOperatorCommands(config.commands, items);\r\n\r\n        return items;\r\n    }\r\n\r\n    // End of state related ops\r\n    public focusMe(event: Event): void {\r\n        this._el.nativeElement.focus();\r\n    }\r\n\r\n    /**\r\n     * Event handler for a selection being made on a drop down\r\n     *\r\n     * @param dropDownInstance drop down where the selection was made\r\n     * @param item the selected item\r\n     */\r\n    onMergePathSelected = (item: IDropDownMenuItem) => {\r\n        this.expressionModel.pathTitle = item.title;\r\n        this.expressionModel.pathReference = item.key;\r\n        this.selectedPathItem = item;\r\n\r\n        this.onMenuClose(this.mergePathsDropDownName, this.mergePathsDropDownRef);\r\n    };\r\n\r\n    /**\r\n     * Event handler for a selection being made on a drop down\r\n     *\r\n     * @param dropDownInstance drop down where the selection was made\r\n     * @param item the selected item\r\n     */\r\n    onMergeStateSelected = (item: IDropDownMenuItem) => {\r\n        this.expressionModel.state = item.key;\r\n        this.selectedStateItem = item;\r\n\r\n        this.onMenuClose(this.mergeStateDropDownName, this.mergeStateDropDownRef);\r\n    };\r\n\r\n    public isPathChosen(): boolean {\r\n        return this.expressionModel.pathTitle?.trim().length > 0;\r\n    }\r\n\r\n    public getStateText(mergeState: string): string {\r\n        return this.resourceService.getString('ruledesigner_merge_expression_' + mergeState);\r\n    }\r\n\r\n    public getDragImage(): HTMLElement {\r\n        const result = super.getDragImage();\r\n        $(result).addClass('condition-block-dragging');\r\n        return result;\r\n    }\r\n}\r\n","<div tabindex=\"0\" [ngClass]=\"'condition-block merge-condition-block ' + states.toString()\" [attr.state]=\"states.toString()\"\r\n     K2Droppable\r\n     [k2Droptypes]=\"'ruleDesignerItem'\"\r\n     (click)=\"focusMe($event); setSelected(true);$event.stopPropagation();\">\r\n    <div class=\"merge-path-wrapper\">\r\n        <span [ngClass]=\"'icon icon-set-blocks icon-size500 ic-mergecondition ' + expressionModel.state?.toLowerCase()\"></span>\r\n        <div class=\"condition-input left-operand merge-path\">\r\n            <span class=\"merge-path-icon\">\r\n                <span [ngClass]=\"'icon icon-set-picker icon-size24 ic-splittask alt '+ expressionModel.state?.toLowerCase()\"></span>\r\n            </span>\r\n            <k2-drop-down #mergePathsDropDown class=\"merge-path-dropdown\"\r\n                          [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                          [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                          [menuItems]=\"mergePathsItems\"\r\n                          (onItemSelected)=\"onMergePathSelected($event)\"\r\n                          [footerItems]=\"mergePathsFooterItems\"\r\n                          [customMenuClass]=\"'condition-block-menu merge-path-menu'\"\r\n                          (menuOpened)=\"onMenuOpen(mergePathsDropDownName)\"\r\n                          (menuClosed)=\"onMenuClose(mergePathsDropDownName, mergePathsDropDown)\"\r\n                          (mouseenter)=\"operatorOnMouseEnter(mergePathsDropDownName)\"\r\n                          (mouseleave)=\"operatorOnMouseLeave(mergePathsDropDownName)\"\r\n                          [innerItemComponent]=\"pathsDropDownTemplate\"\r\n                          [emptyStateTemplate]=\"getEmptyPathsTemplate()\"\r\n                          (click)=\"focusMe($event); setSelected(true); $event.stopPropagation();\">\r\n                <span class=\"path-text text-ellipsis\">\r\n                    <span *ngIf=\"isPathChosen()\" [ngClass]=\"{'item-disabled' : isSelectedPathExist }\">{{expressionModel.pathTitle}}</span>\r\n                    <span *ngIf=\"!isPathChosen()\">{{resourceService.getFromResx(\"RulesDesigner\", \"ruleDesigner_Merge_ChoosePath\") | async}}</span>\r\n                </span>\r\n                <span class=\"dropdown-icon\" [ngClass]=\"getOperatorIcon(mergePathsDropDownName)\"></span>\r\n            </k2-drop-down>\r\n        </div>\r\n        <div class=\"condition-input right-operand merge-state\">\r\n            <k2-drop-down #mergeStateDropDown class=\"merge-state-dropdown\"\r\n                          [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                          [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                          [menuItems]=\"mergeStateItems\"\r\n                          (onItemSelected)=\"onMergeStateSelected($event)\"\r\n                          [customMenuClass]=\"'condition-block-menu merge-state-menu'\"\r\n                          (menuOpened)=\"onMenuOpen(mergeStateDropDownName)\"\r\n                          (menuClosed)=\"onMenuClose(mergeStateDropDownName, mergeStateDropDown)\"\r\n                          (mouseenter)=\"operatorOnMouseEnter(mergeStateDropDownName)\"\r\n                          (mouseleave)=\"operatorOnMouseLeave(mergeStateDropDownName)\"\r\n                          [innerItemComponent]=\"stateDropDownTemplate\"\r\n                          (click)=\"focusMe($event); setSelected(true); $event.stopPropagation();\">\r\n                <span class=\"state-text text-ellipsis\">{{getStateText(expressionModel.state)}}</span>\r\n                <span class=\"dropdown-icon\" [ngClass]=\"getOperatorIcon(mergeStateDropDownName)\"></span>\r\n            </k2-drop-down>\r\n            <span class=\"merge-state-icon\">\r\n                <span [ngClass]=\"'icon icon-set-picker icon-size24 ic-mergetask ' + expressionModel.state?.toLowerCase()\"></span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class=\"condition-grip\"\r\n         K2Draggable\r\n         [k2Dragtype]=\"'ruleDesignerItem'\"\r\n         [k2Dragitem]=\"getDragItem.bind(this)\"\r\n         [k2Dragcontext]=\"expressionModel\"\r\n         [k2Dragghost]=\"getDragImage.bind(this)\"\r\n         (k2Dragstart)=\"addDraggingState()\"\r\n         (k2Dragend)=\"removeDraggingState()\">\r\n        <div class=\"condition-icon icon icon-set-steps icon-size16 ic-draghandle_condition alt\"> </div>\r\n    </div>\r\n</div>\r\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnInit, Output } from '@angular/core';\r\nimport { rules } from 'src/app/shared/constants/rules';\r\nimport { IConfiguredSimpleExpression } from '../../../../../types/models/rules/i-configured-simple-expression';\r\nimport { IConfigPanelService } from '../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { ISelectionService } from '../../../../../types/services/selection/i-selection-service';\r\nimport { CommandServiceToken } from '../../../../services/command/command-service-factory';\r\nimport { ConfigPanelServiceToken } from '../../../../services/config-panel/config-panel-service-factory';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../../services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from '../../../../services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { DropDownMenuAlignment } from '../../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from '../../../../shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from '../../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { RuleControlStates } from '../../../../shared/enums/rules/rule-control-states';\r\nimport { ExpressionBaseComponent } from '../../base/expression-base/expression-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-simple-expression',\r\n    templateUrl: './simple-expression.component.html',\r\n    styleUrls: ['./simple-expression.component.less']\r\n})\r\nexport class SimpleExpressionComponent extends ExpressionBaseComponent implements OnInit {\r\n\r\n    @Input() public index: number;\r\n    @Input() public hideDragGrip = false;\r\n    @Input() public hideOperatorCommands = false;\r\n\r\n    @Output() public droppedGroupConditions: EventEmitter<number> = new EventEmitter<number>();\r\n\r\n    public simpleExpressionOperatorDropdownItems: IDropDownMenuItem[] = [];\r\n\r\n    public selectedOperatorItem: IDropDownMenuItem;\r\n    public selectedLeftItem: IDropDownMenuItem;\r\n\r\n    public selectedKey: string;\r\n    public getDragImageFn;\r\n    public operatorHover = false;\r\n\r\n    // Enum imports for use in templates\r\n    public dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    public dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    public dropdownMenuItemTemplate: typeof DropdownMenuItemTemplates = DropdownMenuItemTemplates;\r\n\r\n    constructor(@Inject(SelectionServiceToken) selectionService: ISelectionService,\r\n        rulePluginService: RulePluginService,\r\n        @Inject(CommandServiceToken) commandService: ICommandService,\r\n        @Inject(ConfigPanelServiceToken) configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) undoRedoService: IUndoRedoService,\r\n        eventService: EventNotifierService,\r\n        resourceService: ResourceService,\r\n        private _rootElement: ElementRef) {\r\n        super(selectionService, rulePluginService, commandService, configPanelService, undoRedoService, eventService, _rootElement, resourceService);\r\n    }\r\n\r\n    public get simpleExpression(): IConfiguredSimpleExpression {\r\n        return this.expressionModel as IConfiguredSimpleExpression;\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n\r\n        this.undoRedoService.forceDisable();\r\n\r\n        this.getDragImageFn = super.getDragImage.bind(this);\r\n\r\n        if (!this.simpleExpression.logicalOperator) {\r\n            this.simpleExpression.logicalOperator = rules.defaultOperator.operatorName;\r\n            this.simpleExpression.operatorIcon = rules.defaultOperator.operatorIcon;\r\n        }\r\n        else if (!this.simpleExpression.operatorIcon) {\r\n            this.simpleExpression.operatorIcon = rules.icons.operatorIconBase + this.simpleExpression.logicalOperator.toLowerCase();\r\n        }\r\n\r\n        this.setupOperators();\r\n\r\n        if (this.expressionModel.createdFromIfDrop !== true && this.expressionModel.isSelectable) {\r\n            this._rootElement.nativeElement.focus();\r\n        }\r\n\r\n        this.undoRedoService.resetForceDisable();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n        this.rulePluginService.removeRuleDesignerItem(this);\r\n    }\r\n\r\n    public onDrop(): void {\r\n        this.droppedGroupConditions.emit(this.index);\r\n    }\r\n\r\n    /**\r\n     * Populates the operators dropdown menu items collection\r\n     */\r\n    private setupOperators(): void {\r\n        const config = this.rulePluginService.getExpressionConfiguration(this.expressionModel) as\r\n            sourceCode.k2Designer.objectModel.rulePlugins.IExpressionConfiguration;\r\n\r\n        super.populateLogicalOperators(config.operators, this.simpleExpressionOperatorDropdownItems, this.simpleExpression.logicalOperator);\r\n\r\n        if (!this.hideOperatorCommands) {\r\n            super.populateOperatorCommands(config.commands, this.simpleExpressionOperatorDropdownItems);\r\n        }\r\n    }\r\n\r\n    public onItemSelected(item: IDropDownMenuItem) {\r\n        this.undoRedoService.addUndoMarker('-- group boolean operator selected --');\r\n\r\n        this.simpleExpression.logicalOperator = item.key;\r\n        this.simpleExpression.operatorIcon = item.icon;\r\n\r\n        this.selectedOperatorItem = item;\r\n\r\n        this.updateMenuState();\r\n\r\n        this._rootElement.nativeElement.getElementsByClassName('condition-operator')[0].focus();\r\n    }\r\n\r\n    //Operator dropdown items\r\n    public getSimpleExpressionOperatorDropdownItems(): IDropDownMenuItem[] {\r\n        return this.simpleExpressionOperatorDropdownItems;\r\n    }\r\n\r\n    public getOperatorIcon() {\r\n        let iconClass = this.simpleExpression.operatorIcon;\r\n\r\n        let iconSet = this.states.isExist(RuleControlStates.operatorHover) ? RuleControlStates.operatorHover : '';\r\n        iconSet = this.states.isExist(RuleControlStates.menuActive) ? RuleControlStates.menuActive : iconSet;\r\n\r\n        const operandSelected = this.states.isExist(RuleControlStates.selected) ? ' selected' : '';\r\n        const selected = this.states.isExist(RuleControlStates.selected) ? ' colour_dark' : '';\r\n\r\n        switch (iconSet) {\r\n            case RuleControlStates.operatorHover:\r\n            case RuleControlStates.menuActive:\r\n                iconClass = 'icon icon-set-dropdownset icon-size16 ic-dropdown' + selected;\r\n                break;\r\n            default:\r\n                iconClass += operandSelected;\r\n                break;\r\n        }\r\n\r\n        return iconClass;\r\n    }\r\n\r\n    public updateMenuState() {\r\n        if (this.states.isExist(RuleControlStates.menuActive)) {\r\n            this.states.remove(RuleControlStates.menuActive);\r\n        } else {\r\n            this.states.add(RuleControlStates.menuActive);\r\n        }\r\n    }\r\n\r\n    public addDraggingState = super.addDraggingState.bind(this);\r\n\r\n    public removeDraggingState = super.removeDraggingState.bind(this);\r\n\r\n    public operatorOnMouseEnter() {\r\n        this.operatorHover = true;\r\n        this.states.add(RuleControlStates.hover);\r\n        this.states.add(RuleControlStates.operatorHover);\r\n    }\r\n\r\n    public operatorOnMouseLeave() {\r\n        this.operatorHover = false;\r\n        this.states.remove(RuleControlStates.hover);\r\n        this.states.remove(RuleControlStates.operatorHover);\r\n    }\r\n\r\n    public operatorOnFocus() {\r\n        this.setSelected(true);\r\n        this.states.add(RuleControlStates.operatorSelected);\r\n    }\r\n\r\n    public operatorOnBlur() {\r\n        this.states.remove(RuleControlStates.operatorSelected);\r\n    }\r\n\r\n    public gripOnFocus() {\r\n        this.setSelected(true);\r\n    }\r\n\r\n    public addState(state: string) {\r\n        this.states.add(state);\r\n    }\r\n\r\n    public removeState(state: string) {\r\n        this.states.remove(state);\r\n    }\r\n\r\n}\r\n","<div class=\"main-container\">\r\n    <div tabindex=\"0\"\r\n         class=\"condition-block\"\r\n         [ngClass]=\"states.toString()\"\r\n         K2Droppable\r\n         (k2Dropped)=\"onDrop()\"\r\n         [k2Droptypes]=\"'ruleDesignerItem'\"\r\n         [k2WillBubbleToGrandparent]=\"true\"\r\n         (click)=\"setSelected(true);$event.stopPropagation();\">\r\n\r\n        <k2-end-point class=\"condition-input left-operand fixed-width\"\r\n                      [k2Validation]=\"[{Required:{validationFailedMessage: 'resource_service_empty_field_rule_in_list', validationResourceTokens: ['ruledesigner_general_condition']}}]\"\r\n                      [expressionModel]=\"simpleExpression.leftExpression\"\r\n                      (click)=\"setSelected(true); $event.stopPropagation();\"\r\n                      (addParentState)=\"addState($event)\"\r\n                      (removeParentState)=\"removeState($event)\">\r\n        </k2-end-point> \r\n\r\n        <k2-drop-down tabindex=\"0\"\r\n                      class=\"condition-operator\"\r\n                      [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                      [trianglePosition]=\"dropDownMenuTrianglePosition.left\"\r\n                      [menuItems]=\"simpleExpressionOperatorDropdownItems\"\r\n                      [isMultiSelect]=\"false\"\r\n                      [selectedItemKey]=\"selectedKey\"\r\n                      (onItemSelected)=\"onItemSelected($event)\"\r\n                      [customMenuClass]=\"'condition-block-menu'\"\r\n                      (mouseenter)=\"operatorOnMouseEnter()\"\r\n                      (mouseleave)=\"operatorOnMouseLeave()\"\r\n                      (focus)=\"operatorOnFocus()\"\r\n                      (blur)=\"operatorOnBlur()\"\r\n                      (click)=\"setSelected(true);updateMenuState();$event.stopPropagation();\"\r\n                      [menuAlignElement]=\"operatorIcon\">\r\n\r\n            <span class=\"{{ !operatorHover ? simpleExpression.operatorIcon : 'icon icon-set-conditionsdropdown icon-size16 ic-popoverarrow'}}\" #operatorIcon></span>\r\n        </k2-drop-down>\r\n\r\n        <k2-end-point class=\"condition-input right-operand\"\r\n                      [expressionModel]=\"simpleExpression.rightExpression\"\r\n                      (addParentState)=\"addState($event)\"\r\n                      (removeParentState)=\"removeState($event)\"\r\n                      (click)=\"setSelected(true); $event.stopPropagation();\">\r\n        </k2-end-point>\r\n\r\n        <div class=\"condition-grip\"            \r\n             *ngIf=\"!hideDragGrip\"\r\n             K2Draggable\r\n             [k2Dragtype]=\"'ruleDesignerItem'\"\r\n             [k2Dragitem]=\"getDragItem.bind(this)\"\r\n             [k2Dragcontext]=\"simpleExpression\"\r\n             [k2Dragghost]=\"getDragImageFn\"\r\n             (k2Dragstart)=\"addDraggingState()\"\r\n             (k2Dragend)=\"removeDraggingState()\">\r\n            <div class=\"icon icon-set-steps icon-size16 ic-draghandle condition-icon\"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnDestroy, OnInit, Output, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { IExpressionConfiguration } from '../../../../../types/models/rules/i-expression-configuration';\r\nimport { IConfigPanelService } from '../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { ISelectionService } from '../../../../../types/services/selection/i-selection-service';\r\nimport { IValidationService } from '../../../../../types/services/validation/ivalidation.service';\r\nimport { CommandServiceToken } from '../../../../services/command/command-service-factory';\r\nimport { ConfigPanelServiceToken } from '../../../../services/config-panel/config-panel-service-factory';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../../services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from '../../../../services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../../services/validation/validation-service-factory';\r\nimport { rules } from '../../../../shared/constants/rules';\r\nimport { DropDownMenuAlignment } from '../../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from '../../../../shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from '../../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { ExpressionBaseComponent } from '../../base/expression-base/expression-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-task-expression',\r\n    templateUrl: './task-expression.component.html',\r\n    styleUrls: ['./task-expression.component.less'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class TaskExpressionComponent extends ExpressionBaseComponent implements OnInit, OnDestroy {\r\n\r\n    @Input('isParent') public isParentInput = false;\r\n    @Input() public index: number;\r\n    @Output() public onDropped: EventEmitter<number> = new EventEmitter<number>();\r\n    @Output() public onOperatorItemSelected: EventEmitter<IDropDownMenuItem>\r\n        = new EventEmitter<IDropDownMenuItem>();\r\n    @Output() public onActivitySelected: EventEmitter<IDropDownMenuItem>\r\n        = new EventEmitter<IDropDownMenuItem>();\r\n    @Output() public onOutcomeSelected: EventEmitter<IDropDownMenuItem>\r\n        = new EventEmitter<IDropDownMenuItem>();\r\n\r\n    @ViewChild('taskConditionBlock', { static: false }) taskConditionBlock: ElementRef;\r\n\r\n    public operatorHover = false;\r\n    //Enums:\r\n    public dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    public dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    public dropdownMenuItemTemplate: typeof DropdownMenuItemTemplates = DropdownMenuItemTemplates;\r\n    public outcomeFooterArray: IDropDownMenuItem[] = [];\r\n    public selectedActivityKey = '';\r\n\r\n    //Operator dropdown items\r\n    public taskExpressionOperatorDropdownItems: IDropDownMenuItem[] = [];\r\n\r\n    //Javascript root element (the main taskConditionBlock element)\r\n    private _rootElement: HTMLElement;\r\n\r\n    private _outcomes: IDropDownMenuItem[] = [];\r\n    private _activityDropDownItems: IDropDownMenuItem[] = [];\r\n    private _selectedActivity: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivity;\r\n    private _outcomesArrayChangedRemover: sourceCode.k2Designer.objectModel.core.model.IEventRemover;\r\n    private _processRoot: sourceCode.k2Designer.objectModel.core.model.ModelBase;\r\n\r\n    constructor(@Inject(SelectionServiceToken) _selService: ISelectionService,\r\n        rulePluginSvc: RulePluginService,\r\n        @Inject(CommandServiceToken) commandService: ICommandService,\r\n        @Inject(ConfigPanelServiceToken) configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) undoRedoSvc: IUndoRedoService,\r\n        resourceService: ResourceService,\r\n        @Inject(ValidationServiceToken) private _validationService: IValidationService,\r\n        eventService: EventNotifierService,\r\n        private _el: ElementRef) {\r\n\r\n        super(_selService, rulePluginSvc, commandService, configPanelService,\r\n            undoRedoSvc, eventService, _el, resourceService);\r\n\r\n        this.isParent = this.isParentInput;\r\n        this._rootElement = this._el.nativeElement;\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.undoRedoService.forceDisable();\r\n\r\n        super.ngOnInit();\r\n\r\n        this._processRoot = this.rulePluginService.contextModel.getRoot<sourceCode.k2Designer.objectModel.core.model.ModelBase>();\r\n\r\n        //Find the current activity that rules are being configured against:\r\n        this._selectedActivity = this._processRoot.findItem<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivity>\r\n        (this.configuredTaskExpression?.activityReference);\r\n\r\n        if (this.expressionModel.createdFromIfDrop !== true && this.expressionModel.isSelectable) {\r\n            //Focus on drop\r\n            this._rootElement.focus();\r\n        }\r\n\r\n        //Set default icons and operator:\r\n        const operators = (this.rulePluginService.getExpressionConfiguration(this.expressionModel) as\r\n            IExpressionConfiguration)?.operators;\r\n\r\n        if (!this.configuredTaskExpression.logicalOperator) {\r\n            this.configuredTaskExpression.logicalOperator = operators.find(o => o.name === rules.defaultOperator.operatorName)?.name;\r\n            this.configuredTaskExpression.operatorIcon = operators.find(o => o.name === rules.defaultOperator.operatorName)?.icon;\r\n        }\r\n        else if (!this.configuredTaskExpression.operatorIcon) {\r\n            this.configuredTaskExpression.operatorIcon = rules.icons.operatorIconBase + this.configuredTaskExpression.logicalOperator.toLowerCase();\r\n        }\r\n\r\n        //Populate activities dropdown for all activity nodes on workflow (excluding parent task)\r\n        this.setupOutcomesAndActivities();\r\n\r\n        this.setupOperators();\r\n\r\n        if (this._selectedActivity) {\r\n            //Populate outcomes dropdown for activity\r\n            for (let i = 0; i < this._selectedActivity.configuration.outcomes.length; i++) {\r\n                const outcome = this._selectedActivity.configuration.outcomes[i] as sourceCode.k2Designer.objectModel.workflow.process.k2Process.IOutcomeExtended;\r\n                this._outcomes.push({\r\n                    title: outcome.inferredTitle,\r\n                    titleBinding: {\r\n                        objectReference: outcome,\r\n                        propertyName: 'inferredTitle'\r\n                    },\r\n                    key: this._selectedActivity.configuration.outcomes[i].getReference(),\r\n                    icon: rules.icons.outcomeVoting\r\n                });\r\n\r\n            }\r\n            //Ensure the activity reference is the selected activity's reference\r\n            if (!this.configuredTaskExpression.activityReference) {\r\n                this.configuredTaskExpression.activityReference = this._selectedActivity.getReference();\r\n            }\r\n\r\n            this.validateOutcomeReference();\r\n\r\n            //Set selected activity in activity dropdown\r\n            this.selectedActivityKey = this.configuredTaskExpression.activityReference;\r\n            const currentActivityItem = this._activityDropDownItems.find((f) => f.key === this.selectedActivityKey);\r\n            if (currentActivityItem) {\r\n                currentActivityItem.isSelected = true;\r\n            }\r\n\r\n            //Set selected outcome in outcome dropdown\r\n            const currentOutcomeItem = this._outcomes.find((f) => f.key === this.configuredTaskExpression.outcomeReference);\r\n            if (currentOutcomeItem) {\r\n                currentOutcomeItem.isSelected = true;\r\n            }\r\n        } else {\r\n            this.validateOutcomeReference();\r\n        }\r\n\r\n        this.outcomeFooterArray = this.getOutcomeFooterItems();\r\n\r\n        this.undoRedoService.resetForceDisable();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n\r\n        if (this._outcomesArrayChangedRemover) {\r\n            this._outcomesArrayChangedRemover();\r\n        }\r\n    }\r\n\r\n    public onDrop(): void {\r\n        //Emit drop event to parent (GroupExpression)\r\n        this.onDropped.emit(this.index);\r\n    }\r\n\r\n    /**\r\n     * Get expression model as type ConfiguredTaskExpression\r\n     *\r\n     * @param item\r\n     */\r\n    public get configuredTaskExpression(): sourceCode.k2Designer.objectModel.workflow.configuredRules.IConfiguredTaskExpression {\r\n        return this.expressionModel\r\n            || {} as sourceCode.k2Designer.objectModel.workflow.configuredRules.IConfiguredTaskExpression;\r\n    }\r\n\r\n    /**\r\n     * Get k2Model as type IConfiguredSimpleExpression\r\n     *\r\n     * @param item\r\n     */\r\n    public get configuredSimpleExpression(): sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredSimpleExpression {\r\n        return this.configuredTaskExpression as sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredSimpleExpression;\r\n    }\r\n\r\n    /**\r\n     * Actioned on the selection of an operator item from dropdown\r\n     *\r\n     * @param item\r\n     */\r\n    public operatorItemSelected = (item: IDropDownMenuItem): void => {\r\n        this.undoRedoService.addUndoMarker('-- group boolean operator selected --');\r\n\r\n        if (item.key === 'delete') {\r\n            this.delete();\r\n        } else {\r\n            this.configuredSimpleExpression.logicalOperator = item.key;\r\n            this.configuredSimpleExpression.operatorIcon = item.icon;\r\n        }\r\n\r\n        //Emit operator item selected event to parent\r\n        this.onOperatorItemSelected.emit(item);\r\n    };\r\n\r\n    /**\r\n     * Returns list of outcome items for outcomes dropdown list\r\n     */\r\n    public get outcomeItems(): IDropDownMenuItem[] {\r\n\r\n        return this._outcomes;\r\n    }\r\n\r\n    /**\r\n     * Returns list of command items to add to footer of outcome dropdown\r\n     * */\r\n    getOutcomeFooterItems = (): IDropDownMenuItem[] => {\r\n        //The command items in the outcomes dropdown (e.g. 'Delete')\r\n        const ret: IDropDownMenuItem[] = [];\r\n        const commands = (this.rulePluginService.getExpressionConfiguration(this.expressionModel) as\r\n            IExpressionConfiguration).commands;\r\n\r\n        commands.forEach(command => {\r\n            ret.push({\r\n                title: this.resourceService.getString(command.titleToken),\r\n                key: command.name,\r\n                icon: command.icon,\r\n                innerItemComponent: DropdownMenuItemTemplates.Command\r\n            });\r\n        });\r\n\r\n        return ret;\r\n    };\r\n\r\n    /**\r\n     * Populate activities dropdown for all activity nodes on workflow (excluding parent task step)\r\n     * */\r\n    private setupOutcomesAndActivities(): void {\r\n\r\n        this._outcomes.length = 0;\r\n\r\n        //Get current selected activity from context\r\n        const actCnf =\r\n            this.rulePluginService.contextModel\r\n                .getParentModel<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivityConfigurationExtension>();\r\n        const activity = actCnf.getParentActivity();\r\n\r\n        const activities: IDropDownMenuItem[] = [];\r\n\r\n        const allTaskActivities:\r\n            sourceCode.k2Designer.objectModel.core.model.IModelArray<sourceCode.k2Designer.objectModel.core.model.IModelArray<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivity>>\r\n            = [];\r\n        const clientEvtConfigImplementor = sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.client.ClientEventConfiguration.implementor;\r\n        const process = activity.getRoot() as sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2ProcessExtended;\r\n        //Find all activities with configuration type ClientEventConfiguration and output to allTaskActivities (array of array)\r\n        process.findAllStepsWithEventConfigurationOfType(activity, 5, allTaskActivities,\r\n            () => { }, clientEvtConfigImplementor, false);\r\n\r\n        if (allTaskActivities.length === 0) {\r\n            console.error('No task activities found when setting up outcomes and activities');\r\n            return;\r\n        }\r\n\r\n        const expressionParentTaskStep = actCnf.getParentActivity();\r\n        //Get all other task steps excluding current selected activity\r\n        let otherTaskSteps = allTaskActivities[0].filter((item) => item != expressionParentTaskStep) as\r\n            Array<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivity>;\r\n\r\n        if (activity.ui) { //If x coordinate present\r\n\r\n            //Re-sort per xy distance from current activity\r\n\r\n            otherTaskSteps = otherTaskSteps.sort((a: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivity,\r\n                b: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivity) => {\r\n                const dx1 = Math.pow(a.ui.x - activity.ui.x, 2);\r\n                const dx2 = Math.pow(b.ui.x - activity.ui.x, 2);\r\n                const dy1 = Math.pow(a.ui.y - activity.ui.y, 2);\r\n                const dy2 = Math.pow(b.ui.y - activity.ui.y, 2);\r\n\r\n                const da = Math.sqrt(dx1 + dy1);\r\n                const db = Math.sqrt(dx2 + dy2);\r\n\r\n                return da > db ? 1 : -1;\r\n            });\r\n\r\n        }\r\n\r\n        otherTaskSteps.forEach(taskStep => {\r\n            activities.push({\r\n                key: taskStep.getReference(),\r\n                title: taskStep.title,\r\n                titleBinding: {\r\n                    objectReference: {\r\n                        inferredTitle: taskStep.title\r\n                    },\r\n                    propertyName: 'inferredTitle'\r\n                },\r\n                icon: rules.icons.outcomeTask\r\n            });\r\n        });\r\n\r\n        this._activityDropDownItems = activities;\r\n    }\r\n\r\n    /**\r\n     * Returns collection of dropdown items containing activities on workflow\r\n     */\r\n    public get activityItems(): IDropDownMenuItem[] {\r\n        return this._activityDropDownItems;\r\n    }\r\n\r\n    /**\r\n     * Creates drag ghost image\r\n     */\r\n    public getDragImageFn = super.getDragImage.bind(this);\r\n\r\n    public addDraggingState = super.addDraggingState.bind(this);\r\n\r\n    public removeDraggingState = super.removeDraggingState.bind(this);\r\n\r\n    /**\r\n     * Acts on item selected from activity dropdown\r\n     *\r\n     * @param item dropdown item\r\n     */\r\n    public activitySelected = (item: IDropDownMenuItem): void => {\r\n\r\n        this._selectedActivity =\r\n            (this.rulePluginService.contextModel.getRoot() as sourceCode.k2Designer.objectModel.core.model.ModelObject).findItem(item.key);\r\n        this.configuredTaskExpression.outcomeReference = '';\r\n        this.configuredTaskExpression.activityReference = item.key;\r\n\r\n        this._outcomes.length = 0;\r\n        for (let i = 0; i < this._selectedActivity.configuration.outcomes.length; i++) {\r\n            const outcome = this._selectedActivity.configuration.outcomes[i] as sourceCode.k2Designer.objectModel.workflow.process.k2Process.IOutcomeExtended;\r\n            this._outcomes.push({\r\n                title: outcome.inferredTitle,\r\n                titleBinding: {  //dynamically update outcome titles in dropdown\r\n                    objectReference: outcome,\r\n                    propertyName: 'inferredTitle'\r\n                },\r\n                key: outcome.getReference(),\r\n                icon: rules.icons.outcomeVoting\r\n            });\r\n        }\r\n        this._outcomesArrayChangedRemover = this._selectedActivity.configuration.outcomes.listen(sourceCode.k2Designer.objectModel.core.model.EventTypes.anyArrayChanged,\r\n            this.onOutcomesArrayChanged.bind(this));\r\n\r\n        this.onActivitySelected.emit(item);\r\n\r\n        this.validateOutcomeReference();\r\n    };\r\n\r\n    /**\r\n     * Set up operator dropdown items\r\n     * */\r\n    private setupOperators(): void {\r\n\r\n        const operators = (this.rulePluginService.getExpressionConfiguration(this.expressionModel) as\r\n            IExpressionConfiguration)?.operators;\r\n\r\n        //Add the command items to the operator dropdown (e.g. 'Delete')\r\n        const commands = (this.rulePluginService.getExpressionConfiguration(this.expressionModel) as\r\n            IExpressionConfiguration).commands;\r\n\r\n        super.populateLogicalOperators(operators, this.taskExpressionOperatorDropdownItems, rules.operators.equals);\r\n        super.populateOperatorCommands(commands, this.taskExpressionOperatorDropdownItems);\r\n    }\r\n\r\n    private onOutcomesArrayChanged(arr: sourceCode.k2Designer.objectModel.core.model.IModelArray<any>, addedIndex: number,\r\n        added: any[], removedIndex: number, removed: any[]): boolean {\r\n\r\n        //rebuild outcome dropdown list\r\n        this._outcomes.length = 0;\r\n        for (let i = 0; i < this._selectedActivity.configuration.outcomes.length; i++) {\r\n            const outcome = this._selectedActivity.configuration.outcomes[i] as sourceCode.k2Designer.objectModel.workflow.process.k2Process.IOutcomeExtended;\r\n            const isPrevSelectedOutcome = this.configuredTaskExpression.outcomeReference == outcome.getReference();\r\n\r\n            this._outcomes.push({\r\n                title: outcome.inferredTitle,\r\n                titleBinding: {  //dynamically update outcome titles in dropdown\r\n                    objectReference: outcome,\r\n                    propertyName: 'inferredTitle'\r\n                },\r\n                key: outcome.getReference(),\r\n                isSelected: isPrevSelectedOutcome,\r\n                icon: rules.icons.outcomeVoting\r\n            });\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Acts on item selected from outcomes dropdown\r\n     *\r\n     * @param item dropdown item\r\n     */\r\n    public outcomeSelected = (item: IDropDownMenuItem): void => {\r\n        this.configuredTaskExpression.outcomeReference = item.key;\r\n        this.validateOutcomeReference();\r\n        //Emit outcome item selected event to parent\r\n        this.onOutcomeSelected.emit(item);\r\n    };\r\n\r\n    /*\r\n     * Returns the activity title\r\n     */\r\n    public getActivityTitle = (): string => {\r\n\r\n        let activityTitle = this.resourceService.getString('ruledesigner_task_condition_choose_task');\r\n\r\n        if (this._selectedActivity) {\r\n            const root = this._selectedActivity.getRoot<sourceCode.k2Designer.objectModel.core.model.IModelBase>();\r\n            if (root) {\r\n\r\n                let activityReference = this.configuredTaskExpression.activityReference;\r\n                if (!activityReference) {\r\n                    //Get activity reference from the selected activity if not exist in expression model input\r\n                    const selectedActivityRef = this._selectedActivity.getReference();\r\n                    if (selectedActivityRef) {\r\n                        activityReference = selectedActivityRef;\r\n                        this.configuredTaskExpression.activityReference = activityReference;\r\n                    }\r\n                }\r\n\r\n                if (activityReference && activityReference !== '') {\r\n                    const activityFromRoot = root.findItem<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivity>(activityReference);\r\n                    if (activityFromRoot) {\r\n                        activityTitle = activityFromRoot.title;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return activityTitle;\r\n    };\r\n\r\n    /**\r\n     * Returns the outcome title\r\n     * */\r\n    getOutcomeTitle = (): string => {\r\n        if (this._selectedActivity\r\n            && this.configuredTaskExpression.outcomeReference) {\r\n            const outcome = (this._selectedActivity.getRoot<sourceCode.k2Designer.objectModel.core.model.IModelObject>()\r\n                .findItem(this.configuredTaskExpression.outcomeReference));\r\n            //make sure default 'Choose...' selected when outcome is null\r\n            if (outcome === null) {\r\n                return this.resourceService.getString('ruledesigner_task_condition_choose_outcome');\r\n            }\r\n\r\n            return (outcome as sourceCode.k2Designer.objectModel.workflow.process.k2Process.IOutcomeExtended).inferredTitle;\r\n        }\r\n        else {\r\n            return this.resourceService.getString('ruledesigner_task_condition_choose_outcome');\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Template for outcomes dropdown with no outcomes\r\n     *\r\n     * @param templateOption\r\n     */\r\n    getEmptyDropDownTemplate = (templateOption: string): string => {\r\n        if (templateOption === 'right') {\r\n            return `<div class='empty-state-icon'>\r\n    <span class='icon icon-set-picker icon-size24 ic-outcomevoting alt'></span>\r\n</div>\r\n<div class='empty-state-message'>\r\n    <span>${this.resourceService.getString('ruledesigner_taskCondition_taskStep_status_noOutcomes')}</span>\r\n</div>`;\r\n        } else {\r\n            return `<div class='empty-state-icon'>\r\n    <span class='icon icon-set-picker icon-size24 ic-outcometask'></span>\r\n</div>\r\n<div class='empty-state-message'>\r\n    <span>${this.resourceService.getString('ruledesigner_taskCondition_taskStep_status_noTaskSteps')}</span>\r\n</div>`;\r\n        }\r\n    };\r\n\r\n    private validateOutcomeReference(): void {\r\n        this._validationService.evaluate([sourceCode.k2Designer.objectModel.core.model.ValidationTypes.Required],\r\n            {\r\n                modelObject: this.expressionModel,\r\n                propertyName: 'outcomeReference',\r\n                validationFailedMessage: 'resource_service_empty_field_rule_in_list',\r\n                validationResourceTokens: ['resource_service_field_name_result']\r\n            } as sourceCode.k2Designer.objectModel.validationService.plugins.IValidatorItem);\r\n    }\r\n}\r\n","<div class=\"task-condition-block-cm {{states.toString()}}\"\r\n     K2Droppable\r\n     (k2Dropped)=\"onDrop()\"\r\n     k2Droptypes=\"ruleDesignerItem\"\r\n     tabindex=\"0\"\r\n     [ngClass]=\"{'selected' : isSelected}\"\r\n     (click)=\"setSelected(true);$event.stopPropagation();\"\r\n     [k2WillBubbleToGrandparent]=\"true\"\r\n     #taskConditionBlock\r\n     [attr.state]=\"states.toString()\">\r\n\r\n    <div class=\"task-condition-input-cm fixed-width task-condition-dropdown-left-cm\" tabindex=\"0\" (click)=\"setSelected(true); $event.stopPropagation();\">\r\n        <k2-drop-down class=\"k2-dropdown-parent task-condition-dropdown-cm\"\r\n                      [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                      [menuItems]=\"activityItems\"\r\n                      [trianglePosition]=\"dropDownMenuTrianglePosition.center\"\r\n                      (onItemSelected)=\"activitySelected($event)\"\r\n                      [isMultiSelect]=\"false\"\r\n                      [innerItemComponent]=\"dropdownMenuItemTemplate.RulesOutcome\"\r\n                      [emptyStateTemplate]=\"getEmptyDropDownTemplate('left')\"\r\n                      customMenuClass=\"task-condition-dropdown-cm\"\r\n                      [menuAlignElement]=\"activityArrow\">\r\n            <div class=\"task-condition-dropdown-menu-container\">\r\n                <div class=\"task-condition-icon-container\" *ngIf=\"selectedActivityKey\">\r\n                    <span class=\"icon icon-set-picker icon-size24 ic-outcometask alt\"></span>\r\n                </div>\r\n                <div class=\"task-condition-text-container\" [ngClass]=\"{'activity-not-selected' : !selectedActivityKey}\">\r\n                    <span class=\"task-activity-title\">{{getActivityTitle()}}</span>\r\n                </div>\r\n                <div>\r\n                    <span class=\"icon icon-set-conditionsdropdown icon-size16 ic-popoverarrow\" #activityArrow></span>\r\n                </div>\r\n            </div>\r\n        </k2-drop-down>\r\n    </div>\r\n    <k2-drop-down class=\"task-condition-operator\"\r\n                  [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                  [trianglePosition]=\"dropDownMenuTrianglePosition.left\"\r\n                  [menuItems]=\"taskExpressionOperatorDropdownItems\"\r\n                  (onItemSelected)=\"operatorItemSelected($event)\"\r\n                  customMenuClass=\"condition-block-menu\"\r\n                  tabindex=\"0\"\r\n                  (mouseenter)=\"operatorHover = true\"\r\n                  (mouseleave)=\"operatorHover = false\"\r\n                  (click)=\"setSelected(true); $event.stopPropagation();\"\r\n                  [menuAlignElement]=\"operatorDropDown\">\r\n        <span class=\"selected {{ !operatorHover ? configuredTaskExpression?.operatorIcon : 'icon icon-set-conditionsdropdown icon-size16 ic-popoverarrow'}}\" #operatorDropDown></span>\r\n    </k2-drop-down>\r\n    <div class=\"task-condition-input-cm task-condition-dropdown-right-cm\" tabindex=\"0\"\r\n         (click)=\"setSelected(true); $event.stopPropagation();\">\r\n        <k2-drop-down class=\"k2-dropdown-parent task-condition-dropdown-cm\"\r\n                      k2-drop-down\r\n                      [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                      [menuItems]=\"outcomeItems\"\r\n                      [footerItems]=\"outcomeFooterArray\"\r\n                      [trianglePosition]=\"dropDownMenuTrianglePosition.center\"\r\n                      (onItemSelected)=\"outcomeSelected($event)\"\r\n                      [isMultiSelect]=\"false\"\r\n                      [innerItemComponent]=\"dropdownMenuItemTemplate.RulesOutcome\"\r\n                      [emptyStateTemplate]=\"getEmptyDropDownTemplate('right')\"\r\n                      customMenuClass=\"task-condition-dropdown-cm status-dropdown\"\r\n                      [menuAlignElement]=\"outcomeArrow\">\r\n            <div class=\"task-condition-dropdown-menu-container\">\r\n                <k2-badges [k2Model]=\"expressionModel\"></k2-badges>\r\n                <div class=\"task-condition-text-container\">\r\n                    <span class=\"outcome-activity-title\">\r\n                        {{getOutcomeTitle()}}\r\n                    </span>\r\n                </div>\r\n                <div>\r\n                    <span class=\"icon icon-set-conditionsdropdown icon-size16 ic-popoverarrow\" #outcomeArrow></span>\r\n                </div>\r\n            </div>\r\n        </k2-drop-down>\r\n    </div>\r\n    <div class=\"task-condition-grip\">\r\n        <div class=\"icon icon-set-steps icon-size16 ic-draghandle ic-draghandle_condition alt condition-icon\"\r\n             K2Draggable\r\n             k2Dragtype=\"ruleDesignerItem\"\r\n             [k2Dragitem]=\"getDragItem\"\r\n             [k2Dragcontext]=\"expressionModel\"\r\n             [k2Dragghost]=\"getDragImageFn\"\r\n             (k2Dragstart)=\"addDraggingState()\"\r\n             (k2Dragend)=\"removeDraggingState()\">\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, ElementRef, Inject, Input, OnInit, QueryList, Renderer2, ViewChildren } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { CommandServiceToken } from 'src/app/services/command/command-service-factory';\r\nimport { ConfigPanelServiceToken } from 'src/app/services/config-panel/config-panel-service-factory';\r\nimport { EventNotifierService } from 'src/app/services/event-notifier/event-notifier.service';\r\nimport { ResourceService } from 'src/app/services/resource/resource.service';\r\nimport { RulePluginService } from 'src/app/services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from 'src/app/services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from 'src/app/services/undo-redo/undo-redo-service-factory';\r\nimport { rules } from 'src/app/shared/constants/rules';\r\nimport { DropDownMenuAlignment } from 'src/app/shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from 'src/app/shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from 'src/app/shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from 'src/app/shared/enums/drop-down/drop-down-triangle-position';\r\nimport { RuleControlStates } from 'src/app/shared/enums/rules/rule-control-states';\r\nimport { VotingLeftOperandTypes } from 'src/app/shared/enums/rules/voting-left-operand-types';\r\nimport IVotingRuleExpressionConfiguration from 'src/types/models/rules/i-voting-rule-expression-configuration';\r\nimport { IConfigPanelService } from 'src/types/services/config-panel/i-config-panel-service';\r\nimport { ISelectionService } from 'src/types/services/selection/i-selection-service';\r\nimport { TextboxComponent } from '../../../common/text-box/text-box.component';\r\nimport { ExpressionBaseComponent } from '../../base/expression-base/expression-base.component';\r\nimport { IConfiguredThisResponseExpression } from '../../../../../types/models/rules/i-configured-this-response-expression';\r\nimport { DropDownComponent } from 'src/app/components/common/drop-down/drop-down.component';\r\n\r\n@Component({\r\n    selector: 'k2-this-response-expression',\r\n    templateUrl: './this-response-expression.component.html',\r\n    styleUrls: ['./this-response-expression.component.less']\r\n})\r\nexport class ThisResponseExpressionComponent extends ExpressionBaseComponent implements OnInit {\r\n\r\n    // Used to get the textbox\r\n    @ViewChildren('txtNumberOfResponses') textBoxes: QueryList<TextboxComponent>;\r\n    private txtNumberOfResponses: TextboxComponent;\r\n\r\n    @Input() expression: IConfiguredThisResponseExpression;\r\n\r\n    @Input() index: number;\r\n\r\n    selectedAction: sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.client.IClientEventConfigurationAction;\r\n    typePickerOperators: IDropDownMenuItem[] = [];\r\n    typePickerTypes: IDropDownMenuItem[] = [];\r\n    logicalOperators: IDropDownMenuItem[] = [];\r\n    actionItems: IDropDownMenuItem[] = [];\r\n    rulesIcons = rules.icons;\r\n\r\n    get isConditionSelected(): boolean {\r\n        return this.states.isExist(RuleControlStates.selected);\r\n    };\r\n\r\n    dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    dropdownMenuItemTemplate: typeof DropdownMenuItemTemplates = DropdownMenuItemTemplates;\r\n\r\n    votingOperandTypes: typeof VotingLeftOperandTypes = VotingLeftOperandTypes;\r\n\r\n    // We need a separate template and message, as the text is fetched asynchronously. We can't just reference the observable from the template, as it is consumed by the dropdown and it doesn't like it.\r\n    getEmptyDropdownTemplate(): string {\r\n        return `<span class=\"icon icon-set-picker icon-size24 ic-thisresponse\"></span><div class=\"empty-state-message\">${this._emptyDropdownMessage}</div>`;\r\n    };\r\n\r\n    private _outsideClickListenerRemover: any;\r\n    private _configuredActions: sourceCode.k2Designer.objectModel.core.model.IModelArray<sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.client.IClientEventConfigurationAction>;\r\n    private _emptyDropdownMessage = '';\r\n    private _getEmptyDDSubscription: Subscription;\r\n    private _expressionConfiguration: IVotingRuleExpressionConfiguration;\r\n\r\n    constructor(@Inject(SelectionServiceToken) selService: ISelectionService,\r\n        rulePluginService: RulePluginService,\r\n        eventService: EventNotifierService,\r\n        rootElement: ElementRef<HTMLElement>,\r\n        resourceService: ResourceService,\r\n        private _renderer: Renderer2,\r\n        @Inject(CommandServiceToken) commandService: ICommandService,\r\n        @Inject(ConfigPanelServiceToken) configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) undoRedoService: IUndoRedoService,\r\n    ) {\r\n        super(selService, rulePluginService, commandService, configPanelService, undoRedoService, eventService, rootElement, resourceService);\r\n\r\n        // TODO: Test that the empty dropdown thing still works for this response.\r\n    }\r\n\r\n    ngOnInit(): void {\r\n\r\n        super.ngOnInit();\r\n\r\n        this.undoRedoService.forceDisable();\r\n\r\n        this.expressionModel = this.expression as IConfiguredThisResponseExpression;\r\n        this._expressionConfiguration = this.rulePluginService.getExpressionConfiguration(this.expression) as IVotingRuleExpressionConfiguration;\r\n\r\n        this._configuredActions = this.rulePluginService\r\n            .contextModel\r\n            .getParentModel<sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.client.IClientEventConfiguration>()\r\n            .actions;\r\n\r\n        this.setInitialValues();\r\n\r\n        this.populateTypePickerOperationDropDown(this._expressionConfiguration);\r\n        this.populateTypePickerTypesDropDown(this._expressionConfiguration);\r\n        this.populateLogicalOperatorDropDown(this._expressionConfiguration);\r\n        this.populateActionsDropDown(this._expressionConfiguration);\r\n\r\n        this.undoRedoService.resetForceDisable();\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n\r\n        // The textbox won't render when this control loads, so we have to create a query, and subscribe to result changes\r\n        // Then we can get the first one to focus on when it is rendered.\r\n        this.textBoxes.changes.subscribe((components: QueryList<TextboxComponent>) => {\r\n            this.txtNumberOfResponses = components.first;\r\n        });\r\n\r\n        // Handle deselecting the condition\r\n        this._outsideClickListenerRemover = this._renderer.listen('document', 'mouseup', (evt) => {\r\n            if (this.rootElement.nativeElement !== evt?.target) {\r\n                this.setSelected(false);\r\n            }\r\n        });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        typeof this._outsideClickListenerRemover === 'function' && this._outsideClickListenerRemover();\r\n\r\n        this._getEmptyDDSubscription?.unsubscribe();\r\n\r\n        super.ngOnDestroy();\r\n    }\r\n\r\n    getDragImageFn = super.getDragImage.bind(this);\r\n\r\n    /**\r\n     * Generic click handler\r\n     *\r\n     * @param evt\r\n     */\r\n    onClick(evt) {\r\n        this.setSelected(true);\r\n        evt.stopPropagation();\r\n    }\r\n\r\n    addDraggingState = super.addDraggingState;\r\n\r\n    removeDraggingState = super.removeDraggingState;\r\n\r\n    /**\r\n     * Set default or existing values for the control\r\n     */\r\n    setInitialValues() {\r\n        if (!this.expression.leftOperandType) {\r\n            this.expression.leftOperandType = VotingLeftOperandTypes.everyResponse.toString();\r\n        }\r\n\r\n        if (!this.expression.specialOperator) {\r\n            this.expression.specialOperator = rules.operators.equals;\r\n        }\r\n\r\n        if (!this.expression.logicalOperator) {\r\n            this.expression.logicalOperator = rules.operators.equals;\r\n        }\r\n\r\n        this.expression.specialOperatorIcon = this._expressionConfiguration\r\n            .specialOperators\r\n            .find(s => s.name === this.expression.specialOperator)\r\n            ?.icon;\r\n\r\n        this.expression.logicalOperatorIcon = this._expressionConfiguration\r\n            .operators\r\n            .find(o => o.name === this.expression.logicalOperator)\r\n            ?.icon;\r\n\r\n        if (!!this.expression.taskActionTitle) {\r\n            this.selectedAction = this._configuredActions?.find(a => a.actionTitle === this.expression.taskActionTitle);\r\n        } else {\r\n            this.expression.taskActionTitle = this._configuredActions[0]?.actionTitle;\r\n            this.selectedAction = this._configuredActions[0]; // if nothing is configured, setting it to undefined is correct.\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles state for hovering\r\n     *\r\n     * @param controlName\r\n     * @returns\r\n     */\r\n    isHovering(controlName: string) {\r\n        return this.states.isExist(`${controlName}-hover`);\r\n    }\r\n\r\n    /**\r\n     * Handles state for hovering\r\n     *\r\n     * @param controlName\r\n     * @returns\r\n     */\r\n    hoverOn(controlName: string) {\r\n        this.states.add(`${controlName}-hover`);\r\n    }\r\n\r\n    /**\r\n     * Handles state for hovering\r\n     *\r\n     * @param controlName\r\n     * @returns\r\n     */\r\n    hoverOff(controlName: string) {\r\n        this.states.remove(`${controlName}-hover`);\r\n    }\r\n\r\n    /**\r\n     * Handler for when a type picker type is selected.\r\n     *\r\n     * @param item\r\n     */\r\n    onTypePickerTypeSelected = (item: sourceCode.k2Designer.objectModel.dropDownMenu.IDropDowntMenuItem) => {\r\n\r\n        this.expression.leftOperandType = item.key;\r\n        this.expression.leftOperandTypeIcon = item.icon;\r\n\r\n        if (item.key === 'numberOfResponses') {\r\n            setTimeout(() => {\r\n                this.txtNumberOfResponses?.doFocus();\r\n            }, 100);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handler for the Type Picker Operator\r\n     *\r\n     * @param item\r\n     */\r\n    onTypePickerOperatorSelected = (item: sourceCode.k2Designer.objectModel.dropDownMenu.IDropDowntMenuItem) => {\r\n        this.expression.specialOperator = item.key;\r\n        this.expression.specialOperatorIcon = item.key === 'equals' ? 'icon icon-set-conditionsdropdown icon-size16 ic-popoverarrow selected' : item.icon;\r\n    };\r\n\r\n    /**\r\n     * Handler for the Logical Operator\r\n     *\r\n     * @param item\r\n     */\r\n    onLogicalOperatorSelected = (item: sourceCode.k2Designer.objectModel.dropDownMenu.IDropDowntMenuItem) => {\r\n\r\n        this.expression.logicalOperator = item.key;\r\n        this.expression.logicalOperatorIcon = item.icon;\r\n    };\r\n\r\n    /**\r\n     * Handler for the Action\r\n     *\r\n     * @param item\r\n     */\r\n    onActionSelected = (item: sourceCode.k2Designer.objectModel.dropDownMenu.IDropDowntMenuItem) => {\r\n        this.expression.taskActionReference = item.key;\r\n        this.expression.taskActionTitle = item.title;\r\n    };\r\n\r\n    private populateTypePickerOperationDropDown(configuration: IVotingRuleExpressionConfiguration) {\r\n        this.populateLogicalOperators(configuration.specialOperators, this.typePickerOperators, this.expression.specialOperator);\r\n        this.populateOperatorCommands(configuration.commands, this.typePickerOperators);\r\n    }\r\n\r\n    private populateTypePickerTypesDropDown(configuration: IVotingRuleExpressionConfiguration) {\r\n        this.populateLogicalOperators(configuration.leftOperandType, this.typePickerTypes, this.expression.leftOperandType);\r\n    }\r\n\r\n    private populateLogicalOperatorDropDown(configuration: IVotingRuleExpressionConfiguration) {\r\n        this.populateLogicalOperators(configuration.operators, this.logicalOperators, this.expression.logicalOperator);\r\n        this.populateOperatorCommands(configuration.commands, this.logicalOperators);\r\n    }\r\n\r\n    private populateActionsDropDown(configuration: IVotingRuleExpressionConfiguration) {\r\n\r\n        if (!this.selectedAction && !!this.expression.taskActionTitle) {\r\n            this.actionItems.push({\r\n                title: this.expression.taskActionTitle,\r\n                key: '',\r\n                innerItemComponent: DropdownMenuItemTemplates.Disabled,\r\n                isSelected: true\r\n            });\r\n        }\r\n\r\n        this._configuredActions?.forEach(a => {\r\n            this.actionItems.length > 0 && this.actionItems.push(DropDownComponent.separator);\r\n\r\n            this.actionItems.push({\r\n                key: a.getReference(),\r\n                title: a.actionTitle,\r\n                innerItemComponent: DropdownMenuItemTemplates.SimpleExpressionOperator,\r\n                isSelected: a === this.selectedAction // It should always be the same instance.\r\n            });\r\n        });\r\n    }\r\n\r\n}\r\n","<div tabindex=\"0\" class=\"condition-block this-response-condition-block\" [class.selected]=\"isConditionSelected\" k2Droppable k2Dropped=\"onDrop()\" k2Droptypes=\"ruleDesignerItem\"\r\n    (click)=\"setSelected(true);$event.stopPropagation();\"\r\n    [class]=\"states.toString()\">\r\n    \r\n    <div class=\"condition-input left-operand\">\r\n        <div class=\"this-response-leftOperand\">\r\n            <div class=\"this-response-leftOperand-special\" *ngIf=\"expression.leftOperandType === votingOperandTypes.numberOfResponses\">\r\n                <k2-drop-down class=\"this-response-leftOperand-operator \"\r\n                              [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                              [trianglePosition]=\"dropDownMenuTrianglePosition.left\"\r\n                              [menuItems]=\"typePickerOperators\"\r\n                              [customMenuClass]=\"'this-response-type-picker-condition-menu condition-block-menu'\"\r\n                              (mouseenter)=\"hoverOn('special-menu')\"\r\n                              (mouseleave)=\"hoverOff('special-menu')\"\r\n                              (onItemSelected)=\"onTypePickerOperatorSelected($event)\">\r\n                    <span [class.inactive]=\"!isHovering('special-menu')\"\r\n                          [class]=\"expression.specialOperatorIcon\"\r\n                          class=\"icon icon-set-conditionsdropdown icon-size16 ic-popoverarrow inactive\" #LeftOperandArrow>\r\n                    </span>\r\n                </k2-drop-down>\r\n\r\n                <k2-text-box #txtNumberOfResponses\r\n                             tabindex=\"-1\"\r\n                             class=\"this-response-leftOperand-value\"\r\n                             (click)=\"onClick($event)\"\r\n                             [k2Expression]=\"expression.leftOperandExtended\"\r\n                             [k2Watermark]=\"getFromResx('Wizards', 'general_TypeDrop')|async\">\r\n                </k2-text-box>\r\n\r\n            </div>\r\n            <k2-drop-down class=\"this-response-leftOperand-type\"\r\n                [ngClass]=\"{'show-textbox' : (expression.leftOperandType === votingOperandTypes.numberOfResponses)}\"\r\n                [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                [menuItems]=\"typePickerTypes\"\r\n                customMenuClass=\"this-response-type-picker-menu condition-block-menu\"\r\n                (onItemSelected)=\"onTypePickerTypeSelected($event)\">\r\n\r\n                <span class=\"this-response-type-picker-item\">\r\n                    <span class=\"this-response-type-picker-item-selected text-ellipsis\" *ngIf=\"expression.leftOperandType !== votingOperandTypes.numberOfResponses\">\r\n                        {{expression.leftOperandValueText}}\r\n                    </span>\r\n                    <span class=\"this-response-type-picker-item-list\" #LeftOperandTypeArrow>\r\n                        <i class=\"icon icon-set-conditionsdropdown icon-size16 ic-popoverarrow\"></i>\r\n                    </span>\r\n                </span>\r\n            </k2-drop-down>\r\n        </div>\r\n    </div>\r\n    <k2-drop-down\r\n        class=\"condition-operator\"\r\n        [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n        [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n        [menuItems]=\"logicalOperators\"\r\n        [customMenuClass]=\"'this-response-condition-menu condition-block-menu'\"\r\n        (mouseenter)=\"hoverOn('logical-menu')\"\r\n        (mouseleave)=\"hoverOff('logical-menu')\"\r\n        (onItemSelected)=\"onLogicalOperatorSelected($event)\">\r\n\r\n        <span [class.selected]=\"!isHovering('logical-menu')\" \r\n            [ngClass]=\"isHovering('logical-menu') ? rulesIcons.popoverArrow : expression.logicalOperatorIcon\">\r\n        </span>\r\n    </k2-drop-down>\r\n    <div class=\"condition-input right-operand\">\r\n        <div class=\"this-response-action\">\r\n            <k2-drop-down\r\n                class=\"this-response-action-item-wrap\"\r\n                [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                [menuItems]=\"actionItems\"\r\n                [customMenuClass]=\"'this-response-action-menu condition-block-menu'\"\r\n                (onItemSelected)=\"onActionSelected($event)\"\r\n                [emptyStateTemplate]=\"getEmptyDropdownTemplate()\">\r\n                <span class=\"this-response-action-item\">\r\n                    <span class=\"this-response-action-selected\">\r\n                        <span class=\"text-ellipsis\" *ngIf=\"!!expression.taskActionTitle\" [class.item-disabled]=\"!selectedAction && actionItems[0]?.innerItemComponent === dropdownMenuItemTemplate.Disabled\">{{expression.taskActionTitle}}</span>\r\n                        <span *ngIf=\"!expression.taskActionTitle\">\r\n                            {{getFromResx(\"RulesDesigner\", \"ruleDesigner_ThisResponse_ChooseAction\")|async}}\r\n                        </span>\r\n                    </span>\r\n                    <span class=\"this-response-action-list\">\r\n                        <i class=\"icon icon-set-conditionsdropdown icon-size16 ic-popoverarrow\" #RightOperandArrow></i>\r\n                    </span>\r\n                </span>\r\n            </k2-drop-down>\r\n        </div>\r\n    </div>\r\n    <div class=\"condition-grip\"\r\n        K2Draggable\r\n        k2Dragtype=\"ruleDesignerItem\"\r\n        [k2Dragitem]=\"getDragItem\"\r\n        [k2Dragcontext]=\"expression\"\r\n        [k2Dragghost]=\"getDragImageFn\"\r\n        (k2Dragstart)=\"addDraggingState()\"\r\n        (k2Dragend)=\"removeDraggingState()\">\r\n        <div class=\"condition-icon icon icon-set-steps icon-size16 ic-draghandle_condition alt\">\r\n        </div>\r\n    </div>\r\n   \r\n</div>\r\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnInit, Output } from '@angular/core';\r\nimport { IConfigPanelService } from '../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { ISelectionService } from '../../../../../types/services/selection/i-selection-service';\r\nimport { CommandServiceToken } from '../../../../services/command/command-service-factory';\r\nimport { ConfigPanelServiceToken } from '../../../../services/config-panel/config-panel-service-factory';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { SelectionServiceToken } from '../../../../services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { DropDownMenuAlignment } from '../../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport { DropdownMenuItemTemplates } from '../../../../shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from '../../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { ExpressionBaseComponent } from '../../base/expression-base/expression-base.component';\r\nimport IDropDownMenuItem from '../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../../services/ruleplugin/rule-plugin-service';\r\nimport IVotingRuleExpressionConfiguration from 'src/types/models/rules/i-voting-rule-expression-configuration';\r\nimport { rules } from 'src/app/shared/constants/rules';\r\nimport { DropDownComponent } from 'src/app/components/common/drop-down/drop-down.component';\r\n\r\n@Component({\r\n    selector: 'k2-voting-response-expression',\r\n    templateUrl: './voting-response-expression.component.html',\r\n    styleUrls: ['./voting-response-expression.component.less']\r\n})\r\nexport class VotingResponseExpressionComponent extends ExpressionBaseComponent implements OnInit {\r\n    @Input() index: number;\r\n\r\n    @Output() onDropped: EventEmitter<number> = new EventEmitter<number>();\r\n    @Output() onLogicalOperatorItemSelected: EventEmitter<IDropDownMenuItem>\r\n        = new EventEmitter<IDropDownMenuItem>();\r\n    @Output() onLeftOperandItemSelected: EventEmitter<IDropDownMenuItem>\r\n        = new EventEmitter<IDropDownMenuItem>();\r\n    @Output() onSpecialOperatorItemSelected: EventEmitter<IDropDownMenuItem>\r\n        = new EventEmitter<IDropDownMenuItem>();\r\n\r\n    // Dropdown Menu Items\r\n    public logicalOperatorDropdownItems: IDropDownMenuItem[] = [];\r\n    public leftOperandDropDownItems: IDropDownMenuItem[] = [];\r\n    public specialOperatorDropDownItems: IDropDownMenuItem[] = [];\r\n\r\n    // Enum imports for use in templates\r\n    public dropdownMenuAlignment = DropDownMenuAlignment;\r\n    public dropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    public dropdownMenuItemTemplate = DropdownMenuItemTemplates;\r\n\r\n    constructor(@Inject(SelectionServiceToken) selectionService: ISelectionService,\r\n        protected rulePluginService: RulePluginService,\r\n        @Inject(CommandServiceToken) commandService: ICommandService,\r\n        @Inject(ConfigPanelServiceToken) configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) undoRedoService: IUndoRedoService,\r\n        resourceService: ResourceService,\r\n        protected element: ElementRef<HTMLElement>,\r\n        eventService: EventNotifierService) {\r\n        super(selectionService, rulePluginService, commandService, configPanelService, undoRedoService, eventService, element, resourceService);\r\n    }\r\n\r\n    public get votingResponseExpression(): sourceCode.k2Designer.objectModel.workflow.configuredRules.IConfiguredVotingResponseExpression {\r\n        return this.expressionModel as sourceCode.k2Designer.objectModel.workflow.configuredRules.IConfiguredVotingResponseExpression;\r\n    }\r\n\r\n    public get votingResponseExpressionExtended(): sourceCode.k2Designer.objectModel.workflow.configuredRules.IConfiguredVotingResponseExpressionExtension {\r\n        return this.votingResponseExpression as sourceCode.k2Designer.objectModel.workflow.configuredRules.IConfiguredVotingResponseExpressionExtension;\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n\r\n        // Initialize if not set\r\n        if (!this.votingResponseExpression.logicalOperator) {\r\n            this.votingResponseExpression.logicalOperator = 'of';\r\n        }\r\n        if (!this.votingResponseExpression.leftOperandType) {\r\n            this.votingResponseExpression.leftOperandType = 'all';\r\n        }\r\n        if (!this.votingResponseExpression.spetialOperator) {\r\n            this.votingResponseExpression.spetialOperator = 'equals';\r\n        }\r\n\r\n        const config = this.rulePluginService.getExpressionConfiguration(this.expressionModel) as IVotingRuleExpressionConfiguration;\r\n\r\n        // Populate the logical operator dropdown\r\n        config.operators.forEach((operator: sourceCode.k2Designer.objectModel.rulePlugins.operator, index: number) => {\r\n            if (index !== 0) {\r\n                this.logicalOperatorDropdownItems.push(DropDownComponent.separator);\r\n            }\r\n\r\n            this.logicalOperatorDropdownItems.push({\r\n                key: operator.name,\r\n                icon: operator.icon === 'useresources' ? this.resourceService.getString('ruledesigner_response_expression_icon_' + operator.name) : operator.icon,\r\n                title: this.resourceService.getString(operator.titleToken),\r\n                innerItemComponent: DropdownMenuItemTemplates.SimpleExpressionOperator,\r\n                isSelected: this.votingResponseExpression.logicalOperator === operator.name\r\n            });\r\n\r\n            if (operator.name === this.votingResponseExpression.logicalOperator) {\r\n                this.votingResponseExpressionExtended.logicalOperatorIcon = this.logicalOperatorDropdownItems[this.logicalOperatorDropdownItems.length - 1].icon;\r\n            }\r\n        });\r\n\r\n        super.populateOperatorCommands(config.commands, this.logicalOperatorDropdownItems);\r\n\r\n        super.populateLogicalOperators(config.leftOperandType, this.leftOperandDropDownItems, this.votingResponseExpression.leftOperandType);\r\n\r\n        super.populateLogicalOperators(config.specialOperators, this.specialOperatorDropDownItems, this.votingResponseExpression.spetialOperator);\r\n        super.populateOperatorCommands(config.commands, this.specialOperatorDropDownItems);\r\n\r\n        this.votingResponseExpressionExtended.leftOperandTypeIcon = config\r\n            .leftOperandType\r\n            .find(x => x.name === this.votingResponseExpression.leftOperandType)\r\n            ?.icon;\r\n\r\n        this.votingResponseExpressionExtended.spetialOperatorIcon = config\r\n            .specialOperators\r\n            .find(x => x.name === this.votingResponseExpression.spetialOperator)\r\n            ?.icon;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        super.ngOnDestroy();\r\n    }\r\n\r\n    getFromResx = (resourceName: string, key: string) => this.resourceService.getFromResx(resourceName, key);\r\n\r\n    getOperatorIcon(menuPrefix: string, originalIconClass: string): string {\r\n        let iconClass = originalIconClass + ' selected';\r\n\r\n        const isOnHover = this.states.isExist(menuPrefix + '-operator-hover');\r\n        const isMenuActive = this.states.isExist(menuPrefix + '-menu-active');\r\n        const isSpecialOperatorIgnoreCase = (menuPrefix === 'special' && this.votingResponseExpression.spetialOperator === 'equals');\r\n\r\n        if (isOnHover || isMenuActive) {\r\n            iconClass = rules.icons.popoverArrow;\r\n        }\r\n        else if (isSpecialOperatorIgnoreCase) {\r\n            iconClass = rules.icons.popoverArrow + ' inactive';\r\n        }\r\n\r\n        return iconClass;\r\n    }\r\n\r\n    public addDraggingState = super.addDraggingState.bind(this);\r\n\r\n    public removeDraggingState = super.removeDraggingState.bind(this);\r\n\r\n    getExpressionBlock(item: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredSimpleExpression): HTMLElement {\r\n        const result: HTMLElement = super.getDragImage();\r\n        result.classList.add('condition-block-dragging');\r\n        return result;\r\n    }\r\n\r\n    onDrop(): void {\r\n        //Emit drop event to parent (GroupExpression)\r\n        this.onDropped.emit(this.index);\r\n    }\r\n\r\n    /**\r\n     * Handles the selection of the logical operator dropdown\r\n     *\r\n     * @param item selected dropdown menu item\r\n     */\r\n    onLogicalOperatorDropDownSelected(item: IDropDownMenuItem): void {\r\n        this.undoRedoService.addUndoMarker('--k2VotingResponse Expression: item selected--');\r\n\r\n        this.votingResponseExpression.logicalOperator = item.key;\r\n        this.votingResponseExpressionExtended.logicalOperatorIcon = item.icon;\r\n\r\n        this.onLogicalOperatorItemSelected.emit(item);\r\n    }\r\n\r\n    /**\r\n     * Handles the selection of the left operand dropdown\r\n     *\r\n     * @param item selected dropdown menu item\r\n     */\r\n    onLeftOperandDropDownSelected(item: IDropDownMenuItem): void {\r\n        this.undoRedoService.addUndoMarker('--k2VotingResponse Expression: item selected--');\r\n\r\n        this.votingResponseExpression.leftOperandType = item.key;\r\n        this.votingResponseExpressionExtended.leftOperandTypeIcon = item.icon;\r\n\r\n        this.onLeftOperandItemSelected.emit(item);\r\n    }\r\n\r\n    /**\r\n     * Handles the selection of the left operand dropdown\r\n     *\r\n     * @param item selected dropdown menu item\r\n     */\r\n    onSpecialOperatorDropDownSelected(item: IDropDownMenuItem): void {\r\n        this.undoRedoService.addUndoMarker('--k2VotingResponse Expression: item selected--');\r\n\r\n        this.votingResponseExpression.spetialOperator = item.key;\r\n        this.votingResponseExpressionExtended.spetialOperatorIcon = item.icon;\r\n\r\n        this.onSpecialOperatorItemSelected.emit(item);\r\n    }\r\n}\r\n","<div tabindex=\"0\"\r\n     class=\"condition-block voting-response-condition-block {{states.toString()}}\"\r\n     K2Droppable\r\n     (k2Dropped)=\"onDrop()\"\r\n     k2Droptypes=\"ruleDesignerItem\"\r\n     (click)=\"setSelected(true); $event.stopPropagation();\">\r\n    <div class=\"condition-input left-operand\">\r\n        <div class=\"this-response-leftOperand\">\r\n            <div class=\"this-response-leftOperand-special\" *ngIf=\"votingResponseExpression.leftOperandType === 'numberOfRecipients'\">\r\n                <k2-drop-down #specialOperatorDropDown\r\n                              class=\"this-response-leftOperand-operator focusable\"\r\n                              [trianglePosition]=\"dropDownMenuTrianglePosition.left\"\r\n                              [menuItems]=\"specialOperatorDropDownItems\"\r\n                              (onItemSelected)=\"onSpecialOperatorDropDownSelected($event)\"\r\n                              [customMenuClass]=\"'this-response-type-picker-condition-menu condition-block-menu'\"\r\n                              (click)=\"setSelected(true); $event.stopPropagation();\"\r\n                              [menuAlignElement]=\"leftOperandOperatorIcon\">\r\n                    <span [ngClass]=\"getOperatorIcon('special', votingResponseExpression.spetialOperatorIcon)\" #leftOperandOperatorIcon></span>\r\n                </k2-drop-down>\r\n                <k2-text-box #numberOfResponsesTextbox\r\n                             tabindex=\"-1\"\r\n                             class=\"this-response-leftOperand-value {{states.toString()}}\"\r\n                             [k2Expression]=\"votingResponseExpression.leftOperandExtended\"\r\n                             [k2Watermark]=\"getFromResx('Wizards', 'general_TypeDrop')|async\"\r\n                             (k2TextboxOnDragEnter)=\"onDragEnter\"\r\n                             (k2TextboxOnDragLeave)=\"onDragLeave\"\r\n                             (click)=\"setSelected(true); $event.stopPropagation();\">\r\n                </k2-text-box>\r\n            </div>\r\n            <k2-drop-down #leftOperandDropDown\r\n                          class=\"this-response-leftOperand-type focusable\"\r\n                          [ngClass]=\"{'show-textbox' : (votingResponseExpression.leftOperandType === 'numberOfRecipients')}\"\r\n                          [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                          [menuItems]=\"leftOperandDropDownItems\"\r\n                          (onItemSelected)=\"onLeftOperandDropDownSelected($event)\"\r\n                          [customMenuClass]=\"'this-response-type-picker-menu condition-block-menu'\"\r\n                          (click)=\"setSelected(true); $event.stopPropagation();\">\r\n\r\n                <span class=\"this-response-type-picker-item\">\r\n                    <span class=\"this-response-type-picker-item-selected\" *ngIf=\"votingResponseExpression.leftOperandType !== 'numberOfRecipients'\">\r\n                        {{votingResponseExpressionExtended.leftOperandValueText}}\r\n                    </span>\r\n                    <span class=\"this-response-type-picker-item-list\">\r\n                        <i class=\"icon icon-set-conditionsdropdown icon-size16 ic-popoverarrow\"></i>\r\n                    </span>\r\n                </span>\r\n            </k2-drop-down>\r\n        </div>\r\n    </div>\r\n    <k2-drop-down #logicalOperatorDropdown\r\n                  class=\"condition-operator focusable\"\r\n                  [trianglePosition]=\"dropDownMenuTrianglePosition.left\"\r\n                  [menuItems]=\"logicalOperatorDropdownItems\"\r\n                  (onItemSelected)=\"onLogicalOperatorDropDownSelected($event)\"\r\n                  customMenuClass=\"this-response-type-picker-menu condition-block-menu\"\r\n                  (click)=\"setSelected(true); $event.stopPropagation();\"\r\n                  [menuAlignElement]=\"OperatorIcon\">\r\n\r\n        <span [ngClass]=\"getOperatorIcon('logical', votingResponseExpressionExtended.logicalOperatorIcon)\"\r\n              (click)=\"setSelected(true);\" #OperatorIcon></span>\r\n    </k2-drop-down>\r\n    <div class=\"condition-input right-operand\" (click)=\"setSelected(true); $event.stopPropagation();\">\r\n        <div class=\"this-response-action\">\r\n            <a href=\"javascript:void(0)\"\r\n               class=\"this-response-action-item-wrap focusable\">\r\n                <span class=\"this-response-action-item\">\r\n                    <span class=\"this-response-action-selected\">\r\n                        {{votingResponseExpressionExtended.rightOperandTitle}}\r\n                    </span>\r\n                </span>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <div class=\"condition-grip focusable\"\r\n         K2Draggable\r\n         k2Dragtype=\"ruleDesignerItem\"\r\n         [k2Dragitem]=\"getDragItem.bind(this)\"\r\n         [k2Dragcontext]=\"votingResponseExpression\"\r\n         [k2Dragghost]=\"getExpressionBlock.bind(this)\"\r\n         (k2Dragstart)=\"addDraggingState\"\r\n         (k2Dragend)=\"removeDraggingState\">\r\n        <div class=\"condition-icon icon icon-set-steps icon-size16 ic-draghandle_condition alt\"></div>\r\n    </div>\r\n</div>\r\n","import { Component, ElementRef, Inject, OnInit } from '@angular/core';\r\nimport { DragDropService } from '../../../services/drag-drop/drag-drop.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../services/ruleplugin/rule-plugin-service';\r\n\r\n@Component({\r\n    selector: 'k2-rule-toolbox',\r\n    templateUrl: './rule-toolbox.component.html',\r\n    styleUrls: ['./rule-toolbox.component.less']\r\n})\r\nexport class RuleToolboxComponent implements OnInit {\r\n    public up: boolean;\r\n    public rulesItemDragged: boolean;\r\n\r\n    private _eventRemovers: sourceCode.k2Designer.objectModel.core.model.IEventRemover[];\r\n\r\n    constructor(private _rulesPluginService: RulePluginService,\r\n        private _resourceService: ResourceService,\r\n        private _dragDropService: DragDropService) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.up = false;\r\n        this.rulesItemDragged = false;\r\n\r\n        this._eventRemovers = [];\r\n        this._eventRemovers.push(this._dragDropService.listenDragStarted(this.onStartedDragging.bind(this)));\r\n        this._eventRemovers.push(this._dragDropService.listenDragStopped(this.onStoppedDragging.bind(this)));\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        for (let i = 0; i < this._eventRemovers.length; i++) {\r\n            this._eventRemovers[i]();\r\n        }\r\n    }\r\n\r\n    getString = (token: string) => this._resourceService.getString(token);\r\n\r\n    public changeUpValue(): void {\r\n        this.up = !this.up;\r\n    }\r\n\r\n    private onStartedDragging(type: string, data: sourceCode.k2Designer.objectModel.dragDropService.IDragDropData): void {\r\n        if (type === 'ruleDesignerItem' && typeof (data.getSource<any>().componentId) !== 'undefined') {\r\n            this.rulesItemDragged = true;\r\n        }\r\n    }\r\n\r\n    private onStoppedDragging(): void {\r\n        this.rulesItemDragged = false;\r\n    }\r\n\r\n    public getToolboxItems(): sourceCode.k2Designer.objectModel.rulePlugins.IItemConfiguration[] {\r\n        return this._rulesPluginService.getToolboxItems();\r\n    }\r\n\r\n    public getDraggedItem(item: sourceCode.k2Designer.objectModel.rulePlugins.IItemConfiguration, context: any): sourceCode.k2Designer.objectModel.dragDropService.IDragDropData {\r\n        return new sourceCode.k2Designer.objectModel.dragDropService.DragDropData<any, any, any>(item, context, null, null);\r\n    }\r\n\r\n    public getDragImage(item: sourceCode.k2Designer.objectModel.rulePlugins.IItemConfiguration): HTMLElement {\r\n        const result: HTMLElement = document.createElement('div');\r\n\r\n        result.innerHTML = '<div class=\\'icon icon-set-blocks icon-size32 ' + item.icon + '\\'> </div>';\r\n\r\n        return result;\r\n    }\r\n\r\n}\r\n","<div class=\"rules-designer-toolbox\">\r\n    <div class=\"panel panel-default\">\r\n        <div class=\"toggle-div icon-container\"\r\n             (click)=\"changeUpValue()\"\r\n             data-toggle=\"collapse\"\r\n             data-target=\".collapseOne\">\r\n            <span class=\"center-block icon icon-set-dropdownset icon-size16 ic-dropdown\"\r\n                  [ngClass]=\"{'collapsed' : !up}\"></span>\r\n        </div>\r\n        <div class=\"collapseOne panel-collapse collapse in\">\r\n            <div class=\"panel-body\">\r\n                <div class=\"row toolboxcontainer\"\r\n                     [ngClass]=\"rulesItemDragged ? 'st-dragging' : 'st-notDragging'\">\r\n\r\n                    <div class=\"toolbox-item-wrapper\"\r\n                         k2-scrollbar\r\n                         [horizontal]=\"true\">\r\n                        <div class=\"toolbox-item-inner\">\r\n                            <div *ngFor=\"let item of getToolboxItems()\">\r\n                                <div class=\"rule-tlbx-item\"\r\n                                     K2Draggable\r\n                                     [k2Dragcontext]=\"item\"\r\n                                     [k2Dragitem]=\"getDraggedItem\"\r\n                                     [k2Dragtype]=\"'ruleDesignerItem'\"\r\n                                     [k2Dragghost]=\"getDragImage\">\r\n                                    <i class=\"icon icon-set-blocks icon-size32 center-block {{item.icon}}\"></i>\r\n                                    {{getString(item.titleToken)}}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"rule-tlbx-item delete-rule-tlbx-item vertical-divider pull-right\">\r\n                        <k2-toolbox-trash></k2-toolbox-trash>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row toolboxtrashcontainer\"\r\n                     [ngClass]=\"rulesItemDragged ? 'st-dragging' : 'st-notDragging'\">\r\n                    <div class=\"rule-tlbx-item delete-rule-tlbx-item vertical-divider pull-right\">\r\n                        <k2-toolbox-trash></k2-toolbox-trash>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, OnInit, Input, Output, EventEmitter, ElementRef } from '@angular/core';\r\nimport { IEnvironmentService } from '../../../types/services/environment/i-environment-service';\r\nimport { IPluginService } from '../../../types/services/plugin/i-plugin-service';\r\nimport { ISelectionService } from '../../../types/services/selection/i-selection-service';\r\nimport { EnvironmentServiceToken } from '../../services/environment/environment-service-factory';\r\nimport { EventNotifierService } from '../../services/event-notifier/event-notifier.service';\r\nimport { PluginServiceToken } from '../../services/plugin/plugin-service-factory';\r\nimport { ResourceService } from '../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from '../../services/selection/selection-service-factory';\r\nimport { plugins } from '../../shared/constants/plugins';\r\nimport { RuleDesignerSelectionBaseComponent } from './base/rule-designer-selection-base/rule-designer-selection-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-rules-designer',\r\n    templateUrl: './rules-designer.component.html',\r\n    styleUrls: ['./rules-designer.component.less']\r\n})\r\nexport class RulesDesignerComponent extends RuleDesignerSelectionBaseComponent implements OnInit {\r\n    @Input() uiComp: sourceCode.k2Designer.objectModel.plugin.IDefinition;\r\n    @Output() closePanel = new EventEmitter<void>();\r\n    @Output() checkPanelActive = new EventEmitter<string>();\r\n\r\n    rulesHandler: string;\r\n    emptyRuleString: string;\r\n\r\n    constructor(@Inject(EnvironmentServiceToken) private env: IEnvironmentService,\r\n        @Inject(SelectionServiceToken) private selectionService: ISelectionService,\r\n        protected rulePluginService: RulePluginService,\r\n        @Inject(PluginServiceToken) private pluginService: IPluginService,\r\n        protected resourceService: ResourceService,\r\n        protected eventService: EventNotifierService,\r\n        protected element: ElementRef<HTMLElement>) {\r\n        super(selectionService, eventService, element);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n    }\r\n\r\n    getFromResx = (resourceName: string, key: string) => this.resourceService.getFromResx(resourceName, key);\r\n\r\n    private get pluginStates() {\r\n        return this.env.activeStudioItem.pluginStates;\r\n    }\r\n\r\n    isEmpty(): boolean {\r\n        return !this.rulePluginService.contextModel;\r\n    }\r\n\r\n    isRightMostPanel(): boolean {\r\n        return this.pluginService.isRightMostPanel(plugins.panels.rulesDesigner);\r\n    }\r\n\r\n    isRulesActive(): boolean {\r\n        if (this.pluginStates[plugins.panels.rulesDesigner] === 'expanded') {\r\n            this.rulesHandler = this.resourceService.getString('rulesDesigner_rulesContext_' + this.getRulesHandler().toLocaleLowerCase());\r\n\r\n            const emptyRuleToken: string = 'rulesDesigner_rulesEmptyContext_' + this.getRulesHandler().toLocaleLowerCase();\r\n            const emptyRuleString: string = this.resourceService.getString(emptyRuleToken);\r\n            this.emptyRuleString = emptyRuleToken !== emptyRuleString ? emptyRuleString : this.resourceService.getString('rulesDesigner_rulesEmptyContext_default');\r\n        }\r\n\r\n        return this.pluginStates[plugins.panels.rulesDesigner] === 'expanded';\r\n    }\r\n\r\n    isNotValid(): boolean {\r\n        return this.rulePluginService.isNewTab;\r\n    }\r\n\r\n    isCtxActive(): boolean {\r\n        return this.pluginStates[plugins.panels.contextBrowser] === 'expanded';\r\n    }\r\n\r\n    toggleContextBrowser(): void {\r\n        this.pluginService.toggleState(plugins.panels.contextBrowser);\r\n    }\r\n\r\n    isPanelActive(name: string): void {\r\n        this.checkPanelActive.emit(name);\r\n    }\r\n\r\n    private getRulesHandler(): string {\r\n        const contextHandlerName: string = this.rulePluginService?.contextHandler?.name || 'empty';\r\n        return contextHandlerName;\r\n    }\r\n\r\n    /***\r\n     * Toggles the state of the rules designer\r\n     * */\r\n    toggleRulesDesigner(): void {\r\n        this.pluginService.toggleState(plugins.panels.rulesDesigner);\r\n    }\r\n\r\n    setSelection(event: Event): void {\r\n        if (this.isSelected) {\r\n            if ($(event.target).hasClass('rules-flexChild')) {\r\n                this.isSelected = false;\r\n            }\r\n        }\r\n\r\n        if (!this.isSelected) {\r\n            this.selectionService.setSelection([], 'rule');\r\n        }\r\n    }\r\n\r\n    hasAssociatePanels(): boolean {\r\n        return this.pluginService.hasAssociatePanels();\r\n    }\r\n\r\n    onClosePanel(): void {\r\n        this.closePanel.emit();\r\n    }\r\n\r\n    showContextBrowserToggleButton(): boolean {\r\n        const panel: sourceCode.k2Designer.objectModel.plugin.IInstance = this.pluginService.getRightMostPanel();\r\n        if (!panel || panel.plgnDef.name === this.uiComp.name) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n","<div class=\"associated-panel\" [ngClass]=\"{ 'rules-main inctv' : !isRulesActive(),  'rules-main' : isRulesActive() }\">\r\n\r\n    <!--Associated panel gutter template-->\r\n    <div class=\"gutter\">\r\n        <div class=\"header\">\r\n            <div class=\"heading-toggle\" (click)=\"onClosePanel()\">\r\n                <div class=\"heading-panel-toggle heading-panel-toggle-active\">\r\n                    <span class=\"icon icon-set-toolbox icon-size16 ic-expandmenu selected\"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"main\"></div>\r\n    </div>\r\n    <!--Associated panel gutter template-->\r\n\r\n    <div *ngIf=\"hasAssociatePanels() === true\" class=\"rules-container\" (click)=\"setSelection($event);\">\r\n        <div class=\"flex-container\">\r\n            <div class=\"header-flex-item\">\r\n                <div class=\"rules-heading\" tabindex=\"-1\">\r\n                    <div class=\"title fadeHide\">{{rulesHandler}}</div>\r\n                </div>\r\n            </div>\r\n            <k2-smart-field-composer *ngIf=\"isEmpty() === false\">\r\n                <div class=\"main-flex-item\" k2-scrollbar [horizontal]=\"true\">\r\n                    <div class=\"row main-canvas fadeHide\">\r\n                        <k2-rule-statement-block class=\"rules rules-body\" [statementModel]=\"rulePluginService.contextModel?.statements\"></k2-rule-statement-block>\r\n                    </div>\r\n                </div>\r\n            </k2-smart-field-composer>\r\n\r\n            <div class=\"footer-flex-item\" *ngIf=\"isEmpty() === false\">\r\n                <div class=\"row fadeHide\">\r\n                    <k2-rule-toolbox></k2-rule-toolbox>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"rule-emtpy-template\" *ngIf=\"isEmpty()\">\r\n                <div class=\"empty-template-section\" *ngIf=\"!isNotValid()\">\r\n                    <div>\r\n                        <span class=\"icon icon-set-panel icon-size48 ic-emptyautoconfiguration\"></span>\r\n                    </div>\r\n                    <div class=\"content\">\r\n                        <div class=\"header bottom-line\">{{getFromResx(\"RulesDesigner\", \"ruleDesigner_DefaultEmptyRule_Title\")|async}}</div>\r\n                        <div class=\"description\">\r\n                            <div>{{getFromResx(\"RulesDesigner\", \"ruleDesigner_DefaultEmptyRule_DescRow1\")|async}}</div>\r\n                            <div>{{emptyRuleString}}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <a class=\"btn-close hyperlink-control tertiary\" (click)=\"toggleRulesDesigner()\" tabindex=\"-1\">{{getFromResx(\"Resources\", \"general_close\")|async}}</a>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <div class=\"empty-template-section\" *ngIf=\"isNotValid()\">\r\n                    <div>\r\n                        <span class=\"icon icon-set-panel icon-size48 ic-invalidpanel\"></span>\r\n                    </div>\r\n                    <div class=\"content\">\r\n                        <div class=\"header bottom-line\">{{getFromResx(\"Wizards\", \"general_not_the_panel\")|async}}</div>\r\n                        <div class=\"description\">\r\n                            <div>{{getFromResx(\"Wizards\", \"general_not_the_panel_desc\")|async}}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <a class=\"btn-close hyperlink-control tertiary\" (click)=\"toggleRulesDesigner()\" tabindex=\"-1\">{{getFromResx(\"Resources\", \"general_close\")|async}}</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div *ngIf=\"isRightMostPanel()\">\r\n            <div class=\"fadeMeIn fadeHide ctx-toggleContainer\" (click)=\"toggleContextBrowser()\">\r\n                <div class=\"tab-item has-padding ctx-toggle\"\r\n                     [ngClass]=\"{ '' : !isCtxActive(),  'ctx-active' : isCtxActive() }\"\r\n                     k2TooltipSimple\r\n                     k2TooltipTitle='{{getFromResx(\"Wizards\", \"configpanel_tooltip_togglebutton_title\")|async}}'\r\n                     k2TooltipDescription='{{getFromResx(\"Wizards\", \"configpanel_tooltip_togglebutton_description\")|async}}'\r\n                     k2TooltipPosition=\"left\">\r\n                    <span class=\"icon icon-set-buttons icon-size24 ic-contextbrowserbutton\"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--Default Panel with no context template-->\r\n    <div class=\"noContext-panel\" *ngIf=\"hasAssociatePanels() === false\">\r\n        <div class=\"panel-container\">\r\n            <div class=\"panel-header\">\r\n                <button class=\"btn-toggle-contextBrowser has-padding\"\r\n                        *ngIf=\"showContextBrowserToggleButton()\"\r\n                        (click)=\"togglePanel('contextBrowser')\"\r\n                        [ngClass]=\"{'active': isPanelActive('contextBrowser')}\"\r\n                        k2TooltipSimple\r\n                        k2TooltipTitle='{{getFromResx(\"Wizards\", \"configpanel_tooltip_togglebutton_title\")|async}}'\r\n                        k2TooltipDescription='{{getFromResx(\"Wizards\", \"configpanel_tooltip_togglebutton_description\")|async}}'\r\n                        k2TooltipPosition=\"left\">\r\n                    <span class=\"icon icon-set-buttons icon-size24 ic-contextbrowserbutton\"></span>\r\n                </button>\r\n            </div>\r\n            <div class=\"panel-content\">\r\n                <div>\r\n                    <span class=\"icon icon-set-panel icon-size48 ic-invalidpanel\"></span>\r\n                </div>\r\n                <div class=\"content\">\r\n                    <div class=\"header bottom-line\">{{getFromResx(\"Wizards\", \"general_not_the_panel\")|async}}</div>\r\n                    <div class=\"description\">\r\n                        <div>{{getFromResx(\"Wizards\", \"general_not_the_panel_desc\")|async}}</div>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <a class=\"btn-close hyperlink-control tertiary\" (click)=\"closePanel()\" tabindex=\"-1\">{{getFromResx(\"Resources\", \"general_close\")|async}}</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n    <!--Default Panel with no context template-->\r\n</div>\r\n","import { AfterViewChecked, ChangeDetectorRef, Component, ElementRef, Inject, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { IConfiguredDestinationSetStatement } from '../../../../../types/models/rules/i-configured-destination-set-statement';\r\nimport { IConfigPanelService } from '../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { ISelectionService } from '../../../../../types/services/selection/i-selection-service';\r\nimport { CommandServiceToken } from '../../../../services/command/command-service-factory';\r\nimport { ConfigPanelServiceToken } from '../../../../services/config-panel/config-panel-service-factory';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { RulePluginService } from '../../../../services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from '../../../../services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { rules } from '../../../../shared/constants/rules';\r\nimport { DropDownMenuAlignment } from '../../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from '../../../../shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from '../../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { EventTypes } from '../../../../shared/enums/model/event-types';\r\nimport { RecipientTypes } from '../../../../shared/enums/rules/recipient-types';\r\nimport { StatementBaseComponent } from '../../base/statement-base/statement-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-destination-set-statement',\r\n    templateUrl: './destination-set.component.html',\r\n    styleUrls: ['./destination-set.component.less']\r\n})\r\nexport class DestinationSetComponent extends StatementBaseComponent implements OnInit, AfterViewChecked {\r\n\r\n    @Input() public index: number;\r\n\r\n    public isDropdownButtonSelected = false;\r\n    //Enums:\r\n    public dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    public dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    public dropdownMenuItemTemplate: typeof DropdownMenuItemTemplates = DropdownMenuItemTemplates;\r\n\r\n    public destinationSets: IDropDownMenuItem[] = [];\r\n    private _recipientsArrayChangedRemover: sourceCode.k2Designer.objectModel.core.model.IEventRemover;\r\n    private _recipientPropertyChangedRemover: sourceCode.k2Designer.objectModel.core.model.IEventRemover;\r\n\r\n    @ViewChild('recipientDropDownArrow') ddArrow: ElementRef<HTMLElement>;\r\n\r\n    constructor(@Inject(SelectionServiceToken) _selService: ISelectionService,\r\n        private _rulePluginSvc: RulePluginService,\r\n        @Inject(CommandServiceToken) commandService: ICommandService,\r\n        @Inject(ConfigPanelServiceToken) configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) undoRedoService: IUndoRedoService,\r\n        eventService: EventNotifierService,\r\n        private _el: ElementRef,\r\n        private _changeDetector: ChangeDetectorRef) {\r\n        super(_selService, _rulePluginSvc, commandService, configPanelService, undoRedoService, eventService, _el);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n\r\n        this.undoRedoService.forceDisable();\r\n\r\n        this._setupDestinationSets();\r\n\r\n        this._recipientsArrayChangedRemover = this._clientEventConfig.destinationSets.listen(EventTypes.arrayChanged, this._onDestinationSetsArrayChanged.bind(this));\r\n        this._recipientPropertyChangedRemover = this._clientEventConfig.destinationSets.listen(EventTypes.anyPropertyChanged, this._onDestinationSetsPropertyChanged.bind(this));\r\n\r\n        this.undoRedoService.resetForceDisable();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n        if (this._recipientsArrayChangedRemover) {\r\n            this._recipientsArrayChangedRemover();\r\n        }\r\n        if (this._recipientPropertyChangedRemover) {\r\n            this._recipientPropertyChangedRemover();\r\n        }\r\n    }\r\n\r\n    menuAlignElem: ElementRef;\r\n    ngAfterViewChecked(): void {\r\n        if (this.menuAlignElem != this.ddArrow) { // this is to fix : Expression has changed after it was checked.\r\n            this.menuAlignElem = this.ddArrow;\r\n            this._changeDetector.detectChanges();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get statement model as type ConfiguredDestinationSetStatement\r\n     *\r\n     * @param item\r\n     */\r\n    public get configuredDestinationSetStatement(): IConfiguredDestinationSetStatement {\r\n        return this.statementModel as IConfiguredDestinationSetStatement\r\n            || {} as IConfiguredDestinationSetStatement;\r\n    }\r\n\r\n    public onDestinationItemSelected = (item: IDropDownMenuItem): void => {\r\n        //The destination set dropdown is a multiselect, must update on select and deselect\r\n        const configuredSelectedItem = this.configuredDestinationSetStatement.selectedItems.find(d => d.key === item.key);\r\n        const linkDestinationSetReferenceIndex = this.configuredDestinationSetStatement.linkedDestinationSetReferences.indexOf(item.key);\r\n\r\n        if (item.isSelected) {\r\n            if (!configuredSelectedItem) {\r\n                //Selected item must be added to the list of selected items in configuredDestinationSetStatement.selectedItem\r\n                this.configuredDestinationSetStatement.selectedItems.push(\r\n                    sourceCode.k2Designer.objectModel.workflow.configuredRules.ConfiguredRuleDisplayItem.createInstance({\r\n                        title: item.title,\r\n                        icon: item.icon,\r\n                        key: item.key\r\n                    })\r\n                );\r\n            }\r\n            if (linkDestinationSetReferenceIndex < 0) {\r\n                //Selected item must be added to the list of linked destinationSetReferences\r\n                this.configuredDestinationSetStatement.linkedDestinationSetReferences.push(item.key);\r\n            }\r\n        }\r\n        else {\r\n            if (configuredSelectedItem) {\r\n                //Deselected item must be removed from the list of selected items in configuredDestinationSetStatement.selectedItem\r\n                configuredSelectedItem.removeFromModelArray();\r\n            }\r\n\r\n            if (linkDestinationSetReferenceIndex > -1) {\r\n                //Selected item must be removed from the list of linked destinationSetReferences\r\n                this.configuredDestinationSetStatement.linkedDestinationSetReferences.splice(linkDestinationSetReferenceIndex, 1);\r\n            }\r\n\r\n            //If unselected all items in the destination list, delete the statement:\r\n            if (this.configuredDestinationSetStatement.selectedItems.length === 0) {\r\n                this.delete();\r\n            }\r\n        }\r\n    };\r\n\r\n    public addDraggingState = super.addDraggingState.bind(this);\r\n\r\n    public removeDraggingState = super.removeDraggingState.bind(this);\r\n\r\n    /**\r\n     * Creates drag ghost image\r\n     */\r\n    public getDragImageFn = super.getDragImage.bind(this);\r\n\r\n    private get _clientEventConfig(): sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.client.IClientEventConfiguration {\r\n        return this._rulePluginSvc.contextModel.getParentModel<sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.client.IClientEventConfiguration>();\r\n    }\r\n\r\n    private _setupDestinationSets(): void {\r\n        //clear dropdown menu items\r\n        this.destinationSets.length = 0;\r\n\r\n        this._clientEventConfig.destinationSets.forEach(destinationSet => {\r\n            const reference = destinationSet.getReference();\r\n            let isSelected = this.configuredDestinationSetStatement.linkedDestinationSetReferences.indexOf(reference) > -1;\r\n            if (!isSelected) {\r\n                //If it was not found in the linkedDestinationSetReferences, check in selected items\r\n                isSelected = !!this.configuredDestinationSetStatement.selectedItems.find(d => d.key === reference);\r\n            }\r\n\r\n            this.destinationSets.push({\r\n                title: destinationSet.title,\r\n                icon: this._getDestinationSetIcon(destinationSet),\r\n                titleBinding: {\r\n                    objectReference: destinationSet,\r\n                    propertyName: 'title'\r\n                },\r\n                key: reference,\r\n                isSelected\r\n            });\r\n        });\r\n\r\n        //Select the first item by default if the selected item was not found\r\n        if (this.configuredDestinationSetStatement.selectedItems.length === 0 &&\r\n            this.destinationSets.length > 0) {\r\n            const selectedDestinationSet = this.destinationSets[0];\r\n            selectedDestinationSet.isSelected = true;\r\n\r\n            //Selected item must be added to the list of selected items in configuredDestinationSetStatement.selectedItem\r\n            this.configuredDestinationSetStatement.selectedItems.push(\r\n                sourceCode.k2Designer.objectModel.workflow.configuredRules.ConfiguredRuleDisplayItem.createInstance({\r\n                    title: selectedDestinationSet.title,\r\n                    icon: selectedDestinationSet.icon,\r\n                    key: selectedDestinationSet.key\r\n                })\r\n            );\r\n            if (this.configuredDestinationSetStatement.linkedDestinationSetReferences.indexOf(selectedDestinationSet.key) < 0) {\r\n                //Selected item must be added to the list of linked destinationSetReferences\r\n                this.configuredDestinationSetStatement.linkedDestinationSetReferences.push(selectedDestinationSet.key);\r\n            }\r\n        }\r\n    }\r\n\r\n    private static _destSetImplementor = 'IDestinationSetImplementor';\r\n\r\n    private _onDestinationSetsPropertyChanged(object: sourceCode.k2Designer.objectModel.core.model.IModelObject, name: string): void {\r\n        //To prevent too many refreshes on unimportant changes, for now we only refresh on title changed\r\n        if (object?.implementor?.name === DestinationSetComponent._destSetImplementor && name === 'title') {\r\n            this._setupDestinationSets();\r\n            this._refreshSelectedItems();\r\n        }\r\n    }\r\n\r\n    private _onDestinationSetsArrayChanged(array: sourceCode.k2Designer.objectModel.core.model.IModelArray<any>): void {\r\n        //To prevent too many refreshes on unimportant changes, for now we only refresh on destination set array changed (not other internal arrays)\r\n        if (array?.implementor?.name === DestinationSetComponent._destSetImplementor) {\r\n            this._setupDestinationSets();\r\n            this._refreshSelectedItems();\r\n        }\r\n    }\r\n\r\n    private _refreshSelectedItems(): void {\r\n        this.configuredDestinationSetStatement.selectedItems.splice(0, this.configuredDestinationSetStatement.selectedItems.length);\r\n\r\n        for (let i = 0; i < this.destinationSets.length; i++) {\r\n            if (this.destinationSets[i].isSelected) {\r\n                this.configuredDestinationSetStatement.selectedItems.push(\r\n                    sourceCode.k2Designer.objectModel.workflow.configuredRules.ConfiguredRuleDisplayItem.createInstance({\r\n                        title: this.destinationSets[i].title,\r\n                        icon: this.destinationSets[i].icon,\r\n                        key: this.destinationSets[i].key\r\n                    })\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    private _getDestinationSetIcon(destinationSet: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IDestinationSet): string {\r\n\r\n        let icon: string = rules.icons.recipientGroup;\r\n\r\n        if (destinationSet.isRecipient && destinationSet.destinationItems?.length > 0) {\r\n\r\n            //is a recipient but may have a group as its type\r\n            switch (destinationSet.destinationItems[0].type) {\r\n\r\n                case RecipientTypes.group:\r\n                case RecipientTypes.queue:\r\n                    icon = rules.icons.recipientGroup;\r\n                    break;\r\n                case RecipientTypes.user:\r\n                default:\r\n                    icon = rules.icons.recipient;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return icon;\r\n    }\r\n}\r\n","<div k2-scrollbar-focus class=\"outcome-outer-block {{states.toString()}}\"\r\n     [attr.state]=\"states.toString()\"\r\n     [class.multi]=\"configuredDestinationSetStatement?.selectedItems?.length > 1\"\r\n     tabindex=\"0\"\r\n     (click)=\"setSelected(true); $event.stopPropagation();\">\r\n    <k2-drop-down [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                  [trianglePosition]=\"dropDownMenuTrianglePosition.center\"\r\n                  [menuItems]=\"destinationSets\"\r\n                  [innerItemComponent]=\"dropdownMenuItemTemplate.RulesOutcome\"\r\n                  (isMenuExpandedChange)=\"isDropdownButtonSelected = $event\"\r\n                  (onItemSelected)=\"onDestinationItemSelected($event)\"\r\n                  [isMultiSelect]=\"true\"\r\n                  customMenuClass=\"recipient-outcome-menu\"\r\n                  [menuAlignElement]=\"ddArrow?.nativeElement\">\r\n        <div class=\"outcome-inner-block k2-dropdown-target\"\r\n             *ngFor=\"let item of configuredDestinationSetStatement.selectedItems; first as isFirst; last as isLast\"\r\n             [class.notfirst]=\"!isFirst\"\r\n             [class.invalid]=\"item.getLogicalParentModel() === null\">\r\n            <svg class=\"leftsvg\" height=\"34\" width=\"10\">\r\n                <path d=\"M1 0 L1 7 a2,2 0 0,0 1,1 l8 8 a2,2 0 0,1 -1,1 l-8 8 a2,2 0 0,0 -1,1 l0 6 a2,2 0 0,0 1,1 l87 0 a2,2 0 0,0 1,-1 l0 -30 a2,2 0 0,0 -1,-1 L1 -1 Z\"\r\n                      stroke-linejoin=\"round\"\r\n                      *ngIf=\"configuredDestinationSetStatement.selectedItems.length === 1 && isFirst\"></path>\r\n                <path d=\"M1 0 L1 7 a2,2 0 0,0 1,1 l8 8 a2,2 0 0,1 -1,1 l-8 8 a2,2 0 0,0 -1,1 l0 15 a2,2 0 0,0 1,1 l87 0 a2,2 0 0,0 1,-1 l0 -30 a2,2 0 0,0 -1,-1 L1 -1 Z\"\r\n                      stroke-linejoin=\"round\"\r\n                      *ngIf=\"configuredDestinationSetStatement.selectedItems.length > 1 && isFirst\"></path>\r\n                <path d=\"M0.5 -2 L0.5 46 L12 46 L12 -2 Z\"\r\n                      stroke-linejoin=\"round\"\r\n                      data-ng-if=\"configuredDestinationSetStatement.selectedItems.length > 1 && !isLast && !isFirst\"></path>\r\n                <path d=\"M0.5 -2 L0.5 33.5 L12 33.5 L12 -2 Z\"\r\n                      stroke-linejoin=\"round\"\r\n                      *ngIf=\"configuredDestinationSetStatement.selectedItems.length > 1 && isLast  && !isFirst\"></path>\r\n            </svg>\r\n            <div class=\"outcome-dropdown-button-block\"\r\n                 [class.narrow]=\"!isFirst\"\r\n                 [class.notfirst]=\"!isFirst\"\r\n                 [class.dropdown-button-selected]=\"isDropdownButtonSelected\"\r\n                 [class.isDropDownTarget]=\"isLast\">\r\n                <div class=\"clickablecontainer\">\r\n                    <div class=\"outcome-icon-block\">\r\n                        <div [ngClass]=\"'icon icon-set-picker icon-size24 ' +  item.icon\"></div>\r\n                    </div>\r\n                    <div class=\"outcome-title-block\"\r\n                         (click)=\"setSelected(true);\"\r\n                         [class.rightborder]=\"configuredDestinationSetStatement.selectedItems.length > 1\">\r\n                        <span>{{item.title}}</span>\r\n                    </div>\r\n                    <div class=\"k2-dd-flexChild k2-dd-dd-sprite dropdownIcon\"\r\n                         *ngIf=\"isLast\"\r\n                         [class.no-padding]=\"!isFirst\">\r\n                        <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown colour_dark\" #recipientDropDownArrow></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"outcome-space-block\" *ngIf=\"!isFirst && !isLast\">\r\n            </div>\r\n\r\n            <div class=\"outcome-grip-block\"\r\n                 K2Draggable\r\n                 k2Dragtype=\"ruleDesignerItem\"\r\n                 [k2Dragitem]=\"getDragItem\"\r\n                 [k2Dragcontext]=\"statementModel\"\r\n                 *ngIf=\"isFirst\"\r\n                 [k2Dragghost]=\"getDragImageFn\"\r\n                 (k2Dragstart)=\"addDraggingState()\"\r\n                 (k2Dragend)=\"removeDraggingState()\">\r\n                <div class=\"icon icon-set-steps icon-size16 ic-draghandle selected outcome-grip-icon\"></div>\r\n            </div>\r\n\r\n            <svg class=\"svgBadge\"\r\n                 *ngIf=\"item.getLogicalParentModel() === null\" height=\"32\" width=\"32\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 32 32\">\r\n                <title>Badge</title>\r\n                <g class=\"cls-1\">\r\n                    <g id=\"Layer_1\" data-name=\"Layer 1\">\r\n                        <image class=\"cls-2\" width=\"126\" height=\"126\" transform=\"translate(2 2.2) scale(0.24)\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAACCCAYAAACKAxD9AAAACXBIWXMAAC4jAAAuIwF4pT92AAAfTklEQVR4Xu2dC6yl1VXH/7ZKoSCUZ3kzQKG2VMqjyCNkcjs8WjUUI3WAItxkEFIbMAgtsQSZIUIFNEbR0GALM2iIkoBgodNYYAiS8mhqbZFHp1JmACkoFmpLFZ+4f7PW6tln3++cfe69555z7sw3yT+Z3Lu/71vrv9Zer/2dc/Xmm2+qRYvqgs0F6d9P1FC7x+aM6oLFhIqh3zIAtlgnqS6YZFSM/dYCPzkAymt6OklNtsWG6oJJQh/Dl8b+KcdWjrdl2LoB+e/jmrhH6SSbpWNUF4wbqhu+NDiG3Sbh7QnbOrZL+GnH9g2I322XXfN2v084Su4gfR2jptMkorpgXFCz8XPDl0YPY++Q8I6EHRN2Stg5YZeEXRN2c7wzQ/xsV1+3s1+3o99nB3WcpMk5csfocoqajpOE6oJRQpqx+5uMnxt+ezcWhsOIGHT3hD0S9krYJ2HfhCUJ+ycc4DgwQ/xsf1+3r1+3l99nd7/vLv6cd/hzc8fo5RSLJkpUF4wC6jZ+6QCx88P47NAd1TE8xtpbZkCM+a6EgxN+JuGQhJ9NODThsITDE45owOH++0N9/SF+/cF+v/39/nv788IxkAN5wikiUiy6KFFdsJBQbwfYSt3G314d4xPO2a0Yhp18UMJ7Et4nM+aRCT+XcGzC8QlLE6YSliWckHBiwkkZTvSfL/N1S/26Y/0+R/p93+fPOcify/ORA3nCKfJIgfzosSgcorpgoaC6A5CXCcPkbHbgnk4+4fzd6hj+KJnRMCDGPDnh5xNOSfilhNMSfiXh9IQzEs5M+FiGM/3np/u60/y6U/w+J/t9l/pzjlLHMZADeZAL+ZATeZEb+fs6RI2jUaK6YNhQcw3Q5ADsMvIz+ZrQTJiGfML40bJdi4E+JDPaLycsTzgrYTrh3ITzE3494YKE30i4KOE3HRdn/7/If3+Brz/fr5/2+y33+5/iz1vmz0cO5EEu5ENO5EVu5K85xMREh+qCYULdUSCvASIFhAOQh2P3E47fLwvTkE8YZ6eyazHQryasSPh4woUyA1+acFnCFQlXJlyV8JmEaxKudVyX/f8a//1Vvv4Kv/5Sv9+Ffv8V/rzl/nzkQB7kQj7kRN6IEugRDhEpI68hJiY6VBcMC2qOAtuoUwASUnd3AinQ3ivbbcfIcveHE06VhfBzEs6T7eBLEj6dsFJmSAz7BwnXJ9yQcGPC5xJuSlidsCbhlgxr/Oc3+bob/brr/T7X+n1X+nMu8efyfORAHuRCvimZvMiN/OiBPuiFflFYoveM6FDjcCFRXTBfqDsVlFGA4oqWjIKLivxAJ5BKnnxMCP4FWd5mJ/6abHd+KuHyhN+R7ew/khnv8zLD3ppwW8LtCXcmfCHhnoQvJqxN+FKGtf7ze3zdnX7dbX6fNX7fG/w51/lzeT5yIA9yIR9yIi9yIz96oA96oR96oi96N0WHsaWK6oL5QL1rgTwNUGSRW2nXDlPHAX5RVryx6wjL5HLCNUb4vYQ/TvhT2a7+i4Q7Ev5aZtgvJ6xLeDDhoYSHEx5JeMzx1Qzxs0d83UN+3Tq/z1q/7x3+nFv8uTwfOZAHuZAPOZEXuZE/HAK90A890TdPF421Q43bYaO6YK7QTCeIKEDxFFGAsEk7Ru9Ojp2S7aiPygo1CrdPynI2eZwdiRH+TLZj75IZ6j6Z8b4iM+rXEr6R8HjCkwlPJXwrYX3Ctxuw3n//lK9/3K//mt/vK37/+/x5d/nzkQN5kAv5kBN5kRv50QN9pmT6oSf6ondEhygm4WdszlBdMBeo2wnyVECOzKMAhRXhk2KLNo3K/Gx1HIC8TCj+k4SbZTuS0I0x7pftXgz1dXWMjlGfSXg24bmE5xP+KeHFhO86XsoQP3vR1z3v1z3r91mvjnN83Z/3kD8fOZAHuZAPOZEXucMh0Ae90A890Re98+gAL3mqGLkzVBfMFprpBIQ+DnEIhczzyZUUUbRc7JIPytoy+nkKMEIsO4siDWIp5Nh95O97E/424VGZUZ6Q7WQMtjHhBZlBX074l4RXEr6X8GrCa47vNyB+96qvf8Wvf9nv94Lf/xl/Hs/l+ciBPMiFfMiJvMiN/OiBPuiFfuiJvuiN/vAAH/ACP/AEXyN3huqC2UDNThD1AMMWemz6bdqs49SJAoRRKnGqcto48i87DGLvloVkwjOhmp2JMb4j27m54TFiGPsHCT9MeD3hR45/74NY87pf9wN1nOR76naM5/z5yIE8yIV8yIm8yI386IE+6IV+6BnRAf3hAT7gBX7yumGkzlBdMCjU7QR5UcjolXy4n6xgIjQypSN30nqxW2jJVsnaNXIuoZYdFg7wd7JdSD7fKAvhGIWdyy4Ow4fRMex/JLyR8J+O/xoAsfYNvz4c5HV1HONVfy7PR46NMrmQDznDIZAfPdAHvVbJ9ERf9EZ/eIAPeIEfeIKvvIgciTNUFwwCzXSCmA9QDNFDL5HlxQ/IQuNHZO3WJxJ+K+F3ZeGU4uuvEv5GlofZaRD8j7JdSC6PnY9R2Llh+DB6GPW/Hf9T4H8bUK6Ja3MHeUMdx/ihPz8iBXIhH3IiL3IjP3qgD3qhH3qiL3qjPzzAB7zAzxIZX/CWzxsW3BmqC2pQ73QQTkBRRC9NXjxBNpEjRDLS/e2E35ftmr+U9fIPyNo6Qi47LRyAXUiYjp1fGj83em7k/5sDmpwkHCN3iogUyIV84RDIjfzogT7ohX7oib7ojf7wAB/wAj/wBF+5M4wkTVQX9L14MCfgSJeZPKd85McVsgLqyoQ/lBVX9OjsHsLq3yc8nbBBlo9zB2A3ErJL4/cz+ptzQD/nKJ0CeZArdwjkRn70QB/0Qj/0RF/0Rn94gA94gR94gq+RO0N1Qc8LezvBjprpBCfJpm7nyvIkQxgKqT+XDWvWydqyf5CFV6r0f5bl4yYHKHf+fA1fQy+HAE0OgdzIjx7og17oh57oi97oDw/wAS/wA0+lM+Q1w4I5Q3VBzwvNERAqhkXRIlLwLJGFuXACBiuMYemtr5aNa2+VhcwHZTmVYQ67KNIAOZjQWzrAqIw/W6fIHQK5kT/SBXqhH3qiL3qjPzzAB7zADzyFM8DfEhmf0VrmQ6fxO4K6zw5iWBQt4n6ywoecR7g7zZVkLk8r9VlZNc0whoKK0MnQhtxKJU4BFlGAXFymgHE5QInSIfKUgdwRHdAHvdAPPdEXvdEfHuADXuAHnuAL3uAPHuEzWst8AjnUqFBdUHGCrdSZGDIUoR+mFaIKpgAi9xH2PqmOE1A0cdhD3mSMS2FFCKX6JsdSkUcUmEQHKNHLISI6oA96oR96oi96oz88wEc4AzzBF7zBHzzCJ7zCb0wg42xiaM5QXdDDCfK6gFn5LrIJGcMR+mJaIqphCiFy4NWa6QTflE3q6MXLVBBRoEwDNaOME2W6iOhQpgr0RW/0L50BnuAL3uAPHuETXuEXnuF76PVCdUEPR4iUEB3CnrJxKZOypbL+eFpWFVMQkQsJg+EEtFaQQXX9rwn/pu5UUEaBmhEmCWV0yFMFeqIveqM/PIQzwA88wRe8Tct4hE94hV94jk5iqCmiuqCHE0RKiOKQCpfZ+XGyiRnDEvpkWiSqYwojcmIeCcIJyKMxE2hKBTXiJxFNqSJmD+ibO0NEBviBJ/iCN/iDR/iEV/iF5ygeh5oiqgsKJ4iUwMSLlysIVfuqUxwyQz9dNjljaEK/TKtElUyBRG5scoKmeqBG9mJAU93Q5AzwAj/wBF/wBn/wCJ/wGsUjfMM7/GOHoaSI6oLCEZpSwkHq1AUUOefJxqhM0FbL+mZaJqplCiVyZJMT5PVAjeDFhLJuKJ0BPuAFfuAJvlbL+INH+ITXqBfge+gpor5g5jlCdAmREnjZ4njZEeu0rNhhps44lUnaOln/TOtE1UzBRK4snWAxp4Ia8lSROwM8wAe8wA88wRe8wR88wue0jF94hu9IEXkXMa+oUF/QHQ1ierizrIqltYmUcKbsqHWV7ICFSpixKhM1hin00bRQVM9RGG4JThAonSEKSPiAF/iBJ/iCN/iDx1UyXuE3UgS8wz92iKnjvKLCoE6QRwMKFUafB8rexZtSJyV8Wnbkymkb+Y4iiPHqBtlQhX6aVqqpMKwRuTmgqYCED3iBnw0yvuAN/uARPuE1UsSUjHf4xw554TjnqDCoI0Q0iJkBBQsj0GNlVe3ZspaHoQghjaPXB2R5j1k7Y1YmbDEsKlvEGoGbE8rWMoZO8ANP8AVvD8h4hE94hV94hm94h/8oHGO2MOeoMIgjlNFgD1lPS+GyTDYf5928K2StD/0woY0j2KfVqQsojrZ0Jwg0OQP8RL0Ab/AHj/AJr/ALz/AN7/CPHbBHGRWG5wgaLBrwyva0bDTKO3o3y97MoRViWLJBdgoXdUFZHNYI25xRFo9RL8DXBhl/8Aif8Aq/8Dwt432oUaHmCDE3KGuDw2Veyfv7eOlKWWHDu3r3yapfWiL6ZI5k87pgSykOa2gqHuEJvuAN/uARPuEVflfK+IZ3+McOZa0Qc4X5O4Ka5wZUqPvIhhrHyHLVOTIvvU7W+94tK3SekFXBbUroj34pAv7gET7hdbWMZ/iGd/jHDtgDu0QHMae5Qs0R8C7CDVMsjkLpX5l7T8mOSz8uy115NOAFzigQqYbblNAfTSkC3qJwhM88KsA3vMP/lMwe2AX7YKc4kBqaI+RFIm/JMM3iFIw+9sOyOTiV7DXq1Aa1aNCmhJkITmpRIWoF+IZ3+McO2AO7YB/sNKeisV80yNNCFIkcfDDdOlX2EsVlso97Udneq05tUEaDNiX0R54iyqgQtQL8wjN8wzv8YwfsgV2iaJxTeujnCHG4FOPkKBJ5YYKDkAtlR6b0uXfKPvFDpbtRNinLo0FbIPZHXjjmUQEeN8p4hV94hm94h3/sgD2iaIyxcxxGzdsRyrSwl+xrYo6WfTkExQqvVvFpYKZfHKE+KvvkD4coDEeogNtoMDjKqAB/8Aif8Aq/8Azf8A7/2AF7YBfsg53mlB76OUKvtMCbM4w7L5cNOihi7pd9FvA7slEp/TCHKm1tMDjKWgH+4BE+4RV+4Rm+4R3+sQP26JUe5uYImjlEim7hANl8m951uewQJNLCXbLBR14kMjIt5wY1IlrMnCvAY140wjN8R3rADtgDu2Af7JR3DwPXCb0cIeqDGClzBn6U7IukqFY5GqWnvUUWrjgxI3zFAKktEueGpqIxBkzwC8/wDe/wjx2wB3bBPtgpRs6zqhN6pYWoD3j5YW/Z0IKRJmfiK2SnYdEt0OMStp7RzLTQOsHskReNeXqAX3iG7+gesAP2wC7YBzthL+w2qzqhnyOU9cFS2TEow4yVshcteYHiQc3sFtq0MHeU6aHsHuAb3uF/pcwe2AX7lHXC7B1BM+cHHGLENDGvD2hbrpJ9wRSvVTHseFJ2alZ2C22ROHvkRWPePcAvPMM3vMM/dsAeeZ0QU0bsN/A8oZcjUGjQj3KYwVHnkbK3Y86Sfe8gJ2Fr1KkP1svyWAyR8m6hpniLmci7hxguwS88R52wRmYH7IFdsA92wl7YDfsNXDA2OUJZKMZYmX51WvYllLw1c6vsW8eYerX1wXDRr06Ab3iHf+yAPaZl9olx86wLxtIR8mPnGCTxflwUiufKxpvXy/rZdbJXsZ9V9zSxrQ/mh7xOyKeM8Azf8A7/2AF7YJcoGLFXPlga6Fi6yREoMPjkLZUnx5t8RDsGSefLTr8oVG5Xp1Bs5wfDRb95QhSM8I8dsAd2icES9sJu2A87DlQw9nMEzrepQHl9moqUY09eirhS9jW1zL0ZcFDAPK/mQrGmcIveaCoY4Rm+4R3+sQP2wC7YBzthL+yG/eblCPloeYnsj1lMyd6KYZJFpfo52bHow7JXsJmHl4Ok1hHmh9wRYrAEz/AN7/CPHbAHdsE+UzJ7LdEsR825E5StIx/DzltHTrr4PB5v1N4ke936EXUmim3HMFz06hzgG97hHztgD+yCffIWEvsN3EL2c4Q4Y4ij5zNkf9eAFyNWy77IOlrHeP+gPGiqKduiN3JHgNd4PyFaSPhfLbMHdsE+cSQdZw7zcoTysOkI2Td4nCl7M6acIcSLKG3rOFw0tZDxoko5S8Au2Ac7Ya9ZHz71c4R4GYUbnyT7szfhCBx68Jl+3r1HsJfUOsKw0eQI8Azf8A7/2CEcAftgJ+wVL6ksmCMwxYpTx9YRFhaDOgL2wC4jdYQ2IowOgzrCgkeEtkYYL8ZeI7Rdw2Rg7F1DO0eYDIx+jpA5QztZnByMfrJYOEJ71jAZGPtZQ3v6OH5EoTjW08f2fYTxI3eEsbyP8Ba1byhNAppax5G+oZTPEtp3FseHXh3DSN9ZLGcJeQu5XO1bzAuN4Gw8bzFnzhAFY/u5hvGgLBSjPtioUXyuocER2k86jQf96oORftKpqWA8SO1nH0eBcIJykBQTxagP4tRxQT/72OvwKa8T2k9DLwz6zQ9G92nozBnKUXPUCTFYOk/t9yMMG3mRWKYFeIVfeIbvhf1+hMIRok5ovzFlNCjTwkR8Y0peJ7TfobTwCG6iSJyY71DK5wlN6aH9VrXhoqlIHO+3qmXOUKaHPdV+z+JCoKwNIhqM93sWi6hAeMm7B6ZW75ede7ffvDoc5J1CGQ3gET7hFX7hGb7hfWTfvFqmB863Od5kaHGM2u9iHgbylNAvGsDrao36u5gzZ8iPpRlScJgRRSO9K2/F8FLESrXfzj5b5AVizA3gKQZIURvk0WClRvnt7Jkj5MMlDjGiaHyv2r/XMF80pQR4gq8NmpS/15A5Q140xsiZo84j1P4Fl7miX0qAL3iDP3iET3iFX3iGb3iHf+wQI+U5FYmzcYRaVCBXna32bzoNiiYngBf4iQIR3h7QhP1NJ25cRoWoFZhvT6n9K2+DIneCvC6AF/jZoEn8K2+FM0RUiA5ib7V/93E2aCoOoy6AF/iBJ/iCN/iDx1Ua9999LBwhjwoxdqZ/5fVppluciU+r/UuwTSidAL3RHx6iLoAfeIIveIM/eITPaY37L8EWzpDPFXj5gWkWZ+AULh9U+7ehmxAOUDoB+sMDfMAL/MATfK3WpP1t6MIRYq7AoQZTrCgcGWpEiuAg5BNq/1o8KGuC0gngAT7gBX7gCb7gDf7gET4jJcBzFIjwH4dL84oGAztC4Qx4X144Rorg4OM4WVXLHJzP410pa31ulR2hUgR9U83O0FRALlaHyFNBXhg2OQF8wAv8wBN8wRv8wSN8wiv8RkrIC8R5R4NZOUKDM5Qpgp6WuffShI/I8hotD0emN8j6YT7Tj9IMS3JnIFdGAVm2lovNGUonQJ8oDNEzdwJ4gA94gR94gi94m5bxCJ/wCr9DTwnzdYRIEflsgSqWU7CoF3hzZoWs2Lk64bOySjicISIDOZKCieqZVirmDGXdMOkOkTtA1AMxJ0Av9ENP9M0jAXzAC/zAE3zBG/xFXQCv8JvPDIaSEubkCIUz5CmC6pWPYe8ja20+IHthgiLnXNlo9DOa6QzkRgolqmZaKPrpGDo11Q2T6BC5XGU9EMMi9EI/9ERf9C6dAH7gCb7gDf7gET7hFX7zLmFo0WBOjtDgDG9Tp17gKHQ/dYrHE2XHpbxE8Sl1nIEwSE6kQKJapnWij2aowoSNPJqnikl0iF4OkKcC9EAf9EI/9ERf9EZ/eAgngB94gi94i+IQPuE16oKhpoR5OULmDG9Vxxm2Vad4XCIbgR4t+16fj7qSeDzhj1xIYUSVTMtE/8wwZYNszFqmCnZXXjuM0yFKB8hrgYgCeSpAH/RCP/REX/RGf3iAD3iBH3iCL3iDvyXqFIfwG04wp/OEvvasLeh5YXO9QBHDWzKMPqlwD1HHGfB0wh45kIKI6phWib55nWyixniVWTshlFM4jmQjOpQOMUqn6GX80gEiCiA38qMH+qAX+qEn+qI3+sMDfMAL/IQTwBv8wSN8xvRwqHVBlz1rC/pe3NsZdtJMZyDckfsohKiKaZHol1fLJmmMVcmbhM6nZbuI6ppdRY5tcog8ZZQOMR/HaLpP7gCRAkoHQE7kRW7kRw/0QS/0Q0/0RW/0hwf4gBf4KZ0gOoQFdYJNtqwtqEGDOQNhjpxHAUQ1PC3rkxmaMEFjnErRRMh8QHYES2tFYUVujXQRDkHojdlD6RS5Y/Ryjhry6+OeufFjJoAcuQMgJ/IiN/KjB/qgF/qhJ/qiN/rDA3zAC/zA08idYJMdawsGgWaeR2yjbmdYIit8qIJpieiPGZYwOWOMykydAxZO2zh6ZfdQUJFTn5CF13AIqm8KMHIwFTm7sXSKcIzcOZqcpDR2bvQwfGn8H/lzeT5yIE84AHIiL3IjP3qgD3qhH3qiL3qjPzzAB7zAzxJ1OwE8zvscYRBUFwwKzXSGvGag4NlP1grRFy+VTcxOl83SyZOrZEeu7Bqq6S/IXtMirPICJwSz0zbKenEqcXYh+RijRKQIxyBkh3PkDtIPsfYNvz4MHzv/+/68V/z5yLFRJhfyISfyIjfyowf6oNcqmZ7oi97oDw/wAS/wA095TTASJ9hkv9qC2UC900S0lvTDDEeYlB0nm6GTHwmRF8jO3WmlKKRulr2rd7c6DsFOI+R+S/YxMHYh+RijRKQgTIdjsHPDOcJBeiHWvO7XheFfU2fnv+zPe86fjxzIg1zhAMiL3MiPHuiDXuiHnuiL3ugPD/ABL9EijiwddNmutmC2ULMzRGvJUIQJGeNSZufkRUIjR6xnynYLBdQVsnf0CKcUVxDLDrtX9omfR2WfBWQXYoxnZDuTKj13DHYuRmQXv6aOk5SI373q619Rt+Ff8Ps/48/juTwfOZAHuZAPOZEXuZEfPdAHvdAPPdEXvdEfHuADXqJFHLkTbLJbbcFcoJnOEEMnJmO7yGbmFEXkRULj8epEh7Nl7+bRW6+UvcINsewwQu2dsmHM/bI8TFuGUdiZT8qGNhjsWdnOfV4WwjHodx0vZYifvejrnvfrnvX7rPf7Pu7Pecyfy/ORA3mQC/mQE3mRG/nRA30iCqAn+qI3+sMDfMTEEJ5G7gSbbFZbMFeo2xnyCSSzcooh8uG+svN1XrZgl0zJcieDFcJoOAQ76xrZx73IuRRf7L67ZMYgJD8oC88YilDNGDecg2EOOxmjfrsB6/33T6lj9G/4fR7z+z7oz1nrz+X5yIE8yIV8yBkOgPzogT5TMv3QE33RG/3hAT7yieHInWCTvWoL5gPNdIa8iCQU5tGBgukw2YuZy2SvbPP+/jmyT/YQYi+TDWH4NDD5FyPcItuR9OgMazDUl2XDG4zH7n1Y9rW1jzm+miF+9oive8ivW+f3Wev3vcOfc4s/l+cjB/IgF/IhJ/IiN/KjB/qgF/rlUSCvB+LsYCxOsMlWtQXzhcwZwiFQNk8VvFwR0YFceaCslz5CHYdgRzF1o91iDHuhbC5/ucwIhGJ2JOPaz8u+bexW2Y69XRa6yd/08l+UGfZLGdb6z+/xdXf6dbf5fdb4fW/w51znz+X5yIE8yIV8yIm84QDogT7ohX4RBdA7TwU/PjvQGJxgk51qC4YFNUeHmDeQI3eW9dCEzXc5gYfLPtY1JfvA56my1otdRwFGJU5LRlVOXr5KVqTRrl0vM96Nsu8svklWyK2R7erAGv/5Tb7uRr/uer/PtX7flf6cS/y5PB85kAe5kG9KJi9yIz96oA96oR965vOBsUaBLvvUFgwT6jhDU3TI08UeTiA7icKKNoscS7F1guzLIZjILZftxBWysMzuvFj2JZSEa3L2lTJD0saRx691XJf9/xr//VW+/gq//lK/34V+/xX+vOX+fORAHuRCPuREXuRGfvTI00BTFBi7E2yyTW3BsKHuVFHWDlFMhkOwk+ixya3027Rc7DZm8pBPCP6QrC2jMsdAZ8kKtXNl31FM4cYOZqR7kSyXg4uz/1/kv7/A15/v10/7/Zb7/U/x5y3z5yMH8iAX8iEn8iJ3OEAUg421gCbACUB1wUJB3dGhn0MQUhm2UGRFlHi3jHyKsKNk+ZgpHQaiTWOnYjR2LXmb4o0Qfoasn/9YhjP956f7utP8ulP8Pif7fZf6c47y5/J85Ijdj3zIibw1B5iIKJCjumAhoe7o0MshCKkUV4xe2WUUXHs5+QfI2jHCcTjGkbIwjdHYtRhwSmZMwjinfCdlONF/vszXLfXrjvX7HKmO4d/jz+O5PB85kAe5kA85IwX0dABNmBOA6oJRQL0dImqI3Cl2UMcp2IHkYSpyDENopkAjTNOucaRL736ozJiE8SMacLj//lBff4hff7Dfb3+//97+vN3UMX4UgGH8vAaYeAcIVBeMEuo4RFlDQOxWTvI26o4UhOGd1HEM8jPGYreSrzHgEpkxD3AcmCF+tr+v29ev28vvs7s6ht/Jn5fvfORBLuQrHeDH+tR0HzeqC8YFdTtEL6fYWt2OQV7ewY3FbsVw5GyMyDx/N8c7M8TPdvV1O/t1O/p9dvD75oaPnd9k/Inf/U2oLhg3lO0qdTtF6RhNzrGtI5wEbN+A+N122TVNRi8NP8P4WmQOEKgumCSo2yl6OUY4R+kgga0bkP8+N3gYva/htUiNn6O6YJJRGiMzUu4cpZP0Q3lNfr/NyvAlqgsWExoco5eT9ELP62vPXuyoLthcUHGSLcLY/VBd0GLLQHVBiy0D1QUttgxUF7TYMlBd0GLLQHVBiy0D/w/RgfnZp3gSSQAAAABJRU5ErkJggg==\"></image>\r\n                        <circle class=\"cls-3\" cx=\"16\" cy=\"16.2\" r=\"12\"></circle>\r\n                        <circle class=\"cls-4\" cx=\"16.01\" cy=\"21.08\" r=\"2.16\"></circle>\r\n                        <path class=\"cls-4\" d=\"M17.84,7.9a1.87,1.87,0,0,0-1.82-1,2.24,2.24,0,0,0-1.9,1,2.86,2.86,0,0,0-.29,1.39A39.93,39.93,0,0,0,15,15.87a1,1,0,0,0,1.88,0,41,41,0,0,0,1.16-6.58A2.9,2.9,0,0,0,17.84,7.9Z\"></path>\r\n                    </g>\r\n                </g>\r\n            </svg>\r\n        </div>\r\n    </k2-drop-down>\r\n</div>\r\n","import { Component, ElementRef, HostListener, Inject, OnInit } from '@angular/core';\r\nimport { CommandServiceToken } from 'src/app/services/command/command-service-factory';\r\nimport { ConfigPanelServiceToken } from 'src/app/services/config-panel/config-panel-service-factory';\r\nimport { EventNotifierService } from 'src/app/services/event-notifier/event-notifier.service';\r\nimport { ResourceService } from 'src/app/services/resource/resource.service';\r\nimport { RulePluginService } from 'src/app/services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from 'src/app/services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from 'src/app/services/undo-redo/undo-redo-service-factory';\r\nimport { StatementDirectives } from 'src/app/shared/enums/rules/statement-directives';\r\nimport { isUndefinedOrNull } from 'src/app/shared/utils/general';\r\nimport { IConfiguredComplexLogicalGroupExpression } from 'src/types/models/rules/i-configured-complex-logical-group-expression';\r\nimport { IConfiguredExpression } from 'src/types/models/rules/i-configured-expression';\r\nimport { IConfiguredIfThenElseStatement } from 'src/types/models/rules/i-configured-if-then-else-statement';\r\nimport { IConfiguredSimpleExpression } from 'src/types/models/rules/i-configured-simple-expression';\r\nimport { IConfiguredStatement } from 'src/types/models/rules/i-configured-statement';\r\nimport { IItemConfiguration } from 'src/types/models/rules/i-item-configuration';\r\nimport { IQITConfiguration } from 'src/types/models/rules/i-qit-configuration';\r\nimport { IStatementConfiguration } from 'src/types/models/rules/i-statement-configuration';\r\nimport { IConfigPanelService } from 'src/types/services/config-panel/i-config-panel-service';\r\nimport { ISelectionService } from 'src/types/services/selection/i-selection-service';\r\nimport { DragDropService } from '../../../../services/drag-drop/drag-drop.service';\r\nimport { StatementBaseComponent } from '../../base/statement-base/statement-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-if-then-else-statement',\r\n    templateUrl: './if-then-else-statement.component.html',\r\n    styleUrls: ['./if-then-else-statement.component.less']\r\n})\r\nexport class IfThenElseStatementComponent extends StatementBaseComponent implements OnInit {\r\n    public ifBlockHover = false;\r\n    public thenBlockHover = false;\r\n    public elseBlockHover = false;\r\n\r\n    public qitConfiguration: IQITConfiguration;\r\n    public hoverIfQITLeft = false;\r\n    public hoverIfQITRight = false;\r\n    public hoverThenQITLeft = false;\r\n    public hoverThenQITRight = false;\r\n    public hoverElseQITLeft = false;\r\n    public hoverElseQITRight = false;\r\n\r\n    public static ALLOW_MULTIPLE_STATEMENTS = false;\r\n\r\n    constructor(@Inject(SelectionServiceToken) protected selService: ISelectionService,\r\n        rulePluginService: RulePluginService,\r\n        @Inject(CommandServiceToken) commandService: ICommandService,\r\n        @Inject(ConfigPanelServiceToken) configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) undoRedoService: IUndoRedoService,\r\n        private dragDropService: DragDropService,\r\n        private resourceService: ResourceService,\r\n        eventService: EventNotifierService,\r\n        rootElement: ElementRef<HTMLElement>) {\r\n        super(selService, rulePluginService, commandService, configPanelService,\r\n            undoRedoService, eventService, rootElement);\r\n    }\r\n\r\n    public get configuredIfThenElseStatement(): IConfiguredIfThenElseStatement {\r\n        return this.statementModel as IConfiguredIfThenElseStatement;\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n\r\n        if (this.configuredIfThenElseStatement?.IfExpressions.length > 0) {\r\n            this.configuredIfThenElseStatement.IfExpressions[0].isSelectable = this.configuredIfThenElseStatement.isSelectable;\r\n\r\n            if (this.configuredIfThenElseStatement.createdFromIfDrop === true) {\r\n                this.configuredIfThenElseStatement.IfExpressions[0].createdFromIfDrop = true;\r\n            }\r\n        }\r\n\r\n        if (this.configuredIfThenElseStatement?.elseStatements.length > 0) {\r\n            this.configuredIfThenElseStatement.elseStatements[0].isSelectable = this.configuredIfThenElseStatement.isSelectable;\r\n\r\n            if (this.configuredIfThenElseStatement.createdFromIfDrop === true) {\r\n                this.configuredIfThenElseStatement.elseStatements[0].createdFromIfDrop = true;\r\n            }\r\n        }\r\n\r\n        if (this.configuredIfThenElseStatement?.thenStatements.length > 0) {\r\n            this.configuredIfThenElseStatement.thenStatements[0].isSelectable = this.configuredIfThenElseStatement.isSelectable;\r\n\r\n            if (this.configuredIfThenElseStatement.createdFromIfDrop === true) {\r\n                this.configuredIfThenElseStatement.thenStatements[0].createdFromIfDrop = true;\r\n            }\r\n        }\r\n\r\n        if (this.configuredIfThenElseStatement?.createdFromIfDrop !== true && this.configuredIfThenElseStatement?.isSelectable) {\r\n            (this.rootElement.nativeElement.querySelector('.if-then-else-container') as HTMLElement)?.focus();\r\n        }\r\n\r\n        this.qitConfiguration = (this.rulePluginService.getStatementConfiguration(this.configuredIfThenElseStatement) as IStatementConfiguration).qitConfig;\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n    }\r\n\r\n    getFromResx = (resourceName: string, key: string) => this.resourceService.getFromResx(resourceName, key);\r\n\r\n    unfocusAll(event: Event): boolean {\r\n        if ((event.target as HTMLElement).parentElement.parentElement.classList.contains('pointer-events-none')) {\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n            event.cancelBubble = true;\r\n\r\n            this.selService.setSelection([], 'rule');\r\n\r\n            //tab out from selected element.\r\n            //.rules-heading has tabindex = '-1' --> important\r\n            (document.querySelector('.rules-container .rules-heading') as HTMLElement)?.focus();\r\n\r\n            event.stopImmediatePropagation();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    onDragHighlightCheck(data: { area: string; direction: string }): boolean {\r\n        if (this.dragDropService.hasItem('ruleDesignerItem')) {\r\n            const dragDropSource = (<IConfiguredStatement | IItemConfiguration>this.dragDropService.peekItem('ruleDesignerItem').getSource());\r\n            let dragDropItem = {} as IConfiguredStatement;\r\n\r\n            if (this.rulePluginService.isStatementPlugin(dragDropSource)) {\r\n                dragDropItem = this.rulePluginService.createStatement((<IItemConfiguration>dragDropSource).name);\r\n            }\r\n            else if (this.rulePluginService.isConfiguredStatement(dragDropSource)) {\r\n                dragDropItem = <IConfiguredStatement>dragDropSource;\r\n            }\r\n\r\n            const ifThenElseStatement = <IConfiguredIfThenElseStatement>dragDropItem;\r\n            const isStatementExist = !isUndefinedOrNull(ifThenElseStatement.elseStatements) && ifThenElseStatement.elseStatements.length < 1;\r\n            const isDirectiveExist = (!isUndefinedOrNull(ifThenElseStatement.directive)\r\n                && ifThenElseStatement.directive.indexOf('statement') > -1\r\n                && !this.checkIfDroppedItemNotParent(this.configuredIfThenElseStatement, dragDropItem));\r\n\r\n            switch (data.area) {\r\n                case 'if':\r\n                    switch (data.direction) {\r\n                        case 'in':\r\n                            if (this.rulePluginService.isExpressionPlugin(dragDropSource)\r\n                                || this.rulePluginService.isConfiguredExpression(dragDropSource))\r\n                            {this.ifBlockHover = true;}\r\n                            break;\r\n                        case 'out': this.ifBlockHover = false;\r\n                            break;\r\n                    }\r\n                    break;\r\n                case 'then':\r\n                    switch (data.direction) {\r\n                        case 'in':\r\n                            if ((this.configuredIfThenElseStatement.thenStatements.length < 1 || isStatementExist) && isDirectiveExist)\r\n                            {this.thenBlockHover = true;}\r\n                            break;\r\n                        case 'out': this.thenBlockHover = false;\r\n                            break;\r\n                    }\r\n                    break;\r\n                case 'else':\r\n                    switch (data.direction) {\r\n                        case 'in':\r\n                            if ((this.configuredIfThenElseStatement.elseStatements.length < 1 || isStatementExist) && isDirectiveExist)\r\n                            {this.elseBlockHover = true;}\r\n\r\n                            break;\r\n                        case 'out': this.elseBlockHover = false;\r\n                            break;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Drop onto the if element\r\n     */\r\n    onIfDrop(): void {\r\n        this.ifBlockHover = false;\r\n        this.addDroppedExpressionItem();\r\n    }\r\n\r\n    /**\r\n     * Drop onto the then element\r\n     */\r\n    onThenDrop(): void {\r\n        this.thenBlockHover = false;\r\n        this.addDroppedStatementItem('then');\r\n    }\r\n\r\n    /**\r\n     * Drop onto the else element\r\n     */\r\n    onElseDrop(): void {\r\n        this.elseBlockHover = false;\r\n        this.addDroppedStatementItem('else');\r\n    }\r\n\r\n    private checkIfDroppedItemNotParent(currentItem: IConfiguredStatement, droppedItem: IConfiguredStatement): boolean {\r\n        const currentItemParent: IConfiguredStatement = currentItem.getLogicalParentModel<IConfiguredStatement>();\r\n\r\n        if (droppedItem?.getReference) {\r\n            if (currentItemParent && currentItemParent.instanceOf && currentItemParent.instanceOf(sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredStatement.implementor)) {\r\n                const droppedItemReference = droppedItem.getReference();\r\n                if (currentItemParent.getReference() === droppedItemReference || currentItem.getReference() === droppedItemReference) {\r\n                    return true;\r\n                }\r\n\r\n                if (this.checkIfDroppedItemNotParent(currentItemParent, droppedItem)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private addDroppedStatementItem(block: string) {\r\n        if (this.dragDropService.hasItem('ruleDesignerItem')) {\r\n            let droppedData: IItemConfiguration | IConfiguredStatement = {};\r\n            let configuredBlockData: IConfiguredStatement = null;\r\n            droppedData = (<IItemConfiguration>this.dragDropService.getItem('ruleDesignerItem').getSource());\r\n\r\n            if ((<IConfiguredStatement>droppedData).getReference) {\r\n                if (this.configuredIfThenElseStatement.getReference() === (<IConfiguredStatement>droppedData).getReference()) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (this.checkIfDroppedItemNotParent(this.configuredIfThenElseStatement, <IConfiguredStatement>droppedData)) {\r\n                return;\r\n            }\r\n\r\n            if (this.rulePluginService.isConfiguredStatement(droppedData)) {\r\n                configuredBlockData = (<IConfiguredStatement>droppedData).clone();\r\n            } else if (this.rulePluginService.isStatementPlugin(droppedData)) {\r\n                const itemName: string = (<IItemConfiguration>droppedData).name;\r\n                configuredBlockData = <IConfiguredStatement>this.rulePluginService.createStatement(itemName);\r\n            }\r\n\r\n            if (!isUndefinedOrNull(configuredBlockData)) {\r\n                if (block === 'then') {\r\n                    if (IfThenElseStatementComponent.ALLOW_MULTIPLE_STATEMENTS ||\r\n                        (!IfThenElseStatementComponent.ALLOW_MULTIPLE_STATEMENTS &&\r\n                            (!(this.configuredIfThenElseStatement.thenStatements.length > 0) ||\r\n                            (!isUndefinedOrNull((<IConfiguredIfThenElseStatement>configuredBlockData).elseStatements) &&\r\n                            (<IConfiguredIfThenElseStatement>configuredBlockData).elseStatements.length < 1)))) {\r\n\r\n                        if (!IfThenElseStatementComponent.ALLOW_MULTIPLE_STATEMENTS &&\r\n                            this.configuredIfThenElseStatement.thenStatements.length > 0 &&\r\n                            (!isUndefinedOrNull((<IConfiguredIfThenElseStatement>configuredBlockData).elseStatements) &&\r\n                            (<IConfiguredIfThenElseStatement>configuredBlockData).elseStatements.length < 1)) {\r\n\r\n                            let clonedExpression: any = this.configuredIfThenElseStatement.thenStatements[0].clone();\r\n                            clonedExpression.createdFromIfDrop = true;\r\n\r\n                            if (!!(<IConfiguredStatement>droppedData).getReference) {\r\n                                if (this.checkIfIfThenElseStatementIntheSameBranch(this.configuredIfThenElseStatement, <IConfiguredStatement>droppedData)) {\r\n                                    if (clonedExpression.directive === StatementDirectives.ifThenElse) {\r\n                                        if (clonedExpression.thenStatements.length > 0) {\r\n                                            (<any>this.configuredIfThenElseStatement.getRoot()).findItem((<IConfiguredStatement>droppedData).getReference()).removeFromModelArray();\r\n                                            if (this.configuredIfThenElseStatement.thenStatements.length > 0) {\r\n                                                clonedExpression = this.configuredIfThenElseStatement.thenStatements[0].clone();\r\n                                            } else {\r\n                                                clonedExpression = null;\r\n                                            }\r\n                                        } else {\r\n                                            clonedExpression = null;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            if (clonedExpression !== null) {\r\n                                (<IConfiguredIfThenElseStatement>configuredBlockData).elseStatements.push(clonedExpression);\r\n                            }\r\n\r\n                            this.configuredIfThenElseStatement.thenStatements.splice(0, this.configuredIfThenElseStatement.thenStatements.length);\r\n                            this.configuredIfThenElseStatement.thenStatements.push(configuredBlockData);\r\n                            if ((<IConfiguredStatement>droppedData).instanceOf && (<IConfiguredStatement>droppedData).instanceOf(sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredStatement.implementor)) {\r\n                                (<IConfiguredStatement>droppedData).removeFromModelArray();\r\n                            }\r\n                        } else {\r\n                            if (!!(<any>configuredBlockData).elseStatements && (<IConfiguredIfThenElseStatement>configuredBlockData).elseStatements.length > 0) {\r\n                                (<any>(<IConfiguredIfThenElseStatement>configuredBlockData).elseStatements[0]).createdFromIfDrop = true;\r\n                            }\r\n                            if (!!(<any>configuredBlockData).thenStatements && (<IConfiguredIfThenElseStatement>configuredBlockData).thenStatements.length > 0) {\r\n                                (<any>(<IConfiguredIfThenElseStatement>configuredBlockData).thenStatements[0]).createdFromIfDrop = true;\r\n                            }\r\n                            if (!!(<any>configuredBlockData).IfExpressions && (<IConfiguredIfThenElseStatement>configuredBlockData).IfExpressions.length > 0) {\r\n                                (<any>(<IConfiguredIfThenElseStatement>configuredBlockData).IfExpressions[0]).createdFromIfDrop = true;\r\n                            }\r\n                            this.configuredIfThenElseStatement.thenStatements.push(configuredBlockData);\r\n                            if ((<IConfiguredStatement>droppedData).instanceOf && (<IConfiguredStatement>droppedData).instanceOf(sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredStatement.implementor)) {\r\n                                (<IConfiguredStatement>droppedData).removeFromModelArray();\r\n                            }\r\n                        }\r\n                    }\r\n                } else if (block === 'else') {\r\n                    if (IfThenElseStatementComponent.ALLOW_MULTIPLE_STATEMENTS ||\r\n                        (!IfThenElseStatementComponent.ALLOW_MULTIPLE_STATEMENTS &&\r\n                            (!(this.configuredIfThenElseStatement.elseStatements.length > 0) ||\r\n                            (!isUndefinedOrNull((<IConfiguredIfThenElseStatement>configuredBlockData).elseStatements) &&\r\n                            (<IConfiguredIfThenElseStatement>configuredBlockData).elseStatements.length < 1)))) {\r\n\r\n                        if (!IfThenElseStatementComponent.ALLOW_MULTIPLE_STATEMENTS &&\r\n                            this.configuredIfThenElseStatement.elseStatements.length > 0 &&\r\n                            (!isUndefinedOrNull((<IConfiguredIfThenElseStatement>configuredBlockData).elseStatements) &&\r\n                            (<IConfiguredIfThenElseStatement>configuredBlockData).elseStatements.length < 1)) {\r\n\r\n                            let clonedExpression: any = this.configuredIfThenElseStatement.elseStatements[0].clone();\r\n                            clonedExpression.createdFromIfDrop = true;\r\n\r\n                            if (!!(<IConfiguredStatement>droppedData).getReference) {\r\n                                if (this.checkIfIfThenElseStatementIntheSameBranch(this.configuredIfThenElseStatement, <IConfiguredStatement>droppedData)) {\r\n                                    if (clonedExpression.directive === StatementDirectives.ifThenElse) {\r\n                                        if (clonedExpression.elseStatements.length > 0) {\r\n                                            (<any>this.configuredIfThenElseStatement.getRoot()).findItem((<IConfiguredStatement>droppedData).getReference()).removeFromModelArray();\r\n                                            clonedExpression = this.configuredIfThenElseStatement.elseStatements[0].clone();\r\n                                        } else {\r\n                                            clonedExpression = null;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            if (clonedExpression !== null) {\r\n                                (<IConfiguredIfThenElseStatement>configuredBlockData).elseStatements.push(clonedExpression);\r\n                            }\r\n\r\n                            this.configuredIfThenElseStatement.elseStatements.splice(0, this.configuredIfThenElseStatement.elseStatements.length);\r\n\r\n                            this.configuredIfThenElseStatement.elseStatements.push(configuredBlockData);\r\n                            if ((<IConfiguredStatement>droppedData).instanceOf && (<IConfiguredStatement>droppedData).instanceOf(sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredStatement.implementor)) {\r\n                                (<IConfiguredStatement>droppedData).removeFromModelArray();\r\n                            }\r\n                        } else {\r\n                            if (!!(<any>configuredBlockData).elseStatements && (<IConfiguredIfThenElseStatement>configuredBlockData).elseStatements.length > 0) {\r\n                                (<any>(<IConfiguredIfThenElseStatement>configuredBlockData).elseStatements[0]).createdFromIfDrop = true;\r\n                            }\r\n                            if (!!(<any>configuredBlockData).thenStatements && (<IConfiguredIfThenElseStatement>configuredBlockData).thenStatements.length > 0) {\r\n                                (<any>(<IConfiguredIfThenElseStatement>configuredBlockData).thenStatements[0]).createdFromIfDrop = true;\r\n                            }\r\n                            if (!!(<any>configuredBlockData).IfExpressions && (<IConfiguredIfThenElseStatement>configuredBlockData).IfExpressions.length > 0) {\r\n                                (<any>(<IConfiguredIfThenElseStatement>configuredBlockData).IfExpressions[0]).createdFromIfDrop = true;\r\n                            }\r\n\r\n                            this.configuredIfThenElseStatement.elseStatements.push(configuredBlockData);\r\n                            if ((<IConfiguredStatement>droppedData).instanceOf && (<IConfiguredStatement>droppedData).instanceOf(sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredStatement.implementor)) {\r\n                                (<IConfiguredStatement>droppedData).removeFromModelArray();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkIfIfThenElseStatementIntheSameBranch(addedTo: IConfiguredIfThenElseStatement, addedExpression: IConfiguredStatement) {\r\n        let continueCheck = true;\r\n\r\n        while (continueCheck) {\r\n            if (addedExpression.getReference() === addedTo.getReference()) {\r\n                return true;\r\n            }\r\n\r\n            continueCheck = addedExpression.directive === StatementDirectives.ifThenElse;\r\n\r\n            addedExpression = addedExpression.getLogicalParentModel();\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private addDroppedExpressionItem() {\r\n        if (this.dragDropService.hasItem('ruleDesignerItem')) {\r\n            const droppedData = this.dragDropService.getItem('ruleDesignerItem').getSource() as IConfiguredExpression;\r\n\r\n            //if expression item\r\n            if (this.rulePluginService.isConfiguredExpression(droppedData)) {\r\n                const droppedExpression: IConfiguredExpression = droppedData;\r\n                const droppedExpressionParent = droppedExpression.getParentModel<sourceCode.k2Designer.objectModel.core.model.IModelArray<IConfiguredExpression>>();\r\n                const droppedExpressionIndex = droppedExpressionParent.indexOf(droppedExpression);\r\n                const clonedDroppedExpression = droppedExpression.clone();\r\n\r\n                //when if block is currently empty\r\n                if (this.configuredIfThenElseStatement.IfExpressions && this.configuredIfThenElseStatement.IfExpressions.length === 0) {\r\n                    //create group\r\n                    const configuredBlockData = this.rulePluginService.createExpression('GroupExpression') as IConfiguredComplexLogicalGroupExpression;\r\n                    configuredBlockData.expressions.push(clonedDroppedExpression);\r\n                    //add to if expressions\r\n                    this.configuredIfThenElseStatement.IfExpressions.push(configuredBlockData);\r\n                } else {//I am in a group\r\n                    //do nothing if was just dropped on its same parent\r\n                    if ((<IConfiguredComplexLogicalGroupExpression>this.configuredIfThenElseStatement.IfExpressions[0]).expressions.indexOf(droppedExpression) > -1) {\r\n                        return;\r\n                    }\r\n                    //add operator\r\n                    (<IConfiguredComplexLogicalGroupExpression>this.configuredIfThenElseStatement.IfExpressions[0]).expressions.push(\r\n                        this.rulePluginService.createOperator('GroupBooleanOperator'));\r\n                    //add clone of block\r\n                    (<IConfiguredComplexLogicalGroupExpression>this.configuredIfThenElseStatement.IfExpressions[0]).expressions.push(clonedDroppedExpression);\r\n                }\r\n                //remove original block\r\n                this.deleteExpression(droppedExpression);\r\n            }\r\n            //if toolbar dropped item / expression plugin\r\n            else if (this.rulePluginService.isExpressionPlugin(droppedData)) {\r\n                const itemName: string = (droppedData as any).name;\r\n\r\n                const configuredBlockData = <IConfiguredExpression>this.rulePluginService.createExpression(itemName);\r\n\r\n                if (this.configuredIfThenElseStatement.IfExpressions && this.configuredIfThenElseStatement.IfExpressions.length === 0) {\r\n                    //We create a new group expression and then add the relevant new expression to its expression array\r\n                    const configuredBlockData = this.rulePluginService.createExpression('GroupExpression') as IConfiguredComplexLogicalGroupExpression;\r\n                    configuredBlockData.expressions.push(<IConfiguredExpression>this.rulePluginService.createExpression(itemName));\r\n\r\n                    this.configuredIfThenElseStatement.IfExpressions.push(configuredBlockData);\r\n                }\r\n                else {\r\n                    //We create a new operator\r\n                    const configuredOperator = this.rulePluginService.createOperator('GroupBooleanOperator') as IConfiguredExpression;\r\n                    //We create a new expression, depending on the name of the component\r\n                    const configuredBlockData = <IConfiguredExpression>this.rulePluginService.createExpression(itemName) as IConfiguredExpression;\r\n\r\n                    (<IConfiguredComplexLogicalGroupExpression>this.configuredIfThenElseStatement.IfExpressions[0]).expressions.push(configuredOperator);\r\n                    (<IConfiguredComplexLogicalGroupExpression>this.configuredIfThenElseStatement.IfExpressions[0]).expressions.push(configuredBlockData);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private deleteExpression(k2ObjectModel: IConfiguredExpression) {\r\n        const expressionParent = k2ObjectModel.getParentModel<sourceCode.k2Designer.objectModel.core.model.IModelArray<IConfiguredExpression>>();\r\n        const index = expressionParent.indexOf(<any>k2ObjectModel);\r\n\r\n        if (expressionParent.length < 2) {\r\n            (<any>k2ObjectModel.getLogicalParentModel()).removeFromModelArray();\r\n        }\r\n        else {\r\n            k2ObjectModel.removeFromModelArray();\r\n            const groupOpertorOf = function(index: number, expressions: sourceCode.k2Designer.objectModel.core.model.IModelArray<IConfiguredExpression>) {\r\n                if (index > expressions.length - 1) {\r\n                    index -= 1;\r\n                }\r\n                return expressions[index].directive === 'k2-group-boolean-operator-expression' ? expressions[index] : null;\r\n            };\r\n\r\n            const operatorToBeRemove: any = groupOpertorOf(index, expressionParent);\r\n            if (operatorToBeRemove) {\r\n                operatorToBeRemove.removeFromModelArray();\r\n            }\r\n\r\n            const grpExpression: any = <any>expressionParent.getLogicalParentModel();\r\n            if (grpExpression.directive === grpExpression.getLogicalParentModel().directive && grpExpression.expressions.length === 1) {\r\n                const k2GroupExpressionModel = grpExpression.getParentModel();\r\n                const index1 = k2GroupExpressionModel.indexOf(grpExpression);\r\n                const expression = expressionParent[0].clone();\r\n                k2GroupExpressionModel.getLogicalParentModel().expressions.splice(index1, 1, expression);\r\n            }\r\n        }\r\n    }\r\n\r\n    getDragImage = (): HTMLElement => {\r\n        const result = super.getDragImage();\r\n        result.classList.add('ifthen');\r\n        return result;\r\n    };\r\n\r\n    onDragStart(): void {  //hide block to give appearance of dragging\r\n        const element = this.rootElement.nativeElement.querySelector('> div') as HTMLElement;\r\n        if (!!element) {\r\n            element.style.opacity = '0';\r\n            element.style.transition = 'opacity 0s';\r\n        }\r\n    }\r\n\r\n    onDragStop(): void {\r\n        const element = this.rootElement.nativeElement.querySelector('> div') as HTMLElement;\r\n        if (!!element) {\r\n            element.style.opacity = '';\r\n            element.style.transition = '';\r\n        }\r\n    }\r\n\r\n\r\n\r\n    addQitExpressionItem(componentName: string) {\r\n        if (this.configuredIfThenElseStatement.IfExpressions && this.configuredIfThenElseStatement.IfExpressions.length === 0) {\r\n            this.undoRedoService.addUndoMarker('--add rules expression item--');\r\n\r\n            //We create a new group expression and then add the relevant new expression to its expression array\r\n            const configuredBlockData = this.rulePluginService.createExpression('GroupExpression') as IConfiguredComplexLogicalGroupExpression;\r\n            const configuredExpression = this.rulePluginService.createExpression(componentName) as IConfiguredExpression;\r\n\r\n            configuredBlockData.expressions.push(configuredExpression);\r\n            this.configuredIfThenElseStatement.IfExpressions.push(configuredBlockData);\r\n        }\r\n    }\r\n\r\n    addQitStatementItem(componentName: string, block: string) {\r\n        this.undoRedoService.addUndoMarker('--add rules statement item--');\r\n\r\n        //We create a new statement, depending on the name of the component\r\n        const configuredBlockData = this.rulePluginService.createStatement(componentName) as IConfiguredStatement;\r\n\r\n        if (block === 'then') {\r\n            this.configuredIfThenElseStatement.thenStatements.push(configuredBlockData);\r\n        }\r\n        else if (block === 'else') {\r\n            this.configuredIfThenElseStatement.elseStatements.push(configuredBlockData);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Keypress handling\r\n     *\r\n     * @param event\r\n     * @returns\r\n     */\r\n    @HostListener('keydown', ['$event'])\r\n    public onKeyPress(event: KeyboardEvent): void {  // tab loop and keyboard accessibility\r\n        const $currentFocus = event.target as HTMLElement; //get current focused item\r\n\r\n        event.stopPropagation(); // prevent k2 text box from stealing focus\r\n        event.preventDefault();  // prevent tab from getting overridden\r\n\r\n        switch (event.keyCode) {\r\n        // enter or right\r\n            case 13:\r\n            case 39:\r\n            //if on an if then else block entire focus\r\n                if ($currentFocus.classList.contains('if-then-else-container')) {\r\n                //first tabindex within the if block.\r\n                    ($currentFocus.querySelector('[tabindex]:first') as HTMLElement)?.focus();\r\n\r\n                //if a qit icon has focus\r\n                } else if ($currentFocus.classList.contains('qit-icon')) {\r\n                //mimic clicking icon to create new element\r\n                    $currentFocus.querySelector('span').click();\r\n                } else {\r\n                //otherwise just try to focus the next inside element.\r\n                    ($currentFocus.nextElementSibling.querySelector('[tabindex]:first') as HTMLElement)?.focus();  //finds first tab index in child\r\n                }\r\n                break;\r\n\r\n            //space bar\r\n            case 32:\r\n                $currentFocus?.click(); //select by mocking a click\r\n                $currentFocus?.focus();  //refocus\r\n                break;\r\n\r\n            // backspace, delete\r\n            case 8:\r\n            case 46:\r\n                if ($currentFocus.classList.contains('if-then-else-container') || $currentFocus.classList.contains('rules-ifBlock')) {\r\n                //if container then remove / If block / then block / else block\r\n                    this.undoRedoService.addUndoMarker('-- delete ifthenelse statement --');\r\n                    this.delete();\r\n                    //focus up to closest parent\r\n                    ($currentFocus.parentElement.closest('[tabindex]') as HTMLElement)?.focus();\r\n                }\r\n                break;\r\n\r\n            //escape\r\n            case 27:\r\n            //focus up to closest parent\r\n                ($currentFocus.parentElement.closest('[tabindex]') as HTMLElement)?.focus();\r\n                break;\r\n\r\n            //tab\r\n            case 9:\r\n            //if main block then focus toolbox\r\n                if ($currentFocus.classList.contains('rules-ifBlock')) {\r\n                    if (event.shiftKey) {\r\n                        if (!!$currentFocus.parentElement.previousElementSibling.querySelector('.rules-ifBlock:first')) {  //if there is a next sibling\r\n                            ($currentFocus.parentElement.previousElementSibling.querySelector('.rules-ifBlock:first') as HTMLElement)?.focus();\r\n                        } else {//loop back to parent\r\n                            ($currentFocus.parentElement.parentElement.querySelector('.rules-ifBlock:last') as HTMLElement)?.focus();\r\n                        }\r\n                    } else {\r\n                        if (!!$currentFocus.parentElement.nextElementSibling.querySelector('.rules-ifBlock:first')) {  //if there is a next sibling\r\n                            ($currentFocus.parentElement.nextElementSibling.querySelector('.rules-ifBlock:first') as HTMLElement)?.focus();\r\n                        } else {//loop back to parent\r\n                            ($currentFocus.parentElement.parentElement.querySelector('.rules-ifBlock:first') as HTMLElement)?.focus();\r\n                        }\r\n                    }\r\n                } else if ($currentFocus.classList.contains('qit-icon')) { //tab across qit icons\r\n                    if (!!$currentFocus.nextElementSibling) {\r\n                        ($currentFocus.nextElementSibling as HTMLElement)?.focus();\r\n                    } else {\r\n                        ($currentFocus.previousElementSibling as HTMLElement)?.focus();\r\n                    }\r\n                }\r\n                break;\r\n\r\n            default:\r\n            // handle undo/redo and others\r\n                super.onKeyPress(event);\r\n                break;\r\n        }\r\n    }\r\n}\r\n","<div class=\"if-then-else-container animate-this-rule-container fadeMeIn pointer-events-none\"\r\n     [ngClass]=\"{'selected' : isSelected}\"\r\n     tabindex=\"0\"\r\n     (mousedown)=\"unfocusAll($event)\">\r\n    <div class=\"rules-flexChild rules-rowParent\">\r\n        <div class=\"rules-flexChild rules-columnParent rules-ifBlock if-only\"\r\n             K2Draggable\r\n             (k2Dragstart)=\"onDragStart\"\r\n             (k2Dragend)=\"onDragStop\"\r\n             k2Dragtype=\"ruleDesignerItem\"\r\n             [k2Dragitem]=\"getDragItem\"\r\n             [k2Dragcontext]=\"configuredIfThenElseStatement\"\r\n             [k2Dragghost]=\"getDragImage\"\r\n             tabindex=\"0\"\r\n             (click)=\"setSelected(true); $event.stopPropagation();\">\r\n            <svg class=\"leftsvg\" height=\"34\" width=\"80\" [ngClass]=\"{'hover': ifBlockHover}\">\r\n                <g transform=\"translate(.5, .5)\">\r\n                    <path d=\"M0,2 L0,6 a2,2 0 0,0 1,1 L9,15 a2,2 0 0,1 0,3 L1,26 a2,2 0 0,1 -1,1 L0,31 a2,2 0 0,0 2,2 L77, 33 a2,2 0 0,0 2,-2 L79, 2 a2,2 0 0,0 -2,-2 L2, 0 a2,2 0 0,0 -2,2\" stroke-linejoin=\"round\"></path>\r\n                </g>\r\n            </svg>\r\n            <div class=\"rules-flexChild rules-colHeader if-header is-if\"\r\n                 [ngClass]=\"{'hover': ifBlockHover}\"\r\n                 (mouseleave)=\"onDragHighlightCheck({area:'if',direction:'out'})\"\r\n                 K2Droppable\r\n                 (k2Dropped)=\"onIfDrop()\"\r\n                 k2Droptypes=\"ruleDesignerItem smartField\"\r\n                 [k2WillBubbleToGrandparent]=\"true\"\r\n                 (k2DragEnter)=\"onDragHighlightCheck({area:'if',direction:'in'})\"\r\n                 (k2DragLeave)=\"onDragHighlightCheck({area:'if',direction:'out'})\">{{ getFromResx('RulesDesigner', 'general_RuleDeisgner_If')|async }}</div>\r\n            <div class=\"rules-flexChild if-connector\"></div>\r\n        </div>\r\n        <div class=\"rules-flexChild rules-content is-if-rule\"\r\n             K2Droppable\r\n             (k2Dropped)=\"onIfDrop()\"\r\n             k2Droptypes=\"ruleDesignerItem smartField configuredSmartField\"\r\n             [k2WillBubbleToGrandparent]=\"true\">\r\n            <div *ngIf=\"configuredIfThenElseStatement?.IfExpressions.length <= 0\" class=\"fadeScale\">\r\n                <div class=\"qit-toolbar qit-expression-toolbar\">\r\n                    <div class=\"qit-icon qit-left\"\r\n                         tabindex=\"0\">\r\n                        <span class=\"icon icon-set-blocks icon-size16 {{qitConfiguration?.expressions.left.icon}}\"\r\n                              [ngClass]=\"{'hover' : hoverIfQITLeft}\"\r\n                              (mouseenter)=\"hoverIfQITLeft = true\"\r\n                              (mouseleave)=\"hoverIfQITLeft = false\"\r\n                              (click)=\"addQitExpressionItem(qitConfiguration?.expressions.left.name); $event.stopPropagation();\"></span>\r\n                    </div>\r\n                    <div class=\"qit-icon qit-right\"\r\n                         tabindex=\"0\"\r\n                         *ngIf=\"rulePluginService.contextHandler.name !== 'StartRule' && rulePluginService.contextHandler.name !== 'ConditionalRule' \">\r\n                        <span class=\"icon icon-set-blocks icon-size16 {{qitConfiguration?.expressions.right.icon}}\"\r\n                              [ngClass]=\"{'hover' : hoverIfQITRight}\"\r\n                              (mouseenter)=\"hoverIfQITRight = true\"\r\n                              (mouseleave)=\"hoverIfQITRight = false\"\r\n                              (click)=\"addQitExpressionItem(qitConfiguration?.expressions.right.name); $event.stopPropagation();\"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <k2-group-expression [nested]=\"true\"\r\n                                 [alternateColour]=\"false\"\r\n                                 *ngIf=\"configuredIfThenElseStatement?.IfExpressions.length && configuredIfThenElseStatement?.IfExpressions[0]\"\r\n                                 [expressionModel]=\"configuredIfThenElseStatement?.IfExpressions[0]\"></k2-group-expression>\r\n        </div>\r\n    </div>\r\n    <div class=\"rules-flexChild rules-rowParent then-block-search\">\r\n        <div class=\"rules-flexChild rules-columnParent rules-ifBlock then-else\"\r\n             K2Draggable\r\n             k2Dragtype=\"ruleDesignerItem\"\r\n             [k2Dragitem]=\"getDragItem\"\r\n             [k2Dragcontext]=\"configuredIfThenElseStatement\"\r\n             [k2Dragghost]=\"getDragImage\"\r\n             tabindex=\"0\"\r\n             (click)=\"setSelected(true); $event.stopPropagation();\">\r\n            <div class=\"rules-flexChild rules-colHeader if-header is-then has-arrow then-block-drop-area\"\r\n                 [ngClass]=\"{'hover': thenBlockHover}\"\r\n                 (mouseenter)=\"onDragHighlightCheck({area:'then',direction:'in'})\"\r\n                 K2Droppable\r\n                 (k2Dropped)=\"onThenDrop()\"\r\n                 k2Droptypes=\"ruleDesignerItem ruleDesignerItem smartField\"\r\n                 [k2WillBubbleToGrandparent]=\"true\"\r\n                 (k2DragEnter)=\"onDragHighlightCheck({area:'then',direction:'in'})\"\r\n                 (k2DragLeave)=\"onDragHighlightCheck({area:'then',direction:'out'})\">{{ getFromResx('RulesDesigner', 'general_RuleDeisgner_Then')|async }}</div>\r\n            <div class=\"rules-flexChild if-connector\"></div>\r\n        </div>\r\n        <div class=\"rules-flexChild rules-content\"\r\n             data-statementtype=\"thenStatements\">\r\n            <div *ngIf=\"configuredIfThenElseStatement?.thenStatements.length <= 0\"\r\n                 class=\"fadeScale\">\r\n                <div class=\"qit-toolbar\">\r\n                    <div class=\"qit-icon qit-left\"\r\n                         tabindex=\"0\">\r\n                        <span class=\"icon icon-set-blocks icon-size16 {{qitConfiguration?.statements.left.icon}}\"\r\n                              [ngClass]=\"{'hover' : hoverThenQITLeft}\"\r\n                              (mouseenter)=\"hoverThenQITLeft = true\"\r\n                              (mouseleave)=\"hoverThenQITLeft = false\"\r\n                              (click)=\"addQitStatementItem(qitConfiguration?.statements.left.name, 'then')\"></span>\r\n                    </div>\r\n                    <div class=\"qit-icon qit-right\"\r\n                         tabindex=\"0\">\r\n                        <span class=\"icon icon-set-blocks icon-size16 {{qitConfiguration?.statements.right.icon}}\"\r\n                              [ngClass]=\"{'hover' : hoverThenQITRight}\"\r\n                              (mouseenter)=\"hoverThenQITRight = true\"\r\n                              (mouseleave)=\"hoverThenQITRight = false\"\r\n                              (click)=\"addQitStatementItem(qitConfiguration?.statements.right.name, 'then')\"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <k2-rule-statement-block *ngFor=\"let item of configuredIfThenElseStatement?.thenStatements\"\r\n                                     class=\"ruleFadeIn\"\r\n                                     [statementModel]=\"[item]\"></k2-rule-statement-block>\r\n        </div>\r\n    </div>\r\n    <div class=\"rules-flexChild rules-rowParent else-block-search\">\r\n        <div class=\"rules-flexChild rules-columnParent rules-ifBlock then-else pointer-events-none else-block\"\r\n             K2Draggable\r\n             k2Dragtype=\"ruleDesignerItem\"\r\n             [k2Dragitem]=\"getDragItem\"\r\n             [k2Dragcontext]=\"configuredIfThenElseStatement\"\r\n             [k2Dragghost]=\"getDragImage\"\r\n             tabindex=\"0\"\r\n             (click)=\"setSelected($event); $event.stopPropagation();\"\r\n             (mousedown)=\"unfocusAll($event);\">\r\n            <div class=\"rules-flexChild rules-colHeader if-header is-else has-arrow else-block-drop-area pointer-events-all\"\r\n                 [ngClass]=\"{'hover': elseBlockHover}\"\r\n                 (mouseenter)=\"onDragHighlightCheck({area:'else',direction:'in'})\"\r\n                 (mouseleave)=\"onDragHighlightCheck({area:'else', direction:'out'})\"\r\n                 K2Droppable\r\n                 (k2Dropped)=\"onElseDrop()\"\r\n                 k2Droptypes=\"ruleDesignerItem ruleDesignerItem smartField\"\r\n                 [k2WillBubbleToGrandparent]=\"true\"\r\n                 (k2DragEnter)=\"onDragHighlightCheck({area:'else',direction:'in'})\"\r\n                 (k2DragLeave)=\"onDragHighlightCheck({area:'else', direction:'out'})\">{{ getFromResx('RulesDesigner', 'general_RuleDeisgner_Else')|async }}</div>\r\n            <div class=\"rules-flexChild else-connector\"></div>\r\n        </div>\r\n        <div class=\"rules-flexChild rules-content\"\r\n             data-statementtype=\"elseStatements\">\r\n            <div *ngIf=\"configuredIfThenElseStatement?.elseStatements.length <= 0\"\r\n                 class=\"fadeScale\">\r\n                <div k2-scrollbar-focus\r\n                     class=\"qit-toolbar\">\r\n                    <div class=\"qit-icon qit-left\"\r\n                         tabindex=\"0\">\r\n                        <span class=\"icon icon-set-blocks icon-size16 {{qitConfiguration?.statements.left.icon}}\"\r\n                              [ngClass]=\"{'hover' : hoverElseQITLeft}\"\r\n                              (mouseenter)=\"hoverElseQITLeft = true\"\r\n                              (mouseleave)=\"hoverElseQITLeft = false\"\r\n                              (click)=\"addQitStatementItem(qitConfiguration?.statements.left.name, 'else')\"></span>\r\n                    </div>\r\n                    <div class=\"qit-icon qit-right\"\r\n                         tabindex=\"0\">\r\n                        <span class=\"icon icon-set-blocks icon-size16 {{qitConfiguration?.statements.right.icon}}\"\r\n                              [ngClass]=\"{'hover' : hoverElseQITRight}\"\r\n                              (mouseenter)=\"hoverElseQITRight = true\"\r\n                              (mouseleave)=\"hoverElseQITRight = false\"\r\n                              (click)=\"addQitStatementItem(qitConfiguration?.statements.right.name, 'else')\"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <k2-rule-statement-block *ngFor=\"let item of configuredIfThenElseStatement?.elseStatements\"\r\n                                     class=\"ruleFadeIn\"\r\n                                     [statementModel]=\"[item]\"></k2-rule-statement-block>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, ElementRef, Inject, OnDestroy, OnInit } from '@angular/core';\r\nimport { DropDownComponent } from 'src/app/components/common/drop-down/drop-down.component';\r\nimport { IConfiguredOutcomeStatement } from '../../../../../types/models/rules/i-configured-outcome-statement';\r\nimport { IConfigPanelService } from '../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { ISelectionService } from '../../../../../types/services/selection/i-selection-service';\r\nimport { IValidationService } from '../../../../../types/services/validation/ivalidation.service';\r\nimport { CommandServiceToken } from '../../../../services/command/command-service-factory';\r\nimport { ConfigPanelServiceToken } from '../../../../services/config-panel/config-panel-service-factory';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../../services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from '../../../../services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../../services/validation/validation-service-factory';\r\nimport { DropDownMenuAlignment } from '../../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from '../../../../shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from '../../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { OutcomeItemNames } from '../../../../shared/enums/rules/outcome-item-names';\r\nimport { OutcomeType } from '../../../../shared/enums/rules/outcome-type';\r\nimport { RuleContextHandlerNames } from '../../../../shared/enums/rules/rule-context-handler-names';\r\nimport { RuleControlStates } from '../../../../shared/enums/rules/rule-control-states';\r\nimport { isUndefinedOrNull } from '../../../../shared/utils/general';\r\nimport { StatementBaseComponent } from '../../base/statement-base/statement-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-outcome-statement',\r\n    templateUrl: './outcome-statement.component.html',\r\n    styleUrls: ['./outcome-statement.component.less']\r\n})\r\nexport class OutcomeStatementComponent extends StatementBaseComponent implements OnInit, OnDestroy {\r\n    public /*override*/ statementModel: IConfiguredOutcomeStatement;\r\n\r\n    public dropDownHover: boolean;\r\n    public dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    public dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    public dropdownMenuItemTemplates: typeof DropdownMenuItemTemplates = DropdownMenuItemTemplates;\r\n    public getDragItemFn;\r\n    public getDragImageFn;\r\n    public outcomeType: OutcomeType;\r\n    public multipleOutcome: boolean;\r\n    public dropdownButtonSelected: boolean;\r\n    public outcomeArray: IDropDownMenuItem[];\r\n\r\n    private _rootElement: HTMLElement;\r\n    private _isVotingCustomRule: boolean;\r\n    private _isSelecting: boolean;\r\n    private _currentActivityConfig: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivityConfiguration;\r\n    private _outcomesChangedRemover: sourceCode.k2Designer.objectModel.core.model.IEventRemover;\r\n\r\n    constructor(@Inject(SelectionServiceToken) _selService: ISelectionService,\r\n        private _rulePluginSvc: RulePluginService,\r\n        @Inject(CommandServiceToken) commandService: ICommandService,\r\n        @Inject(ConfigPanelServiceToken) configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) undoRedoSvc: IUndoRedoService,\r\n        private _resourceService: ResourceService,\r\n        @Inject(ValidationServiceToken) private _validationService: IValidationService,\r\n        eventService: EventNotifierService,\r\n        private _el: ElementRef) {\r\n\r\n        super(_selService, _rulePluginSvc, commandService, configPanelService,\r\n            undoRedoSvc, eventService, _el);\r\n\r\n        this._rootElement = _el.nativeElement;\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n\r\n        this.undoRedoService.forceDisable();\r\n\r\n        this.dropDownHover = false;\r\n        this.getDragImageFn = super.getDragImage.bind(this);\r\n\r\n        this._isVotingCustomRule = false;\r\n\r\n        this.outcomeArray = [];\r\n\r\n        switch (this._rulePluginSvc.contextHandler.name) {\r\n            case RuleContextHandlerNames.DecisionRule:\r\n                this.outcomeType = OutcomeType.Decision;\r\n                this.multipleOutcome = false;\r\n                break;\r\n            case RuleContextHandlerNames.VotingCustomRule:\r\n                this.outcomeType = OutcomeType.Voting;\r\n                this._isVotingCustomRule = true;\r\n                this.multipleOutcome = false;\r\n                break;\r\n            case RuleContextHandlerNames.MergeRule:\r\n                this.outcomeType = OutcomeType.Merge;\r\n                this.multipleOutcome = false;\r\n                break;\r\n            case RuleContextHandlerNames.SplitRule:\r\n                this.outcomeType = OutcomeType.Split;\r\n                this.multipleOutcome = true;\r\n                break;\r\n            case RuleContextHandlerNames.StartRule:\r\n                this.outcomeType = OutcomeType.Start;\r\n                this.multipleOutcome = false;\r\n                break;\r\n        }\r\n\r\n        this.dropdownButtonSelected = false;\r\n\r\n        this.loadOutcomeConfiguration();\r\n\r\n        this.setupOutcomes();\r\n\r\n        this._rulePluginSvc.executeDroppedCallbacks();\r\n\r\n        this.listenToEvents();\r\n\r\n        if (this.statementModel.createdFromIfDrop !== true && this.statementModel.isSelectable) {\r\n            this._rootElement.focus();\r\n        }\r\n\r\n        this.undoRedoService.resetForceDisable();\r\n    }\r\n\r\n    ngOnChanges(changes): void {\r\n        if (changes.statementModel && changes.statementModel.selectedItems) {\r\n            this.onSelectedItemsChanged();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n        if (this._outcomesChangedRemover) {\r\n            this._outcomesChangedRemover();\r\n        }\r\n    }\r\n\r\n    getFromResx = (resourceName: string, key: string) => this._resourceService.getFromResx(resourceName, key);\r\n\r\n    private setupMergeRuleOutcomes(): void {\r\n        const mergeStatement: sourceCode.k2Designer.objectModel.workflow.configuredRules.IConfiguredMergeStatement = this.statementModel as any;\r\n        const isMergeAction: boolean = isUndefinedOrNull(mergeStatement.isMergeActionResult) ? false : mergeStatement.isMergeActionResult;\r\n\r\n        this.outcomeArray.push({\r\n            title: this._resourceService.getString('ruledesigner_outcome_expression_merge'),\r\n            key: OutcomeItemNames.Merge,\r\n            isSelected: isMergeAction === true,\r\n            additionalValueProperty: {\r\n                displayIcon: 'ic-outcomemerge'\r\n            },\r\n        });\r\n        this.outcomeArray.push(DropDownComponent.separator);\r\n        this.outcomeArray.push({\r\n            title: this._resourceService.getString('ruledesigner_outcome_expression_wait'),\r\n            key: 'wait',\r\n            isSelected: isMergeAction === false,\r\n            additionalValueProperty: {\r\n                displayIcon: 'ic-outcomewait'\r\n            },\r\n        });\r\n    }\r\n\r\n    // Sometimes when changing contexts and using undo redo, the selectedItems are cleared. This will repopulate\r\n    private onSelectedItemsChanged() {\r\n        if (!this._isSelecting) {\r\n            // if it is not selecting, and it changed, we can assume stuff's out of sync.\r\n            // no need to compare values etc.\r\n\r\n            // selectedItems is the source of truth, as that is what is updated by undo redo etc\r\n            for (let i = 0; i < this.outcomeArray.length; i++) {\r\n                let isSelected = false;\r\n                for (let j = 0; j < this.statementModel.selectedItems.length; j++) {\r\n                    if (this.statementModel.selectedItems[j].key === this.outcomeArray[i].key) {\r\n                        isSelected = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                this.outcomeArray[i].isSelected = isSelected;\r\n            }\r\n        }\r\n    }\r\n\r\n    private loadOutcomeConfiguration() {\r\n        if (this._rulePluginSvc.contextModel) {\r\n            const actConfiguration = this._rulePluginSvc.contextModel.getParentModel<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivityConfiguration>();\r\n            if (actConfiguration.instanceOf(sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.client.ClientEventConfiguration.implementor)) {\r\n                this._currentActivityConfig = actConfiguration.getParentModel<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivity>()\r\n                    .getParentModel<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivity>()\r\n                    .getParentModel<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivity>()\r\n                    .configuration;\r\n            }\r\n            else {\r\n                this._currentActivityConfig = actConfiguration;\r\n            }\r\n        }\r\n    }\r\n\r\n    private setupOutcomes(): void {\r\n        this.outcomeArray.length = 0;\r\n\r\n        if (this.outcomeType === OutcomeType.Merge) {\r\n            this.setupMergeRuleOutcomes();\r\n        }\r\n        else {\r\n            const actCnf: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivityConfiguration = this._currentActivityConfig;\r\n\r\n            if (actCnf && actCnf.outcomes) {\r\n                for (var i = 0; i < actCnf.outcomes.length; i++) {\r\n                    let isSelected = false;\r\n                    isSelected = this.statementModel.linkedOutcomeReferences.filter(function(item) {\r\n                        return item === actCnf.outcomes[i].getReference();\r\n                    }).length > 0;\r\n                    if (isSelected) {\r\n                        this.statementModel.waitForResponse = false;\r\n                    }\r\n\r\n                    let dispIcon: string;\r\n\r\n                    switch (this.outcomeType) {\r\n                        case OutcomeType.Decision:\r\n                        //Split uses the same icon as decision\r\n                        case OutcomeType.Split:\r\n                            dispIcon = 'ic-outcomedecision';\r\n                            break;\r\n                        case OutcomeType.Start:\r\n                            dispIcon = i == 0 ? 'ic-startprocess' : 'ic-dontstartprocess';\r\n                            break;\r\n                        case OutcomeType.Voting:\r\n                        default:\r\n                            dispIcon = 'ic-outcomevoting';\r\n                            break;\r\n                    }\r\n\r\n                    this.outcomeArray.push(<any>{\r\n                        title: (<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IOutcomeExtended>actCnf.outcomes[i]).inferredTitle,\r\n                        key: actCnf.outcomes[i].getReference(),\r\n                        isSelected,\r\n                        titleBinding: {\r\n                            objectReference: actCnf.outcomes[i],\r\n                            propertyName: 'inferredTitle'\r\n                        }, additionalValueProperty: {\r\n                            displayIcon: dispIcon\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            if (this._isVotingCustomRule) {\r\n                this.outcomeArray.push({\r\n                    title: this._resourceService.getString('ruledesigner_outcome_expression_waitForResponses'),\r\n                    key: 'wait_for_responses',\r\n                    isSelected: this.statementModel.waitForResponse || false,\r\n                    titleBinding: {\r\n                        objectReference: {\r\n                            inferredTitle: this._resourceService.getString('ruledesigner_outcome_expression_waitForResponses')\r\n                        },\r\n                        propertyName: 'inferredTitle'\r\n                    },\r\n                    additionalValueProperty: {\r\n                        displayIcon: 'ic-outcomewait'\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        this.refreshSelectedItems();\r\n    }\r\n\r\n    private listenToEvents(): void {\r\n        const actCnf: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IActivityConfiguration = this._currentActivityConfig;\r\n        if (actCnf && actCnf.outcomes) {\r\n            this._outcomesChangedRemover = actCnf.outcomes.listen(sourceCode.k2Designer.objectModel.core.model.EventTypes.anythingChanged, this.onOutcomesChanged.bind(this));\r\n        }\r\n    }\r\n\r\n    private onOutcomesChanged(): boolean {\r\n        this.setupOutcomes();\r\n        return true;\r\n    }\r\n\r\n    public onMenuClose(): void {\r\n        this.dropdownButtonSelected = false;\r\n    }\r\n\r\n    public setDropDownActive(): void {\r\n        this.dropdownButtonSelected = true;\r\n    }\r\n\r\n    public dropDownActive(): boolean {\r\n        return this.dropdownButtonSelected;\r\n    }\r\n\r\n    /***\r\n     * This is used to populate the current displayed item.\r\n     * */\r\n    public getSelectedItems(): sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredStatement[] {\r\n        return this.statementModel.selectedItems;\r\n    }\r\n\r\n    public onSelected(item: IDropDownMenuItem): void {\r\n        this._isSelecting = true;\r\n        let itemAdded = false;\r\n\r\n        if (item.key === OutcomeItemNames.WaitForResponse) {\r\n            const totalOutcomes = this.statementModel.linkedOutcomeReferences.length;\r\n            this.statementModel.linkedOutcomeReferences.splice(0, totalOutcomes);\r\n            this.statementModel.waitForResponse = item.isSelected;\r\n\r\n            //Deselected every dropdown Items except WaitingForResponse\r\n            const selectedOutcomesDropdownItems =\r\n                this.outcomeArray.filter(function(items) {\r\n                    return (items.isSelected === true && items.key !== OutcomeItemNames.WaitForResponse);\r\n                });\r\n\r\n            for (let i = 0; i < selectedOutcomesDropdownItems.length; i++) {\r\n                selectedOutcomesDropdownItems[i].isSelected = false;\r\n            }\r\n        }\r\n        else if (this.outcomeType === OutcomeType.Merge) {\r\n            this.statementModel.isMergeActionResult = (item.key.toLowerCase() === OutcomeItemNames.Merge);\r\n        }\r\n        else {\r\n            if (item.isSelected === true) {\r\n                if (!this.multipleOutcome) {\r\n                    this.statementModel.linkedOutcomeReferences.splice(0, this.statementModel.linkedOutcomeReferences.length); //ensure only one item can be selected\r\n\r\n                    for (let i = 0; i < this.outcomeArray.length; i++) {\r\n                        this.outcomeArray[i].isSelected = this.outcomeArray[i] === item; //not selected item = false.\r\n                    }\r\n                }\r\n\r\n                itemAdded = !!this.statementModel.linkedOutcomeReferences.find(r => r === item.key);\r\n\r\n                // ensure item is added\r\n                if (!itemAdded) {\r\n                    this.statementModel.waitForResponse = false;\r\n                    this.statementModel.linkedOutcomeReferences.push(item.key);\r\n                }\r\n            } else {//if not selected, remove item from linkedOutcomeReferences\r\n                const indexToRemove: number = this.statementModel.linkedOutcomeReferences.indexOf(item.key);\r\n                if (indexToRemove > -1)\r\n                {this.statementModel.linkedOutcomeReferences.splice(indexToRemove, 1);}\r\n            }\r\n\r\n            //Uncheck Wait For response item\r\n            const waitForResponseDropdownItem: IDropDownMenuItem = this.outcomeArray.find(i => i.key === OutcomeItemNames.WaitForResponse);\r\n            if (waitForResponseDropdownItem) {\r\n                waitForResponseDropdownItem.isSelected = false;\r\n            }\r\n        }\r\n\r\n        this.refreshSelectedItems();\r\n\r\n        this.setFocus();\r\n        this._isSelecting = false;\r\n    }\r\n\r\n    private refreshSelectedItems(): void {\r\n        this.statementModel.selectedItems.splice(0, this.statementModel.selectedItems.length);\r\n\r\n        for (let i = 0; i < this.outcomeArray.length; i++) {\r\n            if (this.outcomeArray[i].isSelected) {\r\n                this.statementModel.selectedItems.push({\r\n                    title: this.outcomeArray[i].title,\r\n                    icon: this.outcomeArray[i].additionalValueProperty.displayIcon,\r\n                    key: this.outcomeArray[i].key\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    // Sets the focus (for unit-testability)\r\n    private setFocus(): void {\r\n        this._rootElement.focus();\r\n    }\r\n\r\n    public getOutcomeItems(): IDropDownMenuItem[] {\r\n        return this.outcomeArray;\r\n    }\r\n\r\n    public addDraggingState() {\r\n        this.states.add(RuleControlStates.dragging);\r\n    }\r\n\r\n    public removeDraggingState() {\r\n        this.states.remove(RuleControlStates.dragging);\r\n    }\r\n\r\n    public changeDropDownHover() {\r\n        this.dropDownHover = !this.dropDownHover;\r\n    }\r\n}\r\n","<div k2-scrollbar-focus\r\n     *ngIf=\"statementModel.selectedItems.length > 0\"\r\n     class=\"outcome-outer-block {{states.toString()}}\"\r\n     [ngClass]=\"{'multi' : statementModel.selectedItems.length > 1 }\"\r\n     tabindex=\"0\"\r\n     (click)=\"setSelected(true); $event.stopPropagation();\">\r\n    <div class=\"outcome-inner-block k2-dropdown-target\"\r\n         [ngClass]=\"{notfirst: !first}\"\r\n         K2Droppable\r\n         k2Droptypes=\"ruleDesignerItem\"\r\n         *ngFor=\"let item of statementModel.selectedItems;let first = first;let last = last;\">\r\n        <svg class=\"leftsvg\"\r\n             height=\"44\"\r\n             width=\"10\">\r\n            <path d=\"M1 0 L1 7 a2,2 0 0,0 1,1 l8 8 a2,2 0 0,1 -1,1 l-8 8 a2,2 0 0,0 -1,1 l0 6 a2,2 0 0,0 1,1 l87 0 a2,2 0 0,0 1,-1 l0 -30 a2,2 0 0,0 -1,-1 L1 -1 Z\"\r\n                  stroke-linejoin=\"round\"\r\n                  *ngIf=\"statementModel.selectedItems.length === 1 && first\" />\r\n            <path d=\"M1 0 L1 7 a2,2 0 0,0 1,1 l8 8 a2,2 0 0,1 -1,1 l-8 8 a2,2 0 0,0 -1,1 l0 15 a2,2 0 0,0 1,1 l87 0 a2,2 0 0,0 1,-1 l0 -30 a2,2 0 0,0 -1,-1 L1 -1 Z\"\r\n                  stroke-linejoin=\"round\"\r\n                  *ngIf=\"statementModel.selectedItems.length > 1 && first\" />\r\n            <path d=\"M0.5 -2 L0.5 46 L12 46 L12 -2 Z\"\r\n                  stroke-linejoin=\"round\"\r\n                  *ngIf=\"statementModel.selectedItems.length > 1 && !last && !first\" />\r\n            <path d=\"M0.5 -2 L0.5 33.5 L12 33.5 L12 -2 Z\"\r\n                  stroke-linejoin=\"round\"\r\n                  *ngIf=\"statementModel.selectedItems.length > 1 && last\" />\r\n        </svg>\r\n        <k2-drop-down class=\"outcome-dropdown-button-block outcome-statement-dropdown\"\r\n                      [ngClass]=\"{'narrow': !first, 'notfirst': !first, 'dropdown-button-selected': dropdownButtonSelected, 'isDropDownTarget': last}\"\r\n                      (mouseenter)=\"changeDropDownHover()\"\r\n                      (mouseleave)=\"changeDropDownHover()\"\r\n                      [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                      [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                      [menuItems]=\"outcomeArray\"\r\n                      (getMenuItems)=\"getOutcomeItems()\"\r\n                      (onItemSelected)=\"onSelected($event)\"\r\n                      [innerItemComponent]=\"dropdownMenuItemTemplates.RulesOutcome\"\r\n                      [selectedItemKey]=\"selectedKey\"\r\n                      (onMenuClose)=\"onMenuClose()\"\r\n                      (onMenuOpen)=\"setDropDownActive()\"\r\n                      [selectMultipleItems]=\"multipleOutcome\"\r\n                      tabindex=\"0\"\r\n                      (click)=\"setSelected(true); $event.stopPropagation();\">\r\n                    <div class=\"clickablecontainer\">\r\n                        <div class=\"outcome-icon-block\">\r\n                            <div class=\"icon icon-set-picker icon-size24\" [ngClass]=\"item.icon\"></div>\r\n                        </div>\r\n                        <div class=\"outcome-title-block\" (click)=\"setSelected(true);\" [ngClass]=\"{'rightborder': statementModel.selectedItems.length > 1}\">\r\n                            <span>{{item.title}}</span>\r\n                        </div>\r\n                        <div class=\"k2-dd-flexChild k2-dd-dd-sprite dropdownIcon\" *ngIf=\"last\" [ngClass]=\"{'no-padding' : !first }\">\r\n                            <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown colour_dark\"></span>\r\n                        </div>\r\n                    </div>\r\n        </k2-drop-down>\r\n        <div class=\"outcome-space-block\"\r\n             *ngIf=\"!first && !last\">\r\n        </div>\r\n        <div class=\"outcome-grip-block\"\r\n             *ngIf=\"first\"\r\n             K2Draggable\r\n             k2Dragtype=\"ruleDesignerItem\"\r\n             [k2Dragitem]=\"getDragItem.bind(this)\"\r\n             [k2Dragcontext]=\"statementModel\"\r\n             [k2Dragghost]=\"getDragImageFn\"\r\n             (k2Dragstart)=\"addDraggingState()\"\r\n             (k2Dragend)=\"removeDraggingState()\">\r\n            <div class=\"icon icon-set-steps icon-size16 ic-draghandle selected outcome-grip-icon\"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div k2-scrollbar-focus\r\n     *ngIf=\"statementModel.selectedItems.length === 0\"\r\n     class=\"outcome-outer-block empty-outcome {{states.toString()}}\"\r\n     [ngClass]=\"{'multi' : statementModel.selectedItems.length > 1, 'selected' : selected }\"\r\n     tabindex=\"0\"\r\n     (click)=\" setSelected(true); $event.stopPropagation();\">\r\n    <div class=\"outcome-inner-block k2-dropdown-target\"\r\n         [ngClass]=\"{notfirst: index >= 1}\"\r\n         [k2Droppable]\r\n         k2Droptypes=\"ruleDesignerItem\">\r\n        <svg class=\"leftsvg\"\r\n             height=\"44\"\r\n             width=\"10\">\r\n            <path d=\"M1 0 L1 7 a2,2 0 0,0 1,1 l8 8 a2,2 0 0,1 -1,1 l-8 8 a2,2 0 0,0 -1,1 l0 6 a2,2 0 0,0 1,1 l87 0 a2,2 0 0,0 1,-1 l0 -30 a2,2 0 0,0 -1,-1 L1 -1 Z\"\r\n                  stroke-linejoin=\"round\" />\r\n        </svg>\r\n\r\n        <k2-drop-down class=\"outcome-dropdown-button-block outcome-statement-dropdown\"\r\n                      [ngClass]=\"{'narrow': index >= 1, 'notfirst': index >= 1, 'dropdown-button-selected': dropdownButtonSelected}\"\r\n                      (mouseenter)=\"changeDropDownHover()\"\r\n                      (mouseleave)=\"changeDropDownHover()\"\r\n                      [menuAlignment]=\"dropdownMenuAlignment.centered\"\r\n                      [trianglePosition]=\"dropDownMenuTrianglePosition.right\"\r\n                      [menuItems]=\"outcomeArray\"\r\n                      (getMenuItems)=\"getOutcomeItems()\"\r\n                      (onItemSelected)=\"onSelected($event)\"\r\n                      [innerItemComponent]=\"dropdownMenuItemTemplates.RulesOutcome\"\r\n                      [selectedItemKey]=\"selectedKey\"\r\n                      (onMenuClose)=\"onMenuClose()\"\r\n                      (onMenuOpen)=\"setDropDownActive()\"\r\n                      [selectMultipleItems]=\"multipleOutcome\"\r\n                      tabindex=\"0\"\r\n                      (click)=\"setSelected(true); $event.stopPropagation();\">\r\n                    <div class=\"clickablecontainer\">\r\n                        <div class=\"outcome-title-block empty\" (click)=\"setSelected(true);\">\r\n                            <span>{{getFromResx('RulesDesigner', 'ruleDesigner_ThisResponse_Select')|async}}</span>\r\n                        </div>\r\n                        <div class=\"k2-dd-flexChild k2-dd-dd-sprite dropdownIcon\">\r\n                            <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown colour_dark\"></span>\r\n                        </div>\r\n                    </div>\r\n        </k2-drop-down>\r\n\r\n        <div class=\"outcome-grip-block\"\r\n             K2Draggable\r\n             k2Dragtype=\"ruleDesignerItem\"\r\n             [k2Dragitem]=\"getDragItem.bind(this)\"\r\n             [k2Dragcontext]=\"statementModel\"\r\n             [k2Dragghost]=\"getDragImageFn\"\r\n             (k2Dragstart)=\"addDraggingState()\"\r\n             (k2Dragend)=\"removeDraggingState()\">\r\n            <div class=\"icon icon-set-steps icon-size16 ic-draghandle selected outcome-grip-icon\"></div>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n","import { Component, ElementRef, Inject, OnDestroy, OnInit } from '@angular/core';\r\nimport { IConfigPanelService } from '../../../../../types/services/config-panel/i-config-panel-service';\r\nimport { ISelectionService } from '../../../../../types/services/selection/i-selection-service';\r\nimport { CommandServiceToken } from '../../../../services/command/command-service-factory';\r\nimport { ConfigPanelServiceToken } from '../../../../services/config-panel/config-panel-service-factory';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { RulePluginService } from '../../../../services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from '../../../../services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../../services/undo-redo/undo-redo-service-factory';\r\nimport { RuleControlStates } from '../../../../shared/enums/rules/rule-control-states';\r\nimport { StatementBaseComponent } from '../../base/statement-base/statement-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-return-statement',\r\n    templateUrl: './return-statement.component.html',\r\n    styleUrls: ['./return-statement.component.less']\r\n})\r\nexport class ReturnStatementComponent extends StatementBaseComponent implements OnInit, OnDestroy {\r\n    constructor(@Inject(SelectionServiceToken) selService: ISelectionService,\r\n        rulePluginService: RulePluginService,\r\n        @Inject(CommandServiceToken) commandService: ICommandService,\r\n        @Inject(ConfigPanelServiceToken) configPanelService: IConfigPanelService,\r\n        @Inject(UndoRedoServiceToken) undoRedoService: IUndoRedoService,\r\n        eventService: EventNotifierService,\r\n        protected element: ElementRef<HTMLElement>) {\r\n        super(selService, rulePluginService, commandService, configPanelService, undoRedoService, eventService, element);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        super.ngOnDestroy();\r\n    }\r\n\r\n    public getDragImage(): HTMLElement {\r\n        const result = super.getDragImage();\r\n        return result;\r\n    }\r\n\r\n    public addDraggingState() {\r\n        this.states.add(RuleControlStates.dragging);\r\n    }\r\n\r\n    public removeDraggingState() {\r\n        this.states.remove(RuleControlStates.dragging);\r\n    }\r\n\r\n    public gripOnFocus() {\r\n        this.setSelected(true);\r\n    }\r\n\r\n    public addState(state: string) {\r\n        this.states.add(state);\r\n    }\r\n\r\n    public removeState(state: string) {\r\n        this.states.remove(state);\r\n    }\r\n}\r\n","<div class=\"main-container\">\r\n    <div tabindex=\"0\" [ngClass]=\"'condition-block return-statement ' + states.toString()\"\r\n         [attr.state]=\"states.toString()\"\r\n         (click)=\"setSelected(true);$event.stopPropagation();\">\r\n        <k2-end-point class=\"condition-input left-operand fixed-width\"\r\n                      [expressionModel]=\"statementModel\"\r\n                      (click)=\"setSelected(true); $event.stopPropagation();\"\r\n                      (addParentState)=\"addState($event)\"\r\n                      (removeParentState)=\"removeState($event)\"></k2-end-point>\r\n        <div class=\"condition-grip focusable\"\r\n             K2Draggable\r\n             k2Dragtype=\"ruleDesignerItem\"\r\n             [k2Dragitem]=\"getDragItem.bind(this)\"\r\n             [k2Dragcontext]=\"statementModel\"\r\n             [k2Dragghost]=\"getDragImage.bind(this)\"\r\n             (k2Dragstart)=\"addDraggingState()\"\r\n             (k2Dragend)=\"removeDraggingState()\"\r\n             (focus)=\"gripOnFocus()\"\r\n             (mousedown)=\"gripOnFocus()\">\r\n            <div class=\"icon icon-set-steps icon-size16 ic-draghandle condition-icon\"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { IConfiguredStatement } from '../../../../../types/models/rules/i-configured-statement';\r\nimport { IItemConfiguration } from '../../../../../types/models/rules/i-item-configuration';\r\nimport { RulePluginService } from '../../../../services/ruleplugin/rule-plugin-service';\r\nimport { StatementDirectives } from '../../../../shared/enums/rules/statement-directives';\r\n\r\n@Component({\r\n    selector: 'k2-rule-statement-block',\r\n    templateUrl: './rule-statement-block.component.html',\r\n    styleUrls: ['./rule-statement-block.component.less']\r\n})\r\nexport class RuleStatementBlockComponent {\r\n    @Input() public statementModel: IConfiguredStatement[];\r\n\r\n    public statementDirectives = StatementDirectives;\r\n\r\n    constructor(private _rulePluginService: RulePluginService) { }\r\n\r\n    public getConfig(statementModel): IItemConfiguration {\r\n        return this._rulePluginService.getStatementConfiguration(statementModel);\r\n    }\r\n}\r\n","<ng-container *ngIf=\"this.statementModel?.length\">\r\n    <ng-container *ngFor=\"let statement of this.statementModel\">\r\n        <ng-container [ngSwitch]=\"getConfig(statement)?.directive\">\r\n            <k2-if-then-else-statement *ngSwitchCase=\"statementDirectives.ifThenElse\" [statementModel]=\"statement\">\r\n            </k2-if-then-else-statement>\r\n            <k2-when-statement *ngSwitchCase=\"statementDirectives.when\" [statementModel]=\"statement\">\r\n            </k2-when-statement>\r\n            <k2-outcome-statement *ngSwitchCase=\"statementDirectives.outcome\" [statementModel]=\"statement\">\r\n            </k2-outcome-statement>\r\n            <k2-wait-for-response-statement *ngSwitchCase=\"statementDirectives.waitForResponse\" [statementModel]=\"statement\">\r\n            </k2-wait-for-response-statement>\r\n            <k2-destination-set-statement *ngSwitchCase=\"statementDirectives.destinationSet\" [statementModel]=\"statement\">\r\n            </k2-destination-set-statement>\r\n            <k2-split-path-statement *ngSwitchCase=\"statementDirectives.splitPath\" [statementModel]=\"statement\">\r\n            </k2-split-path-statement>\r\n            <k2-return-statement *ngSwitchCase=\"statementDirectives.return\" [statementModel]=\"statement\">\r\n            </k2-return-statement>\r\n        </ng-container>\r\n    </ng-container>\r\n</ng-container>\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { ISelectionService } from '../../../../types/services/selection/i-selection-service';\r\nimport { DraggableDirective } from '../../../directives/draggable/draggable.directive';\r\nimport { DragDropService } from '../../../services/drag-drop/drag-drop.service';\r\nimport { RulePluginService } from '../../../services/ruleplugin/rule-plugin-service';\r\nimport { SelectionServiceToken } from '../../../services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\n\r\n@Component({\r\n    selector: 'k2-toolbox-trash',\r\n    templateUrl: './toolbox-trash.component.html',\r\n    styleUrls: ['./toolbox-trash.component.less']\r\n})\r\nexport class ToolboxTrashComponent implements OnInit {\r\n    public hover: boolean;\r\n\r\n    constructor(@Inject(SelectionServiceToken) private _selectionService: ISelectionService,\r\n        private _dragDropService: DragDropService,\r\n        private _rulePluginService: RulePluginService,\r\n        @Inject(UndoRedoServiceToken) private _undoRedoService: IUndoRedoService) { }\r\n\r\n    ngOnInit(): void {\r\n        this.hover = false;\r\n    }\r\n\r\n    public changeTrashHoverState() {\r\n        this.hover = !this.hover;\r\n    }\r\n\r\n    public trashClick(): void {\r\n        //get rule from selection service\r\n        const selectedRuleItem: any = <any>this._selectionService.getSelection('rule');\r\n\r\n        if (selectedRuleItem.length > 0) {\r\n            this.delete(selectedRuleItem[0]);\r\n        }\r\n    }\r\n\r\n    private animateLeave() {\r\n        DraggableDirective.keepDragGhost();\r\n        const dragGhost = DraggableDirective.currentGhost;\r\n        dragGhost.addEventListener('transitionend', this.removeDragGhost.bind(this), false);\r\n        dragGhost.className += ' drag-leave';\r\n    }\r\n\r\n    private removeDragGhost() {\r\n        DraggableDirective.currentGhost.removeEventListener('transitionend', this.removeDragGhost.bind(this), false);\r\n\r\n        DraggableDirective.dontKeepDragGhost();\r\n        DraggableDirective.removeDragGhost();\r\n    }\r\n\r\n    public onItemDroppedOnBin(dragDropData: IDragDropData): boolean {\r\n        this.hover = false;\r\n\r\n        const droppedRuleItem: any = <any>(dragDropData.getSource());\r\n        if (this._rulePluginService.isExpressionPlugin(droppedRuleItem) || this._rulePluginService.isStatementPlugin(droppedRuleItem)) {\r\n            return;\r\n        }\r\n\r\n        this.animateLeave();\r\n        this.delete(droppedRuleItem);\r\n\r\n        return false;\r\n    }\r\n\r\n    private delete(item: any) {\r\n\r\n        const ruleDesignerItem = this._rulePluginService.getRuleDesignerItem(item);\r\n\r\n        if (ruleDesignerItem.length > 0) {\r\n            this._undoRedoService.addUndoMarker('-- delete rules items -- ');\r\n        }\r\n\r\n        for (let i = 0; i < ruleDesignerItem.length; i++) {\r\n            ruleDesignerItem[i].delete();\r\n        }\r\n    }\r\n\r\n}\r\n","<div class=\"rule-trash\" \r\n     (click)=\"trashClick()\" \r\n     (mouseenter)=\"changeTrashHoverState()\" \r\n     (mouseleave)=\"changeTrashHoverState()\" \r\n     K2Droppable \r\n     k2Droptypes=\"ruleDesignerItem\" \r\n     (k2Dropped)=\"onItemDroppedOnBin($event)\">\r\n    <i class=\"center-block icon icon-set-rulestoolbar icon-size32 ic-bin\" [ngClass]=\"{hover: hover ? 'hover' : ''}\"></i>\r\n</div>\r\n","import { Component, ElementRef, Inject, Input, OnChanges, OnInit, SimpleChanges, TemplateRef, ViewChild } from '@angular/core';\r\nimport { IFilterCallbackData } from '../../../../types/models/smart-field/i-filter-callback-data';\r\nimport { IFilterPanelService } from '../../../../types/services/filter-panel/i-filter-panel';\r\nimport { IItemProviderService } from '../../../../types/services/item-provider/i-item-provider-service';\r\nimport { IPluginService } from '../../../../types/services/plugin/i-plugin-service';\r\nimport { ISelectionService } from '../../../../types/services/selection/i-selection-service';\r\nimport { IValidationService } from '../../../../types/services/validation/ivalidation.service';\r\nimport { ISmartFieldComposerOptions } from '../../../../types/uiComponents/smartFieldComposer/ISmartFieldComposerOptions';\r\nimport { EventNotifierService } from '../../../services/event-notifier/event-notifier.service';\r\nimport { FilterPanelServiceToken } from '../../../services/filter-panel/filter-panel-service-factory';\r\nimport { ItemProviderServiceToken } from '../../../services/item-provider/item-provider-service-factory';\r\nimport { PluginServiceToken } from '../../../services/plugin/plugin-service-factory';\r\nimport { ProcessService } from '../../../services/process/process.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { SelectionServiceToken } from '../../../services/selection/selection-service-factory';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../services/validation/validation-service-factory';\r\nimport { plugins } from '../../../shared/constants/plugins';\r\nimport IDropDownMenuItem from '../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from '../../../shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { ExternalReferenceState } from '../../../shared/enums/external-references/external-references';\r\nimport { SmartFieldFilters } from '../../../shared/enums/smart-field-composer/smart-field-composer';\r\nimport { getEnumKeyByEnumValue } from '../../../shared/utils/general';\r\nimport { RuleDesignerSelectionBaseComponent } from '../../rules-designer/base/rule-designer-selection-base/rule-designer-selection-base.component';\r\n\r\n@Component({\r\n    selector: 'k2-smart-field-composer-filter',\r\n    templateUrl: './smart-field-composer-filter.component.html',\r\n    styleUrls: ['./smart-field-composer-filter.component.less']\r\n})\r\nexport class SmartFieldComposerFilterComponent extends RuleDesignerSelectionBaseComponent implements OnInit, OnChanges {\r\n    @Input() public model: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectFieldMethod;\r\n    @Input() public composer: ISmartFieldComposerOptions;\r\n    @Input() public template: string;\r\n\r\n    @ViewChild('FirstItemWhere') public FirstItemWhere: TemplateRef<any>;\r\n    @ViewChild('AllItemsAsCollection') public AllItemsAsCollection: TemplateRef<any>;\r\n    @ViewChild('Custom') public Custom: TemplateRef<any>;\r\n\r\n    public selectedTemplate: TemplateRef<any>;\r\n    public isToggleBtnHover: boolean;\r\n    public smoMethodExternalDefinition: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectMethodField;\r\n    private _filterPropList: IDropDownMenuItem[];\r\n    filterPropSelectedKey: string;\r\n    filterPropSelectedIcon: string;\r\n    learnMoreLinkUrl = sourceCode.k2Designer.utilities.buildHelpLinkUrl(501); // Not sure where this 501 is defined\r\n\r\n    constructor(@Inject(FilterPanelServiceToken) private _filterPanelService: IFilterPanelService,\r\n        private _resourceService: ResourceService,\r\n        @Inject(UndoRedoServiceToken) private _undoRedoService: IUndoRedoService,\r\n        private _processService: ProcessService,\r\n        @Inject(ValidationServiceToken) private _validationService: IValidationService,\r\n        @Inject(SelectionServiceToken) _selService: ISelectionService,\r\n        protected eventService: EventNotifierService,\r\n        protected rootElement: ElementRef<HTMLElement>,\r\n        @Inject(PluginServiceToken) private _pluginService: IPluginService,\r\n        @Inject(ItemProviderServiceToken) private _itemProviderService: IItemProviderService) {\r\n        super(_selService, eventService, rootElement);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        const smoField = this.composer?.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField;\r\n        if (smoField) {\r\n            this.smoMethodExternalDefinition = (smoField.getRoot() as any).findItem(smoField.method.externalReference);\r\n        }\r\n        this.updateTemplate();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.template) {\r\n            switch (this.template) {\r\n                case SmartFieldFilters.AllItemsAsCollection:\r\n                //default to 'all'\r\n                    if (this.model?.filter?.configuredListOptions) {\r\n                        this.model.filter.configuredListOptions.filterOption = sourceCode.k2Designer.utilities.FILTEROPTION_ALL;\r\n                    }\r\n                    break;\r\n                case SmartFieldFilters.FirstItemWhere:\r\n                case SmartFieldFilters.Custom:\r\n                    break;\r\n            }\r\n            this.updateTemplate();\r\n        }\r\n    }\r\n\r\n    private updateTemplate() {\r\n        setTimeout(() => {\r\n            const key = getEnumKeyByEnumValue(SmartFieldFilters, this.template);\r\n            if (this[key]) {\r\n                this.selectedTemplate = this[key];\r\n            }\r\n        }, 0);\r\n    }\r\n\r\n    getFromResx = (resourceName: string, key: string) => this._resourceService.getFromResx(resourceName, key);\r\n\r\n    getFilterButtonText(): string {\r\n        let buttonText = '';\r\n\r\n        if (this._filterPanelService.isPanelActive()\r\n            && this._filterPanelService.isFilterPanelOriginatedFrom(this.composer.data)) {\r\n            buttonText = this._resourceService.getString('workflow_smartFieldComposer_SMO_filter_panel_close');\r\n        }\r\n        else {\r\n            buttonText = this._resourceService.getString('workflow_smartFieldComposer_SMO_filter_panel_open');\r\n        }\r\n        return buttonText;\r\n    }\r\n\r\n    get filterPropList() {\r\n        if (!this._filterPropList) {\r\n            this._filterPropList = this.getFilterPropList();\r\n        }\r\n        return this._filterPropList;\r\n    }\r\n\r\n    isFilterActive(): boolean {\r\n        return this._filterPanelService.isPanelActive();\r\n    }\r\n\r\n    /**\r\n     * Returns true if filter open and populated with data from a different smartfield than the one currently in scope.\r\n     * Used to disable filter panel button if the filter panel is currently open and it is open from SmartField other than the one in scope\r\n     */\r\n    public shouldDisableFilterPanelButton(): boolean {\r\n        let context = this._filterPanelService.getContext();\r\n\r\n        if (!this._filterPanelService.isPanelActive() && context) {\r\n            //filter panel is not open, but has a context, reset the panel origin to enable all custom buttons\r\n            this._filterPanelService.setContext(null);\r\n            context = this._filterPanelService.getContext();\r\n        }\r\n\r\n        //if filter panel is active and is not originated from this composer, disable the button (this is for when two composers with two buttons)\r\n        if (context && !this._filterPanelService.isFilterPanelOriginatedFrom(this.composer.data)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getFilterPropList(): IDropDownMenuItem[] {\r\n        const result: IDropDownMenuItem[] = [];\r\n        let selectedItem: IDropDownMenuItem;\r\n\r\n        const firstItemExpression: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredFilterExpression =\r\n            <sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredFilterExpression>this.model.filter.configuredFilter.expressions[0];\r\n\r\n        //If any .XML properties was used to filter against, flag them so they can be replaced by the extension\r\n        const selectedProp: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectPropertyField =\r\n            this._processService.root.findItem<sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectPropertyField>(firstItemExpression.property);\r\n\r\n        let extensionPropName = '';\r\n\r\n        if (selectedProp.systemName.match(/(.XML)$/) && (selectedProp.type === 'file' || selectedProp.type === 'image')) {\r\n            extensionPropName = selectedProp.systemName.substr(0, selectedProp.systemName.lastIndexOf('.XML'));\r\n        }\r\n\r\n        for (let i = 0; i < this.smoMethodExternalDefinition.returns.length; i++) {\r\n            const prop: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectPropertyField = this.smoMethodExternalDefinition.returns[i];\r\n\r\n            //Only exclude .XML properties of type file and image\r\n            const includeProp: boolean = !prop.systemName.match(/(.XML)$/) ? true : prop.type !== 'file' && prop.type !== 'image';\r\n\r\n            //We need to exclude properties with .XML from properties to configure against\r\n            if (includeProp) {\r\n                const newItem = {\r\n                    key: prop.getReference(),\r\n                    title: prop.displayName,\r\n                    icon: 'icon icon-sprite icon-set-datatypes icon-size24 selected ' + this.getPropIconOf(prop.type),\r\n                    isSelected: (firstItemExpression.property === prop.getReference()),\r\n                    innerItemComponent: DropdownMenuItemTemplates.SmartFieldSmoFilter\r\n                };\r\n\r\n                if (newItem.isSelected) {\r\n                    selectedItem = newItem;\r\n                } else {\r\n                    //Check if the property had an extension and if the current item added needs to be used\r\n                    if (extensionPropName === prop.systemName) {\r\n                        selectedItem = newItem;\r\n                    }\r\n                }\r\n\r\n                //Exclude missing property from dropdown items after setting it as selected\r\n                if (prop.state === ExternalReferenceState.Missing) {\r\n                    continue;\r\n                }\r\n\r\n                if (i > 0) {\r\n                    result.push({\r\n                        key: 'separator-' + i,\r\n                        isSeparator: true\r\n                    });\r\n                }\r\n\r\n                result.push(newItem);\r\n            }\r\n        }\r\n\r\n        if (!selectedItem) {\r\n            let itemToSelect = result[0];\r\n\r\n            if (this.smoMethodExternalDefinition.inputs.length > 0) {\r\n                const firstRequiredPropReference = this.smoMethodExternalDefinition.inputs[0].getReference();\r\n                for (let j = 0; j < result.length; j++) {\r\n                    if (result[j].key === firstRequiredPropReference) {\r\n                        itemToSelect = result[j];\r\n                    }\r\n                }\r\n            }\r\n\r\n            itemToSelect.isSelected = true;\r\n            selectedItem = itemToSelect;\r\n        }\r\n\r\n        this.onFilterPropSelected(selectedItem);\r\n        return result;\r\n    };\r\n\r\n    private onFilterPropSelected(item: IDropDownMenuItem) {\r\n        this._undoRedoService.addUndoMarker('-- undo SMO option --');\r\n        this._undoRedoService.addCustomObjectUndoEvent(this, ['filterPropSelectedKey'], '-- undo SMO filter dropdown --');\r\n        this._undoRedoService.addCustomUndoEvent(this.undoDropdownItemSelection.bind(this), '-- custom undo event to revert the SMO filter dropdown --');\r\n\r\n        const firstItemExpression = this.model.filter.configuredFilter\r\n            .expressions[0] as sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredFilterExpression;\r\n\r\n        const referencedProperty = this.model.getRoot<sourceCode.k2Designer.objectModel.core.model.ModelBase>()\r\n            .findItem(item.key) as sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectReferenceDefinition;\r\n\r\n        firstItemExpression.property = item.key;\r\n        firstItemExpression.propertyType = referencedProperty.type;\r\n\r\n        this.filterPropSelectedKey = item.key;\r\n\r\n        this.validateSelectedProperty();\r\n\r\n        this.filterPropSelectedIcon = item.icon.replace('selected', '');\r\n    }\r\n\r\n    /**\r\n     * Custom undo event that fires when the filter selection choice is undone\r\n     *\r\n     * @param isUndo\r\n     */\r\n    private undoDropdownItemSelection(isUndo: boolean): boolean {\r\n        //If undo was performed\r\n        if (isUndo) {\r\n            const firstItemExpression = this.model.filter.configuredFilter\r\n                .expressions[0] as sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredFilterExpression;\r\n\r\n            for (let f = 0; f < this._filterPropList.length; f++) {\r\n                this._filterPropList[f].isSelected = firstItemExpression.property === this._filterPropList[f].key;\r\n            }\r\n        } else {\r\n            //If redo was performed\r\n            for (let f = 0; f < this._filterPropList.length; f++) {\r\n                this._filterPropList[f].isSelected = this.filterPropSelectedKey === this._filterPropList[f].key;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * If selected property is in missing state, raise reference error.\r\n     * If selected property is valid, re-evaluate errors.\r\n     * */\r\n    private validateSelectedProperty() {\r\n        if (!this.model.filter.configuredFilter.expressions?.length) {\r\n            return;\r\n        }\r\n\r\n        const selectedItem = this.model.filter.configuredFilter\r\n            .expressions[0] as sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredFilterExpression;\r\n\r\n        if (!selectedItem?.property) {\r\n            return;\r\n        }\r\n\r\n        //Get property:\r\n        const referencedProperty = this.model.getRoot<sourceCode.k2Designer.objectModel.core.model.ModelBase>()\r\n            .findItem(selectedItem.property) as sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectReferenceDefinition;\r\n\r\n        if (!referencedProperty) {\r\n            return;\r\n        }\r\n\r\n        if (referencedProperty.state === sourceCode.k2Designer.objectModel.core.model.ExternalReferenceState.Missing) {\r\n            this._processService.raiseReferenceError(selectedItem, 'property', selectedItem.property);\r\n        } else {\r\n            this._validationService.reevaluateErrors(selectedItem.errorInformation, true);\r\n        }\r\n    }\r\n\r\n    getPropIconOf(type: string) {\r\n        if (type) {\r\n            return 'ic-' + type.replace('/', '').toLowerCase();\r\n        }\r\n        return 'ic-text';\r\n    }\r\n\r\n    onFocus() {\r\n        this.setSelected(true, true);\r\n    }\r\n\r\n    onBlur() {\r\n        this.setSelected(false, true);\r\n    }\r\n\r\n    getDisplayName(externalRef: string): string {\r\n        let title = '';\r\n        const propRef: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectPropertyField = (this.composer.data.getRoot() as any)\r\n            .findItem(externalRef);\r\n\r\n        if (propRef) {\r\n            title = propRef.displayName;\r\n        }\r\n\r\n        return title;\r\n    }\r\n\r\n    toggleFilterPanel(): void {\r\n        //Because this custom filter tab only exists for list methods, no need to hide/show filter. This additional functionality to hide/show filter tab\r\n        //was implemented so that the user can still supply input properties on non list methods. Here it needs to reset incase a previous field was one\r\n        //of those.\r\n        this._filterPanelService.canConfigureFilter = true;\r\n        this._filterPanelService.canConfigureProperties = true;\r\n\r\n        this._pluginService.toggleState(plugins.panels.filterPanel);\r\n\r\n        if (this._filterPanelService.isPanelActive()) {\r\n            //panel is opened, save where the panel was opened\r\n            this.setFilterContext();\r\n        }\r\n        else {\r\n            //panel is closed, discard the origin\r\n            this._filterPanelService.setContext(null);\r\n        }\r\n\r\n        //close other empty associated panels\r\n        this._filterPanelService.closeEmptyAssociatedPanel();\r\n    }\r\n\r\n    private _inputProperties: sourceCode.k2Designer.objectModel.workflow.itemProvider.ISmartObjectItem;\r\n    private _returnProperties: sourceCode.k2Designer.objectModel.workflow.itemProvider.ISmartObjectItem;\r\n\r\n    private setFilterContext(): void {\r\n        const filterSmartFieldMethod = (this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField).method;\r\n        const root = filterSmartFieldMethod.getRoot<sourceCode.k2Designer.objectModel.core.model.ModelBase>();\r\n\r\n        const exRefMethod = root.findItem<sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectMethodField>(filterSmartFieldMethod.externalReference);\r\n\r\n        const def = (<sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectReferenceDefinition>this.composer.data.externalReferenceDefinition);\r\n\r\n        const returnsFilterCallBackData: IFilterCallbackData = {\r\n            exRefMethod,\r\n            filterSmartFieldMethod,\r\n            returnInputProperties: false\r\n        };\r\n\r\n        //get returns properties for filter tab\r\n        const returnPropertiesSmoItemConfiguration: sourceCode.k2Designer.objectModel.workflow.itemProvider.ISmartObjectItem =\r\n            sourceCode.k2Designer.objectModel.workflow.itemProvider.SmartObjectItem.createInstance({\r\n                parentName: def.systemName,\r\n                sysName: exRefMethod.systemName,\r\n                title: '',\r\n                parentGroupings: [],\r\n                groupings: [],\r\n                returnInputProperties: returnsFilterCallBackData.returnInputProperties,\r\n            });\r\n\r\n        this._itemProviderService.getItemProvider(sourceCode.k2Designer.uiComponents.contextBrowser.plugins.SmoPlugin).loadDefinitionProperties(\r\n            'api/contextplugins/getsmartobjectdefinitionproperties', <any>returnPropertiesSmoItemConfiguration,\r\n            this.onDataLoaded.bind(this, returnsFilterCallBackData));\r\n\r\n        //get input properties for properties tab\r\n        const inputsFilterCallBackData: IFilterCallbackData = {\r\n            exRefMethod,\r\n            filterSmartFieldMethod,\r\n            returnInputProperties: true\r\n        };\r\n        const inputPropertiesSmoItemConfiguration: sourceCode.k2Designer.objectModel.workflow.itemProvider.ISmartObjectItem =\r\n            sourceCode.k2Designer.objectModel.workflow.itemProvider.SmartObjectItem.createInstance({\r\n                parentName: def.systemName,\r\n                sysName: exRefMethod.systemName,\r\n                title: '',\r\n                parentGroupings: [],\r\n                groupings: [],\r\n                returnInputProperties: inputsFilterCallBackData.returnInputProperties,\r\n            });\r\n\r\n        this._itemProviderService.getItemProvider(sourceCode.k2Designer.uiComponents.contextBrowser.plugins.SmoPlugin).loadDefinitionProperties(\r\n            'api/contextplugins/getsmartobjectdefinitionproperties', <any>inputPropertiesSmoItemConfiguration,\r\n            this.onDataLoaded.bind(this, inputsFilterCallBackData));\r\n    }\r\n\r\n    /**\r\n     * This function gets called from 2 ajax calls. (inputProperties and returnProperties).\r\n     * When both properties are set then activates the filter panel.\r\n     *\r\n     * @param params - array of custom parameters: [externalReferenceDefinition, smartObjectFieldMethod, returnInputProperties]\r\n     * @param callBackData - data obtained from the ajax call that contains SmartObject info\r\n     */\r\n    private onDataLoaded(filterCallbackData: IFilterCallbackData, callBackData: sourceCode.k2Designer.objectModel.core.itemProvider.IDataLoadedData) {\r\n        const externalReferenceDefinition = filterCallbackData.exRefMethod;\r\n        const method = filterCallbackData.filterSmartFieldMethod;\r\n        const isInputProperties = filterCallbackData.returnInputProperties;\r\n\r\n        if (isInputProperties) {\r\n            this._inputProperties = <sourceCode.k2Designer.objectModel.workflow.itemProvider.ISmartObjectItem>(<any>callBackData.sourceItem);\r\n        }\r\n        else {\r\n            this._returnProperties = <sourceCode.k2Designer.objectModel.workflow.itemProvider.ISmartObjectItem>(<any>callBackData.sourceItem);\r\n        }\r\n\r\n        //when both ajax call is completed, then we can activate the filter panel\r\n        if (this._inputProperties && this._returnProperties) {\r\n\r\n            const filterContext = <sourceCode.k2Designer.services.studio.IFilterPanelContext>{\r\n                field: externalReferenceDefinition,\r\n                configuredListOptions: method.filter.configuredListOptions,\r\n                filterConfig: method.filter.configuredFilter,\r\n                savedUIValues: method.filter.savedUIValues,\r\n                inputMappings: method.filter.inputMappings,\r\n                smartField: this.composer.data,\r\n                inputProperties: this._inputProperties,\r\n                returnProperties: this._returnProperties\r\n            };\r\n\r\n            this._filterPanelService.setContext(filterContext);\r\n        }\r\n    }\r\n}\r\n","<ng-template #Custom>\r\n    <div class=\"main-container\">\r\n        <div>\r\n            <button k2-tab-index class=\"panel-toggle-control margin-to-center\"\r\n                    [ngClass]=\"{'selected':isFilterActive(), 'hover':isToggleBtnHover, 'is-disabled':shouldDisableFilterPanelButton() }\"\r\n                    (click)=\"toggleFilterPanel()\"\r\n                    (mouseenter)=\"isToggleBtnHover = true\"\r\n                    (mouseleave)=\"isToggleBtnHover = false\">\r\n                <div class=\"control-icon\">\r\n                    <span class=\"icon icon-set-outcomes icon-size24 ic-rulestoggle\" [class.hover]=\"isToggleBtnHover\"></span>\r\n                </div>\r\n                <div class=\"control-content\">\r\n                    <div class=\"title\">\r\n                        <span>{{getFilterButtonText()}}</span>\r\n                    </div>\r\n                </div>\r\n                <span class=\"pull-right icon icon-set-toolbox icon-size16 ic-expandmenu control-toggle-icon\" [class.hover]=\"isToggleBtnHover\"></span>\r\n                <k2-badges [k2Model]=\"model.filter\"></k2-badges>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n<ng-template #FirstItemWhere>\r\n    <div class=\"main-container\">\r\n        <div tabindex=\"0\" class=\"smo-filter-expression condition-block {{states.toString()}}\" [attr.state]=\"states.toString()\"\r\n             (click)=\"setSelected(true,true);$event.stopPropagation();\"\r\n             *ngFor=\"let condition of model.filter.configuredFilter.expressions\">\r\n            <div class=\"condition-input\">\r\n                <k2-drop-down tabindex=\"0\" class=\" filter-left-dropdown\"\r\n                              trianglePosition=\"right\"\r\n                              [menuItems]=\"filterPropList\"\r\n                              (onItemSelected)=\"onFilterPropSelected($event)\"\r\n                              customMenuClass=\"filter-left-menu\"\r\n                              (focus)=\"onFocus()\"\r\n                              (blur)=\"onBlur()\">\r\n                    <div class=\"k2-dd-flexChild k2-dd-rowParent k2-dd-container k2-dropdown-div icon-container\">\r\n                        <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                            <span [ngClass]=\"filterPropSelectedIcon\"></span>\r\n                        </div>\r\n                        <div class=\"k2-dd-flexChild k2-dd-text outcome-dd-text\">\r\n                            <span class=\"outcome-activity-title\">{{getDisplayName(condition.property)}}</span>\r\n                        </div>\r\n                        <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                            <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                            <k2-badges [k2Model]=\"condition\"\r\n                                       [alwaysHideBadge]=\"(!condition.errorInformation || condition.errorInformation.length == 0) && (condition.childErrorInformation && condition.childErrorInformation.length > 0)\">\r\n                            </k2-badges>\r\n                        </div>\r\n                    </div>\r\n                </k2-drop-down>\r\n            </div>\r\n            <div class=\"condition-operator\">\r\n                <span class=\"icon icon-size16 icon-set-conditionsdropdown ic-equals {{states.toString()}}\"></span>\r\n            </div>\r\n            <div class=\"condition-input\">\r\n                <k2-text-box class=\"control-background filter-right\"\r\n                             [k2Expression]=\"condition.rightExpression\"\r\n                             [k2Watermark]=\"getFromResx('Wizards', 'general_TypeDrop') | async\"\r\n                             (click)=\"setSelected(true,true); $event.stopPropagation();\"\r\n                             (k2TextboxOnFocus)=\"onFocus\"\r\n                             (k2TextboxOnBlur)=\"onBlur\"></k2-text-box>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n<ng-template #AllItemsAsCollection>\r\n    <div class=\"main-container\">\r\n        <div class=\"use-collection-description-wrapper\">\r\n            <span class=\"use-collection-description-text\">{{getFromResx(\"Wizards\", \"smartFieldComposer_MethodFilter_UseCollections_Description\")| async }}</span>\r\n            <a class=\"use-collection-learn-more-link hyperlink-control primary\" target=\"_blank\" [href]=\"learnMoreLinkUrl\">{{getFromResx(\"Resources\", \"Lean_More_Link_Text\")| async }}</a>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-container *ngTemplateOutlet=\"selectedTemplate\">\r\n\r\n</ng-container>\r\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnDestroy, OnInit, Output, TemplateRef, ViewChild } from '@angular/core';\r\nimport { IEnvironmentService } from '../../../../types/services/environment/i-environment-service';\r\nimport { IFilterPanelService } from '../../../../types/services/filter-panel/i-filter-panel';\r\nimport { IItemProviderService } from '../../../../types/services/item-provider/i-item-provider-service';\r\nimport { IPluginService } from '../../../../types/services/plugin/i-plugin-service';\r\nimport { IValidationService } from '../../../../types/services/validation/ivalidation.service';\r\nimport { ISmartFieldComposerOptions } from '../../../../types/uiComponents/smartFieldComposer/ISmartFieldComposerOptions';\r\nimport { EnvironmentServiceToken } from '../../../services/environment/environment-service-factory';\r\nimport { FilterPanelServiceToken } from '../../../services/filter-panel/filter-panel-service-factory';\r\nimport { ItemProviderServiceToken } from '../../../services/item-provider/item-provider-service-factory';\r\nimport { PluginServiceToken } from '../../../services/plugin/plugin-service-factory';\r\nimport { DataTypeResolverService } from '../../../services/plugins/data-type-resolver/data-type-resolver.service';\r\nimport { PopupService } from '../../../services/popup/popup.service';\r\nimport { ProcessService } from '../../../services/process/process.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { RulePluginService } from '../../../services/ruleplugin/rule-plugin-service';\r\nimport { UndoRedoServiceToken } from '../../../services/undo-redo/undo-redo-service-factory';\r\nimport { ValidationServiceToken } from '../../../services/validation/validation-service-factory';\r\nimport { ComponentIdMapping } from '../../../shared/constants/components';\r\nimport { plugins } from '../../../shared/constants/plugins';\r\nimport IDropDownMenuItem from '../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { FunctionOptions, SmartFieldFilters } from '../../../shared/enums/smart-field-composer/smart-field-composer';\r\n\r\n@Component({\r\n    selector: 'k2-smart-field-composer-plugin',\r\n    templateUrl: './smart-field-composer-plugin.component.html',\r\n    styleUrls: ['./smart-field-composer-plugin.component.less']\r\n})\r\nexport class SmartFieldComposerPluginComponent implements OnInit, OnDestroy {\r\n    @Input() composer: ISmartFieldComposerOptions;\r\n    @Input() index: number;\r\n\r\n    @Output() closeComposer = new EventEmitter<number>();\r\n    @Output() onSelected = new EventEmitter<ISmartFieldComposerOptions>();\r\n\r\n    @ViewChild('FormulaField') public FormulaField: TemplateRef<any>;\r\n    @ViewChild('ConditionalField') public ConditionalField: TemplateRef<any>;\r\n    @ViewChild('k2InlineFunctionField') public k2InlineFunctionField: TemplateRef<any>;\r\n    @ViewChild('k2SmartObjectField') public k2SmartObjectField: TemplateRef<any>;\r\n\r\n    @ViewChild('commandDrawerContent') public commandDrawerContent: ElementRef<HTMLElement>;\r\n\r\n    public selectedTemplate: TemplateRef<any>;\r\n    inputItems: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField[] = [];\r\n\r\n    FunctionOptions = FunctionOptions;\r\n    private listeners: sourceCode.k2Designer.objectModel.core.model.IEventRemover[] = [];\r\n\r\n    constructor(private _resourceService: ResourceService,\r\n        private _dataTypeResolverService: DataTypeResolverService,\r\n        @Inject(ItemProviderServiceToken) private _itemProviderService: IItemProviderService,\r\n        @Inject(PluginServiceToken) private _pluginService: IPluginService,\r\n        private _rulePluginService: RulePluginService,\r\n        @Inject(EnvironmentServiceToken) private _environmentService: IEnvironmentService,\r\n        private _processService: ProcessService,\r\n        @Inject(UndoRedoServiceToken) private _undoRedoService: IUndoRedoService,\r\n        @Inject(FilterPanelServiceToken) private _filterPanelService: IFilterPanelService,\r\n        @Inject(ValidationServiceToken) private _validationService: IValidationService,\r\n        private _popupService: PopupService) { }\r\n\r\n    ngOnInit(): void {\r\n        if (this.composer?.pluginConfig?.componentId === ComponentIdMapping.k2SmartObjectField) {\r\n            //init Root sourceCode.k2Designer.objectModel for later user\r\n            const smoField = this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField;\r\n            this._rootObj = smoField.getRoot();\r\n\r\n            //Assign External Reference to local for internal use.\r\n            this.smoExternalDefinition = (this._rootObj).findItem(smoField.externalReference);\r\n            this.smoMethodExternalDefinition = (this._rootObj).findItem(smoField.method.externalReference);\r\n            this.smoReturnPropertyExternalDefinition = (this._rootObj).findItem(smoField.method.returnProperty.externalReference);\r\n            for (const parameter of smoField.method.parameters) {\r\n                this.inputItems.push(parameter);\r\n            }\r\n\r\n            for (const property of smoField.method.inputProperties) {\r\n                if (this.getIsRequired(property) === true) {\r\n                    this.inputItems.push(property);\r\n                }\r\n            }\r\n\r\n            if (this.smoMethodExternalDefinition.type.toLowerCase() === 'list') {\r\n                this.convertFilterObject();\r\n                this.loadListMethodFilters();\r\n            }\r\n\r\n            this.displayOptionalPropertiesPanel = this.hasOptionalInputProperties() && this.smoMethodExternalDefinition.type.toLocaleLowerCase() !== 'list';\r\n        }\r\n        if (this.composer?.pluginConfig?.componentId === ComponentIdMapping.k2InlineFunctionField\r\n            && (this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IInlineFunctionField).functionName.toUpperCase() === 'UPDATEDATAFIELD') {\r\n            const data = this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IInlineFunctionField;\r\n            if (!data.parameters[0].value?.smartFields?.length) {\r\n                data.parameters[0].value = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                    smartFields: [sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.DataField.createInstance({\r\n                        dataFieldReference: ''\r\n                    })]\r\n                });\r\n            };\r\n            this.registerMappingValidation();\r\n        }\r\n        setTimeout(() => {\r\n            if (this.composer?.pluginConfig) {\r\n                this.selectedTemplate = this[ComponentIdMapping[this.composer.pluginConfig.componentId]];\r\n            }\r\n        }, 0);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this._environmentService.activeStudioItem.pluginStates.rulesDesigner === 'expanded' &&\r\n            this._rulePluginService.contextModel === (this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IConditionalField).rule) {\r\n            this.toggleRulesDesigner();\r\n        }\r\n        if (this.listeners?.length) {\r\n            for (const listener of this.listeners) {\r\n                if (listener) {\r\n                    listener();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    getFromResx = (resourceName: string, key: string) => this._resourceService.getFromResx(resourceName, key);\r\n\r\n    close(): void {\r\n        this.closeComposer.emit(this.index);\r\n    }\r\n\r\n    getIconByType(dataType: number) {\r\n        return this._dataTypeResolverService.getIconBySmartFieldType(dataType);\r\n    }\r\n\r\n    setSelectedComposer(composer: ISmartFieldComposerOptions) {\r\n        this.onSelected.emit(composer);\r\n    }\r\n\r\n    get currentComposerOpenInRuleDesigner(): boolean {\r\n        return this._environmentService.activeStudioItem.pluginStates.rulesDesigner === 'expanded' &&\r\n            ((this._rulePluginService.contextModel &&\r\n                this._rulePluginService.contextModel.instanceOf(sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredConditionalRule.implementor) &&\r\n                (<sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IConditionalField>this.composer.data).rule.getReference() === this._rulePluginService.contextModel.getReference()));\r\n    }\r\n\r\n    get rulesDesignerButtonText(): string {\r\n        if (this.currentComposerOpenInRuleDesigner) {\r\n            return this._environmentService.resourceService.getString('rulesDesigner_rulesContext_conditional_rule_close_rule_panel');\r\n        } else {\r\n            return this._environmentService.resourceService.getString('rulesDesigner_rulesContext_conditional_rule_open_rule_panel');\r\n        }\r\n    }\r\n\r\n    headingRefresh: boolean;\r\n\r\n    get composerHeading() {\r\n        return this.composer.data.customTitle || this.composer.data.title;\r\n    }\r\n\r\n    set composerHeading(value) {\r\n        if (!value && !this.composer.data.customTitle) {\r\n            this.headingRefresh = true;\r\n        }\r\n        this.composer.data.customTitle = value;\r\n        if (this.headingRefresh) {\r\n            setTimeout(() => {\r\n                this.headingRefresh = false;\r\n            });\r\n        }\r\n    }\r\n\r\n    getFunctionOptions(): IDropDownMenuItem[] {\r\n        return [\r\n            {\r\n                key: 'SaveFunction',\r\n                title: this._resourceService.getString('workflow_smartFieldComposer_saveFunction_title')\r\n            },\r\n            {\r\n                key: 'SaveResult',\r\n                title: this._resourceService.getString('workflow_smartFieldComposer_saveResult_title')\r\n            },\r\n            {\r\n                key: 'EditDesignTime',\r\n                title: this._resourceService.getString('workflow_smartFieldComposer_designTimeValue_title')\r\n            }\r\n        ];\r\n    }\r\n\r\n    bottomDataFieldSelected(item: any): void {\r\n        const dataModel = <sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IInlineFunctionField>this.composer.data;\r\n        switch (item.key) {\r\n            case 'SaveResult': {\r\n                break;\r\n            }\r\n            case 'EditDesignTime': {\r\n                break;\r\n            }\r\n            default: {\r\n                const instance = this._itemProviderService.getItemProviderByName(sourceCode.k2Designer.utilities.constants.PROVIDERNAMES.INLINEFUNCTIONS);\r\n\r\n                for (let i = 0; i < instance.rootItems.length; i++) {\r\n\r\n                    const item = instance.rootItems[i];\r\n\r\n                    if (item.name === 'SavedFunctions') {\r\n\r\n                        const newItem: sourceCode.k2Designer.objectModel.workflow.itemProvider.IInlineFunctionItem = sourceCode.k2Designer.objectModel.workflow.itemProvider.InlineFunctionItem.createInstance({\r\n                            parameters: dataModel.parameters.map(function(p: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IInlineFunctionParameter): sourceCode.k2Designer.objectModel.workflow.itemProvider.IInlineParameter {\r\n                                return sourceCode.k2Designer.objectModel.workflow.itemProvider.InlineParameter.createInstance({\r\n                                    title: p.title,\r\n                                    type: <number>p.type,\r\n                                    parameterType: p.parameterType\r\n                                });\r\n                            }),\r\n                            methodReturnType: dataModel.methodReturnType,\r\n                            className: dataModel.className,\r\n                            assemblyId: dataModel.assemblyId,\r\n                            title: dataModel.customTitle || dataModel.title,\r\n                            type: <number>dataModel.returnType,\r\n                            description: '',\r\n                            recentProvider: sourceCode.k2Designer.utilities.constants.PROVIDERNAMES.INLINEFUNCTIONS\r\n                        });\r\n\r\n                        item.items.push(<any>newItem);\r\n                    }\r\n                }\r\n\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    toggleCommandDrawer() {\r\n        this.composer.commandDrawerOpen = !this.composer.commandDrawerOpen;\r\n        if (this.composer.commandDrawerOpen) {\r\n            this.composer.commandDrawerHeight = $(this.commandDrawerContent.nativeElement).height();\r\n        } else {\r\n            this.composer.commandDrawerHeight = 0;\r\n        }\r\n    }\r\n\r\n    toggleRulesDesigner(): void {\r\n        this._rulePluginService.setDesignerContext('ConditionalRule', (this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IConditionalField).rule, null);\r\n        this._pluginService.toggleState(plugins.panels.rulesDesigner);\r\n    }\r\n\r\n    checkIfButtonEnabled(): boolean {\r\n        const currentField = ((this._rulePluginService.contextModel &&\r\n            this._rulePluginService.contextModel.instanceOf(sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredConditionalRule.implementor) &&\r\n            (<sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IConditionalField>this.composer.data).rule.getReference() === this._rulePluginService.contextModel.getReference()));\r\n\r\n\r\n        const ruleDesignerOpen = this._environmentService.activeStudioItem.pluginStates.rulesDesigner === 'expanded';\r\n\r\n        //Field busy editing or no active panels\r\n        return (ruleDesignerOpen === false || currentField) && this._environmentService.activeStudioItem.pluginStates.emailBody !== 'expanded';\r\n    }\r\n\r\n    collapseFilterPanel(): void {\r\n        //If the filter panel originated from a composer that has now been closed, call toggleCollaped to close the filter panel\r\n        if (this._filterPanelService.isFilterPanelOriginatedFrom(this.composer.data)) {\r\n            const filterPanelPlugIn: sourceCode.k2Designer.objectModel.plugin.IDefinition = this._pluginService.getPlugin('filterPanel').plgnDef;\r\n            this._environmentService.pluginService.toggleCollapsed(filterPanelPlugIn.name);\r\n        }\r\n    }\r\n\r\n    // Data Field only functions\r\n    private _dataFields: IDropDownMenuItem[];\r\n    get dataFields(): IDropDownMenuItem[] {\r\n        if (!this._dataFields) {\r\n            this.listeners.push(this._processService.root.configuration.dataFields\r\n                .listen(sourceCode.k2Designer.objectModel.core.model.EventTypes.anythingChanged, (): boolean => {\r\n                    this._dataFields = this.getDataFields();\r\n                    return true;\r\n                }));\r\n            this._dataFields = this.getDataFields();\r\n        }\r\n        return this._dataFields;\r\n    }\r\n\r\n    get selectedDataFieldDropDownItem() {\r\n        return this.dataFields.find((ddItem) => ddItem.isSelected);\r\n    }\r\n\r\n    private _dataFieldsDropDownFooterArray: IDropDownMenuItem[];\r\n    get dataFieldsDropDownFooterArray(): IDropDownMenuItem[] {\r\n        this._dataFieldsDropDownFooterArray ??= [{\r\n            key: 'createNew',\r\n            icon: 'icon-set-steps ic-dataevent',\r\n            title: this._resourceService.getString('workflow_dataFields_createNew'),\r\n            ignoreUpdateSelection: true,\r\n            hideCheckbox: true\r\n        }];\r\n        return this._dataFieldsDropDownFooterArray;\r\n    }\r\n\r\n    getDataFields(): IDropDownMenuItem[] {\r\n        const listOfDataFieldsDd: IDropDownMenuItem[] = [];\r\n\r\n        let savedDfReference = '';\r\n        if ((this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IInlineFunctionField).parameters.length > 0 &&\r\n            (this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IInlineFunctionField).parameters[0]?.value?.smartFields?.length) {\r\n\r\n            savedDfReference = ((this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IInlineFunctionField)\r\n                .parameters[0].value\r\n                .smartFields[0] as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IDataField).dataFieldReference;\r\n        }\r\n\r\n\r\n        if (this._environmentService.activeStudioItem && this._processService) {\r\n            for (let d = 0; d < this._processService.root.configuration.dataFields.length; d++) {\r\n                if (this._processService.root.configuration.dataFields[d].systemField !== true) {\r\n                    const dataField: IDropDownMenuItem =\r\n                    {\r\n                        icon: `icon icon-set-datatypes icon-size16 ic-${this._dataTypeResolverService.getSpriteClassFromDataType(this._processService.root.configuration.dataFields[d].type.toString())}`,\r\n                        key: this._processService.root.configuration.dataFields[d].getReference(),\r\n                        title: this._processService.root.configuration.dataFields[d].title\r\n                    };\r\n\r\n                    if (dataField.key === savedDfReference) {\r\n                        dataField.isSelected = true;\r\n                    }\r\n\r\n                    listOfDataFieldsDd.push(dataField);\r\n                }\r\n            }\r\n        }\r\n        return listOfDataFieldsDd.sort((a, b) => a.title.localeCompare(b.title));\r\n    }\r\n\r\n    dataFieldExists(dataFieldReference: string): boolean {\r\n        if (this._processService) {\r\n            const dataField: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IDataField = this._processService.root.findItem(dataFieldReference);\r\n            if (dataField) return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    onDataFieldDropDownItemSelected(item: IDropDownMenuItem): void {\r\n        this._undoRedoService.addUndoMarker('--updateDataField inline function: onDropDownItemSelected--');\r\n        if (item.key === 'createNew') {\r\n            for (let i = 0; i < this.dataFields.length; i++) {\r\n                this.dataFields[i].isSelected = false;\r\n            }\r\n            for (let i = 0; i < this._dataFieldsDropDownFooterArray.length; i++) {\r\n                this._dataFieldsDropDownFooterArray[i].isSelected = false;\r\n            }\r\n            this._processService.root.configuration.dataFields.push(sourceCode.k2Designer.objectModel.workflow.process.k2Process.DataField.createInstance({\r\n                title: this.getNewDataFieldTitle(),\r\n                type: sourceCode.k2Designer.objectModel.workflow.process.k2Process.DataFieldTypes.string,\r\n                isEmptyValue: true\r\n            }));\r\n            this._popupService.showDataFieldPopup(\r\n                this._processService.root.configuration,\r\n                this._processService.root.configuration.dataFields[this._processService.root.configuration.dataFields.length - 1],\r\n                this.onNewDataFieldRowCreated.bind(this, this._processService.root.configuration.dataFields[this._processService.root.configuration.dataFields.length - 1]),\r\n                this.onCancel.bind(this, this._processService.root.configuration.dataFields[this._processService.root.configuration.dataFields.length - 1]), this);\r\n        }\r\n        (this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IInlineFunctionField)\r\n            .parameters[0].value = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                smartFields:\r\n                    [\r\n                        sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.DataField.createInstance({\r\n                            dataFieldReference: item.key\r\n                        })\r\n                    ]\r\n            });\r\n    }\r\n\r\n    private getNewDataFieldTitle(): string {\r\n        const tmp: string = this._resourceService.getString('workflow_dataFields_defaultFieldName');\r\n        const prc: sourceCode.k2Designer.services.studioItem.workflow.ProcessService = this._environmentService.activeStudioItem.\r\n            getService<sourceCode.k2Designer.services.studioItem.workflow.ProcessService>(sourceCode.k2Designer.services.studioItem.workflow.ProcessService);\r\n\r\n        let newName: string = tmp;\r\n        let counter = 0;\r\n        let isOk = false;\r\n        while (!isOk) {\r\n            isOk = true;\r\n            for (let i = 0; i < prc.root.configuration.dataFields.length; i++) {\r\n                if (prc.root.configuration.dataFields[i].title === newName) {\r\n                    counter++;\r\n                    newName = tmp + ' ' + counter;\r\n                    isOk = false;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return newName;\r\n    }\r\n\r\n    getIconByRef(dataFieldReference: string): string {\r\n        if (this._processService) {\r\n            const dataField: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IDataField = this._processService.root.findItem(dataFieldReference);\r\n            if (dataField) {\r\n                return this._dataTypeResolverService.getSpriteClassFromDataType(dataField.type.toString());\r\n            }\r\n        }\r\n    }\r\n\r\n    onNewDataFieldRowCreated(item: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IDataField): void {\r\n        (this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IInlineFunctionField).parameters[0].value = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n            smartFields:\r\n                [\r\n                    sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.DataField.createInstance({\r\n                        dataFieldReference: item.getReference()\r\n                    })\r\n                ]\r\n        });\r\n        const field = this.dataFields.find((field) => field.key === item.getReference());\r\n        if (field) {\r\n            field.isSelected = true;\r\n        }\r\n    }\r\n\r\n    private onCancel(dataField: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IDataField) {\r\n        dataField.removeFromModelArray();\r\n    }\r\n\r\n    private registerMappingValidation(): void {\r\n        const data = this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.IInlineFunctionField;\r\n        if (data.parameters[0].value.smartFields[0]) {\r\n            const validatorItem = <sourceCode.k2Designer.objectModel.validationService.plugins.IValidatorItem>{\r\n                modelObject: data.parameters[0].value.smartFields[0],\r\n                propertyName: 'dataFieldReference',\r\n                errorSeverity: sourceCode.k2Designer.objectModel.core.model.ErrorSeverity.Error,\r\n                validationResourceTokens: ['resource_service_field_name_data_field'],\r\n                validationFailedMessage: 'resource_service_set_variable_empty_fied',\r\n                hideShowMeLink: false\r\n            };\r\n\r\n            this._validationService.evaluate([sourceCode.k2Designer.objectModel.core.model.ValidationTypes.Reference], validatorItem);\r\n        }\r\n        this.listeners.push(data.parameters[0]\r\n            .listen(sourceCode.k2Designer.objectModel.core.model.EventTypes.anythingChanged, (): boolean => {\r\n                if (data.parameters[0].value.smartFields.length === 0 ||\r\n                    data.parameters[0].value.smartFields[0].errorInformation.length === 0) {\r\n                    this._validationService.removeAllErrorsFrom(this.composer.data);\r\n                }\r\n                else {\r\n                    this._validationService.reevaluateErrors(data.parameters[0].value.smartFields[0].errorInformation);\r\n                }\r\n                return false;\r\n            }));\r\n    }\r\n    // -- Data Field only functions\r\n\r\n    //#region 'Smart Object Field only functions'\r\n    public isToggleFilterBtnHover: boolean;\r\n    public displayOptionalPropertiesPanel: boolean;\r\n    public smoExternalDefinition: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectField;\r\n    public smoMethodExternalDefinition: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectMethodField;\r\n    public smoReturnPropertyExternalDefinition: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectPropertyField;\r\n    public sMODropDownItems: IDropDownMenuItem[];\r\n    public get selectedFilterItem() {\r\n        return this.sMODropDownItems.find(item => item.isSelected);\r\n    }\r\n\r\n    private _rootObj: any;\r\n    private _tempConfiguredFilter: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredFilter;\r\n    /**\r\n     * Returns true if filter panel is currently open.\r\n     */\r\n    public isFilterActive(): boolean {\r\n        return this._filterPanelService.isPanelActive();\r\n    }\r\n\r\n    /**\r\n     * Returns true if filter open and populated with data from a different smartfield than the one currently in scope.\r\n     * Used to disable filter panel button if the filter panel is currently open and it is open from SmartField other than the one in scope\r\n     */\r\n    public shouldDisableFilterPanelButton(): boolean {\r\n        let context = this._filterPanelService.getContext();\r\n\r\n        if (this._filterPanelService.isPanelActive() === false && context) {\r\n            //filter panel is not open, but has a context, reset the panel origin to enable all custom buttons\r\n            this._filterPanelService.setContext(null);\r\n            context = this._filterPanelService.getContext();\r\n        }\r\n\r\n        //if filter panel is active and is not originated from this composer, disable the button (this is for when two composers with two buttons)\r\n        if (context && !this._filterPanelService.isFilterPanelOriginatedFrom(this.composer.data)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Open or close filter panel. Set context of filter panel if open.\r\n     * User Story 863264: Workflow Author: Optional Input Property Mapping for Inline SmartObject Load and Execute Methods UI Filter Panel Integration\r\n     */\r\n    public toggleFilterPanel(): void {\r\n        this.displayOptionalPropertiesPanel = this.hasOptionalInputProperties() && this.smoMethodExternalDefinition.type.toLocaleLowerCase() !== 'list';\r\n        this._filterPanelService.canConfigureFilter = !this.displayOptionalPropertiesPanel;\r\n        this._filterPanelService.canConfigureProperties = true;\r\n\r\n        this._pluginService.toggleState(plugins.panels.filterPanel);\r\n\r\n        if (this._filterPanelService.isPanelActive() === true) {\r\n            //panel is opened, save where the panel was opened\r\n            this.setFilterContext();\r\n        }\r\n        else {\r\n            //panel is closed, discard the origin\r\n            this._filterPanelService.setContext(null);\r\n        }\r\n\r\n        //close other empty associated panels\r\n        this._filterPanelService.closeEmptyAssociatedPanel();\r\n    }\r\n\r\n    /**\r\n     * This is for filtering a non-list method with optional properties\r\n     * User Story 863264: Workflow Author: Optional Input Property Mapping for Inline SmartObject Load and Execute Methods UI Filter Panel Integration\r\n     * This method creates a filter context object using the smartobject method's input and return properties\r\n     */\r\n    private setFilterContext(): void {\r\n        const method = (this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField).method;\r\n\r\n        //Set defaults if not exists:\r\n        if (!method.filter) {\r\n            method.filter = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.SmartObjectFieldMethodFilter.createInstance();\r\n            method.filter.configuredListOptions = sourceCode.k2Designer.objectModel.workflow.process.k2Process.SmartObjectListOptions.createInstance();\r\n        }\r\n        //To deploy inputMappings, filtertype must be of type custom\r\n        method.filter.filterType = sourceCode.k2Designer.utilities.CUSTOMFILTERKEY;\r\n\r\n        //Convert input and output properties to format that panel can consume\r\n        const inputProperties = this.convertPropertyCollectionForFilter(this.smoMethodExternalDefinition.inputs);\r\n        const returnProperties = this.convertPropertyCollectionForFilter(this.smoMethodExternalDefinition.returns);\r\n\r\n        const filterContext = <sourceCode.k2Designer.services.studio.IFilterPanelContext>{\r\n            field: this.smoMethodExternalDefinition,\r\n            configuredListOptions: null,\r\n            filterConfig: null,\r\n            savedUIValues: method.filter.savedUIValues,\r\n            inputMappings: method.filter.inputMappings,\r\n            smartField: (this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField),\r\n            inputProperties,\r\n            returnProperties\r\n        };\r\n\r\n        this._filterPanelService.setContext(filterContext);\r\n    }\r\n\r\n    /**\r\n     * Returns true if one or more input properties of method are optional\r\n     */\r\n    hasOptionalInputProperties(): boolean {\r\n        let hasOptionalProperties = false;\r\n        if (this.smoMethodExternalDefinition && this.smoMethodExternalDefinition.inputs) {\r\n            for (let i = 0; i < this.smoMethodExternalDefinition.inputs.length; i++) {\r\n                if (this.smoMethodExternalDefinition.inputs[i].isRequired != true) {\r\n                    hasOptionalProperties = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return hasOptionalProperties;\r\n    }\r\n\r\n    /**\r\n     * Takes the smoMethodExternalDefinition's inputs or returns (of type ISmartObjectPropertyField) and\r\n     * returns an object of type ISmartObjectItem with its items collection populated with the inputs or returns properties\r\n     *\r\n     * @param properties smoMethodExternalDefinition's inputs or returns\r\n     * @returns object of type ISmartObjectItem with its items collection populated with the inputs or returns properties\r\n     */\r\n    private convertPropertyCollectionForFilter(properties: sourceCode.k2Designer.objectModel.core.model.IModelArray<sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectPropertyField>): sourceCode.k2Designer.objectModel.workflow.itemProvider.ISmartObjectItem {\r\n\r\n        const itemCollection = sourceCode.k2Designer.objectModel.workflow.itemProvider.SmartObjectItem.createInstance();\r\n        for (let r = 0; r < properties.length; r++) {\r\n            const prop = properties[r];\r\n            const item = sourceCode.k2Designer.objectModel.workflow.itemProvider.SmartObjectItem.createInstance();\r\n            item.sysName = prop.systemName;\r\n            item.type = this._dataTypeResolverService.getSmartObjectItemType(prop.type);\r\n            item.name = prop.displayName;\r\n            item.isRequired = prop.isRequired;\r\n            itemCollection.items.push(item);\r\n        }\r\n\r\n        return itemCollection;\r\n    }\r\n\r\n\r\n    private getIsRequired(item: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField): boolean {\r\n        let isRequired = false;\r\n        const externalRef = this.getExternalReferenceString(item);\r\n\r\n        switch (item.componentId) {\r\n            case sourceCode.k2Designer.objectModel.core.deployment.LookupTypes.SmartObjectSmartFieldProperty:\r\n                const propRef = this._rootObj.findItem(externalRef);\r\n                isRequired = propRef ? propRef.isRequired : false;\r\n                break;\r\n            case sourceCode.k2Designer.objectModel.core.deployment.LookupTypes.SmartObjectSmartFieldParameter:\r\n            //Backwards compatibility, parameters use to show required even if it was not.\r\n                isRequired = true;\r\n\r\n                //Logic to get required from external definition if it exists (on new fields)\r\n                if (externalRef) {\r\n                    const parameterReference = this._rootObj.findItem(externalRef);\r\n                    if (parameterReference) {\r\n                        if (parameterReference.isRequired !== true) {\r\n                            isRequired = false;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                break;\r\n        }\r\n\r\n        return isRequired;\r\n    }\r\n\r\n    private convertFilterObject() {\r\n        const method = (this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField).method;\r\n\r\n        //if this field is working with the old version of the filter (methodFilter) let's convert it to the new (filter)\r\n        if (!method.filter?.filterType && method.methodFilter?.filterType) {\r\n\r\n            method.filter = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.SmartObjectFieldMethodFilter.createInstance();\r\n            (<sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectFieldMethodFilterExtension>method.filter).convertFrom(method.methodFilter);\r\n\r\n            method.methodFilter = null;\r\n        }\r\n\r\n        if (method.filter\r\n            && !method.filter.configuredListOptions.filterOption) {\r\n            method.filter.configuredListOptions =\r\n                sourceCode.k2Designer.objectModel.workflow.process.k2Process.SmartObjectListOptions.createInstance(<sourceCode.k2Designer.objectModel.workflow.process.k2Process.ISmartObjectListOptions>{\r\n                    filterOption: 'all',\r\n                    orderedBy: false,\r\n                    direction: 'ascending'\r\n                });\r\n        }\r\n    }\r\n\r\n    private loadListMethodFilters() {\r\n        const smoFilters = (this.composer.pluginConfig as any).filters;\r\n        this.sMODropDownItems ??= [];\r\n        for (let i = 0; i < smoFilters.length; i++) {\r\n            const smoFilter: any = smoFilters[i];\r\n            //this.filters[smoFilter.name] = smoFilter.template;\r\n            this.addSMODropdownItem(smoFilter.name);\r\n        }\r\n    }\r\n\r\n    private getExternalReferenceString(item: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField): string {\r\n        const isRequired = false;\r\n        let externalReference: string;\r\n\r\n        switch (item.componentId) {\r\n            case sourceCode.k2Designer.objectModel.core.deployment.LookupTypes.SmartObjectSmartFieldProperty:\r\n            case sourceCode.k2Designer.objectModel.core.deployment.LookupTypes.SmartObjectSmartFieldParameter:\r\n                externalReference = (item as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectFieldParameter).externalReference;\r\n                break;\r\n        }\r\n\r\n        return externalReference;\r\n    }\r\n\r\n    private addSMODropdownItem(key: string): IDropDownMenuItem {\r\n        const method = (this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField).method;\r\n        const dropdownItems = this.sMODropDownItems;\r\n        const count = dropdownItems.length;\r\n\r\n        if (count > 0) {\r\n            dropdownItems.push({\r\n                key: 'seperator-' + count,\r\n                isSeparator: true\r\n            });\r\n        }\r\n\r\n        const newItem: IDropDownMenuItem = {\r\n            key,\r\n            title: this._resourceService.getString(key),\r\n            isSelected: key === method.filter?.filterType ||\r\n                (!method.filter?.filterType && key === this._resourceService.getString('general_choose'))\r\n        };\r\n\r\n        //Store the filter values and settings if the user switches away from the FirstItemWhere... filter type\r\n        if (!this._tempConfiguredFilter && newItem.isSelected && newItem.key === SmartFieldFilters.FirstItemWhere) {\r\n            this._tempConfiguredFilter = (this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField).method.filter.configuredFilter;\r\n        }\r\n\r\n        dropdownItems.push(newItem);\r\n\r\n        return newItem;\r\n    }\r\n\r\n    getPropIconOf(type: string) {\r\n        if (type) {\r\n            return 'ic-' + type.replace('/', '').toLowerCase();\r\n        }\r\n        return 'ic-text';\r\n    }\r\n\r\n    getPropIconFromExternalRef(externalReference: string) {\r\n        const propRef = this._rootObj.findItem(externalReference);\r\n\r\n        if (propRef?.type) {\r\n            return this.getPropIconOf(propRef.type);\r\n        }\r\n\r\n        return 'ic-text';\r\n    }\r\n\r\n    onSMODropdownSelectionItem(item: IDropDownMenuItem): void {\r\n        this._undoRedoService.addUndoMarker('-- undo SMO option --');\r\n        this._undoRedoService.addCustomObjectUndoEvent(this, ['dropdownSelectedItemKey'], '-- undo SMO filter dropdown --');\r\n        this._undoRedoService.addCustomUndoEvent(this.undoDropdownItemSelection.bind(this), '-- custom undo event to revert the SMO filter dropdown --');\r\n\r\n        //Store the filter values and settings if the user switches away from the FirstItemWhere... filter type\r\n        if (!this._tempConfiguredFilter && this.selectedFilterItem.key === SmartFieldFilters.FirstItemWhere) {\r\n            this._tempConfiguredFilter = (this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField).method.filter.configuredFilter;\r\n        }\r\n\r\n        //close the filter panel when dropdown item other than 'custom' is selected\r\n        if (item.key !== SmartFieldFilters.Custom) {\r\n            this._filterPanelService.closePanel(this.composer.data);\r\n\r\n            //remove badge from composer SmartField\r\n            this._validationService.removeAllErrorsFrom(this.composer.data);\r\n        }\r\n        else {\r\n            this._validationService.reevaluateErrors((this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField).method.childErrorInformation);\r\n        }\r\n\r\n        this.configureDefaultFilterFor((this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField).method.filter, item.key);\r\n\r\n        this.closeChildComposersIfFilterToReturnAll();\r\n    }\r\n\r\n    private configureDefaultFilterFor(field: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectFieldMethodFilter, key: string) {\r\n        field.filterType = key;\r\n\r\n        const externalReference: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectMethodField =\r\n            this._rootObj.findItem((this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField).method.externalReference);\r\n        let defaultLeftProperty;\r\n\r\n        if (externalReference && externalReference.returns && externalReference.returns.length > 0) {\r\n            defaultLeftProperty = externalReference.returns[0];\r\n        }\r\n\r\n        let filterOption = 'all';\r\n        if (key === SmartFieldFilters.FirstItemWhere) {\r\n            filterOption = 'first';\r\n        }\r\n\r\n        switch (key) {\r\n            case SmartFieldFilters.AllItemsAsCollection:\r\n            case SmartFieldFilters.Custom:\r\n                field.configuredFilter = sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredFilter.createInstance();\r\n                break;\r\n            case SmartFieldFilters.FirstItemWhere:\r\n                if (this._tempConfiguredFilter) {\r\n                    field.configuredFilter = this._tempConfiguredFilter;\r\n                }\r\n\r\n                else {\r\n                    const firstItemWhereExpression = sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredFilterExpression.createInstance(<sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredFilterExpression>{\r\n                        rightExpression: sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance(),\r\n                        property: defaultLeftProperty ? defaultLeftProperty.getReference() : '',\r\n                        configuredOperator: 'equals',\r\n                        propertyType: defaultLeftProperty.type\r\n                    });\r\n\r\n                    field.configuredFilter = sourceCode.k2Designer.objectModel.core.configuredRules.ConfiguredFilter.createInstance(<sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredFilter>{\r\n                        expressions: [firstItemWhereExpression]\r\n                    });\r\n                }\r\n                break;\r\n        }\r\n\r\n        field.configuredListOptions = sourceCode.k2Designer.objectModel.workflow.process.k2Process.SmartObjectListOptions.createInstance(\r\n            <sourceCode.k2Designer.objectModel.workflow.process.k2Process.ISmartObjectListOptions>{\r\n                filterOption,\r\n                orderedBy: false,\r\n                orderedByProperty: defaultLeftProperty ? defaultLeftProperty.getReference() : '',\r\n                direction: 'ascending'\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Custom undo event that fires when the filter selection choice is undone\r\n     *\r\n     * @param isUndo\r\n     */\r\n    private undoDropdownItemSelection(isUndo: boolean): boolean {\r\n        //If undo was performed\r\n        if (isUndo) {\r\n            if (this.selectedFilterItem.key === SmartFieldFilters.Custom && this._environmentService.activeStudioItem.pluginStates.filterPanel === 'expanded') {\r\n                this._environmentService.pluginService.toggleCollapsed('filterPanel');\r\n            }\r\n\r\n            for (let d = 0; d < this.sMODropDownItems.length; d++) {\r\n                this.sMODropDownItems[d].isSelected = (this.composer.data as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField).method.filter.filterType === this.sMODropDownItems[d].key;\r\n            }\r\n        } else {\r\n            //If redo was performed\r\n            for (let d = 0; d < this.sMODropDownItems.length; d++) {\r\n                this.sMODropDownItems[d].isSelected = this.selectedFilterItem.key === this.sMODropDownItems[d].key;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private closeChildComposersIfFilterToReturnAll(): void {\r\n        if (this.selectedFilterItem.key === SmartFieldFilters.AllItemsAsCollection ||\r\n            this.selectedFilterItem.key === SmartFieldFilters.Custom) {\r\n            //let activeComposers: directives.k2SmartFieldComposer.ISmartFieldComposer[] = this._smartFieldComposerService.getActiveComposers();\r\n            //if (!utilities.isUndefinedOrNull(activeComposers)) {\r\n            //    for (let i: number = 0; i < activeComposers.length; i++) {\r\n\r\n            //        let currentComposerIndex = activeComposers[i].composers.indexOf((<any>this).composer);\r\n            //        if (currentComposerIndex > -1) {\r\n\r\n            //            let configuredSmartField: CoreConfiguredSmartFields.IConfiguredSmartField = activeComposers[i].composers[currentComposerIndex].data;\r\n            //            if (configuredSmartField.instanceOf(objectModel.workflow.configuredSmartFields.SmartObjectField.implementor) &&\r\n            //                ((<sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField>configuredSmartField).method.filter.filterType === utilities.ALLITEMSFILTER ||\r\n            //                    (<sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField>configuredSmartField).method.filter.filterType === utilities.CUSTOMFILTERKEY)) {\r\n\r\n            //                //Check if the filter type is All or Custom and if it is only close the current composer child composers if it is open.\r\n            //                if (currentComposerIndex + 1 <= activeComposers[i].composers.length - 1) {\r\n            //                    activeComposers[i].close(currentComposerIndex + 1);\r\n            //                    return;\r\n            //                }\r\n            //            }\r\n            //        }\r\n            //    }\r\n            //}\r\n        }\r\n    }\r\n\r\n    getDisplayName(externalRef: string): string {\r\n        let title = '';\r\n        const propRef: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectPropertyField = this._rootObj.findItem(externalRef);\r\n\r\n        if (propRef) {\r\n            title = propRef.displayName;\r\n        }\r\n\r\n        return title;\r\n    }\r\n\r\n    getSubTitle(item: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField): string {\r\n        const externalRef = this.getExternalReferenceString(item);\r\n        const propRef = this._rootObj.findItem(externalRef);\r\n        let subTitle = '';\r\n\r\n        if (propRef) {\r\n            const dataType = sourceCode.k2Designer.objectModel.workflow.itemProvider.SmartObjectItemTypes[propRef.type] as any;\r\n            subTitle = this._itemProviderService.getItemProviderByName(sourceCode.k2Designer.utilities.constants.PROVIDERNAMES.SMARTOBJECTS).getItemDisplayType(dataType);\r\n\r\n            if (this.smoMethodExternalDefinition?.parameters?.find(param => param.systemName === propRef.systemName)) {\r\n                subTitle = this._resourceService.getString('workflow_smartFieldComposer_SMO_Parameter');\r\n            }\r\n        }\r\n        return subTitle;\r\n    }\r\n\r\n    /**\r\n     * Gets the resourcified text for 'Open Configuration Panel' or 'Close Configuration Panel', depending\r\n     * on whether the panel is open or closed.\r\n     */\r\n    getFilterButtonText(): string {\r\n        let buttonText = '';\r\n\r\n        if (this._filterPanelService.isPanelActive() === true) {\r\n            buttonText = this._resourceService.getString('workflow_smartFieldComposer_SMO_filter_panel_close');\r\n        }\r\n        else {\r\n            buttonText = this._resourceService.getString('workflow_smartFieldComposer_SMO_filter_panel_open');\r\n        }\r\n\r\n        return buttonText;\r\n    }\r\n\r\n    getStringOf(key: string): string {\r\n        return this._resourceService.getString(key);\r\n    }\r\n    //endregion 'Smart Object Field only functions'\r\n}\r\n","<ng-template #FormulaField>\r\n    <div class=\"composer-inline-function\" k2-scrollbar-focus>\r\n        <!--smartFieldComposerPointer-->\r\n        <div class=\"composer-arrow\">\r\n            <div class=\"triangle-container\" *ngIf=\"index > 0\" [style.left]=\"composer.arrow.left + 'px'\">\r\n                <div class=\"textbox-connector\" [style.top.px]=\"composer.arrow.container.top\">\r\n                    <span class=\"icon icon-set-smartfieldeditor icon-size33 ic-blockarrow\"></span>\r\n                </div>\r\n                <div class=\"arrow-wrapper\">\r\n                    <div class=\"arrow-up\">\r\n                        <span class=\"icon icon-set-smartfieldeditor icon-size33 ic-functionblockarrow\"></span>\r\n                    </div>\r\n                    <div class=\"arrow-down\" [style]=\"{'top': composer.arrow.top + 'px'}\">\r\n                        <span class=\"icon icon-set-smartfieldeditor icon-size33 ic-blockarrow\"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"composer-close-button\">\r\n            <a (click)=\"close(index)\" class=\"icon icon-set-smartfieldeditor icon-size16 ic-closeeditor composerClose\"></a>\r\n        </div>\r\n        <!--End smartFieldComposerPointer-->\r\n\r\n        <div class=\"composer-container\" index=\"{{index}}\">\r\n            <div class=\"header\">\r\n                <div class=\"header-left\">\r\n                    <div style=\"float: left\">\r\n                        <span [ngClass]=\"getIconByType(composer.data.returnType)\" class=\"header-dd icon icon-set-datatypes icon-size24 selected\"></span>\r\n                    </div>\r\n                    <k2-click-to-edit class=\"header-title\" [(model)]=\"composerHeading\" *ngIf=\"!headingRefresh\"></k2-click-to-edit>\r\n                </div>\r\n                <div class=\"header-right\">\r\n                    <span *ngIf=\"composer.data.title\" [style]=\"composer.data.customTitle ? {'opacity' : '.6'} : {'opacity' : '0'}\" class=\"originalTitle\">{{composer.data.title}}</span>\r\n                    <a [ngClass]=\"composer.commandDrawerOpen ? 'btnOpen' : 'btnClosed'\" class=\"btnCommandDrawerToggle\" (click)=\"toggleCommandDrawer()\">\r\n                        <span class=\"icon icon-set-smartfieldeditor icon-size16 ic-drawertoggle\"></span>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <div [ngClass]=\"composer.commandDrawerOpen ? 'open' : 'commandDrawerClosed'\" class=\"commandDrawer\">\r\n                <div class=\"commandDrawerContent\" #commandDrawerContent>\r\n                    <div class=\"commandDrawerRow topRow\">\r\n                        <div class=\"commandDrawerIcon\">\r\n                            <span [ngClass]=\"getIconByType(composer.data.returnType)\" class=\"header-dd icon icon-set-datatypes icon-size24 selected\"></span>\r\n                        </div>\r\n                        <div class=\"commandDrawerDescription\">\r\n                            {{getFromResx(\"Wizards\", \"formula_composer_returns_a_decimal_value\")|async}}  {{composer.data.description}}\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"commandDrawerRow\">\r\n                        <div class=\"commandDrawerButtons\">\r\n                            <div class=\"commandDrawerLeft commandDrawerButton\" tabindex=\"0\">\r\n                                <div (click)='setSelectedComposer(composer); bottomDataFieldSelected(getFunctionOptions()[FunctionOptions.SaveFunction])' style=\"cursor: pointer;\">\r\n                                    <span class=\"icon icon-set-contextbrowser icon-size16 ic-savefunction16white\"></span>\r\n                                    <span class=\"buttonText\">{{getFunctionOptions()[FunctionOptions.SaveFunction].title}}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"commandDrawerRight commandDrawerButton\" tabindex=\"0\">\r\n                                <div style=\"cursor: pointer;\">\r\n                                    <span class=\"icon icon-set-contextbrowser icon-size16 ic-saveresult16white\"></span>\r\n                                    <span class=\"buttonText\">{{getFunctionOptions()[FunctionOptions.SaveResult].title}}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"content\" style=\"display: inline-block;\" index=\"{{index}}\">\r\n                <div>\r\n                    <div class=\"row row-item\">\r\n                        <div class=\"single\">\r\n                            <div class=\"input-icon-wrap no-border\">\r\n                                <div class=\"item-text\">\r\n                                    <span>{{composer.data.title}}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row row-item\">\r\n                        <div class=\"single\">\r\n                            <!-- The K2 textbox still needs to be bound to the Object Moddel -->\r\n                            <k2-text-box data-k2-validation=\"[{MathematicalValidator:{validationFailedMessage: 'resource_service_invalid_mathematical_expression'}}]\"\r\n                                         class=\"control-background textbox-border\"\r\n                                         [ngClass]=\"getIconByType(composer.data.returnType)\"\r\n                                         [k2Expression]=\"composer.data.value\"\r\n                                         k2Watermark=\"{{getFromResx('Wizards', 'general_TypeDrop' )|async}}\"\r\n                                         [k2Watermarkicon]=\"'watermark icon icon-set-datatypes icon-size24 ' + getIconByType(composer.data.returnType)\">\r\n                            </k2-text-box>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"content\" *ngIf=\"composer.data?.parameters?.length === 0\">\r\n                {{getFromResx(\"Wizards\", \"general_no_config\")|async}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n<ng-template #ConditionalField>\r\n    <div class=\"composer-inline-function\" k2-scrollbar-focus>\r\n        <!--smartFieldComposerPointer-->\r\n        <div class=\"composer-arrow\">\r\n            <div class=\"triangle-container\" *ngIf=\"index > 0\" [style.left.px]=\"composer.arrow.left\">\r\n                <div class=\"textbox-connector\" [ngClass]=\"{'hide' : ruleDesignerOpen}\" [style]=\"{'top': composer.arrow.container.top + 'px'}\">\r\n                    <span class=\"icon icon-set-smartfieldeditor icon-size33 ic-blockarrow\"></span>\r\n                </div>\r\n                <div class=\"arrow-wrapper\">\r\n                    <div class=\"arrow-up\">\r\n                        <span class=\"icon icon-set-smartfieldeditor icon-size33 ic-functionblockarrow\"></span>\r\n                    </div>\r\n                    <div class=\"arrow-down\" [style]=\"{'top': composer.arrow.top + 'px'}\">\r\n                        <span class=\"icon icon-set-smartfieldeditor icon-size33 ic-blockarrow\"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"composer-close-button\">\r\n            <a (click)=\"close(index)\" class=\"icon icon-set-smartfieldeditor icon-size16 ic-closeeditor composerClose\"></a>\r\n        </div>\r\n        <!--End smartFieldComposerPointer-->\r\n\r\n        <div class=\"composer-container\" index=\"{{index}}\">\r\n            <div class=\"header\">\r\n                <div class=\"header-left\">\r\n                    <div style=\"float: left\">\r\n                        <span [ngClass]=\"getIconByType(composer.data.returnType)\" class=\"header-dd icon icon-set-datatypes icon-size24 selected\"></span>\r\n                    </div>\r\n                    <k2-click-to-edit class=\"header-title\" [(model)]=\"composerHeading\" *ngIf=\"!headingRefresh\"></k2-click-to-edit>\r\n                </div>\r\n                <div class=\"header-right\">\r\n                    <span *ngIf=\"composer.data.title\" [style]=\"composer.data.customTitle ? {'opacity' : '.6'} : {'opacity' : '0'}\" class=\"originalTitle\">{{composer.data.title}}</span>\r\n                    <a [ngClass]=\"composer.commandDrawerOpen ? 'btnOpen' : 'btnClosed'\" class=\"btnCommandDrawerToggle\" (click)=\"toggleCommandDrawer()\">\r\n                        <span class=\"icon icon-set-smartfieldeditor icon-size16 ic-drawertoggle\"></span>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <div [ngClass]=\"composer.commandDrawerOpen ? 'open' : 'commandDrawerClosed'\" class=\"commandDrawer\">\r\n                <div class=\"commandDrawerContent\" #commandDrawerContent>\r\n                    <div class=\"commandDrawerRow topRow\">\r\n                        <div class=\"commandDrawerIcon\">\r\n                            <span [ngClass]=\"getIconByType(composer.data.returnType)\" class=\"header-dd icon icon-set-datatypes icon-size24 selected\"></span>\r\n                        </div>\r\n                        <div class=\"commandDrawerDescription\">\r\n                            {{getFromResx(\"Wizards\", \"composer_returns_an_any_value\")|async}}\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"commandDrawerRow\">\r\n                        <div class=\"commandDrawerButtons\">\r\n                            <div class=\"commandDrawerLeft commandDrawerButton\" tabindex=\"0\">\r\n                                <div (click)='setSelectedComposer(composer); bottomDataFieldSelected(getFunctionOptions()[FunctionOptions.SaveFunction])' style=\"cursor: pointer;\">\r\n                                    <span class=\"icon icon-set-contextbrowser icon-size16 ic-savefunction16white\"></span>\r\n                                    <span class=\"buttonText\">{{getFunctionOptions()[FunctionOptions.SaveFunction].title}}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"commandDrawerRight commandDrawerButton\" tabindex=\"0\">\r\n                                <div style=\"cursor: pointer;\">\r\n                                    <span class=\"icon icon-set-contextbrowser icon-size16 ic-saveresult16white\"></span>\r\n                                    <span class=\"buttonText\">{{getFunctionOptions()[FunctionOptions.SaveResult].title}}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"content simple-if-block\" *ngIf=\"composer.data?.rule?.statements\" index=\"{{index}}\">\r\n                <div>\r\n                    <div *ngIf=\"currentComposerOpenInRuleDesigner\" class=\"disabled-block edit\">\r\n                        <span class=\"icon icon-set-toolbar icon-size16 ic-edit disabled\"></span>\r\n                        <p class=\"text\">{{getFromResx(\"Wizards\", \"workflow_inline_composer_if_block_edit_in_rule_designer\")|async}}</p>\r\n                    </div>\r\n\r\n                    <div class=\"disabled-block complex\" *ngIf=\"!currentComposerOpenInRuleDesigner && (composer.data.rule.statements[0].IfExpressions[0].expressions.length !== 1 &&\r\n                (composer.data.rule.statements[0].thenStatements[0].IfExpressions ||\r\n                            (composer.data.rule.statements[0].thenStatements && composer.data.rule.statements[0].thenStatements.length !== 1)) &&\r\n                (composer.data.rule.statements[0].elseStatements[0].IfExpressions ||\r\n                            (composer.data.rule.statements[0].elseStatements && composer.data.rule.statements[0].elseStatements.length !== 1)))\">\r\n                        <span class=\"icon icon-set-blocks icon-size64 ic-complex\"></span>\r\n                        <p class=\"text\">{{getFromResx(\"Wizards\", \"workflow_inline_composer_if_block_complex\")|async}}</p>\r\n                    </div>\r\n\r\n                    <div class=\"fadeMeIn\">\r\n                        <div class=\"row row-item\">\r\n                            <div class=\"single\">\r\n                                <div class=\"input-icon-wrap no-border\">\r\n                                    <div class=\"item-text\">\r\n                                        <span>{{composer.data.title}}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"row row-item\">\r\n                            <div class=\"single if-block\">\r\n                                <div *ngIf=\"composer.data.rule.statements[0].IfExpressions[0].expressions.length !== 1\" class=\"disabled-block\">\r\n                                    <span class=\"icon icon-set-blocks icon-size32 ic-complex text-icon\"></span>\r\n                                    <span>{{getFromResx(\"Wizards\", \"workflow_inline_composer_if_block_complex\")|async}}</span>\r\n                                </div>\r\n                                <k2-group-expression sortable=\"false\"\r\n                                                     [nested]=\"true\"\r\n                                                     class=\"ruleFadeIn\"\r\n                                                     [hideSimpleExpressionDragGrip]=\"true\"\r\n                                                     [hideSimpleExpressionOperatorCommands]=\"true\"\r\n                                                     *ngIf=\"composer.data.rule.statements && !currentComposerOpenInRuleDesigner && composer.data.rule.statements[0].IfExpressions[0].expressions.length == 1\"\r\n                                                     [expressionModel]=\"composer.data.rule.statements[0].IfExpressions[0]\"></k2-group-expression>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row row-item\">\r\n                            <div class=\"split\">\r\n                                <div class=\"input-icon-wrap no-border\">\r\n                                    <div class=\"item-text\">\r\n                                        {{getFromResx(\"Wizards\", \"composer_if_then_block_then_header\")|async}}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"split\">\r\n                                <div class=\"input-icon-wrap no-border\">\r\n                                    <div class=\"item-text\">\r\n                                        {{getFromResx(\"Wizards\", \"composer_if_then_block_else_header\")|async}}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row row-item statement\">\r\n                            <div class=\"split\">\r\n                                <div *ngIf=\"composer.data.rule.statements[0].thenStatements[0].IfExpressions ||\r\n                            (composer.data.rule.statements[0].thenStatements && composer.data.rule.statements[0].thenStatements.length !== 1)\"\r\n                                     class=\"disabled-block\">\r\n                                    <span class=\"icon icon-set-blocks icon-size32 ic-complex text-icon\"></span>\r\n                                    <span>{{getFromResx(\"Wizards\", \"workflow_inline_composer_if_block_complex\")|async}}</span>\r\n                                </div>\r\n                                <k2-text-box class=\"control-background textbox-border\"\r\n                                             [ngClass]=\"getIconByType(composer.data.returnType)\"\r\n                                             [k2Expression]=\"composer.data.rule.statements[0].thenStatements[0].value\"\r\n                                             k2Watermark=\"{{getFromResx('Wizards', 'general_TypeDrop' )|async}}\"\r\n                                             *ngIf=\"composer.data.rule.statements[0].thenStatements && !currentComposerOpenInRuleDesigner && composer.data.rule.statements[0].thenStatements[0].value && !composer.data.rule.statements[0].thenStatements[0].IfExpressions\"\r\n                                             [k2Watermarkicon]=\"'watermark icon icon-set-datatypes icon-size24 ' + getIconByType(composer.data.returnType)\">\r\n                                </k2-text-box>\r\n                            </div>\r\n                            <div class=\"split\">\r\n                                <div *ngIf=\"composer.data.rule.statements[0].elseStatements[0].IfExpressions ||\r\n                            (composer.data.rule.statements[0].elseStatements && composer.data.rule.statements[0].elseStatements.length !== 1)\"\r\n                                     class=\"disabled-block\">\r\n                                    <span class=\"icon icon-set-blocks icon-size32 ic-complex text-icon\"></span>\r\n                                    <span>{{getFromResx(\"Wizards\", \"workflow_inline_composer_if_block_complex\")|async}}</span>\r\n                                </div>\r\n                                <k2-text-box class=\"control-background textbox-border\"\r\n                                             [ngClass]=\"getIconByType(composer.data.returnType)\"\r\n                                             *ngIf=\"composer.data.rule.statements[0].elseStatements && !currentComposerOpenInRuleDesigner && composer.data.rule.statements[0].elseStatements[0].value && !composer.data.rule.statements[0].elseStatements[0].IfExpressions\"\r\n                                             [k2Expression]=\"composer.data.rule.statements[0].elseStatements[0].value\"\r\n                                             k2Watermark=\"{{getFromResx('Wizards', 'general_TypeDrop' )|async}} \"\r\n                                             [k2Watermarkicon]=\"'watermark icon icon-set-datatypes icon-size24 ' + getIconByType(composer.data.returnType)\">\r\n                                </k2-text-box>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"content\">\r\n                    <div class=\"row row-item\">\r\n                        <div class=\"single\">\r\n                            <div [attr.title]=\"rulesDesignerButtonText\">\r\n                                <button class=\"panel-toggle-control margin-to-center\"\r\n                                        [ngClass]=\"{'selected':false, 'hover':isToggleBtnHover, 'is-disabled':!checkIfButtonEnabled() }\"\r\n                                        (click)=\"toggleRulesDesigner()\"\r\n                                        (mouseenter)=\"isToggleBtnHover = true\"\r\n                                        (mouseleave)=\"isToggleBtnHover = false\">\r\n                                    <div class=\"control-icon\">\r\n                                        <span class=\"icon icon-set-outcomes icon-size24 ic-rulestoggle \" [ngClass]=\"{'hover':isToggleBtnHover}\"></span>\r\n                                    </div>\r\n                                    <div class=\"control-content\">\r\n                                        <span>{{rulesDesignerButtonText}}</span>\r\n                                        <div class=\"title\">\r\n                                        </div>\r\n                                    </div>\r\n                                    <span class=\"pull-right icon icon-set-toolbox icon-size16 ic-expandmenu control-toggle-icon\" [ngClass]=\"{'hover':isToggleBtnHover}\"></span>\r\n                                    <k2-badges [k2Model]=\"composer.data.rule\"></k2-badges>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"content\" *ngIf=\"composer.data?.parameters?.length === 0\">\r\n                {{getFromResx(\"Wizards\", \"general_no_config\")|async}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n<ng-template #k2InlineFunctionField>\r\n    <div class=\"composer-inline-function\" k2-scrollbar-focus>\r\n        <!--smartFieldComposerPointer-->\r\n        <div class=\"composer-arrow\">\r\n            <div class=\"triangle-container\" *ngIf=\"index > 0\" [style.left.px]=\"composer.arrow.left\">\r\n\r\n                <div class=\"textbox-connector\" [style]=\"{'top': composer.arrow.container.top + 'px'}\">\r\n                    <span class=\"icon icon-set-smartfieldeditor icon-size33 ic-blockarrow\"></span>\r\n                </div>\r\n                <div class=\"arrow-wrapper\">\r\n                    <div class=\"arrow-up\">\r\n                        <span class=\"icon icon-set-smartfieldeditor icon-size33 ic-functionblockarrow\"></span>\r\n                    </div>\r\n                    <div class=\"arrow-down\" [style]=\"{'top': composer.arrow.top + 'px'}\">\r\n                        <span class=\"icon icon-set-smartfieldeditor icon-size33 ic-blockarrow\"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"composer-close-button\">\r\n            <a (click)=\"close(index)\" class=\"icon icon-set-smartfieldeditor icon-size16 ic-closeeditor composerClose\"></a>\r\n        </div>\r\n        <!--End smartFieldComposerPointer-->\r\n\r\n        <div class=\"composer-container\" index=\"{{index}}\">\r\n            <div class=\"header\" [ngClass]=\"{ 'ic-function-header-backround': composer.data.functionName.toUpperCase() === 'UPDATEDATAFIELD'}\">\r\n                <div class=\"header-left\">\r\n                    <div style=\"float: left\">\r\n                        <span [ngClass]=\"getIconByType(composer.data.returnType)\" class=\"header-dd icon icon-set-datatypes icon-size24 selected\"></span>\r\n                    </div>\r\n                    <k2-click-to-edit class=\"header-title\" [(model)]=\"composerHeading\" *ngIf=\"!headingRefresh\"></k2-click-to-edit>\r\n                </div>\r\n                <div class=\"header-right\">\r\n                    <span *ngIf=\"composer.data.customTitle\" [style]=\"composer.data.customTitle ? {'opacity' : '.6'} : {'opacity' : '0'}\" class=\"originalTitle\">{{composer.data.title}}</span>\r\n                    <a [ngClass]=\"composer.commandDrawerOpen ? 'btnOpen' : 'btnClosed'\" class=\"btnCommandDrawerToggle\" (click)=\"toggleCommandDrawer()\">\r\n                        <span class=\"icon icon-set-smartfieldeditor icon-size16 ic-drawertoggle\"></span>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <div [ngClass]=\"composer.commandDrawerOpen ? 'open' : 'commandDrawerClosed'\" class=\"commandDrawer\">\r\n                <div class=\"commandDrawerContent\" #commandDrawerContent>\r\n                    <div class=\"commandDrawerRow topRow\">\r\n                        <div class=\"commandDrawerIcon\">\r\n                            <span [ngClass]=\"getIconByType(composer.data.returnType)\" class=\"header-dd icon icon-set-datatypes icon-size24 selected\"></span>\r\n                        </div>\r\n                        <div class=\"commandDrawerDescription\">\r\n                            Returns a \"{{composer.data.displayType}}\" value.  {{composer.data.description}}\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"commandDrawerRow\">\r\n                        <div class=\"commandDrawerButtons\">\r\n                            <div class=\"commandDrawerLeft commandDrawerButton\" tabindex=\"0\">\r\n                                <div (click)='setSelectedComposer(composer); bottomDataFieldSelected(getFunctionOptions()[FunctionOptions.SaveFunction])' style=\"cursor: pointer;\">\r\n                                    <span class=\"icon icon-set-contextbrowser icon-size16 ic-savefunction16white\"></span>\r\n                                    <span class=\"buttonText\">{{getFunctionOptions()[FunctionOptions.SaveFunction].title}}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"commandDrawerRight commandDrawerButton\" tabindex=\"0\">\r\n                                <div style=\"cursor: pointer;\">\r\n                                    <span class=\"icon icon-set-contextbrowser icon-size16 ic-saveresult16white\"></span>\r\n                                    <span class=\"buttonText\">{{getFunctionOptions()[FunctionOptions.SaveResult].title}}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"content\" *ngIf=\"composer.data.parameters.length > 0\" style=\"display: inline-block;\" index=\"{{index}}\">\r\n                <!-- someArr still needs to be defined -->\r\n                <div *ngIf=\"composer.data.functionName.toUpperCase() !== 'UPDATEDATAFIELD' &&\r\n                (composer.data.parameters === undefined || composer.data.parameters === null || composer.data.parameters.length === 1)\">\r\n                    <div *ngFor=\"let parameter of composer.data.parameters\">\r\n                        <div class=\"row row-item\">\r\n                            <div class=\"single\">\r\n                                <div class=\"input-icon-wrap no-border\">\r\n                                    <div class=\"item-text\">\r\n                                        <span>{{composer.data.parameters[0].title}}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row row-item\">\r\n                            <div class=\"single\">\r\n                                <!-- The K2 textbox still needs to be bound to the Object Moddel -->\r\n                                <k2-text-box class=\"control-background textbox-border\"\r\n                                             [ngClass]=\"getIconByType(composer.data.parameters[0].type)\"\r\n                                             [k2Expression]=\"composer.data.parameters[0].value\"\r\n                                             k2Watermark=\"{{getFromResx('Wizards', 'general_TypeDrop' )|async}}\"\r\n                                             [k2Watermarkicon]=\"'watermark icon icon-set-datatypes icon-size24 ' + getIconByType(composer.data.parameters[0].type)\">\r\n                                </k2-text-box>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div *ngIf=\"composer.data.parameters.length === 2 && composer.data.functionName.toUpperCase() !== 'UPDATEDATAFIELD'\">\r\n                    <div>\r\n                        <div class=\"row row-item\">\r\n                            <div class=\"split\" *ngFor=\"let parameter of composer.data.parameters\">\r\n                                <div class=\"input-icon-wrap no-border\">\r\n                                    <div class=\"item-text\">\r\n                                        <span>{{parameter.title}}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row row-item\">\r\n                            <div class=\"split\" *ngFor=\"let parameter of composer.data.parameters\">\r\n                                <!-- The K2 textbox still needs to be bound to the Object Moddel -->\r\n                                <k2-text-box class=\"control-background textbox-border\"\r\n                                             [ngClass]=\"getIconByType(composer.data.parameters[0].type)\"\r\n                                             [k2Expression]=\"parameter.value\"\r\n                                             k2Watermark=\"{{getFromResx('Wizards', 'general_TypeDrop')|async}}\"\r\n                                             [k2Watermarkicon]=\"'watermark icon icon-set-datatypes icon-size24 ' + getIconByType(parameter.type)\">\r\n                                </k2-text-box>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div *ngIf=\"composer.data.parameters.length === 3 && composer.data.functionName.toUpperCase() !== 'UPDATEDATAFIELD'\">\r\n                    <div class=\"row row-item\">\r\n                        <div class=\"single\">\r\n                            <div class=\"input-icon-wrap no-border\">\r\n                                <div class=\"item-text\">\r\n                                    <span>{{composer.data.parameters[0].title}}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row row-item\">\r\n                        <div class=\"single\">\r\n                            <!-- The K2 textbox still needs to be bound to the Object Moddel -->\r\n                            <k2-text-box class=\"control-background textbox-border\"\r\n                                         [ngClass]=\"getIconByType(composer.data.parameters[0].type)\"\r\n                                         [k2Expression]=\"composer.data.parameters[0].value\"\r\n                                         k2Watermark=\"{{getFromResx('Wizards', 'general_TypeDrop' )|async}}\"\r\n                                         [k2Watermarkicon]=\"'watermark icon icon-set-datatypes icon-size24 ' + getIconByType(composer.data.parameters[0].type)\">\r\n                            </k2-text-box>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row row-item\">\r\n                        <div class=\"split\">\r\n                            <div class=\"input-icon-wrap no-border\">\r\n                                <div class=\"item-text\">\r\n                                    <span>{{composer.data.parameters[1].title}}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"split\">\r\n                            <div class=\"input-icon-wrap no-border\">\r\n                                <div class=\"item-text\">\r\n                                    <span>{{composer.data.parameters[2].title}}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row row-item\">\r\n                        <div class=\"split\">\r\n                            <!-- The K2 textbox still needs to be bound to the Object Moddel -->\r\n                            <k2-text-box class=\"control-background textbox-border\"\r\n                                         [ngClass]=\"getIconByType(composer.data.parameters[0].type)\"\r\n                                         [k2Expression]=\"composer.data.parameters[1].value\"\r\n                                         k2Watermark=\"{{getFromResx('Wizards', 'general_TypeDrop' )|async}}\"\r\n                                         [k2Watermarkicon]=\"'watermark icon icon-set-datatypes icon-size24 ' + getIconByType(composer.data.parameters[1].type)\">\r\n                            </k2-text-box>\r\n                        </div>\r\n                        <div class=\"split\">\r\n                            <!-- The K2 textbox still needs to be bound to the Object Moddel -->\r\n                            <k2-text-box class=\"control-background textbox-border\"\r\n                                         [ngClass]=\"getIconByType(composer.data.parameters[0].type)\"\r\n                                         [k2Expression]=\"composer.data.parameters[2].value\"\r\n                                         k2Watermark=\"{{getFromResx('Wizards', 'general_TypeDrop' )|async}}\"\r\n                                         [k2Watermarkicon]=\"'watermark icon icon-set-datatypes icon-size24 ' + getIconByType(composer.data.parameters[2].type)\">\r\n                            </k2-text-box>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div *ngIf=\"composer.data.parameters.length >= 4 && composer.data.functionName.toUpperCase() !== 'UPDATEDATAFIELD'\">\r\n                    <div class=\"paramTable\">\r\n                        <div *ngFor=\"let parameter of composer.data.parameters\" class=\"paramRow\" [ngClass]=\"{'first' : index === 0, 'last' : index === composer.data.parameters.length}\">\r\n                            <div class=\"paramCell paramLabel\">\r\n                                <span>{{parameter.title}}</span>\r\n                            </div>\r\n                            <div class=\"paramCell paramInput\">\r\n                                <k2-text-box [ngClass]=\"getIconByType(composer.data.parameters[0].type)\"\r\n                                             class=\"control-background textbox-border\"\r\n                                             [k2Expression]=\"parameter.value\"\r\n                                             k2Watermark=\"{{getFromResx('Wizards', 'general_TypeDrop' )|async}}\"\r\n                                             [k2Watermarkicon]=\"'watermark icon icon-set-datatypes icon-size24 ' + getIconByType(composer.data.parameters[2].type)\">\r\n                                </k2-text-box>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"row row-item update-datafield\" *ngIf=\"composer.data.functionName.toUpperCase() === 'UPDATEDATAFIELD'\">\r\n                    <div class=\"split\">\r\n                        <!-- The K2 textbox still needs to be bound to the Object Moddel -->\r\n                        <k2-drop-down class=\"k2-dropdown-parent\"\r\n                                      [menuItems]=\"dataFields\"\r\n                                      [footerItems]=\"dataFieldsDropDownFooterArray\"\r\n                                      (onItemSelected)=\"onDataFieldDropDownItemSelected($event)\">\r\n                            <div class=\"k2-dd-flexChild k2-dd-rowParent k2-dd-container k2-control control-background k2-dropdown-div\"\r\n                                 (mouseenter)=\"hover = true\"\r\n                                 (mouseleave)=\"hover = false\">\r\n                                <div class=\"k2-dd-icon\" *ngIf=\"selectedDataFieldDropDownItem?.key\" [ngClass]=\"{ 'data-field-dd-icon-background': dataFieldExists(selectedDataFieldDropDownItem.key)}\">\r\n                                    <span class=\"header-dd icon icon-set-datatypes icon-size16 ic-{{getIconByRef(selectedDataFieldDropDownItem.key)}} dark selected\"></span>\r\n                                </div>\r\n\r\n                                <div class=\"k2-dd-flexChild k2-dd-text italic\" *ngIf=\"!selectedDataFieldDropDownItem?.key || !dataFieldExists(selectedDataFieldDropDownItem?.key)\">{{getFromResx(\"Wizards\", \"control_Property_Mapper_Pick_Field\")|async}}</div>\r\n                                <div class=\"k2-dd-flexChild k2-dd-text\" [innerHtml]=\"selectedDataFieldDropDownItem.title\" *ngIf=\"selectedDataFieldDropDownItem?.key && dataFieldExists(selectedDataFieldDropDownItem.key)\"></div>\r\n\r\n                                <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                                    <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\" [ngClass]=\"{ 'hover' : hover }\"></span>\r\n                                </div>\r\n                            </div>\r\n                        </k2-drop-down>\r\n                        <k2-badges *ngIf=\"composer.data.parameters[0].value && composer.data.parameters[0].value.smartFields && composer.data.parameters[0].value.smartFields.length > 0\"\r\n                                   [k2Model]=\"composer.data.parameters[0].value.smartFields[0]\"></k2-badges>\r\n                    </div>\r\n                    <div class=\"split\">\r\n                        <!-- The K2 textbox still needs to be bound to the Object Moddel -->\r\n                        <k2-text-box class=\"control-background textbox-border\"\r\n                                     [ngClass]=\"getIconByType(composer.data.parameters[1].type)\"\r\n                                     [k2Expression]=\"composer.data.parameters[1].value\"\r\n                                     k2Watermark=\"{{getFromResx('Wizards', 'general_TypeDrop' )|async}}\"\r\n                                     [k2Watermarkicon]=\"'watermark icon icon-set-datatypes icon-size24 ' + getIconByType(composer.data.parameters[1].type)\">\r\n                        </k2-text-box>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"content\" *ngIf=\"composer.data?.parameters?.length === 0\">\r\n                {{getFromResx(\"Wizards\", \"general_no_config\")|async}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n<ng-template #k2SmartObjectField>\r\n    <div class=\"composer-smart-object\" k2-scrollbar-focus>\r\n        <!--smartFieldComposerPointer-->\r\n        <div class=\"composer-arrow\">\r\n            <div class=\"triangle-container\" *ngIf=\"index > 0\" [style.left.px]=\"composer.arrow.left\">\r\n                <div class=\"textbox-connector\" [style.top.px]=\"composer.arrow.container.top\">\r\n                    <span class=\"icon icon-set-smartfieldeditor icon-size33 ic-blockarrow\"></span>\r\n                </div>\r\n                <div class=\"arrow-wrapper\">\r\n                    <div class=\"arrow-up\">\r\n                        <span class=\"icon icon-set-smartfieldeditor icon-size33 ic-smartobjectblockarrow\"></span>\r\n                    </div>\r\n                    <div class=\"arrow-down\" [style.top.px]=\"composer.arrow.top\">\r\n                        <span class=\"icon icon-set-smartfieldeditor icon-size33 ic-blockarrow\"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--End smartFieldComposerPointer-->\r\n\r\n        <div class=\"composer-close-button\">\r\n            <a (click)=\"collapseFilterPanel();close();\" class=\"icon icon-set-smartfieldeditor icon-size16 ic-closeeditor composerClose\"></a>\r\n        </div>\r\n        <div class=\"composer-container\" [attr.index]=\"index\">\r\n            <!-- HEADER -->\r\n            <div class=\"header\">\r\n                <div class=\"header-left smo-header\">\r\n                    <span class=\"smo-header-left\">\r\n                        <span class=\"icon icon-set-steps icon-size24 ic-smartformstask selected\"></span>\r\n                        <span title=\"{{smoExternalDefinition.displayName}}\" class=\"title\">{{smoExternalDefinition.displayName}}</span>\r\n                    </span>\r\n                    <span class=\"smo-header-right\">\r\n                        <span [ngClass]=\"getPropIconOf(smoReturnPropertyExternalDefinition.type)\" class=\"icon icon-sprite icon-set-datatypes icon-size24 selected\"></span>\r\n                        <span title=\"{{smoReturnPropertyExternalDefinition.displayName}}\" class=\"title\">{{smoReturnPropertyExternalDefinition.displayName}}</span>\r\n                    </span>\r\n                </div>\r\n                <div class=\"header-right\">\r\n                    <a [ngClass]=\"composer.commandDrawerOpen ? 'btnOpen' : 'btnClosed'\" class=\"btnCommandDrawerToggle\" (click)=\"toggleCommandDrawer()\">\r\n                        <span class=\"icon icon-set-smartfieldeditor icon-size16 ic-drawertoggle\"></span>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <!-- END OF HEADER -->\r\n\r\n            <div class=\"commandDrawer\" [style]=\"{'height': composer.commandDrawerHeight + 'px'}\">\r\n                <div class=\"commandDrawerContent\" #commandDrawerContent>\r\n                    <div *ngIf=\"!smoMethodExternalDefinition?.description?.trim()\" class=\"commandDrawerRow\">\r\n                        <span class=\"multiline-ellipsis\" title=\"{{smoMethodExternalDefinition.description}}\">\r\n                            {{smoMethodExternalDefinition.description}}\r\n                        </span>\r\n                    </div>\r\n                    <div class=\"commandDrawerRow\">\r\n                        <div class=\"smo-method\">\r\n                            <span class=\"icon icon-set-toolbar icon-size16 ic-methodalt selected\"></span>\r\n                            <span title=\"{{smoMethodExternalDefinition.displayName}}\" class=\"title\">{{smoMethodExternalDefinition.displayName}}</span>\r\n                        </div>\r\n                        <!--Save Result button-->\r\n                        <!-- <div class=\"commandDrawerButtons\">\r\n                             <div class=\"commandDrawerLeft commandDrawerButton\" tabindex=\"0\">\r\n                                 <div (click)='setSelectedComposer(composer); bottomDataFieldSelected(getFunctionOptions()[FunctionOptions.SaveFunction])' style=\"cursor: pointer;\">\r\n                                     <span class=\"icon icon-set-contextbrowser icon-size16 ic-savefunction16white\"></span>\r\n                                     <span class=\"buttonText\">{{getFunctionOptions()[FunctionOptions.SaveFunction].title}}</span>\r\n                                 </div>\r\n                             </div>\r\n\r\n                             <div class=\"commandDrawerRight commandDrawerButton\" tabindex=\"0\">\r\n                                 <div style=\"cursor: pointer;\">\r\n                                     <span class=\"icon icon-set-contextbrowser icon-size16 ic-saveresult16white\"></span>\r\n                                     <span class=\"buttonText\">{{getFunctionOptions()[FunctionOptions.SaveResult].title}}</span>\r\n                                 </div>\r\n                             </div>\r\n                         </div>-->\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"smoMethodExternalDefinition.type === 'list'\" class=\"smartobject-method-filter\">\r\n                <!--Filter Type  Dropdown-->\r\n                <k2-drop-down tabindex=\"0\" class=\"filter-dropdown k2-dropdown-parent\"\r\n                              [menuItems]=\"sMODropDownItems\"\r\n                              (onItemSelected)=\"onSMODropdownSelectionItem($event)\"\r\n                              [customMenuClass]=\"smartobject-filter-menu\">\r\n                    <div class=\"k2-dd-flexChild k2-dd-rowParent k2-dd-container k2-control control-background k2-dropdown-div icon-container\">\r\n                        <div class=\"k2-dd-flexChild k2-dd-text\">\r\n                            {{getStringOf(selectedFilterItem.key)}}\r\n                        </div>\r\n                        <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                            <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                        </div>\r\n                    </div>\r\n                </k2-drop-down>\r\n                <!--END Filter Type Dropdown-->\r\n                <!--Filter definition content-->\r\n                <k2-smart-field-composer-filter class=\"filter-content\" [composer]=\"composer\" [model]=\"composer.data.method\" [template]=\"selectedFilterItem.key\" *ngIf=\"composer?.data?.method\"></k2-smart-field-composer-filter>\r\n                <!--END Filter definition content-->\r\n            </div>\r\n\r\n            <div *ngIf=\"inputItems?.length > 0\" class=\"content\" index=\"{{index}}\">\r\n                <div *ngFor=\"let item of inputItems\">\r\n                    <div class=\"row row-item\">\r\n                        <div class=\"split smo-item-text\">\r\n                            <span class=\"smo-prop-icon\">\r\n                                <span [ngClass]=\"getPropIconFromExternalRef(item.externalReference)\" class=\"icon icon-sprite icon-set-datatypes icon-size24\"></span>\r\n                            </span>\r\n                            <span class=\"smo-prop\">\r\n                                <span class=\"title\" title=\"{{getDisplayName(item.externalReference)}}\">{{getDisplayName(item.externalReference)}}</span>\r\n                                <span class=\"sub-title\" title=\"{{getSubTitle(item)}}\">{{getSubTitle(item)}}</span>\r\n                            </span>\r\n                            <span *ngIf=\"getIsRequired(item)\" class=\"smo-prop-icon\" title=\"Required\">\r\n                                <span class=\"icon icon-set-indicators icon-size16 ic-locked\"></span>\r\n                            </span>\r\n                        </div>\r\n                        <div class=\"split smo-item-value\">\r\n                            <k2-text-box class=\"control-background\"\r\n                                         [ngClass]=\"getPropIconFromExternalRef(item.externalReference)\"\r\n                                         [k2Expression]=\"item.value\"\r\n                                         k2Watermark=\"{{getFromResx('Wizards', 'general_TypeDrop' )|async}}\">\r\n                            </k2-text-box>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"inputItems?.length === 0 && smoMethodExternalDefinition.type === 'execute'\" class=\"content no-config\">\r\n                {{getFromResx(\"Wizards\", \"general_no_config\")|async}}\r\n            </div>\r\n\r\n            <div class=\"content\" *ngIf=\"displayOptionalPropertiesPanel\">\r\n                <button class=\"panel-toggle-control margin-to-center\"\r\n                        [ngClass]=\"{'selected':isFilterActive(), 'hover':isToggleBtnHover, 'is-disabled':shouldDisableFilterPanelButton() }\"\r\n                        (click)=\"toggleFilterPanel()\"\r\n                        (mouseenter)=\"isToggleFilterBtnHover = true\"\r\n                        (mouseleave)=\"isToggleFilterBtnHover = false\"\r\n                        [attr.tabindex]=\"tabIndexEnabledForFilter\">\r\n                    <div class=\"control-icon\">\r\n                        <span class=\"icon icon-set-outcomes icon-size24 ic-rulestoggle \" [ngClass]=\"{'hover':isToggleFilterBtnHover}\"></span>\r\n                    </div>\r\n                    <div class=\"control-content\">\r\n                        <div class=\"title\">\r\n                            <span>{{getFilterButtonText()}}</span>\r\n                        </div>\r\n                    </div>\r\n                    <span class=\"pull-right icon icon-set-toolbox icon-size16 ic-expandmenu control-toggle-icon\" [ngClass]=\"{'hover':isToggleFilterBtnHover}\"></span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-container *ngTemplateOutlet=\"selectedTemplate\">\r\n\r\n</ng-container>\r\n","import { Component, OnInit, Inject, ElementRef, OnDestroy, ViewChild, HostBinding } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { IEnvironmentService } from '../../../../types/services/environment/i-environment-service';\r\nimport { IFilterPanelService } from '../../../../types/services/filter-panel/i-filter-panel';\r\nimport { IPluginService } from '../../../../types/services/plugin/i-plugin-service';\r\nimport { IInlineSmartField } from '../../../../types/uiComponents/smartFieldComposer/i-inline-smart-field';\r\nimport { ILearnSmartFieldComposer } from '../../../../types/uiComponents/smartFieldComposer/ILearnSmartFieldComposer';\r\nimport { ISmartFieldComposer } from '../../../../types/uiComponents/smartFieldComposer/ISmartFieldComposer';\r\nimport { ISmartFieldComposerOptions } from '../../../../types/uiComponents/smartFieldComposer/ISmartFieldComposerOptions';\r\nimport { EnvironmentServiceToken } from '../../../services/environment/environment-service-factory';\r\nimport { EventNotifierService } from '../../../services/event-notifier/event-notifier.service';\r\nimport { FilterPanelServiceToken } from '../../../services/filter-panel/filter-panel-service-factory';\r\nimport { PluginServiceToken } from '../../../services/plugin/plugin-service-factory';\r\nimport { DataTypeResolverService } from '../../../services/plugins/data-type-resolver/data-type-resolver.service';\r\nimport { ResourceService } from '../../../services/resource/resource.service';\r\nimport { UserOptionsServiceToken } from '../../../services/user-options/user-options-service-factory';\r\nimport { OpenSmartFieldComposerEvent } from '../../../shared/constants/events';\r\nimport { plugins } from '../../../shared/constants/plugins';\r\nimport IDropDownMenuItem from '../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { SmartFieldContainerComponent } from '../smart-field-container/smart-field-container.component';\r\n\r\n@Component({\r\n    selector: 'k2-smart-field-composer',\r\n    templateUrl: './smart-field-composer.component.html',\r\n    styleUrls: ['./smart-field-composer.component.less']\r\n})\r\nexport class SmartFieldComposerComponent implements OnInit, OnDestroy, ISmartFieldComposer {\r\n    selectedFunctionFieldIcon: string;\r\n    composerHeading: string;\r\n    selectedItem: IDropDownMenuItem;\r\n    commandDrawerOpen: boolean;\r\n    learnComposer: ILearnSmartFieldComposer;\r\n    composers: ISmartFieldComposerOptions[];\r\n    isActive: boolean;\r\n    isHideFlex: boolean;\r\n    linkto: string;\r\n\r\n    private _isOpened: boolean;\r\n    private _wheelEventHandler: EventListenerObject;\r\n    private openSmartFieldComposerSub: Subscription;\r\n\r\n    @ViewChild('sfcContainer') sfcContainer: ElementRef<HTMLElement>;\r\n    @ViewChild('target') targetElement: ElementRef<HTMLElement>;\r\n    @ViewChild('targetContent') targetContentElement: ElementRef<HTMLElement>;\r\n    @ViewChild('mainContent') mainContent: ElementRef<HTMLElement>;\r\n    @ViewChild('container') containerElement: ElementRef<HTMLElement>;\r\n    @ViewChild('overlay') overlayElement: ElementRef<HTMLElement>;\r\n    @ViewChild('arrow') arrowElement: ElementRef<HTMLElement>;\r\n\r\n    private _config: {\r\n        COMPOSER_WINDOW_PADDING: number;\r\n        animationClassName: string;\r\n        top: number;\r\n        left: number;\r\n        transitionDurationInMillisecond: string;\r\n        position: ClientRect;\r\n        inlineSmartField: IInlineSmartField;\r\n    };\r\n\r\n    constructor(private _element: ElementRef<HTMLElement>,\r\n        private resourceService: ResourceService,\r\n        @Inject(UserOptionsServiceToken) private _userOptionsService,\r\n        @Inject(FilterPanelServiceToken) private _filterPanelService: IFilterPanelService,\r\n        _eventService: EventNotifierService,\r\n        private _dataTypeResolverService: DataTypeResolverService,\r\n        @Inject(PluginServiceToken) private _pluginService: IPluginService) {\r\n        this.composers = [];\r\n        this.learnComposer = {\r\n            hidden: false\r\n        };\r\n        this.openSmartFieldComposerSub = _eventService.subscribe(OpenSmartFieldComposerEvent, (options: ISmartFieldComposerOptions) => {\r\n            if (this._element.nativeElement.contains(options.smartField.element.nativeElement)) { // only open if the event comes from a child\r\n                this.open(options);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Set the smart-field-composer element to be invisible to css\r\n    @HostBinding('class.contents')\r\n    ngOnInit(): void {\r\n        this._config = {\r\n            top: 0,\r\n            left: 0,\r\n            transitionDurationInMillisecond: '0ms',\r\n            animationClassName: 'k2-SFC-Progress',\r\n            position: this.getPosition(this._element.nativeElement),\r\n            COMPOSER_WINDOW_PADDING: 10,\r\n            inlineSmartField: <any>{},\r\n        };\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.openSmartFieldComposerSub.unsubscribe();\r\n    }\r\n\r\n    getFromResx = (resourceName: string, key: string) => this.resourceService.getFromResx(resourceName, key);\r\n\r\n    public closeLearnComposer() {\r\n        this._userOptionsService.setTipValue(sourceCode.k2Designer.objectModel.workflow.itemProvider.UserOptionsTipTypes.SmartFieldEditorTips, false);\r\n        this.learnComposer.hidden = true;\r\n    }\r\n\r\n    //#region 'Inline Composer UI events'\r\n    private getTypes(): IDropDownMenuItem[] {\r\n        const types: sourceCode.k2Designer.objectModel.core.model.IEnumLookupPair[] = sourceCode.k2Designer.objectModel.core.configuredSmartFields.GetConfiguredSmartFieldTypesList();\r\n        const dropDownItems: IDropDownMenuItem[] = [];\r\n\r\n        if (types !== null && types !== undefined) {\r\n            let newdropDownItem: IDropDownMenuItem;\r\n            for (let i = 0; i < types.length; i++) {\r\n                const spriteClass: string = this._dataTypeResolverService.getSpriteClassFromDataType(types[i].key.toString());\r\n\r\n                newdropDownItem = {\r\n                    key: types[i].key.toString(),\r\n                    icon: 'icon-set-DataTypes ic-' + spriteClass,\r\n                    title: types[i].title\r\n                };\r\n                //do not add the 'email address' and 'system name' properties to the dropdown\r\n                //cannot remove this from generated files. 'email address' for instance is being used in the email wizard.\r\n                if (newdropDownItem.key != '6' && newdropDownItem.key != '7') {\r\n                    dropDownItems.push(newdropDownItem);\r\n                }\r\n            }\r\n            this.selectedItem = newdropDownItem;\r\n\r\n            return dropDownItems;\r\n        } else {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    private changeComposerIcon(item: IDropDownMenuItem): void {\r\n        this.selectedFunctionFieldIcon = this._dataTypeResolverService.getIconBySmartFieldType(parseInt(item.key, 10));\r\n    }\r\n\r\n    public collapseFilterPanel(index: number): void {\r\n        //If the filter panel originated from a composer that has now been closed, call toggleCollapsed to close the filter panel\r\n        if (this.composers[index]) {\r\n            for (let i = index; i < this.composers.length; i++) {\r\n                if (this._filterPanelService.isFilterPanelOriginatedFrom(this.composers[i].data)) {\r\n                    const filterPanelPlugIn: sourceCode.k2Designer.objectModel.plugin.IDefinition = this._pluginService.getPlugin(plugins.panels.filterPanel).plgnDef;\r\n                    this._pluginService.toggleCollapsed(filterPanelPlugIn.name);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public getLeftArrowPosition(position: number): number {\r\n        return (!!position && position < 0) ? 0 : position;\r\n    }\r\n\r\n    //#endregion 'Inline Composer UI events'\r\n\r\n\r\n    public open(newComposer: ISmartFieldComposerOptions, duration?: string): void {\r\n        if (!this.isSmartFieldExist(newComposer.data)) {\r\n            newComposer.container.isOwnedByComposer = false;\r\n            newComposer.smartField.smartFieldComposer = this;\r\n            newComposer.container.smartFieldContainers.forEach((sf) => {\r\n                const index = this.composers.findIndex((comp) => comp.smartField === sf);\r\n                if (index > 0) {\r\n                    this.close(index);\r\n                }\r\n            });\r\n\r\n            if (this.composers.length < 1 && !this._isOpened) {\r\n                const $smartfieldElement = $(newComposer.smartField.element.nativeElement);\r\n                if ($smartfieldElement.width() > 0) {\r\n                    // reset the positions\r\n                    this._config.top = 0;\r\n                    this._config.left = 0;\r\n                    this._openNewComposer(newComposer, duration);\r\n                }\r\n                else {\r\n                    this.waitForSmartFieldRendered($smartfieldElement, (context: any) => {\r\n                        context._openNewComposer(newComposer, duration);\r\n                    }, this);\r\n                }\r\n            }\r\n            else {\r\n                const popUp = $(newComposer.smartField.element.nativeElement).closest('.composer-container');\r\n                if (!popUp.length) {\r\n                    this.close(0, '0');\r\n                    this._openNewComposer(newComposer, '0');\r\n                } else {\r\n                    newComposer.container.isOwnedByComposer = true;\r\n                    this._addToExistingComposer(newComposer, popUp);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!newComposer.container.isOwnedByComposer) {\r\n            //disable the container while the composer is open\r\n            newComposer.container.disableForComposer();\r\n        }\r\n\r\n        if (!newComposer.eventHandlers) {\r\n            return;\r\n        }\r\n\r\n        for (let i = 0; i < newComposer.eventHandlers.length; i++) {\r\n            if (newComposer.eventHandlers[i].onOpen) {\r\n                newComposer.eventHandlers[i].onOpen();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    public closeComposer(composer: ISmartFieldComposerOptions, duration?: string): void {\r\n        const ind: number = this.composers?.indexOf(composer) || 0;\r\n        this.close(ind < 0 ? null : ind, duration);\r\n    }\r\n\r\n    public close(index: number = 0, duration: string = null): void {\r\n        const composer = this.composers[index];\r\n\r\n        if (composer?.smartField?.smartFieldComposer) {\r\n            composer.smartField.isConfiguring = false;\r\n            composer.smartField.smartFieldComposer = undefined;\r\n        }\r\n\r\n        if (!composer) {\r\n            return;\r\n        }\r\n\r\n        if (index < 1) {\r\n            this.resetPosition(duration);\r\n        }\r\n        else {\r\n            //set animate to immediate\r\n            if (duration) {\r\n                const composerParent = $(this._element.nativeElement).find('.composer-container:eq(' + index + ')').closest('.smartfield-composer');\r\n                composerParent.addClass('no-animate');\r\n            }\r\n            this.composers.splice(index);\r\n        }\r\n\r\n        if (!composer.container.isOwnedByComposer) {\r\n            //enable the container now that the composer is closed\r\n            composer.container.enableForComposer();\r\n        }\r\n\r\n        if (!composer.eventHandlers) {\r\n            return;\r\n        }\r\n\r\n        for (let i = 0; i < composer.eventHandlers.length; i++) {\r\n            if (composer.eventHandlers[i].onClose) {\r\n                composer.eventHandlers[i].onClose();\r\n            }\r\n        }\r\n    }\r\n\r\n    public closeForSmartField(smartField: SmartFieldContainerComponent) {\r\n        const index = this.composers.findIndex((composer) => composer.smartField === smartField);\r\n        if (index > -1) {\r\n            this.close(index);\r\n        }\r\n    }\r\n\r\n    public adjustArrowPosition(isNewComposer: boolean, index?: number): void {\r\n        const composerIndex = index || this.composers.length - 1;\r\n        let SFParent = this.composers[composerIndex].container.htmlElement;\r\n        if (this.composers.length === 1 && $(SFParent).outerWidth() > (this.mainContent.nativeElement.clientWidth - (2 * this._config.COMPOSER_WINDOW_PADDING))) {\r\n            SFParent = $(this.overlayElement.nativeElement).find('.main')[0];\r\n        }\r\n\r\n        this.calculateArrowLeftPosition(isNewComposer, composerIndex, SFParent);\r\n        this.calculateArrowsTopPosition(isNewComposer, composerIndex, SFParent);\r\n    }\r\n\r\n    public toggleCommandDrawer(index?: number): void {\r\n        //remove parent pointer\r\n        const ind = index || 0;\r\n\r\n        this.composers[ind].commandDrawerOpen = !this.composers[ind].commandDrawerOpen;\r\n        if (this.composers[ind].commandDrawerOpen) {\r\n            this.composers[ind].commandDrawerHeight = $(this._element.nativeElement).find('.composer-container:eq(' + index + ') .commandDrawer .commandDrawerContent').height();\r\n        } else {\r\n            this.composers[ind].commandDrawerHeight = 0;\r\n        }\r\n\r\n        //close learn composer\r\n        this.learnComposer.hidden = true;\r\n    }\r\n    //endregion 'Public'\r\n\r\n    //#region 'Open Support functions'\r\n    private waitForSmartFieldRendered($smartfieldElement: JQuery, callback: Function, context: any) {\r\n        const timerId = setInterval(() => {\r\n            if ($smartfieldElement.width() > 0) {\r\n                clearInterval(timerId);\r\n                callback(context);\r\n            }\r\n        }, 10);\r\n    }\r\n\r\n    private _addToExistingComposer(newComposer: ISmartFieldComposerOptions, popUp: JQuery) {\r\n        const index = parseInt(popUp.find('.content').attr('index'), 10);\r\n        if ($(this._element.nativeElement).find('.smartfield-composer:not(.ng-leave) .composer-container').length - 1 > index) {\r\n            this.close(index + 1);\r\n        }\r\n\r\n        this.composers.push(newComposer);\r\n        this.adjustArrowPosition(false);\r\n    }\r\n\r\n    private _openNewComposer(newComposer: ISmartFieldComposerOptions, duration?: string) {\r\n        this.composers.push(newComposer);\r\n        setTimeout(() => {\r\n            this._adjustComposerPosition(newComposer, duration);\r\n        }, 0);\r\n    }\r\n\r\n    private _adjustComposerPosition(newComposer: ISmartFieldComposerOptions, duration?: string) {\r\n        const inlineSmartField = this.getInlineSmartFieldOf(newComposer);\r\n        const composerContainer = this.containerElement.nativeElement;\r\n\r\n        this._config.inlineSmartField = inlineSmartField;\r\n\r\n        this.setupPosition(inlineSmartField);\r\n        this.setupTransitionDuration(this._config.top, this._config.left);\r\n        this.prepForAnimation(composerContainer, this._config.top);\r\n\r\n        this.adjustArrowPosition(true);\r\n\r\n        const transitionDuration = duration || this._config.transitionDurationInMillisecond;\r\n        this.animate('show', transitionDuration);\r\n    }\r\n\r\n    private setupTransitionDuration(top: number, left: number): void {\r\n        const length = Math.sqrt(Math.pow(top, 2) + Math.pow(left, 2));\r\n        this._config.transitionDurationInMillisecond = sourceCode.k2Designer.utilities.ui.getTransitionVelocityFor(length);\r\n    }\r\n\r\n    private getInlineSmartFieldOf(originalComposer: ISmartFieldComposerOptions): IInlineSmartField {\r\n        let inlineSmartField: IInlineSmartField;\r\n        const inlineSFPos = this.getPosition(originalComposer.smartField.element.nativeElement);\r\n\r\n        inlineSmartField = {\r\n            htmlElement: originalComposer.smartField.element.nativeElement,\r\n            position: inlineSFPos,\r\n            textbox: originalComposer.container\r\n        };\r\n\r\n        return inlineSmartField;\r\n    }\r\n\r\n    private getTopPosition(inlineSmartField: IInlineSmartField, composerParentPosition: ClientRect): number {\r\n        const top = inlineSmartField.position.top - composerParentPosition.top - this.overlayElement.nativeElement.clientHeight - 5 - (inlineSmartField.position.height / 2);\r\n        return top;\r\n    }\r\n\r\n    private getLeftPosition(inlineSmartField: IInlineSmartField): number {\r\n        const overlayPadding = this._config.COMPOSER_WINDOW_PADDING;\r\n        let left = this.mainContent.nativeElement.getBoundingClientRect().left;\r\n        let right = 0;\r\n\r\n        const mainContentLeft = this.mainContent.nativeElement.getBoundingClientRect().left;\r\n        const mainContentRight = this.mainContent.nativeElement.getBoundingClientRect().right;\r\n        left = inlineSmartField.position.left - mainContentLeft;\r\n        right = inlineSmartField.position.right - mainContentRight;\r\n\r\n        if (left < 0) {\r\n            return (-1) * (left - this._config.COMPOSER_WINDOW_PADDING - overlayPadding);\r\n        } else if (right > 0) {\r\n            return (-1) * (right + this._config.COMPOSER_WINDOW_PADDING + overlayPadding);\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    private setupPosition(inlineSmartField: IInlineSmartField): void {\r\n        if (this.sfcContainer !== null) {\r\n            const position = this.getPosition(this.sfcContainer.nativeElement);\r\n            this._config.position = this.getPosition($(this._element.nativeElement).find('.inlineComposersContainer-content')[0]);\r\n\r\n            let existingTop = 0;\r\n            let existingLeft = 0;\r\n\r\n            if (this.composers.length === 1) {\r\n                existingTop = this._config.top;\r\n                existingLeft = this._config.left;\r\n            }\r\n\r\n            const top = this.getTopPosition(inlineSmartField, position);\r\n            this._config.top = existingTop + top;\r\n\r\n            const left = this.getLeftPosition(inlineSmartField);\r\n            this._config.left = existingLeft + left;\r\n        }\r\n    }\r\n\r\n    private getTransform(x: number, y: number) {\r\n        return 'translate3d(' + x + 'px,' + y + 'px, 0px)';\r\n    }\r\n\r\n    private prepForAnimation(composerContainer: HTMLElement, top: number): void {\r\n        $(composerContainer).css({ top: top + 'px' });\r\n        const width = $(this.sfcContainer.nativeElement).outerWidth();\r\n        const targetContent = this.targetContentElement;\r\n        $(targetContent).css({ width: width + 'px', 'margin-left': ((-1) * width / 2) + 'px', position: 'absolute', left: '50%' });\r\n        $(this.sfcContainer.nativeElement).css({ minWidth: this.mainContent.nativeElement.clientWidth + 'px' });\r\n    }\r\n\r\n    private animate(type: string, durationInMillisecond: string, onAnimated_callback?: Function) {\r\n        const target = this.targetElement.nativeElement;\r\n        const composerContainer = this.containerElement.nativeElement;\r\n\r\n        const pos_X = this._config.left;\r\n        const pos_Y = this._config.top;\r\n\r\n        if (typeof onAnimated_callback === 'function') {\r\n            if (parseInt(durationInMillisecond, 10) > 1) {\r\n                this.onInlineComposerContainerAnimated(onAnimated_callback);\r\n            } else {\r\n                onAnimated_callback();\r\n            }\r\n        }\r\n\r\n        switch (type.toUpperCase()) {\r\n            case 'SHOW':\r\n                $(composerContainer).css({\r\n                    transitionDuration: durationInMillisecond\r\n                    , opacity: '1'\r\n                    , transform: this.getTransform((-1) * pos_X, 0)\r\n                });\r\n                $(target).css({\r\n                    transitionDuration: durationInMillisecond\r\n                    , transform: this.getTransform(pos_X, (-1) * pos_Y)\r\n                });\r\n                this._isOpened = true;\r\n                break;\r\n            default:\r\n                $(composerContainer).css({\r\n                    transitionDuration: durationInMillisecond\r\n                    , opacity: '0'\r\n                    , transform: this.getTransform(0, 0)\r\n                });\r\n                $(target).css({\r\n                    transitionDuration: durationInMillisecond\r\n                    , transform: this.getTransform(0, 0)\r\n                });\r\n        }\r\n    }\r\n\r\n    //#endregion 'Open Support functions'\r\n\r\n    //#region 'Close Support functions'\r\n    private resetPosition(duration?: string): void {\r\n        const clearStyle = () => {\r\n            this.composers.splice(0);\r\n            this._isOpened = false;\r\n        };\r\n        const transitionDuration: string = duration || this._config.transitionDurationInMillisecond;\r\n        this.animate('hide', transitionDuration, clearStyle);\r\n    }\r\n    //#endregion 'Close Support functions'\r\n\r\n    //#region 'Helper'\r\n    private getPosition(html: HTMLElement): ClientRect {\r\n        return html?.getBoundingClientRect() || null;\r\n    }\r\n\r\n    private onInlineComposerContainerAnimated(callback): void {\r\n        const composerContainer = $(this.containerElement.nativeElement);\r\n        const animationClassName = this._config.animationClassName + (new Date()).getTime();\r\n        composerContainer.one('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function() {\r\n\r\n            if ($(this).hasClass(animationClassName)) {\r\n                $(this).removeClass(animationClassName);\r\n                $(this).off('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');\r\n\r\n                callback();\r\n            }\r\n        });\r\n        composerContainer.addClass(animationClassName);\r\n    }\r\n\r\n    private isSmartFieldExist(smartFieldData: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField): boolean {\r\n        return this.composers.filter((currValue: ISmartFieldComposerOptions) => currValue.data === smartFieldData).length > 0;\r\n    }\r\n\r\n    private calculateArrowLeftPosition(isNewComposer: boolean, composerIndex: number, SFParent: HTMLElement) {\r\n        //ensure containing element is not hidden for correct calculations\r\n        const arrowWidth = $(this.arrowElement.nativeElement).outerWidth();\r\n        const smartfieldElement: HTMLElement = this.composers[composerIndex].smartField.element.nativeElement;\r\n        const mainContent = this.mainContent.nativeElement.getBoundingClientRect();\r\n        const composeArrowElement = $(this._element.nativeElement).find('.composer-arrowAnimate').eq(composerIndex - 1).find('.composer-arrow');\r\n        let composerArrowLeft = 0;\r\n\r\n        if (composeArrowElement.length > 0) {\r\n            const composerArrow = $(composeArrowElement).closest('.composer-arrowAnimate')[0];\r\n            composerArrowLeft = composerArrow.getBoundingClientRect().left - mainContent.left;\r\n        }\r\n\r\n        let arrowLeft = (smartfieldElement.getBoundingClientRect().left - mainContent.left + (smartfieldElement.getBoundingClientRect().width / 2)) - (arrowWidth / 2) - composerArrowLeft;\r\n\r\n        //Adjustment\r\n        if (isNewComposer) {\r\n            //Composer full width in Email and Rule designer panel on load\r\n            arrowLeft += this._config.left;\r\n\r\n        } else {\r\n            //Adjust arrow left position for left and right edge compare to it's parent (Textbox).\r\n            const SFParentRect = SFParent.getBoundingClientRect();\r\n            const leftEdge = SFParentRect.left - mainContent.left - composerArrowLeft;\r\n            const rightEdge = Math.min(leftEdge + SFParentRect.width, (mainContent.right - mainContent.left)) - arrowWidth;\r\n            if (arrowLeft <= leftEdge) {\r\n                arrowLeft = leftEdge;\r\n            } else if (arrowLeft >= rightEdge) {\r\n                arrowLeft = rightEdge;\r\n            }\r\n        }\r\n        //end of adjustment\r\n\r\n        this.composers[composerIndex].arrow.left = arrowLeft;\r\n    }\r\n    private calculateArrowsTopPosition(isNewComposer: boolean, composerIndex: number, SFParent: HTMLElement) {\r\n        const preComposerContentBlock = $(this._element.nativeElement).find('.composer-arrowAnimate')[composerIndex - 1];\r\n        const preComposerContentInnerBlock = $(this._element.nativeElement).find('.composer-container')[composerIndex - 1];\r\n        if (preComposerContentBlock) {\r\n            const textboxConnectorTop = (preComposerContentBlock.getBoundingClientRect().bottom + parseInt($(preComposerContentBlock).css('marginBottom'), 10) - (SFParent.getBoundingClientRect().bottom - parseInt($(SFParent).css('borderBottomWidth'), 10)));\r\n            const composerContainerConnectorTop = preComposerContentInnerBlock.getBoundingClientRect().bottom - (SFParent.getBoundingClientRect().bottom - parseInt($(SFParent).css('borderBottomWidth'), 10));\r\n            this.composers[composerIndex].arrow.container.top = (textboxConnectorTop - 1) * (-1);\r\n            this.composers[composerIndex].arrow.top = (textboxConnectorTop - composerContainerConnectorTop) * (-1);\r\n        }\r\n    }\r\n    //#endregion 'Helper'\r\n}\r\n","<div class=\"k2-smartfield-composer\" [ngClass]=\"{'active' : composers?.length }\">\r\n    <div class=\"k2-sfc-container\" #sfcContainer>\r\n        <div class=\" k2-sfc-target\" #target>\r\n            <div class=\"k2-sfc-target-content\" #targetContent>\r\n                <ng-content>\r\n                    <!--COMPOSER TARGET CONTENT -->\r\n                </ng-content>\r\n            </div>\r\n            <div class=\"inlineComposersContainer\" #container *ngIf=\"composers?.length\" [ngClass]=\"{'hide': !composers?.length}\">\r\n                <div class=\"inlineComposersContainer-content\">\r\n                    <div class=\"inlineComposersContainer-first\">\r\n                    </div>\r\n                    <div class=\"inlineComposersContainer-main\" #mainContent>\r\n                        <div class=\"composer-header\">\r\n                            <span class=\"first\">{{getFromResx(\"Resources\", \"SmartField_Composer_Header\") | async}}</span>\r\n                            <span class=\"last icon icon-set-close icon-size16 close16_normal\" (click)=\"collapseFilterPanel(0); close(0);\"></span>\r\n                        </div>\r\n                        <div class=\"composer-overlay composer-gerenal-input-height\" #overlay>\r\n                            <div class=\"first\"></div>\r\n                            <div class=\"main\"></div>\r\n                            <div class=\"last\"></div>\r\n                        </div>\r\n                        <div class=\"composer-main\">\r\n                            <!--SmartFieldComposerPointer-->\r\n                            <div class=\"composer-arrow\">\r\n                                <div class=\"triangle-container composer-window\" #arrow [style.left.px]=\"!composers[0]?.arrow?.left || composers[0]?.arrow.left < 0 ? 0 : composers[0]?.arrow.left\">\r\n                                    <div class=\"arrow-wrapper\">\r\n                                        <div class=\"arrow-down\">\r\n                                            <span class=\"icon icon-set-smartfieldeditor icon-size33 ic-blockarrow\"></span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <!--END SmartFieldComposerPointer-->\r\n                            <!--Inline Function Section-->\r\n                            <div class=\"composer-main-container-scroll\">\r\n                                <div class=\"composer-main-container-wrap\" k2-scrollbar shade=\"light\" [ngClass]=\"{'show-learn': !isHideFlex ,'hide-learn': isHideFlex}\">\r\n                                    <div class=\"composer-main-container\">\r\n                                        <div class=\"content\">\r\n                                            <div *ngFor=\"let composer of composers;let i = index\" class=\"smartfield-composer composer-arrowAnimate\">\r\n                                                <k2-smart-field-composer-plugin [composer]=\"composer\" [index]=\"i\" (onSelected)=\"setSelectedComposer($event)\" (closeComposer)=\"close($event)\"></k2-smart-field-composer-plugin>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <!--Help section-->\r\n                                    <div class=\"composer-main-learn\" [ngClass]=\"{'fadeout-learn': learnComposer.hidden}\">\r\n                                        <div class=\"composer-main-learn-inner\">\r\n                                            <div>\r\n                                                <p class=\"learn-title\">{{getFromResx(\"Resources\", \"SmartField_LearnComposer_Title\") | async}}</p>\r\n                                                <p class=\"learn-desc\">\r\n                                                    {{getFromResx(\"Resources\", \"SmartField_LearnComposer_Desc_Top\") | async}}\r\n                                                </p>\r\n                                                <p class=\"learn-image\">\r\n                                                    <span class=\"learn-image-full\"></span>\r\n                                                </p>\r\n                                                <p class=\"learn-desc\" [innerHTML]=\"getFromResx('Resources', 'SmartField_LearnComposer_Desc_Bottom') | async | safe:'html'\">\r\n                                                </p>\r\n                                                <a class=\"learn-btn-close\" (click)=\"closeLearnComposer()\">\r\n                                                    {{getFromResx(\"Resources\", \"SmartField_LearnComposer_Button\") | async}}\r\n                                                </a>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <!--END Help section-->\r\n                                </div>\r\n                            </div>\r\n                            <!--END Inline Function Section-->\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"inlineComposersContainer-last\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, ElementRef, EventEmitter, HostListener, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges, TemplateRef, ViewChild } from '@angular/core';\r\nimport { ComponentIdMapping } from '../../../shared/constants/components';\r\nimport { TextboxComponent } from '../../common/text-box/text-box.component';\r\nimport { SmartFieldComposerComponent } from '../smart-field-composer/smart-field-composer.component';\r\n\r\n@Component({\r\n    selector: 'k2-smart-field-container',\r\n    templateUrl: './smart-field-container.component.html',\r\n    styleUrls: ['./smart-field-container.component.less']\r\n})\r\nexport class SmartFieldContainerComponent implements OnInit, OnDestroy {\r\n    @Input() public dataModel: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectField;\r\n    @Input() public k2DragItem: any;\r\n    @Input() public k2TextBox: TextboxComponent;\r\n    @Input() public pluginConfig: any;\r\n    @Input() public isPopOverActive: boolean;\r\n    @Input() public resources: any = {};\r\n    @Input() public isSelected: boolean;\r\n    @Input() public isConfiguring: boolean;\r\n    @Input() public enableDragging = true;\r\n    @Output() public smartFieldClick = new EventEmitter<any>();\r\n    @Output() public openSmartFieldComposer = new EventEmitter<any>();\r\n\r\n    @ViewChild('k2AttachmentField') public k2AttachmentField: TemplateRef<any>;\r\n    @ViewChild('k2DataField') public k2DataField: TemplateRef<any>;\r\n    @ViewChild('k2DateTimeField') public k2DateTimeField: TemplateRef<any>;\r\n    @ViewChild('k2EnvironmentField') public k2EnvironmentField: TemplateRef<any>;\r\n    @ViewChild('k2ExpressionField') public k2ExpressionField: TemplateRef<any>;\r\n    @ViewChild('k2InlineFunctionField') public k2InlineFunctionField: TemplateRef<any>;\r\n    @ViewChild('k2ItemReferenceField') public k2ItemReferenceField: TemplateRef<any>;\r\n    @ViewChild('k2SmartFormsField') public k2SmartFormsField: TemplateRef<any>;\r\n    @ViewChild('k2SmartObjectField') public k2SmartObjectField: TemplateRef<any>;\r\n    @ViewChild('k2SmartWizardField') public k2SmartWizardField: TemplateRef<any>;\r\n    @ViewChild('k2UserField') public k2UserField: TemplateRef<any>;\r\n    @ViewChild('k2WorkflowContextField') public k2WorkflowContextField: TemplateRef<any>;\r\n\r\n    public isMulti: boolean;\r\n    // For smart objects\r\n    public objectName: string;\r\n    public targetName: string;\r\n    public smartFieldComposer: SmartFieldComposerComponent;\r\n\r\n    public selectedTemplate: TemplateRef<any>;\r\n    constructor(public element: ElementRef<HTMLElement>) { }\r\n\r\n    public onDrop(data: DragEvent) {\r\n        data.preventDefault();\r\n        return false;\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.isMulti = (this.dataModel as any)?.methodReturnType?.indexOf('[]') > -1;\r\n\r\n        if (this.dataModel.componentId === ComponentIdMapping.k2SmartObjectField) { // only do this for smart objects\r\n            const rootObj: sourceCode.k2Designer.objectModel.core.model.IModelObject =\r\n                this.dataModel.getRoot<sourceCode.k2Designer.objectModel.core.model.ModelObject>();\r\n\r\n            // if root is same as current scope data model then it means there is no parent\r\n            if (rootObj === this.dataModel) {\r\n                return;\r\n            }\r\n\r\n            const methodRef: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectMethodField =\r\n                rootObj.findItem<sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectMethodField>(this.dataModel.methodReference);\r\n\r\n            // if the method reference cannot be resolved then object isn't part of the main model anymore and we can just exit\r\n            if (!methodRef) {\r\n                return;\r\n            }\r\n\r\n            this.isMulti = (methodRef.type.toLowerCase() === 'list');\r\n            this.objectName = methodRef.displayName;\r\n\r\n            if (this.dataModel.propertyReference) {\r\n                const propRef: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectPropertyField =\r\n                    rootObj.findItem<sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectPropertyField>(this.dataModel.propertyReference);\r\n                this.targetName = propRef.displayName;\r\n            } else if (this.dataModel.methodReference) {\r\n                this.targetName = methodRef.displayName;\r\n            }\r\n        }\r\n\r\n        setTimeout(() => {\r\n            const template = this[ComponentIdMapping[this.dataModel.componentId]];\r\n            this.selectedTemplate = template || this.k2InlineFunctionField; // display inline function field template if component id doesnt have it's own template\r\n        }, 0);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.smartFieldComposer) {\r\n            this.smartFieldComposer.closeForSmartField(this);\r\n        }\r\n    }\r\n\r\n    @HostListener('click')\r\n    public onClick() {\r\n        this.smartFieldClick.emit({ dataModel: this.dataModel, element: this.element.nativeElement });\r\n    }\r\n\r\n    @HostListener('dblclick')\r\n    public onDoubleClick() {\r\n        this.openSmartFieldComposer.emit(this);\r\n    }\r\n}\r\n","<ng-template #k2AttachmentField>\r\n    <label class=\"smart-field-root\">\r\n        <label class=\"smart-field\" *ngIf=\"dataModel.smartFields === undefined || dataModel.smartFields === null || dataModel.smartFields.length === 0\">\r\n            <label class=\"smart-field-arrow-default smart-field-field-arrow-left\"></label>\r\n            <label class=\"smart-field-prop smart-field-field\">\r\n                {{dataModel.customTitle || dataModel.title}}\r\n            </label>\r\n            <label class=\"smart-field-arrow-default smart-field-field-arrow-right\"></label>\r\n        </label>\r\n        <label class=\"smart-field\" *ngIf=\"dataModel.smartFields.length > 0\">\r\n            <label class=\"smart-field-arrow-default smart-field-field-arrow-left\"></label>\r\n            <label class=\"smart-field-prop smart-field-field\">{{dataModel.customTitle || dataModel.title}}</label>\r\n            <label class=\"smart-field-prop smart-field-field-prop\">{{dataModel.smartFields[0].title}}</label>\r\n            <label class=\"smart-field-arrow-default smart-field-field-arrow-right\"></label>\r\n            <label class=\"smart-field-arrow-default smart-field-field-arrow-right-inner\"></label>\r\n        </label>\r\n    </label>\r\n</ng-template>\r\n<ng-template #k2DataField>\r\n    <label class=\"smart-field-content single-smart-field\">\r\n        <label class=\"triangular-content-container data-field\" *ngIf=\"!isActionResult\">\r\n            <label class=\"left-triangle\"></label>\r\n            <label class=\"middle-section\" k2TooltipBasic>{{dataModel.title || dataModel.customTitle}}</label>\r\n            <k2-mini-badge [customClass]=\"'data-field'\" [k2Model]=\"dataModel\"></k2-mini-badge>\r\n            <label class=\"right-triangle\"></label>\r\n        </label>\r\n        <label class=\"triangular-content-container-split workflow-field left\" *ngIf=\"isActionResult\">\r\n            <label class=\"left-triangle\"></label>\r\n            <label class=\"middle-section\">\r\n                {{resources.activity_data_field_task_user}}\r\n            </label>\r\n        </label>\r\n        <label class=\"triangular-content-container-split workflow-field right\" *ngIf=\"isActionResult\">\r\n            <label class=\"middle-section\">{{resources.activity_data_field_task_user_action_result}}</label>\r\n            <label class=\"right-triangle\"></label>\r\n        </label>\r\n    </label>\r\n</ng-template>\r\n<ng-template #k2DateTimeField>\r\n    <label class=\"smart-field-content single-smart-field date-field\">\r\n        {{dataModel.title}}\r\n    </label>\r\n</ng-template>\r\n<ng-template #k2EnvironmentField>\r\n    <label class=\"smart-field-content single-smart-field\">\r\n        <label class=\"triangular-content-container data-field\">\r\n            <label class=\"left-triangle\"></label>\r\n            <label class=\"middle-section\">{{dataModel.title}}</label>\r\n            <label class=\"right-triangle\"></label>\r\n        </label>\r\n    </label>\r\n</ng-template>\r\n<ng-template #k2ExpressionField>\r\n    <label class=\"smart-field-root\">\r\n        <label class=\"smart-field\">\r\n            <label class=\"smart-field-prop smart-field-leftBorder smart-field-rightBorder smart-field-inlineFunction smart-field-inlineFunction-center\">{{dataModel.customTitle || dataModel.title}}</label>\r\n        </label>\r\n    </label>\r\n</ng-template>\r\n<ng-template #k2InlineFunctionField>\r\n    <label class=\"smart-field-content\" [ngClass]=\"{ 'single-smart-field': !isMulti, 'multi-smart-field': isMulti, 'editing-smart-field': isConfiguring }\">\r\n        <label *ngIf=\"!isMulti\" class=\"rounded-corner-content-container function-field\">\r\n            <label class=\"smart-field-wrap\" k2TooltipBasic>{{dataModel.customTitle || dataModel.title}}</label>\r\n        </label>\r\n        <label *ngIf=\"isMulti\" class=\"first-item\">\r\n            <label class=\"rounded-corner-content-container function-field\">\r\n                <label class=\"smart-field-wrap\" k2TooltipBasic>{{dataModel.customTitle || dataModel.title}}</label>\r\n            </label>\r\n        </label>\r\n        <label *ngIf=\"isMulti\" class=\"second-item\">\r\n            <label class=\"rounded-corner-content-container separator\">\r\n                <label class=\"smart-field-wrap\" k2TooltipBasic>{{dataModel.customTitle || dataModel.title}}</label>\r\n            </label>\r\n        </label>\r\n        <label *ngIf=\"isMulti\" class=\"third-item\">\r\n            <label class=\"rounded-corner-content-container function-field\">\r\n                <label class=\"smart-field-wrap\" k2TooltipBasic>{{dataModel.customTitle || dataModel.title}}</label>\r\n            </label>\r\n        </label>\r\n        <k2-mini-badge [customClass]=\"customClass\" [k2Model]=\"dataModel\"></k2-mini-badge>\r\n    </label>\r\n</ng-template>\r\n<ng-template #k2ItemReferenceField>\r\n    <label class=\"smart-field-content single-smart-field\">\r\n        <label class=\"triangular-content-container-split itemreference-field left\">\r\n            <label class=\"left-triangle\"></label>\r\n            <label class=\"middle-section\">\r\n                <label class=\"middle-section-text\" k2TooltipBasic>{{dataModel.itemReferenceTitle || dataModel.customItemReferenceTitle}}</label>\r\n            </label>\r\n        </label>\r\n        <label class=\"triangular-content-container-split itemreference-field right\">\r\n            <label class=\"middle-section\" k2TooltipBasic>\r\n                <label class=\"middle-section-text\">{{dataModel.title}}</label>\r\n                <k2-mini-badge [k2Model]=\"dataModel\"></k2-mini-badge>\r\n            </label>\r\n            <label class=\"right-triangle\"></label>\r\n        </label>\r\n    </label>\r\n</ng-template>\r\n<ng-template #k2SmartFormsField>\r\n    <label class=\"smart-field-root\">\r\n        <label class=\"smart-field\" *ngIf=\"dataModel.smartFields === undefined || dataModel.smartFields === null || dataModel.smartFields.length === 0\">\r\n            <label class=\"smart-field-prop smart-field-leftBorder smart-field-rightBorder smart-field-smartForm\">{{dataModel.customTitle || dataModel.title}}</label>\r\n        </label>\r\n    </label>\r\n</ng-template>\r\n<ng-template #k2SmartObjectField>\r\n    <label class=\"smart-field-content\" [ngClass]=\"{ 'single-smart-field': !isMulti, 'multi-smart-field': isMulti, 'editing-smart-field': isConfiguring }\">\r\n        <label *ngIf=\"!isMulti\" class=\"rounded-corner-content-container-split smartobject-field left\">\r\n            <label class=\"smart-field-wrap parent\" k2TooltipBasic>{{objectName}}</label>\r\n        </label>\r\n        <label *ngIf=\"!isMulti\" class=\"rounded-corner-content-container-split smartobject-field right\">\r\n            <label class=\"smart-field-wrap\" k2TooltipBasic>{{targetName}}</label>\r\n        </label>\r\n\r\n        <label *ngIf=\"isMulti\" class=\"first-item\">\r\n            <label class=\"rounded-corner-content-container-split smartobject-field left\">\r\n                <label class=\"smart-field-wrap parent\" k2TooltipBasic>{{objectName}}</label>\r\n            </label>\r\n            <label class=\"rounded-corner-content-container-split smartobject-field right\">\r\n                <label class=\"smart-field-wrap\" k2TooltipBasic>{{targetName}}</label>\r\n            </label>\r\n        </label>\r\n\r\n        <label *ngIf=\"isMulti\" class=\"second-item\">\r\n            <label class=\"rounded-corner-content-container-split separator left\">\r\n                <label class=\"smart-field-wrap parent\" k2TooltipBasic>{{objectName}}</label>\r\n            </label>\r\n            <label class=\"rounded-corner-content-container-split separator right\">\r\n                <label class=\"smart-field-wrap\" k2TooltipBasic>{{targetName}}</label>\r\n            </label>\r\n        </label>\r\n\r\n        <label *ngIf=\"isMulti\" class=\"third-item\">\r\n            <label class=\"rounded-corner-content-container-split smartobject-field left\">\r\n                <label class=\"smart-field-wrap parent\" k2TooltipBasic>{{objectName}}</label>\r\n            </label>\r\n            <label class=\"rounded-corner-content-container-split smartobject-field right\">\r\n                <label class=\"smart-field-wrap\" k2TooltipBasic>{{targetName}}</label>\r\n            </label>\r\n        </label>\r\n        <k2-mini-badge [customClass]=\"customClass\" [k2Model]=\"dataModel\"></k2-mini-badge>\r\n    </label>\r\n</ng-template>\r\n<ng-template #k2SmartWizardField>\r\n    <label class=\"smart-field-content single-smart-field\">\r\n        <label class=\"triangular-content-container data-field\">\r\n            <label class=\"left-triangle\"></label>\r\n            <label class=\"middle-section\">{{dataModel.title}}</label>\r\n            <label class=\"right-triangle\"></label>\r\n        </label>\r\n    </label>\r\n</ng-template>\r\n<ng-template #k2UserField>\r\n    <label class=\"smart-field-content single-smart-field\">\r\n        <label class=\"triangular-content-container data-field\">\r\n            <label class=\"left-triangle\"></label>\r\n            <label class=\"middle-section\" k2TooltipBasic>{{dataModel.customTitle || dataModel.title}}</label>\r\n            <label class=\"right-triangle\"></label>\r\n        </label>\r\n    </label>\r\n</ng-template>\r\n<ng-template #k2WorkflowContextField>\r\n    <label class=\"smart-field-content single-smart-field\">\r\n        <label class=\"triangular-content-container-split workflow-field left\">\r\n            <label class=\"left-triangle\"></label>\r\n            <label class=\"middle-section\">{{dataModel?.parentName}}</label>\r\n        </label>\r\n        <label class=\"triangular-content-container-split workflow-field right\">\r\n            <label class=\"middle-section\">{{dataModel?.title}}</label>\r\n            <label class=\"right-triangle\"></label>\r\n        </label>\r\n    </label>\r\n</ng-template>\r\n\r\n<span class=\"smart-field-container k2-text-box-smart-field\"\r\n      contenteditable=\"false\"\r\n      [id]=\"dataModel.componentId\"\r\n      readonly=\"true\"\r\n      unselectable=\"off\"\r\n      [ngClass]=\"{'selected': isSelected }\"\r\n      K2Draggable\r\n      [k2Dragtype]=\"'configuredSmartField'\"\r\n      [k2Dragitem]=\"this\"\r\n      [DragEnable]=\"enableDragging\">\r\n    <ng-container *ngTemplateOutlet=\"selectedTemplate\">\r\n\r\n    </ng-container>\r\n</span>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'k2-spinner',\r\n    templateUrl: './spinner.component.html',\r\n    styleUrls: ['./spinner.component.less']\r\n})\r\nexport class SpinnerComponent implements OnInit {\r\n    @Input() overlay = true;\r\n    @Input() text: string = null;\r\n    @Input() classNames = '';\r\n    @Input() visible = false;\r\n    @Input() inline = false;\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"k2-spinner\" [ngClass]=\"classNames\"\r\n     [class.k2-spinner-inline]=\"inline\"\r\n     [class.k2-spinner-default]=\"!inline\"\r\n     *ngIf=\"visible\">\r\n    <div class=\"k2-spinner-overlay\" *ngIf=\"overlay\"></div>\r\n    <div class=\"k2-spinner-container\">\r\n        <div class=\"k2-spinner-inner\"></div>\r\n        <div class=\"k2-spinner-text\" *ngIf=\"text\">{{text}}</div>\r\n    </div>\r\n</div>\r\n","import { OnDestroy } from '@angular/core';\r\nimport { NgZone } from '@angular/core';\r\nimport { Component, ElementRef, EventEmitter, Inject, Input, OnInit, Output } from '@angular/core';\r\nimport { fromEvent, Subscription } from 'rxjs';\r\nimport { IItemProviderService } from '../../../types/services/item-provider/i-item-provider-service';\r\nimport { ILegacyResourceService } from '../../../types/services/resources/i-legacy-resource.service';\r\nimport { IToolBoxService } from '../../../types/services/tool-box/i-toolbox-service';\r\nimport { LegacyResourceServiceToken } from '../../legacy-service-factories/resource-service-factory';\r\nimport { DragDropService } from '../../services/drag-drop/drag-drop.service';\r\nimport { ItemProviderServiceToken } from '../../services/item-provider/item-provider-service-factory';\r\nimport { ToolBoxServiceToken } from '../../services/tool-box/tool-box-service-factory';\r\nimport { isUndefinedOrNull } from '../../shared/utils/general';\r\n\r\n@Component({\r\n    selector: 'k2-stack-panel',\r\n    templateUrl: './stack-panel.component.html',\r\n    styleUrls: ['./stack-panel.component.less']\r\n})\r\nexport class StackPanelComponent implements OnInit, OnDestroy {\r\n    @Input() k2Items: sourceCode.k2Designer.objectModel.dragDropService.IDragDropData[];\r\n    @Input() k2TempEdit: boolean;\r\n    @Input() k2Itemheight: number;\r\n\r\n    @Output() k2OnDragEnd = new EventEmitter<any>();\r\n\r\n    private currentIndex: number;\r\n    private _slctPrv: sourceCode.k2Designer.objectModel.core.itemProvider.IItemProvider<any>;\r\n    private _dropIndex: number;\r\n\r\n    private dragOverSub: Subscription;\r\n\r\n    constructor(\r\n        private _element: ElementRef,\r\n        @Inject(ToolBoxServiceToken) private _toolboxService: IToolBoxService,\r\n        private _dragDropService: DragDropService,\r\n        @Inject(ItemProviderServiceToken) private _itemProviderService: IItemProviderService,\r\n        @Inject(LegacyResourceServiceToken) private _resourceService: ILegacyResourceService,\r\n        private zone: NgZone) { }\r\n\r\n    ngOnInit(): void {\r\n        this.zone.runOutsideAngular(() => {\r\n            this.dragOverSub = fromEvent(this._element.nativeElement, 'dragover').subscribe((event: DragEvent) => this.onDragOver(event));\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.dragOverSub?.unsubscribe();\r\n    }\r\n\r\n    private getDescriptionFrom(item: any): string {\r\n\r\n        if (!isUndefinedOrNull(item.description)) {\r\n            if (item.description.length > 0) {\r\n                return item.description;\r\n            }\r\n        }\r\n\r\n        let description = sourceCode.k2Designer.utilities.getDescriptionFrom(item.name);\r\n\r\n        //Favorites bar doesn't include _step in name, try it with _step for the right resource string\r\n        if (description.length === 0) {\r\n            description = sourceCode.k2Designer.utilities.getDescriptionFrom(item.name + '_step');\r\n        }\r\n\r\n        return description;\r\n    }\r\n\r\n    private getSvgIcon(iconId): string {\r\n        return iconId ? iconId : 'fallbackIcon';\r\n    }\r\n\r\n    private getSectionFrom(item: any): string {\r\n        if (sourceCode.k2Designer.utilities.isObjectaSharePointObject(item)) {\r\n            return 'SharePoint';\r\n        }\r\n\r\n        return item.section;\r\n    }\r\n    private getSubSectionFrom(item: any): string {\r\n        if (sourceCode.k2Designer.utilities.isObjectaSharePointObject(item)) {\r\n            return item.section;\r\n        }\r\n\r\n        return item.subsection;\r\n    }\r\n    /**\r\n     * Returns the current state of the favourites (Editable or not editable)\r\n     */\r\n    private getFavouritesEditableState(): boolean {\r\n        if (this._toolboxService) return this._toolboxService.favouritesEditableState;\r\n    }\r\n\r\n    private favouritesItemContextMenu(event: MouseEvent, context?: any): void {\r\n\r\n        const toolboxService = this._toolboxService;\r\n        let favouriteIcon;\r\n\r\n        const configuration: sourceCode.k2Designer.objectModel.contextMenu.IContextMenuConfiguration = <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuConfiguration>{\r\n            e: event,\r\n            menuItems: <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem[]>[\r\n                <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem>{\r\n                    title: this._resourceService.getString('context_menu_favourites_favourite'),\r\n                    enabled: true,\r\n                    icon: 'icon icon-set-edittoolbox_popover icon-size16 ic-favourites',\r\n                    onSelected(item: sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem) {\r\n                        toolboxService.removeFavouriteItem(context);\r\n                    }\r\n                },\r\n                <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem>{\r\n                    title: this._resourceService.getString('context_menu_favourites_edit'),\r\n                    enabled: true,\r\n                    icon: 'icon icon-set-toolbar icon-size16 ic-edit',\r\n                    onSelected(item: sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem) {\r\n                        toolboxService.favouritesEditableState = !toolboxService.favouritesEditableState;\r\n                    }\r\n                },\r\n                <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem>{\r\n                    title: this._resourceService.getString('context_menu_favourites_help'),\r\n                    enabled: true,\r\n                    icon: 'icon icon-set-edittoolbox_popover icon-size16 ic-help',\r\n                    onSelected(item: sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem) {\r\n\r\n                        // TODO: complete help\r\n                    }\r\n                }],\r\n            width: 140\r\n        };\r\n\r\n        sourceCode.k2Designer.uiComponents.contextMenu.showContextMenu(configuration);\r\n    }\r\n\r\n    public onDrop(e: DragEvent): boolean {\r\n\r\n        const currentIndex = this.currentIndex;\r\n        this.currentIndex = null;\r\n\r\n        if (this._toolboxService.favouritesEditableState) {\r\n\r\n            const y = this.getRelativeYCoord(e.pageY);\r\n            this._dropIndex = this.getDropIndex(y);\r\n\r\n            //If moving existing fav. item, if index to drop is higher than previous index, indexes will shift up because item is removed from top:\r\n            const addAtIndex = currentIndex !== null && this._dropIndex > currentIndex ? this._dropIndex - 1 : this._dropIndex;\r\n            //Add/move item to specified index:\r\n            this._toolboxService.addFvrt(addAtIndex, this._dragDropService.getItem('canvasItem'));\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private getDragImage(item: sourceCode.k2Designer.objectModel.core.itemProvider.IItemBase<any, any>): HTMLElement {\r\n        const result: HTMLDivElement = document.createElement('div');\r\n        result.innerHTML = item.title;\r\n        sourceCode.k2Designer.directives.k2DragDrop.K2Draggable.dragOffset = { x: 0, y: 0 };\r\n        return result;\r\n    }\r\n\r\n    public getDragImageFn = this.getDragImage.bind(this);\r\n\r\n    private getFavoritesDragData(source: any, context: any, extraData: any): any {\r\n        return source || extraData || context;\r\n    }\r\n\r\n    public getFavoritesDropData(source: any, context: any, dragData: any, extraData: any): any {\r\n        return source || extraData || dragData || context;\r\n    }\r\n\r\n    /**\r\n     * Return an object of data that is associated with the favourite item\r\n     */\r\n    private getDragItem(item: sourceCode.k2Designer.objectModel.core.itemProvider.IItemBase<any, any>, context: any): sourceCode.k2Designer.objectModel.dragDropService.IDragDropData {\r\n        this._slctPrv = this._itemProviderService.getItemProviderByName((<any>item).__dataProviderName);\r\n        return this._slctPrv.getDragItem(item, null);\r\n    }\r\n\r\n    public getDragItemFn = this.getDragItem.bind(this);\r\n\r\n    private _dragHeightAdd = 0;\r\n    private getTotalHeight(): string {\r\n        return (this.k2Items.length * this.k2Itemheight) + this._dragHeightAdd + 'px';\r\n    }\r\n\r\n    private getTop(idx: number): string {\r\n        return idx * this.k2Itemheight + 'px';\r\n    }\r\n\r\n    private getLeft(idx: number): string {\r\n        return '5px';\r\n    }\r\n\r\n    public onDragEnd(e: DragEvent): boolean {\r\n\r\n        const el: HTMLElement = <HTMLElement>e.srcElement;\r\n        $(el).parent().removeClass('ng-leave');\r\n        $(el).parent().removeClass('ng-leave-active');\r\n\r\n        this.k2OnDragEnd.emit();\r\n\r\n        return false;\r\n    }\r\n\r\n    public onDragLeave(e: DragEvent): boolean {\r\n        this.dragOverInProgress = false;\r\n\r\n        if (this._toolboxService.favouritesEditableState) {\r\n\r\n            if (this.k2TempEdit === true && e.type === 'dragend') {\r\n\r\n                this._toolboxService.favouritesEditableState = false;\r\n                this.k2TempEdit = false;\r\n\r\n                return;\r\n            }\r\n        }\r\n\r\n        //TODO: Add animation to shift favorites items back in place when dragged out\r\n        return false;\r\n    }\r\n\r\n    public onDragEnter(e: DragEvent): boolean {\r\n\r\n        if (this._toolboxService.favouritesEditableState) {\r\n            //var x: HTMLElement = <HTMLElement>e.srcElement.cloneNode(true);\r\n            //x.style.backgroundColor = \"red\";\r\n\r\n            //(<any>e.dataTransfer).setDragImage(x, 0, 0);\r\n\r\n            this._dragHeightAdd = this.k2Itemheight / 2;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public onDragStart(e: DragEvent, k2DragIndex?: number): boolean {\r\n        $('tip.repatriate-tooltip').remove();\r\n\r\n        this.currentIndex = k2DragIndex;\r\n\r\n        const x: HTMLElement = <HTMLElement>e.srcElement;\r\n        $(x).parent().addClass('ng-leave');\r\n        $(x).parent().addClass('ng-leave-active');\r\n\r\n        if (e.altKey && !this._toolboxService.favouritesEditableState) {\r\n            this._toolboxService.favouritesEditableState = true;\r\n            this.k2TempEdit = true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private dragOverInProgress = false;\r\n    public onDragOver(e: DragEvent): boolean {\r\n        e.preventDefault();\r\n\r\n        if (this._toolboxService.favouritesEditableState) {\r\n\r\n            if (!this.dragOverInProgress) {\r\n                this.dragOverInProgress = true;\r\n                var isNewItem = this.currentIndex == null;\r\n\r\n                //TODO: Add animation to shift favorite items out of the way to make space for dragged-over item\r\n            }\r\n\r\n            e.dataTransfer.dropEffect = isNewItem ? 'copy' : 'move';\r\n\r\n        } else {\r\n            e.dataTransfer.dropEffect = 'none';\r\n        }\r\n        return false;\r\n    }\r\n\r\n    //Gets the y location relative to the top of the stackpanel root element\r\n    private getRelativeYCoord(pageY: number): number {\r\n        return pageY - $(this._element.nativeElement).offset().top;\r\n    }\r\n\r\n    //Gets the x location relative to the left of the stackpanel root element\r\n    private getRelativeXCoord(pageX: number): number {\r\n        return pageX - $(this._element.nativeElement).offset().left;\r\n    }\r\n\r\n    //Calculates the index for dropping item in stackpanel (0 based)\r\n    private getDropIndex(y: number): number {\r\n        return Math.floor((y + (this.k2Itemheight / 2)) / this.k2Itemheight);\r\n    }\r\n}\r\n","<div style=\"position: relative; height: 100%;\"\r\n     (dragenter)=\"onDragEnter($event)\"\r\n     (dragend)=\"onDragEnd($event)\"\r\n     (dragleave)=\"onDragLeave($event)\"\r\n     (drop)=\"onDrop($event)\">\r\n    <div [ngStyle]=\"{ 'top': getTop(i) }\"\r\n         *ngFor=\"let item of k2Items; let i = index;\"\r\n         class=\"favourites-item-container favourites-single-item fav-item has-padding fadeMeIn\"\r\n         K2Draggable\r\n         [k2Dragcontext]=\"item\"\r\n         [k2Dragghost]=\"getDragImageFn\"\r\n         K2Dragtype=\"canvasItem\"\r\n         [k2Dragitem]=\"getDragItemFn\"\r\n         [k2Dropped]=\"onDataDropped\"\r\n         [k2DragIndex]=\"i\"\r\n         [k2Dragstart]=\"onDragStart\"\r\n         [k2Dragend]=\"onDragEnd.bind(this)\">\r\n        <div [title]=\"item.title\"\r\n             K2TooltiSimple\r\n             [K2TooltipTitle]=\"item.title\"\r\n             [K2TooltipSection]=\"getSectionFrom(item)\"\r\n             [K2TooltipDescription]=\"getDescriptionFrom(item)\"\r\n             [K2TooltipSubsection]=\"getSubSectionFrom(item)\"\r\n             [K2TooltipPosition]=\"right\">\r\n            <div *ngIf=\"item.spriteClass\" K2ContextMenu [K2ContextMenuClick]=\"favouritesItemContextMenu\" [K2ContextMenuContext]=\"item\" class=\"icon icon-set-steps icon-size24 favourites-single-item\" [ngClass]=\"item.spriteClass\"></div>\r\n            <svg class=\"icon icon-size24\" *ngIf=\"!item.spriteClass\">\r\n                <use xlink:href=\"\" [href]=\"'#'+ getSvgIcon(item.customStepUniqueId)\"></use>\r\n            </svg>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <div class=\"tlbx-item has-padding max-height\" style=\"cursor: default\"></div>\r\n    </div>\r\n</div>\r\n","import { Component, ElementRef, EventEmitter, Input, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { keyCodes } from 'src/app/shared/constants/general';\r\nimport { isUndefinedOrNull } from 'src/app/shared/utils/general';\r\nimport { ISelectableTile } from 'src/types/models/selectable-tile/i-selectable-tile';\r\n\r\n@Component({\r\n    selector: 'k2-tile-select',\r\n    templateUrl: './tile-select.component.html',\r\n    styleUrls: ['./tile-select.component.less']\r\n})\r\nexport class TileSelectComponent implements OnInit {\r\n\r\n    @Input() tiles: ISelectableTile[] = [];\r\n\r\n    @Output() selectionChanged = new EventEmitter<{previous: ISelectableTile; current: ISelectableTile; element: HTMLElement}>();\r\n\r\n    @ViewChild('tileSelectContainer') tilesContainer: ElementRef<HTMLInputElement>;\r\n\r\n    private _isEnabled = true;\r\n    private _selectedTile: ISelectableTile = null;\r\n    private _isBusyHandlingSelectionEvent = false;\r\n\r\n    constructor() { }\r\n\r\n    /**\r\n     * Gets the enabled state of the component\r\n     */\r\n    get isEnabled(): boolean {\r\n        return this._isEnabled;\r\n    }\r\n\r\n    /**\r\n     * Sets the enabled state of the component\r\n     */\r\n    set isEnabled(value: boolean) {\r\n        if (this._isEnabled === value) {\r\n            return;\r\n        }\r\n\r\n        this._isEnabled = value;\r\n\r\n        this.tiles.forEach((tile: ISelectableTile) => tile.enabled = value);\r\n    }\r\n\r\n    /**\r\n     * Set the selected value and automatically select the tile associated with that value if it exists\r\n     */\r\n    @Input()\r\n    set selectedValue(value: any) {\r\n        if (isUndefinedOrNull(value)) {\r\n            return;\r\n        }\r\n\r\n        for (const tile of this.tiles) {\r\n            if (tile.value === value) {\r\n                this.onTileSelected(tile);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the value of the selected tile\r\n     */\r\n    get selectedValue(): any {\r\n        if (this._selectedTile) {\r\n            return this._selectedTile.value;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (!this._selectedTile) {\r\n            this._selectedTile = this.tiles.find((tile: ISelectableTile) => tile.selected);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when the component gains focus - will make all tiles focusable by giving them a tab index\r\n     */\r\n    onFocus(event: Event): void {\r\n        if (!this.isEnabled) {\r\n            return;\r\n        }\r\n\r\n        //enable tab index on all tiles\r\n        const focusableElements = this.getFocusableTiles();\r\n\r\n        if (focusableElements.length > 0\r\n            && this.tilesContainer.nativeElement.getAttribute('tabindex') === '0') {\r\n\r\n            const selectedElement = focusableElements.filter((el: HTMLElement) => el.classList.contains('selected'));\r\n            if (selectedElement.length > 0) {\r\n                selectedElement[0].focus();\r\n            } else {\r\n                focusableElements[0].focus();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * KeyDown handler to allow for arrow navigating around tiles\r\n     *\r\n     * @param event\r\n     */\r\n    onKeyDown(event: KeyboardEvent, tile?: ISelectableTile): void {\r\n        if (!this.isEnabled) {\r\n            return;\r\n        }\r\n\r\n        const focusedElement = document.activeElement;\r\n\r\n        switch (event.keyCode) {\r\n            case keyCodes.LEFT_ARROW:\r\n            case keyCodes.RIGHT_ARROW:\r\n            case keyCodes.DOWN_ARROW:\r\n            case keyCodes.UP_ARROW:\r\n\r\n                const nextTile = this.getNextNavigateTile(<HTMLElement>focusedElement, event.keyCode);\r\n                if (nextTile !== null) {\r\n                    nextTile.focus();\r\n                }\r\n                break;\r\n            case keyCodes.ENTER:\r\n            case keyCodes.SPACE:\r\n                this.onTileSelected(tile);\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Handler to prevent mouse events from interrupting focus of child tiles\r\n     *  if the user clicks on blank space in the component itself instead of a tile\r\n     *\r\n     * @param event\r\n     */\r\n    onMouseDown(event: MouseEvent): void {\r\n        if (event.target !== this.tilesContainer.nativeElement) {\r\n            return;\r\n        }\r\n\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n    }\r\n\r\n    /**\r\n     * Triggers when this tile has been clicked\r\n     */\r\n    onTileClicked(tile: ISelectableTile) {\r\n        if (tile.enabled === true && tile.selected === false) {\r\n            this.onTileSelected(tile);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when a child tile gets focus\r\n     */\r\n    onTileFocus(tile: ISelectableTile) {\r\n        tile.focused = true;\r\n        this.tilesContainer.nativeElement.removeAttribute('tabindex');\r\n    }\r\n\r\n    /**\r\n     * Called when a child tile loses focus - need to ensure tab indexing is correct to allow tab navigation\r\n     */\r\n    onTileBlur(tile: ISelectableTile) {\r\n        tile.focused = false;\r\n        // we need to know where the focus is going to to see if we should reset 'focusability' of the component\r\n        // unfortunately setTimeout is the best option so we can see what the next active element is\r\n        setTimeout(() => {\r\n            const focusedElement = document.activeElement;\r\n            if (this.tilesContainer.nativeElement.contains(document.activeElement)) {\r\n                this.tilesContainer.nativeElement.removeAttribute('tabindex');\r\n            } else {\r\n                this.tilesContainer.nativeElement.setAttribute('tabindex', '0');\r\n            }\r\n        }, 1);\r\n    }\r\n\r\n    /**\r\n     * Determines the next navigatable tile based on the keyCode used\r\n     *\r\n     * @param focusedElement\r\n     * @param keyCode\r\n     */\r\n    private getNextNavigateTile(focusedElement: HTMLElement, keyCode: number): HTMLElement {\r\n\r\n        let focusedContainer = focusedElement;\r\n        //IE11 will report the activeElement as a non-focusable sub element of the actual tile element, need to find the correct element to find the next tile.\r\n        if (!focusedElement.classList.contains('selectable-tile-container')) {\r\n            focusedContainer = focusedElement.closest('.selectable-tile-container');\r\n        }\r\n\r\n        if (isUndefinedOrNull(focusedContainer)) {\r\n            return null;\r\n        }\r\n\r\n        const allTiles = this.getFocusableTiles(true);\r\n        const tilesPerRow = this.getTilesPerRow(allTiles);\r\n        const focusedIndex = allTiles.indexOf(focusedContainer);\r\n\r\n        let jumpValue = 0;\r\n\r\n        switch (keyCode) {\r\n            case keyCodes.LEFT_ARROW:\r\n                jumpValue = -1;\r\n                break;\r\n            case keyCodes.RIGHT_ARROW:\r\n                jumpValue = 1;\r\n                break;\r\n            case keyCodes.DOWN_ARROW:\r\n                jumpValue = tilesPerRow;\r\n                break;\r\n            case keyCodes.UP_ARROW:\r\n                jumpValue = -tilesPerRow;\r\n                break;\r\n        }\r\n\r\n        let goalIndex = focusedIndex + jumpValue;\r\n        if (goalIndex > allTiles.length || goalIndex < 0) {\r\n            return null;\r\n        }\r\n\r\n        const maxAttempts = allTiles.length;\r\n        let attempts = 0;\r\n\r\n        while (goalIndex >= 0\r\n            && goalIndex < allTiles.length\r\n            && allTiles[goalIndex].classList.contains('disabled')\r\n            && attempts < maxAttempts) {\r\n\r\n            goalIndex += jumpValue;\r\n            attempts += 1;\r\n        }\r\n\r\n        if (goalIndex >= 0 && goalIndex < allTiles.length && allTiles[goalIndex] !== focusedContainer) {\r\n            return allTiles[goalIndex];\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Calculates the current number of tiles per row - dynamic to allow for responsive calculations\r\n     *\r\n     * @param tileElements\r\n     */\r\n    private getTilesPerRow(tileElements: HTMLElement[]): number {\r\n        let currentCount = 0;\r\n        let highestCount = 0;\r\n\r\n        let lastOffsetTop = -1;\r\n\r\n        for (let i = 0; i < tileElements.length; i++) {\r\n            const offsetTop = tileElements[i].offsetTop;\r\n\r\n            if (lastOffsetTop !== offsetTop) {\r\n                lastOffsetTop = offsetTop;\r\n                currentCount = 1;\r\n            } else {\r\n                currentCount += 1;\r\n            }\r\n\r\n            highestCount = highestCount > currentCount ? highestCount : currentCount;\r\n        }\r\n\r\n        return highestCount;\r\n    }\r\n\r\n    /**\r\n     * Gets all tiles in thee component\r\n     *\r\n     * @param includeDisabled - include disabled tiles in returned collection\r\n     */\r\n    private getFocusableTiles(includeDisabled: boolean = false): HTMLElement[] {\r\n        let selector = '.selectable-tile-container';\r\n        if (!includeDisabled) {\r\n            selector += ':not(.disabled)';\r\n        }\r\n        return Array.from(this.tilesContainer.nativeElement.querySelectorAll(selector));\r\n    }\r\n\r\n    /**\r\n     * Callback invoked by a tile when it's getting selected, will call selectionChanged callback if one is registered\r\n     *\r\n     * @param tile the tile that was just selected\r\n     */\r\n    private onTileSelected(tile: ISelectableTile): void {\r\n\r\n        if (this._isBusyHandlingSelectionEvent) {\r\n            return;\r\n        }\r\n\r\n        this._isBusyHandlingSelectionEvent = true;\r\n\r\n        try {\r\n\r\n            const previousSelection: ISelectableTile = this._selectedTile;\r\n\r\n            if (previousSelection === tile) {\r\n                return;\r\n            }\r\n\r\n            if (!!previousSelection) {\r\n                previousSelection.selected = false;\r\n            }\r\n            tile.selected = true;\r\n\r\n            this._selectedTile = tile;\r\n\r\n            this.selectionChanged.emit({\r\n                previous: previousSelection,\r\n                current: tile,\r\n                element: <HTMLElement>this.tilesContainer.nativeElement.querySelector('#' + tile.id)\r\n            });\r\n        } finally {\r\n            this._isBusyHandlingSelectionEvent = false;\r\n        }\r\n    }\r\n}\r\n","<div class=\"tile-select-container\"\r\n     #tileSelectContainer\r\n     k2-tab-index \r\n     tabindex=\"0\"\r\n     (mousedown)=\"onMouseDown($event)\"\r\n     (focus)=\"onFocus($event)\">\r\n\r\n    <div class=\"selectable-tile-container\" \r\n        tabindex=\"-1\"\r\n        *ngFor=\"let tile of tiles\"\r\n        [ngClass]=\"{ 'selected' : tile.selected, 'disabled' : !tile.enabled, 'focused' : tile.focused, 'normal' : tile.enabled }\" \r\n        (click)=\"onTileClicked(tile)\" \r\n        (keydown)=\"onKeyDown($event, tile)\"\r\n        [title]=\"tile.tooltip\"\r\n        (mouseenter)=\"hover = true\"\r\n        (mouseleave)=\"hover = false\"\r\n        (focus)=\"onTileFocus(tile)\"\r\n        (blur)=\"onTileBlur(tile)\"\r\n        [id]=\"tile.id\">\r\n\r\n        <div class=\"tile-body\">\r\n            <div class=\"tile-icon-container\">\r\n                <div class=\"tile-icon {{tile.iconClass}}\" [ngClass]=\"{ 'hover' : hover && tile.enabled, 'selected' : tile.selected && tile.enabled, 'disabled' : !tile.enabled }\"></div>\r\n            </div>\r\n        </div>\r\n        <div class=\"tile-footer\">\r\n                <div class=\"tile-text tile-title\" [title]=\"tile.title\">\r\n                {{tile.title}}\r\n            </div>\r\n            <div class=\"tile-text tile-description\" *ngIf=\"!!tile.description\" [title]=\"tile.description\">\r\n                {{tile.description}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n","import { animate, state, style, transition, trigger } from '@angular/animations';\r\nimport { Component, EventEmitter, Inject, Input, OnInit, SecurityContext } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { ICanvasService } from '../../../types/services/canvas/i-canvas.service';\r\nimport { IDataService } from '../../../types/services/data/i-data-service';\r\nimport { IEnvironmentService } from '../../../types/services/environment/i-environment-service';\r\nimport { IItemProviderService } from '../../../types/services/item-provider/i-item-provider-service';\r\nimport { IPluginService } from '../../../types/services/plugin/i-plugin-service';\r\nimport { ILegacyResourceService } from '../../../types/services/resources/i-legacy-resource.service';\r\nimport { IToolBoxService } from '../../../types/services/tool-box/i-toolbox-service';\r\nimport { LegacyResourceServiceToken } from '../../legacy-service-factories/resource-service-factory';\r\nimport { CanvasServiceToken } from '../../services/canvas/canvas-service-factory';\r\nimport { DataServiceToken } from '../../services/data/data-service-factory';\r\nimport { EnvironmentServiceToken } from '../../services/environment/environment-service-factory';\r\nimport { EventNotifierService } from '../../services/event-notifier/event-notifier.service';\r\nimport { ItemProviderServiceToken } from '../../services/item-provider/item-provider-service-factory';\r\nimport { PluginServiceToken } from '../../services/plugin/plugin-service-factory';\r\nimport { ToolBoxServiceToken } from '../../services/tool-box/tool-box-service-factory';\r\nimport { plugins } from '../../shared/constants/plugins';\r\nimport { isUndefinedOrNull } from '../../shared/utils/general';\r\n\r\n@Component({\r\n    selector: 'k2-toolbox',\r\n    templateUrl: './toolbox.component.html',\r\n    styleUrls: ['./toolbox.component.less'],\r\n    animations: [\r\n        trigger('slideOld', [\r\n            transition('* => Left', [\r\n                style({ transform: 'translateX(0%)' }),\r\n                animate(300, style({ transform: 'translateX(-100%)' }))\r\n            ]),\r\n            transition('* => Right', [\r\n                style({ transform: 'translateX(0%)' }),\r\n                animate(300, style({ transform: 'translateX(100%)' }))\r\n            ])\r\n        ]),\r\n        trigger('slideNew', [\r\n            transition('* => Left', [\r\n                style({ transform: 'translateX(100%)' }),\r\n                animate(300, style({ transform: 'translateX(0%)' }))\r\n            ]),\r\n            transition('* => Right', [\r\n                style({ transform: 'translateX(-100%)' }),\r\n                animate(300, style({ transform: 'translateX(0%)' }))\r\n            ])\r\n        ]),\r\n\r\n    ]\r\n})\r\nexport class ToolboxComponent implements OnInit {\r\n    public static popOverTemplate: string;\r\n\r\n    // #region - private properties -\r\n    private quickFavouritesEditActive: boolean;\r\n    private searchId: string;\r\n    private infoClickedEvent: EventEmitter<null>;\r\n    // #endregion - private properties -\r\n\r\n    public slctCat: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>;\r\n    public catStack: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>[];\r\n    public parentIndex: number;\r\n    public currentIndex: number;\r\n    public showPreviousContent: boolean;\r\n    public slide: string;\r\n    public slctPrv: sourceCode.k2Designer.objectModel.core.itemProvider.IItemProvider<any>;\r\n    public searchText: string;\r\n    public isLoading: boolean;\r\n    public favouritesQuickEdit: boolean;\r\n    public item: sourceCode.k2Designer.objectModel.core.itemProvider.IItemBase<any, any>;\r\n    public curCat: sourceCode.k2Designer.objectModel.core.itemProvider.IItemBase<any, any>;\r\n    public rootText: string;\r\n    public placeholderText: string;\r\n    public srchResult: {\r\n        total: number;\r\n        cats: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>[];\r\n    };\r\n    public isRecentProvider: boolean;\r\n\r\n    // Define inputs\r\n    @Input() public uiComp: sourceCode.k2Designer.objectModel.plugin.IDefinition;\r\n\r\n    constructor(\r\n        private sanitizer: DomSanitizer,\r\n        eventNotifier: EventNotifierService,\r\n        @Inject(EnvironmentServiceToken) private _envService: IEnvironmentService,\r\n        @Inject(ToolBoxServiceToken) public _toolBoxService: IToolBoxService,\r\n        @Inject(CanvasServiceToken) private _canvasService: ICanvasService,\r\n        @Inject(LegacyResourceServiceToken) private _resourceService: ILegacyResourceService,\r\n        @Inject(PluginServiceToken) private _pluginService: IPluginService,\r\n        @Inject(ItemProviderServiceToken) private _itemProviderService: IItemProviderService,\r\n        @Inject(DataServiceToken) private _dataService: IDataService) {\r\n\r\n        this.infoClickedEvent = eventNotifier.addEvent('toolbox-controller.info-clicked');\r\n        this.catStack = [];\r\n        this.showPreviousContent = false;\r\n        this.currentIndex = 0;\r\n        this.parentIndex = 0;\r\n\r\n        this._toolBoxService.favouritesEditableState = false;\r\n        this.quickFavouritesEditActive = false;\r\n        this.favouritesQuickEdit = false;\r\n\r\n        this.srchResult = {\r\n            total: 0,\r\n            cats: []\r\n        };\r\n        this.loadPopOverTmpl();\r\n\r\n        this.isRecentProvider = false;\r\n\r\n        this.isLoading = false;\r\n\r\n        if (this.getPrvsRootCats() && this.getPrvsRootCats()[0]) {\r\n            this._toolBoxService.ensureRecentsDefinition(this.getPrvsRootCats()[0].items);\r\n        }\r\n\r\n        if (!this.rootText) {\r\n            this.rootText = this._resourceService.getString('toolbox_breadcrumb_root_text');\r\n        }\r\n\r\n        if (!this.placeholderText) {\r\n            this.placeholderText = this._resourceService.getString('breadcrumb_items_placeholder_text');\r\n        }\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        const providers: sourceCode.k2Designer.objectModel.core.itemProvider.IInstanceDefinition[] =\r\n            this._pluginService.getItemProviderInstances(\r\n                this.uiComp.name,\r\n                this._envService.activeStudioItem.studioItemManagementService.itemInstanceConfiguration.name\r\n            );\r\n        if (providers) {\r\n            this.prvLoadedCount = providers.length;\r\n            for (const provider of providers) {\r\n                this._itemProviderService.getItemProviderByName(provider.name)\r\n                    .listenInitialDataLoaded(this.checkProviderInitialDataLoaded.bind(this));\r\n            }\r\n        }\r\n    }\r\n\r\n    public notifyInfoClicked(): void {\r\n        this.infoClickedEvent.emit();\r\n    }\r\n\r\n    public recentItems(): sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxRecentItem[] {\r\n        const prvsRootCats = this.getPrvsRootCats();\r\n        // adding condition to prevent console error. error is produced only on VM during upgrade\r\n        if (!isUndefinedOrNull(prvsRootCats) && prvsRootCats.length > 0) {\r\n            const items: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxRecentItem[] = prvsRootCats[0].items;\r\n            return items;\r\n        }\r\n        return [];\r\n    }\r\n\r\n    public getContextMenuItem(item: any): any {\r\n        item.__dataProviderName = this.slctPrv.providerConfig.name;\r\n        return item;\r\n    }\r\n\r\n    public getDescriptionFrom(item: any): string {\r\n        if (!isUndefinedOrNull(item.description)) {\r\n            if (item.description.length > 0) {\r\n                return item.description;\r\n            }\r\n        }\r\n\r\n        let description = sourceCode.k2Designer.utilities.getDescriptionFrom(item.name);\r\n\r\n        // Favorites bar doesn't include _step in name, try it with _step for the right resource string\r\n        if (description.length === 0) {\r\n            description = sourceCode.k2Designer.utilities.getDescriptionFrom(`${item.name}_step`);\r\n        }\r\n\r\n        return description;\r\n    }\r\n\r\n    public getSectionFrom(item: any): string {\r\n        if (sourceCode.k2Designer.utilities.isObjectaSharePointObject(item)) {\r\n            return 'SharePoint';\r\n        }\r\n\r\n        return item.section;\r\n    }\r\n\r\n    public getSubSectionFrom(item: any): string {\r\n        if (sourceCode.k2Designer.utilities.isObjectaSharePointObject(item)) {\r\n            return item.section;\r\n        }\r\n\r\n        return item.subsection;\r\n    }\r\n\r\n    private prvLoadedCount: number;\r\n    public checkProviderInitialDataLoaded(): void {\r\n        this.prvLoadedCount--;\r\n        if (this.prvLoadedCount === 0) {\r\n            this.setupRootCats();\r\n        }\r\n    }\r\n\r\n    public favouritesToolboxItemContextMenu(event: MouseEvent, context?: any): void {\r\n        const _toolBoxService = this._toolBoxService;\r\n        const favouriteIcon = 'icon icon-set-edittoolbox_popover icon-size16 ic-favourites';\r\n        let pinTitle;\r\n\r\n        if (_toolBoxService.checkIfFavouritesContains(context)) {\r\n            pinTitle = this._resourceService.getString('context_menu_favourites_unpin');\r\n        }\r\n        else {\r\n            pinTitle = this._resourceService.getString('context_menu_favourites_pin');\r\n        }\r\n\r\n        const configuration: sourceCode.k2Designer.objectModel.contextMenu.IContextMenuConfiguration =\r\n            <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuConfiguration>{\r\n                e: event,\r\n                menuItems: <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem[]>[\r\n                    <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem>{\r\n                        title: pinTitle,\r\n                        enabled: true,\r\n                        icon: favouriteIcon,\r\n                        onSelected: (item: sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem) => {\r\n                            if (_toolBoxService.checkIfFavouritesContains(context)) {\r\n                                _toolBoxService.removeFavouriteItem(context);\r\n                            } else {\r\n                                _toolBoxService.addFavouriteItem(0, context);\r\n                            }\r\n\r\n                        }\r\n                    },\r\n                    <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem>{\r\n                        title: this._resourceService.getString('context_menu_favourites_help'),\r\n                        enabled: true,\r\n                        icon: 'icon icon-set-edittoolbox_popover icon-size16 ic-help',\r\n                        onSelected: (item: sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem) => {\r\n                            window.open(sourceCode.k2Designer.utilities.buildHelpLinkUrl(3), '_blank');\r\n                        }\r\n                    }],\r\n                width: 140\r\n            };\r\n\r\n        sourceCode.k2Designer.uiComponents.contextMenu.showContextMenu(configuration);\r\n    }\r\n\r\n    public favouritesMainContextMenu(data: any): void {\r\n        const _toolBoxService = this._toolBoxService;\r\n        let title: string = this._resourceService.getString('context_menu_favourites_edit');\r\n\r\n        if (this._toolBoxService.favouritesEditableState) {\r\n            title = this._resourceService.getString('context_menu_favourites_cancel_edit');\r\n        }\r\n\r\n        const configuration: sourceCode.k2Designer.objectModel.contextMenu.IContextMenuConfiguration = <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuConfiguration>{\r\n            e: event,\r\n            menuItems: <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem[]>[\r\n                <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem>{\r\n                    title,\r\n                    enabled: true,\r\n                    icon: 'icon icon-set-toolbar icon-size16 ic-edit',\r\n                    onSelected: (item: sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem) => {\r\n                        _toolBoxService.favouritesEditableState = !_toolBoxService.favouritesEditableState;\r\n                    }\r\n                },\r\n                <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem>{\r\n                    title: this._resourceService.getString('context_menu_favourites_help'),\r\n                    enabled: true,\r\n                    icon: 'icon icon-set-edittoolbox_popover icon-size16 ic-help',\r\n                    onSelected: (item: sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem) => {\r\n                        window.open(sourceCode.k2Designer.utilities.buildHelpLinkUrl(3), '_blank');\r\n                    }\r\n                }],\r\n            width: 140\r\n        };\r\n\r\n        sourceCode.k2Designer.uiComponents.contextMenu.showContextMenu(configuration);\r\n    }\r\n\r\n    public favouritesTopContextMenu(event: MouseEvent, context?: any): void {\r\n        const _toolBoxService = this._toolBoxService;\r\n\r\n        const configuration: sourceCode.k2Designer.objectModel.contextMenu.IContextMenuConfiguration = <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuConfiguration>{\r\n            e: event,\r\n            menuItems: <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem[]>[\r\n                <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem>{\r\n                    title: this._resourceService.getString('context_menu_favourites_edit'),\r\n                    enabled: true,\r\n                    icon: 'icon icon-set-toolbar icon-size16 ic-edit',\r\n                    onSelected(item: sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem) {\r\n                        _toolBoxService.favouritesEditableState = !_toolBoxService.favouritesEditableState;\r\n                    }\r\n                },\r\n                <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem>{\r\n                    title: this._resourceService.getString('context_menu_favourites_Reset'),\r\n                    enabled: true,\r\n                    icon: 'icon icon-set-contextbrowser icon-size16 ic-refresh',\r\n                    onSelected(item: sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem) {\r\n                        _toolBoxService.resetToDefaults(function() {\r\n                        });\r\n                    }\r\n                },\r\n                <sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem>{\r\n                    title: this._resourceService.getString('context_menu_favourites_help'),\r\n                    enabled: true,\r\n                    icon: 'icon icon-set-edittoolbox_popover icon-size16 ic-help',\r\n                    onSelected(item: sourceCode.k2Designer.objectModel.contextMenu.IContextMenuItem) {\r\n                        window.open(sourceCode.k2Designer.utilities.buildHelpLinkUrl(3), '_blank');\r\n                    }\r\n                }],\r\n            width: 140\r\n        };\r\n\r\n        sourceCode.k2Designer.uiComponents.contextMenu.showContextMenu(configuration);\r\n    }\r\n\r\n    public isActive(): boolean {\r\n        return this._envService.activeStudioItem.pluginStates.toolbox === 'expanded';\r\n    }\r\n\r\n    public onItemDroppedOnBin(data: sourceCode.k2Designer.objectModel.dragDropService.IDragDropData): void {\r\n        // Check if the type is favourites - TODO: Change type check to read actual type from favourites item provider.\r\n\r\n        if (this.favouritesQuickEdit) {\r\n\r\n            this._toolBoxService.favouritesEditableState = false;\r\n            this.quickFavouritesEditActive = false;\r\n            this.favouritesQuickEdit = false;\r\n        }\r\n\r\n        this._toolBoxService.removefvrt(data);\r\n\r\n    }\r\n\r\n    public onSortableFinished() {\r\n        if (this.favouritesQuickEdit) {\r\n            this._toolBoxService.favouritesEditableState = false;\r\n            this.quickFavouritesEditActive = false;\r\n            this.favouritesQuickEdit = false;\r\n\r\n        }\r\n    }\r\n\r\n    // Changes the boolean value of the toolbox editable state\r\n    public changeEditableState(): void {\r\n        this._toolBoxService.favouritesEditableState = !this._toolBoxService.favouritesEditableState;\r\n    }\r\n\r\n    // Returns the favourites array after getting it from the toolbox service\r\n    public getFvrts(): sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxFavoriteItem[] {\r\n        return this._toolBoxService.getFvrts();\r\n    }\r\n\r\n    public getCustomStepIcon(id: string): string {\r\n        if (this._canvasService.getIcons()[id]) {\r\n            return id;\r\n        }\r\n        else {\r\n            return 'fallbackIcon';\r\n        }\r\n\r\n    }\r\n    // #region - private methods -\r\n\r\n    public searchProgress(percentage: number) {\r\n        console.log(percentage);\r\n    }\r\n\r\n    public refreshSearch(value: string): void {\r\n        this.searchText = value;\r\n\r\n        let newObject: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxWizardItem>;\r\n\r\n        this.srchResult = {\r\n            total: 0,\r\n            cats: []\r\n        };\r\n\r\n        if (this.prvLoadedCount === 0) {\r\n            $('.repatriate-tooltip').remove();\r\n\r\n            const rootCats: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>[] = this.getPrvsRootCats();\r\n            for (const rootCat of rootCats) {\r\n                // exclude the SmartObjects Category from UI search, search will be performed against available SmartObjects on server\r\n                if (rootCat.name !== 'tlbxSmoPlugin') {\r\n                    this.checkCatFilter(rootCat);\r\n                }\r\n            }\r\n\r\n            const temp: sourceCode.k2Designer.objectModel.contextBrowser.IItem = <sourceCode.k2Designer.objectModel.contextBrowser.IItem>{\r\n                title: this._resourceService.getString('workflowToolbox_plugin_smartobjects_heading'),\r\n                id: -10,\r\n                isCategory: true,\r\n                groupOrder: 200,\r\n                items: []\r\n            };\r\n\r\n            this.searchId = sourceCode.k2Designer.utilities.shortUid();\r\n\r\n            if (!this.searchText || this.searchText.length === 0) {\r\n                this.resetCategory();\r\n                return;\r\n            }\r\n\r\n            this._dataService.httpGet('api/smartobject/searchSmartObjects',\r\n                {\r\n                    search: this.searchText,\r\n                    host: 'standAlone'\r\n                }, (data: any, error: boolean) => {\r\n                    if (data !== null && data !== undefined && !!data.update && !error) {\r\n                        this.onSearchResults(this.searchId, temp, data);\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n    public onSearchResults(searchId: string, temp: any, data: any): void {\r\n\r\n        if (searchId === this.searchId) {\r\n            (<sourceCode.k2Designer.uiComponents.toolbox.plugins.SmoController>this._itemProviderService\r\n                .getItemProvider(sourceCode.k2Designer.uiComponents.toolbox.plugins.SmoController))\r\n                .DataReceived(temp, this.smoDataRecieved.bind(this), data, false);\r\n        }\r\n\r\n        if (temp.items.length > 0) {\r\n            this.srchResult.cats.push(<any>temp);\r\n        }\r\n    }\r\n\r\n    public smoDataRecieved(sourceItem: sourceCode.k2Designer.objectModel.contextBrowser.IItem): void {\r\n\r\n    }\r\n\r\n    public checkCatFilter(cat: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>): void {\r\n        const itms: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>[] = this.getItms(cat, this.searchText).sort(\r\n            function(a: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>, b: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>): number {\r\n                if (a.title < b.title) return -1;\r\n                if (a.title > b.title) return 1;\r\n                return 0;\r\n            });\r\n        let nCat: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>;\r\n\r\n        try {\r\n            if (itms.length > 0) {\r\n\r\n                if (cat instanceof sourceCode.k2Designer.objectModel.core.model.ModelBase) {\r\n                    nCat = cat.clone<sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>>();\r\n\r\n                    (<any>nCat).items = itms;\r\n\r\n                    this.srchResult.total += itms.length;\r\n                    this.srchResult.cats.push(nCat);\r\n                }\r\n            }\r\n            const cats: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>[] = this._itemProviderService.getItemCategories(cat);\r\n            for (let i = 0; i < cats.length; i++) {\r\n                this.checkCatFilter(cats[i]);\r\n            }\r\n        }\r\n        catch (Error) {\r\n            console.info(Error.message);\r\n        }\r\n    }\r\n\r\n    public getTitle(text: string, search: string): string {\r\n        const title: string = text;\r\n\r\n        if (!search) {\r\n            text = this.sanitizer.sanitize(SecurityContext.HTML, text);\r\n        }\r\n        if (text != null && text.length > 0) {\r\n            text = this.sanitizer.sanitize(SecurityContext.HTML, text.replace(new RegExp(search, 'gi'), '<span class=\\'search-highlight\\'>$&</span>'));\r\n        }\r\n\r\n        return text;\r\n    }\r\n\r\n    public getCats(itm: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>): sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>[] {\r\n        if (itm.groupOrder && itm.groupOrder > 0) {\r\n            return this._itemProviderService.getItemCategories(itm).sort(\r\n                function(a: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>, b: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>): number {\r\n                    if (a.title < b.title) return -1;\r\n                    if (a.title > b.title) return 1;\r\n                    return 0;\r\n                });\r\n        } else {\r\n            return this._itemProviderService.getItemCategories(itm);\r\n        }\r\n    }\r\n\r\n    public getItms(itm: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>, filter: string = null): sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>[] {\r\n        if (itm.groupOrder && itm.groupOrder > 0) {\r\n            return this._itemProviderService.getSubItems(itm, filter).sort(\r\n                (a: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>, b: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>): number => {\r\n                    if (a.title < b.title) return -1;\r\n                    if (a.title > b.title) return 1;\r\n                    return 0;\r\n                });\r\n        } else {\r\n            return this._itemProviderService.getSubItems(itm, filter);\r\n        }\r\n    }\r\n\r\n    public getItmCt(): number {\r\n        let ct = 0;\r\n        const prvs: sourceCode.k2Designer.objectModel.core.itemProvider.IInstanceDefinition[] =\r\n            this._pluginService.getItemProviderInstances(\r\n                this.uiComp.name,\r\n                this._envService.activeStudioItem.studioItemManagementService.itemInstanceConfiguration.name\r\n            );\r\n        for (let i = 0; i < prvs.length; i++) {\r\n            if (prvs[i].exclItmCt == null || prvs[i].exclItmCt == false) {\r\n                const rootCats: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>[] = this._itemProviderService.getRootCategories(prvs[i].name);\r\n                for (let c = 0; c < rootCats.length; c++) {\r\n                    ct += this.calcItms(rootCats[c], false);\r\n                }\r\n            }\r\n        }\r\n        return ct;\r\n    }\r\n\r\n    public itemSelected(event) {\r\n        const item: sourceCode.k2Designer.components.IBreadCrumbItem = event ? event.item : null;\r\n        const newBreadCrumbItems: sourceCode.k2Designer.components.IBreadCrumbItem[] = event && event.newCrumbs ? event.newCrumbs : [];\r\n        this.catStack = newBreadCrumbItems;\r\n        this.popToStack(<any>item);\r\n    }\r\n\r\n    public popToStack(cat: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>): void {\r\n        this.selectCat(cat, false, true);\r\n    }\r\n\r\n    public isSubSectionList(): boolean {\r\n        const subItems: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>[] = this._itemProviderService.getItemCategories(this.slctCat);\r\n        return subItems.length >= 1 && this.calcItms(this.slctCat) >= 1;\r\n    }\r\n\r\n    public calcItms(cat: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>, includeCat: boolean = true): number {\r\n        let itms: number = cat.items != null ? cat.items.length : 0;\r\n        const subItems: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>[] = this._itemProviderService.getItemCategories(cat);\r\n        if (subItems.length > 0) {\r\n            if (includeCat) itms += subItems.length;\r\n            for (let i = 0; i < subItems.length; i++) {\r\n                itms += this.calcItms(subItems[i]);\r\n            }\r\n        }\r\n        return itms;\r\n    }\r\n\r\n    public getDragImage(item: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>): HTMLElement {\r\n        const result: HTMLDivElement = document.createElement('div');\r\n        result.innerText = item.title;\r\n        sourceCode.k2Designer.directives.k2DragDrop.K2Draggable.dragOffset = { x: 0, y: 0 };\r\n        return result;\r\n    }\r\n\r\n    public getDragImageFn = this.getDragImage.bind(this);\r\n\r\n    /**\r\n     * Return an object of data that is associated with the toolbox item\r\n     */\r\n    public getDragItem(item: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>): sourceCode.k2Designer.objectModel.dragDropService.IDragDropData {\r\n        if (this.slctPrv) {\r\n            return this.slctPrv.getDragItem(item, null);\r\n        }\r\n    }\r\n\r\n    public getDragItemFn = this.getDragItem.bind(this);\r\n\r\n    public setRecentsProvider(): void {\r\n\r\n        const prvs: sourceCode.k2Designer.objectModel.core.itemProvider.IInstanceDefinition[] = this._pluginService.getItemProviderInstances(this.uiComp.name, this._envService.activeStudioItem.studioItemManagementService.itemInstanceConfiguration.name);\r\n        for (let i = 0; i < prvs.length; i++) {\r\n            if (this._itemProviderService.getItemProviderByName(prvs[i].name) instanceof sourceCode.k2Designer.uiComponents.toolbox.plugins.RecentsController) {\r\n                this.slctPrv = this._itemProviderService.getItemProviderByName(prvs[i].name);\r\n                this.isRecentProvider = true;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    public onDrag(e: DragEvent): void {\r\n\r\n        if (e.altKey && !this._toolBoxService.favouritesEditableState && !this.favouritesQuickEdit) {\r\n\r\n            this._toolBoxService.favouritesEditableState = true;\r\n            this.quickFavouritesEditActive = true;\r\n            this.favouritesQuickEdit = true;\r\n        }\r\n\r\n        if (this._toolBoxService.favouritesEditableState && !e.altKey && this.favouritesQuickEdit) {\r\n\r\n            this._toolBoxService.favouritesEditableState = false;\r\n            this.quickFavouritesEditActive = false;\r\n            this.favouritesQuickEdit = false;\r\n        }\r\n    }\r\n\r\n    public onDragFn = this.onDrag.bind(this);\r\n\r\n    public onDragStart(e: DragEvent): void {\r\n\r\n        if (e.altKey) {\r\n\r\n            this._toolBoxService.favouritesEditableState = true;\r\n            this.quickFavouritesEditActive = true;\r\n            this.favouritesQuickEdit = true;\r\n        }\r\n    }\r\n\r\n    public onDragStartFn = this.onDragStart.bind(this);\r\n\r\n    public onDragEnd(e: DragEvent): void {\r\n\r\n        if (this.quickFavouritesEditActive === true) {\r\n\r\n            this._toolBoxService.favouritesEditableState = false;\r\n            this.quickFavouritesEditActive = false;\r\n            this.favouritesQuickEdit = false;\r\n        }\r\n    }\r\n\r\n    public onDragEndFn = this.onDragEnd.bind(this);\r\n\r\n    /**\r\n     * animate the items\r\n     *\r\n     * @param slideLeft should it slide left\r\n     */\r\n    public animateItems(slideLeft: boolean = true): void {\r\n        const cuc = $('.toolbox-current-content');\r\n        const prev = $('.toolbox-previous-content');\r\n        this.slide = '';\r\n        prev.html(cuc.html());\r\n\r\n        setTimeout(() => {\r\n            this.slide = slideLeft ? 'Left' : 'Right';\r\n\r\n            setTimeout(() => {\r\n                prev.html('');\r\n            }, 290);\r\n        }, 0);\r\n    }\r\n\r\n    public setSelectionProvider(cat: any) {\r\n\r\n        const prvs: sourceCode.k2Designer.objectModel.core.itemProvider.IInstanceDefinition[] = this._pluginService.getItemProviderInstances(this.uiComp.name, this._envService.activeStudioItem.studioItemManagementService.itemInstanceConfiguration.name);\r\n        for (let i = 0; i < prvs.length; i++) {\r\n            if (this.srchResult.cats.indexOf(cat) > -1) {\r\n                this.slctPrv = this._itemProviderService.getItemProviderByName(prvs[i].name);\r\n                if (this.slctPrv instanceof sourceCode.k2Designer.uiComponents.toolbox.plugins.RecentsController) {\r\n                    this.isRecentProvider = true;\r\n                }\r\n                else { this.isRecentProvider = false; }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    public resetCategory() {\r\n        const prvs: sourceCode.k2Designer.objectModel.core.itemProvider.IInstanceDefinition[] = this._pluginService.getItemProviderInstances(this.uiComp.name, this._envService.activeStudioItem.studioItemManagementService.itemInstanceConfiguration.name);\r\n        for (let i = 0; i < prvs.length; i++) {\r\n            if (this.categoryExistsInProvider(this._itemProviderService.getRootCategories(prvs[i].name), this.slctCat)) {\r\n                this.slctPrv = this._itemProviderService.getItemProviderByName(prvs[i].name);\r\n                if (this.slctPrv instanceof sourceCode.k2Designer.uiComponents.toolbox.plugins.RecentsController) {\r\n                    this.isRecentProvider = true;\r\n                }\r\n                else { this.isRecentProvider = false; }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    public selectCat(cat: any, goForward: boolean = true, fromBreadcrumb: boolean = false): void {\r\n        this.isLoading = false;\r\n        if (cat) {\r\n            this.animateItems(goForward);\r\n\r\n            const newCategoryStack: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>[] = this.catStack.concat();\r\n            if (!fromBreadcrumb) newCategoryStack.push(cat);\r\n\r\n            this.catStack = newCategoryStack;\r\n\r\n            this.slctCat = cat;\r\n\r\n            const providers: sourceCode.k2Designer.objectModel.core.itemProvider.IInstanceDefinition[] = this._pluginService.getItemProviderInstances(this.uiComp.name, this._envService.activeStudioItem.studioItemManagementService.itemInstanceConfiguration.name);\r\n            for (const prov of providers) {\r\n                if (this.categoryExistsInProvider(this._itemProviderService.getRootCategories(prov.name), cat)) {\r\n                    this.slctPrv = this._itemProviderService.getItemProviderByName(prov.name);\r\n                    if (this.slctPrv instanceof sourceCode.k2Designer.uiComponents.toolbox.plugins.RecentsController) {\r\n                        this.isRecentProvider = true;\r\n                    }\r\n                    else { this.isRecentProvider = false; }\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (cat && this.slctPrv.providerConfig.drilldownUrl && this.slctPrv.providerConfig.drilldownUrl.length) {\r\n                // if (!cat.items || cat.items.length <= 0) {\r\n                this.isLoading = true;\r\n                this.slctCat = <sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>>cat;\r\n                this.slctPrv.loadDynamicData(cat, this.onCategoryDataLoaded.bind(this));\r\n                // }\r\n            }\r\n        }\r\n        else {\r\n            this.animateItems(goForward);\r\n            this.catStack.length = 0;\r\n            this.catStack = [];\r\n            this.slctCat = cat;\r\n        }\r\n    }\r\n\r\n    public categoryExistsInProvider(rootCategories: sourceCode.k2Designer.objectModel.core.itemProvider.IItemBase<any, any>[], cat: any): boolean {\r\n        if (rootCategories.indexOf(cat) !== -1) {\r\n            return true;\r\n        } else {\r\n            for (let r = 0; r < rootCategories.length; r++) {\r\n                if (rootCategories[r].items && rootCategories[r].items.length > 0) {\r\n                    if (rootCategories[r].items.indexOf(cat) !== - 1) {\r\n                        return true;\r\n                    } else {\r\n                        return this.categoryExistsInProvider(rootCategories[r].items, cat);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public onCategoryDataLoaded() {\r\n        this.isLoading = false;\r\n    }\r\n\r\n    private _rootCats;\r\n    public setupRootCats(): void {\r\n        let result: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>[] = new Array();\r\n        let prvs: sourceCode.k2Designer.objectModel.core.itemProvider.IInstanceDefinition[] = this._pluginService.getItemProviderInstances(this.uiComp.name, this._envService.activeStudioItem.studioItemManagementService.itemInstanceConfiguration.name);\r\n\r\n        // process all default(top)-level item providers\r\n        for (let i = 0; i < prvs.length; i++) {\r\n            const grp: number = this._itemProviderService.getItemProviderByName(prvs[i].name).groupIndex;\r\n            if (grp === 0) {\r\n                result = result.concat(this._itemProviderService.getRootCategories(prvs[i].name));\r\n            } else {\r\n                // all all root items that have a 0 or null group id\r\n                result = result.concat(this._itemProviderService.getRootCategoriesForGroup(prvs[i].name, 0));\r\n            }\r\n        }\r\n\r\n        // process all other item providers, ordered by their individual groupings\r\n        prvs = prvs.sort(\r\n            (a: sourceCode.k2Designer.objectModel.core.itemProvider.IInstanceDefinition,\r\n                b: sourceCode.k2Designer.objectModel.core.itemProvider.IInstanceDefinition): number => this._itemProviderService.getItemProviderByName(a.name).groupIndex - this._itemProviderService.getItemProviderByName(b.name).groupIndex);\r\n\r\n        let curGroup = 0;\r\n\r\n        for (let i = 0; i < prvs.length; i++) {\r\n            const grp: number = this._itemProviderService.getItemProviderByName(prvs[i].name).groupIndex;\r\n            let providerCategories: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>[];\r\n\r\n            if (grp && grp > 0) {\r\n                if (prvs[i].name === 'tlbxWorkflowWizards') {\r\n                    providerCategories = this._itemProviderService.getRootCategoriesForGroup(prvs[i].name, grp).sort(\r\n                        function(a: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>, b: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>): number {\r\n                            if (a.title < b.title) return -1;\r\n                            if (a.title > b.title) return 1;\r\n                            return 0;\r\n                        });\r\n                } else {\r\n                    providerCategories = this._itemProviderService.getRootCategoriesForGroup(prvs[i].name, grp);\r\n                }\r\n            }\r\n\r\n            if (grp !== curGroup) {\r\n                if (providerCategories && providerCategories.length > 0) {\r\n                    // add a separator\r\n                    result.push({\r\n                        title: '',\r\n                        spriteClass: 'separator'\r\n                    });\r\n                }\r\n\r\n                curGroup = grp;\r\n            }\r\n\r\n            if (providerCategories) {\r\n                result = result.concat(providerCategories);\r\n            }\r\n        }\r\n\r\n        this._rootCats = result;\r\n    }\r\n\r\n    public calculateItemCount(category: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>): string {\r\n        const itemCount: number = this.getItemCount(category);\r\n\r\n        return itemCount === 0 ? '' : itemCount.toString();\r\n    }\r\n\r\n    public getItemCount(category: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>): number {\r\n        let itemCount = 0;\r\n\r\n        if (category.items) {\r\n            itemCount = category.items.length;\r\n\r\n            for (let i = 0; i < category.items.length; i++) {\r\n                if (category.items[i].isCategory === true) {\r\n                    itemCount = itemCount + this.getItemCount(category.items[i]) - 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        return itemCount;\r\n    }\r\n\r\n    public getPrvsRootCats(): sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxItem<any>[] {\r\n        return this._rootCats;\r\n        // return result;\r\n    }\r\n\r\n    public toggleToolbox(): void {\r\n        this._pluginService.toggleState(plugins.panels.toolBox);\r\n    }\r\n\r\n    private loadPopOverTmpl(): void {\r\n        this._dataService.getFile('uiComponents/toolbox/popOver.html', this.onPopOverTmplLoaded.bind(this), !window.K2DESIGNERDEBUGGING);\r\n    }\r\n\r\n    public onPopOverTmplLoaded(data: string, error: boolean): void {\r\n        if (!error) {\r\n            ToolboxComponent.popOverTemplate = data;\r\n\r\n            this._toolBoxService.loaded();\r\n        }\r\n    }\r\n}\r\n","<div class=\"tlbx-favs\">\r\n    <div class=\"flex-container\" [ngClass]=\"{ 'favs-editing-temporary' : favouritesQuickEdit === true,  '' : _toolBoxService.favouritesEditableState === false , 'favs-editing-permanent' :  _toolBoxService.favouritesEditableState === true && favouritesQuickEdit === false}\">\r\n        <div k2ContextMenu (rightClickEvent)=\"favouritesTopContextMenu($event)\" class=\"fav-header has-border\" (click)=\"toggleToolbox()\">\r\n            <div class=\"fav-item centre\">\r\n                <span class=\"icon icon-set-toolbox icon-size16\" [ngClass]=\"{ 'ic-expandmenu' : !isActive(),  'ic-collapsemenu' : isActive() }\"></span>\r\n            </div>\r\n        </div>\r\n        <div class=\"fav-items\" k2ContextMenu (rightClickEvent)=\"favouritesMainContextMenu($event)\">\r\n            <k2-stack-panel [k2Itemheight]=\"44\" [k2Items]=\"getFvrts()\" (k2OnDragEnd)=\"onSortableFinished()\" [k2TempEdit]=\"favouritesQuickEdit\"></k2-stack-panel>\r\n        </div>\r\n        <div *ngIf=\"recentItems() && recentItems().length > 0\" class=\"recents-footer\" [ngClass]=\"{ 'editing' :  _toolBoxService.favouritesEditableState === true && favouritesQuickEdit === false}\" (mouseover)=\"setRecentsProvider()\">\r\n            <div [ngClass]=\"recentItems()[0]['name']+'-item-animate'\">\r\n                <div class=\"info-div\" *ngFor=\"let recent of recentItems() | slice:0:4\"\r\n                     K2Draggable\r\n                     [k2Dragcontext]=\"recent\"\r\n                     [k2Dragghost]=\"getDragImageFn\"\r\n                     k2Dragtype=\"canvasItem\"\r\n                     [k2Dragitem]=\"getDragItemFn\"\r\n                     [k2Dropped]=\"onDataDropped\"\r\n                     [k2Dragend]=\"onDragEndFn\">\r\n                    <div k2TooltipSimple\r\n                         [k2TooltipName]=\"recent.name\"\r\n                         [k2TooltipTitle]=\"recent.title\"\r\n                         [k2TooltipSection]=\"getSectionFrom(recent)\"\r\n                         [k2TooltipDescription]=\"getDescriptionFrom(recent)\"\r\n                         [k2TooltipSubsection]=\"getSubSectionFrom(recent)\"\r\n                         [k2TooltipPosition]=\"'right'\">\r\n                        <span *ngIf=\"!recent.isCustom\" class=\"icon icon-size24\" [ngClass]=\"recent.spriteClass\"></span>\r\n                        <svg class=\"icon icon-size24\" *ngIf=\"recent.isCustom\">\r\n                            <use xlink:href=\"\" [href]=\"'#'+getCustomStepIcon(recent.customStepUniqueId)\"></use>\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"fav-footer\">\r\n            <div class=\"info-div\" (click)=\"notifyInfoClicked()\">\r\n                <a class=\"help-button\" target=\"_blank\"><span class=\"icon icon-set-buttons icon-size24 ic-help_button\"></span></a>\r\n            </div>\r\n            <div class=\"edit-div\">\r\n                <div K2Droppable k2Droptypes=\"canvasItem\" (k2Dropped)=\"onItemDroppedOnBin($event)\">\r\n                    <span class=\"icon icon-set-edittoolbox icon-size24 ic-remove dark\"></span>\r\n                </div>\r\n                <div (click)=\"changeEditableState()\" *ngIf=\"!favouritesQuickEdit\">\r\n                    <span class=\"icon icon-set-edittoolbox icon-size24 ic-clear\"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"tlbx-events\">\r\n    <div class=\"flex-container\">\r\n        <div class=\"tlbx-brd-crmb has-border\">\r\n            <k2-bread-crumb (onCrumbItemSelected)=\"itemSelected($event)\"\r\n                            [searchInputDelay]=\"300\"\r\n                            (searchTextChanged)=\"refreshSearch($event)\"\r\n                            [placeholderText]=\"placeholderText\"\r\n                            [crumbItems]=\"catStack\"\r\n                            [searchText]=\"searchText\"\r\n                            [selectedItem]=\"slctCat\"\r\n                            [rootIcon]=\"'icon icon-set-toolbox icon-size16 ic-controls'\"\r\n                            [rootText]=\"rootText\">\r\n            </k2-bread-crumb>\r\n        </div>\r\n\r\n        <div class=\"tlbx-items scrollme\" k2-scrollbar>\r\n            <k2-spinner [classNames]=\"'tlbx-items-spinner'\" [overlay]=\"false\" [visible]=\"isLoading\"></k2-spinner>\r\n            <!-- if searchText is being used -->\r\n            <div *ngIf=\"searchText != null && searchText.length > 0\" class=\"fadeMeIn\">\r\n                <div *ngFor=\"let cat of srchResult.cats\" class=\"search-container\" (mouseover)=\"setSelectionProvider(cat)\">\r\n                    <div class=\"search-heading\" [innerHtml]=\"cat.title\"></div>\r\n                    <div class=\"stepListItem\" *ngFor=\"let item of cat.items\" data-ng-init=\"curCat = cat\"\r\n                         k2TooltipSimple\r\n                         [k2TooltipName]=\"item.name\"\r\n                         [k2TooltipTitle]=\"item.title\"\r\n                         [k2TooltipSection]=\"getSectionFrom(item)\"\r\n                         [k2TooltipDescription]=\"getDescriptionFrom(item)\"\r\n                         [k2TooltipSubsection]=\"getSubSectionFrom(item)\"\r\n                         [k2TooltipPosition]=\"'bottom'\">\r\n                        <div K2Draggable [k2Dragcontext]=\"item\" [k2Dragghost]=\"getDragImageFn\" k2Dragtype=\"canvasItem\" [k2Dragitem]=\"getDragItemFn\" [k2Dropped]=\"onDataDropped\">\r\n                            <div class=\"sli-badge\">\r\n                                <div class=\"icon icon-size24\" [ngClass]=\"item.spriteClass\" *ngIf=\"!item.isCustom\"></div>\r\n                                <svg class=\"icon icon-size24\" *ngIf=\"item.isCustom\">\r\n                                    <use xlink:href=\"\" [href]=\"'#'+getCustomStepIcon(item.customStepUniqueId)\"></use>\r\n                                </svg>\r\n                            </div>\r\n                            <div class=\"sli-name\"><span [innerHtml]=\"getTitle(item.title, searchText)\"></span></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- if searchText is not being used -->\r\n            <div *ngIf=\"searchText == null || searchText.length == 0\" class=\"fadeMeIn\">\r\n                <!-- previous content -->\r\n                <div class=\"toolbox-previous-content\" [@slideOld]=\"slide\"></div>\r\n\r\n                <div class=\"toolbox-current-content\" [@slideNew]=\"slide\">\r\n                    <div *ngIf=\"slctCat == null\">\r\n                        <div *ngFor=\"let cat of getPrvsRootCats()\">\r\n                            <div (click)=\"selectCat(cat)\" class=\"tlbx-flex-item-wrap\" *ngIf=\"cat.spriteClass !== 'separator'\">\r\n                                <div class=\"flex-desc category\" k2Tooltip-basic>{{cat.title}}</div>\r\n                                <div class=\"flex-icon counter\" *ngIf=\"cat.name !== 'tlbxSmoPlugin'\">{{calculateItemCount(cat)}}</div>\r\n                                <div class=\"flex-icon\">\r\n                                    <div class=\"icon icon-set-toolbox icon-size16 ic-expandmenu\"></div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"separator-div\" *ngIf=\"cat.spriteClass === 'separator'\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div *ngIf=\"slctCat != null && isSubSectionList()\">\r\n                        <div (click)=\"selectCat(cat)\" *ngFor=\"let cat of getCats(slctCat)\">\r\n                            <div class=\"tlbx-flex-item-wrap\">\r\n                                <div class=\"flex-icon\">\r\n                                    <div class=\" icon icon-size24 \" [ngClass]=\"cat.type !== 6 ? 'icon-set-ribbon ic-category' : 'icon-set-steps ic-smartobjectevent'\"></div>\r\n                                </div>\r\n                                <div class=\"flex-desc category\" k2Tooltip-basic>{{cat.title}}</div>\r\n                                <div class=\"flex-icon category\">\r\n                                    <div class=\"icon icon-set-toolbox icon-size16 ic-expandmenu\"></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div *ngIf=\"slctCat != null\">\r\n                        <div class=\"stepListItem\"\r\n                             *ngFor=\"let item of getItms(slctCat)\"\r\n                             k2TooltipSimple\r\n                             [k2TooltipName]=\"item.name\"\r\n                             [k2TooltipTitle]=\"item.title\"\r\n                             [k2TooltipSection]=\"getSectionFrom(item)\"\r\n                             [k2TooltipDescription]=\"getDescriptionFrom(item)\"\r\n                             [k2TooltipSubsection]=\"getSubSectionFrom(item)\"\r\n                             [k2TooltipPosition]=\"'bottom'\">\r\n                            <div k2ContextMenu (rightClickEvent)=\"favouritesToolboxItemContextMenu($event)\" [contextMenuContext]=\"getContextMenuItem(item)\">\r\n                                <div class=\"sli-drag\" K2Draggable [k2Dragcontext]=\"item\" [k2Dragghost]=\"getDragImageFn\" k2Dragtype=\"canvasItem\" [k2Dragitem]=\"getDragItemFn\" [k2Dragstart]=\"onDragStart\" [k2Drag]=\"onDragFn\" [k2Dragend]=\"onDragEndFn\" [k2Dropped]=\"onDataDropped\">\r\n                                    <div>\r\n                                        <div class=\"sli-badge\">\r\n                                            <div class=\"icon icon-size24\" [ngClass]=\"item.spriteClass\" *ngIf=\"!item.isCustom\"></div>\r\n                                            <svg class=\"icon icon-size24\" *ngIf=\"item.isCustom\">\r\n                                                <use xlink:href=\"\" [href]=\"'#'+getCustomStepIcon(item.customStepUniqueId)\"></use>\r\n                                            </svg>\r\n                                        </div>\r\n                                        <div class=\"sli-name\">{{item.title}}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div *ngIf=\"!isSubSectionList()\">\r\n                            <div *ngFor=\"let cat of getCats(slctCat)\">\r\n                                <div class=\"has-border\">{{cat.title}}</div>\r\n                                <div class=\"stepListItem\"\r\n                                     *ngFor=\"let item of getItms(cat)\"\r\n                                     data-ng-init=\"curCat = cat\"\r\n                                     k2Tooltip-simple\r\n                                     [k2Tooltip-name]=\"item.name\"\r\n                                     [k2Tooltip-title]=\"item.title\"\r\n                                     [k2Tooltip-section]=\"getSectionFrom(item)\"\r\n                                     [k2Tooltip-description]=\"getDescriptionFrom(item)\"\r\n                                     [k2Tooltip-subsection]=\"getSubSectionFrom(item)\"\r\n                                     [k2Tooltip-position]=\"bottom\">\r\n                                    <div k2ContextMenu (rightClickEvent)=\"favouritesToolboxItemContextMenu($event)\" [contextMenuContext]=\"item\">\r\n                                        <div class=\"sli-drag\" K2Draggable [k2Dragcontext]=\"item\" [k2Dragghost]=\"getDragImageFn\" k2Dragtype=\"canvasItem\" [k2Dragitem]=\"getDragItemFn\" [k2Dropped]=\"onDataDropped\" [k2Drag]=\"onDragFn\" [k2Dragstart]=\"onDragStart\" [k2Dragend]=\"onDragEndFn\">\r\n                                            <div>\r\n                                                <div class=\"sli-badge\">\r\n                                                    <div class=\"icon icon-size24\" [ngClass]=\"item.spriteClass\" *ngIf=\"!item.isCustom\"></div>\r\n                                                    <svg class=\"icon icon-size24\" *ngIf=\"item.isCustom\">\r\n                                                        <use xlink:href=\"\" [href]=\"'#'+getCustomStepIcon(item.customStepUniqueId)\"></use>\r\n                                                    </svg>\r\n                                                </div>\r\n                                                <div class=\"sli-name\">{{item.title}}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport IDropDownMenuItem from '../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { IDataMapperContext } from 'src/types/uiComponents/pluginWizards/IDataMapperContext';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { IPopupConfiguration } from '../../../../../types/models/popup/i-popup-configuration';\r\nimport { ProcessService } from '../../../../services/process/process.service';\r\nimport { PageComponent } from '../../page/page.component';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { IModelArray } from 'src/types/models/base/i-model-array';\r\n\r\n/**\r\n * Parent component to be extended by Event Platform components\r\n * */\r\n\r\n@Component({\r\n    selector: 'k2-data-mapper',\r\n    templateUrl: './data-mapper.component.html',\r\n    styleUrls: ['./data-mapper.component.less']\r\n})\r\nexport class DataMapperComponent extends PageComponent implements OnInit {\r\n\r\n    @Input() config: IPopupConfiguration;\r\n    @Input() values: IDropDownMenuItem[] = [];\r\n\r\n    buttonConfig: IPopupButtonsConfig;\r\n\r\n    context: IDataMapperContext;\r\n    rows: IModelArray<sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.setDataFields.ISetDataFieldMapping> = [];\r\n    datafields: IModelArray<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IDataField> = [];\r\n    existingDataFields: string[] = [];\r\n    resources: any = {};\r\n    showMapper: boolean;\r\n    addedDataFieldsReferences: string[] = [];\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        protected processService: ProcessService,\r\n        protected _eventService: EventNotifierService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.context = this.config.context as IDataMapperContext;\r\n        this.existingDataFields = [];\r\n        this.datafields = this.processService.root.configuration.dataFields || [];\r\n        this.existingDataFields = this.getExistingDataFields();\r\n        this.rows = this.context.model?.mapping?.data?.fields || [];\r\n\r\n        this.resources = {\r\n            createVariablesHeading: this.resourceService.getString('event_platform_on_error_event_create_variables_heading'),\r\n            createVariablesButtonLabel: this.resourceService.getString('event_platform_create_variables_button_label'),\r\n            createVariablesManuallyLabelPart1: this.resourceService.getString('event_platform_create_variables_manually_label_part_1'),\r\n            createVariablesManuallyLabelPart2: this.resourceService.getString('event_platform_create_variables_manually_label_part_2'),\r\n            clearMappingsText: this.resourceService.getString('event_platform_clear_mappings_text'),\r\n            clearMappingsTooltip: this.resourceService.getString('event_platform_clear_mappings_tooltip'),\r\n            startRightsHeading: this.resourceService.getString('event_platform_start_rights_heading'),\r\n            startRightsMessage: this.resourceService.getString('event_platform_start_rights_message')\r\n        };\r\n\r\n        //Needs this for edit to get to second state without clicking buttons.\r\n        if (this.rows.length > 0) {\r\n            this.showMapper = true;\r\n        }\r\n    }\r\n    beforePageDisplayed() {}\r\n    beforeNavigateNext() {}\r\n    beforeNavigatePrevious() {\r\n        if(this.datafields.length > 0) {\r\n            this.removeCreatedVariables();\r\n        }\r\n    }\r\n\r\n    public clearMappings(): void {\r\n        this.showMapper = false;\r\n        for (let i: number = this.rows.length - 1; i > -1; i--) {\r\n            this.rows[i].removeFromModelArray();\r\n        }\r\n        this.removeCreatedVariables();\r\n    }\r\n\r\n    /**\r\n     * Protected methods to inherit from\r\n     * */\r\n\r\n    protected createVariables(): void {\r\n        this.populateAutoGeneratedDataFields();\r\n        this.setMapperProperty();\r\n        this.showMapper = true;\r\n    }\r\n\r\n    protected createManually(): void {\r\n        this.showMapper = true;\r\n    }\r\n\r\n    private getExistingDataFields(): string[] {\r\n        this.existingDataFields = [];\r\n\r\n        if (this.datafields.length > 0) {\r\n\r\n            for (const datafield of this.datafields) {\r\n                this.existingDataFields.push(\r\n                    datafield.title\r\n                );\r\n            }\r\n        }\r\n        return this.existingDataFields;\r\n    }\r\n\r\n    private removeCreatedVariables(): void {\r\n        for (let i = this.datafields.length - 1; i > -1; i--) {\r\n            if (this.existingDataFields.indexOf(this.datafields[i].title) < 0) {\r\n                // First remove the row, so that it clears the error and doesn't badge/change the wrong row.\r\n                const reference = this.datafields[i].getReference();\r\n                this.rows.find(x => x.dataFieldReference === reference)?.removeFromModelArray();\r\n\r\n                this.datafields[i].removeFromModelArray();\r\n            }\r\n        }\r\n    }\r\n\r\n    private populateAutoGeneratedDataFields(): void {\r\n        for (const value of this.values) {\r\n            if (!this.dataFieldExist(value.title)) {\r\n                this.datafields.push(sourceCode.k2Designer.objectModel.workflow.process.k2Process.DataField.createInstance({\r\n                    title: value.title,\r\n                    type: value.metaData\r\n                }));\r\n            }\r\n        }\r\n    }\r\n\r\n    private dataFieldExist(title: string): boolean {\r\n        for (const datafield of this.datafields) {\r\n            if (datafield.title === title) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private setMapperProperty(): void {\r\n\r\n        const trackedReferences = this.processService.root.trackedReferences;\r\n\r\n        for (const datafield of this.datafields) {\r\n            if (!this.rowMappingExists(datafield.getReference())) {\r\n\r\n                //This will also check if part of values.\r\n                const defaultValue: string = this.getDefaultValue(datafield.title, datafield.type);\r\n                if (defaultValue && !this.rowMappingExists(datafield.dataFieldControlReference)) {\r\n                    const referenceDefinitionPath = datafield.getReference();\r\n\r\n                    for (const trackedReference of trackedReferences) {\r\n                        if (trackedReference.trackedObjectDefinitionPath === referenceDefinitionPath) {\r\n                            for (let k = trackedReference.references.length; k >= 0; k--) {\r\n                                this.processService.removeTrackedItem(null, trackedReference.references[k]);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // eslint-disable-next-line max-len\r\n                    const row = sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.setDataFields.SetDataFieldMapping.createInstance({\r\n                        dataFieldReference: datafield.getReference(),\r\n                        value: sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                            // eslint-disable-next-line max-len\r\n                            smartFields: [sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({ text: defaultValue })],\r\n                            isDynamic: false\r\n                        })\r\n                    });\r\n                    this.rows.push(row);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private rowMappingExists(dataFieldReference: string): boolean {\r\n        return this.rows.some((i) => i.dataFieldReference === dataFieldReference);\r\n    }\r\n\r\n    private getDefaultValue(title: string, type: sourceCode.k2Designer.objectModel.workflow.process.k2Process.DataFieldTypes): string {\r\n        for (const value of this.values) {\r\n            if (value.title === title && value.metaData === type) {\r\n                return value.key;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","<div class=\"k2-wizard-box\" style=\"margin:20px\">\r\n\r\n</div>\r\n","import { Component, Inject, Input, OnInit } from '@angular/core';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { IPopupConfiguration } from '../../../../../types/models/popup/i-popup-configuration';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { DataTypeResolverService } from '../../../../services/plugins/data-type-resolver/data-type-resolver.service';\r\nimport { ProcessService } from '../../../../services/process/process.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { PageComponent } from '../../page/page.component';\r\nimport { DataMapperComponent } from '../data-mapper/data-mapper.component';\r\n\r\n@Component({\r\n    selector: 'k2-event-platform-add',\r\n    templateUrl: './event-platform-add.component.html',\r\n    styleUrls: ['./event-platform-add.component.less'],\r\n    providers: [{ provide: PageComponent, useExisting: EventPlatFormAddComponent }]\r\n})\r\nexport class EventPlatFormAddComponent extends DataMapperComponent implements OnInit {\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        processService: ProcessService,\r\n        eventService: EventNotifierService,\r\n        private dataTypeResolver: DataTypeResolverService) {\r\n        //Initialize parent DataMapperComponent:\r\n        super(resourceService, processService, eventService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.setValues();\r\n    }\r\n\r\n    buttonConfig: IPopupButtonsConfig = {\r\n        finish: {\r\n            isVisible: true,\r\n            buttonText: this.getString('workflow_contextPopup_addButton'),\r\n        },\r\n        next: {\r\n            isVisible: false\r\n        }\r\n    };\r\n\r\n\r\n    protected setValues(): void {\r\n        const result = [\r\n            {\r\n                type: 'Integer',\r\n                extendedType: null,\r\n                required: false,\r\n                systemName: 'inst_id',\r\n                metadata: {\r\n                    displayName: 'Workflow ID',\r\n                    description: 'Workflow ID'\r\n                }\r\n            },\r\n            {\r\n                type: 'String',\r\n                extendedType: null,\r\n                required: false,\r\n                systemName: 'set_name',\r\n                metadata: {\r\n                    displayName: 'Workflow Name',\r\n                    description: 'Workflow Name'\r\n                }\r\n            },\r\n            {\r\n                type: 'String',\r\n                extendedType: null,\r\n                required: false,\r\n                systemName: 'set_folder',\r\n                metadata: {\r\n                    displayName: 'Workflow Path',\r\n                    description: 'Workflow Path'\r\n                }\r\n            },\r\n            {\r\n                type: 'DateTime',\r\n                extendedType: null,\r\n                required: false,\r\n                systemName: 'inst_start',\r\n                metadata: {\r\n                    displayName: 'Start Date',\r\n                    description: 'Start Date'\r\n                }\r\n            },\r\n            {\r\n                type: 'String',\r\n                extendedType: null,\r\n                required: false,\r\n                systemName: 'inst_originator_name',\r\n                metadata: {\r\n                    displayName: 'Originator',\r\n                    description: 'Originator'\r\n                }\r\n            },\r\n            {\r\n                type: 'String',\r\n                extendedType: null,\r\n                required: false,\r\n                systemName: 'inst_priority',\r\n                metadata: {\r\n                    displayName: 'Priority',\r\n                    description: 'Priority'\r\n                }\r\n            },\r\n            {\r\n                type: 'String',\r\n                extendedType: null,\r\n                required: false,\r\n                systemName: 'inst_folio',\r\n                metadata: {\r\n                    displayName: 'Folio',\r\n                    description: 'Folio'\r\n                }\r\n            },\r\n            {\r\n                type: 'String',\r\n                extendedType: null,\r\n                required: false,\r\n                systemName: 'error_message',\r\n                metadata: {\r\n                    displayName: 'Error Message',\r\n                    description: 'Error Message'\r\n                }\r\n            },\r\n            {\r\n                type: 'DateTime',\r\n                extendedType: null,\r\n                required: false,\r\n                systemName: 'error_date',\r\n                metadata: {\r\n                    displayName: 'Error Date',\r\n                    description: 'Error Date'\r\n                }\r\n            },\r\n        ];\r\n\r\n        for (let i = 0; i < result.length; i++) {\r\n            this.values.push({\r\n                icon: this.getIconFromType(result[i].type),\r\n                key: result[i].systemName,\r\n                title: result[i].metadata.displayName,\r\n                metaData: this.dataTypeResolver.getTypeFromDotNetType(result[i].type)\r\n            });\r\n        }\r\n    }\r\n\r\n    protected getIconFromType(dotNetType: string): string {\r\n        const iconType: string = this.dataTypeResolver.getSpriteClassFromDotNetType(dotNetType);\r\n        return `icon-set-datatypes ic-${iconType}`;\r\n    }\r\n}\r\n","<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box\">\r\n        <div class=\"heading\">{{resources.createVariablesHeading}}</div>\r\n        <!--Create Variables For Me? Prompt-->\r\n        <div *ngIf=\"!showMapper\">\r\n            <div class=\"rectangle-container\">\r\n                <div class=\"create-variables-for-me-button\" (click)=\"createVariables();\">\r\n                    <div class=\"create-variables-text\">{{resources.createVariablesButtonLabel}}\r\n                    </div>\r\n                </div>\r\n                <div class=\"create-variables-manually\" (click)=\"createManually()\">\r\n                    {{resources.createVariablesManuallyLabelPart1}}<a class=\"create-variables-manually-link\">{{resources.createVariablesManuallyLabelPart2}}</a>\r\n                </div>\r\n            </div>\r\n            <div class=\"footer-container\">\r\n                <div class=\"footer-content\">\r\n                    <svg class=\"icon icon-size32\">\r\n                        <use xlink:href=\"App_Themes/Designer/_svg/nouns_medium.svg#information\"></use>\r\n                    </svg>\r\n                    <div class=\"header\">{{resources.startRightsHeading}}</div>\r\n                    <span>\r\n                        {{resources.startRightsMessage}}\r\n                        <k2-help-link class=\"hyperlink-control primary\" [k2ContextId]=\"350\"></k2-help-link>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--DataField Mapper-->\r\n        <div *ngIf=\"showMapper\">\r\n            <k2-data-field-mapper [title]=\"config.context.mapperTitle\"\r\n                                [icon]=\"config.context.icon\"\r\n                                [rows]=\"rows\"\r\n                                [datafields]=\"datafields\"\r\n                                [values]=\"values\">\r\n            </k2-data-field-mapper>\r\n            <div class=\"create-field\">\r\n                <span class=\"create-field-text\" (click)=\"clearMappings();\" [title]=\"resources.clearMappingsTooltip\">{{resources.clearMappingsText}}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>","import { Component, Input, OnInit } from '@angular/core';\r\nimport { ResourceService } from 'src/app/services/resource/resource.service';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { IPopupConfiguration } from '../../../../../types/models/popup/i-popup-configuration';\r\nimport { IContextWizardPopupConfiguration } from '../../../../../types/uiComponents/pluginWizards/i-context-wizard-popup-configuration';\r\nimport { IEventPlatformRemovePluginContext } from '../../../../../types/uiComponents/pluginWizards/IEventPlatformRemovePluginContext';\r\nimport { PopupService } from '../../../../services/popup/popup.service';\r\nimport { ProcessService } from '../../../../services/process/process.service';\r\nimport { popup } from '../../../../shared/constants/wizard-popup';\r\nimport { PopupState } from '../../../../shared/enums/plugin-wizard/popup-state';\r\nimport { isUndefinedOrNull } from '../../../../shared/utils/general';\r\nimport { PageComponent } from '../../page/page.component';\r\n\r\n@Component({\r\n    selector: 'k2-event-platform-remove',\r\n    templateUrl: './event-platform-remove.component.html',\r\n    styleUrls: ['./event-platform-remove.component.less'],\r\n    providers: [{provide: PageComponent, useExisting: EventPlatformRemoveComponent}]\r\n})\r\nexport class EventPlatformRemoveComponent extends PageComponent implements OnInit {\r\n    buttonConfig: IPopupButtonsConfig = {\r\n        previous: {\r\n            isVisible: true,\r\n            buttonText: this.getString('workflow_contextPopup_cancelButton')\r\n        },\r\n        next: {\r\n            buttonText: this.getString('workflow_contextPopup_delete_event'),\r\n            classOverride: 'modal-button alert large'\r\n        }\r\n    };\r\n\r\n    @Input() public config: IPopupConfiguration;\r\n\r\n    public context: IEventPlatformRemovePluginContext;\r\n    public resources: any;\r\n\r\n    constructor(protected _processService: ProcessService,\r\n        resourceService: ResourceService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.context = this.config.context as IEventPlatformRemovePluginContext;\r\n        this.resources = this.context.resourceObject;\r\n    }\r\n\r\n    beforePageDisplayed() {}\r\n    beforeNavigateNext() {}\r\n    beforeNavigatePrevious() {}\r\n}\r\n","<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box centered\">\r\n        <div class=\"section vertical centered seventy\">\r\n            <div class=\"fourty\"></div>\r\n            <div class=\"column fourty\">\r\n                <div class=\"row vertical heading\">\r\n                    <i class=\"icon icon-set-wizard icon-size64 ic-bin\"></i>\r\n                </div>\r\n                <div class=\"row vertical heading twentyeight\">\r\n                    {{resources.deleteEventHeading}}\r\n                </div>\r\n                <div class=\"twenty\"></div>\r\n\r\n                <div class=\"row vertical\" *ngIf=\"context.actionId\">\r\n                    <div class=\"content-row icon-list update\">\r\n                        <div class=\"icon-on-left\">\r\n                            <i class=\"icon icon-set-steps icon-size32 ic-form\"></i>\r\n                        </div>\r\n                        <div class=\"update-container\">\r\n                            <div class=\"update-heading\">{{resources.deleteEventUpdateHeading}}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>","import { Component, Input, OnInit } from '@angular/core';\r\nimport { ResourceService } from 'src/app/services/resource/resource.service';\r\nimport { PopupState } from 'src/app/shared/enums/plugin-wizard/popup-state';\r\nimport { isUndefinedOrNull } from 'src/app/shared/utils/general';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { IEventPlatformRemovePluginContext } from 'src/types/uiComponents/pluginWizards/IEventPlatformRemovePluginContext';\r\nimport { IPopupConfiguration } from '../../../../../types/models/popup/i-popup-configuration';\r\nimport { PopupService } from '../../../../services/popup/popup.service';\r\nimport { ProcessService } from '../../../../services/process/process.service';\r\nimport { PageComponent } from '../../page/page.component';\r\n\r\n@Component({\r\n    selector: 'k2-event-platform-result',\r\n    templateUrl: './event-platform-result.component.html',\r\n    styleUrls: ['./event-platform-result.component.less'],\r\n    providers: [{provide: PageComponent, useExisting: EventPlatformResultComponent}]\r\n})\r\nexport class EventPlatformResultComponent extends PageComponent implements OnInit {\r\n    buttonConfig: IPopupButtonsConfig = {\r\n        finish: {\r\n            buttonText: this.getString('workflow_contextPopup_okButton')\r\n        }\r\n    };\r\n    @Input() public config: IPopupConfiguration;\r\n\r\n    public context: IEventPlatformRemovePluginContext;\r\n    public resources: any;\r\n\r\n    constructor(protected processService: ProcessService,\r\n        resourceService: ResourceService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.context = this.config.context as IEventPlatformRemovePluginContext;\r\n        this.resources = this.context.resourceObject;\r\n    }\r\n\r\n    beforePageDisplayed() {\r\n        this.removeWorkflowIntegration();\r\n    }\r\n\r\n    beforeNavigateNext() {}\r\n    beforeNavigatePrevious() {}\r\n\r\n    /**\r\n     * Remove workflow integration from form\r\n     * */\r\n    private removeWorkflowIntegration(): void {\r\n\r\n        this.context.inProgress = true;\r\n\r\n        this.notifyPageStateChanged(PopupState.Busy);\r\n\r\n        const plugins = this.processService.definitionPlugins;\r\n        for (let i = 0; i < plugins.length; i++) {\r\n            const subscriptions = this.processService.root.configuration.eventPlatformConfiguration.subscriptions;\r\n\r\n            let processed = false;\r\n\r\n            for (let j = 0; j < subscriptions.length; j++) {\r\n\r\n                const subscription = subscriptions[j];\r\n                if (this.context.selectedSubscriptionId === subscription.identifier) {\r\n\r\n                    subscription.mapping.data.fields.splice(0, subscription.mapping.data.fields.length);\r\n                    subscription.state = sourceCode.k2Designer.objectModel.workflow.process.k2Process.eventPlatform.State.Deleted;\r\n                    processed = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (processed) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (isUndefinedOrNull(this.processService.root.configuration.eventPlatformConfiguration.subscriptions) ||\r\n            this.processService.root.configuration.eventPlatformConfiguration.subscriptions.length === 0) {\r\n            this.processService.root.configuration.eventPlatformConfiguration = null;\r\n        }\r\n\r\n        this.removeWorkflowIntegrationCompleted(null, null);\r\n    }\r\n\r\n    /**\r\n     * Callback method when form is updated\r\n     */\r\n    private removeWorkflowIntegrationCompleted(result: string, error: boolean): void {\r\n\r\n        // Stop loading animation if it failed or not.\r\n        this.notifyPageStateChanged(PopupState.Normal);\r\n\r\n        if (!error) {\r\n            this.context.success = true;\r\n        }\r\n        else {\r\n            const exception = JSON.parse(result);\r\n\r\n            // Use the Inner Exception Message first, then fall back on Exception Message, else Message\r\n            if (exception.InnerException) {\r\n                this.context.errorMessage = exception.InnerException.ExceptionMessage || exception.InnerException.Message;\r\n            }\r\n            else {\r\n                this.context.errorMessage = exception.ExceptionMessage || exception.Message;\r\n            }\r\n\r\n            this.context.success = false;\r\n\r\n            this.notifyPageStateChanged(PopupState.Error);\r\n        }\r\n        this.context.inProgress = false;\r\n    }\r\n\r\n}\r\n","<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box centered\">\r\n        <div class=\"section vertical centered seventy\">\r\n\r\n            <div class=\"content-section fadeMeIn\" [class.hidden]=\"context.success\">\r\n                <div class=\"fourty\"></div>\r\n                <div class=\"column\">\r\n                    <div class=\"row vertical heading\">\r\n                        <img alt=\"\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY3QzczMEQyMjhEMDExRTZCN0MzRUYyRjE2RDMwNEY1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY3QzczMEQzMjhEMDExRTZCN0MzRUYyRjE2RDMwNEY1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjdDNzMwRDAyOEQwMTFFNkI3QzNFRjJGMTZEMzA0RjUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjdDNzMwRDEyOEQwMTFFNkI3QzNFRjJGMTZEMzA0RjUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6sw+hkAAALe0lEQVR42uxb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\" />\r\n                    </div>\r\n                    <div class=\"row vertical heading twentyeight\">\r\n                        {{resources.processing}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"fadeMeIn\" [class.hidden]=\"!context.success\">\r\n                <div class=\"fourty\"></div>\r\n                <div class=\"column\">\r\n                    <div class=\"row vertical heading\">\r\n                        <i class=\"icon icon-set-wizard icon-size64 ic-success\"></i>\r\n                    </div>\r\n                    <div class=\"row vertical heading twentyeight\">\r\n                        {{resources.deleteEventHeading}}\r\n                    </div>\r\n                    <div class=\"twenty\"></div>\r\n                </div>\r\n\r\n                <div class=\"column\">\r\n                    <div class=\"row vertical\" [class.hidden]=\"context.checkOut !== true\">\r\n                        <div class=\"content-row icon-list update\">\r\n                            <div class=\"icon-on-left\">\r\n                                <i class=\"icon icon-set-steps icon-size32 ic-form\"></i>\r\n                            </div>\r\n                            <div class=\"update-container\">\r\n                                <div class=\"update-heading\">{{resources.pageTitle}}</div>\r\n                                <div class=\"update-description\">{{resources.pageTitle}}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n","import { EventEmitter, Input, OnDestroy, Output, TemplateRef, ViewChild } from '@angular/core';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Observable, subscribeOn, Subscriber, Subscription } from 'rxjs';\r\nimport { ResourceService } from 'src/app/services/resource/resource.service';\r\nimport { PopupState } from 'src/app/shared/enums/plugin-wizard/popup-state';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\n\r\n@Component({\r\n    selector: 'k2-page',\r\n    templateUrl: './page.component.html',\r\n    styleUrls: ['./page.component.less']\r\n})\r\nexport abstract class PageComponent extends BaseResourceComponent implements OnDestroy {\r\n\r\n    @ViewChild('pageTemplate')\r\n    template: TemplateRef<void>;\r\n\r\n    /** Only used if the popup host has the isPagesIndexed set */\r\n    @Input() pageIndex: number;\r\n\r\n    /** Hide all page indicators when on this page?\r\n     * Will default to true on the last page. Can be overridden to false\r\n     */\r\n    @Input() isAllPageIndicatorsHidden: boolean;\r\n\r\n    /** Don't show the page indicator for this page\r\n     * Defaults to true on the last page. Can be overridden\r\n     */\r\n    @Input() isHiddenPage: boolean;\r\n\r\n    private onPageConfigChangedSubscribers: Subscriber<void>[] = [];\r\n    private onPageStateChangedSubscribers: Subscriber<PopupState>[] = [];\r\n\r\n    onPageConfigChanged: Observable<void>;\r\n    onPageStateChanged: Observable<PopupState>;\r\n\r\n    state: PopupState;\r\n\r\n    abstract buttonConfig: IPopupButtonsConfig;\r\n\r\n    constructor(protected resourceService: ResourceService) {\r\n\r\n        super(resourceService);\r\n\r\n        this.onPageConfigChanged = new Observable<void>(subscriber => {\r\n            this.onPageConfigChangedSubscribers.push(subscriber);\r\n            return () => {\r\n                this.onPageConfigChangedSubscribers.slice(this.onPageConfigChangedSubscribers.indexOf(subscriber), 1);\r\n            };\r\n        });\r\n\r\n        this.onPageStateChanged = new Observable<PopupState>(subscriber => {\r\n            this.onPageStateChangedSubscribers.push(subscriber);\r\n            return () => {\r\n                this.onPageStateChangedSubscribers.slice(this.onPageStateChangedSubscribers.indexOf(subscriber), 1);\r\n            };\r\n        });\r\n    }\r\n\r\n    notifyConfigChanged(){\r\n        this.onPageConfigChangedSubscribers.forEach( s => s.next() );\r\n    }\r\n\r\n    notifyPageStateChanged(state: PopupState){\r\n        this.state = state;\r\n        this.onPageStateChangedSubscribers.forEach( s => s.next(state) );\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.onPageConfigChangedSubscribers.forEach( s => s.unsubscribe() );\r\n        this.onPageStateChangedSubscribers.forEach( s => s.unsubscribe() );\r\n    }\r\n\r\n    abstract beforePageDisplayed();\r\n\r\n    abstract beforeNavigateNext();\r\n\r\n    abstract beforeNavigatePrevious();\r\n}\r\n","import { Component, OnInit, OnDestroy, Input, Inject } from '@angular/core';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { combineLatestWith } from 'rxjs/operators';\r\nimport { EnvironmentServiceToken } from 'src/app/services/environment/environment-service-factory';\r\nimport { EventNotifierService } from 'src/app/services/event-notifier/event-notifier.service';\r\nimport { RemoteEventReceiversPopulatedEvent } from 'src/app/shared/constants/events';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { IModelArray } from 'src/types/models/base/i-model-array';\r\nimport { IEnvironmentService } from 'src/types/services/environment/i-environment-service';\r\nimport { IPopupConfiguration } from '../../../../../types/models/popup/i-popup-configuration';\r\nimport { ISmartFormItemReference } from '../../../../../types/models/smart-forms/i-smart-form-item-reference';\r\nimport { IHelpService } from '../../../../../types/services/help/i-help-service';\r\nimport { IRemoteEventReceiver } from '../../../../../types/uiComponents/pluginWizards/IRemoteEventReceiver';\r\nimport { IRemoteEventReceivers } from '../../../../../types/uiComponents/pluginWizards/IRemoteEventReceivers';\r\nimport { ISharePointContext } from '../../../../../types/uiComponents/pluginWizards/ISharePointContext';\r\nimport { ISharePointSettingResult } from '../../../../../types/uiComponents/pluginWizards/ISharePointSettingsResult';\r\nimport { HelpServiceToken } from '../../../../services/help/help-service-factory';\r\nimport { SharePointService } from '../../../../services/plugins/share-point/share-point.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { PageComponent } from '../../page/page.component';\r\n\r\n@Component({\r\n    selector: 'k2-create-references',\r\n    templateUrl: './create-references.component.html',\r\n    styleUrls: ['./create-references.component.less'],\r\n    providers: [{ provide: PageComponent, useExisting: CreateReferencesComponent }]\r\n})\r\nexport class CreateReferencesComponent extends PageComponent implements OnInit, OnDestroy {\r\n    @Input() public config: IPopupConfiguration;\r\n\r\n    buttonConfig: IPopupButtonsConfig = {\r\n        next: {\r\n            isDisabled: true\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Context of the plugin wizard.\r\n     */\r\n    pluginContext: ISharePointContext;\r\n\r\n    /**\r\n     * Help link to open.\r\n     */\r\n    helpLink: string;\r\n\r\n    /**\r\n     * Flag to indictate if loading.\r\n     */\r\n    isLoading: boolean;\r\n\r\n    private subscriptionSink = new Subscription();\r\n\r\n    constructor(@Inject(EnvironmentServiceToken) private envService: IEnvironmentService,\r\n        protected resourceService: ResourceService,\r\n        @Inject(HelpServiceToken) private helpService: IHelpService,\r\n        private sharePointService: SharePointService,\r\n        private eventNotifier: EventNotifierService) {\r\n\r\n        super(resourceService);\r\n\r\n        this.isLoading = true;\r\n        this.helpLink = this.helpService.getHelpUrl('createreferences_sp');\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.pluginContext = this.config.context as ISharePointContext;\r\n\r\n        this.loadData();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.subscriptionSink.unsubscribe();\r\n    }\r\n\r\n    // Methods required by the abstract class.\r\n    beforePageDisplayed = () => { };\r\n    beforeNavigateNext = () => { };\r\n    beforeNavigatePrevious = () => { };\r\n\r\n    /**\r\n     * Method that will invoke once the item references component is done loading.\r\n     */\r\n    public loadData(): void {\r\n\r\n        //Set the workflow name\r\n        this.pluginContext.workflowFqn = this.envService.workflowFullname;\r\n        this.pluginContext.createItemReferencesHeading = this.resourceService.getString('sharePoint_integration_found_references');\r\n\r\n        const saveSharePointSettingsSub = this.saveSharePointSettings(\r\n            this.pluginContext.serviceInstance,\r\n            this.pluginContext.listId,\r\n            this.pluginContext.subSiteRelativeUrl\r\n        )\r\n            .subscribe(([settingId, smartObjectName]) => {\r\n                this.sharePointService\r\n                    .getItemReferences(smartObjectName, this.pluginContext.isDocLib)\r\n                    .subscribe((itemReferences: IModelArray<ISmartFormItemReference>) => {\r\n                        this.pluginContext.sourceItemReferences = itemReferences;\r\n                    });\r\n\r\n                const fetchAvailableSharePointEvents$ = this.fetchAvailableSharePointEvents();\r\n                const getEventsForWorkflowSettingSub = this.sharePointService\r\n                    .getEventsForWorkflowSetting(settingId, this.pluginContext.workflowFqn)\r\n                    .pipe(combineLatestWith(fetchAvailableSharePointEvents$))\r\n                    .subscribe(([workflowSettingsEvents]) => {\r\n                        if (this.pluginContext.existingIntegration) {\r\n                            //Populate saved items that was previously selected. Loaded plugin information.\r\n                            this.populateEvents(this.pluginContext.savedEvents);\r\n                        } else if (workflowSettingsEvents.length === 0 && this.envService.referrer.settingid) {\r\n                            // Check if entry point from SharePoint/settingId provided in the referrer.\r\n                            // If it is load it from there, otherwise load it from previous saved values.\r\n                            // This is after we requested the events with the other settingId? Is this necessary?\r\n                            // Will they perhaps always be the same ?\r\n                            this.pluginContext.settingId = this.envService.referrer.settingid;\r\n\r\n                            const getSharePointSettingEventsSub = this.sharePointService\r\n                                .getSharePointSettingEvents(this.envService.referrer.settingid)\r\n                                .subscribe((eventReceivers: IRemoteEventReceivers) => {\r\n                                    this.populateEvents(eventReceivers.EventDataCollection);\r\n                                });\r\n\r\n                            this.subscriptionSink.add(getSharePointSettingEventsSub);\r\n                        } else {\r\n                            //Populate saved items that was previously selected.\r\n                            this.populateEvents(workflowSettingsEvents);\r\n                        }\r\n\r\n                        this.buttonConfig.next.isDisabled = false;\r\n                        this.notifyConfigChanged();\r\n                    });\r\n\r\n                this.subscriptionSink.add(getEventsForWorkflowSettingSub);\r\n            });\r\n\r\n        this.subscriptionSink.add(saveSharePointSettingsSub);\r\n    }\r\n\r\n    /**\r\n     * Method that will execute if an item reference on the directive was removed.\r\n     */\r\n    public updateHeading(): void {\r\n        this.pluginContext.unmappedFieldsHeading = this\r\n            .resourceService\r\n            .getString('sharePoint_integration_existing_references')\r\n            .replace('{0}', this.pluginContext.newItemReferences.length.toString())\r\n            .replace('{1}', this.pluginContext.itemName)\r\n            .replace('{2}', this.pluginContext.isDocLib\r\n                ? this.resourceService.getString('sharePoint_integration_found_references_library')\r\n                : this.resourceService.getString('sharePoint_integration_found_references_list')\r\n            );\r\n\r\n        this.isLoading = false;\r\n    }\r\n\r\n    public setNewItemReferences(newItemReferences: ISmartFormItemReference[]): void {\r\n        this.pluginContext.newItemReferences = newItemReferences;\r\n        this.updateHeading();\r\n    }\r\n\r\n    public updateReferenceToCreateCount(count: number): void {\r\n        if (count >= 0) {\r\n            this.pluginContext.newReferenceCount = count;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Needs the serviceInstance, listId, subSiteRelativeUrl to exist on plugin context.\r\n     *\r\n     * Saves the settingId, siteUrl, smartObjectName\r\n     *\r\n     * @returns\r\n     */\r\n    private saveSharePointSettings(serviceInstance: string, listId: string, subSiteRelativeUrl: string): Observable<[string, string]> {\r\n        return new Observable<[string, string]>(subscriber => {\r\n\r\n            //Don't save a new integration when edit, this will cause multiple entries with new settingId\r\n            if (this.pluginContext.existingIntegration) {\r\n                // The plugin context already has the correct values, and there are no changes yet\r\n                subscriber.next([\r\n                    this.pluginContext.settingId,\r\n                    this.pluginContext.smartObjectName\r\n                ]);\r\n            } else {\r\n                this.sharePointService\r\n                    .saveSharePointSettings(\r\n                        serviceInstance,\r\n                        listId,\r\n                        subSiteRelativeUrl)\r\n                    .subscribe((settingResult: ISharePointSettingResult) => {\r\n                        //Set the necessary results\r\n                        this.pluginContext.settingId = settingResult.SettingId;\r\n                        this.pluginContext.siteUrl = settingResult.SharePointSiteUrl;\r\n                        this.pluginContext.smartObjectName = settingResult.ListSmartObject;\r\n\r\n                        subscriber.next([\r\n                            this.pluginContext.settingId,\r\n                            this.pluginContext.smartObjectName\r\n                        ]);\r\n                    });\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Needs nothing.\r\n     *\r\n     * Sets remoteEventReceivers.\r\n     *\r\n     * @returns\r\n     */\r\n    private fetchAvailableSharePointEvents = (): Observable<void> => new Observable<void>(subscriber => {\r\n        this.sharePointService\r\n            .getSharePointAvailableEvents()\r\n            .subscribe((events: IRemoteEventReceivers) => {\r\n                //Set the events & default the selected stat to false.\r\n                this.pluginContext.remoteEventReceivers = events;\r\n                this.pluginContext.remoteEventReceivers.EventDataCollection.map((item) => {\r\n                    item.Selected = false;\r\n                });\r\n\r\n                // The StartWorkflowEvents component shouldn't make it's requests before we populate the events.\r\n                this.eventNotifier.addEvent(RemoteEventReceiversPopulatedEvent).next(events);\r\n                subscriber.next();\r\n            });\r\n    });\r\n\r\n    /**\r\n     * Method to populate the events based on the collection returned.\r\n     */\r\n    private populateEvents(events: IRemoteEventReceiver[]) {\r\n\r\n        //Populate UI with settings values that was set on the artifact page.\r\n        this.pluginContext.originalReceiverString = '';\r\n\r\n        for (const event of events) {\r\n            for (const eventDataCollection of this.pluginContext.remoteEventReceivers.EventDataCollection) {\r\n                if (event.Id === eventDataCollection.Id) {\r\n                    eventDataCollection.Selected = true;\r\n                    this.pluginContext.originalReceiverString = this.pluginContext.originalReceiverString +\r\n                        eventDataCollection.Id + ';';\r\n                }\r\n            }\r\n        }\r\n\r\n        //Remove the last ;\r\n        if (this.pluginContext.originalReceiverString.length > 0) {\r\n            this.pluginContext.originalReceiverString = this\r\n                .pluginContext\r\n                .originalReceiverString\r\n                .substring(0, this.pluginContext.originalReceiverString.length - 1);\r\n        }\r\n\r\n        this.pluginContext.eventReceiverString = this.pluginContext.originalReceiverString;\r\n\r\n        this.sharePointService.detectChanges(this.pluginContext);\r\n    }\r\n}\r\n","<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box\">\r\n        <k2-item-references [heading]=\"getFromResx('Wizards', 'wizard_wfi_references_subheading') | async\"\r\n                            [subHeading]=\"pluginContext.createItemReferencesHeading\"\r\n                            [createHeading]=\"pluginContext.unmappedFieldsHeading\"\r\n                            [sourceItemReferences]=\"pluginContext.sourceItemReferences\"\r\n                            [newItemReferences]=\"pluginContext.newItemReferences\"\r\n                            [existingItemReferences]=\"pluginContext.existingItemReferences\"\r\n                            (itemReferenceUpdated)=\"setNewItemReferences($event)\"\r\n                            [learnMoreLink]=\"helpLink\"\r\n                            noSuggestionIcon=\"ic-sharepointtask\"\r\n                            [noSuggestionText]=\"getFromResx('Wizards', 'wizard_workflow_no_sp_suggestions')|async\"\r\n                            [referenceToCreateCount]=\"pluginContext.newReferenceCount\"\r\n                            (updateCreateCount)=\"updateReferenceToCreateCount($event)\"\r\n                            class=\"directive-block\"\r\n                            [isLoading]=\"isLoading\"\r\n                            illustration=\"ic-createreferencelist\"\r\n                            [learnMoreId]=\"340\">\r\n        </k2-item-references>\r\n    </div>\r\n</ng-template>\r\n","import { Component, EventEmitter, Inject, Input, OnInit, Output } from '@angular/core';\r\nimport { DataServiceToken } from 'src/app/services/data/data-service-factory';\r\nimport { EnvironmentServiceToken } from 'src/app/services/environment/environment-service-factory';\r\nimport { EventNotifierService } from 'src/app/services/event-notifier/event-notifier.service';\r\nimport { globalVariableNames } from 'src/app/shared/constants/general';\r\nimport { ChooseControlTypes } from 'src/app/shared/enums/choose-control/choose-control-types';\r\nimport { SharePointIntegrationDeletionStatus } from 'src/app/shared/enums/integration/sharepoint-integration-delete-status';\r\nimport { PopupState } from 'src/app/shared/enums/plugin-wizard/popup-state';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { IDataService } from 'src/types/services/data/i-data-service';\r\nimport { IEnvironmentService } from 'src/types/services/environment/i-environment-service';\r\nimport { IRemoveSharePointPluginContext } from 'src/types/uiComponents/pluginWizards/IRemoveSharePointPluginContext';\r\nimport { IItemReference } from '../../../../../types/models/process/item-references/i-item-reference';\r\nimport { IContextWizardPopupConfiguration } from '../../../../../types/uiComponents/pluginWizards/i-context-wizard-popup-configuration';\r\nimport { ProcessService } from '../../../../services/process/process.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { PageComponent } from '../../page/page.component';\r\n\r\n@Component({\r\n    selector: 'k2-sp-remove-integration',\r\n    templateUrl: './remove-integration.component.html',\r\n    styleUrls: ['./remove-integration.component.less'],\r\n    providers: [{ provide: PageComponent, useExisting: SharepointRemoveIntegrationComponent }]\r\n})\r\nexport class SharepointRemoveIntegrationComponent extends PageComponent implements OnInit {\r\n\r\n    @Input() config: IContextWizardPopupConfiguration;\r\n    @Input() isResultPage: boolean;\r\n\r\n    @Output() dialogClosed = new EventEmitter<any>();\r\n\r\n    /**\r\n     * Context of the plugin wizard.\r\n     */\r\n    pluginContext: IRemoveSharePointPluginContext;\r\n\r\n    /**\r\n     * Choose control types enumerator\r\n     */\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n\r\n    buttonConfig: IPopupButtonsConfig;\r\n\r\n    /**\r\n     * Sharepoint deletion status enumerator\r\n     */\r\n    public deletionStatus: typeof SharePointIntegrationDeletionStatus = SharePointIntegrationDeletionStatus;\r\n\r\n    constructor(@Inject(EnvironmentServiceToken) private envService: IEnvironmentService,\r\n        protected resourceService: ResourceService,\r\n        @Inject(DataServiceToken) private dataService: IDataService,\r\n        private processService: ProcessService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.pluginContext = this.config.context as IRemoveSharePointPluginContext;\r\n        this.pluginContext.status = SharePointIntegrationDeletionStatus.inProgress;\r\n\r\n        this.pluginContext.deleteListHeading = this.resourceService.getString('sharepoint_integration_delete_from_list_heading')\r\n            .replace('{0}', this.pluginContext.selectedPlugin.title);\r\n        this.pluginContext.deleteListDescription = this.resourceService.getString('sharePoint_integration_summary_changes_heading')\r\n            .replace('{0}',\r\n                this.pluginContext.selectedPlugin.metaData.DocumentLibrary ?\r\n                    this.resourceService.getString('sharePoint_integration_found_references_library') :\r\n                    this.resourceService.getString('sharePoint_integration_found_references_list'));\r\n\r\n        if (!this.isResultPage) {\r\n            this.pluginContext.deleteItemReferences = true;\r\n        }\r\n\r\n        this.buttonConfig = {\r\n            previous: {\r\n                isVisible: !this.isResultPage,\r\n                buttonText: this.getString('workflow_contextPopup_cancelButton')\r\n            },\r\n            next: {\r\n                buttonText: this.isResultPage ? this.getString('workflow_contextPopup_okButton') :\r\n                    this.getString('workflow_contextPopup_delete_event'),\r\n                classOverride: 'modal-button alert large'\r\n            }\r\n        };\r\n    }\r\n\r\n    beforePageDisplayed() {\r\n        if (this.isResultPage) {\r\n            this.deleteIntegration();\r\n        }\r\n    }\r\n\r\n    beforeNavigateNext() { }\r\n\r\n    beforeNavigatePrevious() { }\r\n\r\n    /**\r\n     * Method to toggle checkbox.\r\n     */\r\n    public toggleCheckbox(): void {\r\n        this.pluginContext.deleteItemReferences = !this.pluginContext.deleteItemReferences;\r\n    }\r\n\r\n\r\n    /**\r\n     * Method to remove the integration.\r\n     */\r\n    private deleteIntegration() {\r\n        this.notifyPageStateChanged(PopupState.Busy);\r\n\r\n        //Build event receiver string.\r\n        let eventReceiverString = '';\r\n\r\n        for (let i = 0; i < this.pluginContext.selectedPlugin.metaData.EventData.length; i++) {\r\n            eventReceiverString += this.pluginContext.selectedPlugin.metaData.EventData[i].Id;\r\n            if (i < this.pluginContext.selectedPlugin.metaData.EventData.length - 1) {\r\n                eventReceiverString += ';';\r\n            }\r\n        }\r\n\r\n        //Remove event receivers\r\n        this.dataService.httpGet('api/sharePoint/removeWorkFlowEventReceiverForSpecificWorkflow', {\r\n            host: this.envService.currentEnvironment.hostId,\r\n            workflowId: this.pluginContext.selectedPlugin.name,\r\n            settingId: this.pluginContext.selectedPlugin.id,\r\n            eventReceivers: eventReceiverString,\r\n            siteUrl: this.pluginContext.selectedPlugin.metaData.SiteURL,\r\n            listId: this.pluginContext.selectedPlugin.metaData.ListId,\r\n            workflowName: this.envService.workflowFullname\r\n        }, this.manageEventReceiversCompleted, this.envService, false, null, false);\r\n    }\r\n\r\n    /**\r\n     * Callback method when events was removed.\r\n     *\r\n     * @param result\r\n     * @param error\r\n     */\r\n    private manageEventReceiversCompleted = (result: any, error: boolean): void => {\r\n        this.notifyPageStateChanged(PopupState.Normal);\r\n\r\n        if (!error) {\r\n            this.deleteReferences();\r\n            this.pluginContext.status = SharePointIntegrationDeletionStatus.success;\r\n\r\n            //Remove SharePoint integration global environment value which validation is done against because that does not get saved\r\n            //in the model.\r\n            this.envService.removeGlobalAttribute(globalVariableNames.sharepointIntegratonWorkflowData);\r\n        } else {\r\n            this.pluginContext.status = SharePointIntegrationDeletionStatus.failed;\r\n\r\n            const exception = JSON.parse(result);\r\n            if (exception.ExceptionMessage) {\r\n                this.pluginContext.errorMessage = exception.ExceptionMessage;\r\n            } else {\r\n                this.pluginContext.errorMessage = exception.Message;\r\n            }\r\n\r\n            this.buttonConfig = {\r\n                next: {\r\n                    isVisible: false\r\n                },\r\n                previous: {\r\n                    isVisible: false\r\n                },\r\n                finish: {\r\n                    isVisible: false\r\n                }\r\n            };\r\n\r\n            this.notifyConfigChanged();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Method to delete the references if selected.\r\n     */\r\n    private deleteReferences(): void {\r\n        if (this.pluginContext.deleteItemReferences) {\r\n            const primarySPItemReference: IItemReference =\r\n                (this.processService.root as sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2ProcessExtended)\r\n                    .findWorkflowItemReference(this.pluginContext.selectedPlugin.metaData.SmartObjectName, '',\r\n                        this.processService as any, true, globalVariableNames.sharepointEvent, '');\r\n\r\n            if (primarySPItemReference) {\r\n                //Remove the secondary item references.\r\n                for (let i: number = this.processService.root.configuration.itemReferences.length - 1; i > -1; i--) {\r\n                    if (this.processService.root.configuration.itemReferences[i].primaryReference &&\r\n                        this.processService.root.configuration.itemReferences[i].primaryReference === primarySPItemReference.systemName) {\r\n                        //Remove item reference\r\n                        this.processService.root.configuration.itemReferences[i].removeFromModelArray();\r\n                    }\r\n                }\r\n\r\n                //Remove primary item reference.\r\n                primarySPItemReference.removeFromModelArray();\r\n            }\r\n        }\r\n    }\r\n}\r\n","<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box centered\">\r\n\r\n        <div class=\"section vertical centered seventy\">\r\n            <div class=\"fourty\"></div>\r\n            <div class=\"column fourty\">\r\n                <div class=\"row vertical heading\">\r\n                    <i [ngClass]=\"pluginContext?.status === deletionStatus.inProgress ?\r\n                    'icon icon-set-wizard icon-size64 ic-bin' : pluginContext?.status === deletionStatus.success ?\r\n                    'icon icon-set-wizard icon-size64 ic-success' :\r\n                    'icon icon-set-badges icon-size64 ic-errorbadge'\"></i>\r\n                </div>\r\n                <div class=\"row vertical heading twentyeight\">\r\n                    {{getFromResx('Wizards', 'sharepoint_integration_delete_event_heading')|async}}\r\n                </div>\r\n                <div class=\"twenty\"></div>\r\n\r\n                <div *ngIf=\"pluginContext?.status == deletionStatus.failed\">\r\n                    <div class=\"row vertical heading\">\r\n                        <div class=\"error\">{{getFromResx('Wizards', 'sharepoint_integration_sharepoint_integration_delete_error')|async}}</div>\r\n                    </div>\r\n                    <div class=\"row vertical error heading\">\r\n                        <span class=\"message\">{{pluginContext?.errorMessage}}</span>\r\n                    </div>\r\n                    <div class=\"twenty\"></div>\r\n                    <div class=\"row vertical\">\r\n                        <div (click)=\"deleteIntegration()\" class=\"modal-button primary\">\r\n                            <span class=\"left-icon\"><i class=\"icon icon-set-toolbar icon-size16 ic-refreshwhite\"></i></span>\r\n                            <span class=\"right-text\">\r\n                                {{getFromResx('Wizards', 'sharepoint_integration_retry')|async}}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"row vertical\">\r\n                    <div *ngIf=\"pluginContext?.status !== deletionStatus.failed\">\r\n\r\n                        <div class=\"row vertical\">\r\n                            <div class=\"content-row icon-list update\">\r\n                                <div class=\"icon-on-left\">\r\n                                    <i class=\"icon icon-set-steps icon-size32 ic-sharepointtask\"></i>\r\n                                </div>\r\n                                <div class=\"update-container\">\r\n                                    <div class=\"update-heading\" [innerHTML]=\"pluginContext?.deleteListHeading\"></div>\r\n                                    <div class=\"update-description\">{{pluginContext?.deleteListDescription}}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"content-row icon-list sub\">\r\n                                <div class=\"icon-on-left small-icon\">\r\n                                    <i [ngClass]=\"pluginContext?.status === deletionStatus.inProgress ? 'icon icon-set-steps icon-size16 ic-callsubworkflow' :\r\n                                    'icon icon-set-wizard icon-size16 ic-success'\"></i>\r\n                                </div>\r\n                                <div>{{getFromResx('Wizards', 'wizard_workflow_integration_remove_start_events')|async}}</div>\r\n                            </div>\r\n                            <div class=\"twenty\"></div>\r\n                        </div>\r\n\r\n                        <div class=\"row vertical\" *ngIf=\"pluginContext?.itemReferences?.length > 0\">\r\n                            <div class=\"content-row icon-list update\">\r\n                                <div class=\"icon-on-left\">\r\n                                    <i class=\"icon icon-set-steps icon-size32 ic-itemreferenceevent\"></i>\r\n                                </div>\r\n                                <div class=\"update-container\">\r\n                                    <div class=\"update-heading\">{{getFromResx('Wizards', 'wizard_workflow_integration_sharePoint_remove_references')|async}}</div>\r\n                                    <div class=\"update-description\">{{getFromResx('Wizards', 'wizard_workflow_integration_remove_references_description')|async}}</div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"content-row icon-list sub\">\r\n                                <div class=\"check-box-on-left\">\r\n                                    <k2-choose-control-v2 [disabled]=\"isResultPage\"\r\n                                                        [type]=\"chooseControlTypes.checkbox\"\r\n                                                        [displayText]=\"\"\r\n                                                        [checked]=\"pluginContext.deleteItemReferences\"\r\n                                                        (click)=\"toggleCheckbox()\"\r\n                                                        [id]=\"itemReferenceCheckboxId\">\r\n                                    </k2-choose-control-v2>\r\n                                </div>\r\n                                <div class=\"icon-on-left small-icon\">\r\n                                    <i [ngClass]=\"pluginContext?.status === deletionStatus.success && pluginContext.deleteItemReferences === true ?\r\n                                    'icon icon-set-wizard icon-size16 ic-success' : 'icon icon-set-wizard icon-size16 ic-reference'\"></i>\r\n                                </div>\r\n                                <div>{{pluginContext?.deleteReferencesMessage}}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>","import { Component, Input, OnInit } from '@angular/core';\r\nimport { take } from 'rxjs';\r\nimport { EventNotifierService } from 'src/app/services/event-notifier/event-notifier.service';\r\nimport { RemoteEventReceiversPopulatedEvent } from 'src/app/shared/constants/events';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { IPopupConfiguration } from '../../../../../types/models/popup/i-popup-configuration';\r\nimport { IRemoteEventReceiver } from '../../../../../types/uiComponents/pluginWizards/IRemoteEventReceiver';\r\nimport { ISharePointContext } from '../../../../../types/uiComponents/pluginWizards/ISharePointContext';\r\nimport { SharePointService } from '../../../../services/plugins/share-point/share-point.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { ChooseControlTypes } from '../../../../shared/enums/choose-control/choose-control-types';\r\nimport { PageComponent } from '../../page/page.component';\r\n\r\n@Component({\r\n    selector: 'k2-start-workflow-events',\r\n    templateUrl: './start-workflow-events.component.html',\r\n    styleUrls: ['./start-workflow-events.component.less'],\r\n    providers: [{ provide: PageComponent, useExisting: StartWorkflowEventsComponent }]\r\n})\r\nexport class StartWorkflowEventsComponent extends PageComponent implements OnInit {\r\n\r\n    @Input() config: IPopupConfiguration;\r\n\r\n    /**\r\n     * Context of the plugin wizard.\r\n     */\r\n    pluginContext: ISharePointContext;\r\n    /**\r\n     * Start workflow events data collection\r\n     */\r\n    eventDataCollection: IRemoteEventReceiver[] = [];\r\n    /**\r\n     * Choose control types enumerator\r\n     */\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n    /**\r\n     * Dynamic heading for the available events.\r\n     */\r\n    triggerHeading = '';\r\n    /**\r\n     * Main heading displayed above the trigger heading\r\n     */\r\n    heading = '';\r\n\r\n    buttonConfig: IPopupButtonsConfig;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        private sharePointHelperService: SharePointService,\r\n        private eventNotifier: EventNotifierService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    beforePageDisplayed = () => {\r\n        this.buttonConfig = {\r\n            next: {\r\n                isDisabled: this.pluginContext?.eventReceiverString?.length === 0\r\n            }\r\n        };\r\n    };\r\n\r\n    beforeNavigateNext = () => { };\r\n    beforeNavigatePrevious = () => { };\r\n\r\n    ngOnInit(): void {\r\n        this.pluginContext = this.config.context as ISharePointContext;\r\n\r\n        this.eventNotifier.addEvent(RemoteEventReceiversPopulatedEvent)\r\n            .pipe(take(1))\r\n            .subscribe({\r\n                next: () => {\r\n                    this.eventDataCollection = this.pluginContext.remoteEventReceivers?.EventDataCollection;\r\n                }\r\n            });\r\n\r\n        this.heading = this.getString('sharePoint_integration_trigger_heading');\r\n\r\n        this.triggerHeading = this.getString('sharePoint_integration_trigger_description')\r\n            .replace('{0}', this.pluginContext.itemName)\r\n            .replace('{1}', this.pluginContext.isDocLib ?\r\n                this.getString('sharePoint_integration_found_references_library') :\r\n                this.getString('sharePoint_integration_found_references_list'));\r\n    }\r\n\r\n    /**\r\n     * Method when event is selected.\r\n     */\r\n    public eventSelected() {\r\n\r\n        this.sharePointHelperService.detectChanges(this.pluginContext);\r\n        this.buttonConfig.next.isDisabled = this.pluginContext.eventReceiverString.length === 0;\r\n        this.notifyConfigChanged();\r\n\r\n    }\r\n}\r\n","\r\n<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box\">\r\n        <div class=\"section vertical twenty backdrop\">\r\n            <div class=\"column centered\">\r\n                <i class=\"icon icon-set-illustration ic-createreferencelist-autogen\"></i>\r\n            </div>\r\n            <div class=\"column\">\r\n                <div class=\"row heading\">\r\n                    <label class=\"heading\">{{heading}}</label>\r\n                </div>\r\n                <div class=\"row last\">\r\n                    <label class=\"subheading\" [innerHTML]=\"triggerHeading\"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"section vertical twenty\">\r\n            <div class=\"column\">\r\n                <div class=\"row list-box\">\r\n                    <div class=\"content-items\">\r\n                        <div class=\"items-container\">\r\n                            <div class=\"scrollme\" k2-scrollbar>\r\n                                <div *ngFor=\"let event of eventDataCollection; index as i\" class=\"fadeMeIn\">\r\n                                    <div class=\"check-box-row\">\r\n                                        <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                                                            [displayText]=\"event.Description\"\r\n                                                            [(checked)]=\"event.Selected\"\r\n                                                            (checkedChange)=\"eventSelected()\"\r\n                                                            [id]=\"event.Id\"\r\n                                                            [name]=\"event.Id\">\r\n                                        </k2-choose-control-v2>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { SharePointEventsRegisteredStatus } from 'src/app/shared/enums/integration/share-point-events-registered-status';\r\nimport { StartMode } from 'src/app/shared/enums/integration/start-mode';\r\nimport { PopupState } from 'src/app/shared/enums/plugin-wizard/popup-state';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { IContextWizardPopupConfiguration } from 'src/types/uiComponents/pluginWizards/i-context-wizard-popup-configuration';\r\nimport { ISharePointContext } from 'src/types/uiComponents/pluginWizards/ISharePointContext';\r\nimport { PluginItemReferencesService } from '../../../../services/plugins/item-references/item-references.service';\r\nimport { SharePointService } from '../../../../services/plugins/share-point/share-point.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { PageComponent } from '../../page/page.component';\r\n\r\n@Component({\r\n    selector: 'k2-sp-summary',\r\n    templateUrl: './summary.component.html',\r\n    styleUrls: ['./summary.component.less'],\r\n    providers: [{ provide: PageComponent, useExisting: SharePointSummaryComponent }]\r\n})\r\nexport class SharePointSummaryComponent extends PageComponent implements OnInit {\r\n\r\n    @Input() config: IContextWizardPopupConfiguration;\r\n\r\n    @Input() isFinishPage = false;\r\n\r\n    /**\r\n     * Context of the plugin wizard.\r\n     */\r\n    pluginContext: ISharePointContext;\r\n\r\n    /**\r\n     * Share point events registered status enum\r\n     */\r\n    sharePointEventsRegisteredStatus: typeof SharePointEventsRegisteredStatus = SharePointEventsRegisteredStatus;\r\n\r\n    buttonConfig: IPopupButtonsConfig = {\r\n        previous:{},\r\n        finish:{\r\n            isDisabled: false,\r\n            buttonText: 'workflow_contextPopup_okButton'\r\n        },\r\n        next: {}\r\n    };\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        private itemReferenceService: PluginItemReferencesService,\r\n        private sharePointService: SharePointService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.pluginContext = this.config.context as ISharePointContext;\r\n    }\r\n\r\n    beforePageDisplayed = () => {\r\n        if(this.isFinishPage){\r\n            this.notifyPageStateChanged(PopupState.Busy);\r\n\r\n            //Save events\r\n            this.saveSharePointEvents();\r\n        } else {\r\n            const assetType: string = this.pluginContext.isDocLib\r\n                ? this.resourceService.getString('sharePoint_integration_found_references_library')\r\n                : this.resourceService.getString('sharePoint_integration_found_references_list');\r\n\r\n            this.buttonConfig.next.buttonText = 'workflow_contextPopup_saveAndFinish';\r\n\r\n            //Set wizard dynamic headings.\r\n            this.pluginContext.resultHeading = this.resourceService.getString('sharePoint_integration_summary_almost_done');\r\n\r\n            this.pluginContext.updateListHeading = this\r\n                .resourceService\r\n                .getString('sharePoint_integration_summary_update_heading')\r\n                .replace('{0}', this.pluginContext.itemName)\r\n                .replace('{1}', assetType);\r\n\r\n            this.pluginContext.changesHeading = this\r\n                .resourceService\r\n                .getString('sharePoint_integration_summary_changes_heading')\r\n                .replace('{0}', this.pluginContext.isDocLib\r\n                    ? this.resourceService.getString('sharePoint_integration_found_references_library')\r\n                    : this.resourceService.getString('sharePoint_integration_found_references_list')\r\n                );\r\n\r\n            if (this.pluginContext.existingIntegration) {\r\n                this.pluginContext.createStartEventsHeading = this\r\n                    .resourceService\r\n                    .getString('sharePoint_integration_summary_update_start_events')\r\n                    .replace('{0}', this.getSelectedEventsCount().toString());\r\n            }\r\n            else {\r\n                this.pluginContext.createStartEventsHeading = this\r\n                    .resourceService\r\n                    .getString('sharePoint_integration_summary_create_start_events')\r\n                    .replace('{0}', this.getSelectedEventsCount().toString());\r\n            }\r\n\r\n            this.pluginContext.createReferencesHeading = this\r\n                .resourceService\r\n                .getString('sharePoint_integration_summary_create_references_description')\r\n                .replace('{0}', assetType);\r\n\r\n            this.pluginContext.createReferenceSubHeading = this\r\n                .resourceService\r\n                .getString('sharePoint_integration_summary_create_references_action')\r\n                .replace('{0}', this.pluginContext.newReferenceCount.toString());\r\n        }\r\n    };\r\n\r\n    beforeNavigateNext = () => {};\r\n    beforeNavigatePrevious= () => {};\r\n\r\n    /**\r\n     * Method to save SharePoint events against the workflow.\r\n     */\r\n    private saveSharePointEvents(): void {\r\n\r\n        //Save the workflow settings\r\n        this.sharePointService.saveSharePointWorkflowSetting(\r\n            this.pluginContext.workflowFqn,\r\n            this.pluginContext.listId,\r\n            this.pluginContext.siteUrl,\r\n            this.pluginContext.settingId,\r\n            this.pluginContext.smartObjectName,\r\n            this.pluginContext.isDocLib,\r\n            this.pluginContext.eventReceiverString)\r\n            .subscribe({\r\n                next: (result) => {\r\n                    this.saveSharePointWorkflowSettingCompleted(result, false);\r\n                }, error: (error: any) => {\r\n                    this.setErrorState(error);\r\n                }\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Method to get the amount of events selected.\r\n     */\r\n    private getSelectedEventsCount(): number {\r\n\r\n        let selectedEventCount = 0;\r\n        for (let i = 0; i < this.pluginContext.remoteEventReceivers.EventDataCollection.length; i++) {\r\n            if (this.pluginContext.remoteEventReceivers.EventDataCollection[i].Selected) {\r\n                selectedEventCount += 1;\r\n            }\r\n        }\r\n        return selectedEventCount;\r\n    }\r\n\r\n    /**\r\n     * Callback method after SharePoint setting was saved & returned workflowId for further configuration of events.\r\n     */\r\n    private saveSharePointWorkflowSettingCompleted = (result: string, error: boolean): void => {\r\n\r\n        this.sharePointService.manageEventReceivers(result,\r\n            this.pluginContext.settingId,\r\n            this.pluginContext.eventReceiverString,\r\n            this.pluginContext.siteUrl,\r\n            this.pluginContext.listId)\r\n            .subscribe({\r\n                next: () => {\r\n                    this.setSuccessState();\r\n                }, error: (error: string) => {\r\n                    this.setErrorState(error);\r\n                }\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Method to set the error state.\r\n     */\r\n    private setErrorState(result: string): void {\r\n        if(this.isFinishPage){\r\n            this.buttonConfig.finish.isVisible = false;\r\n            this.buttonConfig.previous.isVisible = false;\r\n        }\r\n\r\n        this.state = PopupState.Error;\r\n        this.notifyPageStateChanged(PopupState.Error);\r\n        const exception = JSON.parse(result);\r\n\r\n        if (exception.ExceptionMessage) {\r\n            this.pluginContext.errorMessage = exception.ExceptionMessage;\r\n        } else {\r\n            this.pluginContext.errorMessage = exception.Message;\r\n        }\r\n\r\n        this.pluginContext.status = SharePointEventsRegisteredStatus.failed;\r\n        this.pluginContext.resultHeading = this.resourceService.getString('sharePoint_integration_summary_oops');\r\n    }\r\n\r\n    private setSuccessState(): void {\r\n        this.pluginContext.status = SharePointEventsRegisteredStatus.success;\r\n        this.pluginContext.resultHeading = this.resourceService.getString('sharePoint_integration_summary_success');\r\n\r\n        if(this.isFinishPage){\r\n            this.buttonConfig.finish.isVisible = true;\r\n        }\r\n\r\n        this.createReferences(false);\r\n\r\n        this.notifyPageStateChanged(PopupState.Normal);\r\n    }\r\n\r\n    /**\r\n     * Method to create references.\r\n     */\r\n    private createReferences(closeWizard: boolean) {\r\n        if (this.pluginContext.newReferenceCount > 0) {\r\n            //Create item references.\r\n            this.itemReferenceService.createItemReferences(\r\n                this.pluginContext.newItemReferences,\r\n                StartMode.sharePointEvent);\r\n        }\r\n    }\r\n}\r\n","<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box centered\">\r\n        <div class=\"section vertical centered seventy\">\r\n            <div class=\"fourty\"></div>\r\n            <div class=\"column fourty\">\r\n                <div class=\"row vertical heading\">\r\n                    <i [ngClass]=\"pluginContext?.status === sharePointEventsRegisteredStatus.inProgress ?\r\n                   'icon icon-set-steps icon-size64 ic-sharepointlistsandlibraries' :\r\n                   pluginContext?.status === sharePointEventsRegisteredStatus.success ? 'icon icon-set-wizard icon-size64 ic-success' :\r\n                   'icon icon-set-badges icon-size64 ic-errorbadge'\"></i>\r\n                </div>\r\n                <div class=\"row vertical heading twentyeight\" [innerHTML]=\"pluginContext?.resultHeading\">\r\n                </div>\r\n            </div>\r\n            <div class=\"column\" *ngIf=\"pluginContext?.status === sharePointEventsRegisteredStatus.failed\">\r\n                <div class=\"row vertical heading\">\r\n                    <div class=\"error\"\r\n                        [innerHTML]=\"getFromResx('Wizards', 'sharepoint_integration_sharepoint_integration_summary_error')|async\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"row vertical error heading\">\r\n                    <span class=\"message\" [innerHTML]=\"pluginContext?.errorMessage\"></span>\r\n                </div>\r\n                <div class=\"twenty\"></div>\r\n                <div class=\"row vertical\">\r\n                    <div (click)=\"saveSharePointEvents()\" class=\"modal-button primary\">\r\n                        <span class=\"left-icon\"><i class=\"icon icon-set-toolbar icon-size16 ic-refreshwhite\"></i></span>\r\n                        <span class=\"right-text\"\r\n                            [innerHTML]=\"getFromResx('Wizards', 'sharepoint_integration_retry')|async\">\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row vertical\">\r\n                    <div *ngIf=\"pluginContext?.newReferenceCount > 0\" (click)=\"createReferences(true)\"\r\n                        class=\"button tertiary large-button\">\r\n                        <span><i class=\"icon icon-set-steps icon-size16 ic-itemreferenceevent\"></i></span>\r\n                        <span class=\"right-text\"\r\n                            [innerHTML]=\"getFromResx('Wizards', 'sharepoint_integration_just_create_references')|async\">\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"column\" *ngIf=\"pluginContext?.status !== sharePointEventsRegisteredStatus.failed\">\r\n                <div class=\"row vertical\">\r\n                    <div class=\"content-row icon-list update\">\r\n                        <div class=\"icon-on-left\">\r\n                            <i class=\"icon icon-set-steps icon-size32 ic-sharepointtask\"></i>\r\n                        </div>\r\n                        <div class=\"update-container\">\r\n                            <div class=\"update-heading\" [innerHTML]=\"pluginContext?.updateListHeading\"></div>\r\n                            <div class=\"update-description\" [innerHTML]=\"pluginContext?.changesHeading\"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"content-row icon-list sub\">\r\n                        <div class=\"icon-on-left small-icon\">\r\n                            <i [ngClass]=\"pluginContext?.status === sharePointEventsRegisteredStatus.inProgress ?\r\n                           'icon icon-set-steps icon-size16 ic-callsubworkflow':'icon icon-set-wizard icon-size16 ic-success'\"></i>\r\n                        </div>\r\n                        <div [innerHTML]=\"pluginContext?.createStartEventsHeading\"></div>\r\n                    </div>\r\n                    <div class=\"twenty\"></div>\r\n                </div>\r\n                <div class=\"row vertical\" *ngIf=\"pluginContext?.newReferenceCount > 0\">\r\n                    <div class=\"content-row icon-list update\">\r\n                        <div class=\"icon-on-left\">\r\n                            <i class=\"icon icon-set-steps icon-size32 ic-itemreferenceevent\"></i>\r\n                        </div>\r\n                        <div class=\"update-container\">\r\n                            <div class=\"update-heading\"\r\n                                [innerHTML]=\"getFromResx('Wizards', 'wizard_workflow_integration_sharePoint_create_references')|async\">\r\n                            </div>\r\n                            <div class=\"update-description\" [innerHTML]=\"pluginContext?.createReferencesHeading\"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"content-row icon-list sub\">\r\n                        <div class=\"icon-on-left small-icon\">\r\n                            <i [ngClass]=\"pluginContext?.status === sharePointEventsRegisteredStatus.inProgress ?\r\n                           'icon icon-set-wizard icon-size16 ic-reference' : 'icon icon-set-wizard icon-size16 ic-success'\"></i>\r\n                        </div>\r\n                        <div [innerHTML]=\"pluginContext?.createReferenceSubHeading\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>","import { Component, Inject, Input, OnInit, EventEmitter, OnDestroy } from '@angular/core';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { ChooseControlTypes } from '../../../../shared/enums/choose-control/choose-control-types';\r\nimport { shortUid } from '../../../../shared/utils/general';\r\nimport { SmartFormsIntegrationService } from '../../../../services/plugins/smart-forms-integration/smart-forms-integration.service';\r\nimport { IProcessPluginDefinitionContext } from '../../../../../types/uiComponents/pluginWizards/IProcessPluginDefinitionContext';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { IPopupConfiguration } from '../../../../../types/models/popup/i-popup-configuration';\r\nimport { PageComponent } from '../../page/page.component';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\n\r\n@Component({\r\n    selector: 'k2-configure-form-rule',\r\n    templateUrl: './configure-form-rule.component.html',\r\n    styleUrls: ['./configure-form-rule.component.less'],\r\n    providers: [{ provide: PageComponent, useExisting: ConfigureFormRuleComponent }]\r\n})\r\nexport class ConfigureFormRuleComponent extends PageComponent implements OnInit, OnDestroy {\r\n    buttonConfig: IPopupButtonsConfig = {\r\n        previous: {\r\n            isVisible: true\r\n        },\r\n        next: {},\r\n        finish: {}\r\n    };\r\n\r\n    @Input() public config: IPopupConfiguration;\r\n\r\n    /**\r\n     * Unique identifier for configure later selection on UI\r\n     */\r\n    public configureLaterUid: string;\r\n\r\n    /**\r\n     * Unique identifier for configure now selection on UI\r\n     */\r\n    public configureNowUid: string;\r\n\r\n    /**\r\n     * Unique identifier for configure now selection on UI\r\n     */\r\n    public doItForMeUid: string;\r\n\r\n    /**\r\n     * Context of the plugin wizard.\r\n     */\r\n    public pluginContext: IProcessPluginDefinitionContext;\r\n\r\n    public chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n\r\n    formLoaded = false;\r\n\r\n    private _getFormSub: Subscription;\r\n\r\n    constructor(resourceService: ResourceService,\r\n        private _smartFormsIntegrationService: SmartFormsIntegrationService,\r\n        private _eventService: EventNotifierService) {\r\n\r\n        super(resourceService);\r\n\r\n        this.configureLaterUid = shortUid();\r\n        this.configureNowUid = shortUid();\r\n        this.doItForMeUid = shortUid();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.pluginContext = this.config.context as IProcessPluginDefinitionContext;\r\n\r\n        this._getFormSub = this._smartFormsIntegrationService\r\n            .getFormContent(this.pluginContext)\r\n            .subscribe(() => {\r\n                this.formLoaded = true;\r\n            });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this._getFormSub.unsubscribe();\r\n    }\r\n\r\n    beforePageDisplayed() {\r\n        if(!this.pluginContext.configureRuleNow && !this.pluginContext.configureRuleLater){\r\n            this.pluginContext.configureRuleForMe = true;\r\n        }\r\n    }\r\n\r\n    beforeNavigateNext() {\r\n        this._smartFormsIntegrationService.determinePages(this.pluginContext);\r\n    }\r\n\r\n    beforeNavigatePrevious() {}\r\n\r\n    /**\r\n     * Method that gets called when the user select to configure the rule later\r\n     */\r\n    public configureLaterChecked(val: boolean): void {\r\n        if (!val) return;\r\n        //Deployment specifically check for this text, this can't be placed in resource, then runtime will fail.\r\n        if (this.pluginContext.isUserForm) {\r\n            this.pluginContext.newStateName = '(Base State)';\r\n        }\r\n\r\n        this._smartFormsIntegrationService.determinePages(this.pluginContext);\r\n    }\r\n\r\n    /**\r\n     * Method that gets called when the user select to configure the rule now\r\n     */\r\n    public configureNowChecked(val: boolean): void {\r\n        if (!val) return;\r\n        if (this.pluginContext.isUserForm) {\r\n            this.pluginContext.newStateName = this.getString('smartforms_integration_user_task_state_workflow_task');\r\n        }\r\n\r\n        this._smartFormsIntegrationService.determinePages(this.pluginContext);\r\n\r\n        this.buttonConfig.next.isVisible = true;\r\n        this.buttonConfig.finish.isVisible = false;\r\n\r\n        this.notifyConfigChanged();\r\n    }\r\n\r\n    /**\r\n     * Method that gets called when the user select to do it for me option\r\n     */\r\n    public configureForMe(val: boolean): void {\r\n        if (!val) return;\r\n        if (this.pluginContext.isUserForm) {\r\n            this.pluginContext.newStateName = this.getString('smartforms_integration_user_task_state_workflow_task');\r\n        }\r\n\r\n        this.buttonConfig.next.isVisible = false;\r\n        this.buttonConfig.finish.isVisible = true;\r\n\r\n        this._smartFormsIntegrationService.determinePages(this.pluginContext);\r\n    }\r\n}\r\n","<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box\" *ngIf=\"formLoaded\">\r\n        <div class=\"section vertical twenty backdrop\">\r\n            <div class=\"column centered\">\r\n                <i class=\"icon icon-set-illustration\" [ngClass]=\"{'ic-opentaskform': pluginContext.isUserForm === true, 'ic-startrulechoicetick': !pluginContext.isUserForm && pluginContext.foundWorkflowActionOnForm === true, 'ic-startrulechoice': !pluginContext.isUserForm && pluginContext.foundWorkflowActionOnForm === false}\"></i>\r\n            </div>\r\n            <div class=\"column\" style=\"flex-grow: 1\">\r\n                <div class=\"row heading\">\r\n                    <label *ngIf=\"!pluginContext.isUserForm\" class=\"heading\">{{getString('smartforms_integration_start_rule')}}</label>\r\n                    <label *ngIf=\"pluginContext.isUserForm\" class=\"heading\">{{getString('smartforms_integration_open_task_rule')}}</label>\r\n                </div>\r\n                <div class=\"row description\">\r\n                    <label class=\"subheading\" [innerHtml]=\"pluginContext.configureFormRuleDescription\"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"section vertical twenty scrollme\" k2-scrollbar>\r\n            <div class=\"column\" *ngIf=\"pluginContext.containsDefaultRule\">\r\n                <div class=\"row no-margin\">\r\n                    <div class=\"radio-button\">\r\n                        <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                            [displayText]=\"pluginContext.ruleDoItForMeDescription\"\r\n                                            [(checked)]=\"pluginContext.configureRuleForMe\"\r\n                                            (checkedChange)=\"configureForMe($event)\"\r\n                                            [id]=\"doItForMeUid\"\r\n                                            name=\"ConfigureRuleAction\">\r\n                        </k2-choose-control-v2>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"column\">\r\n                <div class=\"row radio-button-row\">\r\n                    <div class=\"radio-button\">\r\n                        <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                            [displayText]=\"pluginContext.ruleConfigureNowDescription\"\r\n                                            [(checked)]=\"pluginContext.configureRuleNow\"\r\n                                            (checkedChange)=\"configureNowChecked($event)\"\r\n                                            [id]=\"configureNowUid\"\r\n                                            name=\"ConfigureRuleAction\">\r\n                        </k2-choose-control-v2>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"column\" *ngIf=\"!pluginContext.foundWorkflowActionOnForm\">\r\n                <div class=\"row radio-button-row\">\r\n                    <div class=\"radio-button\">\r\n                        <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                            [displayText]=\"pluginContext.ruleConfigureLaterDescription\"\r\n                                            [(checked)]=\"pluginContext.configureRuleLater\"\r\n                                            (checkedChange)=\"configureLaterChecked($event)\"\r\n                                            [id]=\"configureLaterUid\"\r\n                                            name=\"ConfigureRuleAction\">\r\n                        </k2-choose-control-v2>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n","import { Component, Inject, Input, OnInit, OnDestroy } from '@angular/core';\r\nimport { fromEvent, Subscription } from 'rxjs';\r\nimport { DropDownMenuAlignment } from 'src/app/shared/enums/drop-down/drop-down-menu-alignment';\r\nimport { IProcessPluginDefinitionContext } from 'src/types/uiComponents/pluginWizards/IProcessPluginDefinitionContext';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport { defaultDebounceTime } from 'src/app/shared/constants/general';\r\nimport { IContextWizardPopupConfiguration } from 'src/types/uiComponents/pluginWizards/i-context-wizard-popup-configuration';\r\nimport { ResourceService } from 'src/app/services/resource/resource.service';\r\nimport IDropDownMenuItem from '../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { SmartFormsIntegrationService } from '../../../../services/plugins/smart-forms-integration/smart-forms-integration.service';\r\nimport { PopupService } from '../../../../services/popup/popup.service';\r\nimport { PageComponent } from '../../page/page.component';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\n\r\n@Component({\r\n    selector: 'k2-configure-start-rule',\r\n    templateUrl: './configure-start-rule.component.html',\r\n    styleUrls: ['./configure-start-rule.component.less'],\r\n    providers: [{ provide: PageComponent, useExisting: ConfigureStartRuleComponent }]\r\n})\r\nexport class ConfigureStartRuleComponent extends PageComponent implements OnInit, OnDestroy {\r\n\r\n    /**\r\n     * Wizard popup configuration\r\n     */\r\n    @Input() config: IContextWizardPopupConfiguration;\r\n\r\n    get pluginContext(): IProcessPluginDefinitionContext {\r\n        return this.config?.context as IProcessPluginDefinitionContext;\r\n    };\r\n\r\n    shouldScrollPopup: boolean;\r\n    menuAlignment = DropDownMenuAlignment;\r\n    formLoaded = false;\r\n\r\n    buttonConfig: IPopupButtonsConfig = {\r\n        previous: {\r\n            isVisible: true\r\n        }\r\n    };\r\n\r\n    //Private members\r\n    private windowResizeSubscription: Subscription;\r\n    private getFormSub: Subscription;\r\n    private refreshing = false;\r\n\r\n    get formRules() {\r\n        if (!this.refreshing && !this.pluginContext?.rules?.length) {\r\n            this.refreshing = true;\r\n            this.refreshRules();\r\n        }\r\n        return this.pluginContext?.rules || [];\r\n    }\r\n\r\n    constructor(private popupService: PopupService,\r\n        resourceService: ResourceService,\r\n        private smartFormsIntegrationService: SmartFormsIntegrationService) {\r\n\r\n        super(resourceService);\r\n\r\n        this.windowResizeSubscription = fromEvent(window, 'resize')\r\n            .pipe(debounceTime(defaultDebounceTime))\r\n            .subscribe(() => {\r\n                this.shouldScrollPopup = this.isPopupHeightLargerThan(this.windowHeight);\r\n            });\r\n\r\n        this.shouldScrollPopup = this.isPopupHeightLargerThan(this.windowHeight);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.getFormSub = this.smartFormsIntegrationService\r\n            .getFormContent(this.pluginContext)\r\n            .subscribe(() => {\r\n                this.formLoaded = true;\r\n            });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.windowResizeSubscription?.unsubscribe();\r\n        this.getFormSub?.unsubscribe();\r\n    }\r\n\r\n    beforePageDisplayed() {\r\n    }\r\n\r\n    beforeNavigateNext() {}\r\n\r\n    beforeNavigatePrevious() {}\r\n\r\n    /**\r\n     * Method when item is selected from the dropdown.\r\n     */\r\n    itemSelected(item: IDropDownMenuItem): void {\r\n        if (!this.pluginContext || !this.smartFormsIntegrationService || !this.pluginContext.rules) {\r\n            console.error('pluginContext is not set in ConfigureStartRuleComponent');\r\n            return;\r\n        }\r\n\r\n        this.pluginContext.selectedRule = item;\r\n        this.smartFormsIntegrationService\r\n            .refreshRuleConditionsAndActions(this.pluginContext)\r\n            .subscribe();\r\n\r\n        this.smartFormsIntegrationService.determinePages(this.pluginContext);\r\n    }\r\n\r\n    onRulePlacementChanged(hasChanged: boolean) {\r\n        if (!this.pluginContext || !this.smartFormsIntegrationService) {\r\n            console.error('pluginContext is not set in ConfigureStartRuleComponent');\r\n            return;\r\n        }\r\n\r\n        if (hasChanged) {\r\n            this.pluginContext.addActionToRule = true;\r\n        } else {\r\n            this.pluginContext.addActionToRule = false;\r\n            this.smartFormsIntegrationService.determinePages(this.pluginContext);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Method to refresh the rules in the dropdown.\r\n     */\r\n    refreshRules(): void {\r\n        this.smartFormsIntegrationService.refreshRules(this.pluginContext).subscribe(\r\n            {\r\n                next:  () => { this.refreshing = false; },\r\n                error:  () => { this.refreshing = false; }\r\n            }\r\n        );\r\n    }\r\n\r\n    private isPopupHeightLargerThan(height: number): boolean {\r\n        if (this.popupService.getInitialHeight() > height) {\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    private get windowHeight(): number {\r\n        return window.innerHeight;\r\n    }\r\n}\r\n","<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box\" *ngIf=\"formLoaded\">\r\n        <div class=\"section vertical twenty backdrop instructionPanel\">\r\n            <div class=\"column centered\">\r\n                <i class=\"icon icon-set-illustration ic-startruleposition\"></i>\r\n            </div>\r\n            <div class=\"column\">\r\n                <div class=\"row heading\">\r\n                    <label class=\"heading\" *ngIf=\"pluginContext.isUserForm\">{{getFromResx(\"Wizards\", \"wizard_workflow_integration_smartforms_usertask_open_task_rule\")|async}}</label>\r\n                    <label class=\"heading\" *ngIf=\"!pluginContext.isUserForm\">{{getFromResx(\"Wizards\", \"smartforms_integration_start_rule_heading\")|async}}</label>\r\n                </div>\r\n                <div class=\"row description\">\r\n                    <label class=\"subheading\" *ngIf=\"pluginContext.isUserForm\">{{getFromResx(\"Wizards\", \"wizard_workflow_integration_smartforms_usertask_open_task_rule_description\")|async}}</label>\r\n                    <label class=\"subheading\" *ngIf=\"!pluginContext.isUserForm\">{{getFromResx(\"Wizards\", \"smartforms_integration_start_rule_sub_heading\")|async}}</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"section vertical twenty ruleConfigPanel\" [ngClass]=\"{'scrollme': shouldScrollPopup }\" k2-scrollbar>\r\n            <div class=\"column\">\r\n                <div class=\"row no-margin\">\r\n                    {{getFromResx(\"Wizards\", \"wizard_workflow_integration_smartforms_form_rules\")|async}}\r\n                </div>\r\n            </div>\r\n            <div class=\"column\">\r\n                <div class=\"row no-margin\">\r\n                    <div *ngIf=\"pluginContext?.isUserForm\">{{getFromResx(\"Wizards\", \"wizard_workflow_integration_smartforms_form_usertask_rule_desc\")|async}}</div>\r\n                    <div *ngIf=\"!pluginContext?.isUserForm\">{{getFromResx(\"Wizards\", \"wizard_workflow_integration_smartforms_form_rule_desc\")|async}}</div>\r\n                    <span class=\"margin-left icon icon-set-badges icon-size18 ic-errorbadge\" *ngIf=\"pluginContext?.noRulesError?.length > 0\" title=\"{{pluginContext?.noRulesError}}\"></span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"section vertical\">\r\n                <div class=\"column\">\r\n                    <div class=\"row\">\r\n                        <k2-drop-down class=\"k2-dropdown-parent\"\r\n                                    [menuItems]=\"formRules\"\r\n                                    (onItemSelected)=\"itemSelected($event)\"\r\n                                    [menuAlignment]=\"menuAlignment.leftEdge\" \r\n                                    [isMultiSelect]=\"false\">\r\n                            <div class=\"k2-dd-flexChild k2-dd-rowParent k2-dd-container k2-control control-background k2-dropdown-div icon-container\">\r\n                                <div class=\"k2-dd-flexChild k2-dd-text\">{{pluginContext?.selectedRule?.title}}</div>\r\n                                <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                                    <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                                </div>\r\n                            </div>\r\n                        </k2-drop-down>\r\n                    </div>\r\n                    <div class=\"row right\">\r\n                        <a href=\"javascript:void(0)\" class=\"hyperlink primary\" (click)=\"refreshRules()\">{{getFromResx(\"Wizards\", \"wizard_refresh\")|async}}</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"section vertical\">\r\n                <div class=\"column\">\r\n                    <div class=\"row vertical\" *ngIf=\"!pluginContext?.isUserForm\">\r\n                        <div [innerHTML]=\"getFromResx('Wizards', 'smartforms_integration_start_rule_actions_heading')|async\"></div>\r\n                        <div [innerHTML]=\"getFromResx('Wizards', 'smartforms_integration_start_rule_actions_sub_heading')|async\"></div>\r\n                    </div>\r\n                    <div class=\"row vertical no-margin\" *ngIf=\"pluginContext?.isUserForm\">\r\n                        <div [innerHTML]=\"getFromResx('Wizards', 'wizard_workflow_integration_smartforms_usertask_open_task_rule_actions')|async\"></div>\r\n                        <div [innerHTML]=\"getFromResx('Wizards', 'wizard_workflow_integration_smartforms_usertask_open_task_rule_drag')|async\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"section vertical\">\r\n                <div class=\"column\">\r\n                    <div class=\"row\">\r\n                        <k2-smart-forms-rules [items]=\"pluginContext.selectedStatehandlers\"\r\n                                        (onRulePlacementChanged)=\"onRulePlacementChanged($event)\"\r\n                                        [parentContext]=\"pluginContext\">\r\n                        </k2-smart-forms-rules>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"thirty-bar\"></div>\r\n            <div class=\"thirty-bar\"></div>\r\n        </div>\r\n    </div>\r\n</ng-template>","import { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { IPopupConfiguration } from '../../../../../types/models/popup/i-popup-configuration';\r\nimport { IProcessPluginDefinitionContext } from '../../../../../types/uiComponents/pluginWizards/IProcessPluginDefinitionContext';\r\nimport { SmartFormsIntegrationService } from '../../../../services/plugins/smart-forms-integration/smart-forms-integration.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { ChooseControlTypes } from '../../../../shared/enums/choose-control/choose-control-types';\r\nimport { DropDownMenuAlignment } from '../../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { shortUid } from '../../../../shared/utils/general';\r\nimport { PageComponent } from '../../page/page.component';\r\n\r\n@Component({\r\n    selector: 'k2-smartforms-configure-state',\r\n    templateUrl: './configure-state.component.html',\r\n    styleUrls: ['./configure-state.component.less'],\r\n    providers: [{ provide: PageComponent, useExisting: SmartFormsConfigureStateComponent }]\r\n})\r\nexport class SmartFormsConfigureStateComponent extends PageComponent implements OnInit, OnDestroy {\r\n    buttonConfig: IPopupButtonsConfig;\r\n\r\n    @Input() public config: IPopupConfiguration;\r\n\r\n    /**\r\n     * Unique identifier for create new state radio button\r\n     */\r\n    public createNewUid: string;\r\n\r\n    /**\r\n     * Unique identifier for use existint state radio button\r\n     */\r\n    public useExistingUid: string;\r\n\r\n    /**\r\n     * Unique identifier for default checkbox\r\n     */\r\n    public defaultCheckboxUid: string;\r\n\r\n    /**\r\n     * Unique identifier for default checkbox\r\n     */\r\n    public handleAllocationUid: string;\r\n\r\n    /**\r\n     * Context of the plugin wizard.\r\n     */\r\n    get pluginContext(): IProcessPluginDefinitionContext {\r\n        return this.config?.context as IProcessPluginDefinitionContext;\r\n    };\r\n\r\n    // Enum imports for use in templates\r\n    chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n    dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    formLoaded = false;\r\n\r\n    private _getFormSub: Subscription;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        private _smartFormsIntegrationService: SmartFormsIntegrationService\r\n    ) {\r\n        super(resourceService);\r\n        this.createNewUid = shortUid();\r\n        this.useExistingUid = shortUid();\r\n        this.defaultCheckboxUid = shortUid();\r\n        this.handleAllocationUid = shortUid();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this._getFormSub = this._smartFormsIntegrationService\r\n            .getFormContent(this.pluginContext)\r\n            .subscribe(() => {\r\n                this.formLoaded = true;\r\n            });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this._getFormSub.unsubscribe();\r\n    }\r\n\r\n    beforePageDisplayed() {\r\n    }\r\n\r\n    beforeNavigateNext() {}\r\n\r\n    beforeNavigatePrevious() {}\r\n\r\n    /**\r\n     * Method when the user check/uncheck allocate to user checkbox.\r\n     */\r\n    public allocateTaskToUserChange(): void {\r\n        this._smartFormsIntegrationService.determinePages(this.pluginContext);\r\n    }\r\n\r\n    /**\r\n     * Method when location is selected from the dropdown.\r\n     */\r\n    public locationSelected(item: IDropDownMenuItem): void {\r\n        this.pluginContext.selectedLocation = item;\r\n        for (let i = 0; i < this.pluginContext.workflowViewLocations.length; i++) {\r\n            if (this.pluginContext.workflowViewLocations[i].key != item.key) {\r\n                this.pluginContext.workflowViewLocations[i].isSelected = false;\r\n            }\r\n        }\r\n        this._smartFormsIntegrationService.determinePages(this.pluginContext);\r\n    }\r\n\r\n    /**\r\n     * Method when item is selected from the dropdown.\r\n     */\r\n    public itemSelected(item: IDropDownMenuItem): void {\r\n        this.pluginContext.selectedState = item;\r\n        for (let i = 0; i < this.pluginContext.states.length; i++) {\r\n            if (this.pluginContext.states[i].key != item.key) {\r\n                this.pluginContext.states[i].isSelected = false;\r\n            }\r\n        }\r\n        this._smartFormsIntegrationService.determinePages(this.pluginContext);\r\n        this._smartFormsIntegrationService.refreshRules(this.pluginContext);\r\n    }\r\n\r\n    /**\r\n     * Method to update form rules\r\n     */\r\n    public updateFormRules(): void {\r\n        this._smartFormsIntegrationService.refreshRules(this.pluginContext);\r\n    }\r\n\r\n    /**\r\n     * Method to refresh the states.\r\n     */\r\n    public refreshStates(): void {\r\n        this._smartFormsIntegrationService.refreshStates(this.pluginContext);\r\n    }\r\n\r\n}\r\n","<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box\" *ngIf=\"formLoaded\">\r\n        <div class=\"section vertical twenty backdrop\">\r\n            <div class=\"column centered\">\r\n                <i class=\"icon icon-set-illustration ic-startstatechoice\"></i>\r\n            </div>\r\n            <div class=\"column\">\r\n                <div class=\"row heading\">\r\n                    <label class=\"heading\" *ngIf=\"pluginContext.isUserForm; else formStateHeading\">\r\n                        {{getFromResx('Wizards','smartforms_integration_user_task_workflow_view') | async}}\r\n                    </label>\r\n                    <ng-template #formStateHeading>\r\n                        {{getFromResx('Wizards','smartforms_integration_user_task_workflow_form_state') | async}}\r\n                    </ng-template>\r\n                </div>\r\n                <div class=\"row description\">\r\n                    <label class=\"subheading\" *ngIf=\"pluginContext.isUserForm; else formStateSubHeading\">\r\n                        {{getFromResx('Wizards','smartforms_user_task_integration_state') | async}}\r\n                    </label>\r\n                    <ng-template #formStateSubHeading>\r\n                        {{getFromResx('Wizards','smartforms_integration_state_select_heading') | async}}\r\n                    </ng-template>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"section vertical twenty scrollme\" k2-scrollbar>\r\n            <div class=\"column\" *ngIf=\"pluginContext.isUserForm\">\r\n                <div class=\"row no-margin\">\r\n                    <label class=\"heading\" *ngIf=\"pluginContext.isUserForm\"> {{getFromResx('Wizards','smartforms_integration_user_task_workflow_form_state') | async}}</label>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"column\" *ngIf=\"pluginContext.isUserForm\">\r\n                <div class=\"row no-margin\">\r\n                    {{getFromResx('Wizards','smartforms_integration_user_task_workflow_form_state_description') | async}}\r\n                </div>\r\n            </div>\r\n            <div class=\"section vertical\">\r\n                <div class=\"column\">\r\n                    <div class=\"row\">\r\n                        <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                            [displayText]=\"getFromResx('Wizards','smartforms_integration_state_create') | async\"\r\n                                            [(checked)]=\"pluginContext.createNewState\"\r\n                                            (checkedChange)=\"updateFormRules()\"\r\n                                            [id]=\"createNewUid\"\r\n                                            name=\"stateConfiguration\">\r\n                        </k2-choose-control-v2>\r\n                    </div>\r\n                </div>\r\n                <div class=\"column radiobutton-spacing\">\r\n                    <div class=\"row radio-button-row\" [ngClass]=\"{'is-disabled' : !pluginContext.createNewState}\">\r\n                        <label>{{getFromResx('Wizards','smartforms_integration_state_create_sub_heading') | async}}</label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"column radiobutton-spacing\">\r\n                    <div class=\"row\" [ngClass]=\"{'is-disabled' : !pluginContext.createNewState}\">\r\n                        <k2-input class=\"k2-control control-background textbox-border\" [(value)]=\"pluginContext.newStateName\"></k2-input>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"section vertical\">\r\n                <div class=\"column radiobutton\">\r\n                    <div class=\"row radio-button-row extra-spacing\">\r\n                        <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                            [displayText]=\"getFromResx('Wizards','smartforms_integration_state_existing') | async\"\r\n                                            [checked]=\"!pluginContext.createNewState\"\r\n                                            [id]=\"useExistingUid\"\r\n                                            name=\"stateConfiguration\">\r\n                        </k2-choose-control-v2>\r\n                    </div>\r\n                </div>\r\n                <div class=\"column radiobutton-spacing\">\r\n                    <div class=\"row dropdown\" [ngClass]=\"{'is-disabled' : pluginContext.createNewState}\">\r\n                        <k2-drop-down class=\"k2-dropdown-parent\"\r\n                                    [menuAlignment]=\"dropdownMenuAlignment.leftEdge\"\r\n                                    [menuItems]=\"pluginContext?.states\"\r\n                                    (onItemSelected)=\"itemSelected($event)\"\r\n                                    [isMultiSelect]=\"false\">\r\n                            <div class=\"k2-dd-flexChild k2-dd-rowParent k2-dd-container k2-control control-background k2-dropdown-div icon-container\">\r\n                                <div class=\"k2-dd-flexChild k2-dd-text\">{{pluginContext.selectedState.title}}</div>\r\n                                <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                                    <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                                </div>\r\n                            </div>\r\n                        </k2-drop-down>\r\n                    </div>\r\n                    <div class=\"row right\" [ngClass]=\"{'is-disabled' : pluginContext.createNewState}\">\r\n                        <a class=\"hyperlink primary\" (click)=\"refreshStates()\">{{getFromResx('Wizards','wizard_refresh') | async}}</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"section vertical\" *ngIf=\"!pluginContext.isUserForm\">\r\n                <div class=\"column\">\r\n                    <div class=\"row\">\r\n                        <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                                            [displayText]=\"getFromResx('Wizards','smartforms_integration_state_default') | async\"\r\n                                            [(checked)]=\"pluginContext.makeStateDefault\"\r\n                                            [id]=\"defaultCheckboxUid\"\r\n                                            [name]=\"defaultCheckboxUid\">\r\n                        </k2-choose-control-v2>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"section vertical\" *ngIf=\"pluginContext.isUserForm\">\r\n                <label class=\"subheading\">{{getFromResx('Wizards','smartforms_integration_user_task_description') | async}}</label>\r\n                <div class=\"column\">\r\n                    <div class=\"row\">\r\n                        <k2-drop-down class=\"k2-dropdown-parent\"\r\n                                    [menuAlignment]=\"dropdownMenuAlignment.leftEdge\"\r\n                                    [menuItems]=\"pluginContext?.workflowViewLocations\"\r\n                                    (onItemSelected)=\"locationSelected($event)\"\r\n                                    [isMultiSelect]=\"false\">\r\n                            <div class=\"k2-dd-flexChild k2-dd-rowParent k2-dd-container k2-control control-background k2-dropdown-div icon-container\">\r\n                                <div class=\"k2-dd-flexChild k2-dd-text\">{{pluginContext.selectedLocation.title}}</div>\r\n                                <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                                    <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </k2-drop-down>\r\n                    </div>\r\n                </div>\r\n                <div class=\"column\">\r\n                    <div class=\"row\">\r\n                        {{getFromResx('Wizards','smartforms_integration_user_task_handle_alloc') | async}}\r\n                    </div>\r\n                </div>\r\n                <div class=\"column\">\r\n                    <k2-choose-control-v2 [type]=\"chooseControlTypes.checkbox\"\r\n                                        [displayText]=\"getFromResx('Wizards','smartforms_integration_user_task_alloc_when_opened') | async\"\r\n                                        [(checked)]=\"pluginContext.allocateTaskToUser\"\r\n                                        (checkedChange)=\"allocateTaskToUserChange()\"\r\n                                        [id]=\"handleAllocationUid\"\r\n                                        [name]=\"handleAllocationUid\">\r\n                    </k2-choose-control-v2>\r\n                </div>\r\n            </div>\r\n            <div class=\"fourty\"></div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n","import { Component, Inject, Input, OnInit, OnDestroy } from '@angular/core';\r\nimport { IProcessPluginDefinitionContext } from 'src/types/uiComponents/pluginWizards/IProcessPluginDefinitionContext';\r\nimport { IHelpService } from '../../../../../types/services/help/i-help-service';\r\nimport { IContextWizardPopupConfiguration } from '../../../../../types/uiComponents/pluginWizards/i-context-wizard-popup-configuration';\r\nimport { HelpServiceToken } from '../../../../services/help/help-service-factory';\r\nimport { SmartFormsIntegrationService } from '../../../../services/plugins/smart-forms-integration/smart-forms-integration.service';\r\nimport { BaseResourceComponent } from '../../../base-resource/base-resource.component';\r\nimport { ISmartFormItemReference } from '../../../../../types/models/smart-forms/i-smart-form-item-reference';\r\nimport { Subscription } from 'rxjs';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { PageComponent } from '../../page/page.component';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { IModelArray } from 'src/types/models/base/i-model-array';\r\n\r\n@Component({\r\n    selector: 'k2-create-smart-fields',\r\n    templateUrl: './create-smart-fields.component.html',\r\n    styleUrls: ['./create-smart-fields.component.less'],\r\n    providers: [{ provide: PageComponent, useExisting: CreateSmartFieldsComponent }]\r\n})\r\nexport class CreateSmartFieldsComponent extends PageComponent implements OnInit, OnDestroy {\r\n\r\n    /**\r\n     * Wizard popup configuration\r\n     */\r\n    @Input() public config: IContextWizardPopupConfiguration;\r\n\r\n    /**\r\n     * Help link.\r\n     */\r\n    helpLink: string;\r\n\r\n    /**\r\n     * Flag to determine if the directive is loading\r\n     */\r\n    isLoading: boolean;\r\n\r\n    get pluginContext(): IProcessPluginDefinitionContext {\r\n        return this.config?.context as IProcessPluginDefinitionContext;\r\n    };\r\n\r\n    buttonConfig: IPopupButtonsConfig;\r\n\r\n    private formContentSub: Subscription;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        @Inject(HelpServiceToken) private helpService: IHelpService,\r\n        private smartFormsIntegrationService: SmartFormsIntegrationService) {\r\n        super(resourceService);\r\n        this.isLoading = true;\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.pluginContext.directiveLoaded = this.itemReferencesComponentLoaded.bind(this);\r\n\r\n        this.helpLink = this.helpService.getHelpUrl('createreferences_sf');\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.formContentSub?.unsubscribe();\r\n    }\r\n\r\n    beforePageDisplayed() {}\r\n    beforeNavigateNext() {\r\n        this.smartFormsIntegrationService.determinePages(this.pluginContext);\r\n    }\r\n    beforeNavigatePrevious() {}\r\n\r\n    /**\r\n     * Method that will execute if an item reference on the directive was removed.\r\n     */\r\n    updateHeading = (newItemReferences: IModelArray<ISmartFormItemReference>): void => {\r\n        // Update dynamic headings.\r\n\r\n        if (newItemReferences.length > 0) {\r\n            this.pluginContext.containsNewReferences = true;\r\n            if (this.pluginContext.containsNewReferences) {\r\n                this.pluginContext.unmappedFieldsHeading = this.getString('smartForms_integration_references')\r\n                    .replace('{0}', newItemReferences.length.toString())\r\n                    .replace('{1}', this.pluginContext.form.title);\r\n            }\r\n            this.smartFormsIntegrationService.determinePages(this.pluginContext);\r\n\r\n            this.pluginContext.newItemReferences.collection\r\n                    = newItemReferences as sourceCode.k2Designer.objectModel.core.model.IModelArray<ISmartFormItemReference>;\r\n        }\r\n    };\r\n\r\n    itemReferencesComponentLoaded(): void {\r\n        // This call can only be made when the item references component is loaded.\r\n        this.formContentSub = this.smartFormsIntegrationService\r\n            .getFormContent(this.pluginContext)\r\n            .subscribe(() => {\r\n                this.formContentLoaded();\r\n            });\r\n    }\r\n\r\n    private formContentLoaded = (): void => {\r\n        this.isLoading = false;\r\n    };\r\n}\r\n","<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box\">\r\n        <k2-item-references [heading]=\"getFromResx('Wizards', 'wizard_wfi_references_subheading')|async\"\r\n                            [subHeading]=\"pluginContext.createItemReferencesHeading\"\r\n                            [createHeading]=\"pluginContext.unmappedFieldsHeading\"\r\n                            [sourceItemReferences]=\"pluginContext.formItemReferences.collection\"\r\n                            [newItemReferences]=\"pluginContext.newItemReferences.collection\"\r\n                            [existingItemReferences]=\"pluginContext.existingItemReferences.collection\"\r\n                            (itemReferenceUpdated)=\"updateHeading($event)\"\r\n                            [referenceToCreateCount]=\"pluginContext.newReferenceCount\"\r\n                            [noSuggestionText]=\"getFromResx('Wizards', 'wizard_workflow_no_suggestions')|async\"\r\n                            [learnMoreLink]=\"helpLink\"\r\n                            noSuggestionIcon=\"ic-form\"\r\n                            class=\"directive-block\"\r\n                            [isLoading]=\"isLoading\"\r\n                            illustration=\"ic-createreferenceform\"\r\n                            (componentLoaded)=\"itemReferencesComponentLoaded()\"\r\n                            [learnMoreId]=\"330\">\r\n        </k2-item-references>\r\n    </div>\r\n</ng-template>\r\n","import { Component, Inject, Input, OnInit } from '@angular/core';\r\nimport { DataServiceToken } from 'src/app/services/data/data-service-factory';\r\nimport { EventNotifierService } from 'src/app/services/event-notifier/event-notifier.service';\r\nimport { PopupState } from 'src/app/shared/enums/plugin-wizard/popup-state';\r\nimport { shortUid } from 'src/app/shared/utils/general';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { IDataService } from 'src/types/services/data/i-data-service';\r\nimport { IEnvironmentService } from 'src/types/services/environment/i-environment-service';\r\nimport { IContextWizardPopupConfiguration } from 'src/types/uiComponents/pluginWizards/i-context-wizard-popup-configuration';\r\nimport { IRemovePluginContext } from 'src/types/uiComponents/pluginWizards/IRemovePluginContext';\r\nimport { EnvironmentServiceToken } from '../../../../services/environment/environment-service-factory';\r\nimport { ProcessService } from '../../../../services/process/process.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { ChooseControlTypes } from '../../../../shared/enums/choose-control/choose-control-types';\r\nimport { PageComponent } from '../../page/page.component';\r\n\r\n@Component({\r\n    selector: 'k2-sf-remove-integration',\r\n    templateUrl: './remove-integration.component.html',\r\n    styleUrls: ['./remove-integration.component.less'],\r\n    providers: [{ provide: PageComponent, useExisting: SmartFormsRemoveIntegrationComponent }]\r\n})\r\nexport class SmartFormsRemoveIntegrationComponent extends PageComponent implements OnInit {\r\n\r\n    @Input() config: IContextWizardPopupConfiguration;\r\n\r\n    @Input() showResult = false;\r\n\r\n    @Input() isResultPage: boolean;\r\n\r\n    /**\r\n     * Unique identifier for the check-out check box.\r\n     */\r\n    checkOutCheckBoxId: string;\r\n\r\n    /**\r\n     * Unique identifier for the state check box.\r\n     */\r\n    stateCheckBoxId: string;\r\n\r\n    /**\r\n     * Unique identifier for the check-out check box.\r\n     */\r\n    actionCheckBoxId: string;\r\n\r\n    /**\r\n     * Unique identifier for the check-out check box.\r\n     */\r\n    itemReferenceCheckboxId: string;\r\n\r\n    /**\r\n     * Context provided for the popup\r\n     */\r\n    get pluginContext(): IRemovePluginContext {\r\n        return this.config?.context as any;\r\n    }\r\n\r\n    /**\r\n     *  Message of the error if occur.\r\n     */\r\n    errorMessage: string;\r\n\r\n    /**\r\n     * Resource string to localize UI\r\n     */\r\n    public resources: {\r\n        [resourceId: string]: string;\r\n    };\r\n\r\n    // Enum imports for use in templates\r\n    chooseControlTypes = ChooseControlTypes;\r\n\r\n    buttonConfig: IPopupButtonsConfig = {\r\n        previous: {\r\n            buttonText: 'workflow_contextPopup_cancelButton'\r\n        },\r\n        next: {\r\n            classOverride: 'modal-button alert large',\r\n            buttonText: 'workflow_contextPopup_delete_event'\r\n        },\r\n        finish: {\r\n            buttonText: 'workflow_contextPopup_okButton'\r\n        }\r\n    };\r\n\r\n    constructor(@Inject(EnvironmentServiceToken) private environmentService: IEnvironmentService,\r\n        private eventService: EventNotifierService,\r\n        private processService: ProcessService,\r\n        protected resourceService: ResourceService,\r\n        @Inject(DataServiceToken) private dataService: IDataService) {\r\n        super(resourceService);\r\n        this.checkOutCheckBoxId = shortUid();\r\n        this.stateCheckBoxId = shortUid();\r\n        this.actionCheckBoxId = shortUid();\r\n        this.itemReferenceCheckboxId = shortUid();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.pluginContext.state?.isBase) this.pluginContext.deleteState = false;\r\n\r\n        this.buttonConfig.previous.isVisible = !this.isResultPage;\r\n    }\r\n\r\n    beforePageDisplayed() {\r\n        if(this.isResultPage){\r\n            this.removeWorkflowIntegration();\r\n        }\r\n    }\r\n\r\n    beforeNavigateNext() {}\r\n\r\n    beforeNavigatePrevious() {}\r\n\r\n    public toggleCheckboxValue(controlId: string): void {\r\n        if (this.showResult) return;\r\n        if (controlId == this.actionCheckBoxId) {\r\n            this.pluginContext.deleteAction = !this.pluginContext.deleteAction;\r\n        }\r\n        else if (controlId == this.stateCheckBoxId) {\r\n            this.pluginContext.deleteState = !this.pluginContext.deleteState;\r\n        }\r\n        else if (controlId == this.itemReferenceCheckboxId) {\r\n            this.pluginContext.deleteItemReferences = !this.pluginContext.deleteItemReferences;\r\n        }\r\n\r\n        //Checkout should also be unchecked if all items are unchecked.\r\n        if (!this.pluginContext.deleteAction && !this.pluginContext.deleteState && !this.pluginContext.deleteItemReferences) {\r\n            this.pluginContext.checkOut = false;\r\n        }\r\n        else if (!this.pluginContext.checkOut) {\r\n            this.pluginContext.checkOut = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Remove workflow integration from form.\r\n     * */\r\n    removeWorkflowIntegration(): void {\r\n        this.pluginContext.inProgress = true;\r\n        this.notifyPageStateChanged(PopupState.Busy);\r\n\r\n        if (this.pluginContext.actionId) {\r\n            this.dataService.httpGet('api/smartforms/removeworkflowintegration', {\r\n                host: this.environmentService.currentEnvironment.hostId,\r\n                hashes: [],\r\n                formId: this.pluginContext.formSystemName,\r\n                actionId: this.pluginContext.actionId,\r\n                stateId: this.pluginContext.state.id,\r\n                deleteAction: this.pluginContext.deleteAction,\r\n                deleteState: this.pluginContext.deleteState,\r\n                deleteItemReferenceMappings: this.pluginContext.deleteItemReferences,\r\n                workflowname: this.environmentService.workflowFullname\r\n            }, this.removeWorkflowIntegrationCompleted.bind(this), this.environmentService, false, null, false);\r\n        }\r\n        else {\r\n            //Remove the form if it is added in the workflow definition, this will be added when the user select to add the rule later or an inteded plugin from Smartforms context.\r\n            for (let i = 0; i < this.processService.root.configuration.processDefinitions.length; i++) {\r\n                const formProcessDefinition = this.processService.root.configuration.processDefinitions[i] as\r\n                    sourceCode.k2Designer.objectModel.workflow.process.k2Process.processDefinitions.formsPD.IFormProcessDefinition;\r\n\r\n                if (formProcessDefinition.formSystemName === this.pluginContext.formSystemName) {\r\n                    //Mark the name, don't remove the entry.  We need something to know that the intended plugin is already configured or removed otherwise it will keep adding the inteded plugin\r\n                    //each time it hits the constructor.\r\n                    const removedFormSystemName = formProcessDefinition.formSystemName + '_removed';\r\n                    (this.processService.root.configuration.processDefinitions[i] as\r\n                        sourceCode.k2Designer.objectModel.workflow.process.k2Process.processDefinitions.formsPD.IFormProcessDefinition)\r\n                        .formSystemName = removedFormSystemName;\r\n                }\r\n            }\r\n\r\n            this.removeWorkflowIntegrationCompleted(null, null);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Callback method when form is updated\r\n     */\r\n    public removeWorkflowIntegrationCompleted(result: string, error: boolean): void {\r\n        this.notifyPageStateChanged(PopupState.Normal);\r\n\r\n        if (!error) {\r\n            this.removeItemReferences();\r\n            this.pluginContext.success = true;\r\n            this.showResult = true;\r\n        }\r\n        else {\r\n            const exception = JSON.parse(result);\r\n\r\n            // Use the Inner Exception Message first, then fall back on Exception Message, else Message\r\n            if (exception.InnerException) {\r\n                this.errorMessage = exception.InnerException.ExceptionMessage || exception.InnerException.Message;\r\n            }\r\n            else {\r\n                this.errorMessage = exception.ExceptionMessage || exception.Message;\r\n            }\r\n\r\n            this.pluginContext.success = false;\r\n        }\r\n        this.pluginContext.inProgress = false;\r\n    }\r\n\r\n    /**\r\n     * Method to remove the item references that was created with the forms integration.\r\n     */\r\n    private removeItemReferences(): void {\r\n        if (this.pluginContext.deleteItemReferences) {\r\n            for (let i = 0; i < this.pluginContext.itemReferences.length; i++) {\r\n                for (let j = 0; j < this.processService.root.configuration.itemReferences.length; j++) {\r\n                    if (this.processService.root.configuration.itemReferences[j].systemName == this.pluginContext.itemReferences[i].name) {\r\n                        //Remove item reference\r\n                        this.processService.root.configuration.itemReferences[j].removeFromModelArray();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box centered\">\r\n        <div class=\"section vertical centered seventy\">\r\n            <div class=\"content-section fadeMeIn\" *ngIf=\"showResult && !pluginContext.success\">\r\n                <div class=\"fourty\"></div>\r\n                <div class=\"column\">\r\n                    <div class=\"row vertical heading\">\r\n                        <img alt=\"\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY3QzczMEQyMjhEMDExRTZCN0MzRUYyRjE2RDMwNEY1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY3QzczMEQzMjhEMDExRTZCN0MzRUYyRjE2RDMwNEY1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjdDNzMwRDAyOEQwMTFFNkI3QzNFRjJGMTZEMzA0RjUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjdDNzMwRDEyOEQwMTFFNkI3QzNFRjJGMTZEMzA0RjUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6sw+hkAAALe0lEQVR42uxb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\" />\r\n                    </div>\r\n                    <div class=\"row vertical heading twentyeight\">\r\n                        {{getFromResx(\"Wizards\", \"smartforms_integration_summary_error_oops\") | async}}\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"column\">\r\n                    <div class=\"row vertical heading\">\r\n                        {{getFromResx(\"Wizards\", \"smartforms_integration_remove_event\") | async}}\r\n                    </div>\r\n                    <div class=\"row vertical error heading\">\r\n                        {{errorMessage}}\r\n                    </div>\r\n                    <div class=\"twenty\"></div>\r\n                    <div class=\"row vertical\">\r\n                        <div (click)=\"removeWorkflowIntegration()\" class=\"modal-button primary\">\r\n                            <span class=\"left-icon\"><i class=\"icon icon-set-toolbar icon-size16 ic-refreshwhite\"></i></span><span class=\"right-text\">{{getFromResx(\"Wizards\", \"smartforms_integration_summary_retry\") | async}}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <ng-container *ngIf=\"!showResult || (showResult && pluginContext.success)\">\r\n                <div class=\"fourty\"></div>\r\n                <div class=\"column fourty\">\r\n                    <div class=\"row vertical heading\">\r\n                        <i class=\"icon icon-set-wizard icon-size64 ic-bin\" *ngIf=\"!showResult\"></i>\r\n                        <i class=\"icon icon-set-wizard icon-size64 ic-success\" *ngIf=\"showResult\"></i>\r\n                    </div>\r\n                    <div class=\"row vertical heading twentyeight\">\r\n                        {{getFromResx('Wizards','smartforms_integration_remove_heading') | async}}\r\n                    </div>\r\n                    <div class=\"twenty\"></div>\r\n\r\n                    <div class=\"row vertical\" *ngIf=\"pluginContext.actionId\">\r\n                        <div class=\"content-row icon-list update\">\r\n                            <div class=\"icon-on-left\">\r\n                                <i class=\"icon icon-set-steps icon-size32 ic-form\"></i>\r\n                            </div>\r\n                            <div class=\"update-container\">\r\n                                <div class=\"update-heading\">{{getFromResx('Wizards','smartforms_integration_delete_event') | async}}</div>\r\n                                <div class=\"update-description\">{{getFromResx('Wizards','smartforms_integration_delete_event_description') | async}}</div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"content-row icon-list sub\">\r\n                            <div class=\"check-box-on-left\">\r\n                                <k2-choose-control-v2 [disabled]=\"showResult\"\r\n                                                    [type]=\"chooseControlTypes.checkbox\"\r\n                                                    [displayText]=\"\"\r\n                                                    [model]=\"pluginContext.checkOut\"\r\n                                                    [(checked)]=\"pluginContext.checkOut\"\r\n                                                    [id]=\"checkOutCheckBoxId\"\r\n                                                    [name]=\"checkOutCheckBoxId\">\r\n                                </k2-choose-control-v2>\r\n                            </div>\r\n                            <div class=\"icon-on-left small-icon\">\r\n                                <i class=\"icon icon-set-steps icon-size16 ic-checkout\"></i>\r\n                            </div>\r\n                            <span>{{getFromResx('Wizards','smartforms_integration_summary_check_out') | async}}&nbsp;<strong>{{pluginContext.formName}}</strong>&nbsp;{{getFromResx('Wizards','smartforms_integration_summary_form') | async}}</span>\r\n                        </div>\r\n\r\n                        <div class=\"content-row icon-list sub\" *ngIf=\"!pluginContext.state.isBase\">\r\n                            <div class=\"check-box-on-left small-icon\">\r\n                                <k2-choose-control-v2 [disabled]=\"showResult\"\r\n                                                    [type]=\"chooseControlTypes.checkbox\"\r\n                                                    [displayText]=\"\"\r\n                                                    [checked]=\"pluginContext.deleteState && !pluginContext.state.isBase\"\r\n                                                    (checkedChange)=\"toggleCheckboxValue(stateCheckBoxId)\"\r\n                                                    id=\"{{stateCheckBoxId}}\"\r\n                                                    name=\"{{stateCheckBoxId}}\">\r\n                                </k2-choose-control-v2>\r\n                            </div>\r\n                            <div class=\"icon-on-left small-icon\">\r\n                                <i class=\"icon icon-set-steps icon-size16 ic-callsubworkflow\"></i>\r\n                            </div>\r\n                            <span>{{getFromResx('Wizards','smartforms_integration_delete_the') | async}}&nbsp;<strong>{{pluginContext.state.name}}</strong>&nbsp;{{getFromResx('Wizards','smartforms_integration_remove_state_from') | async}}</span>\r\n                        </div>\r\n\r\n                        <div class=\"content-row icon-list sub\" *ngIf=\"!pluginContext.state.isBase\">\r\n                            <div class=\"check-box-on-left\" [ngClass]=\"{'is-disabled': pluginContext.deleteState === true && !pluginContext.state.isBase}\">\r\n                                <k2-choose-control-v2 [disabled]=\"showResult\"\r\n                                                    [type]=\"chooseControlTypes.checkbox\"\r\n                                                    [displayText]=\"\"\r\n                                                    [checked]=\"pluginContext.deleteAction || pluginContext.deleteState\"\r\n                                                    (checkedChange)=\"toggleCheckboxValue(actionCheckBoxId);\"\r\n                                                    id=\"{{actionCheckBoxId}}\"\r\n                                                    name=\"{{actionCheckBoxId}}\">\r\n                                </k2-choose-control-v2>\r\n                            </div>\r\n                            <div class=\"icon-on-left small-icon\">\r\n                                <i class=\"icon icon-set-toolbox icon-size16 ic-rules\"></i>\r\n                            </div>\r\n                            <span>{{getFromResx('Wizards','smartforms_integration_delete') | async}}&nbsp;<strong>{{getFromResx('Wizards','smartforms_integration_start_workflow') | async}}</strong>&nbsp;{{getFromResx('Wizards','smartforms_integration_delete_action_from') | async}}&nbsp;<strong>{{pluginContext.eventName}}</strong>&nbsp;{{getFromResx('Wizards','smartforms_integration_rule') | async}}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row vertical\" *ngIf=\"pluginContext?.itemReferences?.length > 0\">\r\n                        <div class=\"content-row icon-list update\">\r\n                            <div class=\"icon-on-left\">\r\n                                <i class=\"icon icon-set-steps icon-size32 ic-itemreferenceevent\"></i>\r\n                            </div>\r\n                            <div class=\"update-container\">\r\n                                <div class=\"update-heading\">{{getFromResx('Wizards','wizard_workflow_integration_sharePoint_remove_references') | async}}</div>\r\n                                <div class=\"update-description\">{{getFromResx('Wizards','wizard_workflow_integration_remove_references_description') | async}}</div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"content-row icon-list sub\">\r\n                            <div class=\"check-box-on-left\">\r\n                                <k2-choose-control-v2 [disabled]=\"showResult\"\r\n                                                    [type]=\"chooseControlTypes.checkbox\"\r\n                                                    [displayText]=\"\"\r\n                                                    [checked]=\"pluginContext.deleteItemReferences\"\r\n                                                    (checkedChange)=\"toggleCheckboxValue(itemReferenceCheckboxId);\"\r\n                                                    id=\"{{itemReferenceCheckboxId}}\"\r\n                                                    name=\"{{itemReferenceCheckboxId}}\">\r\n                                </k2-choose-control-v2>\r\n                            </div>\r\n                            <div class=\"icon-on-left small-icon\">\r\n                                <i [ngClass]=\"'icon icon-set-wizard icon-size16 ' + (pluginContext.status === 2 && toggleItemReferenceValue === true ? 'ic-success' : 'ic-reference') \"></i>\r\n                            </div>\r\n                            <span>{{getFromResx('Wizards','smartforms_integration_delete') | async}}&nbsp;<strong>{{pluginContext.itemReferences.length}}</strong>&nbsp;{{getFromResx('Wizards','smartforms_integration_delete_item_references') | async}}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</ng-template>","import { ElementRef, EventEmitter, HostListener, Input, Output } from '@angular/core';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { IProcessPluginDefinitionContext } from 'src/types/uiComponents/pluginWizards/IProcessPluginDefinitionContext';\r\nimport { IGeneralItem } from 'src/types/uiComponents/pluginWizards/IGeneralItem';\r\nimport { GeneralItemTypes } from 'src/app/shared/enums/plugin-wizard/general-item-types';\r\n\r\n@Component({\r\n    selector: 'k2-smart-forms-rules',\r\n    templateUrl: './smart-forms-rules.component.html',\r\n    styleUrls: ['./smart-forms-rules.component.less']\r\n})\r\nexport class SmartFormsRulesComponent implements OnInit {\r\n\r\n    /**\r\n     * Index in list used for item id\r\n     */\r\n    @Input() public id = '';\r\n    private items: IGeneralItem[];\r\n    @Input('items')\r\n    set Items(items: IGeneralItem[]) {\r\n        this.items = items || [];\r\n    }\r\n    get Items() {\r\n        return this.items;\r\n    }\r\n    @Input() parentContext: IProcessPluginDefinitionContext;\r\n    @Output() public onRulePlacementChanged = new EventEmitter<boolean>();\r\n\r\n    /**\r\n     * The sortable widget does not provide position info\r\n     * on its 'start' event, need to record two different\r\n     * sets and handle accordingly\r\n     */\r\n    private _anchorPosition: IPosition = {\r\n        x: 0,\r\n        y: 0\r\n    };\r\n\r\n    /**\r\n     * if set to true, the _anchorPosition will be reset\r\n     */\r\n    private _refreshPosition: boolean;\r\n\r\n    /**\r\n     * A flag indicating that a drag operation is occurring\r\n     */\r\n    private _isDraggingItem = false;\r\n\r\n    /**\r\n     * Create a copy of the original action when we need to revert any changes\r\n     */\r\n    private _dragModelItem: IGeneralItem;\r\n\r\n    private _startDragIndex = -1;\r\n    private _nonWorkflowActionItems: IGeneralItem[];\r\n\r\n    /**\r\n     * Record initial index of the action to check if position has changed\r\n     */\r\n    private _originalActionIndex = -1;\r\n\r\n    /**\r\n     * Create a copy of the original action when we need to revert any changes\r\n     */\r\n    private _originalAction: IGeneralItem;\r\n    private _sortableWidget: JQuery;\r\n    private _rootElement: any;\r\n\r\n    constructor(private _el: ElementRef) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n\r\n        if (!this.id || this.id === '') {\r\n            this.id = sourceCode.k2Designer.utilities.shortUid();\r\n        }\r\n\r\n        this._rootElement = $(this._el.nativeElement);\r\n\r\n        setTimeout(() => {\r\n            const options: JQueryUI.SortableOptions = {\r\n                opacity: 0.6,\r\n                axis: 'y',\r\n                placeholder: `k2-rule-item-place-holder-${this.parentContext.isUserForm ? 'user-task' : 'start-event'}`,\r\n                cancel: '.not-draggable:not(.workflow-sub-item)',\r\n                revert: 150,\r\n                tolerance: 'pointer',\r\n\r\n                start: this.start.bind(this),\r\n                stop: this.stop.bind(this),\r\n                change: this.change.bind(this),\r\n                sort: this.sort.bind(this)\r\n            };\r\n\r\n            const parentById = this._rootElement.parent().find('#' + this.id);\r\n            if (parentById && typeof parentById.sortable === 'function') {\r\n                this._sortableWidget = (<JQuery>parentById).sortable(options);\r\n            }\r\n        }, 0);\r\n    }\r\n\r\n    @HostListener('mousedown', ['$event'])\r\n    onMouseDown(event: MouseEvent) {\r\n        const element = document.elementFromPoint(event.clientX, event.clientY);\r\n        this.doFocus(element);\r\n\r\n        this._anchorPosition = {\r\n            x: event.clientX,\r\n            y: event.clientY\r\n        };\r\n        this._refreshPosition = false;\r\n    }\r\n\r\n    @HostListener('mouseup', ['$event'])\r\n    onMouseUp(event: MouseEvent) {\r\n        const workflowItem = this.getWorkflowItem();\r\n        if (workflowItem) {\r\n            workflowItem.focused = true;\r\n        }\r\n    }\r\n\r\n\r\n    @HostListener('mousemove', ['$event'])\r\n    onMouseMove(event: MouseEvent) {\r\n\r\n        if (this._refreshPosition) {\r\n            this._anchorPosition =\r\n            {\r\n                x: event.clientX,\r\n                y: event.clientY\r\n            };\r\n            this._refreshPosition = false;\r\n        }\r\n\r\n        if (this._isDraggingItem) {\r\n\r\n            let allowDocking = false;\r\n\r\n            // determine if we should scroll the viewport\r\n            const helper = this._rootElement[0].querySelector('.ui-sortable-helper');\r\n\r\n            helper.classList.add('grabbed');\r\n\r\n            // first determine if the item is in between handlers with different indentation\r\n            const insertIndex = this.getPlaceHolderIndex();\r\n\r\n            let curItem = this._dragModelItem;\r\n            let prevItem = this.items[insertIndex - 1] as IGeneralItem;\r\n\r\n            if (insertIndex === this.items.length - 1) {\r\n\r\n                if (prevItem.itemType === GeneralItemTypes.action\r\n                    && prevItem.level !== 0) {\r\n                    allowDocking = true;\r\n                }\r\n\r\n            }\r\n            else if (insertIndex > 1) {\r\n\r\n                curItem = this._dragModelItem;\r\n                prevItem = this.items[insertIndex - 1] as IGeneralItem;\r\n                const nextItem = this.items[insertIndex + 1] as IGeneralItem;\r\n\r\n                if (prevItem.itemType === GeneralItemTypes.action\r\n                    && curItem.level !== prevItem.level) {\r\n                    allowDocking = true;\r\n                }\r\n                else if (nextItem.itemType === GeneralItemTypes.action\r\n                    && curItem.level !== nextItem.level\r\n                    && (nextItem.itemType.toString() === GeneralItemTypes.condition.toString() ||\r\n                        nextItem.itemType == GeneralItemTypes.action)) {\r\n                    allowDocking = true;\r\n                }\r\n            }\r\n\r\n            if (allowDocking) {\r\n                const helperRuleText = helper.querySelector('.rule-text');\r\n\r\n                const horizontalDiff = this._anchorPosition.x - event.clientX;\r\n                const absDiff = Math.abs(horizontalDiff);\r\n\r\n                if (absDiff > 40) {\r\n                    // moving to the right\r\n                    if (horizontalDiff < 0) {\r\n                        // determine level of indentation\r\n                        const prevItem = this.items[insertIndex - 1] as IGeneralItem;\r\n                        this._dragModelItem.level = prevItem.level;\r\n                        this.toggleRuleTextIndent(helperRuleText, prevItem.level);\r\n                    }\r\n                    else {\r\n                        this._dragModelItem.level = 0;\r\n                        this.toggleRuleTextIndent(helperRuleText, 0);\r\n                    }\r\n                }\r\n            }\r\n\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    @HostListener('blur', ['$event'])\r\n    doBlur() {\r\n        const workflowItem = this.getWorkflowItem();\r\n        workflowItem.focused = false;\r\n    }\r\n\r\n    @HostListener('focus', ['$event'])\r\n    Focus() {\r\n        const element = this._rootElement[0].querySelector('.workflow-item');\r\n        this.doFocus(element);\r\n    }\r\n\r\n    private toggleRuleTextIndent(ruleText: Element, level: number) {\r\n        if (level === 0) {\r\n            ruleText.classList.remove('indent');\r\n            ruleText.classList.remove('double-indent');\r\n        }\r\n        else if (level === 1) {\r\n            ruleText.classList.remove('double-indent');\r\n            ruleText.classList.add('indent');\r\n        }\r\n        else if (level === 2) {\r\n            ruleText.classList.remove('indent');\r\n            ruleText.classList.add('double-indent');\r\n        }\r\n    }\r\n\r\n    private doFocus(element: Element) {\r\n        // get model item\r\n        const workflowItem = this.getWorkflowItem();\r\n        workflowItem.focused = true;\r\n\r\n        // determine if the workflow action was clicked\r\n        if (element !== null) {\r\n            // ensure its the correct html element\r\n            let targetElement = element;\r\n            while (!targetElement.classList.contains('workflow-item')) {\r\n                targetElement = targetElement.parentElement;\r\n                // fail-safe\r\n                if (!targetElement || targetElement.classList.contains('k2-wizard-box')) {\r\n                    targetElement = null;\r\n                    event.preventDefault();\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (targetElement !== null) {\r\n                workflowItem.selected = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    private getWorkflowItem(): IGeneralItem {\r\n        const ruleItems = this.items;\r\n        const workflowItem: IGeneralItem = null;\r\n        for (let i = 0, len = ruleItems.length; i < len; i++) {\r\n\r\n            const item = ruleItems[i] as IGeneralItem;\r\n            if (item.isWorkflowAction || (this.parentContext.isUserForm && item.isOpenTaskCondition) || item.isLoadProcessAction) {\r\n\r\n                return item;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private getPlaceHolderIndex(): number {\r\n        let className = '';\r\n        if (this.parentContext.isUserForm) {\r\n            className = '.k2-rule-item-place-holder-user-task';\r\n        }\r\n        else {\r\n            className = '.k2-rule-item-place-holder-start-event';\r\n        }\r\n        const placeHolder = this._rootElement[0].querySelector(className);\r\n        const uiElements = this._rootElement[0].querySelector('.ui-sortable').querySelectorAll(`${className}, .k2-smartform-rule-item:not(.ui-sortable-helper)`);\r\n        return this.getIndex(placeHolder, uiElements);\r\n    }\r\n\r\n    private getIndex(element: Element, elements: NodeListOf<Element>): number {\r\n        for (let i = 0, len = elements.length; i < len; i++) {\r\n\r\n            if (element === elements[i]) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    private start(evt, ui) {\r\n        this._isDraggingItem = true;\r\n\r\n        //TODO: add index property to UI instead of using getElementIndex function\r\n        this._startDragIndex = sourceCode.k2Designer.utilities.ui.getElementIndex(ui.item[0]);\r\n        this._dragModelItem = this.items[this._startDragIndex] as IGeneralItem;\r\n\r\n        this._nonWorkflowActionItems = this.getNonWorkflowActionItems(this.items);\r\n\r\n        if (this._originalActionIndex === -1) {\r\n            this._originalActionIndex = this._startDragIndex;\r\n            this._originalAction = JSON.parse(JSON.stringify(this._dragModelItem)) as\r\n                IGeneralItem;\r\n        }\r\n    }\r\n\r\n    private stop(evt, ui) {\r\n        this._isDraggingItem = false;\r\n\r\n        this.updateObjectModel(ui.item[0]);\r\n\r\n        if (!sourceCode.k2Designer.utilities.isUndefinedOrNull(this.onRulePlacementChanged)) {\r\n            let changed = false;\r\n            for (let i = 0; i < this.items.length; i++) {\r\n                const item = this.items[i] as IGeneralItem;\r\n                if (item.isWorkflowAction) {\r\n                    changed = item.handlerId !== this._originalAction.handlerId\r\n                        || item.previousActionId !== this._originalAction.previousActionId\r\n                        || item.level !== this._originalAction.level;\r\n                    break;\r\n                }\r\n                else if (item.isOpenTaskCondition) {\r\n                    changed = item.previousHandlerId !== this._originalAction.previousHandlerId;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            this.onRulePlacementChanged.emit(changed);\r\n        }\r\n    }\r\n\r\n    private change(evt, ui) {\r\n        // make sure we reset the anchor position for the docking logic of the\r\n        // workflow action\r\n        this._refreshPosition = true;\r\n\r\n        const insertIndex = this.getPlaceHolderIndex();\r\n        if (insertIndex > -1) {\r\n            const helper = this._rootElement[0].querySelector('.ui-sortable-helper');\r\n            const ruleText = helper.querySelector('.rule-text');\r\n\r\n            if (insertIndex === 0 || insertIndex === (this.items.length - 1)) {\r\n                this._dragModelItem.level = 0;\r\n                this.toggleRuleTextIndent(ruleText, 0);\r\n            }\r\n            else {\r\n                const handled = false;\r\n                const item =\r\n                    <IGeneralItem>this._nonWorkflowActionItems[insertIndex - 1];\r\n\r\n                let level = -1;\r\n                if (item.itemType === GeneralItemTypes.else) {\r\n                    // check if else has conditions\r\n                    if (item.subItems.length > 0) {\r\n                        level = item.subItems[0].level + 1;\r\n                    }\r\n                    else {\r\n                        level = 1;\r\n                    }\r\n                }\r\n                else if (item.itemType === GeneralItemTypes.condition) {\r\n                    level = item.level + 1;\r\n                }\r\n                else if (item.itemType === GeneralItemTypes.forEach) {\r\n                    level = 1;\r\n                }\r\n                else if (item.itemType === GeneralItemTypes.action) {\r\n                    level = item.level;\r\n                }\r\n\r\n                this._dragModelItem.level = level;\r\n                this.toggleRuleTextIndent(ruleText, level);\r\n            }\r\n        }\r\n    }\r\n\r\n    private sort(evt, ui) {\r\n        const scrollContainer = this._rootElement[0].querySelector('.k2-scrollbar-container');\r\n\r\n        const item = this._rootElement[0].querySelector('.workflow-item').parentElement;\r\n\r\n        let top = this.getPixels(item.style.top);\r\n        top += scrollContainer.scrollTop;\r\n\r\n        // prevent from dragging out of control\r\n        if (top < 0) {\r\n            item.style.top = '0px';\r\n        }\r\n        else {\r\n            item.style.top = `${top}px`;\r\n        }\r\n\r\n    }\r\n\r\n    private getNonWorkflowActionItems(items: IGeneralItem[]): IGeneralItem[] {\r\n        const currentItemsList: IGeneralItem[] = [];\r\n\r\n        for (let i = 0; i < items.length; i++) {\r\n            const item = items[i] as IGeneralItem;\r\n\r\n            if (item && !item.isWorkflowAction && !item.isOpenTaskCondition) {\r\n                // add cloned item\r\n                currentItemsList.push({ ...item });\r\n            }\r\n        }\r\n        return currentItemsList;\r\n    }\r\n\r\n    /**\r\n     * Updates the whole object model\r\n     *\r\n     * @param draggedElement\r\n     */\r\n    private updateObjectModel(draggedElement: HTMLElement) {\r\n        const items = this.items;\r\n\r\n        const index = this.getUIWorkflowItemIndex();\r\n\r\n        items.splice(this._startDragIndex, 1);\r\n        items.splice(index, 0, this._dragModelItem);\r\n\r\n        const ruleText = draggedElement.querySelector('.rule-text');\r\n\r\n        let level = 0;\r\n        if (ruleText.classList.contains('indent')) {\r\n            level = 1;\r\n        }\r\n        else if (ruleText.classList.contains('double-indent')) {\r\n            level = 2;\r\n        }\r\n        this._dragModelItem.level = level;\r\n\r\n        this.updateWorkflowItem();\r\n    }\r\n\r\n    private getUIWorkflowItemIndex(): number {\r\n        const uiSortable = this._rootElement[0].querySelector('.ui-sortable');\r\n\r\n        const uiElements = uiSortable.querySelectorAll('.k2-smartform-rule-item ');\r\n        const actionElementParent = uiSortable.querySelector('.workflow-item').parentElement;\r\n\r\n        return this.getIndex(actionElementParent, uiElements);\r\n    }\r\n\r\n    private updateWorkflowItem() {\r\n        if (this.parentContext.isUserForm) {\r\n            this.updateWorkflowCondition();\r\n        }\r\n        else {\r\n            this.updateWorkflowAction();\r\n        }\r\n    }\r\n\r\n    private updateWorkflowCondition() {\r\n        const ruleModelItems = this.items;\r\n        const workflowItem = this.getWorkflowItem();\r\n        const workflowItemIndex = ruleModelItems.indexOf(workflowItem);\r\n\r\n        if (sourceCode.k2Designer.utilities.isUndefinedOrNull(workflowItem)) {\r\n            return;\r\n        }\r\n\r\n        let previousHandler: IGeneralItem = null;\r\n\r\n        if (workflowItemIndex > 0) {\r\n            previousHandler = ruleModelItems[workflowItemIndex - 1] as IGeneralItem;\r\n        }\r\n\r\n        if (previousHandler && previousHandler.subItems.length > 0) {\r\n            const elseBlock: IGeneralItem[] =\r\n                previousHandler.subItems.filter((item) => item.itemType === GeneralItemTypes.else);\r\n\r\n            if (elseBlock.length > 0) {\r\n                previousHandler = elseBlock[0];\r\n            }\r\n        }\r\n\r\n        workflowItem.previousHandlerId = previousHandler ? previousHandler.id : null;\r\n    }\r\n\r\n    // Update the current workflow action\r\n    private updateWorkflowAction() {\r\n        const ruleModelItems = this.items;\r\n\r\n        const workflowAction = this.parentContext.workflowAction;\r\n\r\n        for (let i = 0, len = ruleModelItems.length; i < len; i++) {\r\n\r\n            const item = ruleModelItems[i] as IGeneralItem;\r\n\r\n            if (item.isWorkflowAction) {\r\n\r\n                if (i === this._originalActionIndex\r\n                    && item.level === this._originalAction.level) {\r\n                    // make sure properties are reset\r\n                    item.handlerId = this._originalAction.handlerId;\r\n                    item.previousActionId = this._originalAction.previousActionId;\r\n                    return;\r\n                }\r\n\r\n                // handle edge cases first, first and last item\r\n                if (i === 0) {\r\n                    const nextItem = ruleModelItems[i + 1] as IGeneralItem;\r\n\r\n                    // top-most action, no previous action exists\r\n                    item.previousActionId = null;\r\n\r\n                    if (nextItem.itemType === GeneralItemTypes.action) {\r\n                        item.handlerId = nextItem.handlerId;\r\n                    }\r\n                    else {\r\n                        item.handlerId = null;\r\n                    }\r\n                }\r\n                else if (i === ruleModelItems.length - 1) {\r\n\r\n                    const prevItem = ruleModelItems[i - 1] as IGeneralItem;\r\n\r\n                    item.previousActionId = prevItem.id;\r\n                    if (item.level === prevItem.level) {\r\n                        item.handlerId = prevItem.handlerId;\r\n                    }\r\n                    else {\r\n                        item.handlerId = null;\r\n                    }\r\n                }\r\n                else {\r\n                    // SmartForms will make sure that rules are well formed, so\r\n                    // if the action is at the bottom, there will always be a previous action\r\n                    // available, we just need to know if its on the same level or in different handler\r\n                    const prevItem = ruleModelItems[i - 1] as IGeneralItem;\r\n                    const nextItem = ruleModelItems[i + 1] as IGeneralItem;\r\n\r\n                    if (sourceCode.k2Designer.utilities.isUndefinedOrNull(prevItem.handlerId)) {\r\n                        item.previousActionId = null;\r\n\r\n                        if (item.level === nextItem.level) {\r\n                            item.handlerId = nextItem.handlerId;\r\n                        }\r\n                    }\r\n                    else if (item.level === prevItem.level) {\r\n                        item.handlerId = prevItem.handlerId;\r\n                        item.previousActionId = prevItem.id;\r\n                    }\r\n                    else {\r\n                        if (nextItem.itemType === GeneralItemTypes.action\r\n                            && nextItem.level === item.level) {\r\n                            item.handlerId = nextItem.handlerId;\r\n                        }\r\n                        else {\r\n                            item.handlerId = null;\r\n                            item.previousActionId = null;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                workflowAction.handlerId = item.handlerId;\r\n                workflowAction.previousActionId = item.previousActionId;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private getPixels(unit: string): number {\r\n        if (unit.indexOf('px') > -1) {\r\n            return parseInt(unit.substring(0, unit.length - 2));\r\n        }\r\n        else if (unit.indexOf('%') > -1) {\r\n            return -1;\r\n        }\r\n        return parseInt(unit);\r\n    }\r\n}\r\n\r\nexport interface IPosition {\r\n    x: number;\r\n    y: number;\r\n}\r\n","<div class=\"content-items\" title=\"\" tabindex=\"0\">\r\n    <div class=\"items-container\">\r\n        <div class=\"scrollme\" k2-scrollbar>\r\n            <div id=\"{{id}}\" class=\"items-parent\">\r\n                <div *ngFor=\"let item of Items\" class=\"fadeMeIn k2-smartform-rule-item\">\r\n                    <div [ngClass]=\"{'workflow-item' : item.isWorkflowAction || item.isOpenTaskCondition, 'not-draggable' : !(item.isWorkflowAction || item.isOpenTaskCondition), 'selected': item.selected, 'focus': item.focused, 'non-sortable': item.nonSortable }\">\r\n                        <div class=\"action-or-condition-item\">\r\n                            <div class=\"rule-text\" [ngClass]=\"{ 'indent' : item.level == 1, 'double-indent' : item.level == 2 }\">{{item.title}}</div>\r\n                            <div class=\"drag-handle\" *ngIf=\"item.isWorkflowAction || item.isOpenTaskCondition\">\r\n                                <i class=\"icon icon-set-steps icon-size16 ic-draghandle\"></i>\r\n                            </div>\r\n                        </div>\r\n                        <div *ngFor=\"let subItem of item.subItems\">\r\n                            <div class=\"action-or-condition-item not-draggable workflow-sub-item\">\r\n                                <div class=\"rule-text\" [ngClass]=\"{ 'indent' : subItem.level == 1, 'double-indent' : subItem.level == 2 }\">\r\n                                    {{subItem.title}}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Inject, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { IPopupService } from 'src/types/services/popup/i-popup-service';\r\nimport { IPopupConfiguration } from '../../../../../types/models/popup/i-popup-configuration';\r\nimport { IDataService } from '../../../../../types/services/data/i-data-service';\r\nimport { IEnvironmentService } from '../../../../../types/services/environment/i-environment-service';\r\nimport { IRecentsService } from '../../../../../types/services/recents/i-recents-service';\r\nimport { IListItemIconData } from '../../../../../types/uiComponents/list-item/i-list-item-icon-data';\r\nimport { IHierarchyDialogContext } from '../../../../../types/uiComponents/pluginWizards/IHierarchyDialogContext';\r\nimport { IProcessPluginDefinitionContext } from '../../../../../types/uiComponents/pluginWizards/IProcessPluginDefinitionContext';\r\nimport { DataServiceToken } from '../../../../services/data/data-service-factory';\r\nimport { EnvironmentServiceToken } from '../../../../services/environment/environment-service-factory';\r\nimport { SmartFormsIntegrationService } from '../../../../services/plugins/smart-forms-integration/smart-forms-integration.service';\r\nimport { PopupService } from '../../../../services/popup/popup.service';\r\nimport { RecentsServiceToken } from '../../../../services/recents/recents-service-factory';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { listItemCommands, listItemIcons } from '../../../../shared/constants/list-item';\r\nimport { ChooseControlTypes } from '../../../../shared/enums/choose-control/choose-control-types';\r\nimport { DropDownMenuAlignment } from '../../../../shared/enums/drop-down/drop-down-menu-alignment';\r\nimport IDropDownMenuItem from '../../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { DropdownMenuItemTemplates } from '../../../../shared/enums/drop-down/drop-down-menu-item-templates';\r\nimport { DropDownMenuTrianglePosition } from '../../../../shared/enums/drop-down/drop-down-triangle-position';\r\nimport { IntegrationActionCommands } from '../../../../shared/enums/integration/integration-action-commands';\r\nimport { isUndefinedOrNull, shortUid } from '../../../../shared/utils/general';\r\nimport { DropDownComponent } from '../../../common/drop-down/drop-down.component';\r\nimport { PageComponent } from '../../page/page.component';\r\n\r\ntype IAssetItem = sourceCode.k2Designer.objectModel.core.itemProvider.IAssetItem;\r\n\r\n@Component({\r\n    selector: 'k2-submit-task-action-settings',\r\n    templateUrl: './submit-task-action-settings.component.html',\r\n    styleUrls: ['./submit-task-action-settings.component.less'],\r\n    providers: [{ provide: PageComponent, useExisting: SubmitTaskActionSettingsComponent }]\r\n})\r\nexport class SubmitTaskActionSettingsComponent extends PageComponent implements OnInit, OnDestroy {\r\n    buttonConfig: IPopupButtonsConfig;\r\n\r\n    @Input() public config: IPopupConfiguration;\r\n\r\n    public dropdownMenuItemTemplate: typeof DropdownMenuItemTemplates = DropdownMenuItemTemplates;\r\n    public dropdownMenuAlignment: typeof DropDownMenuAlignment = DropDownMenuAlignment;\r\n    public dropDownMenuTrianglePosition: typeof DropDownMenuTrianglePosition = DropDownMenuTrianglePosition;\r\n    public chooseControlTypes: typeof ChooseControlTypes = ChooseControlTypes;\r\n    public actionCommands: typeof IntegrationActionCommands = IntegrationActionCommands;\r\n    public formIcon: IListItemIconData = listItemIcons.formIcon;\r\n\r\n    /**\r\n     * Unique identifier form the show message radio button\r\n     */\r\n    public showMessageUid: string;\r\n\r\n    /**\r\n     * Unique identifier form the call a rule radio button\r\n     */\r\n    public callARuleUid: string;\r\n\r\n    /**\r\n     * Unique identifier form the navigate radio button\r\n     */\r\n    public navigateToUid: string;\r\n\r\n    /**\r\n     * Form items\r\n     */\r\n    public formsDropdownItems: IDropDownMenuItem[] = [];\r\n\r\n    /**\r\n     * Rules items\r\n     */\r\n    public rulesDropdownItems: IDropDownMenuItem[] = [];\r\n\r\n    /**\r\n     * Recent form items\r\n     */\r\n    public recentForms: IAssetItem[] = [];\r\n\r\n    formLoaded = false;\r\n\r\n    /**\r\n     * This context get send through to the hierarchy control\r\n     */\r\n    private hierarchyDialogContext: IHierarchyDialogContext;\r\n    private formContentSub: Subscription;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        private smartFormsIntegrationService: SmartFormsIntegrationService,\r\n        @Inject(RecentsServiceToken) private recentsService: IRecentsService,\r\n        @Inject(DataServiceToken) private dataService: IDataService,\r\n        @Inject(EnvironmentServiceToken) private environmentService: IEnvironmentService,\r\n        private popupService: PopupService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.showMessageUid = shortUid();\r\n        this.callARuleUid = shortUid();\r\n        this.navigateToUid = shortUid();\r\n\r\n        //Check recent service if service exists\r\n        this.refreshFormsDropDown();\r\n\r\n        this.formContentSub = this.smartFormsIntegrationService\r\n            .getFormContent(this.pluginContext)\r\n            .subscribe(() => {\r\n                this.formRulesLoaded();\r\n                this.formLoaded = true;\r\n            });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.formContentSub?.unsubscribe();\r\n    }\r\n\r\n    beforePageDisplayed() {\r\n    }\r\n\r\n    beforeNavigateNext() {}\r\n\r\n    beforeNavigatePrevious() {}\r\n\r\n    /**\r\n     * Context of the plugin wizard.\r\n     */\r\n    get pluginContext(): IProcessPluginDefinitionContext {\r\n        return this.config.context as IProcessPluginDefinitionContext;\r\n    }\r\n\r\n    getFromResx = (resourceName: string, key: string) => this.resourceService.getFromResx(resourceName, key);\r\n\r\n    /**\r\n     * Method that gets called when the action command selection changed.\r\n     */\r\n    selectionChanged(actionCommand: string, checked: boolean): void {\r\n        this.pluginContext.actionCommand = actionCommand;\r\n        this.smartFormsIntegrationService.determinePages(this.pluginContext);\r\n    }\r\n\r\n    /**\r\n     * Method that gets called when the submit message changed.\r\n     */\r\n    submitMessageChanged(): void {\r\n\r\n        this.smartFormsIntegrationService.determinePages(this.pluginContext);\r\n    }\r\n\r\n    /**\r\n     * Method when item is selected from the dropdown.\r\n     */\r\n    itemSelected(item: IDropDownMenuItem): void {\r\n\r\n        for (let i = 0; i < this.pluginContext.afterSubmitRules.length; i++) {\r\n            if (this.pluginContext.afterSubmitRules[i].key !== item.key) {\r\n                this.pluginContext.afterSubmitRules[i].isSelected = false;\r\n                this.pluginContext.afterSubmitRule = item.metaData as sourceCode.k2Designer.objectModel.smartForms.IRule;\r\n            }\r\n        }\r\n        this.smartFormsIntegrationService.determinePages(this.pluginContext);\r\n\r\n    }\r\n\r\n    /**\r\n     * Method that executes when you toggle between text to type for URL and selection of a form.\r\n     */\r\n    toggleToText(): void {\r\n\r\n        this.pluginContext.toggleToUrl = !this.pluginContext.toggleToUrl;\r\n\r\n        if (this.pluginContext.toggleToUrl) {\r\n            this.pluginContext.navigateUrl.smartFields.clear();\r\n            this.pluginContext.navigateUrl.smartFields.push(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                text: ''\r\n            }));\r\n            (this.pluginContext.navigateUrl as sourceCode.k2Designer.objectModel.core.configuredSmartFields.IExpressionExtended).notifyChange(null);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Method when dropdown is selected.\r\n     */\r\n    formSelected = (item: IDropDownMenuItem) => {\r\n\r\n        if (item) {\r\n            if (item.key === listItemCommands.browse.key) {\r\n                this.openHierarchyControl();\r\n            }\r\n            else {\r\n\r\n                this.pluginContext.navigateUrl = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                    smartFields: [\r\n                        sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartForm.createInstance({\r\n                            id: item.key,\r\n                            name: item.title || item.metaData,\r\n                            title: item.title\r\n                        })\r\n                    ]\r\n                });\r\n                this.smartFormsIntegrationService.determinePages( this.pluginContext);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Method to refresh the items in the navigate to rule dropdown.\r\n     */\r\n    refreshFormsDropDown(): void {\r\n\r\n        this.formsDropdownItems = [];\r\n\r\n        //Refresh recentItems by looking in the recent service for recently added forms.\r\n        if (this.recentsService.hasContext('form')) {\r\n            this.recentForms = this.recentsService.getItems('form');\r\n        }\r\n\r\n        let navToFormRef: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartForm;\r\n        if (this.pluginContext.navigateUrl?.smartFields?.length > 0) {\r\n            navToFormRef = (this.pluginContext.navigateUrl.smartFields[0] as sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartForm);\r\n        }\r\n\r\n        let dropDownItem: IDropDownMenuItem;\r\n        for (let i = 0; i < this.recentForms.length; i++) {\r\n\r\n            dropDownItem = {\r\n                title: this.recentForms[i].title,\r\n                key: this.recentForms[i].key,\r\n                metaData: this.recentForms[i].name,\r\n                innerItemComponent: DropdownMenuItemTemplates.Default,\r\n                icon: 'icon-set-steps ic-form',\r\n                isSelected: navToFormRef?.id === this.recentForms[i].key\r\n            };\r\n\r\n            this.formsDropdownItems.push(dropDownItem);\r\n        }\r\n\r\n        this.formsDropdownItems.push(DropDownComponent.separator);\r\n\r\n        this.formsDropdownItems.push({\r\n            title: this.resourceService.getString('control_PickerControl_Item_Browse'),\r\n            key: listItemCommands.browse.key,\r\n            icon: listItemCommands.browse.icon,\r\n            innerItemComponent: DropdownMenuItemTemplates.Command\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Method to open the hierarchy control.\r\n     */\r\n    private openHierarchyControl(): void {\r\n\r\n        this.hierarchyDialogContext = {\r\n            listItems: [],\r\n            crumbItems: [],\r\n            recentItems: [],\r\n            hideRecents: true,\r\n            onBreadCrumbAdded: (item: IBreadCrumbItem) => {\r\n                this._loadHierarchyItems(item);\r\n            },\r\n            onBreadCrumbClicked: (item: IBreadCrumbItem) => {\r\n                this._loadHierarchyItems(item);\r\n            },\r\n            onSearch(value: string) {\r\n\r\n            },\r\n            recentContextString: 'form'\r\n        } as IHierarchyDialogContext;\r\n\r\n        //load items\r\n        this._loadHierarchyItems();\r\n\r\n        //TODO:\r\n        //uiComponents.popup.hierarchyDialog.showHierarcyDialog method not migrated.\r\n        //This is a shared method that lived in the hierarchDialogController, but was called by\r\n        //callSubWorkflowController, workflowIntegrationController, recentSmartFormsController,\r\n        //submitTaskActionSettings, taskStepSmartFormController, smartWizardSmartObjectPickerControlController,\r\n        //smartObjectReminderAddInPanelController\r\n        //It will need to be added in a common service when one of these components are migrated, not as a specific component's exported function\r\n\r\n        (this.popupService as any).showHierarchyDialog(\r\n            this.resourceService.getString('wizard_workflow_integration_smartforms'),\r\n            false,\r\n            this.hierarchyDialogContext,\r\n            this.formSelectionClosed.bind(this)\r\n        );\r\n    }\r\n\r\n    private formSelectionClosed(item: IAssetItem): void {\r\n        this.recentsService.addItem('form', item, 'key');\r\n        this.formSelected(item);\r\n        this.refreshFormsDropDown();\r\n        this.smartFormsIntegrationService.determinePages(this.pluginContext);\r\n    }\r\n\r\n    private formRulesLoaded = (): void => {\r\n        this.rulesDropdownItems = this.pluginContext.afterSubmitRules;\r\n    };\r\n\r\n    /**\r\n     * Method to load bread crumbs from rest service.\r\n     */\r\n    private _loadHierarchyItems(selectedItem?: IBreadCrumbItem): void {\r\n\r\n        //Check if breadCrumbItem item is null.\r\n        let assetItem: IAssetItem = null;\r\n        if (selectedItem) {\r\n            assetItem = {\r\n                title: '',\r\n                key: selectedItem.key,\r\n                type: selectedItem.assetItem?.type ?? (selectedItem as any).type\r\n            };\r\n        }\r\n\r\n        //Call rest service.\r\n        this.dataService.httpGet('api/smartforms/getcategoryforms',\r\n            {\r\n                host: this.environmentService.currentEnvironment.hostId,\r\n                hashes: [],\r\n                sourceItem: assetItem\r\n            }, this.assetsLoaded.bind(this));\r\n    }\r\n\r\n    /**\r\n     * Callback method when asset items are received from server.\r\n     */\r\n    private assetsLoaded(result: IAssetItem, error: boolean): void {\r\n\r\n        if (!error) {\r\n            const sourceItem = result;\r\n            if (!isUndefinedOrNull(sourceItem)) {\r\n                if (sourceItem.items.length > 0) {\r\n                    //Populate the list items with the source items' child items.\r\n                    this.hierarchyDialogContext.listItems = sourceItem.items;\r\n                }\r\n                else {\r\n                    //Clear items if no children on return item.\r\n                    this.hierarchyDialogContext.listItems = [];\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box\" *ngIf=\"formLoaded\">\r\n        <div class=\"section vertical twenty backdrop\">\r\n            <div class=\"column centered\">\r\n                <i class=\"icon icon-set-illustration ic-startstatechoice\"></i>\r\n            </div>\r\n            <div class=\"column\">\r\n                <div class=\"row heading\">\r\n                    <label>{{getFromResx(\"Wizards\", \"wizard_workflow_integration_smartforms_usertask_submit_action\")|async}}</label>\r\n                </div>\r\n                <div class=\"row description\">\r\n                    <label class=\"subheading\">{{getFromResx(\"Wizards\", \"wizard_workflow_integration_smartforms_usertask_submit_action_desc\")|async}}</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"section vertical twenty scrollme\" k2-scrollbar=\"\">\r\n            <div class=\"column radiobutton\">\r\n                <div class=\"row no-margin\">\r\n                    <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                        [displayText]=\"getFromResx('Wizards', 'wizard_workflow_integration_smartforms_usertask_submit_show_message')|async\"\r\n                                        (checkedChange)=\"selectionChanged(actionCommands.ShowMessage, $event)\"\r\n                                        [checked]=\"pluginContext.actionCommand === actionCommands.ShowMessage\"\r\n                                        [id]=\"showMessageUid\"\r\n                                        name=\"SubmitAction\">\r\n                    </k2-choose-control-v2>\r\n                </div>\r\n            </div>\r\n            <div class=\"column radiobutton-spacing\">\r\n                <div class=\"content\" [ngClass]=\"{'is-disabled': pluginContext.actionCommand !== actionCommands.ShowMessage}\">\r\n                    <k2-text-area rows=\"5\"\r\n                                class=\"k2-control k2-text-area control-background\"\r\n                                [value]=\"pluginContext.submitMessage\"\r\n                                (k2Blur)=\"submitMessageChanged()\"></k2-text-area>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"column radiobutton\">\r\n                <div class=\"row\">\r\n                    <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                        [displayText]=\"getFromResx('Wizards', 'wizard_workflow_integration_smartforms_usertask_call_a_rule')|async\"\r\n                                        (checkedChange)=\"selectionChanged(actionCommands.CallARule, $event)\"\r\n                                        [checked]=\"pluginContext.actionCommand === actionCommands.CallARule\"\r\n                                        [id]=\"callARuleUid\"\r\n                                        name=\"SubmitAction\">\r\n                    </k2-choose-control-v2>\r\n                </div>\r\n            </div>\r\n            <div class=\"column radiobutton-spacing\">\r\n                <div class=\"content\" [ngClass]=\"{'is-disabled': pluginContext.actionCommand !== actionCommands.CallARule}\">\r\n                    <k2-drop-down class=\"k2-dropdown-parent\"\r\n                                [menuItems]=\"rulesDropdownItems\"\r\n                                [menuAlignment]=\"dropdownMenuAlignment.leftEdge\"\r\n                                (onItemSelected)=\"itemSelected($event)\">\r\n                        <div class=\"k2-dd-flexChild k2-dd-rowParent k2-dd-container k2-control control-background k2-dropdown-div icon-container\">\r\n                            <div class=\"k2-dd-flexChild k2-dd-text\">{{pluginContext.afterSubmitRule?.displayName}}</div>\r\n                            <div class=\"k2-dd-flexChild k2-dd-dd-sprite\">\r\n                                <span class=\"icon icon-set-dropdownset icon-size16 ic-dropdown\"></span>\r\n                            </div>\r\n                        </div>\r\n                    </k2-drop-down>\r\n                </div>\r\n            </div>\r\n            <div class=\"column radiobutton\">\r\n                <div class=\"row\">\r\n                    <k2-choose-control-v2 [type]=\"chooseControlTypes.radiobutton\"\r\n                                        [displayText]=\"getFromResx('Wizards', 'wizard_workflow_integration_smartforms_usertask_navigate_to')|async\"\r\n                                        (checkedChange)=\"selectionChanged(actionCommands.NavigateTo, $event)\"\r\n                                        [checked]=\"pluginContext.actionCommand === actionCommands.NavigateTo\"\r\n                                        [id]=\"navigateToUid\"\r\n                                        name=\"SubmitAction\">\r\n                    </k2-choose-control-v2>\r\n                </div>\r\n            </div>\r\n            <div class=\"column radiobutton-spacing\">\r\n                <div class=\"content\" [ngClass]=\"{'is-disabled': pluginContext.actionCommand !== actionCommands.NavigateTo}\">\r\n                    <k2-list-item [dropDownMenuItemTemplate]=\"dropdownMenuItemTemplate.Recipient\"\r\n                                [leftIconData]=\"formIcon\"\r\n                                [shouldShowDropDown]=\"true\"\r\n                                [menuItems]=\"formsDropdownItems\"\r\n                                (textBoxButtonClicked)=\"refreshFormsDropDown()\"\r\n                                [listItemModel]=\"pluginContext.navigateUrl\"\r\n                                [shouldShowToggleTextbox]=\"true\"\r\n                                (toggleTextBoxButtonClicked)=\"toggleToText()\"\r\n                                [shouldAllowDrop]=\"pluginContext.toggleToUrl\"\r\n                                [isEditable]=\"pluginContext.toggleToUrl\"\r\n                                [isSortable]=\"false\"\r\n                                [shouldHideBrowseButton]=\"true\"\r\n                                (dropDownItemSelected)=\"formSelected($event)\">\r\n                    </k2-list-item>\r\n                    <div class=\"fourty\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>","import { Component, Inject, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { PopupState } from 'src/app/shared/enums/plugin-wizard/popup-state';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { IPopupConfiguration } from '../../../../../types/models/popup/i-popup-configuration';\r\nimport { IPopupService } from '../../../../../types/services/popup/i-popup-service';\r\nimport { IProcessPluginDefinitionContext } from '../../../../../types/uiComponents/pluginWizards/IProcessPluginDefinitionContext';\r\nimport { EventNotifierService } from '../../../../services/event-notifier/event-notifier.service';\r\nimport { SmartFormsIntegrationService } from '../../../../services/plugins/smart-forms-integration/smart-forms-integration.service';\r\nimport { PopupService } from '../../../../services/popup/popup.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { popup } from '../../../../shared/constants/wizard-popup';\r\nimport { PageComponent } from '../../page/page.component';\r\n\r\n@Component({\r\n    selector: 'k2-summary-result',\r\n    templateUrl: './summary-result.component.html',\r\n    styleUrls: ['./summary-result.component.less'],\r\n    providers: [{ provide: PageComponent, useExisting: SummaryResultComponent }]\r\n})\r\nexport class SummaryResultComponent extends PageComponent implements OnInit, OnDestroy {\r\n    buttonConfig: IPopupButtonsConfig;\r\n\r\n    @Input() public config: IPopupConfiguration;\r\n\r\n    /**\r\n     * Heading property used to bind on form.\r\n     */\r\n    @Input() public updateFormHeading: string;\r\n\r\n    /**\r\n     * Context of the plugin wizard.\r\n     */\r\n    get pluginContext(): IProcessPluginDefinitionContext {\r\n        return this.config?.context as IProcessPluginDefinitionContext;\r\n    };\r\n\r\n    formLoaded = false;\r\n\r\n    private _closingEventSubscription: Subscription;\r\n    private _getFormSub: Subscription;\r\n\r\n    constructor(private popupService: PopupService,\r\n        protected resourceService: ResourceService,\r\n        private eventService: EventNotifierService,\r\n        private _smartFormsIntegrationService: SmartFormsIntegrationService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.updateFormHeading = this.resourceService.getString('wizard_workflow_integration_update_form').replace('{0}',\r\n            this.pluginContext.form.title);\r\n\r\n        //Subscribes to an event emited by the parent PopupHost Component on closing\r\n        //TODO: With User Story 935966: <Angular> Convert PopupHostController to a Component using Angular Latest\r\n        //emit event popup.events.onClosing when clicking the popup close button\r\n        this._closingEventSubscription = this.eventService.subscribe(popup.events.onClosing, this.onClosing);\r\n\r\n        this._getFormSub = this._smartFormsIntegrationService\r\n            .getFormContent(this.pluginContext)\r\n            .subscribe(() => {\r\n                this.formLoaded = true;\r\n            });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this._closingEventSubscription.unsubscribe();\r\n        this._getFormSub.unsubscribe();\r\n    }\r\n\r\n    getFromResx = (key: string) => this.resourceService.getFromResx('Wizards', key);\r\n\r\n    beforePageDisplayed() {\r\n        this.notifyPageStateChanged(PopupState.Busy);\r\n        this._smartFormsIntegrationService\r\n            .updateForm(this.pluginContext)\r\n            .then(() => {\r\n                this._smartFormsIntegrationService\r\n                    .createItemReferencesAndPlugins(this.pluginContext);\r\n                this.pluginContext.updatedFormSuccesfully = true;\r\n\r\n                // Copied from the SF integration service, but I don't want to mess with scopes now, so it stays.\r\n                this._smartFormsIntegrationService.clearCache(); // this should be removed once the popuphost is migrated. ensure that the service scope is on the host\r\n\r\n                this.notifyPageStateChanged(PopupState.Normal);\r\n            })\r\n            .catch(error => {\r\n                this.notifyPageStateChanged(PopupState.Error);\r\n\r\n                if(error){\r\n                    let errorResult;\r\n                    try {\r\n                        errorResult = JSON.parse(error);\r\n                    } catch {\r\n                        console.error('Error trying to parse the error result: ', error);\r\n\r\n                    }\r\n                    if (errorResult?.responseJSON.InnerException) {\r\n                        this.pluginContext.errorMessage = errorResult.responseJSON.InnerException.ExceptionMessage;\r\n                    } else {\r\n                        this.pluginContext.errorMessage = errorResult?.responseJSON.Message || '';\r\n                    }\r\n                } else {\r\n                    this.pluginContext.errorMessage = this.getString('smartforms_integration_summary_error');\r\n                }\r\n\r\n                this.pluginContext.updatedFormSuccesfully = false;\r\n                this.pluginContext.showSuccessSummary = false;\r\n\r\n            })\r\n            .finally(()=>{\r\n                this.pluginContext.formUpdateDone = true;\r\n            });\r\n    }\r\n\r\n    beforeNavigateNext() {}\r\n    beforeNavigatePrevious() {}\r\n\r\n    /**\r\n     * Method to create item references if form update failed.\r\n     */\r\n    public createItemReferences(): void {\r\n        this._smartFormsIntegrationService.createItemReferencesAndPlugins(this.pluginContext);\r\n        this.popupService.hide('', this.config);\r\n    }\r\n\r\n    /**\r\n     * Called when dialog closes.\r\n     */\r\n    private onClosing = (key: string, result: string): void => {\r\n        //TODO: Investigate if this is really necessary\r\n        //this._smartFormsIntegrationService.resetPageIndicators(this.pluginContext);\r\n        this._smartFormsIntegrationService.clearCache();\r\n    };\r\n}\r\n","<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box centered\" *ngIf=\"formLoaded\">\r\n        <div class=\"section vertical centered seventy\" *ngIf=\"!pluginContext.showSuccessSummary\">\r\n\r\n            <div class=\"fourty\"></div>\r\n            <div class=\"column fourty\">\r\n                <div class=\"row vertical heading\">\r\n                    <img alt=\"\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY3QzczMEQyMjhEMDExRTZCN0MzRUYyRjE2RDMwNEY1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY3QzczMEQzMjhEMDExRTZCN0MzRUYyRjE2RDMwNEY1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjdDNzMwRDAyOEQwMTFFNkI3QzNFRjJGMTZEMzA0RjUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjdDNzMwRDEyOEQwMTFFNkI3QzNFRjJGMTZEMzA0RjUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6sw+hkAAALe0lEQVR42uxb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\" />\r\n                </div>\r\n                <div class=\"row vertical heading twentyeight\">\r\n                    {{getFromResx('smartforms_integration_summary_oops') | async}}\r\n                </div>\r\n            </div>\r\n            <div class=\"column\">\r\n                <div class=\"row vertical heading\">\r\n                    <div class=\"error\">{{getFromResx('smartforms_integration_summary_error') | async}}</div>\r\n                </div>\r\n                <div class=\"row vertical error heading\">\r\n                    {{pluginContext.errorMessage}}\r\n                </div>\r\n                <div class=\"twenty\"></div>\r\n                <div class=\"row vertical\">\r\n                    <div (click)=\"pluginContext.helper.updateForm()\" class=\"modal-button primary large-button\">\r\n                        <span class=\"left-icon\"><i class=\"icon icon-set-toolbar icon-size16 ic-refreshwhite\"></i></span><span class=\"right-text\">{{getFromResx('smartforms_integration_summary_retry') | async}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row vertical\">\r\n                    <div *ngIf=\"pluginContext.itemReferences && pluginContext.itemReferences.length > 0\" (click)=\"createItemReferences()\" class=\"button tertiary large-button\">\r\n                        <span><i class=\"icon icon-set-steps icon-size16 ic-itemreferenceevent\"></i></span><span class=\"right-text\">{{getFromResx('smartforms_integration_summary_just_create_ref') | async}}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"section vertical centered seventy\" *ngIf=\"pluginContext.showSuccessSummary\">\r\n            <div class=\"fourty\"></div>\r\n            <div class=\"column fourty\">\r\n                <div class=\"row vertical heading\">\r\n                    <i *ngIf=\"!pluginContext.formUpdateDone\" class=\"icon icon-set-steps icon-size64 ic-form\"></i>\r\n                    <i *ngIf=\"pluginContext.updatedFormSuccesfully && pluginContext.formUpdateDone\" class=\"icon icon-set-wizard icon-size64 ic-success\"></i>\r\n                </div>\r\n                <div class=\"row vertical heading twentyeight\">\r\n                    <div>{{(pluginContext.formUpdateDone ? getFromResx('smartforms_integration_summary_success') : getFromResx('smartforms_integration_summary_processing')) | async}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"column\">\r\n                <div class=\"row vertical\" *ngIf=\"!pluginContext.configureRuleLater\">\r\n                    <div class=\"content-row icon-list update\">\r\n                        <div class=\"icon-on-left\">\r\n                            <i class=\"icon icon-set-steps icon-size32 ic-form\"></i>\r\n                        </div>\r\n                        <div class=\"update-container\">\r\n                            <div class=\"update-heading\" [innerHtml]=\"updateFormHeading\"></div>\r\n                            <div class=\"update-description\">{{getFromResx('smartforms_integration_summary_make_changes') | async}}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"content-row icon-list sub\" *ngIf=\"pluginContext.checkOutForm\">\r\n                        <div class=\"icon-on-left small-icon\">\r\n                            <i class=\"icon icon-size16\" [ngClass]=\"{ 'icon-set-steps ic-checkout': !pluginContext.formUpdateDone, 'icon-set-wizard ic-success': pluginContext.formUpdateDone }\"></i>\r\n                        </div>\r\n                        <div>{{getFromResx('smartforms_integration_summary_check_out_form') | async}}</div>\r\n                    </div>\r\n                    <div class=\"content-row icon-list sub\" *ngIf=\"pluginContext.addActionToRule || pluginContext.isUserForm\">\r\n                        <div class=\"icon-on-left small-icon\">\r\n                            <i class=\"icon icon-size16\" [ngClass]=\"{ 'icon-set-toolbox ic-rules': !pluginContext.formUpdateDone, 'icon-set-wizard ic-success': pluginContext.formUpdateDone }\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <span>\r\n                                <span>{{(pluginContext.editMode ? getFromResx('smartforms_integration_summary_modify') : getFromResx('smartforms_integration_summary_add')) | async}}&nbsp;</span>\r\n                                <b>{{(pluginContext.isUserForm ? getFromResx('smartforms_integration_summary_open_worklist') : getFromResx('smartforms_integration_summary_start_workflow')) | async}}</b>&nbsp;\r\n                                <span>{{(pluginContext.foundWorkflowActionOnForm ? getFromResx('smartforms_integration_summary_action_on_the') : getFromResx('smartforms_integration_summary_action_to_the')) | async}}&nbsp;</span>\r\n                                <b>{{pluginContext.selectedRule?.title}}</b> {{getFromResx('smartforms_integration_summary_rule') | async}}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"content-row icon-list sub\" *ngIf=\"pluginContext.createNewState\">\r\n                        <div class=\"icon-on-left small-icon\">\r\n                            <i class=\"icon icon-size16\" [ngClass]=\"{ 'icon-set-steps ic-callsubworkflow': !pluginContext.formUpdateDone, 'icon-set-wizard ic-success': pluginContext.formUpdateDone }\"></i>\r\n                        </div>\r\n                        <div>{{getFromResx('smartforms_integration_summary_add') | async}}&nbsp;<strong>{{pluginContext.newStateName}}</strong>&nbsp;{{getFromResx('smartforms_integration_summary_state_to_the_form') | async}}</div>\r\n                    </div>\r\n                    <div class=\"twenty\"></div>\r\n                </div>\r\n\r\n                <div class=\"row vertical\" *ngIf=\"pluginContext.addItemReferences\">\r\n                    <div class=\"content-row icon-list update\">\r\n                        <div class=\"icon-on-left\">\r\n                            <i class=\"icon icon-set-steps icon-size32 ic-itemreferenceevent\"></i>\r\n                        </div>\r\n                        <div class=\"update-container\">\r\n                            <div class=\"update-heading\">{{getFromResx('wizard_workflow_integration_sharePoint_create_references') | async}}</div>\r\n                            <div class=\"update-description\">{{getFromResx('wizard_workflow_integration_smartforms_create_references') | async}}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"content-row icon-list sub\">\r\n                        <div class=\"icon-on-left small-icon\">\r\n                            <i class=\"icon icon-set-wizard icon-size16\" [ngClass]=\"{ 'ic-reference': !pluginContext.formUpdateDone, 'ic-success': pluginContext.formUpdateDone }\"></i>\r\n                        </div>\r\n                        <div>{{getFromResx('smartforms_integration_summary_create') | async}}&nbsp;<strong>{{pluginContext.newReferenceCount}}</strong>&nbsp;{{getFromResx('smartforms_integration_summary_item_reference_field') | async}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>","import { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { PopupState } from 'src/app/shared/enums/plugin-wizard/popup-state';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { IContextWizardPopupConfiguration } from '../../../../../types/uiComponents/pluginWizards/i-context-wizard-popup-configuration';\r\nimport { IProcessPluginDefinitionContext } from '../../../../../types/uiComponents/pluginWizards/IProcessPluginDefinitionContext';\r\nimport { SmartFormsIntegrationService } from '../../../../services/plugins/smart-forms-integration/smart-forms-integration.service';\r\nimport { ResourceService } from '../../../../services/resource/resource.service';\r\nimport { PageComponent } from '../../page/page.component';\r\n\r\n@Component({\r\n    selector: 'k2-smart-forms-summary',\r\n    templateUrl: './smart-forms-summary.component.html',\r\n    styleUrls: ['./smart-forms-summary.component.less'],\r\n    providers: [{ provide: PageComponent, useExisting: SmartFormsSummaryComponent }]\r\n})\r\nexport class SmartFormsSummaryComponent extends PageComponent implements OnInit, OnDestroy {\r\n\r\n    @Input() public config: IContextWizardPopupConfiguration;\r\n\r\n    /**\r\n     * Heading for form update.\r\n     */\r\n    updateFormHeading: string;\r\n\r\n    /**\r\n     * Context of the plugin wizard.\r\n     */\r\n    get pluginContext(): IProcessPluginDefinitionContext {\r\n        return this.config?.context as IProcessPluginDefinitionContext;\r\n    };\r\n\r\n    formLoaded = false;\r\n\r\n    buttonConfig: IPopupButtonsConfig = {\r\n        next: {\r\n            buttonText: 'workflow_contextPopup_saveAndFinish'\r\n        }\r\n    };\r\n\r\n    private _getFormSub: Subscription;\r\n\r\n    constructor(protected resourceService: ResourceService,\r\n        private _smartFormsIntegrationService: SmartFormsIntegrationService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.updateFormHeading = this.resourceService.getString('wizard_workflow_integration_update_form').replace('{0}',\r\n            (<sourceCode.k2Designer.uiComponents.configPanel.plugins.pluginWizards.settings.processSettings.IProcessPluginDefinitionContext>this.config.context).form.title);\r\n        this._getFormSub = this._smartFormsIntegrationService\r\n            .getFormContent(this.pluginContext)\r\n            .subscribe(() => {\r\n                this.formLoaded = true;\r\n            });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this._getFormSub.unsubscribe();\r\n    }\r\n\r\n    beforePageDisplayed() {\r\n    }\r\n\r\n    beforeNavigateNext() {\r\n    }\r\n\r\n    beforeNavigatePrevious() {\r\n\r\n    }\r\n}\r\n","<ng-template #pageTemplate>\r\n    <div class=\"k2-wizard-box centered\" *ngIf=\"formLoaded\">\r\n        <div class=\"section vertical centered seventy\">\r\n            <div class=\"fourty\"></div>\r\n            <div class=\"column fourty\">\r\n                <div class=\"row vertical heading\">\r\n                    <i class=\"icon icon-set-steps icon-size64 ic-form\"></i>\r\n                </div>\r\n                <div class=\"row vertical heading twentyeight\">\r\n                    {{getFromResx('Wizards', 'smartforms_integration_summary_heading')|async}}\r\n                </div>\r\n            </div>\r\n            <div class=\"column\" *ngIf=\"config\">\r\n                <div class=\"row vertical\" *ngIf=\"!config.context.configureRuleLater\">\r\n                    <div class=\"content-row icon-list update\">\r\n                        <div class=\"icon-on-left\">\r\n                            <i class=\"icon icon-set-steps icon-size32 ic-form\"></i>\r\n                        </div>\r\n                        <div class=\"update-container\">\r\n                            <div class=\"update-heading\" [innerHtml]=\"updateFormHeading\"></div>\r\n                            <div class=\"update-description\">{{getFromResx('Wizards', 'smartforms_integration_summary_make_changes')|async}}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"content-row icon-list sub\" *ngIf=\"config.context.checkOutForm\">\r\n                        <div class=\"icon-on-left small-icon\">\r\n                            <i class=\"icon icon-set-steps icon-size16 ic-checkout\"></i>\r\n                        </div>\r\n                        <div>{{getFromResx('Wizards', 'smartforms_integration_summary_check_out_form')|async}}</div>\r\n                    </div>\r\n                    <div class=\"content-row icon-list sub\" *ngIf=\"config.context.addActionToRule || config.context.isUserForm\">\r\n                        <div class=\"icon-on-left small-icon\">\r\n                            <i class=\"icon icon-set-toolbox icon-size16 ic-rules\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <ng-container *ngIf=\"config.context.editMode\">{{getFromResx('Wizards', 'smartforms_integration_summary_modify')|async}} &nbsp;</ng-container>\r\n                            <ng-container *ngIf=\"!config.context.editMode\">{{getFromResx('Wizards', 'smartforms_integration_summary_add')|async}} &nbsp;</ng-container>\r\n                            <ng-container *ngIf=\"!config.context.isUserForm\"><b>{{getFromResx('Wizards', 'smartforms_integration_summary_start_workflow')|async}} &nbsp;</b></ng-container>\r\n                            <ng-container *ngIf=\"config.context.isUserForm\"><b>{{getFromResx('Wizards', 'smartforms_integration_summary_open_worklist')|async}} &nbsp;</b></ng-container>\r\n                            <ng-container *ngIf=\"config.context.foundWorkflowActionOnForm\">{{getFromResx('Wizards', 'smartforms_integration_summary_action_on_the')|async}} &nbsp;</ng-container>\r\n                            <ng-container *ngIf=\"!config.context.foundWorkflowActionOnForm\">{{getFromResx('Wizards', 'smartforms_integration_summary_action_to_the')|async}} &nbsp;</ng-container>\r\n                            <b>{{config.context.selectedRule?.title}}</b> &nbsp; {{getFromResx('Wizards', 'smartforms_integration_summary_rule')|async}}\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"content-row icon-list sub\" *ngIf=\"config.context.createNewState\">\r\n                        <div class=\"icon-on-left small-icon\">\r\n                            <i class=\"icon icon-set-steps icon-size16 ic-callsubworkflow\"></i>\r\n                        </div>\r\n                        <div>{{getFromResx('Wizards', 'smartforms_integration_summary_add')|async}}&nbsp;<strong>{{config.context.newStateName}}</strong>&nbsp;{{getFromResx('Wizards', 'smartforms_integration_summary_state_to_the_form')|async}}</div>\r\n                    </div>\r\n                    <div class=\"twenty\"></div>\r\n                </div>\r\n\r\n                <div class=\"row vertical\" *ngIf=\"config.context.addItemReferences\">\r\n                    <div class=\"content-row icon-list update\">\r\n                        <div class=\"icon-on-left\">\r\n                            <i class=\"icon icon-set-steps icon-size32 ic-itemreferenceevent\"></i>\r\n                        </div>\r\n                        <div class=\"update-container\">\r\n                            <div class=\"update-heading\">{{getFromResx('Wizards', 'wizard_workflow_integration_sharePoint_create_references')|async}}</div>\r\n                            <div class=\"update-description\">{{getFromResx('Wizards', 'wizard_workflow_integration_smartforms_create_references')|async}}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"content-row icon-list sub\">\r\n                        <div class=\"icon-on-left small-icon\">\r\n                            <i class=\"icon icon-set-wizard icon-size16 ic-reference\"></i>\r\n                        </div>\r\n                        <div>{{getFromResx('Wizards', 'smartforms_integration_summary_create')|async}}&nbsp;<strong>{{config.context.newReferenceCount}}</strong>&nbsp;{{getFromResx('Wizards', 'smartforms_integration_summary_item_reference_field')|async}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n","import { ThrowStmt } from '@angular/compiler';\r\nimport { OnDestroy } from '@angular/core';\r\nimport { AfterContentInit, Component, ContentChildren, EventEmitter, Input, OnInit, Output, QueryList } from '@angular/core';\r\nimport { last, Subscription } from 'rxjs';\r\nimport { ResourceService } from 'src/app/services/resource/resource.service';\r\nimport { PopupState } from 'src/app/shared/enums/plugin-wizard/popup-state';\r\nimport { IButtonConfig } from 'src/types/config/i-button-config';\r\nimport { IPopupButtonsConfig } from 'src/types/config/i-popup-buttons-config';\r\nimport { BaseResourceComponent } from '../../base-resource/base-resource.component';\r\nimport { PageComponent } from '../page/page.component';\r\n\r\n@Component({\r\n    selector: 'k2-wizard-popup-host',\r\n    templateUrl: './wizard-popup-host.component.html',\r\n    styleUrls: ['./wizard-popup-host.component.less']\r\n})\r\nexport class WizardPopupHostComponent extends BaseResourceComponent implements OnInit, OnDestroy, AfterContentInit {\r\n\r\n    @ContentChildren(PageComponent) pages: QueryList<PageComponent>;\r\n\r\n    /** Heading of the popup window */\r\n    @Input() heading: string;\r\n\r\n    /** whether or not to display a heading icon */\r\n    @Input() headingIcon: string;\r\n\r\n    /** When this is emitted, the caller should close the dialog by setting the ngIf to false. */\r\n    @Output() closeDialogReason: EventEmitter<PopupState> = new EventEmitter<PopupState>();\r\n\r\n    /** Custom class to style the popup body. */\r\n    @Input() customClass: string;\r\n\r\n    @Input() height = 638;\r\n    @Input() width = 530;\r\n    @Input() bodyHeight = 530;\r\n    @Input() bodyWidth = 530;\r\n\r\n    @Input() isPopupWizardActive = false;\r\n    @Output() isPopupWizardActiveChange = new EventEmitter<boolean>();\r\n\r\n    /** Hide the current and number of page indicators? */\r\n    @Input() isPageIndicatorsHidden = false;\r\n\r\n    /** Whether or not to display the info popup.\r\n     * TODO: (LATER) NOT CURRENTLY IMPLEMENTED\r\n     * */\r\n    @Input() isInfoPopupHidden = true;\r\n\r\n    private pagesGenerator: Generator;\r\n    private numberOfPages: number;\r\n    private currentIndex: number;\r\n    private defaultButtonConfig: IButtonConfig = {\r\n        buttonText: null,\r\n        classOverride: null,\r\n        isDisabled: false,\r\n        isVisible: false\r\n    };\r\n    private pageSubs: Subscription;\r\n\r\n    currentPage: PageComponent;\r\n\r\n    buttonConfig: IPopupButtonsConfig = {\r\n        previous: {},\r\n        next: {},\r\n        finish: {}\r\n    };\r\n\r\n    popupState: typeof PopupState = PopupState;\r\n    currentPopupState: PopupState = PopupState.Normal;\r\n\r\n    constructor(protected resourceService: ResourceService) {\r\n        super(resourceService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.pageSubs?.unsubscribe();\r\n    }\r\n\r\n    ngAfterContentInit(): void {\r\n        this.numberOfPages = this.pages.length;\r\n\r\n        this.pagesGenerator = this.getPageGenerator(this.pages);\r\n\r\n        this.pages.changes.subscribe((x) => {\r\n            // Recalculate the index, in case the number of pages or their positions changed\r\n            this.currentIndex = this\r\n                .pages\r\n                .toArray()\r\n                .indexOf(this.currentPage);\r\n\r\n            this.numberOfPages = this.pages.length;\r\n            this.configureButtons();\r\n            this.configurePageIndicators();\r\n            this.redoSubscriptions(); // new pages need to be subscribed to and old unsubsribed\r\n        });\r\n\r\n        this.subscribeToPages();\r\n\r\n        // setTimeout to combat ExpressionChangedAfterItHasBeenCheckedError errors.\r\n        // We need to wait until afterContentInit, because that is when the pages are populated,\r\n        // but if we make changes to the view after this, then we get the ExpressionChangedAfterItHasBeenCheckedError error. Unless we wait longer...\r\n        setTimeout(() => {\r\n            this.currentPage = this.pagesGenerator.next().value;\r\n        });\r\n    }\r\n\r\n    private redoSubscriptions() {\r\n        this.pageSubs?.unsubscribe();\r\n        this.subscribeToPages();\r\n    }\r\n\r\n    private subscribeToPages() {\r\n        this.pageSubs = new Subscription();\r\n        this.pages.forEach(p => {\r\n            this.pageSubs.add(p.onPageConfigChanged.subscribe(this.configureButtons));\r\n            this.pageSubs.add(p.onPageStateChanged.subscribe(this.updateState));\r\n        });\r\n    }\r\n\r\n    updateState = (state?: PopupState) => {\r\n        this.currentPopupState = state ?? this.currentPage.state;\r\n\r\n        if (this.currentPopupState === PopupState.Cancelled) this.closeDialogWindow();\r\n    };\r\n\r\n    next() {\r\n        const generatorData = this.pagesGenerator.next();\r\n        this.currentPage = generatorData.value;\r\n    }\r\n\r\n    previous() {\r\n        if (this.currentIndex === 0) {\r\n            // If the previous button is visible on the start page, it will always be used as close.\r\n            this.closeDialogWindow();\r\n        } else {\r\n            const generatorData = this.pagesGenerator.next(true);\r\n\r\n            this.currentPage = generatorData.value;\r\n        }\r\n    }\r\n\r\n    configurePageIndicators() {\r\n        const lastPage = this.pages.get(this.numberOfPages - 1);\r\n\r\n        if (lastPage) {\r\n            lastPage.isHiddenPage = lastPage.isHiddenPage ?? true;\r\n        }\r\n\r\n        // For the last page, default to hidden if not explicitly false.\r\n        if (this.currentIndex === this.numberOfPages - 1) {\r\n            this.isPageIndicatorsHidden = this.currentPage.isAllPageIndicatorsHidden !== false;\r\n        } else { // For the rest, default to false if not true\r\n            this.isPageIndicatorsHidden = this.currentPage.isAllPageIndicatorsHidden === true;\r\n        }\r\n\r\n    }\r\n\r\n    private *getPageGenerator(pages: QueryList<PageComponent>) {\r\n        for (this.currentIndex = 0; this.currentIndex < pages.length; this.currentIndex++) {\r\n\r\n            this.currentPage = pages.get(this.currentIndex);\r\n\r\n            this.currentPage.beforePageDisplayed();\r\n            this.configureButtons();\r\n            this.updateState();\r\n            this.configurePageIndicators();\r\n\r\n            const goBack: boolean = yield this.currentPage ?? false;\r\n\r\n            // If the pages changed since the last page action,\r\n            // the current index would have been updated in the pages QueryList change event.\r\n            // See the ngAfterContentInit for that code.\r\n\r\n            if (goBack) {\r\n                this.currentIndex -= 2;\r\n                this.currentPage.beforeNavigatePrevious();\r\n            } else {\r\n                this.currentPage.beforeNavigateNext();\r\n            }\r\n        }\r\n    }\r\n\r\n    private configureButtons = () => {\r\n\r\n        this.buttonConfig.next = { ...this.buttonConfig.next, ...this.defaultButtonConfig };\r\n        this.buttonConfig.previous = { ...this.buttonConfig.previous, ...this.defaultButtonConfig };\r\n        this.buttonConfig.finish = { ...this.buttonConfig.finish, ...this.defaultButtonConfig };\r\n\r\n        // First cofnigure the default, then override with the specific page config\r\n        switch (this.currentIndex) {\r\n            case 0:\r\n                this.buttonConfig.previous.isVisible = false;\r\n                this.buttonConfig.next.isVisible = true;\r\n                this.buttonConfig.finish.isVisible = false;\r\n                break;\r\n            case this.numberOfPages - 1:\r\n                this.buttonConfig.previous.isVisible = false;\r\n                this.buttonConfig.next.isVisible = false;\r\n                this.buttonConfig.finish.isVisible = true;\r\n                break;\r\n            default:\r\n                this.buttonConfig.previous.isVisible = true;\r\n                this.buttonConfig.next.isVisible = true;\r\n                this.buttonConfig.finish.isVisible = false;\r\n        }\r\n\r\n        this.buttonConfig.next = { ...this.buttonConfig.next, ...this.currentPage.buttonConfig?.next };\r\n        this.buttonConfig.previous = { ...this.buttonConfig.previous, ...this.currentPage.buttonConfig?.previous };\r\n        this.buttonConfig.finish = { ...this.buttonConfig.finish, ...this.currentPage.buttonConfig?.finish };\r\n    };\r\n\r\n    closeDialogWindow() {\r\n        this.closeDialogReason.emit(PopupState.Cancelled);\r\n        this.currentPage?.beforeNavigatePrevious();\r\n        this.close();\r\n    }\r\n\r\n    finish() {\r\n        this.closeDialogReason.emit(PopupState.Completed);\r\n        this.close();\r\n    }\r\n\r\n    private close() {\r\n        this.isPopupWizardActive = false;\r\n        this.isPopupWizardActiveChange.emit(false);\r\n    }\r\n\r\n}\r\n","<div class=\"popup-wrapper\">\r\n    <div class=\"k2-modal show\">\r\n        <div class=\"k2-dialog no-overlay\">\r\n            <div class=\"modal-window {{customClass}}\">\r\n                <k2-spinner classNames=\"k2-wizard-box\" [inline]=\"false\" [overlay]=\"true\" [visible]=\"currentPopupState === popupState.Busy\"></k2-spinner>\r\n                <div class=\"modal-top\">\r\n                    <div class=\"wrapper\">\r\n                        <div class=\"title\">\r\n                            <svg *ngIf=\"headingIcon\" class=\"icon icon-size24\">\r\n                                <use xlink:href=\"\" [attr.href]=\"'App_Themes/Designer/_svg/steps_low.svg#'+headingIcon\" />\r\n                            </svg>\r\n                            <label>{{heading}}</label>\r\n                        </div>\r\n                        <div class=\"close\" (click)=\"closeDialogWindow()\">\r\n                            <i class=\"icon icon-set-steps icon-size16 ic-headerclose\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div k2-scrollbar class=\"modal-article\" [ngClass]=\"customClass\" [style]=\"'height: ' + bodyHeight + 'px; width: ' + bodyWidth + 'px'\" >\r\n                    <div class=\"fademein article-body\">\r\n                        <ng-container *ngTemplateOutlet=\"currentPage?.template;\" ></ng-container>\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-bottom\">\r\n                    <div class=\"wrapper\">\r\n                        <div class=\"info hide\">\r\n                            <i class=\"icon icon-set-buttons icon-size24 ic-help_button\"></i>\r\n                        </div>\r\n                        <div class=\"buttons\">\r\n                            <div class=\"modal-button alternate\"\r\n                                *ngIf=\"buttonConfig.previous.isVisible\"\r\n                                (click)=\"previous($event)\"\r\n                                [ngClass]=\"buttonConfig.previous.classOverride\"\r\n                                [class.isDisabled]=\"buttonConfig.previous.isDisabled\" \r\n                                [attr.disabled]=\"buttonConfig.previous.isDisabled\">\r\n                                    {{getString(buttonConfig.previous.buttonText || 'workflow_contextPopup_prevButton')}}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"indicators\">\r\n                            <ng-container *ngIf=\"!isPageIndicatorsHidden\">\r\n                                <ng-container *ngFor=\"let page of pages\">\r\n                                    <div *ngIf=\"!page.isHiddenPage\"\r\n                                        class=\"page-indicator icon icon-set-buttons icon-size16 ic-wizardpaging\"\r\n                                        [class.selected]=\"page === currentPage\">\r\n                                    </div>\r\n                                </ng-container>\r\n                            </ng-container>\r\n                        </div>\r\n                        <div class=\"buttons\">\r\n                            <div class=\"small-button modal-button primary\" \r\n                                *ngIf=\"buttonConfig.next.isVisible\"\r\n                                [ngClass]=\"buttonConfig.next.classOverride\"\r\n                                [class.is-disabled]=\"buttonConfig.next.isDisabled\"\r\n                                [attr.disabled]=\"buttonConfig.next.isDisabled\"\r\n                                (click)=\"next($event)\">\r\n                                    {{getString(buttonConfig.next.buttonText || 'workflow_contextPopup_nextButton')}}\r\n                            </div>\r\n                            <div class=\"small-button modal-button primary\" \r\n                                *ngIf=\"buttonConfig.finish.isVisible\"\r\n                                [ngClass]=\"buttonConfig.finish.classOverride\"\r\n                                [class.is-disabled]=\"buttonConfig.finish.isDisabled\"\r\n                                [attr.disabled]=\"buttonConfig.finish.isDisabled\"\r\n                                (click)=\"finish()\">\r\n                                    {{getString(buttonConfig.finish.buttonText || 'workflow_contextPopup_okButton')}}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { AfterViewInit, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { SmartFormsIntegrationService } from 'src/app/services/plugins/smart-forms-integration/smart-forms-integration.service';\r\nimport { PopupState } from 'src/app/shared/enums/plugin-wizard/popup-state';\r\nimport { IProcessPluginDefinitionContext } from 'src/types/uiComponents/pluginWizards/IProcessPluginDefinitionContext';\r\n\r\n@Component({\r\n    selector: 'k2-workflow-integration-forms-popup',\r\n    templateUrl: './workflow-integration-forms-popup.component.html',\r\n    styleUrls: ['./workflow-integration-forms-popup.component.less']\r\n})\r\nexport class WorkflowIntegrationFormsPopupComponent implements OnInit {\r\n\r\n    @Input() formsPopupConfig: sourceCode.k2Designer.objectModel.popup.IContextWizardPopupConfiguration;\r\n    @Input() isPopupWizardActive: boolean;\r\n\r\n    @Output() close: EventEmitter<PopupState> = new EventEmitter<PopupState>();\r\n\r\n    pluginContext: IProcessPluginDefinitionContext;\r\n\r\n    constructor(private _smartFormsIntegrationService: SmartFormsIntegrationService ) { }\r\n\r\n    ngOnInit(): void {\r\n        this.pluginContext = this.formsPopupConfig.context as IProcessPluginDefinitionContext;\r\n    }\r\n\r\n    closeDialogPopup(state: PopupState){\r\n        this.close.emit(state);\r\n    }\r\n\r\n    onSavedAndFinished(){\r\n        this._smartFormsIntegrationService.updateForm(this.pluginContext);\r\n    }\r\n}\r\n","<!-- Should be able to use either 2 way binding or the emitter-->\r\n<k2-wizard-popup-host [(isPopupWizardActive)]=\"isPopupWizardActive\"\r\n                      (closeDialogReason)=\"closeDialogPopup($event)\"\r\n                      [heading]=\"formsPopupConfig.heading\">\r\n    <k2-create-smart-fields [config]=\"formsPopupConfig\"></k2-create-smart-fields>\r\n    <k2-configure-form-rule [config]=\"formsPopupConfig\"></k2-configure-form-rule>\r\n\r\n    <ng-container *ngIf=\"pluginContext?.configureRuleNow\">\r\n        <k2-smartforms-configure-state [config]=\"formsPopupConfig\"></k2-smartforms-configure-state>\r\n        <k2-configure-start-rule [config]=\"formsPopupConfig\"></k2-configure-start-rule>\r\n        <k2-submit-task-action-settings [config]=\"formsPopupConfig\"></k2-submit-task-action-settings>\r\n    </ng-container>\r\n\r\n    <k2-smart-forms-summary [config]=\"formsPopupConfig\"></k2-smart-forms-summary>\r\n    <k2-summary-result [config]=\"formsPopupConfig\" [isHiddenPage]=\"true\"></k2-summary-result>\r\n</k2-wizard-popup-host>\r\n","import { Injectable } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\n\r\n@Injectable()\r\nexport class ZonelessEventPluginService {\r\n    manager: EventManager;\r\n\r\n    supports(eventName: string): boolean {\r\n        return eventName.endsWith('.zoneless');\r\n    }\r\n\r\n    addEventListener(\r\n        element: HTMLElement,\r\n        eventName: string,\r\n        originalHandler: EventListener\r\n    ): Function {\r\n        const [nativeEventName] = eventName.split('.');\r\n\r\n        this.manager.getZone().runOutsideAngular(() => {\r\n            element.addEventListener(nativeEventName, originalHandler);\r\n        });\r\n\r\n        return () => element.removeEventListener(nativeEventName, originalHandler);\r\n    }\r\n}\r\n","import { Directive, ElementRef, EventEmitter, HostListener, Input, Output } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[k2ContextMenu]'\r\n})\r\nexport class ContextMenuDirective {\r\n    @Input() contextMenuContext: any;\r\n    @Output() rightClickEvent = new EventEmitter<any>();\r\n\r\n    constructor() {\r\n    }\r\n\r\n    /* Handles the right click event and retrieves an array of context menu objects from the context menu service*/\r\n    @HostListener('contextmenu', ['$event'])\r\n    public onRightClick(e: MouseEvent): boolean {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        this.rightClickEvent.emit({ e, context: this.contextMenuContext });\r\n        return false;\r\n    }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { UpgradeModule } from '@angular/upgrade/static';\r\nimport { TooltipBasicDirective } from '../directives/tooltip-basic/tooltip-basic.directive';\r\nimport { TooltipSimpleDirective } from '../directives/tooltip-simple/tooltip-simple.directive';\r\nimport { TabHostDirective } from '../directives/tab-host/tab-host.directive';\r\nimport { DraggableDirective } from './draggable/draggable.directive';\r\nimport { DroppableDirective } from './droppable/droppable.directive';\r\nimport { ContextMenuDirective } from './context-menu/context-menu.directive';\r\nimport { TabIndexDirective } from './tab-index/tab-index.directive';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        TooltipSimpleDirective,\r\n        TabHostDirective,\r\n        TooltipBasicDirective,\r\n        DroppableDirective,\r\n        DraggableDirective,\r\n        ContextMenuDirective,\r\n        TabIndexDirective\r\n    ],\r\n    exports: [\r\n        TooltipSimpleDirective,\r\n        TabHostDirective,\r\n        TooltipBasicDirective,\r\n        DroppableDirective,\r\n        DraggableDirective,\r\n        ContextMenuDirective,\r\n        TabIndexDirective\r\n    ],\r\n    imports: [\r\n        UpgradeModule,\r\n        CommonModule\r\n    ],\r\n    providers: [],\r\n    bootstrap: [],\r\n    schemas: [],\r\n    entryComponents: []\r\n})\r\nexport class DirectivesModule { }\r\n","import { DOCUMENT } from '@angular/common';\r\nimport { Directive, ElementRef, EventEmitter, Inject, Input, NgZone, Output } from '@angular/core';\r\nimport { Subscription, fromEvent } from 'rxjs';\r\nimport { DragDropService } from '../../services/drag-drop/drag-drop.service';\r\nimport { isUndefinedOrNull } from '../../shared/utils/general';\r\n\r\ndeclare let TWEEN: any;\r\n\r\n@Directive({\r\n    selector: '[K2Draggable]'\r\n})\r\nexport class DraggableDirective {\r\n    @Input() public DragEnable = true;\r\n    @Input() public k2DragIndex: number;\r\n    @Input() public k2Dragcontext: any;\r\n    @Input() public k2Dragtype: string;\r\n    @Input() public k2Dragitem: (item: any) => any;\r\n    @Input() public k2Dragghost: (item: any, HTMLSourceElement?: HTMLElement) => HTMLElement;\r\n    @Input() public k2Dropped: () => (type: string, data: any) => boolean;\r\n    @Output() public k2Dragstart = new EventEmitter<DragStartEvent>();\r\n    @Output() public k2Dragend = new EventEmitter<DragEvent>();\r\n    @Output() public k2Drag = new EventEmitter<DragEvent>();\r\n\r\n    private _el: HTMLElement;\r\n    private _isIE: boolean;\r\n    private _window = window;\r\n    private _dragSubscription: Subscription;\r\n\r\n    constructor(el: ElementRef<HTMLElement>,\r\n        private _dragDropService: DragDropService,\r\n        @Inject(DOCUMENT) private doc,\r\n        private _zone: NgZone\r\n    ) {\r\n        this._el = el.nativeElement; // Element being dragged\r\n        this._el.draggable = true;\r\n        this._isIE = (typeof (<any>doc.createElement('span')).dragDrop === 'function'); // cant remove the any due to the weird checking type\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this._el.addEventListener('dragstart', this.onDragStart.bind(this), false);\r\n        this._el.addEventListener('dragend', this.onDragEnd.bind(this), false);\r\n        this._zone.runOutsideAngular(() => {\r\n            this._dragSubscription = fromEvent(this._el, 'drag').subscribe((event: DragEvent) => this.onDrag(event));\r\n            this._el.addEventListener('mousedown', this.onMouseDown.bind(this), false);\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this._dragSubscription.unsubscribe();\r\n    }\r\n\r\n    public static changeDragGhost(ghost: HTMLElement): void {\r\n        if (ghost) {\r\n            ghost.style.position = 'absolute';\r\n            ghost.style.opacity = '0';\r\n\r\n            if (sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv && sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.firstChild) {\r\n                new TWEEN.Tween((<HTMLElement>sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.firstChild).style).to({ opacity: 0 }, 250).start().onComplete(function() {\r\n                    sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.removeChild(sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.firstChild);\r\n                });\r\n            }\r\n\r\n            sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.appendChild(ghost);\r\n            new TWEEN.Tween(ghost.style).to({ opacity: 1 }, 250).start();\r\n        }\r\n    }\r\n\r\n    private static _keepDragGhost: boolean;\r\n    /**\r\n     * When drag/drop finishes, the drag ghost will not be removed from the UI\r\n     */\r\n    public static keepDragGhost(): void {\r\n        DraggableDirective._keepDragGhost = true;\r\n    }\r\n\r\n    public static dontKeepDragGhost(): void {\r\n        DraggableDirective._keepDragGhost = false;\r\n    }\r\n    /**\r\n     * Removes drag ghost from the ui\r\n     */\r\n    public static removeDragGhost(): void {\r\n        //Only remove the drag div if it's not already been removed\r\n        //IE11 / Edge can trigger multiple transitionend events\r\n        //causing this to be called more than once in some cases and throwing an error\r\n        if (sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.parentNode !== null) {\r\n            document.body.removeChild(sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv);\r\n        }\r\n    }\r\n\r\n    onDragEnd(event: DragEvent): boolean {\r\n        this._dragDropService.isBusyDragging = false;\r\n\r\n        if (this.k2Dragend !== null && this.k2Dragend !== undefined) {\r\n            this.k2Dragend.emit(event);\r\n        }\r\n\r\n        if (DraggableDirective._keepDragGhost !== true) DraggableDirective.removeDragGhost();\r\n        this._el.classList.remove('drag');\r\n\r\n        if (!isUndefinedOrNull((<HTMLElement>event.target).style)) {\r\n            (<HTMLElement>event.target).style.opacity = '1';\r\n        }\r\n\r\n        if (this._isIE) {\r\n            this._el.classList.remove('drag-ie');\r\n            $('.drag-ie-ghost').remove();\r\n        }\r\n\r\n        this._dragDropService.notifyDragStopped();\r\n        return false;\r\n    }\r\n\r\n    onDrag(e: DragEvent): boolean {\r\n        if (this.k2Drag !== null && this.k2Drag !== undefined) {\r\n            this.k2Drag.emit(e);\r\n        }\r\n\r\n        this._window.requestAnimationFrame(() => {\r\n            sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.style.top = (e.clientY || e.y || e.offsetY || 0) - sourceCode.k2Designer.directives.k2DragDrop.K2Draggable.dragOffset.y + 'px';\r\n            sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.style.left = (e.clientX || e.x || e.offsetX || 0) - sourceCode.k2Designer.directives.k2DragDrop.K2Draggable.dragOffset.x + 'px';\r\n        });\r\n\r\n        return false;\r\n    }\r\n\r\n    onDragStart(event: DragEvent): boolean {\r\n        if (!this._dragDropService.isEnabled) {\r\n            event.preventDefault();\r\n            return true;\r\n        }\r\n\r\n        if (!this.DragEnable) {\r\n            return true;\r\n        }\r\n        this._dragDropService.isBusyDragging = true;\r\n\r\n        this.k2Dragstart.emit({ dragevent: event, k2DragIndex: this.k2DragIndex });\r\n\r\n        event.dataTransfer.setData('text', this.k2Dragtype);\r\n        event.dataTransfer.effectAllowed = 'copyMove';\r\n\r\n        // Clear the drag div (container for the ghost 'image')\r\n        while (sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.firstChild) {\r\n            sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.removeChild(sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.firstChild);\r\n        }\r\n\r\n        const sourceElement = $(event.srcElement || event.target).clone(true)[0];\r\n        let ghost: HTMLElement = this.k2Dragghost != null ? this.k2Dragghost(this.k2Dragcontext, <any>sourceElement) : null;\r\n        if (ghost != null) {\r\n            sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.appendChild(ghost);\r\n        } else {\r\n            // Getting the outer draggable element\r\n            let target: HTMLElement = <HTMLElement>event.target;\r\n\r\n            if (!target.draggable) {\r\n                const draggbleTarget = $(target).closest('[draggable]');\r\n                if (draggbleTarget.length === 1) target = draggbleTarget[0];\r\n            }\r\n            else if (target.classList.contains('ie-drag-handler')) {\r\n                const parent = $(target).closest('.ie-drag-wrapper');\r\n                if (parent.length > 0) {\r\n                    target = parent[0];\r\n                }\r\n            }\r\n\r\n            target.style.opacity = '0.3';\r\n            ghost = <HTMLElement>target.cloneNode(true);\r\n            sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.appendChild(ghost);\r\n        }\r\n\r\n        if (this._isIE) {\r\n            sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.classList.add('dragdrop-ie');\r\n        }\r\n\r\n        this.doc.body.appendChild(sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv);\r\n        sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.style.opacity = '1';\r\n\r\n        const type: string = this.k2Dragtype || this._el.getAttribute('k2Dragtype');\r\n\r\n        let data: any = null;\r\n        if (typeof this.k2Dragitem === 'function') {\r\n            data = this.k2Dragitem(this.k2Dragcontext);\r\n        } else {\r\n            data = this.k2Dragitem;\r\n        }\r\n\r\n        this._dragDropService.setItem(type, data);\r\n\r\n        if (typeof this.k2Dropped === 'function') {\r\n            const onDroppedFn: (type: string, data: any) => boolean = this.k2Dropped();\r\n            if (onDroppedFn != null) {\r\n                this._dragDropService.setNotifyOnDropped(onDroppedFn);\r\n            }\r\n        }\r\n\r\n        this._dragDropService.notifyDragStarted(type, data);\r\n\r\n        const dragImage = this._isIE ? this._el : sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragGhost;\r\n        (<any>event.dataTransfer).setDragImage(dragImage, 0, 0);\r\n\r\n        this._el.classList.add('drag');\r\n        return false;\r\n    }\r\n\r\n    onMouseDown(event: MouseEvent): boolean {\r\n        sourceCode.k2Designer.directives.k2DragDrop.K2Draggable.dragOffset = this._isIE ? { x: event.offsetX - 50, y: event.offsetY } : { x: event.offsetX, y: event.offsetY };\r\n        // this is for custom step svg icons to ensure event is firing from parent element this._el\r\n        const svgElements = this._el.getElementsByTagName('svg');\r\n        if (svgElements.length > 0) {\r\n            svgElements[0].style.pointerEvents = 'none';\r\n        }\r\n        sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.style.opacity = '0';\r\n        sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.style.top = (event.clientY || event.y || event.offsetY || 0) - sourceCode.k2Designer.directives.k2DragDrop.K2Draggable.dragOffset.y + 'px';\r\n        sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.style.left = (event.clientX || event.x || event.offsetX || 0) - sourceCode.k2Designer.directives.k2DragDrop.K2Draggable.dragOffset.x + 'px';\r\n\r\n        return false;\r\n    }\r\n\r\n    public static get currentGhost(): HTMLElement {\r\n        return <HTMLElement>sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.firstElementChild;\r\n    }\r\n}\r\n","import { Directive, ElementRef, EventEmitter, Inject, Input, Output } from '@angular/core';\r\nimport { DragDropService } from '../../services/drag-drop/drag-drop.service';\r\nimport { UndoRedoServiceToken } from '../../services/undo-redo/undo-redo-service-factory';\r\n\r\n@Directive({\r\n    selector: '[K2Droppable]'\r\n})\r\nexport class DroppableDirective {\r\n    @Input() public k2AcceptsDrop: (a, b) => any;\r\n    @Input() public k2Droptypes: string;\r\n    @Input() public k2WillBubbleToGrandparent = false;\r\n\r\n    @Output() public k2Dropped = new EventEmitter<IDragDropData>();\r\n    @Output() public k2DragOver = new EventEmitter<IDragDropData>();\r\n    @Output() public k2DragEnter = new EventEmitter<IDragDropData>();\r\n    @Output() public k2DragLeave = new EventEmitter<IDragDropData>();\r\n\r\n    private _element: HTMLElement;\r\n    private _allowDrop: boolean;\r\n    private _dropTypes: string[];\r\n\r\n    constructor(\r\n        el: ElementRef<HTMLElement>,\r\n        private _dragDropService: DragDropService,\r\n        @Inject(UndoRedoServiceToken) private _undoRedoService: IUndoRedoService) {\r\n\r\n        this._element = el.nativeElement;\r\n\r\n        this._element.addEventListener('dragover', this.onDragOver.bind(this), false);\r\n        this._element.addEventListener('dragenter', this.onDragEnter.bind(this), false);\r\n        this._element.addEventListener('dragleave', this.onDragLeave.bind(this), false);\r\n        this._element.addEventListener('drop', this.onDrop.bind(this), false);\r\n    }\r\n\r\n    onDragEnter(e: DragEvent): boolean {\r\n        this._element.classList.add('over');\r\n        if (this.k2DragEnter) {\r\n            this.k2DragEnter.emit();\r\n        }\r\n\r\n        this.setDropTypes();\r\n\r\n        this._allowDrop = this.allowDrop(this._dropTypes);\r\n\r\n        if (!this._allowDrop) {\r\n            e.dataTransfer.dropEffect = 'none';\r\n            e.preventDefault();\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    onDragLeave(e: DragEvent): boolean {\r\n        this._element.classList.remove('over');\r\n        if (this.k2DragLeave) {\r\n            this.k2DragLeave.emit();\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    onDrop(e: DragEvent): boolean {\r\n        this._undoRedoService.addUndoMarker('-- k2Droppable: on drop --');\r\n\r\n        // stops some browsers from redirecting.\r\n        e.preventDefault();\r\n        if (e.stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n\r\n        this._element.classList.remove('over');\r\n\r\n        this.setDropTypes();\r\n\r\n        for (let i = 0; i < this._dropTypes.length; i++) {\r\n            if (this._dragDropService.hasItem(this._dropTypes[i])) {\r\n\r\n                // peekItem reads the value withtout removing it.\r\n                // getItem will read the value and remove it from the dictionary.\r\n                // If we we pass the drop on to the grandparent component and the item has been removed by the getItem, the drop will be disallowed\r\n                const data: any = this.k2WillBubbleToGrandparent\r\n                    ? this._dragDropService.peekItem(this._dropTypes[i])\r\n                    : this._dragDropService.getItem(this._dropTypes[i]);\r\n                this.k2Dropped.emit(data);\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    onDragOver(e: DragEvent): boolean {\r\n\r\n        if (this.k2DragOver) {\r\n            this.k2DragOver.emit();\r\n        }\r\n\r\n        if (this._allowDrop) {\r\n            e.dataTransfer.dropEffect = 'move';\r\n            // allows us to drop\r\n            if (e.preventDefault) {\r\n                e.preventDefault();\r\n            }\r\n            this._element.classList.add('over');\r\n        } else {\r\n            e.dataTransfer.dropEffect = 'none';\r\n            this._element.classList.remove('over');\r\n            //IE11 won't change the icon if prevent default is called, but other browsers will not change the drop effect unless it is called\r\n            if (!sourceCode.k2Designer.core.isIE11) {\r\n                e.preventDefault();\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private allowDrop(types: string[]) {\r\n        let allowDrop = false;\r\n\r\n        // check if there is a drag/drop validation function\r\n        if (typeof this.k2AcceptsDrop === 'function') {\r\n            // check if we have any acceptable types that can be dropped\r\n            for (var i = 0; i < types.length; i++) {\r\n                // check if we have data associated with this type\r\n                if (this._dragDropService.hasItem(types[i])) {\r\n                    // we have data - now execute the validation function\r\n                    if (this.k2AcceptsDrop(types[i], this._dragDropService.peekItem(types[i]))) {\r\n                        allowDrop = true;\r\n                        break;\r\n                    }\r\n                } // else we have no data assocated with the type, don't do anything\r\n            }\r\n        } else {\r\n            // we have no drag/drop validation function\r\n            // if we have any data associated with the type, we will allow the drop, otherwise not\r\n            for (var i = 0; i < types.length; i++) {\r\n                if (this._dragDropService.hasItem(types[i])) {\r\n                    allowDrop = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return allowDrop;\r\n    }\r\n\r\n    private setDropTypes() {\r\n        if (this.k2Droptypes) {\r\n            if (typeof this.k2Droptypes === 'string') {\r\n                this._dropTypes = (<string>this.k2Droptypes).split(' ');\r\n            } else {\r\n                this._dropTypes = this.k2Droptypes as string[];\r\n            }\r\n        } else {\r\n            this._dropTypes = [];\r\n        }\r\n    }\r\n}\r\n","import { Directive, ViewContainerRef } from '@angular/core';\r\n/**\r\n * Anchor directive for including tabs to Ribbon (see ribbon.component)\r\n * */\r\n@Directive({\r\n    selector: '[k2TabHost]'\r\n})\r\nexport class TabHostDirective {\r\n\r\n    constructor(public viewContainerRef: ViewContainerRef) { }\r\n\r\n}\r\n","import { Directive, ElementRef, Inject, Input, OnInit } from '@angular/core';\r\nimport { IEnvironmentService } from '../../../types/services/environment/i-environment-service';\r\nimport { EnvironmentServiceToken } from '../../services/environment/environment-service-factory';\r\n\r\n@Directive({\r\n    selector: '[k2-tab-index]'\r\n})\r\nexport class TabIndexDirective implements OnInit {\r\n    @Input('k2-tab-index') public tabIndex?: string;\r\n\r\n    private onPluginStateChangedCallback: sourceCode.k2Designer.services.core.IPluginStateChangedCallback;\r\n\r\n    constructor(private element: ElementRef<HTMLElement>,\r\n        @Inject(EnvironmentServiceToken) private _envService: IEnvironmentService) {\r\n        // Register a handler for this element to update the tabindex attribute when the pluginstates changes\r\n        this.onPluginStateChangedCallback = this._envService.listenActiveStudioItemPluginStateChanged(this.onPluginStateChanged.bind(this));\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // Read the value from the tabindex attribute if not set in the directive attribute\r\n        if (!this.tabIndex && this.element.nativeElement.hasAttribute('tabindex')) {\r\n            this.tabIndex = this.element.nativeElement.getAttribute('tabindex');\r\n        }\r\n\r\n        this.setElementTabIndex();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this._envService.removeActiveStudioItemPluginStateChangedListener(this.onPluginStateChangedCallback);\r\n        this.onPluginStateChangedCallback = null;\r\n    }\r\n\r\n    /**\r\n     * Indicates if the targeted element is currently displayed in the viewport\r\n     * Take note that the logic is flakey, it merely checks to see if any plugin is in an expanded state.\r\n     */\r\n    private isElementInViewport(): boolean {\r\n        const rez = this._envService.activeStudioItem.pluginStates.configurationPanel === 'expanded' ||\r\n            this._envService.activeStudioItem.pluginStates.rulesDesigner === 'expanded' ||\r\n            this._envService.activeStudioItem.pluginStates.emailBody === 'expanded' ||\r\n            this._envService.activeStudioItem.pluginStates.recipientPanel === 'expanded' ||\r\n            this._envService.activeStudioItem.pluginStates.filterPanel === 'expanded' ||\r\n            this._envService.activeStudioItem.pluginStates.contextBrowser === 'expanded';\r\n\r\n        return rez;\r\n    }\r\n\r\n    private onPluginStateChanged(): void {\r\n        this.setElementTabIndex();\r\n    }\r\n\r\n    private setElementTabIndex(): void {\r\n        if (!this.isElementInViewport()) {\r\n            this.element.nativeElement.setAttribute('tabIndex', '-1');\r\n        }\r\n        else {\r\n            if (this.tabIndex === null || this.tabIndex === undefined) {\r\n                this.element.nativeElement.removeAttribute('tabIndex');\r\n            } else {\r\n                this.element.nativeElement.setAttribute('tabIndex', this.tabIndex);\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { Directive, ElementRef, HostListener } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[k2TooltipBasic]'\r\n})\r\nexport class TooltipBasicDirective {\r\n\r\n    private _element: HTMLElement;\r\n\r\n    constructor(el: ElementRef) {\r\n        this._element = el.nativeElement;\r\n    }\r\n\r\n    @HostListener('mouseenter', ['$event'])\r\n    onMouseEnter(e: MouseEvent) {\r\n        //Determine if the text overlow, which means that ellipses show and we should then set the title (tooltip) to the innertext of the element.\r\n        if (this._element.offsetWidth < this._element.scrollWidth) {\r\n            this._element.title = this._element.innerText;\r\n\r\n        } else {\r\n            // No overflow, don't show tooltip if it fits on element.\r\n            this._element.title = '';\r\n        }\r\n    }\r\n}\r\n","import { Directive, ElementRef, EventEmitter, HostListener, Inject, Input } from '@angular/core';\r\nimport { isUndefinedOrNull } from '../../shared/utils/general';\r\n\r\n@Directive({\r\n    selector: '[k2TooltipSimple]'\r\n})\r\nexport class TooltipSimpleDirective {\r\n\r\n    //TODO: This is only used in ribbon tooltips ever, consider replacing completely with tooltip basic\r\n\r\n    @Input() public k2TooltipDescription: string;\r\n    @Input() public k2TooltipSection: string;\r\n    @Input() public k2TooltipSubSection: string;\r\n    @Input() public k2TooltipTitle: string;\r\n    @Input() public k2TooltipPosition: string;\r\n    @Input() public k2TooltipVisible: boolean;\r\n    @Input() public showTimer: number;\r\n\r\n    private _element: HTMLElement;\r\n    private _scope: sourceCode.k2Designer.directives.k2TooltipSimple.IK2TooltipSimpleScope;\r\n\r\n    constructor(@Inject('$scope') $scope: sourceCode.k2Designer.directives.k2TooltipSimple.IK2TooltipSimpleScope,\r\n        el: ElementRef<HTMLElement>)\r\n    {\r\n        this._element = el.nativeElement;\r\n        this._scope = $scope;\r\n    }\r\n\r\n    @HostListener('mouseenter', ['$event'])\r\n    onMouseEnter(e: MouseEvent) {\r\n        const toolTipContainer = this.renderTemplate();\r\n\r\n        this.checkIfAnySectionIsMoreThenMaxHeight(toolTipContainer);\r\n\r\n        this.positionTootip(toolTipContainer, e);\r\n\r\n        this.showTimer = window.setTimeout(() => { toolTipContainer.classList.add('show'); }, 500);\r\n    }\r\n\r\n    @HostListener('mouseout', ['$event'])\r\n    onMouseOut(e: MouseEvent): void {\r\n        document.getElementById('simpleToolTipParent').classList.remove('show');\r\n        window.clearTimeout(this._scope.showTimer);\r\n    }\r\n\r\n    @HostListener('mousedown', ['$event'])\r\n    onMouseDown(e: MouseEvent): void {\r\n        document.getElementById('simpleToolTipParent').classList.remove('show');\r\n        window.clearTimeout(this._scope.showTimer);\r\n    }\r\n\r\n    private positionTootip(toolTipView: HTMLElement, e: MouseEvent): void {\r\n        let coordinates = this.calculateCoordinates(10, this.k2TooltipPosition, toolTipView);\r\n\r\n\r\n        toolTipView.style.left = coordinates.x + 'px';\r\n        toolTipView.style.top = coordinates.y + 'px';\r\n\r\n        if (this.isOutOfPage(toolTipView)) {\r\n            coordinates = this.calculateCoordinates(10, coordinates.alternatePosition, toolTipView);\r\n            toolTipView.style.left = coordinates.x + 'px';\r\n            toolTipView.style.top = coordinates.y + 'px';\r\n        }\r\n\r\n    }\r\n\r\n    private calculateCoordinates(tooltipOffset: number, toolTipPosition: string, tooTipView: HTMLElement): any {\r\n        const ret: any = {};\r\n\r\n        let x = 0;\r\n        let y = 0;\r\n        let alternatePosition: string = toolTipPosition;\r\n\r\n        let elementMargin = 0;\r\n        let elementPadding = 0;\r\n\r\n        const boundingRect = this._element.getBoundingClientRect();\r\n\r\n        switch (toolTipPosition) {\r\n            case 'top': {\r\n                const viewHeight = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(tooTipView, 'height').replace('px', '')));\r\n                x = boundingRect.left;\r\n                y = boundingRect.top - tooltipOffset - viewHeight;\r\n                elementMargin = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'margin-left').replace('px', '')));\r\n                elementPadding = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'padding-left').replace('px', '')));\r\n                if (isNaN(elementMargin)) {\r\n                    elementMargin = 0;\r\n                }\r\n                if (isNaN(elementPadding)) {\r\n                    elementPadding = 0;\r\n                }\r\n                x += elementMargin + elementPadding;\r\n                alternatePosition = 'bottom';\r\n            } break;\r\n            case 'left': {\r\n                x = boundingRect.left - tooltipOffset - 200;\r\n                y = boundingRect.top;\r\n                elementMargin = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'margin-left').replace('px', '')));\r\n                elementPadding = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'padding-left').replace('px', '')));\r\n                if (isNaN(elementMargin)) {\r\n                    elementMargin = 0;\r\n                }\r\n                if (isNaN(elementPadding)) {\r\n                    elementPadding = 0;\r\n                }\r\n                x += elementMargin + elementPadding;\r\n                alternatePosition = 'right';\r\n            } break;\r\n            case 'right': {\r\n\r\n                x = boundingRect.right + tooltipOffset;\r\n                y = boundingRect.top;\r\n                elementMargin = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'margin-right').replace('px', '')));\r\n                elementPadding = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'padding-right').replace('px', '')));\r\n                if (isNaN(elementMargin)) {\r\n                    elementMargin = 0;\r\n                }\r\n                if (isNaN(elementPadding)) {\r\n                    elementPadding = 0;\r\n                }\r\n                x -= (elementMargin + elementPadding);\r\n                alternatePosition = 'left';\r\n            } break;\r\n            case 'bottomleft': {\r\n                x = boundingRect.left - 200;\r\n                y = boundingRect.bottom + tooltipOffset;\r\n                elementMargin = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'margin-left').replace('px', '')));\r\n                elementPadding = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'padding-left').replace('px', '')));\r\n                if (isNaN(elementMargin)) {\r\n                    elementMargin = 0;\r\n                }\r\n                if (isNaN(elementPadding)) {\r\n                    elementPadding = 0;\r\n                }\r\n                x += elementMargin + elementPadding;\r\n                alternatePosition = 'bottomright';\r\n            } break;\r\n            case 'bottomright': {\r\n                x = boundingRect.right;\r\n                y = boundingRect.bottom + tooltipOffset;\r\n                elementMargin = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'margin-right').replace('px', '')));\r\n                elementPadding = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'padding-right').replace('px', '')));\r\n                if (isNaN(elementMargin)) {\r\n                    elementMargin = 0;\r\n                }\r\n                if (isNaN(elementPadding)) {\r\n                    elementPadding = 0;\r\n                }\r\n                x -= (elementMargin + elementPadding);\r\n                alternatePosition = 'bottomleft';\r\n            } break;\r\n            case 'topleft': {\r\n                const viewHeight = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(tooTipView, 'height').replace('px', '')));\r\n                x = boundingRect.left - 200;\r\n                y = boundingRect.top - tooltipOffset - viewHeight;\r\n                elementMargin = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'margin-left').replace('px', '')));\r\n                elementPadding = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'padding-left').replace('px', '')));\r\n                if (isNaN(elementMargin)) {\r\n                    elementMargin = 0;\r\n                }\r\n                if (isNaN(elementPadding)) {\r\n                    elementPadding = 0;\r\n                }\r\n                x += elementMargin + elementPadding;\r\n                alternatePosition = 'topright';\r\n            } break;\r\n            case 'topright': {\r\n                const viewHeight = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(tooTipView, 'height').replace('px', '')));\r\n                x = boundingRect.right;\r\n                y = boundingRect.top - tooltipOffset - viewHeight;\r\n                elementMargin = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'margin-right').replace('px', '')));\r\n                elementPadding = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'padding-right').replace('px', '')));\r\n                if (isNaN(elementMargin)) {\r\n                    elementMargin = 0;\r\n                }\r\n                if (isNaN(elementPadding)) {\r\n                    elementPadding = 0;\r\n                }\r\n                x -= (elementMargin + elementPadding);\r\n                alternatePosition = 'topleft';\r\n            } break;\r\n            default: {\r\n                x = boundingRect.left;\r\n                y = boundingRect.bottom + tooltipOffset;\r\n                elementMargin = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'margin-left').replace('px', '')));\r\n                elementPadding = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(this._element, 'padding-left').replace('px', '')));\r\n                if (isNaN(elementMargin)) {\r\n                    elementMargin = 0;\r\n                }\r\n                if (isNaN(elementPadding)) {\r\n                    elementPadding = 0;\r\n                }\r\n                x += elementMargin + elementPadding;\r\n                alternatePosition = 'top';\r\n            }; break;\r\n        }\r\n\r\n        return {\r\n            x,\r\n            y,\r\n            alternatePosition\r\n        };\r\n    }\r\n\r\n    private isOutOfPage(toolTipContainer: HTMLElement): boolean {\r\n        const offsetWidth: number = window.document.body.offsetWidth;\r\n        const offsetHeight: number = window.document.body.offsetHeight;\r\n        const tooltipContainerRect: ClientRect = toolTipContainer.getBoundingClientRect();\r\n\r\n        if (tooltipContainerRect.top < 0 || tooltipContainerRect.top > offsetHeight ||\r\n            tooltipContainerRect.left < 0 || tooltipContainerRect.left > offsetWidth ||\r\n            tooltipContainerRect.bottom < 0 || tooltipContainerRect.bottom > offsetHeight ||\r\n            tooltipContainerRect.right < 0 || tooltipContainerRect.right > offsetWidth) {\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private renderTemplate(): HTMLElement {\r\n        const theToolTipParent = document.getElementById('simpleToolTipParent');\r\n        theToolTipParent.innerHTML = this.getTemplateString();\r\n\r\n        return document.getElementById('simpleToolTipParent');\r\n    }\r\n\r\n    private checkIfAnySectionIsMoreThenMaxHeight(toolTipContainer: HTMLElement): void {\r\n        const sections = toolTipContainer.querySelectorAll('.sections label');\r\n        for (let i = 0; i < sections.length; i++) {\r\n            const actualHeight = sections[i].scrollHeight;\r\n            const maxHeight = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(<HTMLElement>sections[i], 'max-height').replace('px', '')));\r\n\r\n            if (actualHeight > maxHeight) {\r\n                sections[i].classList.add('multiline');\r\n            }\r\n        }\r\n\r\n        const description = toolTipContainer.querySelectorAll('.description label')[0];\r\n        if (!isUndefinedOrNull(description)) {\r\n            const actualHeight = description.scrollHeight;\r\n            const maxHeight = Math.round(Number(sourceCode.k2Designer.utilities.getActualElementStyleValue(<HTMLElement>description, 'max-height').replace('px', '')));\r\n\r\n            if (actualHeight > maxHeight) {\r\n                description.classList.add('multiline');\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * In AngularJS, the tooltip html was built up including the angular scope values and compiled by the angular compile service.\r\n     * This approach below for Angular10, does not compile the html as angular, which means that the input strings will not dynamically update\r\n     * (it will only update once with every mouseover)\r\n     */\r\n    private getTemplateString(): string {\r\n        let templateStr = '';\r\n        if (this.k2TooltipVisible) {\r\n            let toolTipTitleStr = '';\r\n            if (this.k2TooltipTitle && this.k2TooltipTitle != '') {\r\n                toolTipTitleStr =\r\n                    `<div class='name'>\\\r\n                        <label>${this.k2TooltipTitle}</label>\\\r\n                     </div>`;\r\n            }\r\n            let toolTipDescStr = '';\r\n            if (this.k2TooltipDescription && this.k2TooltipDescription != '') {\r\n                toolTipDescStr =\r\n                    `<div class=\\'description\\'>\\\r\n                        <label>${this.k2TooltipDescription}</label>\\\r\n                     </div>`;\r\n            }\r\n            let toolTipSectionStr = '';\r\n            if (this.k2TooltipSection && this.k2TooltipSection != '') {\r\n                toolTipSectionStr =\r\n                    `<div class=\\'sections\\'>\\\r\n                        <label>${this.k2TooltipSection}</label>\\\r\n                     </div>`;\r\n            }\r\n            let toolTipSubSectionStr = '';\r\n            if (this.k2TooltipSubSection && this.k2TooltipSubSection != '') {\r\n                toolTipSubSectionStr =\r\n                    `<div class=\\'sections\\'>\\\r\n                        <label>${this.k2TooltipSubSection}</label>\\\r\n                     </div>`;\r\n            }\r\n\r\n            templateStr =\r\n                `<div class='simpleToolTip'>\r\n                    ${toolTipTitleStr}\r\n                    ${toolTipDescStr}\r\n                    ${toolTipSectionStr}\r\n                    ${toolTipSubSectionStr}\r\n                 </div>`;\r\n        }\r\n        return templateStr;\r\n    }\r\n\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockDragDropService } from '../../testing/mock-services/drag-drop-service';\r\nimport { IDragDropService } from '../../types/services/drag-drop/i-drag-drop.service';\r\n\r\nconst legacyDragDropServiceFactory = () => environment.devHarness === true\r\n    ? new MockDragDropService()\r\n    : sourceCode.k2Designer.core.environmentService.dragDropService;\r\n\r\nexport const LegacyDragDropServiceToken = new InjectionToken<IDragDropService>('IDragDropService');\r\n\r\nexport const LegacyDragDropServiceFactory = {\r\n    provide: LegacyDragDropServiceToken,\r\n    useFactory: legacyDragDropServiceFactory,\r\n    deps: []\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockLegacyResourceService } from 'src/testing/mock-legacy-services/resource/mock-legacy-resource.service';\r\nimport { ILegacyResourceService } from 'src/types/services/resources/i-legacy-resource.service';\r\n\r\nconst legacyResourceServiceFactory = () => environment.devHarness === true\r\n    ? new MockLegacyResourceService()\r\n    : sourceCode.k2Designer.core.environmentService.resourceService;\r\n\r\nexport const LegacyResourceServiceToken = new InjectionToken<ILegacyResourceService>('ILegacyResourceService');\r\n\r\nexport const LegacyResourceServiceFactory = {\r\n    provide: LegacyResourceServiceToken,\r\n    useFactory: legacyResourceServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { IRulePluginService } from 'src/types/services/rules/i-rule-plugin.service';\r\nimport { MockRulePluginService } from '../../testing/mock-services/rule-plugin-service';\r\n\r\nconst legacyRulePluginServiceFactory = () => environment.devHarness === true\r\n    ? new MockRulePluginService()\r\n    : sourceCode.k2Designer.core.environmentService.rulePluginService;\r\n\r\nexport const LegacyRulePluginServiceToken = new InjectionToken<IRulePluginService>('IRulePluginService');\r\n\r\nexport const LegacyRulePluginServiceFactory = {\r\n    provide: LegacyRulePluginServiceToken,\r\n    useFactory: legacyRulePluginServiceFactory,\r\n    deps: []\r\n};\r\n","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\nimport { AppModule } from './app.module';\r\nimport { IToolsetBinding } from './shared/models/i-toolset-binding';\r\nimport { IToolsetMessage } from './shared/models/i-toolset-message';\r\nimport { IClientAppConfig } from './shared/models/iClientAppConfig';\r\nimport { messageTypes } from './shared/enums/toolset/message-types';\r\nimport { HttpInterceptor } from './shared/utils/httpInterceptor';\r\ndeclare let $: any;\r\n\r\nexport class loader {\r\n    public readonly headerName = 'K2AppsContext';\r\n    public $window = window; // make reference to window for unit testing\r\n    public $console = console; // make reference to console for unit testing\r\n    public $document = document; // make reference to document for unit testing\r\n    public progress: number; // in case we want to show progress during this phase\r\n    public total: number; // to know how many we need to load during this phase\r\n    public phase: string; // current phase of the loading\r\n    public appContext: IToolsetBinding = null; // the app context associated with this client instance if any\r\n    public configuration: IClientAppConfig; // configuration received from the config provider backend\r\n    private _httpInterceptor: HttpInterceptor; // the interceptor instance that will attach headers\r\n\r\n    constructor() {\r\n        this._httpInterceptor = new HttpInterceptor(null);\r\n    }\r\n\r\n    /**\r\n     * Message handler for responding to iframe message.\r\n     *\r\n     * @param event message parameters\r\n     */\r\n    public messageReceivedHandler(event) {\r\n        if (event.source !== this.$window.parent) {\r\n            this.$console.error(\r\n                'Message received from another source! :' + event.data\r\n            );\r\n            return;\r\n        }\r\n        if (!event.data) {\r\n            this.$console.error('No data received from window message');\r\n            return;\r\n        }\r\n        const message: IToolsetMessage = event.data;\r\n\r\n        switch (message.messageType) {\r\n            case messageTypes.setData:\r\n                this.appContext = message.binding;\r\n                const headers = <{ [name: string]: string }>{};\r\n                headers[this.headerName] = this.b64EncodeUnicode(\r\n                    JSON.stringify(this.appContext)\r\n                );\r\n                // TODO: decide whether we load the entire appcontext in one header or split among props\r\n                this._httpInterceptor.headers = headers;\r\n                this._httpInterceptor.Intercept();\r\n                break;\r\n            default:\r\n            // Other messageTypes will be handled by messaging service\r\n                return;\r\n        }\r\n        this.loadTemplates();\r\n    }\r\n\r\n    /**\r\n     * Handler to be attached to document ready.\r\n     * Sends message to parent frame to get apps context.\r\n     * Starts app loading if no parent frame present or if parent frame hasn't responded.\r\n     * */\r\n    public documentReadyHandler() {\r\n        if ((<any>this.$window).define) (<any>this.$window).define.amd = null; // disable require from here on out since some libraries try to init using it\r\n        if (\r\n            this.$window.parent && // check if the parent exists\r\n            this.$window.parent !== this.$window && //and that it is not itself\r\n            $('#DesignerIframe') &&\r\n            $('#DesignerIframe').length === 0\r\n        ) {\r\n            //check that it is not loaded into the SF designer\r\n            const message: IToolsetMessage = <IToolsetMessage>{\r\n                messageType: messageTypes.getData,\r\n                binding: null\r\n            };\r\n            this.$window.parent.postMessage(message, '*');\r\n            const that = this;\r\n            this.$window.setTimeout(function() {\r\n                if (!that.phase) {\r\n                    // hasn't started loading already\r\n                    that.loadTemplates();\r\n                }\r\n            }, 1000); // assume we dont have an apps context if the frame doesnt respond within 1s\r\n        } else {\r\n            this.loadTemplates();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load templates.\r\n     * Load libraries when done.\r\n     */\r\n    loadTemplates() {\r\n        this.phase = 'Loading templates';\r\n        const url =\r\n            'api/templates/gettemplates?language=' + window.navigator.language;\r\n        $.get(url)\r\n            .done((result) => {\r\n                (<any>window).K2_ANGULAR_TEMPLATES = result;\r\n                this.loadConfig();\r\n            })\r\n            .fail((error) => {\r\n                console.error(error);\r\n            });\r\n    }\r\n\r\n    loadConfig() {\r\n        this.phase = 'Loading Configuration';\r\n        const url = 'api/configuration/retrieveconfiguration';\r\n        $.get(url)\r\n            .done((result) => {\r\n                this.configuration = result;\r\n\r\n                //update global vars from the configuration\r\n                this.$window.K2DESIGNERDEBUGGING =\r\n                    this.configuration.k2DesignerDebugging;\r\n                this.$window.ASSEMBLYFILEVERSION =\r\n                    this.configuration.assemblyFileVersion;\r\n                this.$window.APPVERSION = this.configuration.appVersion;\r\n                this.$window.HELPLINK = this.configuration.helpLink;\r\n                this.$window.__antiXsrfEnabled =\r\n                    this.configuration.antiXsrfEnabled;\r\n                this.$window.__xsrfTokenName = this.configuration.xsrfTokenName;\r\n                this.$window.__xsrfCookieName =\r\n                    this.configuration.xsrfCookieName;\r\n                this.$window.EVENTPLATFORMENABLED =\r\n                    this.configuration.eventPlatformEnabled;\r\n                this.$window.TEMPLATE_CACHING_ENABLED =\r\n                    this.configuration.templateCachingEnabled;\r\n\r\n                const scripts: string[] = [];\r\n                this.phase = 'Loading Scripts';\r\n                this.progress = 0;\r\n\r\n                // Order matters\r\n                if (this.$window.K2DESIGNERDEBUGGING === true) {\r\n                    scripts.push.apply(scripts, this.configuration.libUrls);\r\n                    scripts.push.apply(scripts, this.configuration.coreAppUrls);\r\n                    scripts.push.apply(scripts, this.configuration.serviceUrls);\r\n\r\n                    this.total = scripts.length;\r\n                    this.executeScripts(scripts, this.loadSignalR.bind(this));\r\n                } else {\r\n                    let allScripts = [];\r\n                    this.total = 3;\r\n                    $.get(\r\n                        `webServices/GetScriptPackage.jspack?list=libs.json&_v=${this.$window.ASSEMBLYFILEVERSION}&cache=${this.$window.TEMPLATE_CACHING_ENABLED}`\r\n                    ).done((s1) => {\r\n                        allScripts = allScripts.concat(JSON.parse(s1));\r\n                        this.progress++;\r\n                        $.get(\r\n                            `webServices/GetScriptPackage.jspack?list=core.json&_v=${this.$window.ASSEMBLYFILEVERSION}&cache=${this.$window.TEMPLATE_CACHING_ENABLED}`\r\n                        ).done((s2) => {\r\n                            allScripts = allScripts.concat(JSON.parse(s2));\r\n                            this.progress++;\r\n                            this.appendScripts(\r\n                                allScripts,\r\n                                this.loadSignalR.bind(this)\r\n                            );\r\n                        });\r\n                    });\r\n                }\r\n            })\r\n            .fail((error) => {\r\n                console.error(error);\r\n            });\r\n    }\r\n\r\n    appendScripts(scripts, cb) {\r\n        if (scripts && scripts.length > 0) {\r\n            const script = document.createElement('script');\r\n            script.text = scripts.shift();\r\n            document.head.appendChild(script).parentNode.removeChild(script);\r\n            setTimeout(this.appendScripts.bind(this), 0, scripts, cb);\r\n        } else {\r\n            cb();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load signalR client hub.\r\n     * Bootstrap angular when done.\r\n     */\r\n    loadSignalR() {\r\n        this.phase = 'Loading signalR Hub';\r\n        const that = this;\r\n        const script = document.createElement('script');\r\n        script.type = 'text/javascript';\r\n        script.src = 'signalr/hubs';\r\n        script.onload = function() {\r\n            that.$window.sourceCode.k2Designer.core.Prepare(\r\n                that.appContext,\r\n                that._httpInterceptor,\r\n                that.configuration\r\n            );\r\n            platformBrowserDynamic().bootstrapModule(AppModule);\r\n        };\r\n        document.body.appendChild(script);\r\n    }\r\n\r\n    /**\r\n     * Load and execute all the scripts recursively in order.\r\n     *\r\n     * @param urls urls of scripts to load and execute\r\n     * @param callback call this when it is done with all the scripts\r\n     */\r\n    executeScripts(urls: string[], callback: any, i?: number) {\r\n        if (i == undefined) i = 0;\r\n        const that = this;\r\n        if (urls[i] === undefined) return;\r\n        if ((<any>window).K2DESIGNERDEBUGGING) {\r\n            const script = this.$document.createElement('script');\r\n            script.src = urls[i];\r\n            script.async = false;\r\n            script.onload = () => {\r\n                that.progress++;\r\n                that.executeScripts(urls, callback, ++i);\r\n                if (that.progress >= that.total) {\r\n                    callback();\r\n                }\r\n            };\r\n            document.body.appendChild(script);\r\n        } else {\r\n            $.getScript(urls[i], () => {\r\n                that.progress++;\r\n                that.executeScripts(urls, callback, ++i);\r\n                if (this.progress >= this.total) {\r\n                    callback();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // Encoding UTF8  base64\r\n    b64EncodeUnicode(str) {\r\n        return btoa(\r\n            encodeURIComponent(str).replace(\r\n                /%([0-9A-F]{2})/g,\r\n                function(match, p1) {\r\n                    return String.fromCharCode(parseInt(p1, 16));\r\n                }\r\n            )\r\n        );\r\n    }\r\n\r\n    // Decoding base64  UTF8\r\n    b64DecodeUnicode(str) {\r\n        return decodeURIComponent(\r\n            Array.prototype.map\r\n                .call(atob(str), function(c) {\r\n                    return (\r\n                        '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)\r\n                    );\r\n                })\r\n                .join('')\r\n        );\r\n    }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { SafePipe } from './safe/safe.pipe';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        SafePipe\r\n    ],\r\n    exports: [\r\n        SafePipe\r\n    ],\r\n    imports: [\r\n        CommonModule\r\n    ],\r\n    providers: [],\r\n    bootstrap: [],\r\n    schemas: [],\r\n    entryComponents: []\r\n})\r\nexport class PipesModule { }\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer, SafeHtml, SafeStyle, SafeScript, SafeUrl, SafeResourceUrl } from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n    name: 'safe'\r\n})\r\nexport class SafePipe implements PipeTransform {\r\n\r\n    constructor(protected sanitizer: DomSanitizer) { }\r\n\r\n    public transform(value: any, type: string): SafeHtml | SafeStyle | SafeScript | SafeUrl | SafeResourceUrl {\r\n        switch (type) {\r\n            case 'html': return this.sanitizer.bypassSecurityTrustHtml(value);\r\n            case 'style': return this.sanitizer.bypassSecurityTrustStyle(value);\r\n            case 'script': return this.sanitizer.bypassSecurityTrustScript(value);\r\n            case 'url': return this.sanitizer.bypassSecurityTrustUrl(value);\r\n            case 'resourceUrl': return this.sanitizer.bypassSecurityTrustResourceUrl(value);\r\n            default: throw new Error(`Invalid safe type specified: ${type}`);\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ICacheContent } from '../../../types/services/cache/i-cache-content';\r\n\r\nconst DEFAULT_MAX_AGE = 300000;\r\n\r\n/**\r\n * A simple cache mechanism to store expirable values of any type indexed by a string key\r\n */\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class CacheService {\r\n\r\n    private cache: {\r\n        [key: string]: ICacheContent;\r\n    } = {};\r\n\r\n    constructor() { }\r\n\r\n    /**\r\n     * Gets the cached value by key value\r\n     *\r\n     * @param key\r\n     */\r\n    get(key: string): any {\r\n\r\n        // Find the current entry\r\n        const entry = this.cache[key];\r\n\r\n        if (entry) {\r\n            // If the entry has expired, remove from cache\r\n            if (entry.expiry && entry.expiry < Date.now()) {\r\n                delete this.cache[key];\r\n            }\r\n\r\n            return entry.value;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Adds or updates the value to the cache indexed by the provided key\r\n     *\r\n     * @param key Indexing key\r\n     * @param value Value to be cached\r\n     * @param maxAge Maximum age in milliseconds, NULL / 0 (zero) / false will set no expiry\r\n     */\r\n    set(key: string, value: any, maxAge: number = DEFAULT_MAX_AGE): void {\r\n\r\n        // Find the current entry\r\n        const entry = this.get(key);\r\n\r\n        // Remove entry\r\n        if (!!entry) {\r\n            delete this.cache[key];\r\n        }\r\n\r\n        // New entry added\r\n        this.cache[key] = {\r\n            value, expiry: (!!maxAge ? Date.now() + maxAge : null)\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Removes a value from the cache\r\n     *\r\n     * @param key\r\n     */\r\n    public remove(key: string) {\r\n        delete this.cache[key];\r\n    }\r\n\r\n    /**\r\n     * Returns a collection of keys of values that have expired\r\n     */\r\n    public get expiredKeys(): string[] {\r\n\r\n        const keys: string[] = [];\r\n\r\n        for (const key in this.cache) {\r\n            if (this.cache.hasOwnProperty(key)) {\r\n\r\n                // Access entry\r\n                const entry = this.cache[key];\r\n\r\n                // If the entry has expired, add to keys collection\r\n                if (entry.expiry && entry.expiry < Date.now()) {\r\n                    keys.push(key);\r\n                }\r\n            }\r\n        }\r\n\r\n        return keys;\r\n    }\r\n\r\n    /**\r\n     * Returns a collection of all the keys regardless of expiry\r\n     */\r\n    public get allKeys(): string[] {\r\n\r\n        const keys: string[] = [];\r\n\r\n        for (const key in this.cache) {\r\n            if (this.cache.hasOwnProperty(key)) {\r\n                keys.push(key);\r\n            }\r\n        }\r\n\r\n        return keys;\r\n    }\r\n\r\n    /**\r\n     * Returns a collection of keys of valid (non-expired) items\r\n     */\r\n    public get validKeys(): string[] {\r\n\r\n        const keys: string[] = [];\r\n\r\n        for (const key in this.cache) {\r\n            if (this.cache.hasOwnProperty(key)) {\r\n\r\n                // Access entry\r\n                const entry = this.cache[key];\r\n\r\n                // If the entry has not expired, add to keys collection\r\n                if (!entry.expiry || (entry.expiry && entry.expiry >= Date.now())) {\r\n                    keys.push(key);\r\n                }\r\n            }\r\n        }\r\n\r\n        return keys;\r\n\r\n    }\r\n\r\n    /**\r\n     * Removes expired values from the cache, returning the keys removed\r\n     */\r\n    public purge(): string[] {\r\n\r\n        const keys: string[] = [];\r\n\r\n        for (const key in this.cache) {\r\n            if (this.cache.hasOwnProperty(key)) {\r\n\r\n                // Access entry\r\n                const entry = this.cache[key];\r\n\r\n                // If the entry has expired, remove from cache\r\n                if (entry.expiry && entry.expiry < Date.now()) {\r\n                    keys.push(key);\r\n                    delete this.cache[key];\r\n                }\r\n            }\r\n        }\r\n\r\n        return keys;\r\n    }\r\n\r\n    /**\r\n     * Removes all entries from the cache\r\n     */\r\n    public clear(): void {\r\n        for (const key in this.cache) {\r\n            if (this.cache.hasOwnProperty(key)) {\r\n                delete this.cache[key];\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockCanvasService } from '../../../testing/mock-services/canvas-service';\r\nimport { ICanvasService } from '../../../types/services/canvas/i-canvas.service';\r\n\r\nconst canvasServiceFactory = () => environment.devHarness === true\r\n    ? new MockCanvasService()\r\n    : sourceCode.k2Designer.core.environmentService.getService(sourceCode.k2Designer.services.studio.CanvasService);\r\n\r\nexport const CanvasServiceToken = new InjectionToken<ICanvasService>('ICanvasService');\r\n\r\nexport const CanvasServiceFactory = {\r\n    provide: CanvasServiceToken,\r\n    useFactory: canvasServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockClipboardService } from '../../../testing/mock-services/clipboard-service';\r\n\r\nconst clipboardServiceFactory = () => environment.devHarness === true\r\n    ? new MockClipboardService()\r\n    : sourceCode.k2Designer.core.environmentService.clipboardService;\r\n\r\nexport const ClipboardServiceToken = new InjectionToken<IClipboardService>('IClipboardService');\r\n\r\nexport const ClipboardServiceFactory = {\r\n    provide: ClipboardServiceToken,\r\n    useFactory: clipboardServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockCommandService } from '../../../testing/mock-services/command-service';\r\n\r\nconst commandServiceFactory = () => environment.devHarness === true\r\n    ? new MockCommandService()\r\n    : sourceCode.k2Designer.core.environmentService.commandService;\r\n\r\nexport const CommandServiceToken = new InjectionToken<ICommandService>('ICommandService');\r\n\r\nexport const CommandServiceFactory = {\r\n    provide: CommandServiceToken,\r\n    useFactory: commandServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockConfigPanelService } from '../../../testing/mock-services/config-panel-service';\r\nimport { IConfigPanelService } from '../../../types/services/config-panel/i-config-panel-service';\r\n\r\n\r\nconst configPanelServiceFactory = () => environment.devHarness === true\r\n    ? new MockConfigPanelService()\r\n    : sourceCode.k2Designer.core.environmentService.configPanelService;\r\n\r\nexport const ConfigPanelServiceToken = new InjectionToken<IConfigPanelService>('IConfigPanelService');\r\n\r\nexport const ConfigPanelServiceFactory = {\r\n    provide: ConfigPanelServiceToken,\r\n    useFactory: configPanelServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { Inject, Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { IConfigurationService } from '../../../types/services/configuration/i-configuration-service';\r\nimport { IEnvironmentService } from '../../../types/services/environment/i-environment-service';\r\nimport { EnvironmentServiceToken } from '../environment/environment-service-factory';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ConfigurationService implements IConfigurationService {\r\n    private _legacyConfigurationService: sourceCode.k2Designer.services.studio.IConfigurationService;\r\n    get legacyConfigurationService() {\r\n        if (!this._legacyConfigurationService) {\r\n            this._legacyConfigurationService = this.environmentService.getService(sourceCode.k2Designer.services.studio.ConfigurationService);\r\n        }\r\n        return this._legacyConfigurationService;\r\n    }\r\n\r\n    constructor(@Inject(EnvironmentServiceToken) private environmentService: IEnvironmentService) { }\r\n\r\n    getConfigValue(key: string): string {\r\n        return this._legacyConfigurationService.getConfigValue(key);\r\n    };\r\n\r\n    getWorkingHours(): Observable<string[] | string> {\r\n        return new Observable(subscriber => {\r\n            this.environmentService.dataService.httpGet('api/configuration/workinghours',\r\n                {\r\n                    host: this.environmentService.currentEnvironment.hostId\r\n                }, (result: string[] | string, error: boolean) => {\r\n                    if (error) {\r\n                        subscriber.error(result);\r\n                    } else {\r\n                        subscriber.next(result);\r\n                    }\r\n                }, this.environmentService, false);\r\n        });\r\n    };\r\n\r\n    getWorkingHoursUrl(): string {\r\n        let urlStr: string = this.getSmartFormsBaseUrl();\r\n\r\n        // All workflows\r\n        if (urlStr[urlStr.length - 1] !== '/') {\r\n            urlStr += '/Management/#WorkflowServer/WorkingHours';\r\n        }\r\n        else {\r\n            urlStr += 'Management/#WorkflowServer/WorkingHours';\r\n        }\r\n\r\n        return urlStr;\r\n    }\r\n\r\n    getSmartFormsBaseUrl(): string {\r\n\r\n        //Get the base url from web.config for environments that have splitted workspace, runtime and webservice applications in IIS.\r\n        const smartFormsRuntimeBaseUrl = this.environmentService.appSettings.SmartFormsRuntimeBaseUrl;\r\n        if (smartFormsRuntimeBaseUrl?.length > 0) {\r\n            if (smartFormsRuntimeBaseUrl[smartFormsRuntimeBaseUrl.length - 1] === '/') {\r\n                return smartFormsRuntimeBaseUrl.substring(0, smartFormsRuntimeBaseUrl.length - 1);\r\n            }\r\n            else {\r\n                return smartFormsRuntimeBaseUrl;\r\n            }\r\n        }\r\n        else {\r\n            //Use autodiscover webserviceUrl\r\n            return this.environmentService.autoDiscoverResult.webService.Value;\r\n        }\r\n    }\r\n\r\n    get installType(): string {\r\n        return this.environmentService.appSettings['InstallType'] || '';\r\n    }\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockContextProviderService } from '../../../testing/mock-services/context-provider-service';\r\nimport { IContextProviderService } from '../../../types/services/context-provider/i-context-provider-service';\r\n\r\nconst contextProviderServiceFactory = () => environment.devHarness === true\r\n    ? new MockContextProviderService()\r\n    : sourceCode.k2Designer.core.environmentService.activeStudioItem.getService(sourceCode.k2Designer.services.studioItem.ContextProviderService);\r\n\r\nexport const ContextProviderServiceToken = new InjectionToken<IContextProviderService>('IContextProviderService');\r\n\r\nexport const ContextProviderFactory = {\r\n    provide: ContextProviderServiceToken,\r\n    useFactory: contextProviderServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockDataService } from '../../../testing/mock-services/data-service';\r\nimport { IDataService } from '../../../types/services/data/i-data-service';\r\n\r\nconst dataServiceFactory = () => environment.devHarness === true\r\n    ? new MockDataService()\r\n    : sourceCode.k2Designer.core.environmentService.dataService;\r\n\r\nexport const DataServiceToken = new InjectionToken<IDataService>('IDataService');\r\n\r\nexport const DataServiceFactory = {\r\n    provide: DataServiceToken,\r\n    useFactory: dataServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockDesignerService } from '../../../testing/mock-services/designer-service';\r\nimport { IDesignerService } from '../../../types/services/designer/i-designer-service';\r\n\r\nconst designerServiceFactory = () => environment.devHarness === true\r\n    ? new MockDesignerService()\r\n    : sourceCode.k2Designer.core.environmentService.getService(sourceCode.k2Designer.services.studio.DesignerService);\r\n\r\nexport const DesignerServiceToken = new InjectionToken<IDesignerService>('IDesignerService');\r\n\r\nexport const DesignerServiceFactory = {\r\n    provide: DesignerServiceToken,\r\n    useFactory: designerServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { Inject, Injectable } from '@angular/core';\r\nimport { IDragDropService } from '../../../types/services/drag-drop/i-drag-drop.service';\r\nimport { LegacyDragDropServiceToken } from '../../legacy-service-factories/drag-drop-service-factory';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class DragDropService {\r\n\r\n    private _isBusyDragging = false;\r\n\r\n    constructor(@Inject(LegacyDragDropServiceToken) private _legacyDragDropService: IDragDropService) {\r\n    }\r\n\r\n\r\n    /**\r\n     * Flag to indicate whether any drag operation is in progress.\r\n     * This is equivalent to the old static sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._isDragging.\r\n     * TODO: When drag drop service entirely migrated, sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._isDragging\r\n     * check can be removed\r\n     */\r\n    public get isBusyDragging(): boolean {\r\n        return (this._isBusyDragging && sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._isDragging);\r\n    }\r\n\r\n    /**\r\n     * Set a global flag to indicate whether any drag operation is in progress.\r\n     * This is equivalent to setting the old static sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._isDragging.\r\n     * TODO: When drag drop service entirely migrated, sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._isDragging\r\n     * check can be removed\r\n     */\r\n    public set isBusyDragging(isBusy: boolean) {\r\n        this._isBusyDragging = isBusy;\r\n        sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._isDragging = isBusy;\r\n    }\r\n\r\n    /**\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    get isEnabled(): boolean {\r\n        return this._legacyDragDropService.isEnabled;\r\n    }\r\n\r\n    /**\r\n     * Sets the data object for the specified data-data type\r\n     *\r\n     * @param type The type of data to set (used as the ID of the data)\r\n     * @param data The data that is associated with the data type\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    setItem<sourceType, dragType, dropType>(type: string, data: sourceCode.k2Designer.objectModel.dragDropService.IDragDropData): void {\r\n        this._legacyDragDropService.setItem(type, data);\r\n    }\r\n\r\n    /**\r\n     * Returns true if data is associated with the specified data type\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    hasItem(type: string): boolean {\r\n        return this._legacyDragDropService.hasItem(type);\r\n    }\r\n\r\n    /**\r\n     * Returns the data object associated with the specified data type, without removing it from the drag object\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    peekItem<sourceType, dragType, dropType>(type: string): sourceCode.k2Designer.objectModel.dragDropService.IDragDropData {\r\n        return this._legacyDragDropService.peekItem(type);\r\n    }\r\n\r\n    /**\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    listenDragStarted(callback: IDragStartedCallback): sourceCode.k2Designer.objectModel.core.model.IEventRemover {\r\n        return this._legacyDragDropService.listenDragStarted(callback);\r\n    }\r\n\r\n    /**\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    listenDragStopped(callback: IDragStoppedCallback): sourceCode.k2Designer.objectModel.core.model.IEventRemover {\r\n        return this._legacyDragDropService.listenDragStopped(callback);\r\n    }\r\n\r\n    /**\r\n     * Returns the data object associated with the specified data type, removing it from the drag object and invoking\r\n     * all notify-on-drop methods associated with it\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    getItem<sourceType, dragType, dropType>(type: string): sourceCode.k2Designer.objectModel.dragDropService.IDragDropData {\r\n        return this._legacyDragDropService.getItem(type);\r\n    }\r\n\r\n    /**\r\n     * Specifies a method that must be invoked when the data of the specified type is successfully dropped\r\n     * Internal Method\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    setNotifyOnDropped<sourceType, dragType, dropType>(fn: (type: string, data: sourceCode.k2Designer.objectModel.dragDropService.IDragDropData) => boolean): void {\r\n        this._legacyDragDropService.setNotifyOnDropped(fn);\r\n    }\r\n\r\n    /**\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    notifyDragStarted(type: string, data: sourceCode.k2Designer.objectModel.dragDropService.IDragDropData): void {\r\n        this._legacyDragDropService.notifyDragStarted(type, data);\r\n    }\r\n\r\n    /**\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    notifyDragStopped(): void {\r\n        this._legacyDragDropService.notifyDragStopped();\r\n    }\r\n\r\n    enable(): void {\r\n        this._legacyDragDropService.enable();\r\n    }\r\n\r\n    disable(): void {\r\n        this._legacyDragDropService.disable();\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { DropDownMenuComponent } from 'src/app/components/common/drop-down/drop-down-menu/drop-down-menu.component';\r\nimport { IDropDownService } from 'src/types/services/drop-down/i-drop-down.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class DropDownService implements IDropDownService {\r\n    private _menus: DropDownMenuComponent[] = [];\r\n\r\n    constructor() {\r\n    }\r\n\r\n    /**\r\n     * Registers a Drop Down Menu with the service\r\n     * Returns the index of the registered menu\r\n     */\r\n    registerMenu = (menu: DropDownMenuComponent): number =>  {\r\n        this._menus.push(menu);\r\n        return this._menus.length - 1;\r\n    };\r\n\r\n    /**\r\n     * Registers a Drop Down Menu with the service\r\n     * This should be called from the ngOnDestroy in the dropdownmenu component\r\n     */\r\n    deRegisterMenu = (menu: DropDownMenuComponent) => {\r\n        this._menus.splice(this._menus.indexOf(menu), 1);\r\n    };\r\n\r\n    /**\r\n     * Collapse all dropdown menus, except for the one passed in.\r\n     *\r\n     * @param menu Dropdown menu component\r\n     */\r\n    collapseAllExcept = (menu: DropDownMenuComponent) => {\r\n        this._menus.forEach( x => {\r\n            if( x !== menu){\r\n                x.collapseMenu();\r\n            }\r\n        });\r\n    };\r\n\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { IEnvironmentService } from 'src/types/services/environment/i-environment-service';\r\nimport { MockEnvironmentService } from '../../../testing/mock-services/environment-service';\r\n\r\nconst environmentServiceFactory = () => environment.devHarness === true\r\n    ? new MockEnvironmentService()\r\n    : sourceCode.k2Designer.core.environmentService;\r\n\r\nexport const EnvironmentServiceToken = new InjectionToken<IEnvironmentService>('IEnvironmentService');\r\n\r\nexport const EnvironmentServiceFactory = {\r\n    provide: EnvironmentServiceToken,\r\n    useFactory: environmentServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { EventEmitter, Injectable } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class EventNotifierService {\r\n    private events: EventEmitter<any>[];\r\n    constructor() {\r\n        this.events = [];\r\n    }\r\n\r\n    /**\r\n     * subscribe to the event defined by the key\r\n     * create if it does not yet exist\r\n     *\r\n     * @param key key of the event\r\n     * @param cb function to call on event\r\n     */\r\n    public subscribe(key: string, cb: Function): Subscription {\r\n        let event: EventEmitter<any> = this.events[key];\r\n        if (!event) {\r\n            event = new EventEmitter<any>();\r\n            this.events[key] = event;\r\n        }\r\n\r\n        if (typeof (cb) === 'function') {\r\n            return event.subscribe((data) => {\r\n                cb(data);\r\n            });\r\n        } else {\r\n            throw new Error('Subscription requires a callback function');\r\n        }\r\n    }\r\n    /**\r\n     * Add event to the event list\r\n     * if it does not yet exist\r\n     * otherwise return existing\r\n     *\r\n     * @param key key of event to add\r\n     */\r\n    public addEvent(key: string): EventEmitter<any> {\r\n        let event: EventEmitter<any> = this.events[key];\r\n        if (!event) {\r\n            event = new EventEmitter<any>();\r\n            this.events[key] = event;\r\n        }\r\n        return event;\r\n    }\r\n}\r\n","import { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Inject, Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { IEnvironmentField } from '../../../types/models/core/external-reference-definitions/i-environment-field';\r\nimport { IExternalReferenceDefinition } from '../../../types/models/core/external-reference-definitions/i-external-reference-definition';\r\nimport { ISmartForm } from '../../../types/models/core/external-reference-definitions/i-smart-form';\r\nimport { ISmartObjectField } from '../../../types/models/core/external-reference-definitions/smart-objects/i-smart-object-field';\r\nimport { ISmartObjectMethodField } from '../../../types/models/core/external-reference-definitions/smart-objects/i-smart-object-method-field';\r\nimport { ISmartObjectPropertyField } from '../../../types/models/core/external-reference-definitions/smart-objects/i-smart-object-property-field';\r\nimport { IEnvironmentService } from '../../../types/services/environment/i-environment-service';\r\nimport { INotificationService } from '../../../types/services/notification/i-notification.service';\r\nimport { IValidatedComponent } from '../../../types/validation/i-validated-component';\r\nimport { ComponentIdMapping } from '../../shared/constants/components';\r\nimport { ExternalReferenceState } from '../../shared/enums/external-references/external-references';\r\nimport { CacheService } from '../cache/cache.service';\r\nimport { EnvironmentServiceToken } from '../environment/environment-service-factory';\r\nimport { NotificationServiceToken } from '../notification/notification-service-factory';\r\nimport { ProcessService } from '../process/process.service';\r\nimport { ResourceService } from '../resource/resource.service';\r\n\r\n/**\r\n * Service to manage references to external components\r\n */\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ExternalReferenceService {\r\n    private enableFeature: boolean;\r\n\r\n    constructor(@Inject(EnvironmentServiceToken) private environmentService: IEnvironmentService,\r\n        private processService: ProcessService,\r\n        private cache: CacheService,\r\n        private resourceService: ResourceService,\r\n        private http: HttpClient,\r\n        @Inject(NotificationServiceToken) private notificationService: INotificationService) {\r\n\r\n        this.enableFeature = this.environmentService.currentEnvironment.defaultConfig.externalReferenceService.enable;\r\n    }\r\n\r\n    /**\r\n     * Adds an external reference to the service's cache\r\n     *\r\n     * @param externalReference\r\n     */\r\n    addExternalReferenceToCache(externalReference: IExternalReferenceDefinition): void {\r\n        this.cache.set(externalReference.getReference(), (externalReference.implementor as any).name);\r\n    }\r\n\r\n    /**\r\n     * Loads all external references of the process to the service's cache and set them ready for immediate update\r\n     */\r\n    loadAllExternalReferencesToCache(): void {\r\n\r\n        for (const exRef of this.processService.root.externalReferenceDefinitions) {\r\n            // Add to cache but expire immediately to ensure that each reference will be refreshed\r\n            this.cache.set(exRef.getReference(), (exRef.implementor as any).name, -1);\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Fetches updated details of all expired external references and updates them accordingly\r\n     */\r\n    updateExternalReferences(): Observable<any> {\r\n\r\n        const refreshReferences: string[] = this.cache.purge();\r\n\r\n        return this.validateExternalReferences(refreshReferences);\r\n\r\n    }\r\n\r\n    /**\r\n     * Validates and updates all external references\r\n     *\r\n     * @param paths Collection of reference paths to external references to be validated, if none are passed,\r\n     *              all external references will be validated\r\n     */\r\n    validateExternalReferences(paths: string[] = []): Observable<any> {\r\n\r\n        return new Observable<any>(subscriber => {\r\n\r\n            if (!this.enableFeature) {\r\n                // Feature is disabled, resolving validation as successful\r\n                subscriber.complete();\r\n            }\r\n            else {\r\n\r\n                const sfFields: ISmartForm[] = [];\r\n                const envFields: IEnvironmentField[] = [];\r\n                const smoFields: ISmartObjectField[] = [];\r\n\r\n                this.processService.root.externalReferenceDefinitions.filter((extRef: IExternalReferenceDefinition): boolean =>\r\n                    paths.length === 0 || paths.indexOf(extRef.getReference()) > -1\r\n                ).forEach((extRef: IExternalReferenceDefinition): void => {\r\n\r\n                    // Only validate an external reference if it has dependencies\r\n                    if (this.processService.trackedReferenceHasChildren(extRef.getReference())) {\r\n\r\n                        switch (extRef.componentId) {\r\n\r\n                            case ComponentIdMapping.SmartFormsExternalReference:\r\n                                sfFields.push(extRef as ISmartForm);\r\n\r\n                                break;\r\n\r\n                            case ComponentIdMapping.EnvironmentFieldExternalReference:\r\n                                envFields.push(extRef as IEnvironmentField);\r\n\r\n                                break;\r\n\r\n                            case ComponentIdMapping.SmartObjectFieldExternalReference:\r\n                                smoFields.push(extRef as ISmartObjectField);\r\n\r\n                                break;\r\n                        }\r\n\r\n                    }\r\n\r\n                });\r\n\r\n                // Validate SmartObject external references\r\n                if (smoFields.length > 0) {\r\n\r\n                    this.getSmartObjectFieldData(smoFields).subscribe({\r\n                        next: (responseData: any) => {\r\n                            if (!this.validateAndUpdateSmartObjectFields(smoFields, responseData)) {\r\n                                subscriber.error(smoFields);\r\n                            }\r\n                            else {\r\n                                subscriber.next(smoFields);\r\n                            }\r\n                        }, error: (err: string) => {\r\n                            console.error(err);\r\n                            subscriber.error(err);\r\n                        }\r\n                    });\r\n                }\r\n\r\n                // Validate Environment Field external references\r\n                if (envFields.length) {\r\n                    /* TODO - Validation for EnvironmentField references  to be added here - */\r\n                }\r\n\r\n                // Validate SmartForms external references\r\n                if (sfFields.length) {\r\n                    /* TODO - Validation for SmartForm references  to be added here - */\r\n                }\r\n\r\n                // Resolve the subscription with the outcomes of the validation\r\n                subscriber.complete();\r\n            };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Performs a clean-up of unused external references, to reduce dependencies\r\n     */\r\n    removeUnusedExternalReferences(): void {\r\n\r\n        if (this.enableFeature) {\r\n            let index = 0;\r\n\r\n            while (index < this.processService.root.externalReferenceDefinitions.length) {\r\n\r\n                const extRef = this.processService.root.externalReferenceDefinitions[index];\r\n\r\n                if (extRef.componentId === ComponentIdMapping.SmartObjectFieldExternalReference) {\r\n\r\n                    let methodIndex = 0;\r\n\r\n                    while (methodIndex < (extRef as ISmartObjectField).methods.length) {\r\n\r\n                        const method: ISmartObjectMethodField = (extRef as ISmartObjectField).methods[methodIndex];\r\n\r\n                        let propIndex = 0;\r\n\r\n                        while (propIndex < method.inputs.length) {\r\n\r\n                            if (method.inputs[propIndex].state === ExternalReferenceState.Missing &&\r\n                                !this.processService.trackedReferenceHasChildren(method.inputs[propIndex].getReference())) {\r\n                                method.inputs[propIndex].removeFromModelArray();\r\n                            }\r\n\r\n                            propIndex++;\r\n\r\n                        }\r\n\r\n                        propIndex = 0;\r\n\r\n                        while (propIndex < method.parameters.length) {\r\n\r\n                            if (method.parameters[propIndex].state === ExternalReferenceState.Missing &&\r\n                                !this.processService.trackedReferenceHasChildren(method.parameters[propIndex].getReference())) {\r\n                                method.parameters[propIndex].removeFromModelArray();\r\n                            }\r\n\r\n                            propIndex++;\r\n\r\n                        }\r\n\r\n                        propIndex = 0;\r\n\r\n                        while (propIndex < method.returns.length) {\r\n\r\n                            if (method.returns[propIndex].state === ExternalReferenceState.Missing &&\r\n                                !this.processService.trackedReferenceHasChildren(method.returns[propIndex].getReference())) {\r\n                                method.returns[propIndex].removeFromModelArray();\r\n                            }\r\n\r\n                            propIndex++;\r\n\r\n                        }\r\n\r\n                        if (method.state === ExternalReferenceState.Missing &&\r\n                            !this.processService.trackedReferenceHasChildren(method.getReference())) {\r\n                            method.removeFromModelArray();\r\n                        }\r\n\r\n                        methodIndex++;\r\n                    }\r\n\r\n                }\r\n\r\n                if (extRef.state === ExternalReferenceState.Missing &&\r\n                    !this.processService.trackedReferenceHasChildren(extRef.getReference())) {\r\n                    extRef.removeFromModelArray();\r\n                }\r\n\r\n                index++;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    private getSmartObjectFieldData(smoFields: ISmartObjectField[]): Observable<any> {\r\n\r\n        return new Observable<any>(subscriber => {\r\n\r\n            const options = {\r\n                params: new HttpParams()\r\n                    .set('host', this.environmentService?.currentEnvironment.hostId)\r\n                    .set('source', JSON.stringify(smoFields.map((smoField: ISmartObjectField): any => smoField.getJson())))\r\n            };\r\n\r\n            this.http\r\n                .post<string>('api/smartobject/getsmartobjectreferences', options)\r\n                .subscribe({\r\n                    next: (responseData: any) => {\r\n                        subscriber.next(responseData);\r\n                        subscriber.complete();\r\n                    }, error: (err: string) => {\r\n                        console.error(err);\r\n                        subscriber.error(err);\r\n                    }\r\n                });\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * Validates the original SmartObject external reference definitions against the returned server response\r\n     *\r\n     * @param originalSmoFields Original SmartObject external reference definitions to be validated\r\n     * @param smoFields SmartObject external reference definitions to validate against\r\n     * @param cascade Cascade the validation state of a parent field to child fields\r\n     */\r\n    private validateAndUpdateSmartObjectFields(originalSmoFields: ISmartObjectField[],\r\n        smoFields: ISmartObjectField[], cascade: boolean = false): boolean {\r\n\r\n        let hasErrors = false;\r\n\r\n        originalSmoFields.forEach((originalSmoField: ISmartObjectField): boolean => {\r\n\r\n            // Find the existing field in the returned collection\r\n            let search = smoFields.filter((field: ISmartObjectField) =>\r\n                field.systemName === originalSmoField.systemName\r\n            );\r\n\r\n            // If found, it still exists\r\n            const smoField: ISmartObjectField = search.length === 1 ? search[0] : null;\r\n\r\n            if (!!smoField) {\r\n\r\n                // External Reference is valid\r\n                originalSmoField.state = ExternalReferenceState.Valid;\r\n\r\n                // Update the details of the SmartObject\r\n                if (originalSmoField.displayName !== smoField.displayName) {\r\n                    originalSmoField.displayName = smoField.displayName;\r\n                }\r\n\r\n                if (originalSmoField.description !== smoField.description) {\r\n                    originalSmoField.description = smoField.description;\r\n                }\r\n\r\n                // Update each method\r\n                originalSmoField.methods.forEach((originalMethod: ISmartObjectMethodField): boolean => {\r\n\r\n                    // Find the existing method in the returned SmartObject\r\n                    search = smoField.methods.filter((method: ISmartObjectMethodField): boolean =>\r\n                        method.systemName === originalMethod.systemName);\r\n\r\n                    const updatedMethod: ISmartObjectMethodField = search.length === 1 ? search[0] : null;\r\n\r\n                    if (!!updatedMethod) {\r\n                        // Method still exists\r\n                        originalMethod.state = ExternalReferenceState.Valid;\r\n\r\n                        // Update the details of the method\r\n                        if (originalMethod.displayName !== updatedMethod.displayName) {\r\n                            originalMethod.displayName = updatedMethod.displayName;\r\n                        }\r\n\r\n                        if (originalMethod.description !== updatedMethod.description) {\r\n                            originalMethod.description = updatedMethod.description;\r\n                        }\r\n\r\n                        if (originalMethod.type !== updatedMethod.type) {\r\n                            originalMethod.type = updatedMethod.type;\r\n                        }\r\n\r\n                        // Update parameters\r\n                        originalMethod.parameters.forEach((originalParameter: ISmartObjectPropertyField): boolean => {\r\n\r\n                            // Find the existing parameter in the returned method\r\n                            search = updatedMethod.parameters.filter((param: ISmartObjectPropertyField): boolean => {\r\n                                switch (param.type) {\r\n                                    case 'file':\r\n                                    case 'image':\r\n                                    case 'hyperlink':\r\n                                        return param.systemName === originalParameter.systemName ||\r\n                                            (param.systemName + '.XML') === originalParameter.systemName;\r\n                                    default:\r\n                                        return param.systemName === originalParameter.systemName;\r\n                                }\r\n                            });\r\n\r\n                            const updatedParameter = search.length === 1 ? search[0] as ISmartObjectPropertyField : null;\r\n\r\n                            if (!!updatedParameter) {\r\n                                // Parameter still exists\r\n                                originalParameter.state = ExternalReferenceState.Valid;\r\n\r\n                                // Update the details of the parameter\r\n                                if (originalParameter.displayName !== updatedParameter.displayName) {\r\n                                    originalParameter.displayName = updatedParameter.displayName;\r\n                                }\r\n\r\n                                if (originalParameter.description !== updatedParameter.description) {\r\n                                    originalParameter.description = updatedParameter.description;\r\n                                }\r\n\r\n                                if (originalParameter.type !== updatedParameter.type) {\r\n                                    originalParameter.type = updatedParameter.type;\r\n                                }\r\n\r\n                                if (originalParameter.isRequired !== updatedParameter.isRequired) {\r\n                                    originalParameter.isRequired = updatedParameter.isRequired;\r\n                                }\r\n                            }\r\n                            else {\r\n                                // Parameter no longer exists, removing it\r\n                                hasErrors = this.raiseExternalReferenceError(originalParameter);\r\n                            }\r\n\r\n                            return true;\r\n\r\n                        });\r\n\r\n                        // Update input parameters\r\n                        originalMethod.inputs.forEach((originalParameter: ISmartObjectPropertyField): boolean => {\r\n\r\n                            // Find the existing parameter in the returned method\r\n                            search = updatedMethod.inputs.filter((param: ISmartObjectPropertyField): boolean => {\r\n                                switch (param.type) {\r\n                                    case 'file':\r\n                                    case 'image':\r\n                                    case 'hyperlink':\r\n                                        return param.systemName === originalParameter.systemName ||\r\n                                            (param.systemName + '.XML') === originalParameter.systemName;\r\n                                    default:\r\n                                        return param.systemName === originalParameter.systemName;\r\n                                }\r\n                            });\r\n\r\n                            const updatedParameter = search.length === 1 ? search[0] as ISmartObjectPropertyField : null;\r\n\r\n                            if (!!updatedParameter) {\r\n                                // Parameter still exists\r\n                                originalParameter.state = ExternalReferenceState.Valid;\r\n\r\n                                // Update the details of the parameter\r\n                                if (originalParameter.displayName !== updatedParameter.displayName) {\r\n                                    originalParameter.displayName = updatedParameter.displayName;\r\n                                }\r\n\r\n                                if (originalParameter.description !== updatedParameter.description) {\r\n                                    originalParameter.description = updatedParameter.description;\r\n                                }\r\n\r\n                                if (originalParameter.type !== updatedParameter.type) {\r\n                                    originalParameter.type = updatedParameter.type;\r\n                                }\r\n\r\n                                if (originalParameter.isRequired !== updatedParameter.isRequired) {\r\n                                    originalParameter.isRequired = updatedParameter.isRequired;\r\n                                }\r\n                            }\r\n                            else {\r\n                                // Parameter no longer exists, removing it\r\n                                hasErrors = this.raiseExternalReferenceError(originalParameter);\r\n                            }\r\n\r\n                            return true;\r\n\r\n                        });\r\n\r\n                        // Update return parameters\r\n                        originalMethod.returns.forEach((originalParameter: ISmartObjectPropertyField): boolean => {\r\n\r\n                            // Find the existing parameter in the returned method\r\n                            search = updatedMethod.returns.filter((param: ISmartObjectPropertyField): boolean => {\r\n                                switch (param.type) {\r\n                                    case 'file':\r\n                                    case 'image':\r\n                                    case 'hyperlink':\r\n                                        return param.systemName === originalParameter.systemName\r\n                                            || (param.systemName + '.XML') === originalParameter.systemName\r\n                                            || (param.systemName + '.FileName') === originalParameter.systemName\r\n                                            || (param.systemName + '.Content') === originalParameter.systemName;\r\n                                    default:\r\n                                        return param.systemName === originalParameter.systemName;\r\n                                }\r\n                            });\r\n\r\n                            const updatedParameter = search.length === 1 ? search[0] as ISmartObjectPropertyField : null;\r\n\r\n                            if (!!updatedParameter) {\r\n                                // Parameter still exists\r\n                                originalParameter.state = ExternalReferenceState.Valid;\r\n\r\n                                // Update the details of the parameter\r\n                                if (originalParameter.displayName !== updatedParameter.displayName) {\r\n                                    originalParameter.displayName = updatedParameter.displayName;\r\n                                }\r\n\r\n                                if (originalParameter.description !== updatedParameter.description) {\r\n                                    originalParameter.description = updatedParameter.description;\r\n                                }\r\n\r\n                                if (originalParameter.type !== updatedParameter.type) {\r\n                                    originalParameter.type = updatedParameter.type;\r\n                                }\r\n                            }\r\n                            else {\r\n                                // Parameter no longer exists, removing it\r\n                                hasErrors = this.raiseExternalReferenceError(originalParameter);\r\n                            }\r\n\r\n                            return true;\r\n                        });\r\n\r\n                    }\r\n                    else {\r\n                        // Method no longer exists, need to remove it\r\n                        hasErrors = this.raiseExternalReferenceError(originalMethod);\r\n\r\n                        if (cascade) {\r\n                            // Cascade validation states to child fields\r\n                            originalMethod.parameters.forEach((param: ISmartObjectPropertyField): void => {\r\n                                this.raiseExternalReferenceError(param);\r\n                            });\r\n\r\n                            originalMethod.inputs.forEach((param: ISmartObjectPropertyField): void => {\r\n                                this.raiseExternalReferenceError(param);\r\n                            });\r\n\r\n                            originalMethod.returns.forEach((param: ISmartObjectPropertyField): void => {\r\n                                this.raiseExternalReferenceError(param);\r\n                            });\r\n                        }\r\n\r\n                    }\r\n\r\n                    return true;\r\n                });\r\n\r\n            }\r\n            else {\r\n                // SmartObject no longer exists, need to remove it\r\n                hasErrors = this.raiseExternalReferenceError(originalSmoField);\r\n\r\n                if (cascade) {\r\n                    // Cascade validation states to child fields\r\n                    originalSmoField.methods.forEach((method: ISmartObjectMethodField): void => {\r\n                        this.raiseExternalReferenceError(method);\r\n\r\n                        method.parameters.forEach((param: ISmartObjectPropertyField): void => {\r\n                            this.raiseExternalReferenceError(param);\r\n                        });\r\n\r\n                        method.inputs.forEach((param: ISmartObjectPropertyField): void => {\r\n                            this.raiseExternalReferenceError(param);\r\n                        });\r\n\r\n                        method.returns.forEach((param: ISmartObjectPropertyField): void => {\r\n                            this.raiseExternalReferenceError(param);\r\n                        });\r\n                    });\r\n                }\r\n\r\n            }\r\n\r\n            return true;\r\n        });\r\n\r\n        return !hasErrors;\r\n\r\n    }\r\n\r\n    /**\r\n     * Raise an error on all of its dependencies to the external reference definition\r\n     *\r\n     * @param externalReference External Reference Definition in error\r\n     * @returns Returns true if any errors was raised else false\r\n     */\r\n    private raiseExternalReferenceError(externalReference: IExternalReferenceDefinition): boolean {\r\n\r\n        // Set State Flag on External Reference\r\n        externalReference.state = ExternalReferenceState.Missing;\r\n\r\n        // Raise validation errors on all references to the affected external reference\r\n        const referenceItems = this.processService.getTrackedReferencesForNode(externalReference.getReference());\r\n\r\n        for (const item of referenceItems) {\r\n\r\n            const objectPath: string = item.substr(0, item.lastIndexOf('.'));\r\n            const objectProperty: string = item.substr(item.lastIndexOf('.') + 1);\r\n\r\n            const modelObject = this.processService.root.findItem<IValidatedComponent>(objectPath);\r\n\r\n            // A collection should not have a property that can reference an external reference definition\r\n            if (modelObject && !Array.isArray(modelObject[objectProperty])) {\r\n                this.processService.raiseReferenceError(modelObject, objectProperty, externalReference.getReference());\r\n            }\r\n        }\r\n\r\n        return referenceItems.length > 0;\r\n\r\n    }\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockFilterPanelService } from '../../../testing/mock-services/filter-panel-service';\r\nimport { IFilterPanelService } from '../../../types/services/filter-panel/i-filter-panel';\r\n\r\n\r\nconst filterPanelServiceFactory = () => environment.devHarness === true\r\n    ? new MockFilterPanelService()\r\n    : sourceCode.k2Designer.core.environmentService.getService(sourceCode.k2Designer.services.studio.FilterPanelService);\r\n\r\nexport const FilterPanelServiceToken = new InjectionToken<IFilterPanelService>('IFilterPanelService');\r\n\r\nexport const FilterPanelServiceFactory = {\r\n    provide: FilterPanelServiceToken,\r\n    useFactory: filterPanelServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockHelpService } from '../../../testing/mock-services/help-service';\r\nimport { IHelpService } from '../../../types/services/help/i-help-service';\r\n\r\nconst helpServiceFactory = () => environment.devHarness === true\r\n    ? new MockHelpService()\r\n    : sourceCode.k2Designer.core.environmentService.helpService;\r\n\r\nexport const HelpServiceToken = new InjectionToken<IHelpService>('IHelpService');\r\n\r\nexport const HelpServiceFactory = {\r\n    provide: HelpServiceToken,\r\n    useFactory: helpServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { Inject, Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { IDataService } from 'src/types/services/data/i-data-service';\r\nimport { EnvironmentServiceToken } from '../environment/environment-service-factory';\r\nimport { IEnvironmentService } from 'src/types/services/environment/i-environment-service';\r\nimport { IIdentityService } from 'src/types/services/identity/i-identity-service';\r\nimport { DataServiceToken } from '../data/data-service-factory';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class IdentityService implements IIdentityService{\r\n\r\n    private _executingHash: number;\r\n\r\n    constructor(\r\n        @Inject(DataServiceToken) private _dataService: IDataService,\r\n        @Inject(EnvironmentServiceToken) private _environmentService: IEnvironmentService\r\n    ) {\r\n    }\r\n\r\n    /**\r\n     * Retrive the identities by group.\r\n     *\r\n     * @param label Name of the group\r\n     * @param identityFqName identity Fully Qualified Name\r\n     * @returns\r\n     */\r\n    getIdentitiesByGroup(label: string, identityFqName: string): Observable<any> {\r\n        return new Observable(subscriber => {\r\n            this._dataService.httpGet('api/identity/identitiesbygroup',\r\n                {\r\n                    host: this._environmentService.currentEnvironment.hostId,\r\n                    label,\r\n                    identityFQName: identityFqName,\r\n                    page: 0,\r\n                    pageSize: 20\r\n                }, (result: any, error: boolean) => {\r\n                    if (error) {\r\n                        subscriber.error(result);\r\n                    } else {\r\n                        subscriber.next(result);\r\n                    }\r\n                });\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * Retrieves all the identity labels/groups\r\n     *\r\n     * @returns\r\n     */\r\n    getLabels(): Observable<any> {\r\n        // any is used in the WFD as well. :,(\r\n        return new Observable(subscriber => {\r\n            this._dataService.httpGet('api/identity/getlabels',\r\n                {\r\n                    host: this._environmentService.currentEnvironment.hostId\r\n                }, (result: any, error: boolean) => {\r\n                    if (error) {\r\n                        subscriber.error(result);\r\n                    } else {\r\n                        subscriber.next(result);\r\n                    }\r\n                });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Retrieves all the identities\r\n     *\r\n     * @param label label name\r\n     * @param filter partial name / filter\r\n     * @param returnTypes Types to include\r\n     * @returns\r\n     */\r\n    getIdentities(label: string, filter: string, returnTypes: string[]): Observable<any> {\r\n\r\n        if (this._executingHash) {\r\n            this._dataService.abortRequest(this._executingHash);\r\n        }\r\n\r\n        return new Observable(subscriber => {\r\n            this._executingHash = this._dataService.httpPost('api/identity/getidentities', {\r\n                host: this._environmentService.currentEnvironment.hostId,\r\n                label,\r\n                partialName: filter,\r\n                page: 0,\r\n                pageSize: 20,\r\n                typesToReturn: JSON.stringify(returnTypes)\r\n            }, (result: any, error: boolean) => {\r\n                if (error) {\r\n                    subscriber.error(result);\r\n                } else {\r\n                    subscriber.next(result);\r\n                }\r\n            },\r\n                this._environmentService,\r\n                true,\r\n                null,\r\n                false);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Aborts the current getIdentities request, if one is in progress\r\n     * */\r\n    abortGetIdentities(): void {\r\n        if(this._executingHash) {\r\n            this._dataService.abortRequest(this._executingHash);\r\n        }\r\n    }\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockItemProviderService } from '../../../testing/mock-services/item-provider-service';\r\nimport { IItemProviderService } from '../../../types/services/item-provider/i-item-provider-service';\r\n\r\nconst itemProviderServiceFactory = () => environment.devHarness === true\r\n    ? new MockItemProviderService()\r\n    : sourceCode.k2Designer.core.environmentService.getService(sourceCode.k2Designer.services.studio.ItemProviderService);\r\n\r\nexport const ItemProviderServiceToken = new InjectionToken<IItemProviderService>('IItemProviderService');\r\n\r\nexport const ItemProviderServiceFactory = {\r\n    provide: ItemProviderServiceToken,\r\n    useFactory: itemProviderServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockNotificationService } from '../../../testing/mock-services/notification-service';\r\nimport { INotificationService } from '../../../types/services/notification/i-notification.service';\r\n\r\nconst notificationServiceFactory = () => environment.devHarness === true\r\n    ? new MockNotificationService()\r\n    : sourceCode.k2Designer.core.environmentService.notificationService;\r\n\r\nexport const NotificationServiceToken = new InjectionToken<INotificationService>('INotificationService');\r\n\r\nexport const NotificationServiceFactory = {\r\n    provide: NotificationServiceToken,\r\n    useFactory: notificationServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockObjectModelService } from '../../../testing/mock-services/object-model-service';\r\nimport { IObjectModelService } from '../../../types/services/object-model/i-object-model-service';\r\n\r\nconst objectModelServiceFactory = () => environment.devHarness === true\r\n    ? new MockObjectModelService()\r\n    : sourceCode.k2Designer.core.environmentService.activeStudioItem.getService(sourceCode.k2Designer.services.studioItem.ObjectModelService);\r\n\r\nexport const ObjectModelServiceToken =\r\n    new InjectionToken<IObjectModelService<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process>>('IObjectModelService');\r\n\r\nexport const ObjectModelServiceFactory = {\r\n    provide: ObjectModelServiceToken,\r\n    useFactory: objectModelServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockPluginService } from '../../../testing/mock-services/plugin-service';\r\nimport { IPluginService } from '../../../types/services/plugin/i-plugin-service';\r\n\r\nconst pluginServiceFactory = () => environment.devHarness === true\r\n    ? new MockPluginService()\r\n    : sourceCode.k2Designer.core.environmentService.pluginService;\r\n\r\nexport const PluginServiceToken = new InjectionToken<IPluginService>('IPluginService');\r\n\r\nexport const PluginServiceFactory = {\r\n    provide: PluginServiceToken,\r\n    useFactory: pluginServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { Injectable } from '@angular/core';\r\nimport { SmartObjectItemTypes } from '../../../shared/enums/model/workflow/item-provider/smart-object-item-types';\r\nimport { DataFieldTypes } from '../../../shared/enums/model/workflow/process/data-field-types';\r\nimport { IEnumLookupPair } from '../../../shared/models/i-enum-lookup-pair';\r\nimport { ResourceService } from '../../resource/resource.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class DataTypeResolverService {\r\n\r\n    constructor(private resourceService: ResourceService) { }\r\n\r\n    public getSpriteClassFromDataType(type: string): string {\r\n        let retClass = '';\r\n\r\n        if (type != null) {\r\n            switch (type.toString()) {\r\n                case '0':\r\n                    retClass = 'yesno';\r\n                    break;\r\n                case '1':\r\n                    retClass = 'datetime';\r\n                    break;\r\n                case '2':\r\n                    retClass = 'decimal';\r\n                    break;\r\n                case '4':\r\n                    retClass = 'number';\r\n                    break;\r\n                case '6':\r\n                    retClass = 'text';\r\n                    break;\r\n\r\n                default:\r\n                    retClass = 'text';\r\n            }\r\n        }\r\n\r\n        return retClass;\r\n    }\r\n\r\n\r\n    public getSpriteClassFromServerEnumDataType(type: number): string {\r\n        let retClass = '';\r\n\r\n        //The entry for the datatype in the db is incremeneted with 1 when you deploy.  It does not correspond directly to\r\n        //the enum in authoring datafieldtypes.\r\n        if (type !== null) {\r\n            switch (type.toString()) {\r\n                case '1':\r\n                    retClass = 'yesno';\r\n                    break;\r\n                case '2':\r\n                    retClass = 'datetime';\r\n                    break;\r\n                case '3':\r\n                    retClass = 'decimal';\r\n                    break;\r\n                case '4':\r\n                case '5':\r\n                case '6':\r\n                    retClass = 'number';\r\n                    break;\r\n                case '7':\r\n                    retClass = 'text';\r\n                    break;\r\n                default:\r\n                    retClass = 'text';\r\n            }\r\n        }\r\n\r\n        return retClass;\r\n    }\r\n\r\n    public getSmartObjectItemType(type: string): SmartObjectItemTypes {\r\n        if (type && type.length > 0) {\r\n            switch (type.toLowerCase()) {\r\n                case 'text':\r\n                    return SmartObjectItemTypes.text;\r\n                case 'number':\r\n                    return SmartObjectItemTypes.number;\r\n                case 'decimal':\r\n                    return SmartObjectItemTypes.decimal;\r\n                case 'yesno':\r\n                    return SmartObjectItemTypes.yesNo;\r\n                case 'datetime':\r\n                    return SmartObjectItemTypes.dateTime;\r\n                case 'date':\r\n                    return SmartObjectItemTypes.date;\r\n                default:\r\n                    return SmartObjectItemTypes.text;\r\n            }\r\n        }\r\n\r\n        return SmartObjectItemTypes.text;\r\n    }\r\n\r\n    /**\r\n     * Method to return the class name for the data type\r\n     * NOTE:  This will only work if the browser is in english, 'ic-jaNein' is not a valid class name for YesNo ext\r\n     *\r\n     * @param type Type id for smart object\r\n     */\r\n    public getSmartObjectSpriteClassFromDataType(type: number): string {\r\n        let retClass = sourceCode.k2Designer.objectModel.workflow.itemProvider.SmartObjectItemTypesImplementor(<SmartObjectItemTypes>(<number>type));\r\n\r\n        retClass = retClass.replace(/[\\\\\\/&-]/g, '');\r\n\r\n        return retClass.toLowerCase();\r\n    }\r\n\r\n    public getSmartObjectSpriteClassFromDataTypeByType(itemType: number): string {\r\n        let icon = '';\r\n        switch (itemType) {\r\n            case SmartObjectItemTypes.smartObject:\r\n                break;\r\n            case SmartObjectItemTypes.smartObjectCategory:\r\n                break;\r\n            case SmartObjectItemTypes.smartObjectMethod:\r\n                break;\r\n            case SmartObjectItemTypes.smartObjectExecution:\r\n                break;\r\n            case SmartObjectItemTypes.smartObjectTypes:\r\n                break;\r\n            case SmartObjectItemTypes.smartObjectServiceObjectNames:\r\n                break;\r\n            case SmartObjectItemTypes.autoGuid:\r\n                icon = 'autoguid';\r\n                break;\r\n            case SmartObjectItemTypes.autoNumber:\r\n                icon = 'autonumber';\r\n                break;\r\n            case SmartObjectItemTypes.date:\r\n                icon = 'date';\r\n                break;\r\n            case SmartObjectItemTypes.file:\r\n                icon = 'file';\r\n                break;\r\n            case SmartObjectItemTypes.guid:\r\n                icon = 'guid';\r\n                break;\r\n            case SmartObjectItemTypes.hyperlink:\r\n                icon = 'hyperlink';\r\n                break;\r\n            case SmartObjectItemTypes.image:\r\n                icon = 'image';\r\n                break;\r\n            case SmartObjectItemTypes.memo:\r\n                icon = 'memo';\r\n                break;\r\n            case SmartObjectItemTypes.multivalue:\r\n                icon = 'multivalue';\r\n                break;\r\n            case SmartObjectItemTypes.time:\r\n                icon = 'time';\r\n                break;\r\n            case SmartObjectItemTypes.xml:\r\n                icon = 'xml';\r\n                break;\r\n            case SmartObjectItemTypes.text:\r\n                icon = 'text';\r\n                break;\r\n            case SmartObjectItemTypes.number:\r\n                icon = 'number';\r\n                break;\r\n            case SmartObjectItemTypes.decimal:\r\n                icon = 'decimal';\r\n                break;\r\n            case SmartObjectItemTypes.yesNo:\r\n                icon = 'yesno';\r\n                break;\r\n            case SmartObjectItemTypes.dateTime:\r\n                icon = 'datetime';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return icon;\r\n    }\r\n\r\n    public getInlineFunctionSpriteClassFromDataType(itemType: number): string {\r\n        let icon = '';\r\n        switch (itemType) {\r\n            case SmartObjectItemTypes.smartObject:\r\n                break;\r\n            case SmartObjectItemTypes.smartObjectCategory:\r\n                break;\r\n            case SmartObjectItemTypes.smartObjectMethod:\r\n                break;\r\n            case SmartObjectItemTypes.smartObjectExecution:\r\n                break;\r\n            case SmartObjectItemTypes.smartObjectTypes:\r\n                break;\r\n            case SmartObjectItemTypes.smartObjectServiceObjectNames:\r\n                break;\r\n            case SmartObjectItemTypes.autoGuid:\r\n                icon = 'autoguid';\r\n                break;\r\n            case SmartObjectItemTypes.autoNumber:\r\n                icon = 'autonumber';\r\n                break;\r\n            case SmartObjectItemTypes.date:\r\n                icon = 'date';\r\n                break;\r\n            case SmartObjectItemTypes.file:\r\n                icon = 'file';\r\n                break;\r\n            case SmartObjectItemTypes.guid:\r\n                icon = 'guid';\r\n                break;\r\n            case SmartObjectItemTypes.hyperlink:\r\n                icon = 'hyperlink';\r\n                break;\r\n            case SmartObjectItemTypes.image:\r\n                icon = 'image';\r\n                break;\r\n            case SmartObjectItemTypes.memo:\r\n                icon = 'memo';\r\n                break;\r\n            case SmartObjectItemTypes.multivalue:\r\n                icon = 'multivalue';\r\n                break;\r\n            case SmartObjectItemTypes.time:\r\n                icon = 'time';\r\n                break;\r\n            case SmartObjectItemTypes.xml:\r\n                icon = 'xml';\r\n                break;\r\n            case SmartObjectItemTypes.text:\r\n                icon = 'text';\r\n                break;\r\n            case SmartObjectItemTypes.number:\r\n                icon = 'number';\r\n                break;\r\n            case SmartObjectItemTypes.yesNo:\r\n                icon = 'yesno';\r\n                break;\r\n            case SmartObjectItemTypes.dateTime:\r\n                icon = 'datetime';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return icon;\r\n    }\r\n\r\n    public getSpriteClassFromDotNetType(type: string): string {\r\n        let retClass = '';\r\n\r\n        if (type != null) {\r\n            switch (type.toLocaleLowerCase()) {\r\n                case 'integer':\r\n                    retClass = 'number';\r\n                    break;\r\n                case 'datetime':\r\n                    retClass = 'datetime';\r\n                    break;\r\n                case 'decimal':\r\n                    retClass = 'decimal';\r\n                    break;\r\n                case 'boolean':\r\n                    retClass = 'yesno';\r\n                    break;\r\n\r\n                default:\r\n                    retClass = 'text';\r\n            }\r\n            return retClass;\r\n        }\r\n    }\r\n\r\n    public getTypeFromDotNetType(type: string): number {\r\n\r\n        let returnType = 6;\r\n\r\n        if (type != null) {\r\n            switch (type.toLowerCase()) {\r\n                case 'boolean':\r\n                    returnType = 0;\r\n                    break;\r\n                case 'datetime':\r\n                    returnType = 1;\r\n                    break;\r\n                case 'decimal':\r\n                    returnType = 2;\r\n                    break;\r\n                case 'integer':\r\n                    returnType = 4;\r\n                    break;\r\n            }\r\n        }\r\n        return returnType;\r\n    }\r\n\r\n\r\n    public getIconBySmartFieldType(dataType: number): string {\r\n        let icon = '';\r\n\r\n        switch (dataType) {\r\n            case 2: {\r\n                icon = 'ic-number';\r\n                break;\r\n            }\r\n            case 3: {\r\n                icon = 'ic-yesno';\r\n                break;\r\n            }\r\n            case 4: {\r\n                icon = 'ic-datetime';\r\n                break;\r\n            }\r\n            case 5: {\r\n                icon = 'ic-any';\r\n                break;\r\n            }\r\n            case 9: {\r\n                icon = 'ic-decimal';\r\n                break;\r\n            }\r\n            default: {\r\n                icon = 'ic-text';\r\n                break;\r\n            }\r\n        }\r\n\r\n        return icon;\r\n    }\r\n\r\n    /**\r\n     * Dictionary of of resource tokens for data fields by key type\r\n     */\r\n    lookupTokensDataFieldTypes: {\r\n            [value: number]: {\r\n                token: string;\r\n            };\r\n        } = {\r\n            0: { token: 'workflow_dataFieldType_yesNo' },\r\n            1: { token: 'workflow_dataFieldType_dateTime' },\r\n            2: { token: 'workflow_dataFieldType_decimal' },\r\n            4: { token: 'workflow_dataFieldType_number' },\r\n            6: { token: 'workflow_dataFieldType_string' },\r\n        };\r\n\r\n    /**\r\n     * Previously named dataFieldTypesImplementor\r\n     * Returns resource string representing title of data type by key\r\n     *\r\n     * @param value\r\n     */\r\n    dataFieldTypesTitle(value: number): string {\r\n        const lookup = this.lookupTokensDataFieldTypes[value];\r\n        if (lookup !== null && lookup !== undefined) {\r\n            return this.resourceService.getString(lookup.token);\r\n        } else {\r\n            return '--could not resolve enum-lookup(' + value + ' in ' + this.lookupTokensDataFieldTypes + ')--';\r\n        }\r\n    }\r\n\r\n    getDataFieldTypesList(): IEnumLookupPair[] {\r\n        return [\r\n            {\r\n                key: 0,\r\n                title: this.dataFieldTypesTitle(0)\r\n            },\r\n            {\r\n                key: 1,\r\n                title: this.dataFieldTypesTitle(1)\r\n            },\r\n            {\r\n                key: 2,\r\n                title: this.dataFieldTypesTitle(2)\r\n            },\r\n            {\r\n                key: 4,\r\n                title: this.dataFieldTypesTitle(4)\r\n            },\r\n            {\r\n                key: 6,\r\n                title: this.dataFieldTypesTitle(6)\r\n            },\r\n\r\n        ];\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ISmartFormItemReference } from '../../../../types/models/smart-forms/i-smart-form-item-reference';\r\nimport { StartMode } from '../../../shared/enums/integration/start-mode';\r\nimport { ProcessService } from '../../process/process.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class PluginItemReferencesService {\r\n\r\n    constructor(private _processService: ProcessService) {\r\n    }\r\n\r\n    /**\r\n     * Method to create item references on the process\r\n     */\r\n    public createItemReferences(\r\n        itemReferences: sourceCode.k2Designer.objectModel.core.model.IModelArray<ISmartFormItemReference>,\r\n        startMode: StartMode): void {\r\n\r\n        const primaryItemReferenceName = this.getPrimaryItemReferenceName(itemReferences);\r\n\r\n        for (let i = 0; i < itemReferences.length; i++) {\r\n\r\n            if (!itemReferences[i].disabled) {\r\n\r\n\r\n                //Create item reference instance from SMO find on form\r\n                const itemReference = sourceCode.k2Designer.objectModel.workflow.process.k2Process.ItemReference.createInstance({\r\n                    systemName: itemReferences[i].name,\r\n                    title: itemReferences[i].displayName,\r\n                    objectNames: itemReferences[i].objectNames,\r\n                    objectTypes: itemReferences[i].objectTypes,\r\n                    serviceTypes: itemReferences[i].serviceTypes,\r\n                    type: sourceCode.k2Designer.objectModel.workflow.process.k2Process.ItemReferenceItemTypes.SmartObjectItem,\r\n                    methodReference: '',\r\n                    smartObjectReference: '',\r\n                    primary: itemReferences[i].primary\r\n                });\r\n\r\n                if (itemReference.primary) {\r\n                    itemReference.startMode = StartMode[startMode];\r\n                }\r\n                else {\r\n                    itemReference.primaryReference = primaryItemReferenceName;\r\n                }\r\n\r\n                //Create external defintions\r\n                let smartObjectExternalReference = sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectField.createInstance({\r\n                    systemName: itemReferences[i].smartObjectName,\r\n                    isDynamic: false,\r\n                    componentId: sourceCode.k2Designer.objectModel.core.deployment.LookupTypes.SmartObjectFieldExternalReference\r\n                });\r\n\r\n                let methodExternalReference = sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectMethodField.createInstance({\r\n                    systemName: itemReferences[i].smartObjectMethodName,\r\n                    type: itemReferences[i].smartObjectMehtodType\r\n                });\r\n\r\n                //This is the SMO external reference definition\r\n                if (this._processService.root.externalReferenceDefinitions.single<sourceCode.k2Designer.objectModel.core.model.IExternalReferenceDefinition>(\r\n                    { systemName: itemReferences[i].smartObjectName, componentId: 70002 }) === undefined) {\r\n                    this._processService.root.externalReferenceDefinitions.push(smartObjectExternalReference);\r\n                } else {\r\n                    smartObjectExternalReference =\r\n                        <sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectField>\r\n                    this._processService.root.externalReferenceDefinitions.single\r\n                        <sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectField>\r\n                        ({ systemName: itemReferences[i].smartObjectName, componentId: 70002 });\r\n                }\r\n\r\n                if (smartObjectExternalReference.methods.single<sourceCode.k2Designer.objectModel.core.model.IExternalReferenceDefinition>(\r\n                    { systemName: methodExternalReference.systemName }) === undefined) {\r\n                    smartObjectExternalReference.methods.push(methodExternalReference);\r\n                }\r\n                else {\r\n                    methodExternalReference =\r\n                        smartObjectExternalReference.methods.single\r\n                            <sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectMethodField>\r\n                            ({ systemName: methodExternalReference.systemName });\r\n                }\r\n\r\n                itemReference.methodReference = methodExternalReference.getReference();\r\n                itemReference.smartObjectReference = smartObjectExternalReference.getReference();\r\n\r\n                //Add the item reference to the process.\r\n                this._processService.root.configuration.itemReferences.push(itemReference);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Use this method to get the parent SMO, need to do this in the UI incase an item reference already exist with the same smo name.  In this case\r\n     * the item reference will be incremented with 1 and we then don't want to use the value from the server which defaults to the smo name.\r\n     */\r\n    public getPrimaryItemReferenceName(\r\n        itemReferences: sourceCode.k2Designer.objectModel.core.model.IModelArray<ISmartFormItemReference>): string {\r\n\r\n        for (let i = 0; i < itemReferences.length; i++) {\r\n            if (itemReferences[i].primary) {\r\n                return itemReferences[i].name;\r\n            }\r\n\r\n        }\r\n\r\n        return '';\r\n    }\r\n}\r\n","import { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Inject, Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { ISmartFormItemReference } from 'src/types/models/smart-forms/i-smart-form-item-reference';\r\nimport { IEnvironmentService } from 'src/types/services/environment/i-environment-service';\r\nimport { IRemoteEventReceiver } from 'src/types/uiComponents/pluginWizards/IRemoteEventReceiver';\r\nimport { IRemoteEventReceivers } from 'src/types/uiComponents/pluginWizards/IRemoteEventReceivers';\r\nimport { ISharePointSettingResult } from 'src/types/uiComponents/pluginWizards/ISharePointSettingsResult';\r\nimport { ISharePointContext } from '../../../../types/uiComponents/pluginWizards/ISharePointContext';\r\nimport { EnvironmentServiceToken } from '../../environment/environment-service-factory';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class SharePointService {\r\n\r\n    constructor(private http: HttpClient, @Inject(EnvironmentServiceToken) private environmentService: IEnvironmentService) { }\r\n\r\n    /**\r\n     * Helper method to call to determine pages, buttons and page indicators.\r\n     *\r\n     * @param pluginContext\r\n     */\r\n    detectChanges(scopePluginContext: ISharePointContext): void {\r\n\r\n        //Build event string for back-end ; seperated.\r\n        scopePluginContext.eventReceiverString = '';\r\n        for (let i = 0; i < scopePluginContext.remoteEventReceivers.EventDataCollection.length; i++) {\r\n            if (scopePluginContext.remoteEventReceivers.EventDataCollection[i].Selected) {\r\n                scopePluginContext.eventReceiverString = scopePluginContext.eventReceiverString + scopePluginContext.remoteEventReceivers.EventDataCollection[i].Id + ';';\r\n            }\r\n        }\r\n\r\n        //Remove the last ;\r\n        if (scopePluginContext.eventReceiverString.length > 0) {\r\n            scopePluginContext.eventReceiverString = scopePluginContext.eventReceiverString.substring(0, scopePluginContext.eventReceiverString.length - 1);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Save sharepoint settings\r\n     *\r\n     * @param serviceInstance\r\n     * @param listId\r\n     * @param subSiteRelativeUrl\r\n     * @returns\r\n     */\r\n    saveSharePointSettings(serviceInstance: string, listId: string, subSiteRelativeUrl: string): Observable<ISharePointSettingResult> {\r\n\r\n        return new Observable<ISharePointSettingResult>(subscriber => {\r\n\r\n            const options = {\r\n                params: new HttpParams()\r\n                    .set('host', this.environmentService?.currentEnvironment.hostId)\r\n                    .set('serviceInstance', serviceInstance)\r\n                    .set('listId', listId)\r\n                    .set('relativeUrl', subSiteRelativeUrl)\r\n            };\r\n\r\n            this.http\r\n                .get<string>('api/sharePoint/SaveSharePointSettings', options)\r\n                .subscribe({\r\n                    next: (settingResult: string) => {\r\n                        subscriber.next(JSON.parse(settingResult));\r\n                        subscriber.complete();\r\n                    }, error: (err: string) => {\r\n                        console.error(err);\r\n                        subscriber.error(err);\r\n                    }\r\n                });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Save a SharePoint workflow setting, returns the workflow ID\r\n     *\r\n     * @param workflowName\r\n     * @param listId\r\n     * @param siteUrl\r\n     * @param settingsId\r\n     * @param smartObjectName\r\n     * @param isDocumentLibrary\r\n     * @param eventReceivers\r\n     */\r\n    saveSharePointWorkflowSetting(workflowName: string, listId: string, siteUrl: string,\r\n        settingsId: string, smartObjectName: string, isDocumentLibrary: boolean,\r\n        eventReceivers: string): Observable<string> {\r\n\r\n        return new Observable<string>(subscriber => {\r\n\r\n            const options = {\r\n                params: new HttpParams()\r\n                    .set('host', this.environmentService.currentEnvironment.hostId)\r\n                    .set('workflowName', workflowName)\r\n                    .set('listId', listId)\r\n                    .set('siteUrl', siteUrl)\r\n                    .set('settingsId', settingsId)\r\n                    .set('smartObjectName', smartObjectName)\r\n                    .set('isDocumentLibrary', isDocumentLibrary)\r\n                    .set('eventReceivers', eventReceivers)\r\n            };\r\n\r\n            this.http\r\n                .get<string>('api/sharePoint/saveSharePointWorkflowSetting', options)\r\n                .subscribe({\r\n                    next: (workflowId: string) => {\r\n                        subscriber.next(workflowId);\r\n                        subscriber.complete();\r\n                    },\r\n                    error: (err: string) => {\r\n                        console.error(err);\r\n                        subscriber.error(err);\r\n                    }\r\n                });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets item references for a specific smartobject\r\n     *\r\n     * @param smartObjectName\r\n     * @param isDocLib\r\n     * @returns\r\n     */\r\n    getItemReferences(smartObjectName: string, isDocLib: boolean): Observable<ISmartFormItemReference[]> {\r\n        return new Observable<ISmartFormItemReference[]>(subscriber => {\r\n            const options = {\r\n                params: new HttpParams()\r\n                    .set('host', this.environmentService.currentEnvironment.hostId)\r\n                    .set('smartObjectSystemName', smartObjectName)\r\n                    .set('isDocLib', isDocLib)\r\n            };\r\n\r\n            this.http\r\n                .get<string>('api/sharePoint/getItemReferences', options)\r\n                .subscribe({\r\n                    next: (itemReferences: string) => {\r\n                        subscriber.next(JSON.parse(itemReferences));\r\n                        subscriber.complete();\r\n                    }, error: (err: string) => {\r\n                        console.error(err);\r\n                        subscriber.error(err);\r\n                    }\r\n                });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets sharepoint available events\r\n     *\r\n     * @returns\r\n     */\r\n    getSharePointAvailableEvents(): Observable<IRemoteEventReceivers> {\r\n        return new Observable<IRemoteEventReceivers>(subscriber => {\r\n            const options = {\r\n                params: new HttpParams()\r\n                    .set('host', this.environmentService.currentEnvironment.hostId)\r\n            };\r\n\r\n            this.http\r\n                .get<string>('api/sharePoint/GetSharePointAvailableEvents', options)\r\n                .subscribe({\r\n                    next: (events: string) => {\r\n                        subscriber.next(JSON.parse(events));\r\n                        subscriber.complete();\r\n                    }, error: (err: string) => {\r\n                        console.error(err);\r\n                        subscriber.error(err);\r\n                    }\r\n                });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get sharepoint setting events\r\n     *\r\n     * @param settingId\r\n     * @returns\r\n     */\r\n    getSharePointSettingEvents(settingId: string): Observable<IRemoteEventReceivers> {\r\n        return new Observable<IRemoteEventReceivers>(subscriber => {\r\n            const options = {\r\n                params: new HttpParams()\r\n                    .set('host', this.environmentService.currentEnvironment.hostId)\r\n                    .set('settingId', settingId)\r\n            };\r\n\r\n            this.http\r\n                .get<string>('api/sharePoint/getSharePointSettingEvents', options)\r\n                .subscribe({\r\n                    next: (eventReceivers: string) => {\r\n                        subscriber.next(JSON.parse(eventReceivers));\r\n                        subscriber.complete();\r\n                    }, error: (err: string) => {\r\n                        console.error(err);\r\n                        subscriber.error(err);\r\n                    }\r\n                });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Configuration of SharePoint events\r\n     *\r\n     * @param workflowId\r\n     * @param settingId\r\n     * @param eventReceivers\r\n     * @param siteUrl\r\n     * @param listId\r\n     */\r\n    manageEventReceivers(workflowId: string, settingId: string, eventReceivers: string,\r\n        siteUrl: string, listId: string): Observable<void> {\r\n        return new Observable<void>(subscriber => {\r\n\r\n            const options = {\r\n                params: new HttpParams()\r\n                    .set('host', this.environmentService.currentEnvironment.hostId)\r\n                    .set('workflowId', workflowId)\r\n                    .set('settingId', settingId)\r\n                    .set('eventReceivers', eventReceivers)\r\n                    .set('siteUrl', siteUrl)\r\n                    .set('listId', listId)\r\n            };\r\n\r\n            this.http\r\n                .get<void>('api/sharePoint/manageEventReceivers', options)\r\n                .subscribe({\r\n                    next: () => {\r\n                        subscriber.next();\r\n                        subscriber.complete();\r\n                    },\r\n                    error: (err: string) => {\r\n                        console.error(err);\r\n                        subscriber.error(err);\r\n                    }\r\n                });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets events for workflow setting\r\n     *\r\n     * @param settingId\r\n     * @param workflowName\r\n     * @returns\r\n     */\r\n    getEventsForWorkflowSetting(settingId: string, workflowName: string): Observable<IRemoteEventReceiver[]> {\r\n        return new Observable<IRemoteEventReceiver[]>(subscriber => {\r\n            const options = {\r\n                params: new HttpParams()\r\n                    .set('host', this.environmentService.currentEnvironment.hostId)\r\n                    .set('settingId', settingId)\r\n                    .set('workflowName', workflowName)\r\n            };\r\n\r\n            this.http\r\n                .get<string>('api/sharePoint/getEventsForWorkflowSetting', options)\r\n                .subscribe({\r\n                    next: (eventReceivers: string) => {\r\n                        subscriber.next(JSON.parse(eventReceivers));\r\n                        subscriber.complete();\r\n                    }, error: (err: string) => {\r\n                        console.error(err);\r\n                        subscriber.error(err);\r\n                    }\r\n                });\r\n        });\r\n    }\r\n}\r\n","import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\r\nimport { EventEmitter, Inject, Injectable, OnDestroy } from '@angular/core';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { map, shareReplay } from 'rxjs/operators';\r\nimport { ICache } from '../../../../types/models/data/i-cache';\r\nimport { ISmartFormItemReference } from '../../../../types/models/smart-forms/i-smart-form-item-reference';\r\nimport { INotificationService } from '../../../../types/services/notification/i-notification.service';\r\nimport { IGeneralItem } from '../../../../types/uiComponents/pluginWizards/IGeneralItem';\r\nimport { IProcessPluginDefinitionContext } from '../../../../types/uiComponents/pluginWizards/IProcessPluginDefinitionContext';\r\nimport { popup } from '../../../shared/constants/wizard-popup';\r\nimport IDropDownMenuItem from '../../../shared/enums/drop-down/drop-down-menu-item';\r\nimport { StartMode } from '../../../shared/enums/integration/start-mode';\r\nimport { ToastrTypes } from '../../../shared/enums/model/toastr-types';\r\nimport { GeneralItemTypes } from '../../../shared/enums/plugin-wizard/general-item-types';\r\nimport { EnvironmentServiceToken } from '../../environment/environment-service-factory';\r\nimport { EventNotifierService } from '../../event-notifier/event-notifier.service';\r\nimport { NotificationServiceToken } from '../../notification/notification-service-factory';\r\nimport { ProcessService } from '../../process/process.service';\r\nimport { ResourceService } from '../../resource/resource.service';\r\nimport { PluginItemReferencesService } from '../item-references/item-references.service';\r\n\r\ntype IFormProcessDefinition = sourceCode.k2Designer.objectModel.workflow.process.k2Process.processDefinitions.formsPD.IFormProcessDefinition;\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class SmartFormsIntegrationService implements OnDestroy {\r\n\r\n    private formContent: sourceCode.k2Designer.objectModel.smartForms.IFormContent = null;\r\n\r\n    private cache: ICache = {};\r\n    private subs: ICache = {};\r\n\r\n    constructor(@Inject(EnvironmentServiceToken) private environmentService,\r\n        private processService: ProcessService,\r\n        @Inject(NotificationServiceToken) private notificationService: INotificationService,\r\n        private resourceService: ResourceService,\r\n        private itemReferenceService: PluginItemReferencesService,\r\n        private http: HttpClient) {\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        for (const [key, sub] of Object.entries(this.subs)) {\r\n            (sub as Subscription)?.unsubscribe();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This method is used to unsubscribe and get rid of all observables inside the smart forms integration service.\r\n     */\r\n    clearCache() {\r\n        this.cache = {};\r\n        for (const [key, sub] of Object.entries(this.subs)) {\r\n            (sub as Subscription)?.unsubscribe();\r\n        }\r\n        this.subs = {};\r\n    }\r\n\r\n    /**\r\n     * Method to determine which pages should show.\r\n     */\r\n    determinePages(pluginContext: IProcessPluginDefinitionContext): void {\r\n        this.detectChanges(pluginContext);\r\n    }\r\n\r\n    /**\r\n     * Method to get the form content.\r\n     */\r\n    getFormContent(pluginContext: IProcessPluginDefinitionContext): Observable<number> {\r\n        const formId = pluginContext.form.name || pluginContext.form.metaData;\r\n        const isStartForm = !pluginContext.isUserForm;\r\n        const ruleId = pluginContext.ruleId;\r\n\r\n        this.resetToDefaults(pluginContext);\r\n\r\n        const options =\r\n        {\r\n            params: new HttpParams()\r\n                .set('host', this.environmentService.currentEnvironment.hostId)\r\n                .set('hashes', '[]')\r\n                .set('formId', formId)\r\n                .set('fqn', pluginContext.fqn)\r\n                .set('isStartForm', isStartForm ? 'true' : 'false')\r\n                .set('ruleId', ruleId || '')\r\n                .set('vers', Date.now().toString()) //no cache\r\n        };\r\n\r\n        return new Observable<number>(subscriber => {\r\n\r\n            let observable;\r\n            const key = `getformcontent_${formId}_${ruleId}`;\r\n            if (this.cache[key]) {\r\n                observable = this.cache[key];\r\n            } else {\r\n                observable = this.http.get<string>('api/smartforms/getformcontent', options)\r\n                    .pipe(\r\n                        shareReplay(1)\r\n                    );\r\n                this.cache[key] = observable;\r\n            }\r\n\r\n            this.subs[key] = observable.subscribe({\r\n                next: (result: string) => { // parses to sourceCode.k2Designer.objectModel.smartForms.IFormContent\r\n                    if (result) {\r\n                        try {\r\n                            this.formContent = JSON.parse(result) as sourceCode.k2Designer.objectModel.smartForms.IFormContent;\r\n                        } catch {\r\n                            this.notificationService.toastr(this.resourceService.getString('rest_message_500'),\r\n                                this.getMessageFromResult(result),\r\n                                ToastrTypes.error, 3000);\r\n\r\n                            delete this.cache[key];\r\n                            console.error('Error attempting to deserialize the result from getformcontent');\r\n                            subscriber.error('Error attempting to deserialize the result from getformcontent');\r\n                            return;\r\n                        }\r\n\r\n                        pluginContext.parameters = this.formContent.parameters;\r\n                        this.configureStateModel(pluginContext);\r\n\r\n                        this.refreshRules(pluginContext)\r\n                            .subscribe(() => {\r\n                                subscriber.next(pluginContext.pageIndex);\r\n                            });\r\n                    }\r\n                },\r\n                error: (error: string) => { // Assume all errors will be strings.\r\n                    this.notificationService.toastr(this.resourceService.getString('rest_message_500'),\r\n                        this.getMessageFromResult(error),\r\n                        ToastrTypes.error, 3000);\r\n\r\n                    delete this.cache[key];\r\n                    console.error(`Error attempting to fetch the result from getformcontent: ${error}`);\r\n                    subscriber.error(`Error attempting to fetch the result from getformcontent: ${error}`);\r\n                },\r\n                unsubscribe: () => {\r\n                    (this.subs[key] as Subscription)?.unsubscribe();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Method to refresh the selected rule's actions and conditions.\r\n     */\r\n    refreshRuleConditionsAndActions(pluginContext: IProcessPluginDefinitionContext): Observable<void> {\r\n        return new Observable<void>(subscriber => {\r\n\r\n            if (pluginContext.selectedRule) {\r\n                //Base state\r\n                let stateId: string = pluginContext.states[0].key;\r\n\r\n                //Only take the selected state if the use existing radio button is selected\r\n                if (!pluginContext.createNewState) {\r\n                    stateId = pluginContext.selectedState.key;\r\n                }\r\n\r\n                const rule = pluginContext.selectedRule.metaData as sourceCode.k2Designer.objectModel.smartForms.IRule;\r\n                const options =\r\n                {\r\n                    params: new HttpParams()\r\n                        .set('host', this.environmentService.currentEnvironment.hostId)\r\n                        .set('hashes', JSON.stringify([]))\r\n                        .set('formId', pluginContext.form?.key || '')\r\n                        .set('ruleId', rule?.id || '')\r\n                        .set('stateId', stateId || '')\r\n                        .set('ruleName', rule?.name || '')\r\n                        .set('instanceId', rule?.instanceGuid || '')\r\n                        .set('fqn', pluginContext.fqn /*this._environmentService.workflowFullname*/)\r\n                        .set('isStartEvent', !pluginContext.isUserForm ? 'true' : 'false')\r\n                        .set('vers', Date.now().toString()) //no cache\r\n                };\r\n\r\n                let observable;\r\n                const key = `getrulehandlersconditionsandactions_${pluginContext.form?.key}_${rule?.id}_${stateId}_${rule?.name}`;\r\n                if (this.cache[key]) {\r\n                    observable = this.cache[key];\r\n                } else {\r\n                    observable = this.http.get<string>('api/smartforms/getrulehandlersconditionsandactions', options)\r\n                        .pipe(\r\n                            shareReplay(1)\r\n                        );\r\n                    this.cache[key] = observable;\r\n                }\r\n\r\n                this.subs[key] = observable.subscribe({\r\n                    next: (result: string) => { // to be parsed to sourceCode.k2Designer.objectModel.smartForms.IHandler[]\r\n                        if (result) {\r\n                            this.convertHandlers(pluginContext, result);\r\n                            subscriber.next();\r\n                            subscriber.complete();\r\n                        } else {\r\n                            delete this.cache[key];\r\n                            console.error('Empty result calling getrulehandlersconditionsactions');\r\n                            subscriber.error('Empty result calling getrulehandlersconditionsactions');\r\n                        }\r\n                    },\r\n                    error: (error: string) => { // Assuming all errors are strings? Should be if the result is.\r\n                        delete this.cache[key];\r\n                        console.error(`Error calling getrulehandlersconditionsactions: ${error}`);\r\n                        subscriber.error(`Error attempting to call getrulehandlersconditionsactions: ${error}`);\r\n                    },\r\n                    unsubscribe: () => {\r\n                        (this.subs[key] as Subscription)?.unsubscribe();\r\n                    }\r\n                });\r\n            } else {\r\n                this.configureOptionModel(pluginContext);\r\n                subscriber.next();\r\n                subscriber.complete();\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Callback from actions and conditions rest call.\r\n     */\r\n    convertHandlers(pluginContext: IProcessPluginDefinitionContext, result: string): void {\r\n\r\n        let handlers: sourceCode.k2Designer.objectModel.smartForms.IHandler[] = [];\r\n        try {\r\n            handlers = JSON.parse(result) as sourceCode.k2Designer.objectModel.smartForms.IHandler[];\r\n        } catch { }\r\n\r\n        if (handlers.length === 0) {\r\n            return;\r\n        }\r\n\r\n        if (pluginContext.isUserForm) {\r\n            pluginContext.selectedStatehandlers = this.processHandlersForUserTask(handlers, pluginContext);\r\n        }\r\n        else {\r\n            pluginContext.selectedStatehandlers = this.processHandlersForStartRule(handlers, pluginContext);\r\n        }\r\n\r\n        pluginContext.formLoading = false;\r\n        this.configureOptionModel(pluginContext);\r\n    }\r\n\r\n    /**\r\n     * Get selected state rules if the use existing option is selected.\r\n     */\r\n    refreshRules = (pluginContext: IProcessPluginDefinitionContext): Observable<void> => {\r\n        let stateId = '';\r\n\r\n        //Only take the selected state if the use existing radio button is selected\r\n        if (!pluginContext.createNewState) {\r\n            stateId = pluginContext.selectedState.key;\r\n        }\r\n\r\n        pluginContext.rules = [];\r\n\r\n        const options = {\r\n            params: new HttpParams()\r\n                .set('host', this.environmentService.currentEnvironment.hostId)\r\n                .set('hashes', JSON.stringify([]))\r\n                .set('formId', pluginContext.form?.key || '')\r\n                .set('stateId', stateId)\r\n                .set('isStartEvent', !pluginContext.isUserForm ? 'true' : 'false')\r\n                .set('vers', Date.now().toString()) //no cache\r\n        };\r\n\r\n        return new Observable<void>(subscriber => {\r\n            let observable;\r\n            const key = `getformrules_${pluginContext.form?.key || ''}_${stateId}`;\r\n            if (this.cache[key]) {\r\n                observable = this.cache[key];\r\n            } else {\r\n                observable = this.http.get<string>('api/smartforms/getformrules', options)\r\n                    .pipe(\r\n                        shareReplay(1)\r\n                    );\r\n                this.cache[key] = observable;\r\n            }\r\n            this.subs[key] = observable.subscribe({\r\n                next: (result: string) => {\r\n                    if (result) {\r\n                        this.rulesLoaded(pluginContext, result)\r\n                            .subscribe(() => {\r\n                                subscriber.next();\r\n                            });\r\n                    } else {\r\n                        subscriber.next();\r\n                        subscriber.complete();\r\n                    }\r\n                },\r\n                error: (error: string) => { // Assume any errors will be strings\r\n                    delete this.cache[key];\r\n                    console.error(`Error retrieving form rules: ${error}`);\r\n                    subscriber.error(`Error retrieving form rules: ${error}`);\r\n                },\r\n                unsubscribe: () => {\r\n                    (this.subs[key] as Subscription)?.unsubscribe();\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Processes a list of IHandler objects into a list of IGeneralItem objects for configuring a user task rule\r\n     *\r\n     * @param result\r\n     */\r\n    processHandlersForUserTask(result: sourceCode.k2Designer.objectModel.smartForms.IHandler[],\r\n        pluginContext: IProcessPluginDefinitionContext): IGeneralItem[] {\r\n        const handlers: sourceCode.k2Designer.objectModel.smartForms.IHandler[] = result;\r\n        const generalItems: IGeneralItem[] = [];\r\n\r\n        // for the User Task, because a condition/action is generated, we need to move between\r\n        // handlers and not between actions.\r\n        // An edge case for If with an Else exist, the first IF handler block and\r\n        // the ELSE handler block must be created as one block.\r\n\r\n        const conditionHandlerId = null;\r\n        const previousHandlerId = null;\r\n        for (let i = 0, len = result.length; i < len; i++) {\r\n            const handler = handlers[i];\r\n            let handlerItem: IGeneralItem = null;\r\n\r\n            if (handler.type === sourceCode.k2Designer.objectModel.smartForms.HandlerType.ForEach) {\r\n                handlerItem = handler;\r\n                handlerItem.subItems = [];\r\n                handlerItem.level = 0;\r\n                handlerItem.itemType = GeneralItemTypes.forEach;\r\n\r\n                this.addConditions(handlerItem, handler.conditions, 1);\r\n\r\n                const indentLevel = handler.conditions.length > 0 ? 2 : 1;\r\n                this.addActions(handlerItem, handler.actions, indentLevel);\r\n\r\n                generalItems.push(handlerItem);\r\n            }\r\n            else if (handler.type === sourceCode.k2Designer.objectModel.smartForms.HandlerType.Else) {\r\n                handlerItem = handler;\r\n                handlerItem.subItems = [];\r\n                handlerItem.level = 0;\r\n                handlerItem.itemType = GeneralItemTypes.else;\r\n\r\n                this.addConditions(handlerItem, handler.conditions, 1);\r\n\r\n                const indentLevel = handler.conditions.length > 0 ? 2 : 1;\r\n                this.addActions(handlerItem, handler.actions, indentLevel);\r\n\r\n                generalItems.push(handlerItem);\r\n            }\r\n            else if (handler.conditions.length > 0) {\r\n                handlerItem = handler.conditions[0];\r\n                handlerItem.subItems = [];\r\n                handlerItem.itemType = GeneralItemTypes.condition;\r\n                // transfer handler id to the condition as the first condition will be\r\n                // treated as the handler\r\n                handlerItem.id = handler.id;\r\n                handlerItem.level = 0;\r\n\r\n                this.addConditions(handlerItem, handler.conditions, 0, 1);\r\n\r\n                // check that this is the open task condition/action pair\r\n                for (const action of handler.actions) {\r\n                    if (action.isLoadProcessAction) {\r\n                        handlerItem.isOpenTaskCondition = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (handlerItem.isOpenTaskCondition) {\r\n                    if (i !== 0) {\r\n                        handlerItem.previousHandlerId = handlers[i - 1].id;\r\n                    }\r\n                    else {\r\n                        handlerItem.previousHandlerId = null;\r\n                    }\r\n                    pluginContext.workflowCondition = handlerItem;\r\n                }\r\n\r\n                const returnAction = this.addActions(handlerItem, handler.actions, 1);\r\n                if (returnAction !== null) {\r\n                    returnAction.handlerId = conditionHandlerId;\r\n                    returnAction.previousHandlerId = previousHandlerId;\r\n                    pluginContext.workflowAction = returnAction;\r\n                }\r\n\r\n                if (i + 1 < len && result[i + 1].type === sourceCode.k2Designer.objectModel.smartForms.HandlerType.Else) {\r\n                    const elseHandler = handlers[i + 1];\r\n                    const elseItem: IGeneralItem = elseHandler;\r\n                    elseItem.level = 0;\r\n                    elseItem.itemType = GeneralItemTypes.else;\r\n\r\n                    handlerItem.subItems.push(elseItem);\r\n\r\n                    this.addConditions(handlerItem, elseHandler.conditions, 1);\r\n\r\n                    const indentLevel = elseHandler.conditions.length > 0 ? 2 : 1;\r\n                    this.addActions(handlerItem, elseHandler.actions, indentLevel);\r\n\r\n                    i++;\r\n                }\r\n                generalItems.push(handlerItem);\r\n            }\r\n            else if (handler.actions.length > 0) {\r\n                const handlerAction: IGeneralItem = handler.actions[0];\r\n                // transfer handler id to the action as the first action will be\r\n                // treated as the handler\r\n                handlerAction.id = handler.id;\r\n                handlerAction.level = 0;\r\n                handlerAction.itemType = GeneralItemTypes.action;\r\n                handlerAction.subItems = [];\r\n\r\n                this.addActions(handlerAction, handler.actions, 0, 1);\r\n\r\n                generalItems.push(handlerAction);\r\n            }\r\n        }\r\n\r\n        return generalItems;\r\n    }\r\n\r\n    /**\r\n     * Processes a list of IHandler objects into a list of IGeneralItem objects for configuring a start rule\r\n     *\r\n     * @param result\r\n     */\r\n    processHandlersForStartRule(result: sourceCode.k2Designer.objectModel.smartForms.IHandler[],\r\n        pluginContext: IProcessPluginDefinitionContext): IGeneralItem[] {\r\n        const handlers: sourceCode.k2Designer.objectModel.smartForms.IHandler[] = result;\r\n        const generalItems: IGeneralItem[] = [];\r\n\r\n        //Flattend the actions & conditions, because for the drag & drop we can't have repeats within repeats to work.\r\n        for (const handler of handlers) {\r\n\r\n            if (handler.type === sourceCode.k2Designer.objectModel.smartForms.HandlerType.ForEach) {\r\n                const forEachItem: IGeneralItem = handler;\r\n                forEachItem.level = 0;\r\n                forEachItem.itemType = GeneralItemTypes.forEach;\r\n                generalItems.push(forEachItem);\r\n            }\r\n            else if (handler.type === sourceCode.k2Designer.objectModel.smartForms.HandlerType.Else) {\r\n                const elseItem: IGeneralItem = handler;\r\n                elseItem.level = 0;\r\n                elseItem.itemType = GeneralItemTypes.else;\r\n                elseItem.subItems = [];\r\n\r\n                for (const subItem of handler.conditions as IGeneralItem[]) {\r\n                    subItem.level = 1;\r\n                    subItem.itemType = GeneralItemTypes.condition;\r\n                    elseItem.subItems.push(subItem);\r\n                }\r\n\r\n                generalItems.push(elseItem);\r\n            }\r\n            else if (handler.conditions.length > 0) {\r\n                const conditionItem: IGeneralItem = handler.conditions[0];\r\n                conditionItem.level = 0;\r\n                conditionItem.itemType = GeneralItemTypes.condition;\r\n                conditionItem.subItems = [];\r\n                if (handler.conditions.length > 1) {\r\n                    for (let j = 1; j < handler.conditions.length; j++) {\r\n                        const subItem: IGeneralItem = handler.conditions[j];\r\n                        subItem.level = 0;\r\n                        subItem.itemType = GeneralItemTypes.condition;\r\n                        conditionItem.subItems.push(subItem);\r\n                    }\r\n                }\r\n                generalItems.push(conditionItem);\r\n            }\r\n\r\n            for (let k = 0; k < handler.actions.length; k++) {\r\n                const actionItem: IGeneralItem = (handler.actions[k]);\r\n                actionItem.itemType = GeneralItemTypes.action;\r\n                actionItem.level = 0;\r\n                actionItem.selected = false;\r\n                actionItem.focused = false;\r\n                actionItem.handlerId = handler.id;\r\n\r\n                if (k > 0) {\r\n                    actionItem.previousActionId = handler.actions[k - 1].id;\r\n                }\r\n\r\n                const containsConditions = handler.conditions.length > 0;\r\n\r\n                if (handler.actions[k].isStartWorkflowAction || handler.actions[k].isLoadProcessAction) {\r\n                    actionItem.isWorkflowAction = true;\r\n                    pluginContext.workflowAction = actionItem;\r\n                }\r\n\r\n                // determine level\r\n                if (handler.type === sourceCode.k2Designer.objectModel.smartForms.HandlerType.ForEach) {\r\n                    actionItem.level = 1;\r\n                }\r\n                else if (handler.type === sourceCode.k2Designer.objectModel.smartForms.HandlerType.Else && containsConditions) {\r\n                    actionItem.level = 2;\r\n                } else if (containsConditions || handler.type === sourceCode.k2Designer.objectModel.smartForms.HandlerType.Else) {\r\n                    actionItem.level = 1;\r\n                }\r\n                else {\r\n                    actionItem.level = 0;\r\n                }\r\n\r\n                generalItems.push(actionItem);\r\n            }\r\n        }\r\n\r\n        return generalItems;\r\n    }\r\n\r\n    /**\r\n     * Method to create item references on the process and configured plugins in the config panel\r\n     */\r\n    createItemReferencesAndPlugins(pluginContext: IProcessPluginDefinitionContext): void {\r\n\r\n        this.itemReferenceService.createItemReferences(pluginContext.newItemReferences.collection, StartMode.smartForms);\r\n\r\n        if (!pluginContext.isUserForm) {\r\n            if (pluginContext.configureRuleLater) {\r\n                this.setupFormDefinitionsOnPluginIntend(pluginContext.form.name || pluginContext.form.metaData, pluginContext.form.title,\r\n                    pluginContext.processDefinition as\r\n                    sourceCode.k2Designer.objectModel.workflow.process.k2Process.processDefinitions.formsPD.IFormProcessDefinition\r\n                );\r\n            }\r\n\r\n            if (!pluginContext.configureRuleLater) {\r\n                this.removeIntendedPluginWhenConfigured(pluginContext);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Method to set the links to the form if the user intended to integrate to a form, but only selected to configure the item references.\r\n     * Something needs to be saved in the definition so that it can be\r\n     * be reconfigured at a later stage. It will return a boolean value to determine if the plugin already exist/not.\r\n     */\r\n    setupFormDefinitionsOnPluginIntend(\r\n        formSystemName: string,\r\n        formDisplayName: string,\r\n        targetProcessDefinition: IFormProcessDefinition): boolean {\r\n\r\n        for (const processDefinition of this.processService.root.configuration.processDefinitions as IFormProcessDefinition[] ) {\r\n\r\n            // Needs to check for 'n formSystemName of empty as well,\r\n            // this gets set when the user configure or remove the plugin, we need some kind of way to determine.\r\n            if (processDefinition.formSystemName != null &&\r\n                ((processDefinition.formSystemName.indexOf('_removed') > 0 &&\r\n                    processDefinition.formSystemName.substring(0, processDefinition.formSystemName.indexOf('_removed')) === formSystemName) ||\r\n                    processDefinition.formSystemName === formSystemName)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        //Update the process definition external definition reference that points to the form.\r\n        this.processService.root.configuration.processDefinitions.push(targetProcessDefinition);\r\n\r\n        targetProcessDefinition.formSystemName = formSystemName;\r\n        targetProcessDefinition.formDisplayName = formDisplayName;\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Method to update the form\r\n     */\r\n    updateForm(pluginContext: IProcessPluginDefinitionContext): Promise<void> {\r\n\r\n        return new Promise<void>((resolve, reject) => {\r\n            try {\r\n\r\n                if (!pluginContext.configureRuleLater) {\r\n\r\n                    if (pluginContext.isUserForm) {\r\n\r\n                        const navigateUrlSmartFields = pluginContext.navigateUrl?.smartFields || [];\r\n\r\n                        const clientEventPublish = {\r\n                            formSystemName: pluginContext.form.name || pluginContext.form.metaData,\r\n                            afterSubmitNavigateToForm: pluginContext.navigateUrl.smartFields.length > 0 ?\r\n                                (navigateUrlSmartFields[0] as sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartForm).name : '',\r\n                            afterSubmitNavigateToUrl: pluginContext.navigateUrl.smartFields.length > 0 ?\r\n                                (navigateUrlSmartFields[0] as sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ITextField).text : '',\r\n                            formName: pluginContext.form.title,\r\n                            activityName: pluginContext.fqn,\r\n                            activityDisplayName: pluginContext.activityDisplayName,\r\n                            stateName: pluginContext.createNewState ? pluginContext.newStateName : '',\r\n                            stateId: pluginContext.createNewState ? '' : pluginContext.selectedState.key,\r\n                            rule: pluginContext.selectedRule.metaData,\r\n                            itemReferences: this.getReferences(pluginContext),\r\n                            actionType: 'workflowview',\r\n                            viewAt: pluginContext.selectedLocation.key,\r\n                            actionCommand: pluginContext.actionCommand,\r\n                            actionMessage: pluginContext.submitMessage,\r\n                            allocateWorkflow: pluginContext.allocateTaskToUser,\r\n                            actionId: pluginContext.workflowAction.id,\r\n                            previousActionGuid: pluginContext.workflowAction.previousActionId,\r\n                            handlerGuid: pluginContext.workflowCondition.id,\r\n                            previousHandlerGuid: pluginContext.workflowCondition.previousHandlerId,\r\n                            afterSubmitRuleId: pluginContext.afterSubmitRule ? pluginContext.afterSubmitRule.definitionGuid : '',\r\n                            afterSubmitRuleInstanceId: pluginContext.afterSubmitRule ? pluginContext.afterSubmitRule.instanceGuid : ''\r\n                        } as sourceCode.k2Designer.objectModel.smartForms.IClientEventPublish;\r\n\r\n                        this.publishClientEvent(clientEventPublish)\r\n                            .subscribe({\r\n                                next: () => {\r\n                                    resolve();\r\n                                },\r\n                                error: (error: any) => {\r\n                                    reject(error);\r\n                                }\r\n                            });\r\n                    }\r\n                    else {\r\n\r\n                        const folioExpression = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                            smartFields:\r\n                                [\r\n                                    sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                                        text: pluginContext.folio,\r\n                                        title: pluginContext.folio\r\n                                    })\r\n                                ]\r\n                        });\r\n\r\n                        const processPublish = {\r\n                            formSystemName: pluginContext.form.name || pluginContext.form.metaData,\r\n                            formName: pluginContext.form.title,\r\n                            processName: pluginContext.fqn,\r\n                            stateName: pluginContext.createNewState ? pluginContext.newStateName : '',\r\n                            stateId: pluginContext.createNewState ? '' : pluginContext.selectedState.key,\r\n                            makeDefaultState: pluginContext.makeStateDefault,\r\n                            ruleId: (pluginContext.selectedRule.metaData as sourceCode.k2Designer.objectModel.smartForms.IRule).definitionGuid,\r\n                            ruleInstanceId: (pluginContext.selectedRule.metaData as sourceCode.k2Designer.objectModel.smartForms.IRule).instanceGuid,\r\n                            ruleSubFormId: (pluginContext.selectedRule.metaData as sourceCode.k2Designer.objectModel.smartForms.IRule).subFormGuid,\r\n                            precedingActionId: pluginContext.workflowAction.previousActionId,\r\n                            handlerId: pluginContext.workflowAction.handlerId,\r\n                            itemReferences: this.getReferences(pluginContext),\r\n                            actionId: pluginContext.editMode ? pluginContext.actionId : '',\r\n                            folio: folioExpression.getJson(),\r\n                            moveAction: pluginContext.editMode\r\n                        } as sourceCode.k2Designer.objectModel.smartForms.IProcessPublish;\r\n\r\n                        this.updateFormOnServer(processPublish)\r\n                            .subscribe({\r\n                                next: () => {\r\n                                    resolve();\r\n                                },\r\n                                error: (error: any) => {\r\n                                    reject(error);\r\n                                }\r\n                            });\r\n                    }\r\n                }\r\n                else {\r\n                    resolve();\r\n                }\r\n\r\n            } catch (ex) {\r\n                console.error(ex);\r\n                reject(null);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Method to refresh the states.\r\n     */\r\n     refreshStates(pluginContext: IProcessPluginDefinitionContext): void {\r\n        const options = {\r\n            params: new HttpParams()\r\n                .set('host', this.environmentService.currentEnvironment.hostId)\r\n                .set('hashes', JSON.stringify([]))\r\n                .set('formId', pluginContext.form?.key || '')\r\n                .set('vers', Date.now().toString()) //no cache\r\n        };\r\n\r\n        this.http.get<sourceCode.k2Designer.objectModel.smartForms.IState[]>('api/smartforms/getformstates', options)\r\n            .pipe(map(result => (typeof result) === 'string' ? JSON.parse(result as any) as sourceCode.k2Designer.objectModel.smartForms.IState[] : result))\r\n            .subscribe((result) => {\r\n                const states: sourceCode.k2Designer.objectModel.smartForms.IState[] = result;\r\n                pluginContext.states = [];\r\n                for (let i = 0; i < states.length; i++) {\r\n                    const item: IDropDownMenuItem = <IDropDownMenuItem>{\r\n                        key: states[i].id,\r\n                        title: states[i].name,\r\n                        isSelected: pluginContext.selectedState.key == states[i].id.toString(),\r\n                        metaData: states[i].isBase\r\n                    };\r\n                    pluginContext.states.push(item);\r\n\r\n                    if (item.isSelected) {\r\n                        pluginContext.selectedState = item;\r\n                    }\r\n                }\r\n\r\n                if (!pluginContext.selectedState && states.length > 0) {\r\n                    pluginContext.selectedState = pluginContext.states[0];\r\n                }\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Server call to Update Form\r\n     */\r\n    private updateFormOnServer(processPublish: sourceCode.k2Designer.objectModel.smartForms.IProcessPublish): Observable<string> {\r\n\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                'content-type': 'application/json'\r\n            })\r\n        };\r\n\r\n        return this.http.post<string>('api/smartforms/updateform', {\r\n            host: this.environmentService.currentEnvironment.hostId,\r\n            toSerialize: JSON.stringify(processPublish)\r\n        }, httpOptions);\r\n    }\r\n\r\n    /**\r\n     * Server call to Publish Client Event\r\n     */\r\n    private publishClientEvent(clientEventPublish: sourceCode.k2Designer.objectModel.smartForms.IClientEventPublish): Observable<string> {\r\n\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                'content-Type': 'application/json'\r\n            })\r\n        };\r\n\r\n        return this.http.post<string>('api/smartforms/publishclientevent', {\r\n            host: this.environmentService.currentEnvironment.hostId,\r\n            toSerialize: JSON.stringify(clientEventPublish)\r\n        }, httpOptions);\r\n    }\r\n\r\n    /**\r\n     * Method to merge references\r\n     */\r\n    private getReferences(pluginContext: IProcessPluginDefinitionContext): ISmartFormItemReference[] {\r\n\r\n        const references = [];\r\n\r\n        for (const existingReference of pluginContext.existingItemReferences.collection) {\r\n            if (!existingReference.disabled) {\r\n                references.push(existingReference);\r\n            }\r\n        }\r\n\r\n        for (const newReference of pluginContext.newItemReferences.collection) {\r\n            if (!newReference.disabled) {\r\n                references.push(newReference);\r\n            }\r\n        }\r\n\r\n        return references;\r\n    }\r\n\r\n    /**\r\n     * Method to remove the intended plugin when reconfigured.\r\n     */\r\n    private removeIntendedPluginWhenConfigured(pluginContext: IProcessPluginDefinitionContext): void {\r\n\r\n        for (const definition of this.processService.root.configuration.processDefinitions as IFormProcessDefinition[]) {\r\n\r\n            if (definition.formSystemName &&\r\n                definition.formSystemName === (pluginContext.form.name || pluginContext.form.metaData)) {\r\n\r\n                //Mark the name, don't remove the entry.  We need something to know that the intented plugin is already configured or\r\n                //removed otherwise it will keep adding the inteded plugin\r\n                //each time it hits the constructor.\r\n                definition.formSystemName = definition.formSystemName + '_removed';\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private addConditions(parent: IGeneralItem,\r\n        conditions: sourceCode.k2Designer.objectModel.core.model.IModelArray<sourceCode.k2Designer.objectModel.smartForms.ICondition>,\r\n        indentLevel: number = 0,\r\n        startAt: number = 0) {\r\n        for (let i = startAt, len = conditions.length; i < len; i++) {\r\n            const conditionItem: IGeneralItem = conditions[i];\r\n            conditionItem.level = indentLevel;\r\n            conditionItem.itemType = GeneralItemTypes.condition;\r\n            parent.subItems.push(conditionItem);\r\n        }\r\n    }\r\n\r\n    private addActions(parent: IGeneralItem,\r\n        actions: sourceCode.k2Designer.objectModel.core.model.IModelArray<sourceCode.k2Designer.objectModel.smartForms.IAction>,\r\n        indentLevel: number = 0,\r\n        startAt: number = 0): IGeneralItem {\r\n        let returnItem: IGeneralItem = null;\r\n        for (let i = startAt, len = actions.length; i < len; i++) {\r\n            const actionItem: IGeneralItem = actions[i];\r\n            actionItem.selected = false;\r\n            actionItem.focused = false;\r\n            actionItem.level = indentLevel;\r\n            actionItem.itemType = GeneralItemTypes.action;\r\n            if (actionItem.isLoadProcessAction) {\r\n                returnItem = actionItem;\r\n            }\r\n\r\n            parent.subItems.push(actionItem);\r\n        }\r\n        return returnItem;\r\n    }\r\n\r\n    /**\r\n     * Method to detemine what option to configure with.\r\n     */\r\n    private configureOptionModel(pluginContext: IProcessPluginDefinitionContext): void {\r\n        //If the form contains a viable rule to use and the user did not select the option to configure (show settings)\r\n        if (pluginContext.containsDefaultRule && !pluginContext.configureRuleNow) {\r\n            pluginContext.configureRuleForMe = true;\r\n            pluginContext.configureRuleLater = false;\r\n            pluginContext.configureRuleNow = false;\r\n            this.determinePages(pluginContext);\r\n        }\r\n        else {\r\n            pluginContext.configureRuleNow = true;\r\n            pluginContext.configureRuleLater = false;\r\n            pluginContext.configureRuleForMe = false;\r\n        }\r\n\r\n        if (pluginContext.isUserForm) {\r\n            if (pluginContext.foundWorkflowActionOnForm) {\r\n                pluginContext.configureFormRuleDescription = this.resourceService\r\n                    .getString('smartforms_integratio_user_taskn_rule_action_heading_found')\r\n                    .replace('{0}', sourceCode.k2Designer.utilities.ui.htmlEncode(pluginContext.form.title));\r\n                pluginContext.ruleConfigureNowDescription = this.resourceService\r\n                    .getString('smartforms_integration_user_task_rule_action_confirm_configuration');\r\n                pluginContext.ruleConfigureLaterDescription = this.resourceService.getString('smartforms_integration_user_task_rule_action_skip');\r\n                pluginContext.ruleDoItForMeDescription = this.resourceService.getString('smartforms_integration_rule_action_exists_skip');\r\n            }\r\n            else {\r\n                pluginContext.configureFormRuleDescription = this.resourceService\r\n                    .getString('smartforms_integration_user_task_rule_action_heading_not_found')\r\n                    .replace('{0}', sourceCode.k2Designer.utilities.ui.htmlEncode(pluginContext.form.title));\r\n                pluginContext.ruleConfigureNowDescription = this.resourceService.getString('smartforms_integration_user_task_rule_action_add_now');\r\n                pluginContext.ruleConfigureLaterDescription = this.resourceService.getString('smartforms_integration_user_task_rule_action_add_later');\r\n                pluginContext.ruleDoItForMeDescription = this.resourceService.getString('smartforms_integration_do_it_for_me');\r\n            }\r\n        }\r\n        else {\r\n            //Apply resources depending on workflow action found or not.\r\n            if (pluginContext.foundWorkflowActionOnForm) {\r\n                pluginContext.configureFormRuleDescription = this.resourceService\r\n                    .getString('smartforms_integration_rule_action_heading_found')\r\n                    .replace('{0}', sourceCode.k2Designer.utilities.ui.htmlEncode(pluginContext.form.title));\r\n                pluginContext.ruleConfigureNowDescription = this.resourceService.getString('smartforms_integration_rule_action_confirm_configuration');\r\n                pluginContext.ruleConfigureLaterDescription = this.resourceService.getString('smartforms_integration_rule_action_exists_skip');\r\n                pluginContext.ruleDoItForMeDescription = this.resourceService.getString('smartforms_integration_rule_action_exists_skip');\r\n            }\r\n            else {\r\n                pluginContext.configureFormRuleDescription = this.resourceService\r\n                    .getString('smartforms_integration_rule_action_heading_not_found')\r\n                    .replace('{0}', sourceCode.k2Designer.utilities.ui.htmlEncode(pluginContext.form.title));\r\n                pluginContext.ruleConfigureNowDescription = this.resourceService.getString('smartforms_integration_rule_action_add_now');\r\n                pluginContext.ruleConfigureLaterDescription = this.resourceService.getString('smartforms_integration_rule_action_add_later');\r\n                pluginContext.ruleDoItForMeDescription = this.resourceService.getString('smartforms_integration_do_it_for_me');\r\n            }\r\n        }\r\n\r\n        //Enable the next button when done.\r\n        //pluginContext.pages[0].nextButton.disabled = false;\r\n        pluginContext.formLoading = false;\r\n\r\n        pluginContext.formItemReferences.collection = this.formContent.itemReferences;\r\n        pluginContext.folio = this.formContent.folio;\r\n\r\n        pluginContext.hideIndicators = false;\r\n    }\r\n\r\n    /**\r\n     * Callback from rules rest call.\r\n     */\r\n    private rulesLoaded(pluginContext: IProcessPluginDefinitionContext, result: string): Observable<void> {\r\n\r\n        let rules: sourceCode.k2Designer.objectModel.smartForms.IRule[] = [];\r\n        try {\r\n            rules = JSON.parse(result) as sourceCode.k2Designer.objectModel.smartForms.IRule[];\r\n        } catch { }\r\n        pluginContext.rules = [];\r\n        pluginContext.containsDefaultRule = false;\r\n\r\n        let defaultRule: IDropDownMenuItem = null;\r\n\r\n        if (rules.length === 0) {\r\n            pluginContext.noRulesError = this.resourceService.getString('wizard_Task_smartform_select_state_with_rules');\r\n        }\r\n        else {\r\n            pluginContext.noRulesError = '';\r\n        }\r\n\r\n        for (const rule of rules) {\r\n            const item: IDropDownMenuItem = {\r\n                key: rule.id + '|' + rule.instanceGuid,\r\n                title: rule.displayName,\r\n                isSelected: this.formContent.workflowActionRule && this.formContent.workflowActionRule.id === rule.id,\r\n                metaData: rule\r\n            };\r\n            pluginContext.rules.push(item);\r\n\r\n            if (item.isSelected) {\r\n                pluginContext.selectedRule = item;\r\n                pluginContext.containsDefaultRule = true;\r\n            }\r\n\r\n            if (rule.isDefault) defaultRule = item;\r\n        }\r\n\r\n        if (!pluginContext.containsDefaultRule && defaultRule !== null) {\r\n            pluginContext.selectedRule = defaultRule;\r\n            pluginContext.containsDefaultRule = true;\r\n\r\n            for (const rule of pluginContext.rules) {\r\n                rule.isSelected = rule.key === defaultRule.key;\r\n            }\r\n        }\r\n\r\n        if (!pluginContext.containsDefaultRule && rules.length > 0) {\r\n            pluginContext.selectedRule = pluginContext.rules[0];\r\n        }\r\n\r\n        if (pluginContext.isUserForm) {\r\n            pluginContext.afterSubmitRules = $.extend(true, [], pluginContext.rules.slice());\r\n            this.configureWorkflowStrip(pluginContext);\r\n        }\r\n\r\n        //Clear the conditions/rules & actions collection when there is nothing on the selected state.\r\n        if (pluginContext.rules.length === 0) {\r\n            pluginContext.selectedRule = null;\r\n            pluginContext.selectedStatehandlers = [];\r\n        }\r\n\r\n        return this.refreshRuleConditionsAndActions(pluginContext);\r\n    }\r\n\r\n    /**\r\n     * Method to configure the workflow strip\r\n     */\r\n    private configureWorkflowStrip(pluginContext: IProcessPluginDefinitionContext): void {\r\n        pluginContext.workflowViewLocations = [];\r\n\r\n        const topItem: IDropDownMenuItem = {\r\n            key: 'top',\r\n            title: this.resourceService.getString('smartforms_integration_user_task_workflowstrip_top'),\r\n            isSelected: this.formContent.workflowStripLocation === 'top'\r\n        };\r\n\r\n        const bottomItem: IDropDownMenuItem = {\r\n            key: 'bottom',\r\n            title: this.resourceService.getString('smartforms_integration_user_task_workflowstrip_bottom'),\r\n            isSelected: this.formContent.workflowStripLocation === 'bottom'\r\n        };\r\n\r\n        pluginContext.workflowViewLocations.push(topItem);\r\n        pluginContext.workflowViewLocations.push(bottomItem);\r\n\r\n        if (bottomItem.isSelected) {\r\n            pluginContext.selectedLocation = bottomItem;\r\n        }\r\n        else {\r\n            topItem.isSelected = true;\r\n            pluginContext.selectedLocation = topItem;\r\n        }\r\n\r\n        pluginContext.actionCommand = this.formContent.actionCommand ? this.formContent.actionCommand : 'showmessage';\r\n\r\n        this.setAfterSubmitRule(pluginContext);\r\n\r\n        if (this.formContent.actionCommand === 'callarule') {\r\n            pluginContext.afterSubmitRule = this.formContent.afterSubmitRule;\r\n            for (const rule of pluginContext.afterSubmitRules) {\r\n                if ((rule.metaData as sourceCode.k2Designer.objectModel.smartForms.IRule).id === this.formContent.afterSubmitRule.id) {\r\n                    rule.isSelected = true;\r\n                    pluginContext.afterSubmitRule = rule.metaData as sourceCode.k2Designer.objectModel.smartForms.IRule;\r\n                }\r\n                else {\r\n                    rule.isSelected = false;\r\n                }\r\n            }\r\n        }\r\n        else if (this.formContent.actionCommand === 'navigateto') {\r\n            if (this.formContent.afterSubmitNavigateToForm.id) {\r\n                pluginContext.navigateUrl = sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({\r\n                    smartFields: [\r\n                        sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartForm.createInstance({\r\n                            id: this.formContent.afterSubmitNavigateToForm.id,\r\n                            title: this.formContent.afterSubmitNavigateToForm.name,\r\n                            name: this.formContent.afterSubmitNavigateToForm.name\r\n                        })\r\n                    ]\r\n                });\r\n\r\n                pluginContext.toggleToUrl = false;\r\n            }\r\n            else if (this.formContent.afterSubmitNavigateToURL) {\r\n                pluginContext.navigateUrl.smartFields.clear();\r\n\r\n                pluginContext.navigateUrl.smartFields.push(\r\n                    sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({\r\n                        text: this.formContent.afterSubmitNavigateToURL\r\n                    })\r\n                );\r\n                pluginContext.toggleToUrl = true;\r\n            }\r\n        }\r\n        else {\r\n            if (!this.formContent.afterSubmitMessage) {\r\n                pluginContext.submitMessage = this.resourceService.getString('wizard_Task_smartform_default_submit_message');\r\n            }\r\n            else {\r\n                pluginContext.submitMessage = this.formContent.afterSubmitMessage;\r\n            }\r\n        }\r\n\r\n        pluginContext.allocateTaskToUser = this.formContent.workflowAllocate;\r\n    }\r\n\r\n    /**\r\n     * Set the default value for the after submit rule on the context\r\n     * */\r\n    private setAfterSubmitRule(pluginContext: IProcessPluginDefinitionContext) {\r\n        pluginContext.afterSubmitRule = pluginContext.afterSubmitRules.length > 0\r\n            ? pluginContext.afterSubmitRules[0].metaData\r\n            : null;\r\n\r\n        //Ensure dropdown items is configured to display correct selected item\r\n        for (const rule of pluginContext.afterSubmitRules) {\r\n            if (rule.metaData.id !== pluginContext.afterSubmitRule.id) {\r\n                rule.isSelected = false;\r\n            } else {\r\n                rule.isSelected = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Method to get the error message.\r\n     */\r\n    private getMessageFromResult(result: string): string {\r\n        let exception = null;\r\n        try {\r\n            exception = JSON.parse(result);\r\n        } catch { }\r\n\r\n        let messageTitle = '';\r\n\r\n        if (exception?.ExceptionDetail) {\r\n            if (exception.ExceptionDetail.InnerException) {\r\n                messageTitle = exception.ExceptionDetail.InnerException.Message;\r\n            }\r\n            else {\r\n                messageTitle = exception.ExceptionDetail.Message;\r\n            }\r\n        }\r\n        else {\r\n            if (exception?.InnerException) {\r\n                messageTitle = exception.InnerException.ExceptionMessage;\r\n            }\r\n            else if (exception.Message) {\r\n                messageTitle = exception.Message;\r\n            }\r\n            else if (exception?.ExceptionMessage) {\r\n                messageTitle = exception.ExceptionMessage;\r\n            }\r\n        }\r\n\r\n        return messageTitle;\r\n    }\r\n\r\n    /**\r\n     * Method to detect changes\r\n     */\r\n    private detectChanges(pluginContext: IProcessPluginDefinitionContext): boolean {\r\n        //Check if form is going to be checked-out\r\n        if (this.formContent.checkedOutBy === '') {\r\n            pluginContext.checkOutForm = true;\r\n        }\r\n\r\n        //Check if a new action is added to a rule\r\n        if (pluginContext.selectedRule) {\r\n            if (((pluginContext.selectedRule.metaData as sourceCode.k2Designer.objectModel.smartForms.IRule).id !== this.formContent.workflowActionRule.id) ||\r\n                (!pluginContext.isUserForm && pluginContext.makeStateDefault !== this.formContent.isWorkflowActionStateDefault) ||\r\n                (!pluginContext.createNewState && pluginContext.selectedState.key !== this.formContent.workflowActionStateId)) {\r\n                pluginContext.addActionToRule = true;\r\n            }\r\n        }\r\n\r\n        //Check if something changed on the usertask\r\n        if (pluginContext.isUserForm\r\n            && (\r\n                (pluginContext.submitMessage !== this.formContent.afterSubmitMessage && this.formContent.actionCommand === 'showmessage')\r\n                || (\r\n                    pluginContext.afterSubmitRule\r\n                    && pluginContext.afterSubmitRule.id !== this.formContent.afterSubmitRule.id\r\n                    && this.formContent.actionCommand === 'callarule'\r\n                )\r\n                || this.formContent.actionCommand === 'navigateto'\r\n                || this.formContent.actionCommand !== pluginContext.actionCommand\r\n                || this.formContent.workflowStripLocation !== pluginContext.selectedLocation.key\r\n                || this.formContent.workflowAllocate !== pluginContext.allocateTaskToUser\r\n            )\r\n        ) {\r\n            pluginContext.addActionToRule = true;\r\n        }\r\n\r\n        //Check if item references exists on the process.\r\n        pluginContext.addItemReferences = false;\r\n        if (pluginContext.containsNewReferences) {\r\n            for (const newReference of pluginContext.newItemReferences.collection) {\r\n                if (!newReference.disabled && !(this.processService.root as\r\n                    sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2ProcessExtended)\r\n                    .findWorkflowItemReference(newReference.smartObjectName,\r\n                        newReference.smartObjectMethodName, this.processService as any,\r\n                        newReference.primary, newReference.startMode,\r\n                        newReference.primaryReference)) {\r\n                    pluginContext.addItemReferences = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return pluginContext.checkOutForm\r\n            || pluginContext.createNewState\r\n            || pluginContext.addItemReferences\r\n            || pluginContext.addActionToRule;\r\n    }\r\n\r\n    //Reset config values when new form is selected.\r\n    private resetToDefaults(pluginContext: IProcessPluginDefinitionContext): void {\r\n        pluginContext.pageIndex = 0;\r\n        pluginContext.formLoading = true;\r\n        pluginContext.containsDefaultRule = false;\r\n    }\r\n\r\n    /**\r\n     * Method  to setup state model\r\n     */\r\n    private configureStateModel(pluginContext: IProcessPluginDefinitionContext): void {\r\n        pluginContext.states = [];\r\n        pluginContext.selectedState = null;\r\n        pluginContext.selectedRule = null;\r\n\r\n        pluginContext.foundWorkflowActionOnForm = (this.formContent.workflowAction !== null &&\r\n            this.formContent.workflowAction?.id !== null && this.formContent.workflowAction?.id !== undefined);\r\n\r\n        //If the startworkflow action was not found on form, create new state with workflow name.\r\n        if (!pluginContext.foundWorkflowActionOnForm) {\r\n            pluginContext.createNewState = true;\r\n\r\n            if (pluginContext.isUserForm) {\r\n                pluginContext.newStateName = this.resourceService.getString('smartforms_integration_user_task_state_workflow_task');\r\n            }\r\n            else {\r\n                pluginContext.newStateName = this.processService.root.title;\r\n            }\r\n        }\r\n        else {\r\n            pluginContext.actionId = this.formContent.workflowAction?.id;\r\n            pluginContext.makeStateDefault = (this.formContent.isWorkflowActionStateDefault && this.formContent.isWorkflowActionStateDefault === true);\r\n            pluginContext.createNewState = false;\r\n        }\r\n\r\n        for (const state of this.formContent.states) {\r\n            const item: IDropDownMenuItem = {\r\n                key: state.id,\r\n                title: state.name,\r\n                isSelected: this.formContent.workflowActionStateId === state.id.toString()\r\n            };\r\n            pluginContext.states.push(item);\r\n\r\n            if (item.isSelected) {\r\n                pluginContext.selectedState = item;\r\n            }\r\n        }\r\n\r\n        if (!pluginContext.selectedState && this.formContent.states.length > 0) {\r\n            pluginContext.selectedState = pluginContext.states[0];\r\n        }\r\n    }\r\n   \r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockPopupService } from '../../../testing/mock-services/popup-service';\r\nimport { IPopupService } from '../../../types/services/popup/i-popup-service';\r\n\r\nconst legacyPopupServiceFactory = () => environment.devHarness === true\r\n    ? new MockPopupService()\r\n    : sourceCode.k2Designer.core.environmentService.popupService;\r\n\r\nexport const LegacyPopupServiceToken = new InjectionToken<IPopupService>('IPopupService');\r\n\r\nexport const LegacyPopupServiceFactory = {\r\n    provide: LegacyPopupServiceToken,\r\n    useFactory: legacyPopupServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { ApplicationRef, ComponentFactoryResolver, ComponentRef, EmbeddedViewRef, Inject, Injectable, Injector, Type } from '@angular/core';\r\nimport { IDataField } from '../../../types/models/data-field/i-data-field';\r\nimport { IActionPopupConfiguration } from '../../../types/models/popup/i-action-popup-configuration';\r\nimport { ICategoryDialogContext } from '../../../types/models/popup/i-category-dialog-context';\r\nimport { ICategoryDialogData } from '../../../types/models/popup/i-category-dialog-data';\r\nimport { ICategoryItem } from '../../../types/models/popup/i-category-item';\r\nimport { IDeleteProcessContext } from '../../../types/models/popup/i-delete-process-context';\r\nimport { IPopup } from '../../../types/models/popup/i-popup';\r\nimport { IPopupButton } from '../../../types/models/popup/i-popup-button';\r\nimport { IPopupConfiguration } from '../../../types/models/popup/i-popup-configuration';\r\nimport { IUserDialogContext } from '../../../types/models/popup/i-user-dialog-context';\r\nimport { IOutcome } from '../../../types/models/process/outcomes/i-outcome';\r\nimport { IEnvironmentService } from '../../../types/services/environment/i-environment-service';\r\nimport { ILegacyPopupService } from '../../../types/services/popup/i-legacy-popup-service';\r\nimport { IContextPopupConfiguration } from '../../../types/uiComponents/pluginWizards/i-context-popup-configuration';\r\nimport { IContextWizardPopupConfiguration } from '../../../types/uiComponents/pluginWizards/i-context-wizard-popup-configuration';\r\nimport { IHierarchyDialogContext } from '../../../types/uiComponents/pluginWizards/IHierarchyDialogContext';\r\nimport { IStateChangedListener } from '../../../types/uiComponents/pluginWizards/IStateChangedListener';\r\nimport { PopupComponent } from '../../components/popup/popup.component';\r\nimport { popup } from '../../shared/constants/wizard-popup';\r\nimport { Deferred } from '../../shared/deferred';\r\nimport { PopupButtonStyleType } from '../../shared/enums/plugin-wizard/popup-button-style-type';\r\nimport { ActionPopupTemplate } from '../../shared/enums/popup/action-popup-template';\r\nimport { PopupHeaderTemplate } from '../../shared/enums/popup/popup-header-template';\r\nimport { PopupTemplate } from '../../shared/enums/popup/popup-template';\r\nimport { EnvironmentServiceToken } from '../environment/environment-service-factory';\r\nimport { ProcessService } from '../process/process.service';\r\nimport { ResourceService } from '../resource/resource.service';\r\nimport { LegacyPopupServiceToken } from './legacy-popup-service-factory';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class PopupService {\r\n    popups: IPopup[] = [];\r\n\r\n    constructor(@Inject(EnvironmentServiceToken) private environmentService: IEnvironmentService,\r\n        @Inject(LegacyPopupServiceToken) private _legacyPopupService: ILegacyPopupService,\r\n        private resourceService: ResourceService,\r\n        private componentFactoryResolver: ComponentFactoryResolver,\r\n        private appRef: ApplicationRef,\r\n        private injector: Injector) { }\r\n\r\n    /**\r\n     * Show a popup with the specified config\r\n     * resolves the value which the popup closed with\r\n     *\r\n     * @param config config for the popup to use\r\n     */\r\n    show<T>(config: IPopupConfiguration): Promise<T> {\r\n        const result = new Deferred<T>();\r\n        const popupRef = this.appendComponentToDOM(PopupComponent);\r\n        popupRef.instance.config = config;\r\n        this.popups.push({ config, componentRef: popupRef, result });\r\n        return result.toPromise();\r\n    };\r\n\r\n    /**\r\n     * Hide the popup with the config specified. if not specified, hides the last popup shown\r\n     *\r\n     * @param result the result of the popup\r\n     * @param config the config which the popup used\r\n     */\r\n    hide(result: any, config?: IPopupConfiguration) {\r\n        if (!this.popups?.length) { // legacy/wizard popup\r\n            this._legacyPopupService.hide('okButton', result);\r\n            return;\r\n        }\r\n        let popup: IPopup;\r\n        if (config) {\r\n            popup = this.popups.find((popup) => popup.config === config);\r\n        } else {\r\n            popup = this.popups[this.popups.length - 1]; // hide the last one if none specified\r\n            config = popup?.config;\r\n        }\r\n        if (!popup) {\r\n            console.error('no active popups found with the config given');\r\n            return;\r\n        }\r\n        this.popups.splice(this.popups.indexOf(popup), 1);\r\n        popup.result.resolve(result);\r\n        this.removeComponentFromBody(popup.componentRef);\r\n        if (config?.onClosed) {\r\n            config.onClosed('', result);\r\n        }\r\n    };\r\n\r\n    listen(callback: IStateChangedListener) {\r\n        this._legacyPopupService.listen(callback);\r\n    };\r\n\r\n    /**\r\n     * Forces the top-most popup to be dismissed with the specified result\r\n     *\r\n     * @param key The key of the button that invoked the popup dismissal\r\n     * @param result A result value that indicates the reason for the dismissal\r\n     */\r\n    hideContextPopup(key: string, result: string) {\r\n        if (!this.popups?.length) { // legacy/wizard popup\r\n            this._legacyPopupService.hideContextPopup(key, result);\r\n            return;\r\n        }\r\n\r\n        this.hide(result);\r\n    };\r\n\r\n    getInitialHeight() {\r\n        return this._legacyPopupService.getInitialHeight();\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param actionButtons\r\n     * @param actionTemplate\r\n     * @param actionType\r\n     */\r\n    showActionDialog<T>(actionButtons: IPopupButton[], actionTemplate: ActionPopupTemplate, actionType: string): Promise<T> {\r\n        return new Promise<T>((resolve, reject) => {\r\n            const popupConfig = <IActionPopupConfiguration>{\r\n                buttons: {},\r\n                heading: this.resourceService.getString('workflow_authentication_error'),\r\n                style: {\r\n                    minHeight: '345px',\r\n                    width: '265px'\r\n                },\r\n                template: PopupTemplate.actionPopup,\r\n                actionButtons,\r\n                actionTemplate,\r\n                type: actionType,\r\n                showFooter: false\r\n            };\r\n\r\n            this.show<T>(popupConfig).then((result) => resolve(result)).catch((err) => reject(err));\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param heading\r\n     * @param errorMessage\r\n     * @param onOkClicked\r\n     * @param onClosed\r\n     */\r\n    showActionErrorDialog<T>(heading: string, errorMessage: string, onClosed: () => void): Promise<T> {\r\n        return new Promise<T>((resolve, reject) => {\r\n            const popupConfig = <IActionPopupConfiguration>{\r\n                buttons: {\r\n                    closeButton: {\r\n                        key: popup.buttons.ok,\r\n                        text: this.resourceService.getString('OK'),\r\n                        visible: true,\r\n                        dismissResult: popup.buttons.okResult,\r\n                        buttonStyleType: PopupButtonStyleType.tertiary\r\n                    }\r\n                },\r\n                heading,\r\n                template: PopupTemplate.actionPopup,\r\n                actionButtons: [],\r\n                actionTemplate: ActionPopupTemplate.custom,\r\n                errorMessage,\r\n                //type is the style override in the popup.\r\n                type: 'custom-error',\r\n                showFooter: true,\r\n                bodyHeight: 92,\r\n                onClosed\r\n            };\r\n\r\n            this.show<T>(popupConfig).then((result) => resolve(result)).catch(err => reject(err));\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param heading\r\n     * @param context\r\n     * @param onCompleted\r\n     */\r\n    showCategoryDialog(heading: string, context: ICategoryDialogContext, onCompleted: (item: ICategoryItem, cancelled: boolean) => void): void {\r\n        const config = {\r\n            buttons: {\r\n                createButton: {\r\n                    key: popup.buttons.create,\r\n                    text: this.resourceService.getString('category_popup_create_folder'),\r\n                    visible: true,\r\n                    enabled: true,\r\n                    invokeValidation: false,\r\n                    showLeft: true,\r\n                    buttonStyleType: PopupButtonStyleType.tertiary\r\n                },\r\n                okButton: {\r\n                    key: popup.buttons.ok,\r\n                    text: this.resourceService.getString('workflow_contextPopup_okButton'),\r\n                    visible: true,\r\n                    enabled: false,\r\n                    dismissResult: popup.buttons.okResult,\r\n                    invokeValidation: false\r\n                }\r\n            },\r\n            heading,\r\n            context,\r\n            template: PopupTemplate.categoryDialog,\r\n            onClosed: (key: string, dismissResult: string) => {\r\n                if (dismissResult === popup.buttons.okResult) {\r\n                    if (config.returnData) {\r\n                        const selectedItem = (<ICategoryDialogData>config.returnData).selectedItem as ICategoryItem;\r\n                        onCompleted(selectedItem, false);\r\n                    }\r\n                }\r\n                else {\r\n                    onCompleted(null, true);\r\n                }\r\n            },\r\n            footerCssClass: 'multiple-buttons'\r\n        } as IContextPopupConfiguration;\r\n\r\n        this.show(config);\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param config\r\n     * @param context\r\n     */\r\n    showDeleteProcessDialog(heading: string, context: IDeleteProcessContext): void {\r\n        //On OK clicked, the popup does not need to be dismissed, because when delete is done, designer will close\r\n        const okButton: IPopupButton = {\r\n            key: popup.buttons.ok,\r\n            text: this.resourceService.getString('delete_process_ok_button_text'),\r\n            visible: true,\r\n            enabled: true,\r\n            invokeValidation: true\r\n        };\r\n        const cancelButton: IPopupButton = {\r\n            key: popup.buttons.cancel,\r\n            text: this.resourceService.getString('delete_process_cancel_button_text'),\r\n            visible: true,\r\n            enabled: true,\r\n            dismissResult: popup.buttons.cancelResult,\r\n            invokeValidation: false,\r\n            buttonStyleType: PopupButtonStyleType.tertiary,\r\n            showLeft: true\r\n        };\r\n\r\n        const popupConfig: IPopupConfiguration = {\r\n            buttons: { cancelButton, okButton },\r\n            heading,\r\n            template: PopupTemplate.deleteProcess,\r\n            height: popup.deleteProcessDialog.defaultHeight,\r\n            bodyHeight: popup.deleteProcessDialog.defaultBodyHeight,\r\n            type: 'delete-process',\r\n            context\r\n        };\r\n\r\n        this.show(popupConfig);\r\n    }\r\n\r\n    /**\r\n     * Show the hierarchy dialog\r\n     *\r\n     * @param heading popup heading\r\n     * @param disableUndoService should undo-redo service be disabled\r\n     * @param context popup context\r\n     * @param onCompleted callback function on completed\r\n     */\r\n    public showHierarchyDialog(heading: string,\r\n        disableUndoService: boolean = false,\r\n        context: IHierarchyDialogContext,\r\n        onCompleted: (item: sourceCode.k2Designer.objectModel.core.itemProvider.IAssetItem, cancelled: boolean, selectedFromRecent?: boolean) => void\r\n    ): void {\r\n        const popupConfig = <IContextPopupConfiguration>{\r\n            buttons: {\r\n                okButton: {\r\n                    key: popup.buttons.ok,\r\n                    text: this.resourceService.getString('workflow_contextPopup_okButton'),\r\n                    visible: true,\r\n                    enabled: false,\r\n                    dismissResult: popup.buttons.okResult,\r\n                    invokeValidation: true\r\n                }\r\n            },\r\n            heading,\r\n            context,\r\n            template: PopupTemplate.hierarchyDialog,\r\n            onClosed: (key: string, dismissResult: string) => {\r\n                if (dismissResult === popup.buttons.okResult) {\r\n                    if (popupConfig.returnData) {\r\n                        const selectedItem: sourceCode.k2Designer.objectModel.core.itemProvider.IAssetItemExtension = (popupConfig.returnData as any).selectedItem;\r\n\r\n                        //Add item to recent server\r\n                        this.environmentService.getService(sourceCode.k2Designer.services.studio.RecentsService).addItem(\r\n                            (popupConfig.returnData as any).recentContextString,\r\n                            selectedItem, 'key');\r\n\r\n                        onCompleted(selectedItem, false, (popupConfig.returnData as any).selectedFromRecent);\r\n                    }\r\n                } else {\r\n                    onCompleted(null, true);\r\n                }\r\n            },\r\n            type: 'hierarchy',\r\n            width: popup.hierarchyDialog.defaultWidth,\r\n            height: popup.hierarchyDialog.defaultHeight,\r\n            disableUndoService\r\n        };\r\n\r\n        this.show(popupConfig);\r\n    }\r\n\r\n    /**\r\n     * Open New DataField popup (migrated NewDataField.component)\r\n     *\r\n     * @param processConfiguration Represents the process on which the datafield can be added.\r\n     * @param existingDataField Datafield to configure\r\n     * @param onFinished Callback on finish of configuration\r\n     * @param onCancelled Callback on cancel of configuration\r\n     * @param scope caller scope (passed on to cancel callback)\r\n     * @param originalItem original datafield item (used by cancel callback to revert changes)\r\n     */\r\n    public showDataFieldPopup(\r\n        processConfiguration: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2ProcessConfiguration,\r\n        existingDataField: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IDataField,\r\n        onFinished: (mapping: any, item: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IDataField) => void,\r\n        onCancelled: (scope: any, originalItem: any) => void = null,\r\n        scope?: any,\r\n        originalItem?: any\r\n    ): void {\r\n\r\n        var popupConfig: IContextPopupConfiguration = {\r\n            buttons: {\r\n                okButton: {\r\n                    key: popup.buttons.ok,\r\n                    text: this.resourceService.getString('workflow_contextPopup_okButton'),\r\n                    visible: true,\r\n                    enabled: true,\r\n                    dismissResult: popup.buttons.okResult,\r\n                    invokeValidation: false\r\n                }\r\n            },\r\n            context: {\r\n                processConfiguration,\r\n                existingDataField\r\n            },\r\n            headerTemplate: PopupHeaderTemplate.dataField,\r\n            heading: this.resourceService.getString('workflow_contextPopup_newDataFieldHeading'),\r\n            modal: true,\r\n            headingColor: 'settings',\r\n            template: PopupTemplate.newDataField,\r\n            validationContext: sourceCode.k2Designer.objectModel.core.model.ValidationTypes.DataField,\r\n            validationModel: [scope.item],\r\n            onClosed: (key: string, dismissResult: string) => {\r\n                if (dismissResult === popup.buttons.okResult) {\r\n                    onFinished(null, <IDataField>popupConfig.returnData);\r\n                } else if (onCancelled) {\r\n                    onCancelled(scope, originalItem);\r\n                }\r\n            },\r\n            width: popup.dataFieldDialog.defaultWidth\r\n        };\r\n\r\n        this.show(popupConfig);\r\n    }\r\n\r\n    showUserDialog(onCompleted: (item: sourceCode.k2Designer.objectModel.workflow.itemProvider.IUserItem, cancelled: boolean) => void, types: string[]): void {\r\n        var popupConfig = {\r\n            buttons: {\r\n                okButton: {\r\n                    key: popup.buttons.ok,\r\n                    text: this.resourceService.getString('workflow_contextPopup_okButton'),\r\n                    visible: true,\r\n                    enabled: false,\r\n                    dismissResult: popup.buttons.okResult,\r\n                    invokeValidation: true\r\n                }\r\n            },\r\n            heading: this.resourceService.getString('workflow_contextPopup_select_user'),\r\n            context: {\r\n                allowBrowseMode: true,\r\n                assetType: types,\r\n                createReference: true,\r\n                defaultFilter: 'k2',\r\n                outputProperty: 'email',\r\n                showReference: true\r\n            } as IUserDialogContext,\r\n            modal: false,\r\n            template: PopupTemplate.userDialog,\r\n            style: {\r\n                minHeight: '460px',\r\n                width: '530px'\r\n            },\r\n            body: {\r\n                minHeight: '350px'\r\n            },\r\n            onClosed(key: string, dismissResult: string) {\r\n                if (dismissResult === popup.buttons.okResult) {\r\n                    if (popupConfig.returnData) {\r\n                        onCompleted(<any>popupConfig.returnData, false);\r\n                    }\r\n                } else {\r\n                    onCompleted(null, true);\r\n                }\r\n            }\r\n        } as IPopupConfiguration;\r\n\r\n        this.show(popupConfig);\r\n    }\r\n\r\n    public showContextWizardPopup(config: IContextWizardPopupConfiguration): void {\r\n        this._legacyPopupService.showContextWizardPopup(config as any);\r\n    }\r\n\r\n    appendComponentToDOM<T>(component: Type<T>): ComponentRef<T> {\r\n        // 1. Create a component reference from the component\r\n        const componentRef = this.componentFactoryResolver\r\n            .resolveComponentFactory(component)\r\n            .create(this.injector);\r\n\r\n        // 2. Attach component to the appRef so that it's inside the ng component tree\r\n        this.appRef.attachView(componentRef.hostView);\r\n\r\n        // 3. Get DOM element from component\r\n        const domElem = (componentRef.hostView as EmbeddedViewRef<any>)\r\n            .rootNodes[0] as HTMLElement;\r\n\r\n        // 4. Append DOM element to the body\r\n        document.body.appendChild(domElem);\r\n\r\n        return componentRef;\r\n    }\r\n\r\n    removeComponentFromBody(componentRef: ComponentRef<unknown>) {\r\n        this.appRef.detachView(componentRef.hostView);\r\n        componentRef.destroy();\r\n    }\r\n}\r\n","import { Inject, Injectable } from '@angular/core';\r\nimport { IEnvironmentService } from '../../../types/services/environment/i-environment-service';\r\nimport { IProcessDefinitionPluginConfiguration } from '../../../types/services/process/i-process-definition-plugin-configuration';\r\nimport { IProcessService } from '../../../types/services/process/i-process-service';\r\nimport { EnvironmentServiceToken } from '../environment/environment-service-factory';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockProcessService } from 'src/testing/mock-legacy-services/process/mock-legacy-process-service';\r\nimport { ILegacyProcessService } from 'src/types/services/process/i-legacy-process-service';\r\nimport { IProcess } from '../../../types/models/process/i-process';\r\nimport { IActivity } from '../../../types/models/process/activities/i-activity';\r\nimport { ErrorSeverity } from '../../shared/enums/model/error-severity';\r\nimport { IConfiguredSmartField } from '../../../types/models/core/configured-smart-fields/i-configured-smart-field';\r\nimport { IValidatedComponent } from '../../../types/validation/i-validated-component';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ProcessService implements IProcessService {\r\n    private processService: ILegacyProcessService;\r\n\r\n    get legacyProcessService() {\r\n        if (!this.processService) {\r\n            if(environment.devHarness === true ){\r\n                this.processService = new MockProcessService(this.environmentService) as any;\r\n            } else {\r\n                this.processService = this.environmentService\r\n                    .activeStudioItem\r\n                    .getService(sourceCode.k2Designer.services.studioItem.workflow.ProcessService) as any;\r\n            }\r\n        }\r\n        return this.processService;\r\n    }\r\n\r\n    get definitionPlugins(): IProcessDefinitionPluginConfiguration[] {\r\n        return this.legacyProcessService.definitionPlugins;\r\n    }\r\n\r\n    get root(): sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process {\r\n        return this.legacyProcessService.root;\r\n    }\r\n\r\n    get rootId(): string {\r\n        return this.legacyProcessService.rootId;\r\n    }\r\n\r\n    get beginCloningOperation(): () => void {\r\n        return this.legacyProcessService.beginCloningOperation;\r\n    }\r\n\r\n    get finishCloningOperation(): () => void {\r\n        return this.legacyProcessService.finishCloningOperation;\r\n    }\r\n\r\n    get isCloning(): boolean {\r\n        return this.legacyProcessService.isCloning;\r\n    }\r\n\r\n    get itemInstance(): sourceCode.k2Designer.objectModel.environment.IItemInstance {\r\n        return this.legacyProcessService.itemInstance;\r\n    }\r\n\r\n    get id(): string {\r\n        return this.legacyProcessService.id;\r\n    }\r\n\r\n    get listenReady(): (callback: sourceCode.k2Designer.services.core.IServiceReadyCallback) => void {\r\n        return this.legacyProcessService.listenReady;\r\n    }\r\n\r\n    get notifyReady(): () => void {\r\n        return this.legacyProcessService.notifyReady;\r\n    }\r\n\r\n    constructor(@Inject(EnvironmentServiceToken) private environmentService: IEnvironmentService) { }\r\n\r\n    isInitialized(): boolean {\r\n        return this.legacyProcessService.isInitialized();\r\n    }\r\n    unRegisterEventListener(event: any, subscriberId: any): void {\r\n        this.legacyProcessService.unRegisterEventListener(event, subscriberId);\r\n    }\r\n\r\n    createNewActivity(initialize: boolean, wizardId?: number, template?: string): IActivity {\r\n        return this.legacyProcessService.createNewActivity(initialize, wizardId, template);\r\n    }\r\n\r\n    registerObjectModelServiceEventListner(event: any, subscriber: any) {\r\n        return this.legacyProcessService.registerObjectModelServiceEventListner(event, subscriber);\r\n    }\r\n\r\n    unRegisterObjectModelServiceEventListner(event: any, subscriberId: any) {\r\n        return this.legacyProcessService.unRegisterObjectModelServiceEventListner(event, subscriberId);\r\n    }\r\n\r\n    listenForErrorList(cb: () => void, errorSeverity?: ErrorSeverity): () => void {\r\n        return this.legacyProcessService.listenForErrorList(cb, errorSeverity);\r\n    }\r\n\r\n    cacheExternalReferences(configuredFields: IConfiguredSmartField[]): void {\r\n        return this.legacyProcessService.cacheExternalReferences(configuredFields);\r\n    }\r\n\r\n    deployProcess(onCompleted: () => void): void {\r\n        return this.legacyProcessService.deployProcess(onCompleted);\r\n    }\r\n\r\n    raiseReferenceError(modelObject: IValidatedComponent, errorProperty: string, errorReference: string): void {\r\n        return this.legacyProcessService.raiseReferenceError(modelObject, errorProperty, errorReference);\r\n    }\r\n\r\n    removeTrackedItem(definitionReference: string, useReference: string): void {\r\n        return this.legacyProcessService.removeTrackedItem(definitionReference, useReference);\r\n    }\r\n\r\n    listenForSRErrorList(cb: () => void, errorSeverity?: ErrorSeverity): () => void {\r\n        return this.legacyProcessService.listenForSRErrorList(cb, errorSeverity);\r\n    }\r\n\r\n    getErrorList(): sourceCode.k2Designer.objectModel.core.model.IErrorInformation[] {\r\n        return this.legacyProcessService.getErrorList();\r\n    }\r\n\r\n    registerEventListener(event: any, subscriber: any): void {\r\n        return this.legacyProcessService.registerEventListener(event, subscriber);\r\n    }\r\n\r\n    busyProcessingInstructions(): boolean {\r\n        return this.legacyProcessService.busyProcessingInstructions();\r\n    }\r\n\r\n    flush(callbackSuccess?: () => void, callbackFail?: () => void, closeProject?: boolean, isAutoFlush?: boolean): void {\r\n        return this.legacyProcessService.flush(callbackSuccess, callbackFail, closeProject, isAutoFlush);\r\n    }\r\n\r\n    getInstructionCount(): number {\r\n        return this.legacyProcessService.getInstructionCount();\r\n    }\r\n\r\n    allowProcessing(): boolean {\r\n        return this.legacyProcessService.allowProcessing();\r\n    }\r\n    enableProcessing(): void {\r\n        return this.legacyProcessService.enableProcessing();\r\n    }\r\n\r\n    requestProcessingCompleteNotification(stopProcessing: boolean, cleanup: boolean, onEventRaisedCallback: () => void): void {\r\n        return this.legacyProcessService.requestProcessingCompleteNotification(stopProcessing, cleanup, onEventRaisedCallback);\r\n    }\r\n\r\n    setTitle(newValue: string): Promise<string> {\r\n\r\n        return new Promise<string>((resolve, reject) => {\r\n            this.legacyProcessService.setTitle(newValue).fail((originalTitle: string)=>{\r\n                reject(originalTitle);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Returns a list of reference strings from tracked references that are linked to the specified node\r\n     *\r\n     * @param nodePath - reference path of node\r\n     */\r\n    getTrackedReferencesForNode(nodePath: string): string[] {\r\n        return this.legacyProcessService.getTrackedReferencesForNode(nodePath);\r\n    }\r\n\r\n    /**\r\n     * Returns whether or not the reference has children that are used\r\n     */\r\n    public trackedReferenceHasChildren(definitionPath: string, excludedIndex?: number): boolean {\r\n        return this.legacyProcessService.trackedReferenceHasChildren(definitionPath, excludedIndex);\r\n    }\r\n\r\n    getActivityDefaultName(wizardId: number, template: string): string {\r\n        return this.legacyProcessService.getActivityDefaultName(wizardId, template);\r\n    }\r\n\r\n    getActivityDefaultNameFromActivity(activity: IActivity): string {\r\n        return this.legacyProcessService.getActivityDefaultNameFromActivity(activity);\r\n    }\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockProgressBarService } from '../../../testing/mock-services/progress-bar-service';\r\nimport { IProgressBarService } from '../../../types/services/progress-bar/i-progress-bar-service';\r\n\r\nconst progressBarServiceFactory = () => environment.devHarness === true\r\n    ? new MockProgressBarService()\r\n    : sourceCode.k2Designer.core.environmentService.getService(sourceCode.k2Designer.services.studio.ProgressBarService);\r\n\r\nexport const ProgressBarServiceToken = new InjectionToken<IProgressBarService>('IProgressBarService');\r\n\r\nexport const ProgressBarServiceFactory = {\r\n    provide: ProgressBarServiceToken,\r\n    useFactory: progressBarServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { IRecentsService } from 'src/types/services/recents/i-recents-service';\r\nimport { MockRecentsService } from '../../../testing/mock-services/recents-service';\r\n\r\n\r\nconst recentsServiceFactory = () => environment.devHarness === true\r\n    ? new MockRecentsService()\r\n    : sourceCode.k2Designer.core.environmentService.getService\r\n            <sourceCode.k2Designer.services.studio.RecentsService>(sourceCode.k2Designer.services.studio.RecentsService);\r\n\r\nexport const RecentsServiceToken = new InjectionToken<IRecentsService>('IRecentsService');\r\n\r\nexport const RecentsServiceFactory = {\r\n    provide: RecentsServiceToken,\r\n    useFactory: recentsServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockRedirectService } from '../../../testing/mock-services/redirect-service';\r\nimport { IRedirectService } from '../../../types/services/redirect/i-redirect-service';\r\n\r\nconst redirectServiceFactory = () => environment.devHarness === true\r\n    ? new MockRedirectService()\r\n    : sourceCode.k2Designer.core.environmentService.getService(sourceCode.k2Designer.services.studio.RedirectService);\r\n\r\nexport const RedirectServiceToken = new InjectionToken<IRedirectService>('IRedirectService');\r\n\r\nexport const RedirectServiceFactory = {\r\n    provide: RedirectServiceToken,\r\n    useFactory: redirectServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { Inject, Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { share } from 'rxjs/operators';\r\nimport { LegacyResourceServiceToken } from 'src/app/legacy-service-factories/resource-service-factory';\r\nimport { IDataService } from 'src/types/services/data/i-data-service';\r\nimport { ILegacyResourceService } from 'src/types/services/resources/i-legacy-resource.service';\r\nimport { DataServiceToken } from '../data/data-service-factory';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ResourceService {\r\n\r\n    private _resources: {\r\n        [resourceName: string]: {\r\n            [key: string]: string;\r\n        };\r\n    } = {};\r\n\r\n    private _resourceSubjects: {\r\n        [resourceName: string]: {\r\n            [key: string]: BehaviorSubject<string>;\r\n        };\r\n    } = {};\r\n\r\n    private _loadResxFileObservables: {\r\n        [resourceName: string]: Observable<{ [key: string]: string }>;\r\n    } = {};\r\n\r\n    constructor(@Inject(LegacyResourceServiceToken) private _legacyResourceService: ILegacyResourceService,\r\n        @Inject(DataServiceToken) private _dataService: IDataService) {\r\n    }\r\n\r\n    getString = (key: string) => this._legacyResourceService.getString(key);\r\n\r\n    /**\r\n     * Resolves a string based on the token provided\r\n     *\r\n     * @param resourceStr\r\n     * @param resourceTokens\r\n     * @param modelObj\r\n     */\r\n    resolveTokenResourceString = (resourceStr: string,\r\n        resourceTokens: sourceCode.k2Designer.objectModel.core.model.IModelArray<string>,\r\n        modelObj: sourceCode.k2Designer.objectModel.core.model.IModelObject\r\n    ) => this._legacyResourceService.resolveTokenResourceString(resourceStr, resourceTokens, modelObj);\r\n\r\n    /**\r\n     *\r\n     * @param resourceName The resx file you want to load\r\n     * @param key The key in the file for which you want the value\r\n     * @returns\r\n     */\r\n    getFromResx(resourceName: string, key: string): BehaviorSubject<string> {\r\n\r\n        this._resourceSubjects[resourceName] ??= {\r\n            key: null\r\n        };\r\n\r\n        const resSubj = this._resourceSubjects[resourceName][key] ??= new BehaviorSubject(null);\r\n\r\n        if (this._resources[resourceName]) {\r\n            resSubj.next(this._resources[resourceName][key]);\r\n        } else {\r\n\r\n            // We will just load it from the legacy resource service. It handles caching the data if the fileHash matches\r\n            const subscription = this.loadResxFile(resourceName).subscribe((resource) => {\r\n\r\n                this._resources[resourceName] = resource;\r\n\r\n                if (!this._resources[resourceName]) {\r\n\r\n                    console.error(`Resource with name ${resourceName} not found`);\r\n                    resSubj.next(`${resourceName}_${key}`);\r\n\r\n                } else if (!this._resources[resourceName][key]) {\r\n\r\n                    console.error(`Resource with Name ${resourceName} and Key ${key} not found`);\r\n                    resSubj.next(`${resourceName}_${key}`);\r\n                } else {\r\n                    resSubj.next(this._resources[resourceName][key]);\r\n                }\r\n                subscription.unsubscribe();\r\n            });\r\n        }\r\n\r\n        return this._resourceSubjects[resourceName][key];\r\n    }\r\n\r\n    private loadResxFile(resourceName: string): Observable<{ [key: string]: string }> {\r\n\r\n        this._loadResxFileObservables[resourceName] ??= new Observable<{ [key: string]: string }>(subscriber => {\r\n\r\n            this._dataService.httpGet('api/core/getresxfile', { resourceName }, resource => {\r\n                subscriber.next(resource);\r\n            });\r\n\r\n        })\r\n            .pipe(share());\r\n\r\n        return this._loadResxFileObservables[resourceName];\r\n    };\r\n\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockRibbonBarService } from '../../../testing/mock-services/ribbon-bar-service';\r\nimport { IRibbonService } from '../../../types/services/ribbon-bar/i-ribbon-bar-service';\r\n\r\nconst ribbonBarServiceFactory = () => environment.devHarness === true\r\n    ? new MockRibbonBarService()\r\n    : sourceCode.k2Designer.core.environmentService.getService(sourceCode.k2Designer.services.studio.RibbonService);\r\n\r\nexport const RibbonBarServiceToken = new InjectionToken<IRibbonService>('IRibbonService');\r\n\r\nexport const RibbonBarServiceFactory = {\r\n    provide: RibbonBarServiceToken,\r\n    useFactory: ribbonBarServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { Inject, Injectable } from '@angular/core';\r\nimport { IExpression } from '../../../types/models/core/configured-smart-fields/i-expression';\r\nimport { EnvironmentServiceToken } from '../environment/environment-service-factory';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class RichEditService {\r\n    private _legacyRichEditService;\r\n    private get legacyRichEditService(): sourceCode.k2Designer.services.studio.RichEditPanelService {\r\n        if (!this._legacyRichEditService) this._legacyRichEditService = this._envService.getService(sourceCode.k2Designer.services.studio.RichEditPanelService);\r\n        return this._legacyRichEditService;\r\n    }\r\n\r\n    constructor(@Inject(EnvironmentServiceToken) private _envService) { }\r\n\r\n    /**\r\n     * Set the context for all rich text service operations\r\n     *\r\n     * @param context Explicit context description\r\n     * @param expression New context expression for rich text service operations\r\n     */\r\n    public setContext(context: string, expression: IExpression): void {\r\n        this.legacyRichEditService?.setContext(context, expression);\r\n    }\r\n}\r\n","import { Inject, Injectable } from '@angular/core';\r\nimport { IRulePluginService } from '../../../types/services/rules/i-rule-plugin.service';\r\nimport { LegacyRulePluginServiceToken } from '../../legacy-service-factories/rule-plugin-service-factory';\r\nimport { IRuleDesignerItem } from '../../../types/models/rules/i-rule-designer-item';\r\nimport { IConfiguredExpression } from '../../../types/models/rules/i-configured-expression';\r\nimport { IItemConfiguration } from 'src/types/models/rules/i-item-configuration';\r\nimport { IConfiguredStatement } from '../../../types/models/rules/i-configured-statement';\r\nimport { IConfiguredRule } from '../../../types/models/rules/i-configured-rule';\r\n\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class RulePluginService {\r\n    private _ruleItems: IRuleDesignerItem[] = [];\r\n\r\n    constructor(@Inject(LegacyRulePluginServiceToken) private _legacyRulePluginService: IRulePluginService) {\r\n    }\r\n\r\n    /**\r\n     * Adds rule designer item to collection\r\n     *\r\n     * @param ruleDesignerItem\r\n     */\r\n    public addRuleDesignerItem(ruleDesignerItem: IRuleDesignerItem): void {\r\n        this._ruleItems.push(ruleDesignerItem);\r\n    }\r\n\r\n    /**\r\n     * Removes rule designer item from collection\r\n     *\r\n     * @param ruleDesignerItem\r\n     */\r\n    public removeRuleDesignerItem(ruleDesignerItem: IRuleDesignerItem): void {\r\n        const index = this._ruleItems.indexOf(ruleDesignerItem);\r\n        this._ruleItems.splice(index, 1);\r\n    }\r\n\r\n    /**\r\n     * Retrieves rule designer item from collection\r\n     *\r\n     * @param model\r\n     */\r\n    public getRuleDesignerItem(model: any) {\r\n        return this._ruleItems.filter(function(item: any) {\r\n            return item.expressionModel === model || item.statementModel === model;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Returns true if plugin is statement\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     *\r\n     * @param pluginObject\r\n     */\r\n    public isStatementPlugin(pluginObject: any): boolean {\r\n        return this._legacyRulePluginService.isStatementPlugin(pluginObject);\r\n    }\r\n\r\n    /**\r\n     * Returns true if plugin is expression\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     *\r\n     * @param pluginObject\r\n     */\r\n    public isExpressionPlugin(pluginObject: any): boolean {\r\n        return this._legacyRulePluginService.isExpressionPlugin(pluginObject);\r\n    }\r\n\r\n    /**\r\n     * Gets the configured rule context\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    public get contextModel(): IConfiguredRule {\r\n        return this._legacyRulePluginService.contextModel;\r\n    }\r\n\r\n    /**\r\n     * Given an expression object, this method will return a configuration object associated with it\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    public getExpressionConfiguration(expression: IConfiguredExpression):\r\n        IItemConfiguration {\r\n        return this._legacyRulePluginService.getExpressionConfiguration(expression);\r\n    }\r\n\r\n    /**\r\n     * Create a default rule of specified name\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     *\r\n     * @param ruleName\r\n     * @returns\r\n     */\r\n    public createDefaultRule(ruleName: string): IConfiguredRule {\r\n        return this._legacyRulePluginService.createDefaultRule(ruleName);\r\n    }\r\n\r\n    /**\r\n     * Create a statement of specified name\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     *\r\n     * @param statementName\r\n     * @returns\r\n     */\r\n    public createStatement(statementName: string): IConfiguredStatement {\r\n        return this._legacyRulePluginService.createStatement(statementName);\r\n    }\r\n\r\n    /**\r\n     * Create an expression of specified name\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     *\r\n     * @param expressionName\r\n     */\r\n    public createExpression(expressionName: string): IConfiguredExpression {\r\n        return this._legacyRulePluginService.createExpression(expressionName) as any;\r\n    }\r\n\r\n    /**\r\n     * Create an operator of specified name\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     *\r\n     * @param operatorName\r\n     */\r\n    public createOperator(operatorName: string): IConfiguredExpression {\r\n        return this._legacyRulePluginService.createOperator(operatorName) as any;\r\n    }\r\n\r\n    /**\r\n     * Gets the rule context handler\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    public get contextHandler(): sourceCode.k2Designer.objectModel.rulePlugins.rules.Rule {\r\n        return this._legacyRulePluginService.contextHandler;\r\n    }\r\n\r\n    public get isNewTab(): boolean {\r\n        return this._legacyRulePluginService.isNewTab;\r\n    }\r\n\r\n    /**\r\n     * This function sets the context of a rule. The 3rd onContextChanged callback parameter will get executed the next time the context is changed.\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    public setDesignerContext(ruleName: string, configuredRule: IConfiguredRule,\r\n        onContextChangedCallback?: sourceCode.k2Designer.services.studio.IContextChangingCallback): void {\r\n        this._legacyRulePluginService.setDesignerContext(ruleName, configuredRule, onContextChangedCallback);\r\n    }\r\n\r\n    /**\r\n     * Given a configured rule object, this method will return a boolean value indicating whether it is a expression or not\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    public isConfiguredExpression(ruleObject: any): boolean {\r\n        return this._legacyRulePluginService.isConfiguredExpression(ruleObject);\r\n    }\r\n\r\n    /**\r\n     * Given a configured rule object, this method will return a boolean value indicating whether it is a group expression or not\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    public isConfiguredGroupExpression(ruleObject: any): boolean {\r\n        return this._legacyRulePluginService.isConfiguredGroupExpression(ruleObject);\r\n    }\r\n\r\n    /**\r\n     * Given a configured rule object, this method will return a boolean value indicating whether it is a statement or not\r\n     */\r\n    public isConfiguredOperator(ruleObject: any): boolean {\r\n        return this._legacyRulePluginService.isConfiguredOperator(ruleObject);\r\n    }\r\n\r\n    /**\r\n     * Given a configured rule object, this method will return a boolean value indicating whether it is a statement or not\r\n     */\r\n    public isConfiguredStatement(ruleObject: any): boolean {\r\n        return this._legacyRulePluginService.isConfiguredStatement(ruleObject);\r\n    }\r\n\r\n    /**\r\n     * Given a statement object, this method will return a configuration object associated with it\r\n     */\r\n    public getStatementConfiguration(statement: IConfiguredStatement): IItemConfiguration {\r\n        return (this._legacyRulePluginService as any).getStatmentConfiguration(statement);// the legacy one has a typo\r\n    }\r\n\r\n    /**\r\n     * Notifies any registered callbacks that the component has been dropped\r\n     * (TODO: Legacy. This still needs to be upgraded)\r\n     */\r\n    public executeDroppedCallbacks(): void {\r\n        this._legacyRulePluginService.executeDroppedCallbacks();\r\n    }\r\n\r\n    public getToolboxItems(): IItemConfiguration[] {\r\n        return this._legacyRulePluginService.getToolboxItems();\r\n    }\r\n\r\n    /**\r\n     * Renders an empty rule canvas\r\n     *\r\n     * @param ruleName\r\n     * @param isNewTab\r\n     */\r\n    public renderEmptyDesigner(ruleName: string, isNewTab?: boolean): void {\r\n        return this._legacyRulePluginService.renderEmptyDesigner(ruleName, isNewTab);\r\n    }\r\n\r\n    /**\r\n     * *Gets previously configured and stored statements by id, can return undefined if id was not used before\r\n     *\r\n     * @param id identifier to use to retrieve stored statements later\r\n     */\r\n    public getCustomRuleStatements(id: string): sourceCode.k2Designer.objectModel.core.model.IModelArray<IConfiguredStatement> {\r\n        return this._legacyRulePluginService.getCustomRuleStatements(id);\r\n    };\r\n\r\n    /**\r\n     * Renders the rule canvas\r\n     *\r\n     * @param forceRender\r\n     */\r\n    public renderCanvas(forceRender: boolean = false): void {\r\n        this._legacyRulePluginService.renderCanvas(forceRender);\r\n    }\r\n\r\n    /**\r\n     * Sets a rule configuration to the designer context\r\n     *\r\n     * @param id an id to use for retrieval\r\n     * @param statements the statements to store for later usage\r\n     */\r\n    public setCustomRuleStatements(id: string, statements: sourceCode.k2Designer.objectModel.core.model.IModelArray<IConfiguredStatement>): void {\r\n        this._legacyRulePluginService.setCustomRuleStatements(id, statements);\r\n    }\r\n\r\n    /**\r\n     * Gets previously configured and stored statements errors by id, can return undefined if id was not used before\r\n     *\r\n     * @param id identifier to use to retrieve stored statements errors later\r\n     */\r\n    public getCustomRuleStatementsErrors(id: string): sourceCode.k2Designer.objectModel.core.model.IErrorInformation[] {\r\n        return this._legacyRulePluginService.getCustomRuleStatementsErrors(id);\r\n    };\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockSelectionService } from '../../../testing/mock-services/selection-service';\r\nimport { ISelectionService } from '../../../types/services/selection/i-selection-service';\r\n\r\nconst selectionServiceFactory = () => environment.devHarness === true\r\n    ? new MockSelectionService()\r\n    : sourceCode.k2Designer.core.environmentService.selectionService;\r\n\r\nexport const SelectionServiceToken = new InjectionToken<ISelectionService>('ISelectionService');\r\n\r\nexport const SelectionServiceFactory = {\r\n    provide: SelectionServiceToken,\r\n    useFactory: selectionServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockSmartFieldComposerService } from '../../../testing/mock-services/smart-field-composer-service';\r\n\r\nconst smartFieldComposerServiceFactory = () => environment.devHarness === true\r\n    ? new MockSmartFieldComposerService()\r\n    : sourceCode.k2Designer.core.environmentService.getService(sourceCode.k2Designer.services.studio.SmartFieldComposerService);\r\n\r\nexport const SmartFieldComposerServiceToken = new InjectionToken<ISmartFieldComposerService>('ISmartFieldComposerService');\r\n\r\nexport const SmartFieldComposerServiceFactory = {\r\n    provide: SmartFieldComposerServiceToken,\r\n    useFactory: smartFieldComposerServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockSmartFieldPluginService } from '../../../testing/mock-services/smart-field-plugin-service';\r\n\r\nconst smartFieldPluginServiceFactory = () => environment.devHarness === true\r\n    ? new MockSmartFieldPluginService()\r\n    : sourceCode.k2Designer.core.environmentService.getService(sourceCode.k2Designer.services.studio.SmartFieldPluginService);\r\n\r\nexport const SmartFieldPluginServiceToken = new InjectionToken<ISmartFieldPluginService>('ISmartFieldPluginService');\r\n\r\nexport const SmartFieldPluginServiceFactory = {\r\n    provide: SmartFieldPluginServiceToken,\r\n    useFactory: smartFieldPluginServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { Injectable } from '@angular/core';\r\nimport { IModelArray } from '../../../types/models/base/i-model-array';\r\nimport { IConfiguredSmartField } from '../../../types/models/core/configured-smart-fields/i-configured-smart-field';\r\nimport { IExpression } from '../../../types/models/core/configured-smart-fields/i-expression';\r\nimport { ISmartObjectMethodField } from '../../../types/models/core/external-reference-definitions/smart-objects/i-smart-object-method-field';\r\nimport { ISmartObjectPropertyField } from '../../../types/models/core/external-reference-definitions/smart-objects/i-smart-object-property-field';\r\nimport { ISmartObjectField } from '../../../types/models/core/external-reference-definitions/smart-objects/i-smart-object-field';\r\nimport { ComponentIdMapping } from '../../shared/constants/components';\r\nimport { ALLITEMSFILTER, DESCRIPTION, DISPLAYNAME, EMAIL, FQN, GETEMAILFORGROUPUSERS, GROUPFQN, LABEL, MANAGER, NAME, SIPACCOUNT, USERANDGROUPS, USERNAME } from '../../shared/constants/smart-objects';\r\nimport { isUndefinedOrNull } from '../../shared/utils/general';\r\nimport { ProcessService } from '../process/process.service';\r\nimport { ResourceService } from '../resource/resource.service';\r\nimport { WorkflowService } from '../workflow/workflow.service';\r\nimport { IConfiguredSmartObjectField } from '../../../types/models/core/configured-smart-fields/i-smart-object-field';\r\nimport { ISmartObjectFieldProperty } from '../../../types/models/core/configured-smart-fields/i-smart-object-field-property';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SmartObjectService {\r\n\r\n    constructor(private workflowService: WorkflowService,\r\n        private processService: ProcessService,\r\n        private resourceService: ResourceService) { }\r\n\r\n    /**\r\n     *  Returns icon for destination expression\r\n     *  \r\n     * @param destinationExpression\r\n     */\r\n    getDestinationIcon(destinationExpression: IExpression): string {\r\n        let icon = `icon icon-size24 icon-set-picker ic-recipientnondynamic`;\r\n        let isUserIcon = false;\r\n        let isGroupIcon = false;\r\n        if (destinationExpression?.smartFields) {\r\n            isUserIcon = destinationExpression.smartFields.length &&\r\n                !(ComponentIdMapping.k2WorkflowContextField === destinationExpression.smartFields[0].componentId\r\n                    || ComponentIdMapping.k2EnvironmentField === destinationExpression.smartFields[0].componentId);\r\n\r\n            isGroupIcon = destinationExpression.smartFields.length === 1\r\n                ? this.isEmailForGroupUsersField(destinationExpression.smartFields[0]) :\r\n                false;\r\n        }\r\n\r\n        if (!destinationExpression?.isDynamic && isGroupIcon) {\r\n            icon = `icon icon-size24 icon-set-steps ic-group`;\r\n        }\r\n        else if (!destinationExpression?.isDynamic && isUserIcon) {\r\n            icon = `icon icon-size24 icon-set-steps ic-user`;\r\n        }\r\n\r\n        return icon;\r\n    }\r\n\r\n    /**\r\n     * Method to check if field is the specific 'Get_E_mail_For_Group_Users' property\r\n     * @param processService\r\n     * @param smartField\r\n     */\r\n    isEmailForGroupUsersField(smartField: IConfiguredSmartField): boolean {\r\n\r\n        if (smartField.instanceOf(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.SmartObjectField.implementor)) {\r\n\r\n            let smartObjectField = smartField as IConfiguredSmartObjectField;\r\n            if (smartObjectField.methodReference && smartObjectField.propertyReference) {\r\n\r\n                let externalSmoMethod = this.workflowService.findItem<ISmartObjectMethodField>(smartObjectField.methodReference, smartObjectField);\r\n\r\n                if (externalSmoMethod) {\r\n\r\n                    let exteralSmoProperty = this.workflowService.findItem<ISmartObjectPropertyField>(smartObjectField.propertyReference, smartObjectField);\r\n\r\n                    return exteralSmoProperty.systemName === EMAIL && externalSmoMethod.systemName === GETEMAILFORGROUPUSERS;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    /**\r\n     * Method to wrap the selected group into a SmartObject field so that it can resolve at runtime.\r\n     * @param environmentService\r\n     * @param processService\r\n     * @param userName\r\n     * @param label\r\n     */\r\n    wrapEmailForGroupUsersField(groupDisplayName: string, groupFqn: string, label: string): ISmartObjectField {\r\n\r\n        //Get the 'Users and Groups' SmartObject external reference definition\r\n        let usersAndGroupsSmoExternalRef = this.processService.root.externalReferenceDefinitions\r\n            .single<ISmartObjectField>\r\n            ({\r\n                systemName: USERANDGROUPS,\r\n                componentId: ComponentIdMapping.SmartObjectFieldExternalReference\r\n            });\r\n\r\n        //Create the 'Get E-Mail for Group Users' Method on the 'Users and Groups' SmartObject external reference definition.\r\n        let usersAndGroupsSmoMethodExternalRef = sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectMethodField.createInstance({\r\n            systemName: GETEMAILFORGROUPUSERS,\r\n            type: 'list',\r\n            displayName: this.resourceService.getString('smartObject_method_display_name'),\r\n            description: this.resourceService.getString('smartObject_method_display_name'),\r\n            parameters: this.getExternalMethodParameters() as any, //Old and new types of IModelArray<ISmartObjectPropertyField> not compatible\r\n            inputs: this.getExternalMethodInputs() as any,\r\n            returns: this.getExternalMethodReturns() as any\r\n        });\r\n\r\n        //Check if the 'Users and Groups' external reference definition exists, if not add it.\r\n        if (isUndefinedOrNull(usersAndGroupsSmoExternalRef)) {\r\n\r\n            //Create new external reference smartObjectField.\r\n            usersAndGroupsSmoExternalRef = sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectField.createInstance({\r\n                systemName: USERANDGROUPS,\r\n                displayName: this.resourceService.getString('smartObject_display_name'),\r\n                description: this.resourceService.getString('smartObject_description'),\r\n                methods: [usersAndGroupsSmoMethodExternalRef]\r\n            }) as unknown as ISmartObjectField;\r\n\r\n            this.processService.root.externalReferenceDefinitions.push(usersAndGroupsSmoExternalRef);\r\n        }\r\n\r\n        //Get the 'Get E-Mail for Group Users' Method external reference definition.\r\n        let smoExternalRefMethod = usersAndGroupsSmoExternalRef.methods.single<ISmartObjectMethodField>({ systemName: GETEMAILFORGROUPUSERS });\r\n\r\n        //Check if it exists in external reference definition, if not add it.\r\n        if (isUndefinedOrNull(smoExternalRefMethod)) {\r\n            usersAndGroupsSmoExternalRef.methods.push(usersAndGroupsSmoMethodExternalRef as unknown as ISmartObjectMethodField);\r\n        }\r\n\r\n        return this.createGetEmailForGroupUserSmartField(usersAndGroupsSmoExternalRef, groupDisplayName, groupFqn, label);\r\n    }\r\n\r\n    /**\r\n     * Method to get the 'Get_E_mail_For_Group_Users' external reference parameters.\r\n     * @param resourceService\r\n     */\r\n    private getExternalMethodParameters(): ISmartObjectPropertyField[] {\r\n        return [\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                systemName: GROUPFQN,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_fqn'),\r\n                description: this.resourceService.getString('smartObject_method_property_fqn')\r\n            }) as unknown as ISmartObjectPropertyField,\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                systemName: LABEL,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_label'),\r\n                description: this.resourceService.getString('smartObject_method_property_label')\r\n            }) as unknown as ISmartObjectPropertyField\r\n        ];\r\n    }\r\n\r\n    /**\r\n      * Method to get the 'Get_E_mail_For_Group_Users' external reference inputs.\r\n      * @param resourceService\r\n      */\r\n    private getExternalMethodInputs(): ISmartObjectPropertyField[] {\r\n        return [\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                systemName: NAME,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_name')\r\n            }),\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                systemName: DESCRIPTION,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_description')\r\n            }),\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                systemName: EMAIL,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_mail')\r\n            }),\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                systemName: MANAGER,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_manager')\r\n            }),\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                isRequired: true,\r\n                systemName: GROUPFQN,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_fqn'),\r\n                description: this.resourceService.getString('smartObject_method_property_fqn')\r\n            }),\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                isRequired: true,\r\n                systemName: LABEL,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_label'),\r\n                description: this.resourceService.getString('smartObject_method_property_label')\r\n            })\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * Method to get the 'Get_E_mail_For_Group_Users' external reference method returns.\r\n     * @param resourceService\r\n     */\r\n    private getExternalMethodReturns(): ISmartObjectPropertyField[] {\r\n        return [\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                systemName: FQN,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_fqn'),\r\n            }),\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                systemName: USERNAME,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_user_name'),\r\n            }),\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                systemName: EMAIL,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_mail'),\r\n                description: this.resourceService.getString('smartObject_method_property_mail')\r\n            }),\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                systemName: NAME,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_name')\r\n            }),\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                systemName: DESCRIPTION,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_description')\r\n            }),\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                systemName: MANAGER,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_manager')\r\n            }),\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                systemName: SIPACCOUNT,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('SIP_Account')\r\n            }),\r\n            sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                systemName: DISPLAYNAME,\r\n                type: 'text',\r\n                displayName: this.resourceService.getString('smartObject_method_property_display_name')\r\n            })\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * Method to create the configured SmartObject field for textbox.\r\n     * @param usersAndGroupsSmoExternalRef\r\n     * @param groupDisplayName\r\n     * @param groupFqn\r\n     * @param label\r\n     */\r\n    private createGetEmailForGroupUserSmartField(usersAndGroupsSmoExternalRef: ISmartObjectField,\r\n        groupDisplayName: string, groupFqn: string, label: string): ISmartObjectField {\r\n\r\n        let smoExternalRefMethod = usersAndGroupsSmoExternalRef.methods.single<ISmartObjectMethodField>({ systemName: GETEMAILFORGROUPUSERS });\r\n        let smoExternalEmailReturnProp = smoExternalRefMethod.returns.single<ISmartObjectPropertyField>({ systemName: EMAIL });\r\n\r\n        //Create the SmartObject method field.\r\n        let smoMethod = sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.SmartObjectFieldMethod.createInstance({\r\n            externalReference: smoExternalRefMethod.getReference(),\r\n            returnProperty: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.SmartObjectFieldProperty.createInstance({\r\n                externalReference: smoExternalEmailReturnProp.getReference()\r\n            }),\r\n            parameters: [sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.SmartObjectFieldParameter.createInstance({\r\n                externalReference: smoExternalRefMethod.parameters.single<sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectFieldParameter>(\r\n                    { systemName: GROUPFQN }).getReference(),\r\n                value: sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance(\r\n                    {\r\n                        richText: false, smartFields: [\r\n                            sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({ text: groupFqn })\r\n                        ]\r\n                    }),\r\n            }),\r\n            sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.SmartObjectFieldParameter.createInstance({\r\n                externalReference: smoExternalRefMethod.parameters.single<sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.ISmartObjectFieldParameter>({ systemName: LABEL }).getReference(),\r\n                value: sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({ richText: false, smartFields: [sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.TextField.createInstance({ text: label })] }),\r\n            })],\r\n            inputProperties: this.getInputProperties(true, smoExternalRefMethod),\r\n            methodFilter: sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.SmartObjectFieldFilter.createInstance({\r\n                filterType: ALLITEMSFILTER,\r\n                logicalOperator: 'equal',\r\n                leftProperty: smoExternalRefMethod.returns[0].getReference(),\r\n                rightProperty: sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({ richText: false, smartFields: [] }),\r\n            })\r\n        });\r\n        //Create the actual SmartObject property field.\r\n        return sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.SmartObjectField.createInstance({\r\n            method: smoMethod,\r\n            propertyReference: smoExternalEmailReturnProp.getReference(),\r\n            methodReference: smoExternalRefMethod.getReference(),\r\n            externalReference: usersAndGroupsSmoExternalRef.getReference(),\r\n            customTitle: groupDisplayName\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Method to build the input properties\r\n     * @param isListMethod\r\n     * @param smoMethod\r\n     */\r\n    getInputProperties(isListMethod: boolean, smoMethod: ISmartObjectMethodField):\r\n        ISmartObjectFieldProperty[] {\r\n\r\n        let properties: ISmartObjectFieldProperty[] = [];\r\n\r\n        for (let i: number = 0; i < smoMethod.inputs.length; i++) {\r\n            let property: ISmartObjectPropertyField = smoMethod.inputs[i];\r\n\r\n            let isBindToParamerter = smoMethod.parameters.filter(function (item: ISmartObjectPropertyField) {\r\n                return item.systemName === smoMethod.inputs[i].systemName;\r\n            }).length > 0;\r\n\r\n            if (!isBindToParamerter && ((isListMethod && property.isRequired) || !isListMethod)) {\r\n                let newConfiguredProp: ISmartObjectFieldProperty = {\r\n                    externalReference: property.getReference(),\r\n                    value: sourceCode.k2Designer.objectModel.core.configuredSmartFields.Expression.createInstance({ richText: false, smartFields: [] }),\r\n                };\r\n                properties.push(sourceCode.k2Designer.objectModel.workflow.configuredSmartFields.SmartObjectFieldProperty.createInstance(newConfiguredProp));\r\n            }\r\n        }\r\n        return properties;\r\n    }\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockToolBoxService } from '../../../testing/mock-services/tool-box-service';\r\nimport { IToolBoxService } from '../../../types/services/tool-box/i-toolbox-service';\r\n\r\nconst toolBoxServiceFactory = () => environment.devHarness === true\r\n    ? new MockToolBoxService()\r\n    : sourceCode.k2Designer.core.environmentService.getService(sourceCode.k2Designer.services.studio.ToolboxService);\r\n\r\nexport const ToolBoxServiceToken = new InjectionToken<IToolBoxService>('IToolBoxService');\r\n\r\nexport const ToolBoxServiceFactory = {\r\n    provide: ToolBoxServiceToken,\r\n    useFactory: toolBoxServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockUndoRedoService } from '../../../testing/mock-services/undo-redo-service';\r\n\r\n\r\nconst undoRedoServiceFactory = () => environment.devHarness === true\r\n    ? new MockUndoRedoService()\r\n    : sourceCode.k2Designer.core.environmentService.undoRedoService;\r\n\r\nexport const UndoRedoServiceToken = new InjectionToken<IUndoRedoService>('IUndoRedoService');\r\n\r\nexport const UndoRedoServiceFactory = {\r\n    provide: UndoRedoServiceToken,\r\n    useFactory: undoRedoServiceFactory,\r\n    deps: []\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockUserOptionsService } from '../../../testing/mock-services/user-options-service';\r\nimport { IUserOptions } from '../../../types/services/user-options/i-user-options-service';\r\n\r\nconst userOptionsServiceFactory = () => environment.devHarness === true\r\n    ? new MockUserOptionsService()\r\n    : sourceCode.k2Designer.core.environmentService.getService(sourceCode.k2Designer.services.studio.UserOptionsService);\r\n\r\nexport const UserOptionsServiceToken = new InjectionToken<IUserOptions>('IUserOptions');\r\n\r\nexport const UserOptionsServiceFactory = {\r\n    provide: UserOptionsServiceToken,\r\n    useFactory: userOptionsServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MockValidationService } from '../../../testing/mock-services/validation-service';\r\nimport { IValidationService } from '../../../types/services/validation/ivalidation.service';\r\n\r\nconst dataServiceFactory = () => environment.devHarness === true\r\n    ? new MockValidationService()\r\n    : sourceCode.k2Designer.core.environmentService.validationService;\r\n\r\nexport const ValidationServiceToken = new InjectionToken<IValidationService>('IValidationService');\r\n\r\nexport const ValidationServiceFactory = {\r\n    provide: ValidationServiceToken,\r\n    useFactory: dataServiceFactory,\r\n    deps: [\r\n\r\n    ]\r\n};\r\n","import { EventEmitter, Inject, Injectable } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { IModelArray } from '../../../types/models/base/i-model-array';\r\nimport { IRemoveEventPluginContext } from '../../../types/models/event-platform/i-remove-event-plugin-context';\r\nimport { ISubscription } from '../../../types/models/event-platform/i-subscription';\r\nimport { IConfiguredPluginDefinition } from '../../../types/models/integration/i-configured-plugin-definition';\r\nimport { IWorkflowData } from '../../../types/models/integration/i-workflow-data';\r\nimport { IPage } from '../../../types/models/popup/i-page';\r\nimport { IPageButton } from '../../../types/models/popup/i-page-button';\r\nimport { IPopupButton } from '../../../types/models/popup/i-popup-button';\r\nimport { IPopupStateConfiguration } from '../../../types/models/popup/i-popup-state-configuration';\r\nimport { IItemReference } from '../../../types/models/process/item-references/i-item-reference';\r\nimport { IDataService } from '../../../types/services/data/i-data-service';\r\nimport { IEnvironmentService } from '../../../types/services/environment/i-environment-service';\r\nimport { IProcessDefinitionPluginConfiguration } from '../../../types/services/process/i-process-definition-plugin-configuration';\r\nimport { IContextWizardPopupConfiguration } from '../../../types/uiComponents/pluginWizards/i-context-wizard-popup-configuration';\r\nimport { IDataMapperContext } from '../../../types/uiComponents/pluginWizards/IDataMapperContext';\r\nimport { IHierarchyDialogContext } from '../../../types/uiComponents/pluginWizards/IHierarchyDialogContext';\r\nimport { IntegrationType } from '../../shared/enums/integration/integration-type';\r\nimport { SharePointAssetType } from '../../shared/enums/integration/sharepoint-asset-type';\r\nimport { PopupConfigStates } from '../../shared/enums/popup/popup-config-states';\r\nimport { DataServiceToken } from '../data/data-service-factory';\r\nimport { EnvironmentServiceToken } from '../environment/environment-service-factory';\r\nimport { PopupService } from '../popup/popup.service';\r\nimport { ProcessService } from '../process/process.service';\r\nimport { ResourceService } from '../resource/resource.service';\r\n\r\ntype IAssetItem = sourceCode.k2Designer.objectModel.core.itemProvider.IAssetItem;\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class WorkflowIntegrationService {\r\n\r\n    constructor(@Inject(EnvironmentServiceToken) private _environmentService: IEnvironmentService,\r\n        private resourceService: ResourceService,\r\n        private popupService: PopupService,\r\n        private _processService: ProcessService,\r\n        @Inject(DataServiceToken) private _dataService: IDataService) { }\r\n\r\n    /**\r\n     * Method to remove the selected item from the configuration plugins.\r\n     * Resolves promise on closing\r\n     */\r\n    public removeConfiguredPluginDefinition(pluginDef: IConfiguredPluginDefinition): Promise<void> {\r\n        const promise = new Promise<void>((resolve, reject) => {\r\n            if (pluginDef.integrationType === IntegrationType.WorkflowError) {\r\n                const resourceObject = {\r\n                    pageTitle: this.resourceService.getString('event_platform_when_any_workflow_errors'),\r\n                    deleteEventHeading: this.resourceService.getString('event_platform_delete_event_heading'),\r\n                    deleteEventUpdateHeading: this.resourceService.getString('event_platform_delete_event_update_heading_workflow_error_event'),\r\n                    processing: this.resourceService.getString('event_platform_delete_event_processing'),\r\n                };\r\n\r\n                this.showPopupForDeletePlatformEvent(resourceObject, pluginDef).then(() => { resolve(); });\r\n            } else {\r\n                console.error(`Removing ${pluginDef.integrationType} type integrations not supported with removeConfiguredPluginDefinition.`);\r\n            }\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    /**\r\n     * Method to get item references with the smartobject name.\r\n     */\r\n    public getSharePointItemReferencesBySmartObject(primarySmartObjectName: string): IModelArray<IItemReference> {\r\n        const itemReferences: IModelArray<IItemReference> = [];\r\n\r\n        //This will get the item references with primary, type and smartObject name.\r\n        const primaryItemReference: IItemReference = (this._processService.root as sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2ProcessExtended)\r\n            .findWorkflowItemReference(primarySmartObjectName, '', this._processService as any,\r\n            true, 'sharePointEvent', '');\r\n        if (primaryItemReference) {\r\n            itemReferences.push(primaryItemReference);\r\n\r\n            for (let i = 0; i < this._processService.root.configuration.itemReferences.length; i++) {\r\n\r\n                if (this._processService.root.configuration.itemReferences[i].primaryReference === primaryItemReference.systemName) {\r\n                    itemReferences.push(this._processService.root.configuration.itemReferences[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return itemReferences;\r\n    }\r\n\r\n    /**\r\n     * Method to edit the selected configured plugin.\r\n     */\r\n    public editPlugin(pluginDef: IConfiguredPluginDefinition): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            let pages: IPage[];\r\n            for (const defPlugin of this._processService.definitionPlugins) {\r\n                //Check for the integration type and the selected plugin to determine which popup to show and pages to populate.\r\n                if (pluginDef.integrationType === IntegrationType.WorkflowError &&\r\n                    defPlugin.name === 'WorkflowErrorEventProcessDefinition') {\r\n\r\n                    pages = defPlugin.pages;\r\n                    pages[0].finishButton.titleToken = 'workflow_contextPopup_okButton';\r\n                    this.showWorkflowErrorHandlerPopup(pluginDef, pages, true).then(() => { resolve(); });\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private showNoUserEventsIntegrationErrorMessage(): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            this.popupService.showActionErrorDialog(this.resourceService.getString('smartforms_integration_duplicate_error_heading'),\r\n                this.resourceService.getString('smartforms_integration_duplicate_error_body'),\r\n                () => { resolve(); });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Method to show the wizard popup for deleting any event platform event\r\n     *\r\n     * @param resourceObject An object that contains all the resources for the specific event's aspx page.\r\n     */\r\n    private showPopupForDeletePlatformEvent(resourceObject, pluginDef: IConfiguredPluginDefinition): Promise<void> {\r\n        return new Promise<void>((resolve, reject) => {\r\n            const pages: IPage[] = [];\r\n            pages.push(<IPage>{\r\n                pageTitleToken: resourceObject.pageTitle,\r\n                url: 'uiComponents/configPanel/plugins/pluginWizards/processWizards/eventPlatform/pages/eventPlatformRemovePage.html',\r\n                previousButton: <IPageButton>{\r\n                    titleToken: 'workflow_contextPopup_cancelButton',\r\n                    visible: true\r\n                },\r\n                nextButton: <IPageButton>{\r\n                    titleToken: 'workflow_contextPopup_delete_event',\r\n                    visible: true,\r\n                    class: 'modal-button alert large'\r\n                },\r\n                finishButton: <IPageButton>{\r\n                    titleToken: 'workflow_contextPopup_okButton',\r\n                    visible: false,\r\n                    class: 'modal-button alert large'\r\n                },\r\n                hidePageIndicator: true\r\n            },\r\n                <IPage>{\r\n                    pageTitleToken: resourceObject.pageTitle,\r\n                    url: 'uiComponents/configPanel/plugins/pluginWizards/processWizards/eventPlatform/pages/eventPlatformRemoveResultPage.html',\r\n                    previousButton: <IPageButton>{\r\n                        titleToken: 'workflow_contextPopup_cancelButton',\r\n                        visible: false\r\n                    },\r\n                    nextButton: <IPageButton>{\r\n                        titleToken: 'workflow_contextPopup_nextButton',\r\n                        visible: false\r\n                    },\r\n                    finishButton: <IPageButton>{\r\n                        titleToken: 'workflow_contextPopup_okButton',\r\n                        visible: true\r\n                    },\r\n                    hidePageIndicator: true\r\n                });\r\n\r\n            const popupConfig: IContextWizardPopupConfiguration = {\r\n                pages,\r\n                buttons: {},\r\n                hideInfoButton: true,\r\n                heading: '',\r\n                modal: true,\r\n                width: 400,\r\n                context: {\r\n                    selectedSubscriptionId: pluginDef.id,\r\n                    resourceObject,\r\n                } as IRemoveEventPluginContext,\r\n                onClosed: (key: string, dismissResult: string) => {\r\n                    resolve();\r\n                },\r\n                validationModel: []\r\n            } as IContextWizardPopupConfiguration;\r\n\r\n            this.popupService.showContextWizardPopup(popupConfig);\r\n        });\r\n    }\r\n\r\n    private showWorkflowErrorHandlerPopup(pluginDef: IConfiguredPluginDefinition, pages: IPage[], editMode: boolean = false): Promise<string> {\r\n        return new Promise<string>((resolve, reject) => {\r\n            let tempOriginalConfiguration = null;\r\n            let subscriptionModel: ISubscription = null;\r\n            let subscriptionIndex = 0;\r\n\r\n            if (!this._processService.root.configuration.eventPlatformConfiguration) {\r\n                subscriptionModel = this.createNewSubscription(0);\r\n\r\n                this._processService.root.configuration.eventPlatformConfiguration = sourceCode.k2Designer.objectModel.workflow.process.k2Process.eventPlatform.EventPlatformConfiguration.createInstance({\r\n                    subscriptions: [subscriptionModel]\r\n                });\r\n            }\r\n            else if (editMode === false) {\r\n\r\n                tempOriginalConfiguration = this._processService.root.configuration.eventPlatformConfiguration.clone();\r\n\r\n                const subscriptions = this._processService.root.configuration.eventPlatformConfiguration.subscriptions;\r\n\r\n                // We will need to revisit this once we implement support for more events\r\n                if (subscriptions.length === 0) {\r\n                    subscriptionModel = this.createNewSubscription(subscriptions.length);\r\n                    subscriptions.push(subscriptionModel);\r\n                }\r\n                else {\r\n                    subscriptionModel = subscriptions[0];\r\n                    subscriptionModel.state = sourceCode.k2Designer.objectModel.workflow.process.k2Process.eventPlatform.State.Enabled;\r\n                }\r\n\r\n            } else {\r\n                const subscriptions = this._processService.root.configuration.eventPlatformConfiguration.subscriptions;\r\n\r\n                for (let i = 0; i < subscriptions.length; i++) {\r\n                    if (pluginDef.id === subscriptions[i].identifier) {\r\n                        subscriptionIndex = i;\r\n                        subscriptionModel = this._processService.root.configuration.eventPlatformConfiguration.subscriptions[subscriptionIndex];\r\n                        tempOriginalConfiguration = this._processService.root.configuration.eventPlatformConfiguration.clone();\r\n                    }\r\n                }\r\n            }\r\n\r\n            const popupConfig: IContextWizardPopupConfiguration = {\r\n                pages,\r\n                buttons: {},\r\n                hideInfoButton: true,\r\n                heading: '',\r\n                headingIcon: 'workflowerrorstartevent',\r\n                modal: true,\r\n                width: 400,\r\n                customClass: 'event-platform',\r\n                context: <IDataMapperContext>{\r\n                    pageTitle: this.resourceService.getString('event_platform_on_any_error_heading').replace('{0}', this._environmentService.contextProviderService.itemInstance.title),\r\n                    mapperTitle: this._environmentService.contextProviderService.itemInstance.title,\r\n                    title: this._environmentService.contextProviderService.itemInstance.title,\r\n                    icon: 'ic-callsubworkflow',\r\n                    model: subscriptionModel,\r\n                    hideIndicators: true,\r\n                    pages\r\n                },\r\n                onClosed: (key: string, dismissResult: string) => {\r\n                    resolve(dismissResult);\r\n                },\r\n                validationModel: []\r\n            } as IContextWizardPopupConfiguration;\r\n\r\n            this.popupService.showContextWizardPopup(popupConfig);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Creates a new subscription instance with the index appended to the identifier\r\n     */\r\n    public createNewSubscription(index: number): ISubscription {\r\n        // creatorObjectIdentifier, displayName and data.id will be set at deployment\r\n        const identifier: string = '_onanyworkflowerror_subscription_' + index;\r\n        const subscriptionModel = sourceCode.k2Designer.objectModel.workflow.process.k2Process.eventPlatform.Subscription.createInstance({\r\n            eventObjectIdentifier: 'workflow',\r\n            eventIdentifier: 'com.k2.event.runtime.workflow.error.v1',\r\n            creatorSystem: 'Workflow',\r\n            creatorObjectIdentifier: null,\r\n            displayName: null,\r\n            version: '1.0',\r\n            identifier,\r\n            state: sourceCode.k2Designer.objectModel.workflow.process.k2Process.eventPlatform.State.Enabled,\r\n            description: 'Start when any Workflow Errors',\r\n            type: 'com.k2.actions.workflow.start.v1',\r\n            mapping: sourceCode.k2Designer.objectModel.workflow.process.k2Process.eventPlatform.Mapping.createInstance({\r\n                data: sourceCode.k2Designer.objectModel.workflow.process.k2Process.eventPlatform.Data.createInstance({\r\n                    id: null,\r\n                    subject: '',\r\n                    version: 0,\r\n                })\r\n            })\r\n        });\r\n\r\n        return subscriptionModel;\r\n    }\r\n\r\n    /**\r\n     * Create a new instance of the process definition and show a dialog with the plugin details.\r\n     */\r\n    showProcessDefinitionPlugin(item: IProcessDefinitionPluginConfiguration): Promise<string> {\r\n        return new Promise<string>((resolve, reject) => {\r\n            let newProcessDefinition;\r\n            //Create a new instance of the plugin and add it to the process definition.\r\n            if (item.cls.length > 0) {\r\n                const lookup = sourceCode.k2Designer.objectModel.core.model.getImplementorExporter(item.cls);\r\n                newProcessDefinition = sourceCode.k2Designer.objectModel.core.model.ModelObject.createFrom(lookup.implementor, lookup.exporter, null, null);\r\n            }\r\n\r\n            if (item.name === 'WorkflowErrorEventProcessDefinition') {\r\n                // Skip past the hierarchy control to the next popup page\r\n                this.showWorkflowErrorHandlerPopup(newProcessDefinition, item.pages).then(() => { resolve('success'); }).catch(() => { reject(); });\r\n            } else {\r\n                throw 'Only WorkflowErrorEventProcessDefinition popups are supported with this method.';\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Method to open the hierarchy control.\r\n     */\r\n    showFormsHierarchyControl(): Promise<IAssetItem> {\r\n\r\n        return new Promise<IAssetItem>((resolve, reject) => {\r\n            //Open the hierarchy control.\r\n            const hierarchyDialogContext = {\r\n                listItems: [],\r\n                crumbItems: [],\r\n                recentItems: [],\r\n                hideRecents: false,\r\n                onBreadCrumbAdded: (item: IBreadCrumbItem) => {\r\n                    this.loadHierarchyItems(hierarchyDialogContext, item);\r\n                },\r\n                onBreadCrumbClicked: (item: IBreadCrumbItem) => {\r\n                    this.loadHierarchyItems(hierarchyDialogContext, item);\r\n                },\r\n                onSearch: (value: string) => {\r\n\r\n                },\r\n                recentContextString: 'form',\r\n                stateConfiguration: <IPopupStateConfiguration>{\r\n                    message: '',\r\n                    state: 'normal'\r\n                }\r\n            } as IHierarchyDialogContext;\r\n\r\n            //load items\r\n            this.loadHierarchyItems(hierarchyDialogContext);\r\n\r\n            this.popupService.showHierarchyDialog(this.resourceService.getString('wizard_workflow_integration_select_smartforms'),\r\n                false,\r\n                hierarchyDialogContext,\r\n                (item: IAssetItem): void => {\r\n                    if (item) {\r\n                        this._dataService.httpGet('api/smartforms/canIntegrateWithForm', {\r\n                            host: this._environmentService.currentEnvironment.hostId,\r\n                            hashes: [],\r\n                            formGuid: item.key,\r\n                            workflowName: this._environmentService.workflowFullname\r\n                        },\r\n                        (result: string, error: boolean) => {\r\n                            if (!error) {\r\n                                if (result.toUpperCase() === 'TRUE') {\r\n                                    resolve(item);\r\n                                }\r\n                                else if (result.toUpperCase() === 'FALSE') {\r\n                                    //Show not allowed error message.\r\n                                    this.showNoUserEventsIntegrationErrorMessage().then(() => { reject('Hierarchy failed'); });\r\n                                }\r\n                            }\r\n                        }, this._environmentService, false, null, false);\r\n                    }\r\n                });\r\n        });\r\n    }\r\n\r\n    private refreshSub: Subscription;\r\n    /**\r\n     * Method to load bread crumbs from rest service.\r\n     */\r\n    private loadHierarchyItems(context: IHierarchyDialogContext, selectedItem?: IAssetItem): void {\r\n        //Check if breadCrumbItem item is null.\r\n        let assetItem: IAssetItem = null;\r\n        if (selectedItem) {\r\n            assetItem = <IAssetItem>{\r\n                title: '',\r\n                key: selectedItem.key,\r\n                type: selectedItem.type\r\n            };\r\n        }\r\n\r\n        context.stateConfiguration.message = '';\r\n        context.stateConfiguration.state = PopupConfigStates.loading;\r\n        if (this.refreshSub) {\r\n            this.refreshSub.unsubscribe();\r\n            this.refreshSub = null;\r\n        }\r\n        if (context.stateConfiguration.actionButtons) context.stateConfiguration.actionButtons[0].visible = false;\r\n\r\n        //Call rest service.\r\n        this._dataService.httpGet('api/smartforms/getcategoryforms',\r\n            {\r\n                host: this._environmentService.currentEnvironment.hostId,\r\n                hashes: [],\r\n                sourceItem: assetItem\r\n            },\r\n            (result: any, error: boolean) => {\r\n                if (!error) {\r\n                    const sourceItem: IAssetItem = result;\r\n                    if (sourceItem !== null && sourceItem !== undefined) {\r\n                        if (sourceItem.items.length > 0) {\r\n                            //Populate the list items with the source items child items.\r\n                            context.listItems = sourceItem.items;\r\n                            context.stateConfiguration.state = PopupConfigStates.normal;\r\n                        }\r\n                        else {\r\n                            //Clear items if no children on return item.\r\n                            context.listItems = [];\r\n                            context.stateConfiguration.message = this.resourceService.getString('hierachy_dialog_no_forms');\r\n                            context.stateConfiguration.state = PopupConfigStates.empty;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    context.stateConfiguration.state = PopupConfigStates.error;\r\n                    context.stateConfiguration.message = result ? JSON.parse(result).Message : '';\r\n                    const refreshButton = <IPopupButton>{\r\n                        key: 'btnRefresh',\r\n                        text: this.resourceService.getString('refresh'),\r\n                        onClick: new EventEmitter<IPopupButton>(),\r\n                        visible: true\r\n                    };\r\n                    context.stateConfiguration.actionButtons = [refreshButton];\r\n                    this.refreshSub = refreshButton.onClick.subscribe(() => { this.loadHierarchyItems(context); });\r\n                }\r\n            }, this._environmentService, false, null, false);\r\n    }\r\n\r\n    public showSharePointHierarchyControl(): Promise<IAssetItem> {\r\n\r\n        return new Promise<IAssetItem>((resolve, reject) => {\r\n            //Open the hierarchy control.\r\n            const hierarchyDialogContext = {\r\n                listItems: [],\r\n                crumbItems: [],\r\n                recentItems: [],\r\n                hideRecents: false,\r\n                onBreadCrumbAdded: (item: IBreadCrumbItem) => {\r\n                    this.onSharePointBreadCrumbAdded(hierarchyDialogContext, item);\r\n                },\r\n                onBreadCrumbClicked: (item: IBreadCrumbItem) => {\r\n                    this.onSharePointBreadCrumbClicked(hierarchyDialogContext, item);\r\n                },\r\n                onSearch(value: string) {},\r\n                recentContextString: 'sharepoint',\r\n                stateConfiguration: <IPopupStateConfiguration>{\r\n                    message: '',\r\n                    state: 'normal'\r\n                }\r\n            };\r\n\r\n            this.loadServiceInstances(hierarchyDialogContext);\r\n\r\n            //First check if there is not already an event-based or forms-based SharePoint integration done with the\r\n            //same workflow name.\r\n            this._dataService.httpGet('api/smartforms/checkIfSharePointIntegrationExists', {\r\n                host: this._environmentService.currentEnvironment.hostId,\r\n                hashes: [],\r\n                workflowName: this._environmentService.workflowFullname\r\n            }, (result: string, error: boolean) => {\r\n                if (!error) {\r\n                    if (result.toUpperCase() === 'FALSE') {\r\n\r\n                        //No integrations exists with process name, continue as normal.\r\n                        this.popupService.showHierarchyDialog(this.resourceService.getString('wizard_workflow_integration_select_sharePoint'),\r\n                            false,\r\n                            hierarchyDialogContext,\r\n                            (item: IAssetItem) => {\r\n                                resolve(item);\r\n                            });\r\n                    }\r\n                    else if (result.toUpperCase() === 'TRUE') {\r\n                        //Integration found (either SharePoint forms, or SharePoint event based with specific workflowname\r\n                        //Show duplicate message.\r\n                        this.popupService.showActionErrorDialog(this.resourceService.getString('sharepoint_integration_duplicate_error_heading'),\r\n                            this.resourceService.getString('sharepoint_integration_duplicate_error_body'),\r\n                            () => { reject(); });\r\n                    }\r\n                }\r\n            }, this._environmentService, false, null, false);\r\n        });\r\n    }\r\n\r\n    private loadServiceInstances(hierarchyDialogContext: IHierarchyDialogContext): void {\r\n        const serviceInstances: sourceCode.k2Designer.objectModel.workflow.itemProvider.ISmartObjectItem = <any>{\r\n            parentName: 'SmartObject_Service_Functions',\r\n            sysName: 'GetServiceInstances',\r\n            inputs: ['ServiceTypeName|SourceCode.SmartObjects.Services.SharePoint.SharePointService'],\r\n            returns: ['ServiceInstanceSystemName|undefined|Key', 'ServiceInstanceName|undefined|Value', 'ServiceInstanceSystemName|undefined|AllowDrilldown'],\r\n            type: 9\r\n        };\r\n\r\n        hierarchyDialogContext.stateConfiguration.message = '';\r\n        hierarchyDialogContext.stateConfiguration.state = PopupConfigStates.loading;\r\n        if (hierarchyDialogContext.stateConfiguration.actionButtons) hierarchyDialogContext.stateConfiguration.actionButtons[0].visible = false;\r\n\r\n        //load items\r\n        this.loadSharePointHierarchyItems(hierarchyDialogContext, SharePointAssetType.site, '', '', serviceInstances);\r\n    }\r\n\r\n    private _asyncMethodsLoaded: number;\r\n    /**\r\n     * When a breadcrumb item is added to the breadcrumb, refresh the list.\r\n     */\r\n    private onSharePointBreadCrumbAdded(hierarchyDialogContext: IHierarchyDialogContext, item: IAssetItem): void {\r\n        hierarchyDialogContext.stateConfiguration.message = '';\r\n        hierarchyDialogContext.stateConfiguration.state = PopupConfigStates.loading;\r\n        if (hierarchyDialogContext.stateConfiguration.actionButtons) hierarchyDialogContext.stateConfiguration.actionButtons[0].visible = false;\r\n\r\n        let serviceInstance: string;\r\n        //The metaData is split with the asset type|service instance|sub site relative url\r\n        if (item.metaData.split('|')[0] === SharePointAssetType.site.toString()) {\r\n            serviceInstance = item.key;\r\n        } else {\r\n            serviceInstance = '';\r\n        }\r\n\r\n        let relativeUrl: string;\r\n        //The metaData is split with the asset type|service instance|sub site relative url\r\n        if (item.metaData.split('|')[0] === SharePointAssetType.subSite.toString()) {\r\n            relativeUrl = item.metaData.split('|')[2] + item.key;\r\n        } else {\r\n            relativeUrl = '';\r\n        }\r\n\r\n        const subSites: sourceCode.k2Designer.objectModel.workflow.itemProvider.ISmartObjectItem = <any>{\r\n            parentName: serviceInstance + '_Management_Site',\r\n            sysName: 'GetSubSites',\r\n            inputs: ['K2_Int_SubSiteRelativeUrl|' + relativeUrl, 'ReturnActivatedSitesOnly|true'],\r\n            returns: ['RelativeUrl||Key', 'Title||Value', 'RelativeUrl||AllowDrilldown', 'K2_Int_SubSiteRelativeUrl||SubSiteRelativeUrl'],\r\n            type: 9\r\n        };\r\n\r\n        const lists: sourceCode.k2Designer.objectModel.workflow.itemProvider.ISmartObjectItem = <any>{\r\n            parentName: serviceInstance + '_Management_List',\r\n            sysName: 'GetLists',\r\n            inputs: ['K2_Int_SubSiteRelativeUrl|' + relativeUrl, 'Hidden|false', 'IsListSupported|true'],\r\n            returns: ['Id||Key', 'Title||Value'],\r\n            type: 9\r\n        };\r\n\r\n        const libraries: sourceCode.k2Designer.objectModel.workflow.itemProvider.ISmartObjectItem = <any>{\r\n            parentName: serviceInstance + '_Management_Library',\r\n            sysName: 'GetLibraries',\r\n            inputs: ['K2_Int_SubSiteRelativeUrl|' + relativeUrl, 'Hidden|false', 'IsListSupported|true'],\r\n            returns: ['Id||Key', 'Title||Value'],\r\n            type: 9\r\n        };\r\n        this._asyncMethodsLoaded = 0;\r\n        this.loadSharePointHierarchyItems(hierarchyDialogContext, SharePointAssetType.subSite, relativeUrl, serviceInstance, subSites);\r\n        this.loadSharePointHierarchyItems(hierarchyDialogContext, SharePointAssetType.list, relativeUrl, serviceInstance, lists);\r\n        this.loadSharePointHierarchyItems(hierarchyDialogContext, SharePointAssetType.library, relativeUrl, serviceInstance, libraries);\r\n    }\r\n\r\n    /**\r\n     * Method when clicked on breadcrumb item.\r\n     */\r\n    private onSharePointBreadCrumbClicked(hierarchyDialogContext: IHierarchyDialogContext, item: IBreadCrumbItem): void {\r\n        //Reset variables so that loading screen shows.\r\n        hierarchyDialogContext.stateConfiguration.message = '';\r\n        hierarchyDialogContext.stateConfiguration.state = PopupConfigStates.loading;\r\n        if (hierarchyDialogContext.stateConfiguration.actionButtons) hierarchyDialogContext.stateConfiguration.actionButtons[0].visible = false;\r\n\r\n        if (!item) {\r\n            this.loadServiceInstances(hierarchyDialogContext);\r\n        }\r\n        else {\r\n            this.onSharePointBreadCrumbAdded(hierarchyDialogContext, item);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Method to load bread crumbs from rest service.\r\n     */\r\n    private loadSharePointHierarchyItems(hierarchyContext: IHierarchyDialogContext, spAssetType?: SharePointAssetType, relativeUrl?: string, serviceInstance?: string, selectedItem?: any): void {\r\n        //Check if breadCrumbItem item is null.\r\n        let assetItem: IAssetItem = null;\r\n        if (selectedItem) {\r\n            assetItem = selectedItem;\r\n        }\r\n\r\n        if (this.refreshSub) {\r\n            this.refreshSub.unsubscribe();\r\n            this.refreshSub = null;\r\n        }\r\n        //Call rest service.\r\n        this._dataService.httpGet('api/contextplugins/getsmartobjectitemproviderdata',\r\n            {\r\n                host: this._environmentService.currentEnvironment.hostId,\r\n                hashes: [],\r\n                sourceItem: assetItem\r\n            },\r\n            (result: any, error: boolean) => {\r\n                this.assetsSharePointLoaded(hierarchyContext, spAssetType, serviceInstance, relativeUrl, result, error);\r\n            }\r\n            , this._environmentService, false);\r\n    }\r\n\r\n    /**\r\n     * Callback method when asset items are received from server.\r\n     */\r\n    private assetsSharePointLoaded(hierarchyDialogContext: IHierarchyDialogContext, spAssetType: SharePointAssetType, serviceInstance: string, relativeUrl: string, result: any, error: boolean): void {\r\n        const assetItems = [];\r\n        if (!error) {\r\n            const sourceItem: sourceCode.k2Designer.objectModel.workflow.itemProvider.ISmartObjectItem = result.update.items[0];\r\n\r\n            for (let i = 0; i < sourceItem.result.resultItems.length; i++) {\r\n\r\n                //Need to save more info in metaData, so that recents work without additional server calls.\r\n                //The metaData is split with the asset type|service instance|sub site relative url\r\n                const assetItem = sourceCode.k2Designer.objectModel.core.itemProvider.AssetItem.createInstance({\r\n                    key: '',\r\n                    title: '',\r\n                    allowDrillDown: false,\r\n                    selectable: false,\r\n                    metaData: spAssetType.toString() + '|' + serviceInstance + '|' + relativeUrl\r\n                });\r\n\r\n                if (spAssetType === SharePointAssetType.site || spAssetType === SharePointAssetType.subSite) {\r\n                    assetItem.spriteClass = 'items-container-item-icon sprite-no-icon16 icon icon-size16 icon-set-steps ic-sharepointsitesandworkspaces';\r\n                }\r\n                else if (spAssetType === SharePointAssetType.list) {\r\n                    assetItem.spriteClass = 'items-container-item-icon sprite-no-icon16 icon icon-size16 icon-set-steps ic-sharepointlistitem';\r\n                }\r\n                else if (spAssetType === SharePointAssetType.library) {\r\n                    assetItem.spriteClass = 'items-container-item-icon sprite-no-icon16 icon icon-size16 icon-set-steps ic-sharepointdocuments';\r\n                }\r\n\r\n                for (let j = 0; j < sourceItem.result.resultItems[i].resultItems.length; j++) {\r\n\r\n                    const resultItem: sourceCode.k2Designer.objectModel.workflow.configuredSmartObjectResult.ISmartObjectResultItem = (<any>sourceItem.result.resultItems[i]).resultItems[j];\r\n\r\n                    if (resultItem.name.toLowerCase() === 'key' &&\r\n                        assetItem.key === '') {\r\n                        assetItem.key = resultItem.value;\r\n                    } else if (resultItem.name.toLowerCase() === 'value' &&\r\n                        (assetItem.title === '' || assetItem.title === assetItem.key)) {\r\n                        assetItem.title = resultItem.value;\r\n                    } else if (resultItem.name.toLowerCase() === 'allowdrilldown') {\r\n                        if (resultItem.value && resultItem.value.length > 0) {\r\n                            if (resultItem.value.toLowerCase() === 'true' || resultItem.value.toLowerCase() === 'false') {\r\n                                assetItem.allowDrillDown = resultItem.value.toLowerCase() === 'true' ? true : false;\r\n                            } else {\r\n                                assetItem.allowDrillDown = true;\r\n                            }\r\n                        }\r\n                    } else if (resultItem.name.toLowerCase() === 'alternatedrilldown') {\r\n                        if (resultItem.value && resultItem.value.length > 0) {\r\n                            if (resultItem.value.toLowerCase() === 'true' || resultItem.value.toLowerCase() === 'false') {\r\n                                assetItem.allowAlternateDrillDown = resultItem.value.toLowerCase() === 'true' ? true : false;\r\n                            } else {\r\n                                assetItem.allowAlternateDrillDown = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (resultItem.name.toLowerCase() === 'selectable') {\r\n                        if (resultItem.value && resultItem.value.length > 0) {\r\n                            if (resultItem.value.toLowerCase() === 'true' || resultItem.value.toLowerCase() === 'false') {\r\n                                assetItem.selectable = resultItem.value.toLowerCase() === 'true' ? true : false;\r\n                            } else {\r\n                                assetItem.selectable = true;\r\n                            }\r\n                        }\r\n                    } else if (resultItem.name.toUpperCase() === 'SUBSITERELATIVEURL') {\r\n                        if (resultItem.value && resultItem.value.length > 0) {\r\n                            assetItem.metaData = spAssetType.toString() + '|' + serviceInstance + '|' + resultItem.value;\r\n                        }\r\n                    }\r\n\r\n                    if (assetItem.title === '') {\r\n                        assetItem.title = assetItem.key;\r\n                    }\r\n                }\r\n                assetItems.push(assetItem);\r\n            }\r\n\r\n            //All async methods, to return Sites, List and libraries callback method is this.  The asyncMethodsLoaded gets\r\n            //incremented with one, if it gets to 3, we know all have been called and we can update the loading screen.\r\n            this._asyncMethodsLoaded += 1;\r\n\r\n            if (this._asyncMethodsLoaded === 3 || spAssetType === SharePointAssetType.site) {\r\n                if (assetItems.length > 0) {\r\n                    hierarchyDialogContext.stateConfiguration.state = PopupConfigStates.normal;\r\n                }\r\n                else {\r\n                    //Clear items if no children on return item.\r\n                    hierarchyDialogContext.stateConfiguration.message = this.resourceService.getString('sharePoint_integration_no_list_libraries_sites');\r\n                    hierarchyDialogContext.stateConfiguration.state = PopupConfigStates.empty;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            hierarchyDialogContext.stateConfiguration.state = PopupConfigStates.error;\r\n            hierarchyDialogContext.stateConfiguration.message = result ? JSON.parse(result).Message : '';\r\n            const refreshButton = <IPopupButton>{\r\n                key: 'btnRefresh',\r\n                text: this.resourceService.getString('refresh'),\r\n                onClick: new EventEmitter<IPopupButton>(),\r\n                visible: true\r\n            };\r\n            hierarchyDialogContext.stateConfiguration.actionButtons = [refreshButton];\r\n            this.refreshSub = refreshButton.onClick.subscribe(() => { this.loadSharePointHierarchyItems(hierarchyDialogContext); });\r\n        }\r\n        //Populate the list items with the source items child items.\r\n        hierarchyDialogContext.listItems = assetItems;\r\n    }\r\n\r\n    /**\r\n     * Retrieve the Sharepoint List Smart Object Name\r\n     */\r\n    GetSharepointListSmartObjectName(): Promise<string> {\r\n        return new Promise((resolve, reject) => {\r\n            this._dataService.httpGet('api/sharePoint/getListSmartObjectName', {\r\n                host: this._environmentService.currentEnvironment.hostId,\r\n                settingId: this._environmentService.referrer.settingid\r\n            }, (smartObjectSystemName: string) => {\r\n                resolve(smartObjectSystemName);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get the events that was saved with workflow name\r\n     */\r\n    GetSharepointIntegration(): Promise<IWorkflowData> {\r\n        return new Promise<IWorkflowData>((resolve, reject) => {\r\n\r\n            this._dataService.httpGet('api/sharePoint/getSharePointPluginDetails',\r\n                {\r\n                    host: this._environmentService.currentEnvironment.hostId,\r\n                    workflowName: this._environmentService.workflowFullname\r\n                }, (result, error) => {\r\n                    if (error) reject();\r\n                    else if (result === 'null') {\r\n                        resolve(null);\r\n                    } else {\r\n                        resolve(result);\r\n                    }\r\n                });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * When it is a new process and the required properties is in querystring, auto configure the item references and\r\n     * start event on the process.\r\n     */\r\n    integrateWithSharePoint(smartObjectSystemName: string): Promise<string> {\r\n        return new Promise<string>((resolve, reject) => {\r\n            this._dataService.httpGet('api/sharePoint/autoConfingureSharePointEvents', {\r\n                host: this._environmentService.currentEnvironment.hostId,\r\n                workflowName: this._environmentService.workflowFullname,\r\n                listId: this._environmentService.referrer.splistid,\r\n                siteUrl: this._environmentService.referrer.spsiteurl,\r\n                settingId: this._environmentService.referrer.settingid,\r\n                smartObjectName: smartObjectSystemName,\r\n                isDocumentLibrary: this._environmentService.referrer.isdoclib\r\n            },\r\n            (result, error) => {\r\n                if (error) reject();\r\n                else resolve(result);\r\n            });\r\n        });\r\n    }\r\n\r\n    GetStartWorkflowForms(intendedForms: string[]): Promise<sourceCode.k2Designer.objectModel.smartForms.IStartWorkflow[]> {\r\n        return new Promise<sourceCode.k2Designer.objectModel.smartForms.IStartWorkflow[]>((resolve, reject) => {\r\n            this._dataService.httpGet('api/smartforms/getstartworkflowforms', {\r\n                host: this._environmentService.currentEnvironment.hostId,\r\n                hashes: [],\r\n                processName: this._environmentService.workflowFullname,\r\n                intendedForms: JSON.stringify(intendedForms)\r\n            }, (result, error) => {\r\n                if (error) reject();\r\n                else resolve(result);\r\n            });\r\n        });\r\n    }\r\n\r\n    GetFormCategoryAndName(): Promise<sourceCode.k2Designer.objectModel.smartForms.IFormContent> {\r\n        return new Promise((resolve, reject) => {\r\n            this._dataService.httpGet('api/smartforms/getformcategoryandname', {\r\n                host: this._environmentService.currentEnvironment.hostId,\r\n                hashes: [],\r\n                form: this._environmentService.query.objectid\r\n            }, (result, error) => {\r\n                if (error) reject();\r\n                else resolve(result);\r\n            });\r\n        });\r\n    }\r\n}\r\n","import { Inject, Injectable } from '@angular/core';\r\nimport { IModelArray } from '../../../types/models/base/i-model-array';\r\nimport { IActivityConfiguration } from '../../../types/models/process/activities/configuration/i-activity-configuration';\r\nimport { IActivity } from '../../../types/models/process/activities/i-activity';\r\nimport { IEvent } from '../../../types/models/process/events/i-event';\r\nimport { IOutcome } from '../../../types/models/process/outcomes/i-outcome';\r\nimport { IConfiguredComplexLogicalGroupExpression } from '../../../types/models/rules/i-configured-complex-logical-group-expression';\r\nimport { IConfiguredIfThenElseStatement } from '../../../types/models/rules/i-configured-if-then-else-statement';\r\nimport { IConfiguredOutcomeStatement } from '../../../types/models/rules/i-configured-outcome-statement';\r\nimport { IConfiguredStatement } from '../../../types/models/rules/i-configured-statement';\r\nimport { IValidationService } from '../../../types/services/validation/ivalidation.service';\r\nimport { ComponentIdMapping } from '../../shared/constants/components';\r\nimport { DecisionOptionType } from '../../shared/enums/model/workflow/process/decision-option-types';\r\nimport { isUndefinedOrNull } from '../../shared/utils/general';\r\nimport { RulePluginService } from '../ruleplugin/rule-plugin-service';\r\nimport { ValidationServiceToken } from '../validation/validation-service-factory';\r\n\r\n/**\r\n * Workflow, nodes and process related service\r\n */\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class WorkflowService {\r\n\r\n    constructor(@Inject(ValidationServiceToken) protected validationService: IValidationService,\r\n        protected rulePluginService: RulePluginService)\r\n    {\r\n    }\r\n\r\n    /**\r\n     * Auto populates the rule for split or decision step, based on linked task's outcomes.\r\n     * Resets all validation errors on rule before creating new rule.\r\n     *\r\n     * @param decisionOrSplitStep the decision or split step to auto generate outcome rule for.\r\n     * @param forcePassValidation indicates whether or not to instruct validation to occur within the method\r\n     */\r\n    createAutoRuleForDecisionOrSplit(decisionOrSplitStep: IActivity,\r\n        forcePassValidation: boolean = true): void {\r\n\r\n        if (isUndefinedOrNull(decisionOrSplitStep) ||\r\n            isUndefinedOrNull(decisionOrSplitStep.configuration)) {\r\n            //Invalid data\r\n            return;\r\n        }\r\n\r\n        if (decisionOrSplitStep.configuration.decisionOptionType !== DecisionOptionType.auto) {\r\n            //Only execute if rule type is auto\r\n            return;\r\n        }\r\n\r\n        //Reference of event that decision is linked to:\r\n        const outcomesEventReference: string = decisionOrSplitStep.configuration.outcomesEventReference || '';\r\n\r\n        if (outcomesEventReference.length === 0) {\r\n            //Only execute if decision is linked to an activity\r\n            return;\r\n        }\r\n\r\n        const linkedActivityEvent = this.findItem<IEvent>(outcomesEventReference, decisionOrSplitStep);\r\n        if (!linkedActivityEvent) {\r\n            //Not linked to a valid activity event\r\n            return;\r\n        }\r\n        //Find activity that decision is linked to:\r\n        const linkedActivity = linkedActivityEvent.getLogicalParentModel<IActivity>();\r\n\r\n        if (isUndefinedOrNull(linkedActivity) || isUndefinedOrNull(linkedActivity.configuration)) {\r\n            //Not linked to a valid activity\r\n            return;\r\n        }\r\n\r\n        //Clear the errors in the outcome rule before creating the new one\r\n        if (decisionOrSplitStep.configuration.outcomeRule && forcePassValidation) {\r\n            this.validationService.forceAllPassValidation(decisionOrSplitStep.configuration.outcomeRule);\r\n            if (decisionOrSplitStep.configuration.outcomeRule.statements) {\r\n                for (let s = 0; s < decisionOrSplitStep.configuration.outcomeRule.statements.length; s++) {\r\n                    this.validationService.forceAllPassValidation(decisionOrSplitStep.configuration.outcomeRule.statements[s]);\r\n                }\r\n            }\r\n        }\r\n        //Clear the errors in the outcomes\r\n        const validationData = new sourceCode.k2Designer.objectModel.validationService.plugins.ValidatorItem();\r\n        validationData.modelObject = decisionOrSplitStep.configuration;\r\n        validationData.propertyName = 'outcomes';\r\n\r\n        if (forcePassValidation) {\r\n            this.validationService.forcePassValidation(validationData);\r\n        }\r\n\r\n        //Reset current rule:\r\n        if (decisionOrSplitStep.configuration.outcomeRule && decisionOrSplitStep.configuration.outcomeRule.statements) {\r\n            decisionOrSplitStep.configuration.outcomeRule.statements.clear();\r\n        }\r\n\r\n        const decisions = decisionOrSplitStep.configuration.outcomes;\r\n        if (decisions.length === 0) {\r\n            //Decision step has no outcomes (decisions) defined, there can be no rule\r\n            return;\r\n        }\r\n\r\n        const outcomes = linkedActivity.configuration.outcomes;\r\n        if (outcomes.length === 0) {\r\n            //Linked activity has no outcomes, there can be no rule\r\n            return;\r\n        }\r\n\r\n        //Start creating default rule recursively from linked activity:\r\n        decisionOrSplitStep.configuration.outcomeRule = sourceCode.k2Designer.objectModel.workflow.configuredRules.ConfiguredDecisionRule.createInstance({\r\n            statements: [this.createTaskExpression(linkedActivity as unknown as IActivity, 0, decisionOrSplitStep)]\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Creates the default rule (if-else statement) based on the linked activity's outcomes configurations\r\n     *\r\n     * @param linkedActivity Activity that has actions that are used for configuring the outcomes based step\r\n     * @param linkedActivityOutcomeIndex Outcome index to use for configuring the 'IF-THEN' part of the expression (ELSE part will use next outcome if exists)\r\n     * @param outcomesStep Outcomes-based step on which the default rule needs to be added\r\n     * @param environmentService Needed to access the rules plugin service\r\n     * @returns ifStatement default rule\r\n     */\r\n    public createTaskExpression(\r\n        linkedActivity: IActivity,\r\n        linkedActivityOutcomeIndex: number,\r\n        outcomesStep: IActivity): IConfiguredIfThenElseStatement {\r\n\r\n        const nextOutcome = outcomesStep.configuration.outcomes[linkedActivityOutcomeIndex + 1];\r\n        const elseStatements: IModelArray<IConfiguredStatement> = [];\r\n        if (!isUndefinedOrNull(nextOutcome)) {\r\n            elseStatements.push(this.createTaskExpression(linkedActivity, linkedActivityOutcomeIndex + 1, outcomesStep));\r\n        }\r\n\r\n        // Build up a rule using the rule service to retrieve the required components and assign relevant values\r\n\r\n        const taskExpression = this.rulePluginService.createExpression('TaskExpression') as sourceCode.k2Designer.objectModel.workflow.configuredRules.IConfiguredTaskExpression;\r\n        //Reference to the activity:\r\n        taskExpression.activityReference = linkedActivity.getReference();\r\n\r\n        const decisionOutcome = outcomesStep.configuration.outcomes[linkedActivityOutcomeIndex];\r\n\r\n        //Reference to activity outcome that corresponds to current decision outcome:\r\n        taskExpression.outcomeReference = '';\r\n        for (var i = 0; i < linkedActivity.configuration.outcomes.length; i++) {\r\n            if (linkedActivity.configuration.outcomes[i].getReference() === decisionOutcome.linkedOutcomeReference) {\r\n                taskExpression.outcomeReference = decisionOutcome.linkedOutcomeReference;\r\n                break;\r\n            }\r\n        }\r\n\r\n        const groupExpression = this.rulePluginService.createExpression('GroupExpression') as IConfiguredComplexLogicalGroupExpression;\r\n        groupExpression.expressions.push(taskExpression);\r\n\r\n        const outcomeStatement = this.rulePluginService.createStatement('OutcomeStatement') as IConfiguredOutcomeStatement;\r\n\r\n        if (taskExpression.outcomeReference !== '' && decisionOutcome) {\r\n            outcomeStatement.linkedOutcomeReferences.push(decisionOutcome.getReference());\r\n        }\r\n\r\n        const ifStatement = this.rulePluginService.createStatement('IfThenElseStatement') as IConfiguredIfThenElseStatement;\r\n        ifStatement.IfExpressions.push(groupExpression);\r\n        ifStatement.thenStatements.push(outcomeStatement);\r\n        for (var i = 0; i < elseStatements.length; i++) {\r\n            ifStatement.elseStatements.push(elseStatements[i]);\r\n        }\r\n\r\n        return ifStatement;\r\n    }\r\n\r\n    /**\r\n     * Returns true if all configured decision outcomes are connected to a correspoding task action\r\n     *\r\n     * @param decisionConf - decision configuration\r\n     */\r\n    public isAllOutcomesConnected(decisionConf: IActivityConfiguration): boolean {\r\n        //If no outcomes defined, return false:\r\n        if (decisionConf.outcomes.length === 0) {\r\n            return false;\r\n        }\r\n        const allConnected = true;\r\n\r\n        let prevActionInternalID = 0;\r\n        for (let i = 0; i < decisionConf.outcomes.length; i++) {\r\n            const outcome = decisionConf.outcomes[i];\r\n            //If there is an outcome without a defined linked outcome reference, return false:\r\n            if (!(outcome.linkedOutcomeReference && outcome.linkedOutcomeReference.length >= 0)) {\r\n                return false;\r\n            }\r\n            else {\r\n                //Get the linked action's outcome, that the decision is linked to:\r\n                const linkedActionOutcome = this.findItem<IOutcome>(outcome.linkedOutcomeReference, outcome);\r\n\r\n                //If it is not linked to an action's outcome, return false:\r\n                if (isUndefinedOrNull(linkedActionOutcome)) {\r\n                    return false;\r\n                }\r\n                else {\r\n\r\n                    //Get the event action that is the parent of this action outcome:\r\n                    let eventAction = null;\r\n                    if (linkedActionOutcome.linkedActionReference && linkedActionOutcome.linkedActionReference.length > 0) {\r\n                        //Normal action outcomes will have a linkedActionReference, pointing to the event/action object\r\n                        eventAction = this.findItem<sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.client.IClientEventConfigurationAction>\r\n                        (linkedActionOutcome.linkedActionReference, linkedActionOutcome);\r\n\r\n                    } else if (linkedActionOutcome.eventConfigurationReference && linkedActionOutcome.eventConfigurationReference.length > 0) {\r\n                        //Voting outcomes will have an eventConfigurationReference, pointing to the event/action configuration object\r\n                        const eventActionConf = this.findItem<sourceCode.k2Designer.objectModel.workflow.process.k2Process.events.client.IClientEventConfigurationAction>\r\n                        (linkedActionOutcome.eventConfigurationReference, linkedActionOutcome);\r\n                        eventAction = eventActionConf.getLogicalParentModel();\r\n                    }\r\n\r\n                    if (eventAction) {\r\n                        //Get event configuration parent of this event action:\r\n                        const eventConfiguration = <any>eventAction.getLogicalParentModel();\r\n                        if (eventConfiguration) {\r\n                            //Get the event (action child event) of this event configuration:\r\n                            const event = eventConfiguration.getLogicalParentModel();\r\n                            if (event) {\r\n                                //Get the activity node parent of this event:\r\n                                const activityParent = event.getLogicalParentModel();\r\n                                //Check if the internal ids match:\r\n                                if (activityParent) {\r\n                                    if (prevActionInternalID === 0) {\r\n                                        prevActionInternalID = activityParent.internalId;\r\n                                    } else if (prevActionInternalID !== activityParent.internalId) {\r\n                                        return false;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return allConnected;\r\n\r\n    }\r\n\r\n    /**\r\n     * Finds item on process of type T, using startObject as starting point to find process root and path as lookup quickpath\r\n     *\r\n     * @param path quickpath to item / object on process\r\n     * @param startObject any other item on process to use to find the process root\r\n     */\r\n    public findItem<T>(path: string, startObject: sourceCode.k2Designer.objectModel.core.model.IModelObject): T {\r\n        return startObject\r\n            .getRoot<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process>()\r\n            .findItem<T>(path);\r\n    }\r\n\r\n    /*\r\n    * Only events of type Client Event can have outcomes\r\n    */\r\n    public canHaveOutcomes(event: IEvent): boolean {\r\n        return event.componentId === ComponentIdMapping.ClientEvent;\r\n    }\r\n\r\n    /**\r\n     * Method counts all incoming Ports\r\n     *\r\n     * @param activity activity ports that will be used to determine incoming lines\r\n     */\r\n    countAllIncomingPorts(activity: IActivity): number {\r\n        let incomingLinksCount = 0;\r\n        const ports = ['leftPorts', 'topPorts', 'rightPorts', 'bottomPorts'];\r\n\r\n        for (const portSide of ports) {\r\n            for (const port of activity.ui[portSide]) {\r\n                incomingLinksCount += (port as sourceCode.k2Designer.objectModel.workflow.process.IArtefactNodePort).incomingLinkReferences.length;\r\n            }\r\n        }\r\n\r\n        return incomingLinksCount;\r\n    }\r\n}\r\n","/**\r\n * This enum defines all the unique component IDs known to the K2 Designer (this excludes 3rd party\r\n * plugins and addons).\r\n */\r\nexport enum ComponentIdMapping {\r\n\r\n    /**\r\n     * Object containing error information like error type, error message etc. This is an internal designer property\r\n     */\r\n    ErrorInformation = 1,\r\n\r\n    /**\r\n     * Represents the Set Folio event\r\n     */\r\n    SetFolio = 39,\r\n\r\n    /**\r\n     * SmartObject event configuration, for use in SmartObject reminders\r\n     */\r\n    SmartObjectConfiguration = 3031,\r\n\r\n    /**\r\n     * Represents a data-field smart field\r\n     */\r\n    k2DataField = 10000,\r\n\r\n    /**\r\n     * Environment field smart field\r\n     */\r\n    k2EnvironmentField = 10001,\r\n\r\n    /**\r\n     * Inline function smart field\r\n     */\r\n    k2InlineFunctionField = 10002,\r\n\r\n    /**\r\n     * Workflow field smart field\r\n     */\r\n    WorkflowSmartField = 10003,\r\n\r\n    /**\r\n     * Represents a smart field that is pure text entered by the user\r\n     */\r\n    TextSmartField = 10004,\r\n\r\n    /**\r\n     * Represents a smart object smart field\r\n     */\r\n    k2SmartObjectField = 10005,\r\n\r\n    /**\r\n     * Smart forms smart field\r\n     */\r\n    k2SmartFormsField = 10006,\r\n\r\n    /**\r\n     * Client context smart field\r\n     */\r\n    ClientContextSmartField = 10007,\r\n\r\n    /**\r\n     * Represents a expression field\r\n     */\r\n    k2ExpressionField = 10008,\r\n\r\n    /**\r\n     * Represents a workflow context field\r\n     */\r\n    k2WorkflowContextField = 10009,\r\n\r\n    /**\r\n     * Represents a forms control smart field\r\n     */\r\n    FormsControlSmartField = 10010,\r\n\r\n    /**\r\n     * Represents an item reference smart field\r\n     */\r\n    k2ItemReferenceField = 10011,\r\n\r\n    /**\r\n     * Represents a configured user smart field\r\n     */\r\n    k2UserField = 10012,\r\n\r\n    /**\r\n     * Represents an html element, usually part of the rich text object model\r\n     */\r\n    HtmlElementField = 10013,\r\n\r\n    /**\r\n     * Represents an html attribute (name/value) defined on an html element field\r\n     */\r\n    HtmlElementFieldAttribute = 10014,\r\n\r\n    /**\r\n     * Represents an attachment (file location, file name and content)\r\n     */\r\n    k2AttachmentField = 10015,\r\n\r\n    /**\r\n     * Represents an attachment (file location, file name and content)\r\n     */\r\n    k2DateTimeField = 10016,\r\n\r\n    /**\r\n     * Represents a inline function parameter\r\n     */\r\n    InlineFunctionParameters = 10017,\r\n\r\n    /**\r\n     * Represents a field that saves id and title values for SmartWizards\r\n     */\r\n    k2SmartWizardField = 10018,\r\n\r\n    /**\r\n     * Represents a field that save a reference to a clienEventConfigurationAction\r\n     */\r\n    ClientEventConfigurationActionReferenceField = 10019,\r\n\r\n    /**\r\n     * Represents a field for the XML field configuration\r\n     */\r\n    XmlField = 10020,\r\n\r\n    /**\r\n     * Represents a field used by the user task outcome voting rule\r\n     */\r\n    VotingOutcomeField = 10021,\r\n\r\n    /**\r\n     * Represents a form control smart field\r\n     */\r\n    FormControlSmartField = 10022,\r\n\r\n    /**\r\n     * Represents a form paramater smart field\r\n     */\r\n    FormParameterSmartField = 10023,\r\n\r\n    /**\r\n     * Represents a form system value smart field\r\n     */\r\n    FormSystemValueSmartField = 10024,\r\n\r\n    /**\r\n     * Represents a smart object smart field\r\n     */\r\n    SmartObjectSmartFieldMethod = 10025,\r\n\r\n    /**\r\n     * Represents a smart object smart field\r\n     */\r\n    SmartObjectSmartFieldParameter = 10026,\r\n\r\n    /**\r\n     * Represents a smart object smart field\r\n     */\r\n    SmartObjectSmartFieldProperty = 10027,\r\n\r\n    /**\r\n     * Represents a smart object smart field method filter - Deprecated\r\n     */\r\n    SmartObjectSmartFieldFilter = 10028,\r\n\r\n    /**\r\n     * Represents a smart object smart field method filter\r\n     */\r\n    SmartObjectSmartFieldMethodFilter = 10029,\r\n\r\n    /**\r\n     * Reperesent a expression field part\r\n     */\r\n    FormulaField = 10030,\r\n\r\n    /**\r\n     * Reperesent a conditional field part\r\n     */\r\n    ConditionalField = 10031,\r\n\r\n    /**\r\n     * Represents the default process definition of a process.\r\n     */\r\n    DefaultProcessDefinition = 20000,\r\n\r\n    /**\r\n     * Sharepoint process definition\r\n     */\r\n    SharePointProcessDefinition = 20001,\r\n\r\n    /**\r\n     * Form process definition\r\n     */\r\n    FormsProcessDefinition = 20002,\r\n\r\n    /**\r\n     * Workflow Error Event process definition\r\n     */\r\n    WorkflowErrorEventProcessDefinition = 20003,\r\n\r\n    /**\r\n     * Represents an event.\r\n     */\r\n    SetDataFieldsEvent = 30000,\r\n\r\n    /**\r\n     * Represents a Set-Data-Fields-Wizard (step) configuration, which returns an Event object\r\n     */\r\n    SetDataFieldsEventConfiguration = 30001,\r\n\r\n    /**\r\n     * This value is never used to deploy a component, but was added because of tracked objects\r\n     * bound to the Data Field Mappings collection (data fields are tracked)\r\n     */\r\n    DataFieldMappingsCollection = 30002,\r\n\r\n    /**\r\n     * This value is never used to deploy a component, but was added because of tracked objects\r\n     * bound to the Data Field Mappings collection (data fields are tracked)\r\n     */\r\n    DataFieldMappingInstance = 30003,\r\n\r\n    /**\r\n     * Represents the Email Event\r\n     */\r\n    EmailEvent = 30004,\r\n\r\n    /**\r\n     * Represents the Email Event UI\r\n     */\r\n    EmailEventUI = 30005,\r\n\r\n    /**\r\n     * Represents the Email Event\r\n     */\r\n    EmailEventConfiguration = 30006,\r\n\r\n    /**\r\n     * Represents the Set Folio Event\r\n     */\r\n    SetFolioEvent = 30007,\r\n\r\n    /**\r\n     * Represents the Set Folio Event Configuration\r\n     */\r\n    SetFolioEventConfiguration = 30008,\r\n\r\n    /**\r\n     * Represents a client event\r\n     */\r\n    ClientEvent = 30009,\r\n\r\n    /**\r\n     * Represents a client event configuration.\r\n     */\r\n    ClientEventConfiguration = 30010,\r\n\r\n    /**\r\n     * Represents the child (event) of a smartwizard.\r\n     */\r\n    SmartWizardEvent = 30011,\r\n\r\n    /**\r\n     * Represents an SmartWizard configuration.\r\n     */\r\n    SmartWizardEventConfiguration = 30012,\r\n\r\n    /**\r\n     * Represents a default event\r\n     */\r\n    DefaultEvent = 30013,\r\n\r\n    /**\r\n     * Represents a default event configuration\r\n     */\r\n    DefaultEventConfiguration = 30014,\r\n\r\n    /**\r\n     * Custom Form on a client step\r\n     */\r\n    ClientEventCustomForm = 30015,\r\n\r\n    /**\r\n     * Smart form on a client step\r\n     */\r\n    ClientEventSmartForm = 30016,\r\n\r\n    /**\r\n     * SharePoint form on a client step\r\n     */\r\n    ClientEventSharePointForm = 30017,\r\n\r\n    /**\r\n     * Represents a parameter defined on a form\r\n     */\r\n    FormParameter = 30018,\r\n\r\n    /**\r\n     * Represents the actions in a event\r\n     */\r\n    ClientEventConfigurationAction = 30019,\r\n\r\n    /**\r\n     * Represents a reference to an outcome on an activity\r\n     */\r\n    ActivityOutcomeLinkedReference = 30020,\r\n\r\n    /**\r\n     * Represents the call sub workflow event\r\n     */\r\n    CallSubWorkflowEvent = 30021,\r\n\r\n    /**\r\n     * Represents the call sub workflow event configuration\r\n     */\r\n    CallSubWorkflowEventConfiguration = 30022,\r\n\r\n    /**\r\n     * Represents the call sub workflow event UI\r\n     */\r\n    CallSubWorkflowEventUI = 30023,\r\n\r\n    /**\r\n     * Represents a reference to a destination set on an activity\r\n     */\r\n    ActivityDestinationSetLinkedReference = 30024,\r\n\r\n    /**\r\n     * Represents a deadline on an activity\r\n     */\r\n    ActivityDeadline = 30025,\r\n\r\n    /**\r\n     * Represents the expected duration on an activity\r\n     */\r\n    ActivityExpectedDuration = 30026,\r\n\r\n    /**\r\n     * Represents an SmartWizard UI.\r\n     */\r\n    SmartWizardEventUI = 30027,\r\n\r\n    /**\r\n     * Represents client even tUI\r\n     */\r\n    IClientEventUI = 30028,\r\n\r\n    /**\r\n     * Represents a SmartWizard configuration.\r\n     */\r\n    SmartWizardEventUIConfig = 30029,\r\n\r\n    /**\r\n     * Represents Basic Task Form on client step\r\n     */\r\n    ClientEventBasicTaskForm = 30030,\r\n\r\n    /**\r\n     * Represents an activity on a process.\r\n     */\r\n    DefaultActivity = 40000,\r\n\r\n    /**\r\n     * Represents an activity's configuration property.\r\n     */\r\n    DefaultActivityConfiguration = 40001,\r\n\r\n    /**\r\n     * Represents the start activity of the process.\r\n     */\r\n    StartActivity = 40002,\r\n\r\n    /**\r\n     * Represents an end activity of the process.\r\n     */\r\n    EndActivity = 40003,\r\n\r\n    /**\r\n     * Represents the end activity confogiration object\r\n     */\r\n    EndActivityConfiguration = 40004,\r\n\r\n    /**\r\n     * Represents a timer activity in the process.\r\n     */\r\n    TimerActivity = 40005,\r\n\r\n    /**\r\n     * Represents the configuration of a split activity\r\n     */\r\n    TimerActivityConfiguration = 40006,\r\n\r\n    /**\r\n     * Represents a split activity in the process.\r\n     */\r\n    SplitActivity = 40007,\r\n\r\n    /**\r\n     * Represents the configuration of a split activity.\r\n     */\r\n    SplitActivityConfiguration = 40008,\r\n\r\n    /**\r\n     * Represents the ui configuration of a default activity.\r\n     */\r\n    DefaultActivityUI = 40009,\r\n\r\n    /**\r\n     * Represents the merge activity.\r\n     */\r\n    MergeActivity = 40010,\r\n\r\n    /**\r\n     * Represents the merge activity configuration.\r\n     */\r\n    MergeActivityConfiguration = 40011,\r\n\r\n    /**\r\n     * Represents the data object that stores port information on a step\r\n     */\r\n    ActivityPort = 40012,\r\n\r\n    /**\r\n     * Represents a line's configuration property.\r\n     */\r\n    LineConfiguration = 40013,\r\n\r\n    /**\r\n     * Represents the configuration of a split activity.\r\n     */\r\n    DecisionActivityConfiguration = 40014,\r\n\r\n    /**\r\n     * Represents a data field defined on a process or an activity\r\n     */\r\n    DataFieldDefinition = 50000,\r\n\r\n    /**\r\n     * Represents the actual process.\r\n     */\r\n    Process = 50001,\r\n\r\n    /**\r\n     * Represents lines to and from activities.\r\n     */\r\n    Line = 50002,\r\n\r\n    /**\r\n     * Represents a port definition on an activity\r\n     */\r\n    NodePort = 50003,\r\n\r\n    /**\r\n     * Represents the ui confiiguration of a process\r\n     */\r\n    ProcessUI = 50004,\r\n\r\n    /**\r\n     * Represents a wizard definition\r\n     */\r\n    WizardDefinition = 50005,\r\n\r\n    /**\r\n     * Represents a wizard tab\r\n     */\r\n    WizardTab = 50006,\r\n\r\n    /**\r\n     * Represents the wizard tab\r\n     */\r\n    WizardTabObjectModel = 50007,\r\n\r\n    /**\r\n     * Represents an item reference on a process.\r\n     */\r\n    ItemReferences = 50008,\r\n\r\n    /**\r\n     * Represents a property saved in the item reference\r\n     */\r\n    ItemReferenceProperty = 50009,\r\n\r\n    /**\r\n     * Represents a property saved in the item reference\r\n     */\r\n    WizardTabThirdPanel = 50010,\r\n\r\n    /**\r\n     * This represents the filter control for Smart Wizards\r\n     */\r\n    SmartObjectListOptions = 50011,\r\n\r\n    /**\r\n     * Represents Exception Settings\r\n     */\r\n    ExceptionSettings = 50012,\r\n\r\n    /**\r\n     * Points to an external reference property\r\n     */\r\n    ExternalReferencePropertyReference = 50013,\r\n\r\n    /**\r\n     * Represents controls and their values on a smartwizard.\r\n     */\r\n    SmartWizardControlValues = 60000,\r\n\r\n    /**\r\n     * Represents the smartwizard definition that contains information about the pages, data mappings, smartobject mappings etc, on a smartwizard.\r\n     */\r\n    SmartWizardDefinition = 60001,\r\n\r\n    /**\r\n     * Represents a collection of pages on a smartwizard each with a collection of controls on that page.\r\n     */\r\n    SmartWizardPages = 60002,\r\n\r\n    /**\r\n     * Represents a single control on a smartwizard.\r\n     */\r\n    SmartWizardControl = 60003,\r\n\r\n    /**\r\n     * Represents a smartwizardcontrol - asset control.\r\n     */\r\n    SmartWizardAssetControl = 60004,\r\n\r\n    /**\r\n     * Represents a smartwizardcontrol - button control.\r\n     */\r\n    SmartWizardButtonControl = 60006,\r\n\r\n    /**\r\n     * Represents a smartwizardcontrol - checkbox control.\r\n     */\r\n    SmartWizardCheckBoxControl = 60007,\r\n\r\n    /**\r\n     * Represents a smartwizardcontrol - combobox control.\r\n     */\r\n    SmartWizardComboBoxControl = 60008,\r\n\r\n    /**\r\n     * Represents a smartwizardcontrol - combobox control.\r\n     */\r\n    SmartWizardRadioButtonControl = 60009,\r\n\r\n    /**\r\n     * Represents a smartwizardcontrol - property mapper control.\r\n     */\r\n    SmartWizardPropertyMapperControl = 60010,\r\n\r\n    /**\r\n     * Represents a smartwizardcontrol - textbox control.\r\n     */\r\n    SmartWizardTextBoxControl = 60013,\r\n\r\n    /**\r\n     * Represents a smartwizard data mapping to determine from which control to which control values should be copied or applied to.\r\n     */\r\n    SmartWizardDataMapping = 60015,\r\n\r\n    /**\r\n     * Represents a collection of security of security control and their values.\r\n     */\r\n    SmartWizardSecurityValueCollection = 60016,\r\n\r\n    /**\r\n     * Represents a set of mapped data on the smartwizard.\r\n     */\r\n    SmartWizardDataMappingSet = 60017,\r\n\r\n    /**\r\n     * Represents the outcome that needs to be followed in the smartwizard.\r\n     */\r\n    SmartWizardOutcome = 60018,\r\n\r\n    /**\r\n     * Represents the rule of the outcome in the smartwizard.\r\n     */\r\n    SmartWizardOutcomeRule = 60019,\r\n\r\n    /**\r\n     * Represents the default load on the smartwizard.\r\n     */\r\n    SmartWizardDefaultLoad = 60020,\r\n\r\n    /**\r\n     * Represents a reference on the smartwizard.\r\n     */\r\n    SmartWizardReference = 60021,\r\n\r\n    /**\r\n     * Represents the smartwizard runtime that contains a collection of runtime steps.\r\n     */\r\n    SmartWizardRuntime = 60022,\r\n\r\n    /**\r\n     * Represents a runtime step on a smartwizard.\r\n     */\r\n    SmartWizardRuntimeSteps = 60023,\r\n\r\n    /**\r\n     * Represents a smartwizard property\r\n     */\r\n    SmartWizardProperty = 60024,\r\n\r\n    /**\r\n     * Represents a smartwizard object mapping that contains methods and properties for a smartobject.\r\n     */\r\n    SmartWizardObjectMapping = 60025,\r\n\r\n    /**\r\n     * Represents the validation on a smartwizard\r\n     */\r\n    SmartWizardValidation = 60026,\r\n\r\n    /**\r\n     * Represents an asset control item for the smartwizard asset control.\r\n     */\r\n    SmartWizardAssetControlItem = 60027,\r\n\r\n    /**\r\n     * Represents a list control item for the smartwizard list control.\r\n     */\r\n    SmartWizardListControlItem = 60028,\r\n\r\n    /**\r\n     * Represents a smartwizard property mapper row\r\n     */\r\n    SmartWizardPropertyMapperRow = 60029,\r\n\r\n    /**\r\n     * Represents a method\r\n     */\r\n    SmartWizardMethods = 60030,\r\n\r\n    /**\r\n     * Represents an event on a smartwizard that needs to be executed on the server.\r\n     */\r\n    SmartWizardDefinitionEvent = 60031,\r\n\r\n    /**\r\n     * Represents a row on a smartwizard that needs to be.\r\n     */\r\n    SmartWizardRow = 60032,\r\n\r\n    /**\r\n     * Respresetns a SmartWizard SmartObject Picker control\r\n     */\r\n    SmartWizardSmartObjectPickerControl = 60033,\r\n\r\n    /**\r\n     * Respresetns a SmartWizard Picker datafield interface\r\n     */\r\n    SmartWizardDatafield = 60035,\r\n\r\n    /**\r\n     * Defines exceptions on SMart Wizards that needs to be shown under the exceptions tab\r\n     */\r\n    SmartWizardExceptions = 60037,\r\n\r\n    /**\r\n     * This interface represents static properties for the property mapper\r\n     */\r\n    SmartWizardPropertyMapperProperty = 60038,\r\n\r\n    /**\r\n     * This represents the save smartfield control for Smart Wizards\r\n     */\r\n    SmartWizardSaveSmartfieldControl = 60039,\r\n\r\n    /**\r\n     * This represents the filter control for Smart Wizards\r\n     */\r\n    SmartWizardFilterControl = 60040,\r\n\r\n    /**\r\n     * Metadata for the filter control item\r\n     */\r\n    SmartWizardListControlItemMetaData = 60041,\r\n\r\n    /**\r\n     * This represents the filter control for Smart Wizards\r\n     */\r\n    SmartWizardListOptionsControl = 60042,\r\n\r\n    /**\r\n     * This represents the property mapper control for Smart Wizards\r\n     */\r\n    SmartWizardPropertyMapperRowValueCollection = 60043,\r\n\r\n    /**\r\n     * This represents the accordion control for Smart Wizards\r\n     */\r\n    SmartWizardAccordionControl = 60044,\r\n\r\n    /**\r\n     * This represents the accordion control for Smart Wizards\r\n     */\r\n    SmartWizardHyperlinkControl = 60045,\r\n\r\n    /**\r\n     * Represents a tracked item reference component\r\n     */\r\n    TrackedReference = 70000,\r\n\r\n    /**\r\n     * Represents an external reference that points to an environment field\r\n     */\r\n    EnvironmentFieldExternalReference = 70001,\r\n\r\n    /**\r\n     * Represents an external reference that points to a SmartObject\r\n     */\r\n    SmartObjectFieldExternalReference = 70002,\r\n\r\n    /**\r\n     * Represents an external reference that points to a smart form\r\n     */\r\n    SmartFormsExternalReference = 70004,\r\n\r\n    /**\r\n     * Represents an external reference that points to a SmartObject method\r\n     */\r\n    SmartObjectMethodFieldExternalReference = 70005,\r\n\r\n    /**\r\n     * Represents an external reference that points to a SmartObject property\r\n     */\r\n    SmartObjectPropertyFieldExternalReference = 70006,\r\n\r\n    /**\r\n     * Represents a configured simple expression.\r\n     */\r\n    ConfiguredSimpleExpression = 80000,\r\n\r\n    /**\r\n     * Represents a configured logical expression.\r\n     */\r\n    ConfiguredLogicalExpression = 80001,\r\n\r\n    /**\r\n     * Represents a configured if then else statement.\r\n     */\r\n    ConfiguredIfThenElseStatement = 80002,\r\n\r\n    /**\r\n     * Represents a configured endpoint.\r\n     */\r\n    ConfiguredEndPoint = 80003,\r\n\r\n    /**\r\n     * Represents a configured logical group expression.\r\n     */\r\n    ConfiguredComplexLogicalGroupExpression = 80004,\r\n\r\n    /**\r\n     * Represents a configured complex logical expression.\r\n     */\r\n    ConfiguredGroupOperator = 80005,\r\n\r\n    /**\r\n     * Represents a configured outcome container.\r\n     */\r\n    ConfiguredOutcome = 80006,\r\n\r\n    /**\r\n     * Represents the data associated with a configured outcome.\r\n     */\r\n    ConfiguredOutcomeData = 80007,\r\n\r\n    /**\r\n     * Represents a single possible outcome.\r\n     */\r\n    ConfiguredOutcomeItem = 80008,\r\n\r\n    /**\r\n     * Represents a task expression.\r\n     */\r\n    ConfiguredTaskExpression = 80009,\r\n\r\n    /**\r\n     * Represents a task expression.\r\n     */\r\n    ConfiguredDestinationSet = 80010,\r\n\r\n    /**\r\n     * Represents a task expression.\r\n     */\r\n    ConfiguredDestinationSetItem = 80011,\r\n\r\n    /**\r\n     * Represents a configured destination if then else statement.\r\n     */\r\n    ConfiguredDestinationIfThenElseStatement = 80012,\r\n\r\n    /**\r\n     * Represents a response expression\r\n     */\r\n    ConfiguredThisResponseExpression = 80013,\r\n\r\n    /**\r\n     * Represents a configured voting custom rule if then else statement.\r\n     */\r\n    ConfiguredVotingCustomRuleIfThenElseStatement = 80014,\r\n\r\n    /**\r\n     * Represents a response expression\r\n     */\r\n    ConfiguredVotingResponseExpression = 80015,\r\n\r\n    /**\r\n     * Represents a filter expressions\r\n     */\r\n    ConfiguredFilter = 80016,\r\n\r\n    /**\r\n     * Represents a configured filter expression\r\n     */\r\n    ConfiguredFilterExpression = 80017,\r\n\r\n    /**\r\n     * Represents a merge expression\r\n     */\r\n    ConfiguredMergeExpression = 80018,\r\n\r\n    /**\r\n     * Represents a configured merge action result.\r\n     */\r\n    ConfiguredMergeStatement = 80019,\r\n\r\n    /**\r\n     * Represents a configured merge IfThenElse Statement.\r\n     */\r\n    ConfiguredMergeRuleIfThenElseStatement = 80020,\r\n\r\n    /**\r\n     * Represents a configured start outcome container.\r\n     */\r\n    ConfiguredStartOutcome = 80021,\r\n\r\n    /**\r\n     * Represents a Decision rule\r\n     */\r\n    ConfiguredDecisionRule = 80101,\r\n\r\n    /**\r\n     * Represents a Destination rule\r\n     */\r\n    ConfiguredDestinationRule = 80102,\r\n\r\n    /**\r\n     * Represents a Split rule\r\n     */\r\n    ConfiguredSplitRule = 80103,\r\n\r\n    /**\r\n     * Represents a Merge rule\r\n     */\r\n    ConfiguredMergeRule = 80104,\r\n\r\n    /**\r\n     * Represents a Merge rule\r\n     */\r\n    ConfiguredVotingCustomRule = 80105,\r\n\r\n    /**\r\n     * Rule display item to display the current selected title and icon\r\n     */\r\n    ConfiguredRuleDisplayItem = 80106,\r\n\r\n    /**\r\n     * Represents a Start rule\r\n     */\r\n    ConfiguredStartRule = 80107,\r\n\r\n    /**\r\n     * Represent a return result.\r\n     */\r\n    ConfiguredReturnStatement = 80108,\r\n\r\n    /**\r\n     * Represents a Start rule\r\n     */\r\n    ConfiguredConditionalRule = 80109,\r\n\r\n    /**\r\n     * Represents a configured conditional if then else statement.\r\n     */\r\n    ConfiguredConditionalIfThenElseStatement = 80110,\r\n\r\n    /**\r\n     * Represents a event platform configuration.\r\n     */\r\n    ConfiguredEventPlatformConfiguration = 90000,\r\n\r\n    /**\r\n     * Represents a configured event subscription.\r\n     */\r\n    ConfiguredSubscription = 90001,\r\n\r\n    /**\r\n     * Represents the data.\r\n     */\r\n    ConfiguredData = 90002,\r\n\r\n    /**\r\n     * Represents a mapping.\r\n     */\r\n    ConfiguredMapping = 90003,\r\n\r\n    /**\r\n     * This value indicates that the object/interface is an abstract interface that must be extended by a child object/interface\r\n     */\r\n    AbstractBaseComponent = -2,\r\n\r\n    /**\r\n     * This value indicates that the object is inherently understood by its container and no componentID is required to process it\r\n     */\r\n    NotApplicable = -1,\r\n\r\n}\r\n","export const dataTypes = {\r\n    icons: {\r\n        base: 'icon icon-sprite icon-set-datatypes icon-size16',\r\n        default: 'text',\r\n        prefix: 'ic-'\r\n    }\r\n};\r\n","export const EmailConstants = {\r\n    OriginatorEmail: `ProcessOriginatorEmail`,\r\n    OriginatorManagerEmail: `ProcessOriginatorManagerEmail`,\r\n    FromAddress: `From Address`\r\n};\r\n","export const OpenSmartFieldComposerEvent = 'OpenSmartFieldComposer';\r\nexport const RadioButtonChangedEvent = 'RadioButtonChanged';\r\nexport const RemoteEventReceiversPopulatedEvent = 'RemoteEventReceiversPopulated';\r\nexport const DecisionActivityChangedEvent = 'DecisionActivityChangedEvent';\r\nexport const WorkflowNameChangedEvent = 'WorkflowNameChanged';\r\nexport const PropertyMapperDataFieldChangedEvent = 'PropertyMapperDataFieldChangedEvent';\r\n","/**\r\n * Default debounce interval in miliseconds\r\n * */\r\nexport const defaultDebounceTime = 300;\r\n\r\n/**\r\n * Input debounce time\r\n */\r\nexport const inputDebounceTime = 750;\r\n\r\n/**\r\n * Global variable names\r\n * */\r\nexport const globalVariableNames = {\r\n    sharepointIntegratonWorkflowData: 'SharePointIntegrationWorkflowData',\r\n    sharepointEvent: 'sharePointEvent',\r\n    activityInstanceDestInstanceData: 'ActivityInstanceDestInstanceData'\r\n};\r\n\r\n/**\r\n * Keyboard key codes\r\n */\r\nexport enum keyCodes {\r\n    BACKSPACE = 8,\r\n    TAB = 9,\r\n    ENTER = 13,\r\n    SHIFT = 16,\r\n    CTRL = 17,\r\n    ALT = 18,\r\n    PAUSE = 19,\r\n    CAPS_LOCK = 20,\r\n    ESCAPE = 27,\r\n    SPACE = 32,\r\n    PAGE_UP = 33,\r\n    PAGE_DOWN = 34,\r\n    END = 35,\r\n    HOME = 36,\r\n    LEFT_ARROW = 37,\r\n    UP_ARROW = 38,\r\n    RIGHT_ARROW = 39,\r\n    DOWN_ARROW = 40,\r\n    INSERT = 45,\r\n    DELETE = 46,\r\n    KEY_0 = 48,\r\n    KEY_1 = 49,\r\n    KEY_2 = 50,\r\n    KEY_3 = 51,\r\n    KEY_4 = 52,\r\n    KEY_5 = 53,\r\n    KEY_6 = 54,\r\n    KEY_7 = 55,\r\n    KEY_8 = 56,\r\n    KEY_9 = 57,\r\n    KEY_A = 65,\r\n    KEY_B = 66,\r\n    KEY_C = 67,\r\n    KEY_D = 68,\r\n    KEY_E = 69,\r\n    KEY_F = 70,\r\n    KEY_G = 71,\r\n    KEY_H = 72,\r\n    KEY_I = 73,\r\n    KEY_J = 74,\r\n    KEY_K = 75,\r\n    KEY_L = 76,\r\n    KEY_M = 77,\r\n    KEY_N = 78,\r\n    KEY_O = 79,\r\n    KEY_P = 80,\r\n    KEY_Q = 81,\r\n    KEY_R = 82,\r\n    KEY_S = 83,\r\n    KEY_T = 84,\r\n    KEY_U = 85,\r\n    KEY_V = 86,\r\n    KEY_W = 87,\r\n    KEY_X = 88,\r\n    KEY_Y = 89,\r\n    KEY_Z = 90,\r\n    LEFT_META = 91,\r\n    RIGHT_META = 92,\r\n    SELECT = 93,\r\n    NUMPAD_0 = 96,\r\n    NUMPAD_1 = 97,\r\n    NUMPAD_2 = 98,\r\n    NUMPAD_3 = 99,\r\n    NUMPAD_4 = 100,\r\n    NUMPAD_5 = 101,\r\n    NUMPAD_6 = 102,\r\n    NUMPAD_7 = 103,\r\n    NUMPAD_8 = 104,\r\n    NUMPAD_9 = 105,\r\n    MULTIPLY = 106,\r\n    ADD = 107,\r\n    SUBTRACT = 109,\r\n    DECIMAL = 110,\r\n    DIVIDE = 111,\r\n    F1 = 112,\r\n    F2 = 113,\r\n    F3 = 114,\r\n    F4 = 115,\r\n    F5 = 116,\r\n    F6 = 117,\r\n    F7 = 118,\r\n    F8 = 119,\r\n    F9 = 120,\r\n    F10 = 121,\r\n    F11 = 122,\r\n    F12 = 123,\r\n    NUM_LOCK = 144,\r\n    SCROLL_LOCK = 145,\r\n    SEMICOLON = 186,\r\n    EQUALS = 187,\r\n    COMMA = 188,\r\n    DASH = 189,\r\n    PERIOD = 190,\r\n    FORWARD_SLASH = 191,\r\n    GRAVE_ACCENT = 192,\r\n    OPEN_BRACKET = 219,\r\n    BACK_SLASH = 220,\r\n    CLOSE_BRACKET = 221,\r\n    SINGLE_QUOTE = 222\r\n};\r\n\r\nexport const installTypes = {\r\n    blackPearl: 'BLACKPEARL'\r\n};\r\n","import { IListItemIconData } from '../../../types/uiComponents/list-item/i-list-item-icon-data';\r\n\r\n\r\n/**\r\n * Previously smartforms\\userTask\\formIconTemplate.html\r\n * */\r\nconst formIcon: IListItemIconData = {\r\n    isWrappedInContentDiv: true,\r\n    isVertical: true,\r\n    customClassFlexRow: '',\r\n    backgroundColor: 'lightskyblue',\r\n    iconClass: 'icon-set-steps icon-size16 ic-form'\r\n};\r\n\r\n/**\r\n * Previously pluginWizards\\settings\\processSettings\\parameterConfiguration\\leftIcon.aspx\r\n * */\r\nconst itemRefIcon: IListItemIconData = {\r\n    isWrappedInContentDiv: true,\r\n    isVertical: true,\r\n    customClassFlexRow: 'smart-field-workflow-param-background',\r\n    iconClass: 'icon-sprite icon-set-steps icon-size16 ic-itemreferenceevent selected transparent'\r\n};\r\n\r\n/**\r\n * Previously pluginWizards\\settings\\processSettings\\parameterConfiguration\\rightIcon.aspx\r\n * */\r\nconst startProcessIcon: IListItemIconData = {\r\n    isWrappedInContentDiv: true,\r\n    isVertical: true,\r\n    iconClass: 'icon-set-steps icon-size16 ic-startprocess',\r\n    customClassFlexRow: ''\r\n};\r\n\r\n/**\r\n * Previously pluginWizards\\outcomesTab\\outcomeIconTemplate.html\r\n * */\r\nconst outcomeIcon: IListItemIconData = {\r\n    isWrappedInContentDiv: true,\r\n    isVertical: true,\r\n    iconClass: 'icon-set-outcomes icon-size24 ic-outcomeblock',\r\n    customClassFlexRow: 'outcome-icon-background'\r\n};\r\n\r\n/**\r\n * Previously pluginWizards\\taskStep\\votingLinkActionTemplate\r\n * */\r\nconst votingIcon: IListItemIconData = {\r\n    isWrappedInContentDiv: true,\r\n    isVertical: true,\r\n    iconClass: 'icon-set-steps icon-size24 ic-voting selected',\r\n    customClassFlexRow: 'voting-icon-background'\r\n};\r\n\r\n/**\r\n * Previously plugins\\smartWizards\\templates\\referenceIconTemplate\r\n * */\r\nconst referenceIcon: IListItemIconData = {\r\n    isWrappedInContentDiv: true,\r\n    isVertical: true,\r\n    iconClass: 'icon-set-steps icon-size24 icon-set-steps ic-itemreferenceevent selected',\r\n    customClassFlexRow: 'reference-icon-background'\r\n};\r\n\r\n/**\r\n * Previously plugins\\smartWizards\\templates\\dataFieldIconTemplate\r\n * */\r\nconst dataFieldIcon: IListItemIconData = {\r\n    isWrappedInContentDiv: true,\r\n    isVertical: true,\r\n    iconClass: 'header-dd datafield-icon icon icon-size16 icon-set-datatypes selected ic-text', //default text\r\n    customClassFlexRow: 'reference-icon-background',\r\n};\r\n\r\n/**\r\n * List Item Icon template data\r\n * */\r\nexport const listItemIcons = {\r\n    formIcon,\r\n    itemRefIcon,\r\n    outcomeIcon,\r\n    startProcessIcon,\r\n    votingIcon,\r\n    referenceIcon,\r\n    dataFieldIcon\r\n};\r\n\r\nexport const listItemCommands = {\r\n    browse: {\r\n        key: 'browse',\r\n        icon: 'icon-set-toolbox ic-category'\r\n    },\r\n    toggle: {\r\n        key: 'typeConstructMyOwn',\r\n        icon: 'icon-set-toolbar ic-edit'\r\n    }\r\n};\r\n","export const plugins = {\r\n    //Third-panel plugin names\r\n    panels: {\r\n        emailBody: 'emailBody',\r\n        rulesDesigner: 'rulesDesigner',\r\n        contextBrowser: 'contextBrowser',\r\n        toolBox: 'toolbox',\r\n        filterPanel: 'filterPanel',\r\n        states: {\r\n            expanded: 'expanded'\r\n        }\r\n    }\r\n}\r\n","/**\r\n * Rules designer constants\r\n * */\r\nexport const rules = {\r\n    context: {\r\n        rule: 'rule'\r\n    },\r\n    events: {\r\n        ruleItemParentSelected: 'rule-item-parent-isSelected',\r\n        ruleItemParentSelectedAll: 'rule-item-parent-isSelected-all',\r\n        keyPressedEvent: 'rule-designer-key-pressed',\r\n        textboxComposerActive: 'textbox-composer-active',\r\n        expressionComponserActive: 'expression-active-composer'\r\n    },\r\n    defaultOperator: {\r\n        operatorName: 'equals',\r\n        operatorIcon: 'icon icon-set-conditionsdropdown icon-size16 ic-equals'\r\n    },\r\n    icons: {\r\n        popoverArrow: 'icon icon-set-conditionsdropdown icon-size16 ic-popoverarrow',\r\n        operatorIconBase: 'icon icon-set-conditionsdropdown icon-size16 ic-',\r\n        operatorIconEquals: 'icon icon-set-conditionsdropdown icon-size16 ic-equals',\r\n        operatorIconHoverOrActive: 'icon icon-set-dropdownset icon-size16 ic-dropdown colour_dark',\r\n        outcomeTask: 'icon icon-set-picker icon-size24 ic-outcometask',\r\n        outcomeVoting: 'icon icon-set-picker icon-size24 ic-outcomevoting',\r\n        recipient: 'ic-recipientnondynamic',\r\n        recipientGroup: 'ic-recipientsgroupnondynamic'\r\n    },\r\n    operators: {\r\n        seperator: 'seperator',\r\n        equals: 'equals'\r\n    },\r\n    mergeStates: {\r\n        completed: 'completed'\r\n    },\r\n    commands: {\r\n        delete: 'delete'\r\n    }\r\n};\r\n","export const scrollbar = {\r\n    events : {\r\n        /**\r\n         * Constant for the native scroll event name\r\n         */\r\n        scrollEvent: 'scrollbar.scroll',\r\n        mouseScrollEvent: 'scrollbar.mousescroll'\r\n    },\r\n    autoScrollRegionSize: 20, // in pixels\r\n    autoScrollDelay: 200 // in microseconds\r\n};\r\n","export const USERANDGROUPS: string = \"Users_and_Groups\";\r\nexport const GETEMAILFORGROUPUSERS: string = \"Get_E_mail_For_Group_Users\";\r\nexport const EMAIL: string = \"E_mail\";\r\nexport const GROUPFQN: string = \"Group_Fully_Qualified_Name\";\r\nexport const LABEL = \"User_Provider_Label\";\r\nexport const ALLITEMSFILTER = \"workflow_smartFieldComposer_SMO_AllItemsAsACollection\";\r\nexport const FIRSTITEMWHEREFILTERKEY = \"workflow_smartFieldComposer_SMO_FirstItemWhere\";\r\nexport const CUSTOMFILTERKEY = \"workflow_smartFieldComposer_SMO_Custom\";\r\nexport const FQN: string = \"Fully_Qualified_Name\";\r\nexport const NAME: string = \"Name\";\r\nexport const DESCRIPTION: string = \"Description\";\r\nexport const MANAGER: string = \"Manager\";\r\nexport const SIPACCOUNT: string = \"SIP_Account\";\r\nexport const DISPLAYNAME: string = \"Display_Name\";\r\nexport const USERNAME: string = \"User_Name\";\r\n\r\nexport const FILTEROPTION_FIRST: string = \"first\";\r\nexport const FILTEROPTION_INDEX: string = \"index\";\r\nexport const FILTEROPTION_ALL: string = \"all\";\r\n\r\nexport const ORDERBY_ASC: string = \"ascending\";\r\nexport const ORDERBY_DESC: string = \"descending\";\r\n","/**\r\n * Wizard Popup keys\r\n * */\r\nexport const popup = {\r\n    buttons: {\r\n        topRightClose: 'TopRightCloseButton', //Top right close button\r\n        ok: 'okbutton', //OK button\r\n        okResult: 'ok',\r\n        create: 'createButton',\r\n        cancelResult: 'cancel',\r\n        cancel: 'cancelButton'\r\n    },\r\n    events: {\r\n        stateChange: 'popupstatechange', //Popup state changed event\r\n        onClosing: 'popupOnClosing', //Popup on closing event\r\n        nextClicked: 'nextClicked', //Popup next button clicked\r\n    },\r\n\r\n    //Dimensions for dialogs:\r\n    //Default dimensions for hierarchy dialog\r\n    hierarchyDialog: {\r\n        defaultHeight: 690,\r\n        defaultWidth: 790,\r\n        defaultBodyHeight: 580\r\n    },\r\n    dataFieldDialog: {\r\n        defaultWidth: 530\r\n    },\r\n    deleteProcessDialog: {\r\n        defaultHeight: 160,\r\n        defaultBodyHeight: 80\r\n    },\r\n    actionErrorDialog: {\r\n        defaultBodyHeight: 92\r\n    },\r\n\r\n    //definition plugin names\r\n    definitionPlugin: {\r\n        workflowErrorEventProcessDefinition: 'workflowerroreventprocessdefinition'\r\n    },\r\n\r\n};\r\n","import { IStates } from '../../../types/models/rules/i-states';\r\n\r\n/**\r\n * A wrapper class for the string array of control states\r\n * */\r\nexport class States implements IStates {\r\n\r\n    private _states: string[] = [];\r\n\r\n    public States() {\r\n        this._states = [];\r\n    }\r\n\r\n    /**\r\n     * Add a new state to the rule component\r\n     *\r\n     * @param newState\r\n     */\r\n    public add(newState: string): boolean {\r\n\r\n        let result = false;\r\n        if (this._states.indexOf(newState) < 0) {\r\n            this._states.push(newState);\r\n            result = true;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Remove state from the rule component\r\n     *\r\n     * @param state\r\n     */\r\n    public remove(state: string): boolean {\r\n        let result = false;\r\n        const index = this._states.indexOf(state);\r\n        if (index > -1) {\r\n            this._states.splice(index, 1);\r\n            result = true;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Clear all states on the rule component\r\n     * */\r\n    public clear(): boolean {\r\n        this._states.splice(0);\r\n        return this._states.length < 1;\r\n    }\r\n\r\n    /**\r\n     * Check if state exists\r\n     *\r\n     * @param state\r\n     */\r\n    public isExist(state: string): boolean {\r\n        return this._states.indexOf(state) > -1;\r\n    }\r\n\r\n    /**\r\n     * Return all states seperated by a space\r\n     * */\r\n    public toString() {\r\n        return this._states.join(' ');\r\n    }\r\n\r\n}\r\n","/**\r\n * Deferred object to be used to resolve/reject a promise outside of promise scope\r\n */\r\nexport class Deferred<T> {\r\n    resolve: (val: T) => void;\r\n    reject: (err?: any) => void;\r\n    private _promise: Promise<T>;\r\n    constructor() {\r\n        this._promise = new Promise<T>((resolve, reject) => {\r\n            this.reject = reject;\r\n            this.resolve = resolve;\r\n        });\r\n    }\r\n\r\n    destroy() {\r\n        this.reject('object got destroyed before promise fulfilled');\r\n    }\r\n\r\n    toPromise(): Promise<T> {\r\n        return this._promise;\r\n    }\r\n}\r\n","/**\r\n * This enum defines all the priority types that are on the activity settings screen\r\n */\r\nexport enum ActivityPriorityTypes {\r\n\r\n    /**\r\n     * Represents a High Priority Type\r\n     */\r\n    high = 0,\r\n\r\n    /**\r\n     * Represents a Medium Priority Type\r\n     */\r\n    med = 1,\r\n\r\n    /**\r\n     * Represents a Low Priority Type\r\n     */\r\n    low = 2,\r\n\r\n}\r\n","/**\r\n * The configuration of the end activitty.\r\n */\r\nexport enum EndConfig {\r\n\r\n    /**\r\n     * Indicates that the workflow path is complete.\r\n     */\r\n    end = 1,\r\n\r\n    /**\r\n     * Terminates the workflow instance.\r\n     */\r\n    terminate = 2,\r\n\r\n}\r\n","export enum MergeLogicTypes {\r\n    /**\r\n     * Wait for all followed paths to be completed\r\n     * */\r\n    waitForAll = 1,\r\n\r\n    /**\r\n     * Wait for the first  path to be completed\r\n     * */\r\n    waitForFirst = 2,\r\n\r\n    /**\r\n     * Allow all completed paths to follow through\r\n     * */\r\n    noLogic = 3,\r\n\r\n    /***\r\n     * Custom logic\r\n     * */\r\n    custom = 4\r\n}\r\n","/**\r\n * Template names of steps as specified in the node.ui.template of each activity\r\n * TODO: Complete list\r\n * */\r\nexport enum StepTemplates {\r\n    StartStep = 'StartStep',\r\n    TaskStep = 'DefaultStep',\r\n    SplitStep = 'SplitStep',\r\n    MergeStep = 'MergeStep',\r\n    DecisionStep = 'DecisionStep',\r\n    SmartWizardStep = 'SmartWizardStep',\r\n    MultiStep = 'MultiStep',\r\n    PlaceHolderStep = 'PlaceHolderStep'\r\n}\r\n","/**\r\n * Choose control custom template types\r\n * */\r\nexport enum ChooseControlTemplates {\r\n    chooseControlDefaultLabel = 1,\r\n    chooseControlOutcomeLabel = 2,\r\n    chooseControlWithinWorkingHours = 3\r\n}\r\n","/**\r\n * ChooseControl types\r\n * */\r\nexport enum ChooseControlTypes {\r\n    radiobutton = 1,\r\n    checkbox = 2\r\n};\r\n","/**\r\n * Deadline Option Types\r\n */\r\nexport enum DeadlineOptions {\r\n    noDeadline = 0,\r\n    specificDate = 1,\r\n    afterTime = 2\r\n}\r\n","export enum DropDownMenuAlignment {\r\n    centered = 'centered',\r\n    leftEdge = 'left-edge',\r\n    rightEdge = 'right-edge'\r\n}\r\n","export enum DropdownMenuItemTemplates {\r\n    Command = 'Command',\r\n    Default = 'Default',\r\n    DefaultListItem = 'DefaultListItem',\r\n    GroupBooleanOperatorExpression = 'GroupBooleanOperatorExpression',\r\n    Disabled = 'Disabled',\r\n    OutcomeActionAutoname = 'OutcomeActionAutoname',\r\n    OutcomeActionLink = 'OutcomeActionLink',\r\n    Recipient = 'Recipient',\r\n    Reference = 'Reference',\r\n    ReferenceMulti = 'ReferenceMulti',\r\n    RulesDestinationSet = 'RulesDestinationSet',\r\n    RulesOutcome = 'RulesOutcome',\r\n    SimpleExpressionOperator = 'SimpleExpressionOperator',\r\n    SmartFieldSmoFilter = 'SmartFieldSmoFilter'\r\n}\r\n","export enum DropDownMenuTrianglePosition {\r\n    center = 'center',\r\n    left = 'left',\r\n    right = 'right'\r\n}\r\n","export enum EmailParts {\r\n    From,\r\n    To,\r\n    Cc,\r\n    Bcc,\r\n    Subject,\r\n    Body,\r\n    Attachments,\r\n    Priority\r\n}\r\n","/**\r\n * This enum defines all the priority types that are on the activity settings screen\r\n */\r\nexport enum PriorityTypes {\r\n\r\n    /**\r\n     * Represents a Medium Priority Type\r\n     */\r\n    med = 0,\r\n\r\n    /**\r\n     * Represents a Low Priority Type\r\n     */\r\n    low = 1,\r\n\r\n    /**\r\n     * Represents a High Priority Type\r\n     */\r\n    high = 2,\r\n\r\n}\r\n","export enum EventPlatformState {\r\n    Enabled = 1,\r\n    Disabled = 2,\r\n    Deleted = 3\r\n}\r\n","/**\r\n * State of External Reference\r\n */\r\nexport enum ExternalReferenceState {\r\n\r\n    /**\r\n     * Valid External Reference\r\n     */\r\n    Valid = 1,\r\n\r\n    /**\r\n     * External Reference is missing or does not exist\r\n     */\r\n    Missing = 2,\r\n\r\n}\r\n","export enum FilterControlStates {\r\n    Initial = 'initial',\r\n    Normal = 'normal',\r\n    Complex = 'complex',\r\n    Condition = 'condition'\r\n}\r\n","export enum ColumnTypes {\r\n    /**\r\n     * Indicates string-only (no drag/drop smartfields) column\r\n     */\r\n    simpleText = 1,\r\n\r\n    /**\r\n     * Indicates text with smartfields\r\n     */\r\n    complexText = 2,\r\n\r\n    /**\r\n     * Indicates read-only label field\r\n     */\r\n    label = 3\r\n}\r\n","export enum IntegrationActionCommands {\r\n    ShowMessage = 'showmessage',\r\n    CallARule = 'callarule',\r\n    NavigateTo = 'navigateto'\r\n}\r\n","/**\r\n * Public enum to specify what type of integration plugin it is.\r\n */\r\nexport enum IntegrationType {\r\n    SmartForms = 1,\r\n    SharePoint = 2,\r\n    Custom = 3,\r\n    WorkflowError = 4\r\n}\r\n","/**\r\n * Enum to define the status of the integration\r\n */\r\nexport enum SharePointEventsRegisteredStatus {\r\n    inProgress = 1,\r\n    success = 2,\r\n    failed = 3\r\n}\r\n","/**\r\n * Enum to define the asset type.\r\n */\r\nexport enum SharePointAssetType {\r\n    site = 0,\r\n    subSite = 1,\r\n    list = 2,\r\n    library = 3\r\n}\r\n","export enum SharePointIntegrationDeletionStatus {\r\n    inProgress = 1,\r\n    success = 2,\r\n    failed = 3\r\n}\r\n","export enum StartMode {\r\n    sharePointEvent = 1,\r\n    smartForms = 2\r\n}\r\n","export enum ListItemDropDownType {\r\n    custom = 'custom',\r\n    browse = 'browse',\r\n    picker = 'picker',\r\n    toggle = 'toggle',\r\n}\r\n","export enum ListFilter {\r\n    All = 'all',\r\n    First = 'first',\r\n    Last = 'last',\r\n    Index = 'index'\r\n}\r\n","export enum ListOrder {\r\n    Ascending = 'ascending',\r\n    Descending = 'descending'\r\n}\r\n","/**\r\n * Severity of the error found\r\n */\r\nexport enum ErrorSeverity {\r\n\r\n    /**\r\n     * Errors will prevent deployement\r\n     */\r\n    Error = 0,\r\n\r\n    /**\r\n     * Warnings will not prevent deployment, but there may be some unpredictable results\r\n     */\r\n    Warning = 1,\r\n}\r\n","export enum EventTypes {\r\n    propertyChanged = 1,\r\n    anyPropertyChanged = 2,\r\n    arrayChanging = 3,\r\n    arrayChanged = 4,\r\n    anyArrayChanged = 5,\r\n    hashChanging = 6,\r\n    hashChanged = 7,\r\n    anyHashChanged = 8,\r\n    referencePropertyChanged = 9,\r\n    validationChanged = 10,\r\n    anythingChanged = 11\r\n}\r\n","/**\r\n * Type of toastr that should display\r\n * */\r\nexport enum ToastrTypes {\r\n    /**\r\n     * When process is deploying\r\n     * */\r\n    deployment,\r\n    /**\r\n     * General informative text\r\n     * */\r\n    information,\r\n    /**\r\n     * When an error occured\r\n     * */\r\n    error,\r\n    /**\r\n     * COnfirmation required from user\r\n     * */\r\n    confirm,\r\n    /**\r\n     * Deployment was a success\r\n     * */\r\n    success,\r\n    /**\r\n     * Copying text to clipboard was a success\r\n     * */\r\n    copySuccess,\r\n    /**\r\n     * Copying text to clipboard failed\r\n     * */\r\n    copyFail\r\n}\r\n","/**\r\n * Types of validation that can be performed on a field\r\n */\r\nexport enum ValidationTypes {\r\n\r\n    /**\r\n     * Field is required and should be populated\r\n     */\r\n    Required = 1,\r\n\r\n    /**\r\n     * Validate that there are no special characters in the text\r\n     */\r\n    SpecialCharactersForbidden = 2,\r\n\r\n    /**\r\n     * Validate that there aren't any duplicates in the array\r\n     */\r\n    Unique = 3,\r\n\r\n    /**\r\n     * Custom regex validation\r\n     */\r\n    Regex = 4,\r\n\r\n    /**\r\n     * Max length\r\n     */\r\n    MaxLength = 5,\r\n\r\n    /**\r\n     * Validates that the reference exists\r\n     */\r\n    Reference = 6,\r\n\r\n    /**\r\n     * Validates data fields\r\n     */\r\n    DataField = 7,\r\n\r\n    /**\r\n     * Validates using a validation service.\r\n     */\r\n    ValidationByService = 8,\r\n\r\n    /**\r\n     * Smart Wizard validator\r\n     */\r\n    SmartWizard = 9,\r\n\r\n    /**\r\n     * The existing property validator\r\n     */\r\n    LegacyPropertyValidator = 10,\r\n\r\n    /**\r\n     * The pseudovalidator that always returns false\r\n     * Is used in case if I want to provide the validation function from controller instead of creating a whole new validator\r\n     * validation function in controlller is provided as condition property\r\n     */\r\n    AlwaysFalseValidator = 11,\r\n\r\n    /**\r\n     * Validates if there is a deadline configured\r\n     */\r\n    RemindersValidator = 12,\r\n\r\n    /**\r\n     * Validates outgoing lines from an action and\r\n     * shows a badge if amount of lines is incorrect\r\n     */\r\n    ActionLinksValidator = 13,\r\n\r\n    /**\r\n     * Validates rules for multi-step\r\n     */\r\n    MultiStepValidator = 14,\r\n\r\n    /**\r\n     * Validates if the mathematical expression is valid.\r\n     */\r\n    MathematicalValidator = 15,\r\n\r\n    /**\r\n     * Validates decision rule\r\n     * All outcomes mapped in decision rule must exist for it to be valid.\r\n     */\r\n    OutcomesRule = 16,\r\n\r\n    /**\r\n     * Validates if all outcomes are linked to actions\r\n     */\r\n    OutcomeLink = 17,\r\n\r\n    /**\r\n     * Validates if a step's links will create an infinite loop scenario\r\n     */\r\n    InfiniteLoop = 18,\r\n\r\n    /**\r\n     * Validates if a workflow may go into a recursive loop\r\n     */\r\n    WorkflowRecursion = 19,\r\n\r\n    /**\r\n     * Validates that there is at most 1 list field in an expression and that no list/non-list fields are mixed\r\n     */\r\n    RestrictListFields = 20,\r\n\r\n    /**\r\n     * Validates that the item specified exists in the collection\r\n     */\r\n    CollectionValidator = 21,\r\n\r\n    /**\r\n     * Validates that deadline has outcomes when configuration requires it\r\n     */\r\n    DeadlineOutcomes = 22,\r\n\r\n}\r\n","export enum ConfiguredSmartFieldTypes {\r\n    string = 1,\r\n    number = 2,\r\n    yesNo = 3,\r\n    dateTime = 4,\r\n    object = 5,\r\n    userEmail = 6,\r\n    userSystemName = 7,\r\n    decimal = 9\r\n}\r\n","export enum SmartObjectItemTypes {\r\n    unknown = 1,\r\n    smartObject = 6,\r\n    smartObjectCategory = 7,\r\n    smartObjectMethod = 8,\r\n    smartObjectExecution = 9,\r\n    smartObjectTypes = 10,\r\n    smartObjectServiceObjectNames = 11,\r\n    autoGuid = 12,\r\n    autoNumber = 13,\r\n    date = 14,\r\n    file = 15,\r\n    guid = 16,\r\n    hyperlink = 17,\r\n    image = 18,\r\n    memo = 19,\r\n    multivalue = 20,\r\n    time = 21,\r\n    xml = 22,\r\n    default = 23,\r\n    text = 24,\r\n    object = 25,\r\n    number = 26,\r\n    yesNo = 27,\r\n    dateTime = 28,\r\n    decimal = 29\r\n}\r\n","/**\r\n * This enum defines all the data types that are supported by workflow context browser\r\n */\r\nexport enum WorkflowContextBrowserItemTypes {\r\n\r\n    /**\r\n     * Represents a String Data Type\r\n     */\r\n    string = 1,\r\n\r\n    /**\r\n     * Represents a Numeric (int/decimal/double,etc) Data Type\r\n     */\r\n    number = 2,\r\n\r\n    /**\r\n     * Represents a Boolean Data Type\r\n     */\r\n    yesNo = 3,\r\n\r\n    /**\r\n     * Represents a DateTime Data Type\r\n     */\r\n    dateTime = 4,\r\n\r\n    /**\r\n     * Represents an object Data Type\r\n     */\r\n    object = 5,\r\n\r\n    /**\r\n     * Represents an object Data Type\r\n     */\r\n    identityUser = 6,\r\n\r\n    /**\r\n     * Represents an object Data Type\r\n     */\r\n    identityGroup = 7,\r\n\r\n    /**\r\n     * Represents an object Data Type\r\n     */\r\n    identityRole = 8,\r\n\r\n    /**\r\n     * Represents a Decimal Data Type\r\n     */\r\n    decimal = 9,\r\n\r\n    /**\r\n     * Represents a Xml Data Type\r\n     */\r\n    xml = 10,\r\n\r\n}\r\n","export enum DataFieldTypes {\r\n    yesNo = 0,\r\n    dateTime = 1,\r\n    decimal = 2,\r\n    number = 4,\r\n    string = 6\r\n}\r\n","/**\r\n * This enum defines the decision option selected.\r\n */\r\nexport enum DecisionOptionType {\r\n    /**\r\n     * No option.\r\n     */\r\n    none = 0,\r\n\r\n    /**\r\n     * Auto rule generate option.\r\n     */\r\n    auto = 1,\r\n\r\n    /**\r\n     * Custom rule generate option.\r\n     */\r\n    custom = 2,\r\n}\r\n","/**\r\n * Item type represent an action, condition or handler.\r\n */\r\nexport enum GeneralItemTypes {\r\n    /**\r\n     * Indicates the item is an handler\r\n     */\r\n    handler = 1,\r\n\r\n    /**\r\n     * Indicates the item is an condition\r\n     */\r\n    condition = 2,\r\n\r\n    /**\r\n     * Indicates the item is an action\r\n     */\r\n    action = 3,\r\n\r\n    /**\r\n     * Indicates the item is an else\r\n     */\r\n    else = 4,\r\n\r\n    /**\r\n     * Indicates the item is a for each\r\n     */\r\n    forEach\r\n}\r\n","/**\r\n * The different button types that will determine styling, hover, focus etc. as defined in spec\r\n */\r\nexport enum PopupButtonStyleType {\r\n    primary = 1,\r\n    secondary = 2,\r\n    tertiary = 3\r\n}\r\n","export enum PopupState {\r\n    Busy = 'Busy',\r\n    Error = 'Error',\r\n    Normal = 'Normal',\r\n    Completed = 'Completed',\r\n    Cancelled = 'Cancelled'\r\n}\r\n","export enum ActionPopupTemplate {\r\n    custom,\r\n    oAuth\r\n}\r\n","/**\r\n * States for popup configuration\r\n */\r\nexport enum PopupConfigStates {\r\n    normal = 'normal',\r\n    loading = 'loading',\r\n    empty = 'empty',\r\n    error = 'error',\r\n    misconfigured = 'misconfigured',\r\n    oautherror = 'oautherror'\r\n}\r\n","export enum PopupHeaderTemplate {\r\n    default,\r\n    dataField\r\n}\r\n","export enum PopupTemplate {\r\n    newDataField,\r\n    hierarchyDialog,\r\n    userDialog,\r\n    actionPopup,\r\n    categoryDialog,\r\n    deleteProcess,\r\n    chooseCreateChangeOutcome,\r\n    saveSmartFieldChooseDialog\r\n}\r\n","export enum Positioning {\r\n    top = 'top',\r\n    left = 'left',\r\n    right = 'right',\r\n    bottom = 'bottom'\r\n}\r\n","/**\r\n * This enum defines the decision option selected for the start rule.\r\n */\r\nexport enum DecisionOptionTypeStartRule {\r\n    /**\r\n     * Always start option.\r\n     */\r\n    alwaysStart = 0,\r\n\r\n    /**\r\n     * Conditional rule option.\r\n     */\r\n    conditionalStart = 1,\r\n}\r\n","/**\r\n * Type of data used in property mapper\r\n * */\r\nexport enum DisplayModes {\r\n    smo = 'smo',\r\n    workflow = 'workflow'\r\n}\r\n","/**\r\n * Types of references that can be selected / changed / saved by save-reference component\r\n * */\r\nexport enum ReferenceTypes {\r\n    Outcome = 'Outcome',\r\n    ItemReference = 'ItemReference',\r\n    DataField = 'DataField',\r\n    Other = 'Other'\r\n}\r\n","/**\r\n * The operator used to compare complex expressions.\r\n */\r\nexport enum ComplexOperator {\r\n\r\n    /**\r\n     * Or\r\n     */\r\n    Or = 0,\r\n\r\n    /**\r\n     * Xor\r\n     */\r\n    Xor = 1,\r\n\r\n    /**\r\n     * And\r\n     */\r\n    And = 2,\r\n\r\n}\r\n","export enum OutcomeItemNames {\r\n    WaitForResponse = 'wait_for_responses',\r\n    Merge = 'merge'\r\n}\r\n","export enum OutcomeType {\r\n    Decision = 0,\r\n    Merge = 1,\r\n    Voting = 2,\r\n    Split = 3,\r\n    Start = 4\r\n}\r\n","export enum RecipientTypes {\r\n    group = 'Group',\r\n    queue = 'Queue',\r\n    user = 'User'\r\n}\r\n","export enum RuleContextHandlerNames {\r\n    DecisionRule = 'DecisionRule',\r\n    VotingCustomRule = 'VotingCustomRule',\r\n    MergeRule = 'MergeRule',\r\n    SplitRule = 'SplitRule',\r\n    StartRule = 'StartRule'\r\n}\r\n","export enum RuleControlStates {\r\n    selected = 'selected',\r\n    operatorSelected = 'operator-selected',\r\n    focus = 'focus',\r\n    textboxFocus = 'textbox-focus',\r\n    hover = 'hover',\r\n    operatorHover = 'operator-hover',\r\n    menuActive = 'menu-active',\r\n    dragging = 'dragging',\r\n    edit = 'edit'\r\n}\r\n","export enum StatementDirectives {\r\n    ifThenElse = 'k2-if-then-else-statement',\r\n    when = 'k2-when-statement',\r\n    outcome = 'k2-outcome-statement',\r\n    waitForResponse = 'k2-wait-for-response-statement',\r\n    destinationSet = 'k2-destination-set-statement',\r\n    splitPath = 'k2-split-path-statement',\r\n    return = 'k2-return-statement'\r\n}\r\n","export enum VotingLeftOperandTypes {\r\n    noResponse = 'noResponse',\r\n    everyResponse = 'everyResponse',\r\n    numberOfResponses = 'numberOfResponses',\r\n    numberOfRecipients = 'numberOfRecipients',\r\n    all = 'all',\r\n    none = 'none'\r\n}\r\n","/**\r\n * Scrollbar Event Type\r\n */\r\nexport enum ScrollbarEventType {\r\n    up,\r\n    down,\r\n    immobilize,\r\n    mouseWheel\r\n}\r\n","/**\r\n * \"recent\" contexts\r\n */\r\nexport enum CommonContexts {\r\n    RecentlySelectedUsers = 'RecentlySelectedUsers',\r\n    RecentlyUsedSmartFields = 'RecentlyUsedSmartFields'\r\n};\r\n","export enum FunctionOptions {\r\n    SaveFunction,\r\n    SaveResult,\r\n    EditDesignTime\r\n}\r\n\r\nexport enum SmartFieldFilters {\r\n    FirstItemWhere = 'workflow_smartFieldComposer_SMO_FirstItemWhere',\r\n    AllItemsAsCollection = 'workflow_smartFieldComposer_SMO_AllItemsAsACollection',\r\n    Custom = 'workflow_smartFieldComposer_SMO_Custom'\r\n}\r\n","/**\r\n * Indicates the type of constraint that is applied to the textbox when the user is typing\r\n * */\r\nexport enum TextBoxConstraint {\r\n    Number = 'number', //Only allow digits (whole numbers)\r\n    DropSelect = 'drop-select', //Only allow drop or select of drop-down\r\n    DropOnly = 'drop-only', //Only allow drop and ignore typing\r\n    None = 'none'\r\n}\r\n","/**\r\n * Window message types to be used with the apps toolset\r\n */\r\nexport enum messageTypes {\r\n    getData = 'GetData',\r\n    setData = 'SetData',\r\n    completed = 'Completed',\r\n    discarded = 'Discarded'\r\n};\r\n","/**\r\n * This enum represents User Options Tip Types\r\n */\r\nexport enum UserOptionsTipTypes {\r\n    /**\r\n     * Tip value for SmartField Composer GotIt button\r\n     */\r\n    SmartFieldEditorTips = 1,\r\n\r\n    /**\r\n     * Tip value for Decision helper popover GotIt button\r\n     */\r\n    HelpDecisionTips = 2,\r\n\r\n    /**\r\n     * Tip value for Intro to drag for a new workflow helper popover GotIt button\r\n     */\r\n    IntroToDragTips = 3,\r\n\r\n    /**\r\n     * Tip value for Welcome Wizard GotIt button\r\n     */\r\n    WelcomeWizardTips = 4,\r\n\r\n    /**\r\n     * Tip value for Help Start Workflow GotIt button\r\n     */\r\n    HelpStartWorkflowTips = 5,\r\n}\r\n","export class DragDropData<sourceType, extraType, contextType> implements IDragDropData {\r\n\r\n    public extraData: extraType;\r\n\r\n    private _source: sourceType;\r\n    private _context: contextType;\r\n    private _getDragData: <dragType>(source: sourceType, context: any, extraData: extraType) => dragType;\r\n    private _getDropData: <dragType, dropType>(source: sourceType, context: any, dragData: dragType, extraData: extraType) => dropType;\r\n\r\n    constructor(\r\n        source: sourceType,\r\n        context: contextType,\r\n        getDragData: <dragType>(source: sourceType) => dragType,\r\n        getDropData: <dragType, dropType>(source: sourceType, dragData: dragType) => dropType,\r\n        extraData: extraType = null) {\r\n\r\n        this.extraData = extraData;\r\n        this._context = context;\r\n        this._source = source;\r\n        this._getDragData = getDragData;\r\n        this._getDropData = getDropData;\r\n    }\r\n\r\n    //Stricter compilation in ts 3.2. Return type should be sourceType. For now return any\r\n    public getSource(): any {\r\n        return this._source;\r\n    }\r\n\r\n    //Stricter compilation in ts 3.2. Return type should be sourceType. For now return any\r\n    public getContext(): any {\r\n        return this._context;\r\n    }\r\n\r\n    public getDragData<dragType>(): dragType {\r\n        return this._getDragData<dragType>(this._source, this._context, this.extraData);\r\n    }\r\n\r\n    public getDropData<dragType, dropType>(dragData: dragType = null): dropType {\r\n        return this._getDropData<dragType, dropType>(this._source, this._context, dragData, this.extraData);\r\n    }\r\n\r\n    /**\r\n     * Requests that the callback be invoked when the item is dropped\r\n     */\r\n    public ntfOnDrop(callback: () => void): void {\r\n    }\r\n\r\n}\r\n","declare const $: any;\r\n\r\n/**\r\n * initiate the date picker on a given container element\r\n *\r\n * @param root the element onto which the date picker initiates\r\n * @param target the element which initiates the date picker\r\n * @param changeCallback a callback to run when the date selection changes\r\n */\r\nexport function showDatePicker(target: any, changeCallback: Function): void {\r\n    $(target).fdatepicker({\r\n        // Initiates the date picker\r\n        language: sourceCode.k2Designer.core.environmentService.resourceService.info.locale\r\n    }).on('hide', () => {\r\n        // Destroys the date picker\r\n        $(target).off('show changeDate hide').fdatepicker('remove');\r\n    }).on('show', onDatePickerShow.bind(null, target)) // Placement of date picker\r\n        .on('changeDate', changeCallback.bind(this)) // Handles the change in date\r\n        .triggerHandler('show'); // Display the date picker\r\n}\r\n\r\n/**\r\n * represents the date picker pop-up relative to the element which initiated it\r\n *\r\n * @param target the element that initiated the date picker control\r\n * @param date the date to render the date picker with\r\n */\r\nexport function onDatePickerShow(target: any, date: Date): void {\r\n    const container: JQuery = $(target).first();\r\n    const picker: JQuery = $('.datepicker').first();\r\n\r\n    let css = {\r\n        left: 0,\r\n        top: 0\r\n    };\r\n    picker.css(css);\r\n\r\n    css = getDropdownPlacementOffset(container, picker, $(window), 5);\r\n    picker.css(css);\r\n\r\n    if (picker.data('rendered') !== 'true') {\r\n        picker.data('rendered', 'true');\r\n    }\r\n}\r\n\r\n/**\r\n * Gets the appropriate placement of a dropdown element, relative to a specified element in a viewport\r\n *\r\n * @param relativeTo The element from which the dropdown should be relatively placed\r\n * @param dropdown The dropdown element\r\n * @param viewport The view port element\r\n * @param margin The margin/space between the dropdown and relative element\r\n */\r\nexport function getDropdownPlacementOffset(relativeTo: JQuery, dropdown: JQuery, viewport: JQuery, margin: number = 5): any {\r\n\r\n    const result: JQueryCoordinates = {\r\n        left: 0,\r\n        top: 0\r\n    };\r\n\r\n    const relativeToOffset = relativeTo.offset();\r\n    const relativeToWidth = relativeTo.outerWidth(); // includes padding & borders, excludes margins\r\n    const relativeToHeight = relativeTo.outerHeight(); // includes padding & borders, excludes margins\r\n\r\n    const dropdownWidth = dropdown.outerWidth(); // includes padding & borders, excludes margins\r\n    const dropdownHeight = dropdown.outerHeight(); // includes padding & borders, excludes margins\r\n\r\n    const viewportHeight = viewport.height();\r\n\r\n    // Calculate horizontal placement\r\n    result.left = relativeToOffset.left + relativeToWidth - dropdownWidth;\r\n\r\n    // Calculate vertical placement\r\n    if ((viewportHeight - relativeToOffset.top + relativeToHeight + margin) > dropdownHeight) {\r\n        // Place below\r\n        result.top = relativeToOffset.top + relativeToHeight + margin;\r\n    }\r\n    else {\r\n        // Place above\r\n        result.top = relativeToOffset.top - dropdownHeight - margin;\r\n    }\r\n\r\n    return result;\r\n}\r\n","import { IExternalReferenceDefinition } from '../../../types/models/core/external-reference-definitions/i-external-reference-definition';\r\nimport { ISmartObjectMethodField } from '../../../types/models/core/external-reference-definitions/smart-objects/i-smart-object-method-field';\r\nimport { ProcessService } from '../../services/process/process.service';\r\nimport { ISmartObjectPropertyField } from '../../../types/models/core/external-reference-definitions/smart-objects/i-smart-object-property-field';\r\nimport { IPropertyMapperRow } from '../../../types/uiComponents/property-mapper/i-property-mapper-row';\r\nimport { isUndefinedOrNull } from './general';\r\nimport { IModelArray } from '../../../types/models/base/i-model-array';\r\n\r\nexport namespace ExternalReferenceUtilities {\r\n    /**\r\n     * Returns an external reference token for an external reference definition's property based on the type and key.\r\n     *\r\n     * @param externalDefinitionParent parent external reference method\r\n     * @param key property system name\r\n     * @param isReturn true if return property (false if input property)\r\n     * @param addIfNotExists adds property if it doesn't exist (default true)\r\n     */\r\n    export function getExternalDefinitionToken(\r\n        externalDefinitionParent: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectMethodField | ISmartObjectMethodField,\r\n        key: string, isReturn: boolean, addIfNotExists: boolean = true): string {\r\n        if (externalDefinitionParent) {\r\n            let exRefParentProperties = externalDefinitionParent.returns as IModelArray<IExternalReferenceDefinition>;\r\n            if (!isReturn) {\r\n                exRefParentProperties = externalDefinitionParent.inputs;\r\n            }\r\n            let smartObjectMethodProperty: sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectPropertyField =\r\n                exRefParentProperties.single<sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.ISmartObjectPropertyField>({\r\n                    systemName: key\r\n                });\r\n\r\n            if (!smartObjectMethodProperty && addIfNotExists) {\r\n                //It doesn't exist, add to returns / inputs collection\r\n                smartObjectMethodProperty = sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                    systemName: key\r\n                }); \r\n\r\n                exRefParentProperties.push(smartObjectMethodProperty);\r\n            }\r\n            if (smartObjectMethodProperty) {\r\n                return smartObjectMethodProperty.getReference();\r\n            }\r\n        }\r\n\r\n        return key;\r\n    }\r\n\r\n    /**\r\n     * Evaluates if the specified property exists on the external definition parent and returns the reference to that property, or adds the property and returns the reference\r\n     * @param externalDefinitionParent\r\n     * @param properties\r\n     * @param key\r\n     */\r\n    export function getPropertyMapperExternalDefinitionToken(externalDefinitionParent: ISmartObjectMethodField,\r\n        properties: IPropertyMapperRow[], key: string): string {\r\n\r\n        if (externalDefinitionParent) {\r\n            let property: IPropertyMapperRow = null;\r\n\r\n            //Find the property in available properties, we need information of this property for the external reference\r\n            for (let p: number = 0; p < properties.length; p++) {\r\n                if (properties[p].key === key) {\r\n                    property = properties[p];\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (isUndefinedOrNull(property)) {\r\n                return key;\r\n            }\r\n\r\n            let smartObjectMethodProperty: ISmartObjectPropertyField = property.isReturnProperty === true ?\r\n                externalDefinitionParent.returns.single<ISmartObjectPropertyField>({\r\n                    systemName: key\r\n                }) :\r\n                externalDefinitionParent.inputs.single<ISmartObjectPropertyField>({\r\n                    systemName: key\r\n                });\r\n\r\n            // if it is an older workflow where a parameter was wrongly added to the inputs, remove it.\r\n            if (smartObjectMethodProperty && property.isParameter === true) {\r\n                smartObjectMethodProperty.removeFromModelArray();\r\n                smartObjectMethodProperty = null;\r\n            }\r\n\r\n            // if the isParameter flag is not explicitly false, look in the parameters array for it\r\n            if (!smartObjectMethodProperty && property.isParameter !== false) {\r\n                smartObjectMethodProperty =\r\n                    externalDefinitionParent.parameters.single<ISmartObjectPropertyField>({\r\n                        systemName: key\r\n                    });\r\n            }\r\n\r\n            if (!smartObjectMethodProperty) {\r\n                smartObjectMethodProperty = sourceCode.k2Designer.objectModel.core.externalReferenceDefinitions.SmartObjectPropertyField.createInstance({\r\n                    systemName: key,\r\n                    type: property.type.toLowerCase(),\r\n                    displayName: property.rowTitle,\r\n                    isRequired: property.required\r\n                }) as ISmartObjectPropertyField;\r\n\r\n                if (property.isParameter === true) {\r\n                    externalDefinitionParent.parameters.push(smartObjectMethodProperty);\r\n                } else if (property.isReturnProperty === true) {\r\n                    externalDefinitionParent.returns.push(smartObjectMethodProperty);\r\n                } else {\r\n                    externalDefinitionParent.inputs.push(smartObjectMethodProperty);\r\n                }\r\n\r\n                return smartObjectMethodProperty.getReference();\r\n            }\r\n\r\n            //Now ensure the information of the property is set\r\n            smartObjectMethodProperty.type = property.type.toLowerCase();\r\n            smartObjectMethodProperty.displayName = property.rowTitle;\r\n            smartObjectMethodProperty.isRequired = property.required;\r\n\r\n            return smartObjectMethodProperty.getReference();\r\n        }\r\n\r\n        return key;\r\n    }\r\n\r\n    /**\r\n     * Evaluates a string to find a external definition on the process and return the resolved value based on the property.\r\n     * By default the property is systemName\r\n     *\r\n     * @param token\r\n     * @param processService\r\n     * @param property\r\n     */\r\n    export function resolveExternalReferenceToken(token: string, processService: ProcessService, property: string = ''): string {\r\n        let resolvedToken: string = token;\r\n\r\n        if (property === '') {\r\n            property = 'systemName';\r\n        }\r\n\r\n        const externalDef: IExternalReferenceDefinition = processService.root.findItem<IExternalReferenceDefinition>(token);\r\n\r\n        if (externalDef) {\r\n            resolvedToken = externalDef[property] ? externalDef[property] : token;\r\n        }\r\n\r\n        return resolvedToken;\r\n    }\r\n\r\n}\r\n","/**\r\n * validate undefined or null of an object.\r\n *\r\n * @param object\r\n */\r\nexport function isUndefinedOrNull(object: any): boolean {\r\n    const result = (typeof object === 'undefined' || object === null);\r\n    return result;\r\n}\r\n\r\n/** Optionally delays a function or immediately executes it only once when called multiple times in a very short period.\r\n *\r\n * @param func The function to be executed\r\n * @param wait The interval between calls waited before the function is actually executed\r\n * @param immediate Indicates whether the function should be executed immediately on the first call and not executed again until the interval is reached and the cycle starts again.\r\n */\r\nexport function debounce(func: () => any, wait: number, immediate?: boolean): () => boolean {\r\n\r\n    //Used to store a setTimeout value\r\n    let timeout: number;\r\n    //The arguments passed into this function\r\n    let args: IArguments;\r\n    //The context of this function\r\n    let context: (args: IArguments) => boolean;\r\n    // Used to store the current dateTime at certain intervals\r\n    let timestamp: number;\r\n    // The boolean value of the result of executing the function passed in\r\n    let result: boolean;\r\n\r\n    var later: () => void = function() {\r\n\r\n        // Check and store the time difference between the last function call and now\r\n        const last = new Date().getTime() - timestamp;\r\n\r\n        // Check if the time difference is greater less than the specified wait time\r\n        if (last < wait && last >= 0) {\r\n            timeout = window.setTimeout(later, wait - last);\r\n        } else {\r\n\r\n            //If the time difference is greater, we now execute our function\r\n            timeout = null;\r\n            if (!immediate) {\r\n                result = func.apply(context, args);\r\n                if (!timeout) context = args = null;\r\n            }\r\n        }\r\n    };\r\n\r\n    return function() {\r\n\r\n        context = this;\r\n        args = arguments;\r\n        timestamp = new Date().getTime();\r\n\r\n        // Before we set a timeout (If there isn't already one set), we create a boolean value to determine if immediate execution should occur.\r\n        const callNow: boolean = immediate && !timeout;\r\n\r\n        // If there is no timeout, we set a timeout to check for the last successive call within the interval provided\r\n        if (!timeout) {\r\n            timeout = window.setTimeout(later, wait);\r\n        }\r\n\r\n        // If immediate is set in the arguments, then we execute the function provided\r\n        if (callNow) {\r\n            result = func.apply(context, args);\r\n            context = args = null;\r\n        }\r\n\r\n        return result;\r\n    };\r\n}\r\n\r\n/**\r\n * Returns a 4-character alpha-numeric identifier, no more than 1.6 million\r\n */\r\nexport function shortUid(): string {\r\n    return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\r\n}\r\n\r\n/**\r\n *  Will return a true boolean value if there is a duplicate item in the array.\r\n *\r\n * @param model This is the model property that will contain the value and validationProperty that will be compared against\r\n * @param array  This is the validation array that must not contain the duplicate\r\n * @param validationProperty This is a the name of the property on the model that will be validated against\r\n */\r\nexport function isDuplicateItemInArray(model: any, array: Array<any>, validationProperty: string): boolean {\r\n\r\n    if (model && array && validationProperty && model[validationProperty]) {\r\n        //There wil always be one value in the array that is the same as the model because it is already in the array.  If there is more than one it is a duplicate\r\n        return propertyMatchesInObjectArray(array, validationProperty, model[validationProperty]) > 1;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n/**\r\n * Returns the number of items in the array that matches with the property\r\n * This function will cater for any array as well as model array type\r\n *\r\n * @param model This is the model property that will contain the value and validationProperty that will be compared against\r\n * @param array This is the validation array that must not contain the duplicate\r\n * @param propertyName This is a the name of the property on the model that will be compared against\r\n * @param propertyValue This is a the value of the property on the model that will be compared against\r\n * @param isCaseSensitive By default property is not case sensitive\r\n */\r\nexport function propertyMatchesInObjectArray(array: Array<any>, propertyName: string,\r\n    propertyValue: string, isCaseSensitive?: boolean): number {\r\n    propertyValue = propertyValue.trim();\r\n\r\n    let foundCount = 0;\r\n    for (let i = 0; i < array.length; i++) {\r\n        const property = (array[i][propertyName] ?? array[i][propertyName].trim()) || '';\r\n        if (!isCaseSensitive) {\r\n            if (property === propertyValue) {\r\n                foundCount++;\r\n            }\r\n        } else {\r\n            if (property.toUpperCase() === propertyValue.toUpperCase()) {\r\n                foundCount++;\r\n            }\r\n        }\r\n    }\r\n    return foundCount;\r\n}\r\n\r\n/**\r\n * Returns the first enum key that corresponds with a certain string enum value\r\n *\r\n * @param myEnum The enum containing the string value\r\n * @param enumValue the string value you are searching for.\r\n */\r\nexport function getEnumKeyByEnumValue<T extends { [index: string]: string }>(myEnum: T, enumValue: string): keyof T | null {\r\n    const keys = Object.keys(myEnum).filter(x => myEnum[x] == enumValue);\r\n    return keys.length > 0 ? keys[0] : null;\r\n}\r\n","/// <reference path=\"../../../types/global.d.ts\" />\r\nexport class HttpInterceptor implements IHttpInterceptor {\r\n\r\n    constructor(public headers: { [name: string]: string }) {\r\n\r\n    }\r\n\r\n    /**\r\n     * Overrides all xmlhttprequest open calls to define the headers passed in. Can only be called once in the app\r\n     *\r\n     * @param headers headers to set per request\r\n     */\r\n    public Intercept() {\r\n        // This overrides the xml httprequest open function to set the request headers defined above on every open call\r\n        // This defines the headers when the request is first created\r\n        const that = this;\r\n        (function(open) {\r\n            XMLHttpRequest.prototype.open = function(method: string, url: any, async?: boolean, user?: string, password?: string) {\r\n                open.call(this, method, url, async, user, password);\r\n                if (that.headers) {\r\n                    for (const i in that.headers) {\r\n                        this.setRequestHeader(i, that.headers[i]);\r\n                    }\r\n                }\r\n            };\r\n        })(XMLHttpRequest.prototype.open);\r\n    }\r\n}\r\n","import { IValidationService } from '../../../types/services/validation/ivalidation.service';\r\nimport { ValidationTypes } from '../enums/model/validation-types';\r\nimport { propertyMatchesInObjectArray } from './general';\r\n\r\n/**\r\n * Returns a unique name\r\n * This function will take the name passed in, if name already exists in collection passed in (array), will append\r\n * a number to name.\r\n *\r\n * e.g. myName (where item with name myName already exists in array), will return myName 1\r\n *\r\n * @param array Collection of items that will be used to check if name already exists\r\n * @param propertyName The property to use for assigning the object's new name\r\n * @param originalName Original name to use for object\r\n * @param mainModel Model that contains the original name that will be the same as the Property name in this object\r\n * @param isCaseSensitive This will ensure that no case sensitivity will be applied\r\n */\r\nexport function findUniqueNameForListArray(array: sourceCode.k2Designer.objectModel.core.model.IModelArray<any>, propertyName: string,\r\n    originalName: string, mainModel: any, isCaseSensitive?: boolean): string {\r\n\r\n    let ct = 1;\r\n    originalName = originalName.trim();\r\n    let newName: string = originalName + ' ' + ct;\r\n\r\n    do {\r\n        const found = propertyMatchesInObjectArray(array, propertyName, newName, isCaseSensitive) > 0;\r\n\r\n        if (found) {\r\n            ct++;\r\n            newName = originalName + ' ' + ct;\r\n\r\n        } else {\r\n            break;\r\n        }\r\n    } while (ct < 1000);\r\n\r\n    return newName;\r\n}\r\n\r\nexport const disallowedWorkflowSpecialChar = '\\\\/:*?\"<>,|()\\';';\r\n\r\n/**\r\n * Returns a unique name\r\n * This function will take the name passed in, if name already exists in collection passed in (array), will append\r\n * a number to name.\r\n *\r\n * If forceNumber is true, it will always append number to new name, whether it exists in array or not.\r\n * e.g. myName (where item with name myName already exists in array), will return myName 1\r\n *\r\n * @param array Collection of items that will be used to check if name already exists\r\n * @param propertyName The property to use for assigning the object's new name\r\n * @param defaultName Default name to use for object\r\n * @param mainItem\r\n * @param forceNumber Whether to always append number to name, or only if name already exists in array\r\n * @param seperator To use between the name and number appended. Will default to underscore for systemname propertyname and space for all others\r\n * @param limit Optional parameter to ensure that the resulting name does not exceed the specified length\r\n */\r\nexport function findUniqueName(array: any[],\r\n    propertyName: string, defaultName: string, mainItem: any = null,\r\n    forceNumber: boolean = false, seperator: string = ' ', limit?: number): string {\r\n\r\n    let ct: number = forceNumber ? 1 : 0;\r\n    let suffix: string = (forceNumber ? ' ' + ct : '');\r\n    let newName: string = defaultName + suffix;\r\n\r\n    do {\r\n        const item = array.find(x => x[propertyName] === newName);\r\n\r\n        if (!!item && item !== mainItem) {\r\n\r\n            ct++;\r\n\r\n            suffix = seperator + ct;\r\n            newName = defaultName + suffix;\r\n\r\n            if (!!limit && newName.length > limit) {\r\n                newName = defaultName.substr(0, limit - suffix.length) + suffix;\r\n            }\r\n\r\n        } else {\r\n            break;\r\n        }\r\n    } while (ct < 1000);\r\n\r\n    return newName;\r\n}\r\n\r\n/**\r\n * Returns true if value contains any of the following special characters: \\/:.*?\"<>,|()\r\n * This function will use the validation service and validation service will return array of validation errors and messages\r\n *\r\n * @value string Text value to be validated for special characters\r\n */\r\nexport function containsSpecialCharacters(value: string, validationService: IValidationService): boolean {\r\n\r\n    validationService.overrideEnabled = true;\r\n\r\n    const validationResult: sourceCode.k2Designer.objectModel.core.model.IErrorInformation[] =\r\n        validationService.evaluate_Legacy(\r\n           [ValidationTypes.LegacyPropertyValidator],\r\n            {\r\n                evaluationValue: value,\r\n                array: [],\r\n                evaluationProperty: 'title',\r\n                evaluateEmptyValue: true, //evaluate empty value\r\n                emptyPropertyMessage: '', //empty title resource message\r\n                duplicatePropertyValueMessage: '', //duplicate title resource message\r\n                evaluateSpecialCharacters: true, //evaluate special characters\r\n                specialCharacters: '\\\\/:.*?\"<>,|()', //list of special chars\r\n            } as sourceCode.k2Designer.objectModel.validationService.plugins.IPropertyValidatorItem);\r\n\r\n    validationService.overrideEnabled = false;\r\n\r\n    return (validationResult.length > 0);\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n    production: false,\r\n    devHarness: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { loader } from './app/loader';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.devHarness) {\r\n    import('./app/app.module').then((AppModule) => {\r\n        import('@angular/platform-browser-dynamic').then(\r\n            (PlatformBrowserDynamic) => {\r\n                PlatformBrowserDynamic.platformBrowserDynamic()\r\n                    .bootstrapModule(AppModule.AppModule)\r\n                    .catch((err) => console.error(err))\r\n                    .then(() => {\r\n                        console.log('app module bootstrapped');\r\n                    });\r\n            }\r\n        );\r\n    });\r\n} else {\r\n    if (environment.production) {\r\n        enableProdMode();\r\n    }\r\n\r\n    const loaderInstance = new loader();\r\n    window.addEventListener(\r\n        'message',\r\n        loaderInstance.messageReceivedHandler.bind(loaderInstance),\r\n        false\r\n    );\r\n\r\n    // Wait for the document to be ready before sending a message to the parent frame\r\n    $(document).ready(loaderInstance.documentReadyHandler.bind(loaderInstance));\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { IActivity } from '../../../types/models/process/activities/i-activity';\r\nimport { IProcess } from '../../../types/models/process/i-process';\r\nimport { IEnvironmentService } from '../../../types/services/environment/i-environment-service';\r\nimport { ILegacyProcessService } from '../../../types/services/process/i-legacy-process-service';\r\nimport { IProcessDefinitionPluginConfiguration } from '../../../types/services/process/i-process-definition-plugin-configuration';\r\nimport { getProcess } from '../../utilities/mock-process';\r\n\r\n/**\r\n * NOTE: This is a service class with stub methods currently only used in the dev environment\r\n * (implementation of the interface is determined by the factory),\r\n * but the stubs will be replaced with true implementation when services are ported.\r\n * */\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockProcessService implements ILegacyProcessService {\r\n\r\n    isCloning: boolean;\r\n\r\n    itemInstance: sourceCode.k2Designer.objectModel.environment.IItemInstance;\r\n\r\n    id: string;\r\n\r\n    rootId: string;\r\n\r\n    listenReady: (callback: sourceCode.k2Designer.services.core.IServiceReadyCallback) => void;\r\n\r\n    notifyReady: () => void;\r\n\r\n    definitionPlugins: IProcessDefinitionPluginConfiguration[];\r\n\r\n    root: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process =\r\n    {\r\n        ...getProcess(),\r\n        ...{\r\n            description: '',\r\n            findItem: () => null,\r\n            findWorkflowItemReferenceByNameAndStartMode: () => null,\r\n            findWorkflowItemReference: () => null,\r\n            configuration: {\r\n                itemReferences: [],\r\n                dataFields: []\r\n            }\r\n        }\r\n    } as any;\r\n\r\n    constructor(private environmentService: IEnvironmentService) { }\r\n\r\n    isInitialized(): boolean {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    unRegisterEventListener(event: any, subscriberId: any): void {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n\r\n    setTitle(newValue: string): JQueryPromise<string> {\r\n        return $.Deferred();\r\n    };\r\n\r\n    raiseReferenceError(modelObject: sourceCode.k2Designer.objectModel.core.model.IValidatedComponent, errorProperty: string, errorReference: string): void {\r\n    }\r\n    deployProcess(onCompleted: () => void): void { }\r\n    enableProcessing(): void { }\r\n    requestProcessingCompleteNotification(stopProcessing: boolean, cleanup: boolean, onEventRaisedCallback: () => void): void { }\r\n    registerEventListener(event: any, subscriber: any): void { }\r\n    busyProcessingInstructions(): boolean { return false; }\r\n    flush(callbackSuccess?: () => void, callbackFail?: () => void, closeProject?: boolean, isAutoFlush?: boolean): void { }\r\n    getInstructionCount(): number { return 0; }\r\n    allowProcessing(): boolean { return true; }\r\n    listenForErrorList(cb: () => void, errorSeverity?: sourceCode.k2Designer.objectModel.core.model.ErrorSeverity): () => void { return cb; }\r\n    listenForSRErrorList(cb: () => void, errorSeverity?: sourceCode.k2Designer.objectModel.core.model.ErrorSeverity): () => void { return cb; }\r\n    getErrorList(): sourceCode.k2Designer.objectModel.core.model.IErrorInformation[] { return []; }\r\n\r\n    removeTrackedItem(definitionReference: string, useReference: string): void { }\r\n\r\n    createNewActivity(initialize: boolean, wizardId?: number, template?: string): IActivity {\r\n        return {} as any;\r\n    }\r\n\r\n    registerObjectModelServiceEventListner(event: any, subscriber: any) { }\r\n\r\n    unRegisterObjectModelServiceEventListner(event: any, subscriberId: any) { }\r\n\r\n    beginCloningOperation = (): void => {};\r\n\r\n    finishCloningOperation = (): void => {};\r\n\r\n    cacheExternalReferences(configuredFields: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField[]): void {\r\n    };\r\n\r\n    findWorkflowItemReferenceByNameAndStartMode() {\r\n\r\n    }\r\n\r\n    getActivityDefaultName(wizardId: number, template: string): string {\r\n        return 'activity';\r\n    }\r\n\r\n    getActivityDefaultNameFromActivity(activity: IActivity): string {\r\n        return 'activity';\r\n    }\r\n\r\n    /**\r\n     * Returns a list of reference strings from tracked references that are linked to the specified node\r\n     *\r\n     * @param nodePath - reference path of node\r\n     */\r\n    getTrackedReferencesForNode(nodePath: string): string[] {\r\n        return [];\r\n    }\r\n\r\n    /**\r\n     * Returns whether or not the reference has children that are used\r\n     */\r\n    public trackedReferenceHasChildren(definitionPath: string, excludedIndex?: number): boolean {\r\n        return false;\r\n    }\r\n\r\n    get legacyProcessService() {\r\n        return this;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { IGetResourceFileCompletedCallback } from 'src/types/services/resources/i-resource-file-completed-callback';\r\nimport { IResourceInfo } from 'src/types/services/resources/i-resource-info';\r\nimport { IValidatedComponent } from '../../../types/validation/i-validated-component';\r\nimport { ILegacyResourceService } from '../../../types/services/resources/i-legacy-resource.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockLegacyResourceService implements ILegacyResourceService {\r\n\r\n    private _jsonStrings: {\r\n        [resourceId: string]: string;\r\n    } = {\r\n        umUser_popup_user_managers: 'User Managers',\r\n        wizard_workflow_integration_update_form: 'wizard_workflow_integration_update_form - {0}'\r\n    };\r\n\r\n    constructor() { }\r\n\r\n    info: IResourceInfo;\r\n\r\n    onGetResourceFileCompletedCallbacks: IGetResourceFileCompletedCallback[] = [];\r\n\r\n    getString(resourceId: string, collectionId?: string): string {\r\n        return this._jsonStrings[resourceId] ?? resourceId;\r\n    }\r\n\r\n    getResxFile(resourceName: string): string {\r\n        //Set Mock resources\r\n        this.strings[resourceName] = {...this._resx[resourceName]};\r\n\r\n        //Do callback in timeout to simulate async order of resource file loaded\r\n        setTimeout(() => {\r\n            if (this.onGetResourceFileCompletedCallbacks && this.onGetResourceFileCompletedCallbacks.length)\r\n            {for (const cb of this.onGetResourceFileCompletedCallbacks) {\r\n                if (typeof cb === 'function') {\r\n                    cb();\r\n                }\r\n            }}\r\n        });\r\n        return resourceName;\r\n    }\r\n\r\n    // used for resx\r\n    strings: { [collectionId: string]: { [resourceId: string]: string } } = {};\r\n\r\n    resolveTokenResourceString: (resourceStr: string,\r\n        resourceTokens: sourceCode.k2Designer.objectModel.core.model.IModelArray<string>,\r\n        modelObj: sourceCode.k2Designer.objectModel.core.model.IModelObject) => string =\r\n        (resourceStr: string,\r\n            resourceTokens: sourceCode.k2Designer.objectModel.core.model.IModelArray<string>,\r\n            modelObj: sourceCode.k2Designer.objectModel.core.model.IModelObject) => {\r\n            //Fake response that can be tested\r\n            let errorMsg = '';\r\n            if ((modelObj as IValidatedComponent)?.errorInformation?.length > 0) {\r\n                errorMsg = (modelObj as IValidatedComponent).errorInformation[0]?.errorMessage;\r\n            }\r\n            return resourceStr + '|' + resourceTokens?.toString() + '|' + errorMsg;\r\n        };\r\n\r\n    private _resx: {\r\n        [resourceName: string]: {\r\n            [keyName: string]: string;\r\n        };\r\n    } = {\r\n        Wizards: {\r\n            wizard_workflow_integration_smartforms_usertask_open_task_rule: 'wizard_workflow_integration_smartforms_usertask_open_task_rule',\r\n            smartforms_integration_start_rule_heading: 'smartforms_integration_start_rule_heading',\r\n            wizard_workflow_integration_smartforms_usertask_open_task_rule_description: 'wizard_workflow_integration_smartforms_usertask_open_task_rule_description',\r\n            smartforms_integration_start_rule_sub_heading: 'smartforms_integration_start_rule_sub_heading',\r\n            wizard_workflow_integration_smartforms_usertask_open_task_rule_actions: 'wizard_workflow_integration_smartforms_usertask_open_task_rule_actions',\r\n            wizard_workflow_integration_smartforms_form_rules: 'wizard_workflow_integration_smartforms_form_rules',\r\n            breadcrumb_users_placeholder_text: 'Search Users',\r\n            popup_UserDialog_Label_UserGroup:'User Group',\r\n            general_RECENT: 'RECENT',\r\n            general_No_Recents: 'NO RECENTS TO DISPLAY'\r\n        },\r\n        RulesDesigner: {\r\n            ruleDesigner_ThisResponse_ChooseAction:'Choose Action...'\r\n        },\r\n        Controls:{\r\n            filterExpression_choose_property: 'Choose Property'\r\n        }\r\n    };\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { retry } from 'rxjs/operators';\r\nimport { ICanvasService, ICanvasTemplateDefinitionInstance, IIconsDefinition, IListenActivateCallback } from '../../types/services/canvas/i-canvas.service';\r\n\r\n/**\r\n * NOTE: This is a service class with stub methods currently only used in the dev environment\r\n * (implementation of the interface is determined by the factory),\r\n * but the stubs will be replaced with true implementation when services are ported.\r\n * */\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\n\r\nexport class MockCanvasService implements ICanvasService {\r\n\r\n    constructor() { }\r\n    getIcons(): IIconsDefinition { return { } as any; }\r\n    selectStepByReference(reference: string): void {  }\r\n    nodeTemplates: { [name: string]: ICanvasTemplateDefinitionInstance<sourceCode.k2Designer.objectModel.canvas.INodeTemplate> };\r\n    linkTemplates: { [name: string]: ICanvasTemplateDefinitionInstance<sourceCode.k2Designer.objectModel.canvas.ILinkTemplate> };\r\n    toolTemplates: { [name: string]: ICanvasTemplateDefinitionInstance<sourceCode.k2Designer.objectModel.canvas.IToolTemplate> };\r\n    adornmentTemplates: { [name: string]: ICanvasTemplateDefinitionInstance<sourceCode.k2Designer.objectModel.canvas.IAdornmentTemplate> };\r\n    extensionTemplates: { [name: string]: ICanvasTemplateDefinitionInstance<sourceCode.k2Designer.objectModel.canvas.IExtensionTemplate> };\r\n    activateExtension(name: string, stepData: sourceCode.k2Designer.objectModel.canvas.NodeData, ...param: any[]): void { };\r\n    deactivateExtension(name: string, stepData: sourceCode.k2Designer.objectModel.canvas.NodeData): void { };\r\n    listenExtensionRequests(callback: IListenActivateCallback): void { };\r\n    isExtensionActive(name: string, stepData: sourceCode.k2Designer.objectModel.canvas.NodeData): boolean { return true; };\r\n    enableUndoRedo(): void { };\r\n    disableUndoRedo(): void { };\r\n    beginUndoGroup(title: string): void { };\r\n    finishUndoGroup(): void { };\r\n    isUndoRedoEnabled: boolean;\r\n    updateDiagram(): void { };\r\n    isModelLoaded: boolean;\r\n    modelLoadedListeners: Function[];\r\n    id: string;\r\n    listenReady(callback: sourceCode.k2Designer.services.core.IServiceReadyCallback): void { };\r\n    notifyReady(): void { };\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n/**\r\n * NOTE: This is a service class with stub methods currently only used in the dev environment\r\n * (implementation of the interface is determined by the factory),\r\n * but the stubs will be replaced with true implementation when services are ported.\r\n * */\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockClipboardService implements IClipboardService {\r\n    constructor() { }\r\n    private clipboard: any[] = [];\r\n\r\n    /**\r\n     * Gets the appropriate source that contains clipboardData.  This is needed because IE11 has clipboardData on window instead of event\r\n     *\r\n     * @param event the event to determine the source from\r\n     */\r\n    public getClipboardSource(event: Event): any {\r\n        return (<any>event).clipboardData ? event : window;\r\n    }\r\n\r\n    public setCurrentContext = (clipboardContext: string) => {\r\n\r\n    };\r\n    public hasData = () => this.clipboard.length > 0;\r\n    clipboardEnabled = true;\r\n    canCopy(): boolean { return true; };\r\n    canCut(): boolean { return true; };\r\n    canDelete(): boolean { return true; };\r\n    canPaste(): boolean { return true; };\r\n    copy: (options?: any) => boolean;\r\n    cut: (options?: any) => boolean;\r\n    delete: (options?: any) => boolean;\r\n    paste: (options?: any) => boolean;\r\n    listen: (operation: sourceCode.k2Designer.objectModel.clipboard.ClipboardOperations, callback: sourceCode.k2Designer.objectModel.clipboard.IClipboardOperationCompletedCallback<any>, clipboardContext?: string) => void;\r\n    public setClipboard = (data: any[], raw: string, event?: Event) => {\r\n        this.clipboard = data;\r\n    };\r\n    public getClipboard = () => this.clipboard;\r\n    getSystemClipboard = (event: Event, asRichText: boolean): Element => {\r\n        let results: Element = null;\r\n        const clipboardSource: any = this.getClipboardSource(event);\r\n        let clipboardContents: string = null;\r\n\r\n        if (asRichText) {\r\n            // External programs may have style elements that affect body/div/p elements etc\r\n            // However, it may need to be sanitized for security reasons\r\n\r\n            try {\r\n                clipboardContents = clipboardSource.clipboardData.getData('text/html');\r\n                if (!clipboardContents) {\r\n                    const getDataSourceType: string = true ? 'text/plain' : 'Text';\r\n                    clipboardContents = clipboardSource.clipboardData.getData(getDataSourceType);\r\n                }\r\n\r\n                if (/class=\"?Mso|style=\"[^\"]*\\bmso-|style='[^'']*\\bmso-|w:WordDocument/i.test(clipboardContents)) {\r\n                    // Office content detected\r\n                    //clipboardContents = this.cleanMsOfficeContent(clipboardContents);\r\n                }\r\n\r\n            }\r\n            catch (e) {\r\n                // Some error has occured, leaving it to the browser's native clipboard handling instead\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            //IE and Edge support \"Text\" in getData, everybody else does text/plain.\r\n            const getDataSourceType: string = true ? 'text/plain' : 'Text';\r\n            clipboardContents = clipboardSource.clipboardData.getData(getDataSourceType);\r\n        }\r\n\r\n        if (clipboardContents !== null && clipboardContents.length > 0) {\r\n            // Sanitize the clipboard content\r\n            //clipboardContents = RichEditPanelService.sanitizeHtml(clipboardContents);\r\n\r\n            results = <Element>$.parseHTML('<root>' + (asRichText ? clipboardContents : '') + '</root>')[0];\r\n\r\n            if (!asRichText) {\r\n                results.appendChild(document.createTextNode(clipboardContents));\r\n            }\r\n        }\r\n\r\n        return results;\r\n    };\r\n    clearClipboard: () => void;\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n/**\r\n * NOTE: This is a service class with stub methods currently only used in the dev environment\r\n * (implementation of the interface is determined by the factory),\r\n * but the stubs will be replaced with true implementation when services are ported.\r\n * */\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockCommandService implements ICommandService {\r\n\r\n    constructor() { }\r\n    getRichEditCommandName(key: string, shift: boolean, alt: boolean): string { return ''; }\r\n    keyUp(): void { }\r\n    keyDown(): void { }\r\n    keyHaveBeenReleased(): boolean { return true;}\r\n    invokeCommand = (key: string, shift?: boolean, alt?: boolean, ctrl?: boolean, byvalue?: boolean, context?: string) => true;\r\n    notify = (commandName: string, callback: sourceCode.k2Designer.services.studio.ICommandInvokedCallback, context?: string) => {};\r\n    isRichEditCommand = (key: string, shift: boolean, alt: boolean) => true;\r\n    setCurrentContext = (context?: string) => {};\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { IConfigPanelService } from 'src/types/services/config-panel/i-config-panel-service';\r\nimport { IEventLoadingCallback } from 'src/types/services/config-panel/i-event-loading-callback';\r\nimport { IPanelChangedCallback } from 'src/types/services/config-panel/i-panel-changed-callback';\r\nimport { IPanelTabChangedCallback } from 'src/types/services/config-panel/i-panel-tab-changed-callback';\r\n\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockConfigPanelService implements IConfigPanelService {\r\n\r\n    constructor() { }\r\n    notifyConfigTabErrorDataSet(tab: sourceCode.k2Designer.objectModel.configPanel.IConfigPanelTab): void {}\r\n    selectConfigTab(tab: sourceCode.k2Designer.objectModel.configPanel.IConfigPanelTab): void {}\r\n    configTabErrorDataSetListener(fn: () => void) {}\r\n    currentPnl: sourceCode.k2Designer.objectModel.configPanel.IPanelInstance;\r\n    undo = () => void (0);\r\n    redo = () => void (0);\r\n    show = (defaultItem: number, items: sourceCode.k2Designer.objectModel.configPanel.IItemInstance[], onReady?: () => void) => void (0);\r\n    hide = () => void (0);\r\n    listenShowHide = (callback: IPanelChangedCallback) => void (0);\r\n    listenTabChanged = (callback: IPanelTabChangedCallback) => void (0);\r\n    removeTabChangedCallback = (callback: IPanelTabChangedCallback) => void (0);\r\n    registerContextForUndo =\r\n        (oldCtx: sourceCode.k2Designer.objectModel.workflow.process.IArtefact<any, any>[], newCtx: sourceCode.k2Designer.objectModel.workflow.process.IArtefact<any, any>[]) => void (0);\r\n    loadingEventsDictionary: { [eventReference: string]: string[] } = {};\r\n    eventDataLoadCallBack: IEventLoadingCallback = () => { };\r\n}\r\n","import { ContextChangedCallback, ContextProviderConstructor, IContextProviderService } from '../../types/services/context-provider/i-context-provider-service';\r\n\r\nexport class MockContextProviderService implements IContextProviderService {\r\n    listen<T>(callback: ContextChangedCallback<T>): sourceCode.k2Designer.objectModel.core.model.IEventRemover {\r\n        return {} as any; };\r\n    registerContextProvider<T>(model: sourceCode.k2Designer.objectModel.core.model.ModelBase, contextProvider: sourceCode.k2Designer.objectModel.contextProvider.IContextProvider<T>): void { };\r\n    getContextProviderFromModel<T extends sourceCode.k2Designer.objectModel.contextProvider.ContextProvider<any>>(model: sourceCode.k2Designer.objectModel.core.model.ModelBase): T {\r\n        return {\r\n            getCntx: (): any => []\r\n        } as any;\r\n    };\r\n    getContextProviderFromType<T extends sourceCode.k2Designer.objectModel.contextProvider.ContextProvider<any>>(providerType: ContextProviderConstructor): T {\r\n        return {} as any; };\r\n    itemInstance: sourceCode.k2Designer.objectModel.environment.IItemInstance;\r\n    id: string;\r\n    listenReady(callback: sourceCode.k2Designer.services.core.IServiceReadyCallback): void { };\r\n    notifyReady(): void { };\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { IProgressNotification } from 'src/types/services/data/i-progress-notification';\r\nimport { ISearchPagingOptions } from 'src/types/services/data/i-search-paging-options';\r\nimport { IEnvironmentService } from 'src/types/services/environment/i-environment-service';\r\nimport { IDataService } from '../../types/services/data/i-data-service';\r\n\r\n/**\r\n * NOTE: This is a service class with stub methods currently only used in the dev environment\r\n * (implementation of the interface is determined by the factory),\r\n * but the stubs will be replaced with true implementation when services are ported.\r\n * */\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockDataService implements IDataService {\r\n\r\n    constructor() { }\r\n\r\n    httpPost(url: string,\r\n        parms: {},\r\n        callback: any,\r\n        environmentService?: IEnvironmentService,\r\n        cache?: boolean, onProgress?:\r\n            IProgressNotification,\r\n        showNotification: boolean = true): number {\r\n\r\n        setTimeout(() => {\r\n            switch (url) {\r\n                case 'api/identity/getlabels':\r\n                    callback({ valueList: ['SP', 'K2', 'K2SQL', 'CE'], defaultLabel: 'K2SQL' });\r\n                    break;\r\n                case 'api/identity/getidentities':\r\n                    callback([{ email: '', systemName: 'Package and Deployment', label: '', displayName: 'Package and Deployment', description: 'Built in K2 system role for Package and Deployment', type: 8, items: [] }]);\r\n                    break;\r\n                case 'api/identity/identitiesbygroup':\r\n                    callback([{ email: '', systemName: 'Package and Deployment', label: '', displayName: 'Package and Deployment', description: 'Built in K2 system role for Package and Deployment', type: 8, items: [] }]);\r\n                    break;\r\n                default:\r\n                    throw `API Mock not found: ${url}`;\r\n            }\r\n\r\n        }, 100);\r\n\r\n        return 1;\r\n    }\r\n    getFile(url: string, callback: sourceCode.k2Designer.services.angular.IFileCallback, cache?: boolean, onProgress?: IProgressNotification): void { }\r\n    getScriptFile(url: string, callback: sourceCode.k2Designer.services.angular.IScriptCallback, cache?: boolean, onProgress?: IProgressNotification): void { }\r\n    getScriptPackage(type: string, url: string, callback: sourceCode.k2Designer.services.angular.IScriptCallback, cache?: boolean, onProgress?: IProgressNotification): void { }\r\n    getCssFile(url: string, callback: sourceCode.k2Designer.services.angular.ICssCallback, cache?: boolean, onProgress?: IProgressNotification): void { }\r\n    setAppendix(appdx: string): void { }\r\n    preGet(url: string): void { }\r\n    search: (url: string, parameters: any, onDataReceived: (data: any) => void, onCompleted?: () => void, onError?: (error: any) => void, onAborted?: () => void, paging?: ISearchPagingOptions) => void;\r\n    abortRequest(hash: number): void {\r\n        // todo when porting service\r\n    }\r\n\r\n    getOpenRequestCount = () => 0;\r\n\r\n    httpGet(url: string,\r\n        parms: {},\r\n        callback: any,\r\n        environmentService?: IEnvironmentService,\r\n        cache?: boolean,\r\n        onProgress?: any,\r\n        showNotification?: boolean,\r\n        eventLoadingData?: any) {\r\n\r\n        setTimeout(() => {\r\n\r\n            if (!this.callbackParameters[url]) {\r\n                console.log('API Mock callback parameters not found for HttpGet of url: ', url);\r\n                throw `API Mock not found: ${url}`;\r\n            }\r\n\r\n            callback(this.callbackParameters[url]);\r\n\r\n        }, 100);\r\n    };\r\n\r\n    getDataUrl(key: string): string {\r\n        return key;\r\n    }\r\n\r\n    /**\r\n     * To enable test that uses mock to specify callback parameters for specific call.\r\n     * Add callback as key as needed.\r\n     */\r\n    callbackParameters = {\r\n        'api/identity/getlabels': { valueList: ['SP', 'K2', 'K2SQL', 'CE'], defaultLabel: 'K2SQL' },\r\n        'api/identity/getidentities': [{ email: '', systemName: 'Package and Deployment', label: '', displayName: 'Package and Deployment', description: 'Built in K2 system role for Package and Deployment', type: 8, items: [] }],\r\n        'api/identity/identitiesbygroup': [{ email: '', systemName: 'Package and Deployment', label: '', displayName: 'Package and Deployment', description: 'Built in K2 system role for Package and Deployment', type: 8, items: [] }],\r\n        'api/smartobject/searchSmartObjects': [{}],\r\n        'api/smartforms/getformcontent': {},\r\n        'api/core/getresxfile': {},\r\n        'api/smartforms/getstartworkflowforms': {},\r\n        'api/sharePoint/getSharePointPluginDetails': {},\r\n        'api/sharePoint/getListSmartObjectName': {},\r\n        'api/sharePoint/autoConfingureSharePointEvents': {}\r\n    };\r\n}\r\n","import { IDesignerService } from '../../types/services/designer/i-designer-service';\r\n\r\nexport class MockDesignerService implements IDesignerService {\r\n    id= '';\r\n    listenReady(callback: sourceCode.k2Designer.services.core.IServiceReadyCallback): void { };\r\n    notifyReady(): void { };\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { IDragStartedCallback } from 'src/types/services/drag-drop/i-drag-started-callback';\r\nimport { IDragStoppedCallback } from 'src/types/services/drag-drop/i-drag-stopped-callback';\r\nimport { IDroppedCallback } from 'src/types/services/drag-drop/i-dropped-callback';\r\nimport { IDragDropService } from '../../types/services/drag-drop/i-drag-drop.service';\r\nimport { MockEnvironmentService } from './environment-service';\r\n\r\n/**\r\n * NOTE: This is a service class with stub methods currently only used in the dev environment\r\n * (implementation of the interface is determined by the factory),\r\n * but the stubs will be replaced with true implementation when services are ported.\r\n * */\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockDragDropService implements IDragDropService {\r\n    private env: MockEnvironmentService;\r\n    private data: any;\r\n    constructor() {\r\n        this.env = new MockEnvironmentService();\r\n        this.env.setup('sourceCode.k2Designer.directives.k2DragDrop.K2Draggable', null);\r\n        this.createDragFunction();\r\n        this.data = {};\r\n    }\r\n    notifyDragStopped(): void {\r\n    };\r\n    notifyDragStarted(type: string, data: sourceCode.k2Designer.objectModel.dragDropService.IDragDropData): void {\r\n        //throw new Error('Method not implemented.');\r\n    }\r\n\r\n    public createDragFunction(): void {\r\n        sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv = <HTMLDivElement>document.createElement('div');\r\n        sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.style.position = 'absolute';\r\n        sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.style.zIndex = '5000000';\r\n        sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragDiv.style.pointerEvents = 'none';\r\n\r\n        sourceCode.k2Designer.directives.k2DragDrop.K2Draggable._dragGhost = <HTMLImageElement>document.createElement('img');\r\n    }\r\n    setItem = (type: string, data: sourceCode.k2Designer.objectModel.dragDropService.IDragDropData) => {\r\n        this.data[type] = data;\r\n    };\r\n    hasItem = (type: string) => !!this.data[type];\r\n    peekItem = (type: string): sourceCode.k2Designer.objectModel.dragDropService.IDragDropData => this.data[type] as sourceCode.k2Designer.objectModel.dragDropService.IDragDropData;\r\n\r\n    getItem = (type: string): sourceCode.k2Designer.objectModel.dragDropService.IDragDropData => {\r\n        const data = this.data[type];\r\n        this.data[type] = undefined;\r\n        return data as sourceCode.k2Designer.objectModel.dragDropService.IDragDropData;\r\n    };\r\n\r\n    setNotifyOnDropped = (fn: (type: string, data: sourceCode.k2Designer.objectModel.dragDropService.IDragDropData) => boolean) => { };\r\n    clearItems(type?: string): void {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    disable = () => { };\r\n    enable = () => { };\r\n    listenDropped = (callback: IDroppedCallback, context: string) => { };\r\n    listenDragStarted = (callback: IDragStartedCallback): sourceCode.k2Designer.objectModel.core.model.IEventRemover => () => { };\r\n    listenDragStopped = (callback: IDragStoppedCallback): sourceCode.k2Designer.objectModel.core.model.IEventRemover => () => { };\r\n\r\n    isEnabled = true;\r\n\r\n}\r\n","import { ActiveStudioItemChanged, IEnvironmentService, IPluginStateChangedCallback } from 'src/types/services/environment/i-environment-service';\r\nimport { IHelpService } from '../../types/services/help/i-help-service';\r\nimport { IDataService } from '../../types/services/data/i-data-service';\r\nimport { IPopupService } from '../../types/services/popup/i-popup-service';\r\nimport { IStateChangedListener } from '../../types/uiComponents/pluginWizards/IStateChangedListener';\r\nimport { IRecentsService } from '../../types/services/recents/i-recents-service';\r\nimport { IObjectModelService } from '../../types/services/object-model/i-object-model-service';\r\nimport { ILegacyResourceService } from 'src/types/services/resources/i-legacy-resource.service';\r\nimport { Mocks } from '../utilities/EnsureNamespaces';\r\nimport { EventNotifierService } from 'src/app/services/event-notifier/event-notifier.service';\r\nimport { IPopupConfiguration } from '../../types/models/popup/i-popup-configuration';\r\nimport { IGlobalVariable } from '../../types/models/i-global-variable';\r\nimport { MockPopupService } from './popup-service';\r\n\r\n/**\r\n * Mock Environment service class to be used in tests.\r\n * To use in a test spec:\r\n * import { MockEnvironmentService } from '../../../../../testing/mock-services/environment-service';\r\n * Instantiate in beforeEach\r\n * Call dispose in afterEach\r\n * Add new services / properties as needed.\r\n */\r\nexport class MockEnvironmentService implements IEnvironmentService {\r\n\r\n    private registeredNamespaces: string[];\r\n\r\n    constructor() {\r\n        this.registeredNamespaces = [];\r\n\r\n        this.ensureNamespace('sourceCode.k2Designer.services.core.EnvironmentService', {\r\n            getService: this.getService,\r\n            undoRedoService: this.undoRedoService,\r\n            messagingService: this.messagingService,\r\n            notifyOnReady: this.notifyOnReady,\r\n            activeStudioItem: this.activeStudioItem,\r\n            query: this.query\r\n        });\r\n        this.ensureNamespace('sourceCode.k2Designer.services.studioItem', {\r\n            ObjectModelService: this.omService,\r\n            ContextProviderService: this.contextProviderService,\r\n            workflow: {\r\n                ProcessService: this.processService\r\n            }\r\n        });\r\n        this.ensureNamespace('sourceCode.k2Designer.services.studio', {\r\n            HelpService: this.helpService,\r\n            ResourceService: this.resourceService,\r\n            RibbonService: this.ribbonService,\r\n            UndoRedoService: this.undoRedoService,\r\n            ProgressBarService: this.progressBarService,\r\n            SelectionService: this.selectionService,\r\n            UserOptionsService: this.userOptionsService,\r\n            ValidationService: this.validationService,\r\n            ClipboardService: this.clipboardService,\r\n            RedirectService: this.redirectService,\r\n            NotificationService: this.notificationService,\r\n            CanvasService: this.canvasService,\r\n            DragDropService: this.dragDropService,\r\n            RecentsService: this.recentsService,\r\n            ToolboxService: this.toolboxService,\r\n            RichEditPanelService: this.richEditPanelService\r\n        });\r\n        this.ensureNamespace('sourceCode.k2Designer.services.angular', {\r\n            DataService: this.dataService,\r\n            PopupService: this.popupService\r\n        });\r\n        this.ensureNamespace('sourceCode.k2Designer.objectModel.contextProvider', {});\r\n        this.ensureNamespace('sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process', {});\r\n    }\r\n    isNewWorkflow: boolean;\r\n    globalVariables: IGlobalVariable<any>[] = [];\r\n    eventNotifierService: EventNotifierService;\r\n    loggedInUser: string;\r\n    listenActiveStudioItemChanged(callback: ActiveStudioItemChanged): sourceCode.k2Designer.objectModel.core.model.IEventRemover {\r\n        return null;\r\n    };\r\n\r\n    removeActiveStudioItemPluginStateChangedListener(callback: IPluginStateChangedCallback): void { }\r\n\r\n    changeSectionLayout(topHeight: number): void { }\r\n    workFlowCategoryName: string;\r\n\r\n    removeGlobalAttribute<T>(key: string): void { }\r\n\r\n    referrer = {\r\n        spsiteurl: 'http://one',\r\n        splistid: '',\r\n        smosysname: 'sysname',\r\n        isdoclib: 'true',\r\n        settingid: '123d2c89-5ce6-468b-b5b1-49435eda44dd',\r\n        spuser: 'jan',\r\n        splistinternalname: 'splitInternalName',\r\n        spsitename: 'splitSysName',\r\n        spoffice365: 'office',\r\n        objectid: 'objectid',\r\n        spappurl: 'http://app'\r\n    };\r\n\r\n    getService(s): any {\r\n        switch (s) {\r\n            case sourceCode.k2Designer.services.studioItem.ObjectModelService: return this.omService;\r\n            case sourceCode.k2Designer.services.studio.ResourceService: return this.resourceService;\r\n            case sourceCode.k2Designer.services.studio.RibbonService: return this.ribbonService;\r\n            case sourceCode.k2Designer.services.studio.UndoRedoService: return this.undoRedoService;\r\n            case sourceCode.k2Designer.services.studio.ProgressBarService: return this.progressBarService;\r\n            case sourceCode.k2Designer.services.studio.SelectionService: return this.selectionService;\r\n            case sourceCode.k2Designer.services.studioItem.ContextProviderService: return this.contextProviderService;\r\n            case sourceCode.k2Designer.services.studio.UserOptionsService: return this.userOptionsService;\r\n            case sourceCode.k2Designer.services.studioItem.workflow.ProcessService: return this.processService;\r\n            case sourceCode.k2Designer.services.angular.DataService: return this.dataService;\r\n            case sourceCode.k2Designer.services.angular.PopupService: return this.popupService;\r\n            case sourceCode.k2Designer.services.studio.ValidationService: return this.validationService;\r\n            case sourceCode.k2Designer.services.studio.ClipboardService: return this.clipboardService;\r\n            case sourceCode.k2Designer.services.studio.RedirectService: return this.redirectService;\r\n            case sourceCode.k2Designer.services.studio.NotificationService: return this.notificationService;\r\n            case sourceCode.k2Designer.services.studio.CanvasService: return this.canvasService;\r\n            case sourceCode.k2Designer.services.studio.ToolboxService: return this.toolboxService;\r\n            case sourceCode.k2Designer.services.studio.ConfigurationService: return this.configService;\r\n            case sourceCode.k2Designer.services.studio.RecentsService: return this.recentsService;\r\n            case sourceCode.k2Designer.services.studio.RichEditPanelService: return this.richEditPanelService;\r\n        }\r\n        return {} as any;\r\n    }\r\n\r\n    get omService(): any {\r\n        return {\r\n            registerEventListener: (ev, cb) => true,\r\n            busyProcessingInstructions: () => false,\r\n            flush: () => { }\r\n        } as any;\r\n    }\r\n\r\n    /**\r\n     * Use this to generate objects in environment service\r\n     *\r\n     * @param ns namespace to generate\r\n     * @param o environment service object name to link\r\n     */\r\n    setup(ns: string, o: string = null): void {\r\n        const parentns = ns.split('.');\r\n        const name = parentns.pop();\r\n        const obj = {};\r\n        obj[name] = o ? this[o] : {};\r\n        this.ensureNamespace(parentns.join('.'), obj);\r\n    }\r\n\r\n    get dragDropService(): sourceCode.k2Designer.services.studio.IDragDropService {\r\n        return {\r\n            disable: () => { },\r\n            enable: () => { },\r\n            setItem: (a, b) => { },\r\n            hasItem: (a): boolean => true,\r\n            peekItem: (a): sourceCode.k2Designer.objectModel.dragDropService.IDragDropData => null,\r\n            getItem: (a): sourceCode.k2Designer.objectModel.dragDropService.IDragDropData => null\r\n        } as sourceCode.k2Designer.services.studio.IDragDropService;\r\n    }\r\n\r\n    private _pluginService = {\r\n        getItemProviderInstances: (a, b): sourceCode.k2Designer.objectModel.core.itemProvider.IInstanceDefinition[] => [],\r\n        toggleState: () => { },\r\n        isRightMostPanel: () => { },\r\n    };\r\n    get pluginService(): sourceCode.k2Designer.services.studio.IPluginService {\r\n        return this._pluginService as any;\r\n    }\r\n\r\n    get toolboxService(): sourceCode.k2Designer.services.studio.IToolboxService {\r\n        return <any>{\r\n            getFvrts: () => { }\r\n        };\r\n    }\r\n\r\n    get itemProviderService(): sourceCode.k2Designer.services.studio.IItemProviderService {\r\n        return <any>{\r\n            getItemCategories: () => [],\r\n            getSubItems: () => []\r\n        };\r\n    }\r\n\r\n    get configService(): sourceCode.k2Designer.services.studio.ConfigurationService {\r\n        return {} as any;\r\n    }\r\n\r\n    get configPanelService(): sourceCode.k2Designer.services.studio.ConfigPanelService {\r\n        return {\r\n            selectConfigTab: () => { },\r\n            show: () => { },\r\n            currentPnl: {\r\n                currentItem: {},\r\n                items: []\r\n            }\r\n        } as any;\r\n    }\r\n\r\n    get recentsService(): IRecentsService {\r\n        return {\r\n            hasContext: () => { },\r\n            registerContext: () => { }\r\n        } as any;\r\n    }\r\n\r\n    get commandService(): any {\r\n        return {} as any;\r\n    }\r\n\r\n    richEditPanelService = {\r\n        setContext: () => { }\r\n    };\r\n\r\n    getResxFile = (fileName: string) => {\r\n        // Call callback to set resources\r\n        if (this.resourceService.onGetResourceFileCompletedCallbacks.length > 0) {\r\n            for (let i = 0; i < this.resourceService.onGetResourceFileCompletedCallbacks.length; i++) {\r\n                if (typeof this.resourceService.onGetResourceFileCompletedCallbacks[i] === 'function') {\r\n                    this.resourceService.onGetResourceFileCompletedCallbacks[i]();\r\n                }\r\n            }\r\n        }\r\n        return fileName;\r\n    };\r\n\r\n    get resourceService(): ILegacyResourceService {\r\n        return {\r\n            getString: (resourceId: string, collectionId?: string) => '',\r\n            onGetResourceFileCompletedCallbacks: [],\r\n            getResxFile: (fileName: string) => this.getResxFile(fileName),\r\n            strings: {},\r\n            resolveTokenResourceString: (resourceStr: string,\r\n                resourceTokens: sourceCode.k2Designer.objectModel.core.model.IModelArray<string>,\r\n                modelObj: sourceCode.k2Designer.objectModel.core.model.IModelObject) => '',\r\n            getFromResx: (a, b) => ''\r\n        } as any;\r\n    }\r\n\r\n    get objectModelService(): IObjectModelService<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process> {\r\n        return {\r\n            getString: (resourceId: string, collectionId?: string) => '',\r\n            onGetResourceFileCompletedCallbacks: [],\r\n            getResxFile: (fileName: string) => this.getResxFile(fileName),\r\n            strings: {},\r\n            getErrorList: () => [],\r\n            listenForSRErrorList: () => { }\r\n        } as any;\r\n    }\r\n\r\n    get ribbonService(): any {\r\n        return {\r\n            listenRibbonTabChanged: () => { }\r\n        } as any;\r\n    }\r\n\r\n    get progressBarService(): any {\r\n        return {\r\n            listenLoadedComplete: () => { },\r\n            incrementGlobalProgressBar: () => { }\r\n        } as any;\r\n    }\r\n\r\n    get undoRedoService(): IUndoRedoService {\r\n        return {\r\n            undoRedoEnabled: true,\r\n            listen: () => { },\r\n            listenStateChanged: () => { },\r\n            addUndoMarker: () => { }\r\n        } as any;\r\n    }\r\n\r\n    get messagingService(): any {\r\n        return {\r\n            registerCallback: () => { },\r\n            completed: () => { }\r\n        } as any;\r\n    }\r\n\r\n    get selectionService(): any {\r\n        return {\r\n            listen: () => { },\r\n            getSelection: () => [],\r\n            hasSelection: () => false\r\n        } as any;\r\n    }\r\n\r\n    get contextProviderService(): any {\r\n        const ctx = {\r\n            getCntx: () => ({} as any)\r\n        };\r\n        return {\r\n            getContextProviderFromType: () => ctx,\r\n            getContextProviderFromModel: () => ctx,\r\n            itemInstance: {}\r\n        } as any;\r\n    }\r\n\r\n    get userOptionsService(): any {\r\n        return {\r\n            userOptions: {\r\n                tips: {}\r\n            },\r\n            setAllTipsValue: () => { },\r\n            setTipValue: () => { }\r\n        } as any;\r\n    }\r\n\r\n    get processService(): any {\r\n        return {\r\n            flush: () => { },\r\n            requestProcessingCompleteNotification: () => { },\r\n            unRegisterObjectModelServiceEventListner: () => { },\r\n            registerObjectModelServiceEventListner: () => { },\r\n            rootId: '',\r\n            getInstructionCount: () => 0,\r\n            allowProcessing: () => false,\r\n            root: {\r\n                nodes: [],\r\n                description: '',\r\n                configuration: {\r\n                    itemReferences: [],\r\n                    processDefinitions: [],\r\n                    dataFields: [],\r\n                    eventPlatformConfiguration: {\r\n                        subscriptions: []\r\n                    }\r\n                },\r\n                findDeepestExisting: () => { },\r\n                findItem: () => null\r\n            },\r\n            enableProcessing: () => { },\r\n            deployProcess: (onCompleted: () => void) => { },\r\n            getErrorList: () => [],\r\n            listenForErrorList: () => { },\r\n            cacheExternalReferences: () => { }\r\n        } as any;\r\n    }\r\n\r\n    get dataService(): IDataService {\r\n        return {\r\n            getOpenRequestCount: () => 0,\r\n            httpGet: () => { },\r\n            getFile: () => { }\r\n        } as any;\r\n    }\r\n\r\n    get validationService(): any {\r\n        return {\r\n            getErrorList: () => [],\r\n            listenForErrorList: () => { },\r\n            removeErrorsFrom: () => { },\r\n            reevaluateErrors: () => { }\r\n        } as any;\r\n    }\r\n\r\n    get clipboardService(): any {\r\n        return {\r\n            canCopy: () => true,\r\n            canPaste: () => true,\r\n            canCut: () => true,\r\n            clipboardEnabled: true,\r\n            hasData: () => true,\r\n            setClipboard: (fields, text, event) => { },\r\n            setCurrentContext: (obj) => { },\r\n            getSystemClipboard: () => { },\r\n            getClipboard: () => { }\r\n        } as any;\r\n    }\r\n\r\n    get redirectService(): any {\r\n        return {\r\n            processRedirect: () => { },\r\n            exit: (categoryId?: number, close?: boolean, params?: {}) => { }\r\n        } as any;\r\n    }\r\n\r\n    get notificationService(): any {\r\n        return {\r\n            toastr: (title: string, text: string, type: any,\r\n                delay?: number, toastrOptions?: any[], existingToastr?: any): any => ({\r\n                remove: () => { }\r\n            } as any)\r\n        } as any;\r\n    }\r\n\r\n    get canvasService(): any {\r\n        return {\r\n            selectStepByReference: () => { }\r\n        } as any;\r\n    }\r\n\r\n    get helpService(): IHelpService {\r\n        return {\r\n            getHelpUrl: (key: string) => 'https://help.k2.com'\r\n        } as IHelpService;\r\n    }\r\n\r\n    get popupService(): IPopupService {\r\n        return new MockPopupService() as IPopupService;\r\n    }\r\n\r\n    get workflowFullname(): string {\r\n        return 'WorkflowFullName';\r\n    }\r\n\r\n    get smartFieldPluginService(): ISmartFieldPluginService {\r\n        return {} as any;\r\n    }\r\n\r\n    get smartFieldComposerService(): ISmartFieldComposerService {\r\n        return {} as any;\r\n    }\r\n\r\n    public notifyOnReady(): void {\r\n    }\r\n\r\n    get activeStudioItem(): any {\r\n        return {\r\n            getService: this.getService.bind(this),\r\n            studioItemManagementService: {\r\n                itemInstanceConfiguration: {}\r\n            },\r\n            pluginStates: {\r\n                configurationPanel: 'expanded',\r\n                rulesDesigner: 'expanded',\r\n                emailBody: 'expanded',\r\n                recipientPanel: 'expanded',\r\n                filterPanel: 'expanded',\r\n                contextBrowser: 'expanded'\r\n            }\r\n        };\r\n    }\r\n\r\n    public get query(): any {\r\n        return {\r\n            hosted: true,\r\n            id: 0\r\n        };\r\n    }\r\n\r\n    get currentEnvironment(): any {\r\n        return {\r\n            hostId: 'STANDALONE',\r\n            defaultConfig: {\r\n                externalReferenceService: {\r\n                    enable: true\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    public getGlobalAttributeValue(attr: string): boolean {\r\n        return false;\r\n    }\r\n\r\n    public autoDiscoverResult: any = {\r\n        sfDesigner: {\r\n            IsDefault: true,\r\n            Name: 'Name1',\r\n            Type: 'Type1',\r\n            Value: 'Value1',\r\n        },\r\n        sfRuntime: {\r\n            IsDefault: true,\r\n            Name: 'Name2',\r\n            Type: 'Type2',\r\n            Value: 'Value2',\r\n        },\r\n        webService: {\r\n            IsDefault: true,\r\n            Name: 'Name3',\r\n            Type: 'Type3',\r\n            Value: 'Value3',\r\n        }\r\n    };\r\n\r\n    public appSettings: any = {};\r\n\r\n    public workflowPrefixedCategory = 'prefixCat';\r\n\r\n    public listenActiveStudioItemPluginStateChanged(callback: sourceCode.k2Designer.services.core.IPluginStateChangedCallback): sourceCode.k2Designer.services.core.IPluginStateChangedCallback {\r\n        return callback;\r\n    }\r\n\r\n    /**\r\n     * This ensures the namespace and registers it for disposal\r\n     *\r\n     * @param ns\r\n     * @param config\r\n     */\r\n    private ensureNamespace(ns: string, config: any): any {\r\n        Mocks.ensureNamespace(ns, config);\r\n        this.registeredNamespaces.push(ns);\r\n    }\r\n\r\n    /**\r\n     * This will dispose of any namespaces generated\r\n     * By default it will destroy all 'sourceCode' namespaces\r\n     * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Memory_Management#garbage_collection\r\n     *\r\n     * @param whole dispose all 'sourceCode' namespaces\r\n     */\r\n    public dispose(whole: boolean = true): void {\r\n        // Dispose of namespaces\r\n        if (whole) {\r\n            Mocks.destroyNamespace('sourceCode', true);\r\n        } else {\r\n            this.registeredNamespaces.forEach((ns) => {\r\n                Mocks.destroyNamespace(ns, true);\r\n            });\r\n        }\r\n        MockEnvironmentService.ensureBaseNameSpaces();\r\n    }\r\n\r\n    public static ensureBaseNameSpaces() {\r\n        //Just ensure environment service definition stays\r\n        Mocks.ensureNamespace('sourceCode.k2Designer.services.core', null);\r\n    }\r\n\r\n    /**\r\n     * Retrieve EventNotifier Service\r\n     */\r\n    public retrieveEventNotifierService(): Promise<EventNotifierService> {\r\n        return new Promise<EventNotifierService>((resolve) => {\r\n            resolve(new EventNotifierService());\r\n        });\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { IFilterPanelService } from '../../types/services/filter-panel/i-filter-panel';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockFilterPanelService implements IFilterPanelService {\r\n    closePanel(smartField: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField): void {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    getContext(): sourceCode.k2Designer.services.studio.IFilterPanelContext {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    isPanelActive(): boolean {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    canConfigureFilter: boolean;\r\n    canConfigureProperties: boolean;\r\n    closeEmptyAssociatedPanel(): void {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    isFilterPanelOriginatedFrom(smartField: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField): boolean {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    setContext(context: sourceCode.k2Designer.services.studio.IFilterPanelContext): void {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    state: string;\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { IHelpService } from '../../types/services/help/i-help-service';\r\n\r\n/**\r\n * NOTE: This is a service class with stub methods currently only used in the dev environment\r\n * (implementation of the interface is determined by the factory),\r\n * but the stubs will be replaced with true implementation when services are ported.\r\n * */\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockHelpService implements IHelpService {\r\n\r\n    constructor() { }\r\n    getHelpUrl(key: string): string {\r\n        return 'https://help.k2.com';\r\n    }\r\n}\r\n","import { IItemProviderConstructor, IItemProviderService } from '../../types/services/item-provider/i-item-provider-service';\r\n\r\nexport class MockItemProviderService implements IItemProviderService {\r\n    getRootCategoriesForGroup(itemProvider: string | IItemProviderConstructor, groupOrder: number): sourceCode.k2Designer.objectModel.core.itemProvider.IItemBase<any, any>[] { return [];}\r\n    getItemProviderByName(itemProviderName: string): sourceCode.k2Designer.objectModel.core.itemProvider.IItemProvider<any> { return {} as any;}\r\n    getRootCategories(itemProvider: IItemProviderConstructor): sourceCode.k2Designer.objectModel.core.itemProvider.IItemBase<any, any>[] { return []; };\r\n    getItemCategories(item: sourceCode.k2Designer.objectModel.core.itemProvider.IItemBase<any, any>): sourceCode.k2Designer.objectModel.core.itemProvider.IItemBase<any, any>[] { return []; };\r\n    getSubItems(item: sourceCode.k2Designer.objectModel.core.itemProvider.IItemBase<any, any>, filter?: string): sourceCode.k2Designer.objectModel.core.itemProvider.IItemBase<any, any>[] { return []; };\r\n    registerItemProvider(itemProvider: sourceCode.k2Designer.objectModel.core.itemProvider.ItemProvider<any>): void { };\r\n    getItemProvider(itemProvider: IItemProviderConstructor): sourceCode.k2Designer.objectModel.core.itemProvider.IItemProvider<any> {\r\n        return {} as any;\r\n    };\r\n    id = '';\r\n    listenReady(callback: sourceCode.k2Designer.services.core.IServiceReadyCallback): void { };\r\n    notifyReady(): void { };\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ToastrTypes } from '../../app/shared/enums/model/toastr-types';\r\nimport { INotificationService } from '../../types/services/notification/i-notification.service';\r\n\r\n/**\r\n * NOTE: This is a service class with stub methods currently only used in the dev environment\r\n * (implementation of the interface is determined by the factory),\r\n * but the stubs will be replaced with true implementation when services are ported.\r\n * */\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockNotificationService implements INotificationService {\r\n\r\n    constructor() { }\r\n    toastrTypes: ToastrTypes = ToastrTypes.success;\r\n    toastr = (title: any, text: any, type: any, delay?: any, toastrOptions?: any, existingToastr?: any): any => ({\r\n        remove: () => { }\r\n    });\r\n    notify = (type: sourceCode.k2Designer.objectModel.notificationService.notificationTypes, title: string, msg: string, id: string, log?: boolean): void => { };\r\n    log= (type: sourceCode.k2Designer.objectModel.notificationService.LogTypes, msg: string, stck?: string): void => { };\r\n    suppress = (id: string): void => { };\r\n    express = (id: string): void => { };\r\n    id = '';\r\n    listenReady = (callback: sourceCode.k2Designer.services.core.IServiceReadyCallback): void => { };\r\n    notifyReady = (): void => { };\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { IObjectModelService } from '../../types/services/object-model/i-object-model-service';\r\n\r\n/**\r\n * NOTE: This is a service class with stub methods currently only used in the dev environment\r\n * (implementation of the interface is determined by the factory),\r\n * but the stubs will be replaced with true implementation when services are ported.\r\n * */\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockObjectModelService implements IObjectModelService<sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process> {\r\n\r\n    constructor() { }\r\n    isInitialized(): boolean {\r\n        return true;\r\n    }\r\n    unRegisterEventListener(event: any, subscriberId: any): void { }\r\n    enableProcessing(): void { }\r\n    requestProcessingCompleteNotification(stopProcessing: boolean, cleanup: boolean, onEventRaisedCallback: () => void): void { }\r\n    allowProcessing(): boolean { return true; }\r\n    registerEventListener(event: any, subscriber: any): void { }\r\n    busyProcessingInstructions(): boolean { return false; }\r\n    flush(callbackSuccess?: () => void, callbackFail?: () => void, closeProject?: boolean, isAutoFlush?: boolean): void { }\r\n    getInstructionCount(): number { return 0; }\r\n    listenForSRErrorList(cb: () => void, errorSeverity?: sourceCode.k2Designer.objectModel.core.model.ErrorSeverity): () => void { return cb; }\r\n    getErrorList(): sourceCode.k2Designer.objectModel.core.model.IErrorInformation[] { return []; }\r\n    root: sourceCode.k2Designer.objectModel.workflow.process.k2Process.IK2Process;\r\n    beginCloningOperation: () => void;\r\n    finishCloningOperation: () => void;\r\n    isCloning: boolean;\r\n    itemInstance: sourceCode.k2Designer.objectModel.environment.IItemInstance;\r\n    id: string;\r\n    listenReady: (callback: sourceCode.k2Designer.services.core.IServiceReadyCallback) => void;\r\n    notifyReady: () => void;\r\n    removeTrackedItem: (definitionReference: string, useReference: string) => void;\r\n    rootId: string;\r\n}\r\n","import { IPluginService } from '../../types/services/plugin/i-plugin-service';\r\n\r\nexport class MockPluginService implements IPluginService {\r\n    getRightMostPanel(): sourceCode.k2Designer.objectModel.plugin.IInstance {\r\n        return {} as any;\r\n    }\r\n    getPlugin(name: string): sourceCode.k2Designer.objectModel.plugin.IInstance {\r\n        return {} as any;\r\n    }\r\n    toggleCollapsed(pluginName: string): void { }\r\n    getItemProviderInstances(pluginName: string, context: string): sourceCode.k2Designer.objectModel.core.itemProvider.IInstanceDefinition[] { return []; }\r\n    toggleState(pluginName: string): void { }\r\n    id = '';\r\n    listenReady(callback: sourceCode.k2Designer.services.core.IServiceReadyCallback): void { }\r\n    notifyReady(): void { }\r\n    isRightMostPanel(s): boolean { return true; }\r\n    hasAssociatePanels(): boolean { return true; }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { IPopupConfiguration } from '../../types/models/popup/i-popup-configuration';\r\nimport { IPopupService } from '../../types/services/popup/i-popup-service';\r\nimport { IContextWizardPopupConfiguration } from '../../types/uiComponents/pluginWizards/i-context-wizard-popup-configuration';\r\nimport { IStateChangedListener } from '../../types/uiComponents/pluginWizards/IStateChangedListener';\r\n\r\n/**\r\n * NOTE: This is a service class with stub methods currently only used in the dev environment\r\n * (implementation of the interface is determined by the factory),\r\n * but the stubs will be replaced with true implementation when services are ported.\r\n * */\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockPopupService implements IPopupService {\r\n\r\n    constructor() { }\r\n    showContextWizardPopup(config: IContextWizardPopupConfiguration) {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n\r\n    getInitialHeight(): number { return 0; };\r\n\r\n    hideContextPopup(key: string, result: string) { return; };\r\n\r\n    show(config: IPopupConfiguration): void { }\r\n\r\n    hide(key: string, result: string): void {\r\n        // to implement hide;\r\n    }\r\n\r\n    popups: IPopupConfiguration[];\r\n\r\n    listen: (callback: IStateChangedListener) => void;\r\n\r\n    showDeleteProcessDialog = () => {\r\n\r\n    };\r\n\r\n}\r\n","import { IProgressBarService } from '../../types/services/progress-bar/i-progress-bar-service';\r\n\r\nexport class MockProgressBarService implements IProgressBarService {\r\n    listenLoadedComplete(callback: Function) { };\r\n    incrementGlobalProgressBar(): void { };\r\n    getGlobalProgress(): number { return 100; };\r\n    startProgressBarInc(steps: number): void { };\r\n    updateGlobalProgressBar(percentage: number): void { };\r\n    loadingComplete(): boolean { return true; };\r\n    isLoaderLoaded?: boolean = true;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { IRecentsService } from 'src/types/services/recents/i-recents-service';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockRecentsService implements IRecentsService {\r\n\r\n    public static COMMONCONTEXTS = {\r\n        RecentlySelectedUsers: 'RecentlySelectedUsers',\r\n        RecentlyUsedSmartFields: 'RecentlyUsedSmartFields'\r\n    };\r\n\r\n    constructor() { }\r\n    registerContext = (context: string, maximumItems: number) => void (0);\r\n    addItem = <T>(context: string, item: T, keyProperty?: string) => void (0);\r\n    getItems = <T>(context: string, limit?: number) => JSON.parse(`[{ \r\n        \"email\": \"\",\r\n        \"systemName\": \"Package and Deployment\",\r\n        \"label\": \"\",\r\n        \"displayName\": \"Package and Deployment\",\r\n        \"description\": \"Built in K2 system role for Package and Deployment\",\r\n        \"type\": 8,\r\n        \"items\": [],\r\n        \"$$hashKey\": \"object:1207\"\r\n    }]`);\r\n    hasContext = (context: string) => false;\r\n    itemCount = (context: string) => 1;\r\n}\r\n","import { IRedirectService } from '../../types/services/redirect/i-redirect-service';\r\n\r\nexport class MockRedirectService implements IRedirectService {\r\n    id = '';\r\n    listenReady(callback: sourceCode.k2Designer.services.core.IServiceReadyCallback): void { };\r\n    notifyReady(): void { };\r\n    exit(categoryId?: number, close?: boolean, params?: {}): void { };\r\n}\r\n","import { IRibbonService, IRibbonTabChangedCallback } from '../../types/services/ribbon-bar/i-ribbon-bar-service';\r\n\r\nexport class MockRibbonBarService implements IRibbonService {\r\n    removeRibbonTabChanged(callback: IRibbonTabChangedCallback): void { }\r\n    ribbonTabChanged(): void { };\r\n    setActive(): void { };\r\n    id = '';\r\n    listenReady(callback: sourceCode.k2Designer.services.core.IServiceReadyCallback): void { };;\r\n    notifyReady(): void { };\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport IVotingRuleExpressionConfiguration from 'src/types/models/rules/i-voting-rule-expression-configuration';\r\nimport { IContextChangingCallback } from 'src/types/services/rules/i-context-changing-callback';\r\nimport { IRulePluginService } from 'src/types/services/rules/i-rule-plugin.service';\r\nimport { IItemConfiguration } from '../../types/config/IItemConfiguration';\r\nimport { IConfiguredStatement } from '../../types/models/rules/i-configured-statement';\r\nimport { IRuleDesignerItem } from '../../types/models/rules/i-rule-designer-item';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockRulePluginService implements IRulePluginService {\r\n    private _contextRuleHandler: sourceCode.k2Designer.objectModel.rulePlugins.rules.Rule;\r\n    private _rules: any;\r\n    private _contextRuleModel: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredRule;\r\n\r\n    /**\r\n     * TODO: Mostly populating mock data\r\n     */\r\n    constructor() {\r\n        this._rules = {};\r\n        this._loadRuleHandlers();\r\n        this._contextRuleModel = {\r\n            statements: [],\r\n            getRoot: () => ({\r\n                findItem: () => { }\r\n            } as any),\r\n            getParentModel: () => ({} as any)\r\n        };\r\n    }\r\n\r\n    setCustomRuleStatements(id: string, statements: sourceCode.k2Designer.objectModel.core.model.IModelArray<IConfiguredStatement>): void {\r\n\r\n    }\r\n\r\n    getCustomRuleStatementsErrors(id: string): sourceCode.k2Designer.objectModel.core.model.IErrorInformation[] {\r\n        return [];\r\n    }\r\n\r\n    renderCanvas(forceRender: boolean = false): void {}\r\n    renderEmptyDesigner(ruleName: string, isNewTab?: boolean): void {}\r\n    getCustomRuleStatements(id: string): sourceCode.k2Designer.objectModel.core.model.IModelArray<IConfiguredStatement> {\r\n        return [];\r\n    }\r\n    createDefaultRule(ruleName: string): sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredRule {\r\n        return {\r\n            statements: []\r\n        };\r\n    }\r\n    createStatement(statementName: string): sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredStatement {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    isConfiguredGroupExpression(ruleObject: any): boolean {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    isConfiguredOperator(ruleObject: any): boolean {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    isConfiguredStatement(ruleObject: any): boolean {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    getToolboxItems(): sourceCode.k2Designer.objectModel.rulePlugins.IItemConfiguration[] {\r\n        return [];\r\n    }\r\n    executeDroppedCallbacks(): void {\r\n\r\n    }\r\n\r\n    isStatementPlugin(pluginObject: any): boolean {\r\n        return false;\r\n    }\r\n\r\n    isExpressionPlugin(pluginObject: any): boolean {\r\n        return false;\r\n    }\r\n\r\n    getRuleDesignerItemScope(model: any): any {\r\n        return {};\r\n    }\r\n\r\n    get contextModel(): sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredRule {\r\n        return this._contextRuleModel;\r\n    }\r\n\r\n    get isNewTab(): boolean {\r\n        return true;\r\n    }\r\n\r\n    addRuleDesignerItemScope(ruleDesignerItemScope: IRuleDesignerItem): void { }\r\n    removeRuleDesignerItemScope(ruleDesignerItemScope: IRuleDesignerItem): void { }\r\n\r\n    addRuleDesignerItem(ruleDesignerItem: IRuleDesignerItem): void { }\r\n\r\n    public isConfiguredExpression(ruleObject: any): boolean {\r\n        return true;\r\n    }\r\n\r\n    setDesignerContext(ruleName: string, configuredRule: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredRule, onContextChangedCallback: IContextChangingCallback): void {\r\n        // TODO: - Original method calls the _contextChangingCallback.\r\n        this._contextRuleHandler = this._rules[ruleName];\r\n        this._contextRuleModel = configuredRule;\r\n    }\r\n\r\n    get contextHandler(): sourceCode.k2Designer.objectModel.rulePlugins.rules.Rule {\r\n        return this._contextRuleHandler;\r\n    }\r\n\r\n    /**\r\n     * TODO: STUB METHOD -\r\n     */\r\n    private _loadRuleHandlers() {\r\n        this._rules.ruleDesignerHarness = {\r\n            configuration: {\r\n                expressions: ['TaskExpression']\r\n            }\r\n        };\r\n        this._rules.MockRule = {\r\n            name: 'MockRule'\r\n        };\r\n    }\r\n\r\n    public createOperator(operatorName: string): sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression {\r\n        // TODO: temp implementation. See WFD.\r\n        if (operatorName === 'GroupBooleanOperator') {\r\n            return {\r\n                directive: 'k2-group-boolean-operator-expression', // This whole implementation seems wrong...\r\n                expressionOperator: 2\r\n            } as sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression;\r\n        } else {\r\n            throw `operator {operatorName} does not exist`;\r\n        }\r\n    }\r\n\r\n    public createExpression(expressionName: string): sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression {\r\n        // TODO: temp implementation. See WFD.\r\n\r\n        switch (expressionName) {\r\n            case 'SimpleExpression':\r\n                return {\r\n                    directive: 'k2-simple-expression',\r\n                    leftExpression: this.createExpression('EndpointExpression'),\r\n                    rightExpression: this.createExpression('EndpointExpression'),\r\n                    logicalOperator: 'equals'\r\n                } as sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredSimpleExpression;\r\n            case 'TaskExpression':\r\n                return {\r\n                    directive: 'k2-task-expression',\r\n                    outcomeReference: '',\r\n                    activityReference: '',\r\n                } as sourceCode.k2Designer.objectModel.workflow.configuredRules.IConfiguredTaskExpression;\r\n            case 'EndpointExpression':\r\n                return {\r\n                    directive: 'k2-endpoint'\r\n                };  // need to get type?\r\n            case 'FilterExpression':\r\n                return {\r\n                    directive: 'k2-filter-expression',\r\n                    instanceOf: (implementor: sourceCode.k2Designer.objectModel.core.model.IImplementorFunction): boolean => false\r\n                };\r\n            default:\r\n                throw `expression ${expressionName} does not exist`;\r\n        }\r\n    }\r\n\r\n    public getExpressionConfiguration(expression: sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredExpression): any {\r\n        return this._expressionConfigurations[expression.directive];\r\n    }\r\n\r\n    private _expressionConfigurations = {\r\n        'k2-task-expression': {\r\n            name: 'TaskExpression',\r\n            objectModel: 'sourceCode.k2Designer.objectModel.workflow.configuredRules.IConfiguredTaskExpression',\r\n            handlerClass: 'sourceCode.k2Designer.objectModel.rulePlugins.expressions.TaskExpression',\r\n            directive: 'k2-task-expression',\r\n            icon: 'ic-taskcondition',\r\n            titleToken: 'ruledesigner_general_taskCondition',\r\n            operators: [\r\n                {\r\n                    name: 'equals',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-equals',\r\n                    titleToken: 'ruledesigner_logical_expression_and_operator_equal'\r\n                },\r\n                {\r\n                    name: 'notEqual',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-notequal',\r\n                    titleToken: 'ruledesigner_logical_expression_and_operator_notEqual'\r\n                }\r\n            ],\r\n            commands: [\r\n                {\r\n                    name: 'delete',\r\n                    icon: 'icon icon-set-steps icon-size16 ic-delete',\r\n                    titleToken: 'ruledesigner_expression_and_operator_delete'\r\n                }\r\n            ]\r\n        },\r\n        'k2-filter-expression': {\r\n            name: 'FilterExpression',\r\n            objectModel: 'sourceCode.k2Designer.objectModel.core.configuredRules.IConfiguredFilterExpression',\r\n            handlerClass: 'sourceCode.k2Designer.objectModel.rulePlugins.expressions.FilterExpression',\r\n            directive: 'k2-filter-expression',\r\n            icon: 'ic-condition',\r\n            titleToken: 'ruledesigner_general_condition',\r\n            operators: [\r\n                {\r\n                    name: 'equals',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-equals',\r\n                    titleToken: 'ruledesigner_logical_expression_and_operator_equal'\r\n                },\r\n                {\r\n                    name: 'notEqual',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-notequal',\r\n                    titleToken: 'ruledesigner_logical_expression_and_operator_notEqual'\r\n                },\r\n                {\r\n                    name: 'greaterThan',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-greaterthan',\r\n                    titleToken: 'ruledesigner_logical_expression_and_operator_greaterThan'\r\n                },\r\n                {\r\n                    name: 'lessThan',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-lessthan',\r\n                    titleToken: 'ruledesigner_logical_expression_and_operator_lessThan'\r\n                },\r\n                {\r\n                    name: 'startsWith',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-startswith',\r\n                    titleToken: 'ruledesigner_expression_and_operator_startsWith'\r\n                },\r\n                {\r\n                    name: 'endsWith',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-endswith',\r\n                    titleToken: 'ruledesigner_expression_and_operator_endsWith'\r\n                },\r\n                {\r\n                    name: 'contains',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-contains',\r\n                    titleToken: 'ruledesigner_expression_and_operator_contains'\r\n                }\r\n            ],\r\n            commands: [\r\n                {\r\n                    name: 'delete',\r\n                    icon: 'icon icon-set-steps icon-size16 ic-delete',\r\n                    titleToken: 'ruledesigner_expression_and_operator_delete'\r\n                }\r\n            ]\r\n        },\r\n        'k2-merge-expression': {\r\n            name: 'MergeExpression',\r\n            objectModel: 'sourceCode.k2Designer.objectModel.workflow.configuredRules.IConfiguredMergeExpression',\r\n            handlerClass: 'sourceCode.k2Designer.objectModel.rulePlugins.expressions.MergeExpression',\r\n            directive: 'k2-merge-expression',\r\n            icon: 'ic-mergecondition',\r\n            titleToken: 'ruledesigner_general_mergeCondition',\r\n            paths: [\r\n                {\r\n                    name: 'allPaths',\r\n                    icon: 'icon icon-set-picker icon-size24 ic-alloutcomedecisions',\r\n                    titleToken: 'ruledesigner_merge_expression_allPaths'\r\n                }\r\n            ],\r\n            mergeStates: [\r\n                {\r\n                    name: 'notStarted',\r\n                    titleToken: 'ruledesigner_merge_expression_notStarted'\r\n                },\r\n                {\r\n                    name: 'started',\r\n                    titleToken: 'ruledesigner_merge_expression_started'\r\n                },\r\n                {\r\n                    name: 'inProgress',\r\n                    titleToken: 'ruledesigner_merge_expression_inProgress'\r\n                },\r\n                {\r\n                    name: 'completed',\r\n                    titleToken: 'ruledesigner_merge_expression_completed'\r\n                }\r\n            ],\r\n            commands: [\r\n                {\r\n                    name: 'delete',\r\n                    icon: 'icon icon-set-steps icon-size16 ic-delete',\r\n                    titleToken: 'ruledesigner_expression_and_operator_delete'\r\n                }\r\n            ]\r\n        },\r\n        'k2-this-response-expression': {\r\n            name: 'ThisResponseExpression',\r\n            objectModel: 'sourceCode.k2Designer.objectModel.workflow.configuredRules.IConfiguredThisResponseExpression',\r\n            handlerClass: 'sourceCode.k2Designer.objectModel.rulePlugins.expressions.ThisResponseExpression',\r\n            directive: 'k2-this-response-expression',\r\n            icon: 'ic-thisresponsecondition',\r\n            titleToken: 'ruledesigner_general_responsesCondition',\r\n            operators: [\r\n                {\r\n                    name: 'equals',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-equals',\r\n                    titleToken: 'ruledesigner_logical_expression_and_operator_equal'\r\n                },\r\n                {\r\n                    name: 'notEqual',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-notequal',\r\n                    titleToken: 'ruledesigner_logical_expression_and_operator_notEqual'\r\n                }\r\n            ],\r\n            specialOperators: [\r\n                {\r\n                    name: 'equals',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-equals',\r\n                    titleToken: 'ruledesigner_logical_expression_and_operator_equal'\r\n                },\r\n                {\r\n                    name: 'greaterThan',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-greaterthan',\r\n                    titleToken: 'ruledesigner_logical_expression_and_operator_greaterThan'\r\n                },\r\n                {\r\n                    name: 'lessThan',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-lessthan',\r\n                    titleToken: 'ruledesigner_logical_expression_and_operator_lessThan'\r\n                },\r\n                {\r\n                    name: 'greaterThanEqual',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-greaterthanequal',\r\n                    titleToken: 'ruledesigner_logical_expression_and_operator_greaterThanEqual'\r\n                },\r\n                {\r\n                    name: 'lessThanEqual',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-lessthanequal',\r\n                    titleToken: 'ruledesigner_logical_expression_and_operator_lessThanEqual'\r\n                }\r\n            ],\r\n            leftOperandType: [\r\n                {\r\n                    name: 'noResponse',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-noresponses',\r\n                    titleToken: 'ruledesigner_response_expression_noResponse'\r\n                },\r\n                {\r\n                    name: 'everyResponse',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-everyresponse',\r\n                    titleToken: 'ruledesigner_response_expression_everyResponse'\r\n                },\r\n                {\r\n                    name: 'numberOfResponses',\r\n                    icon: 'icon icon-set-conditionsdropdown icon-size16 ic-numberofresponses',\r\n                    titleToken: 'ruledesigner_response_expression_numberOfResponses'\r\n                }\r\n            ],\r\n            commands: [\r\n                {\r\n                    name: 'delete',\r\n                    icon: 'icon icon-set-steps icon-size16 ic-delete',\r\n                    titleToken: 'ruledesigner_expression_and_operator_delete'\r\n                }\r\n            ]\r\n        }\r\n    };\r\n\r\n    getStatementConfiguration(): IItemConfiguration {\r\n        return {\r\n            qitConfig: {\r\n                expressions: {\r\n                    left: { name: '', icon: ''},\r\n                    right: { name: '', icon: ''}\r\n                },\r\n                statements: {\r\n                    left: { name: '', icon: ''},\r\n                    right: { name: '', icon: ''}\r\n                }\r\n            }\r\n        } as any;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ISelectionChangedCallback } from '../../types/services/selection/i-selection-changed-callback';\r\nimport { ISelectionService } from '../../types/services/selection/i-selection-service';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockSelectionService implements ISelectionService {\r\n\r\n    constructor() { }\r\n    setSelection = <T>(selection: T[], context?: string) => void (0);\r\n\r\n    getSelection = <T>(context?: string) => [];\r\n\r\n    hasSelection = (context?: string) => false;\r\n\r\n    listen = <T>(callback: ISelectionChangedCallback<T>, context?: string) => void (0);\r\n\r\n    isSelected = <T>(item: T, context?: string) => false;\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n/**\r\n * NOTE: This is a service class with stub methods currently only used in the dev environment\r\n * (implementation of the interface is determined by the factory),\r\n * but the stubs will be replaced with true implementation when services are ported.\r\n * */\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockSmartFieldComposerService implements ISmartFieldComposerService {\r\n    constructor() { }\r\n    showComposer: (container: sourceCode.k2Designer.objectModel.smartFieldComposer.IComposerContainer, item: sourceCode.k2Designer.objectModel.smartFieldComposer.IComposerItem, pluginConfig: sourceCode.k2Designer.objectModel.smartFieldPlugins.ISmartFieldPluginConfig, data: sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField) => void;\r\n    closeAll: () => number;\r\n    reBind: (smartfield: any, textbox: any) => boolean;\r\n    addActiveComposer: (composer: sourceCode.k2Designer.directives.k2SmartFieldComposer.ISmartFieldComposer) => boolean;\r\n    removeActiveComposer: (composer: sourceCode.k2Designer.directives.k2SmartFieldComposer.ISmartFieldComposer) => boolean;\r\n    getActiveComposers: () => sourceCode.k2Designer.directives.k2SmartFieldComposer.ISmartFieldComposer[];\r\n    updateArrowPositionFor: (textbox: any) => void;\r\n    addOn: (addOnObject: sourceCode.k2Designer.directives.k2SmartFieldComposer.ISmartFieldComposerAddOn) => void;\r\n    removeAddOn: (addOnObject: sourceCode.k2Designer.directives.k2SmartFieldComposer.ISmartFieldComposerAddOn) => void;\r\n    notifyAddonOnOpen: (linkTo: string, data?: any) => void;\r\n    notifyAddonOnClose: (linkTo: string, data?: any) => void;\r\n    closeForContainer(container: sourceCode.k2Designer.objectModel.smartFieldComposer.IComposerContainer, animate: boolean) { }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n/**\r\n * NOTE: This is a service class with stub methods currently only used in the dev environment\r\n * (implementation of the interface is determined by the factory),\r\n * but the stubs will be replaced with true implementation when services are ported.\r\n * */\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockSmartFieldPluginService implements ISmartFieldPluginService {\r\n    constructor() { }\r\n\r\n    getSmartFieldPlugin(componentId: number): sourceCode.k2Designer.objectModel.smartFieldPlugins.ISmartFieldPlugin {\r\n        return {} as any;\r\n    }\r\n\r\n    getConfiguredItem(data: sourceCode.k2Designer.objectModel.core.itemProvider.IItem): sourceCode.k2Designer.objectModel.core.configuredSmartFields.IConfiguredSmartField {\r\n        return {} as any;\r\n    }\r\n}\r\n","import { ICallback, IRefreshCallback, IShowHideCallback, IToolBoxService } from '../../types/services/tool-box/i-toolbox-service';\r\n\r\nexport class MockToolBoxService implements IToolBoxService {\r\n    ensureRecentsDefinition(items: sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxRecentItem[]): void {}\r\n    checkIfFavouritesContains(data: sourceCode.k2Designer.objectModel.core.itemProvider.IItem): boolean { return true;}\r\n    addFavouriteItem(idx: number, data: sourceCode.k2Designer.objectModel.core.itemProvider.IItem): void {}\r\n    resetToDefaults(callback: IRefreshCallback): void {}\r\n    removefvrt(data: sourceCode.k2Designer.objectModel.dragDropService.IDragDropData): void { }\r\n    getFvrts(): sourceCode.k2Designer.objectModel.workflow.itemProvider.IToolboxFavoriteItem[] { return [];}\r\n    favouritesEditableState = true;\r\n    removeFavouriteItem(data: sourceCode.k2Designer.objectModel.core.itemProvider.IItem): void {}\r\n    addFvrt(idx: number, data: sourceCode.k2Designer.objectModel.dragDropService.IDragDropData): void {}\r\n    show(): void { };\r\n    hide(): void { };\r\n    listenShowHide(callback: IShowHideCallback): void { };\r\n    onLoaded(callback: ICallback): void { };\r\n    loaded(): void { };\r\n    id = '';\r\n    listenReady(callback: sourceCode.k2Designer.services.core.IServiceReadyCallback): void { };\r\n    notifyReady(): void { };\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockUndoRedoService implements IUndoRedoService {\r\n    constructor() { }\r\n    enabledAndBeginUndoGroupWithMarkerAndFinish(title: string): IComplexUndoRedoTransaction {\r\n        return {} as any;\r\n    }\r\n    undoRedoEnabled = true;\r\n    registerStudioItem(studioItem: sourceCode.k2Designer.objectModel.environment.ItemInstance): void { };\r\n    undo(): boolean { return true; };\r\n    redo(): boolean { return true; };\r\n    getUndoRedoStack(): sourceCode.k2Designer.objectModel.undoRedoService.IUndoRedoStack { return {} as any; };\r\n    canUndo(): boolean { return true; };\r\n    canRedo(): boolean { return true; };\r\n    disable(): void { };\r\n    enable(): void { };\r\n    isEnabled(): boolean { return true; };\r\n    beginUndoGroup(title: string): void { };\r\n    finishUndoGroup(): void { };\r\n    cancelUndoGroup(): void { };\r\n    listen(callback: sourceCode.k2Designer.objectModel.undoRedoService.IUndoRedoOperationCallback): void { };\r\n    listenStateChanged(callback: sourceCode.k2Designer.objectModel.undoRedoService.IUndoRedoStateChangedCallback): void { };\r\n    addCustomUndoEvent(callback: sourceCode.k2Designer.services.studio.ICustomUndoEventCallback, params: any, title?: string): void { };\r\n    addCustomObjectUndoEvent: (object: any, propertyNames: string[], title?: string) => boolean;\r\n    forceDisable(): void { };\r\n    forceDisableAsync(id: string): string { return ''; };\r\n    resetForceDisable(): void { };\r\n    forceDisableWhile(executingFn: Function, shouldDisable: boolean, title?: string): void { };\r\n    forceDisableWhilePromise(when: JQueryPromise<any>, then: Function, shouldDisable: boolean, title?: string): void { };\r\n    resetForceDisableAsync(uniqueId: string): void { };\r\n    shouldKeepDisabledState(): boolean { return true; };\r\n    undoRedoSafeSetTimeout(fn: Function, timeout?: number): void { };\r\n    onUndoingRedoing(callback: sourceCode.k2Designer.objectModel.undoRedoService.IUndoingRedoingCallback): void { };\r\n    addUndoInfo(title: string): void { };\r\n\r\n    /**\r\n     * Places a marker in the undo stack that indicates a position in the undo stack where a continuous\r\n     * undo operation will stop\r\n     */\r\n    addUndoMarker(title?: string): void {\r\n        console.log('adding undo marker - ', title);\r\n    }\r\n}\r\n","import { IUserOptions } from '../../types/services/user-options/i-user-options-service';\r\n\r\nexport class MockUserOptionsService implements IUserOptions {\r\n    setAllTipsValue(): void {}\r\n    changeCanvasSelectionInverted(): void {}\r\n    setTipValue(tipType: sourceCode.k2Designer.objectModel.workflow.itemProvider.UserOptionsTipTypes, isChecked: boolean): void {}\r\n    userOptions: IUserOptions = {\r\n        tips: {},\r\n        canvasSelectionInverted: false,\r\n        userOptions: {} as any,\r\n        setTipValue: () => { },\r\n        setAllTipsValue: () => { },\r\n        changeCanvasSelectionInverted: () => { }\r\n    };\r\n    tips = {};\r\n    canvasSelectionInverted = false;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ErrorSeverity } from '../../app/shared/enums/model/error-severity';\r\nimport { ValidationTypes } from '../../app/shared/enums/model/validation-types';\r\nimport { IValidationService } from '../../types/services/validation/ivalidation.service';\r\nimport { IValidatedComponent } from '../../types/validation/i-validated-component';\r\n\r\n/**\r\n * NOTE: This is a service class with stub methods currently only used in the dev environment\r\n * (implementation of the interface is determined by the factory),\r\n * but the stubs will be replaced with true implementation when services are ported.\r\n * */\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MockValidationService implements IValidationService {\r\n    overrideEnabled: boolean;\r\n    constructor() { }\r\n    evaluate_Legacy<TData>(contexts: ValidationTypes[], data: TData): sourceCode.k2Designer.objectModel.core.model.IErrorInformation[] {\r\n        return [];\r\n    }\r\n    getErrorSeverity(modelObject: IValidatedComponent): ErrorSeverity {\r\n        return ErrorSeverity.Error;\r\n    }\r\n    getFirstError(modelObject: IValidatedComponent): sourceCode.k2Designer.objectModel.core.model.IErrorInformation {\r\n        return {} as any;\r\n    }\r\n    removeErrorsFrom(modelObj: sourceCode.k2Designer.objectModel.core.model.IModelObject, reference: string): void { }\r\n    listenForErrorList(cb: Function, errorSeverity?: sourceCode.k2Designer.objectModel.core.model.ErrorSeverity): Function {\r\n        return () => { };\r\n    }\r\n    register<TData>(contexts: sourceCode.k2Designer.objectModel.core.model.ValidationTypes, validator: IValidator<TData>): boolean { return true; }\r\n    evaluate<TData>(context: sourceCode.k2Designer.objectModel.core.model.ValidationTypes[], data: TData):\r\n        sourceCode.k2Designer.objectModel.core.model.IErrorInformation[] { return []; }\r\n    evaluateAsync<TData>(contexts: sourceCode.k2Designer.objectModel.core.model.ValidationTypes[], data: TData): JQueryPromise<any> { return {} as any; }\r\n    updateErrorFlatList(modelObject: sourceCode.k2Designer.objectModel.core.model.IModelObject): void { }\r\n    reevaluateErrors(errorList: sourceCode.k2Designer.objectModel.core.model.IErrorInformation[]): void { }\r\n    forceAllPassValidation(modelObj: sourceCode.k2Designer.objectModel.core.model.IModelObject): void { }\r\n    forcePassValidation<TData>(data: sourceCode.k2Designer.objectModel.validationService.plugins.IValidatorItem):\r\n        sourceCode.k2Designer.objectModel.core.model.IErrorInformation[] { return []; }\r\n    removeAllErrorsFrom(modelObj: sourceCode.k2Designer.objectModel.core.model.IModelObject): void { }\r\n    updateReferencesAndReevaluate(modelObj: sourceCode.k2Designer.objectModel.core.model.IModelObject, oldReference: string, newReference: string): void { }\r\n    enable(): void { }\r\n    disable(): void { }\r\n    isEnabled(): boolean { return true;}\r\n    getErrorList(errorSeverity?: sourceCode.k2Designer.objectModel.core.model.ErrorSeverity):\r\n        sourceCode.k2Designer.objectModel.core.model.IErrorInformation[] { return []; }\r\n}\r\n","/**\r\n * Module to assist with unit testing, ensures namespace objects are defined.\r\n * */\r\nexport namespace Mocks {\r\n    export function ensureNamespace(ns: string, config: any): any {\r\n        const parts: string[] = ns.split('.');\r\n        let obj: object = window;\r\n        while (parts.length) {\r\n            const pt = parts.shift();\r\n            obj[pt] = obj[pt] || {};\r\n            obj = obj[pt];\r\n        }\r\n\r\n        if (config) {\r\n            for (const p in config) {\r\n                obj[p] = config[p];\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n\r\n    export function destroyNamespace(ns: string, whole: boolean = false): void {\r\n        const parts: string[] = ns.split('.');\r\n        let obj = window;\r\n        while (parts.length) {\r\n            const pt = parts.shift();\r\n            obj = getObj(obj, pt);\r\n        }\r\n\r\n        if (obj && obj !== window) {\r\n            if (whole)\r\n            {\r\n                nullify(obj);\r\n            }\r\n            else {\r\n                obj = undefined;\r\n            }\r\n        }\r\n    }\r\n\r\n    function getObj(obj: any, prop: string): any {\r\n        return obj[prop];\r\n    }\r\n\r\n    function nullify(obj) {\r\n        if (isNode(obj)) {\r\n            obj = undefined;\r\n            return;\r\n        }\r\n        for (const key in obj) {\r\n            if (typeof obj[key] == 'object' && !Date.parse(obj[key])) {\r\n                obj[key] = nullify(obj[key]);\r\n            }\r\n            obj[key] = undefined;\r\n        }\r\n        return obj;\r\n    }\r\n\r\n    function isNode(o) {\r\n        return (\r\n            typeof Node === 'object' ? o instanceof Node :\r\n                o && typeof o === 'object' && typeof o.nodeType === 'number' && typeof o.nodeName === 'string'\r\n        );\r\n    }\r\n}\r\n","export const getProcess = () => {\r\n    const process = {\r\n        'childErrorInformation': [\r\n            {\r\n                'componentId': 1,\r\n                'errorMessage': 'resource_service_empty_list',\r\n                'errorResourceTokens': [\r\n                    'wizard_Task_Voting_DefaultAction',\r\n                    'configpanel_tabs_task_tooltips_title_userTaskStep'\r\n                ],\r\n                'internalId': 1,\r\n                'propertyName': 'actions',\r\n                'reference': 'root.nodes[{\"internalId\":4}].children[{\"internalId\":1}].configuration',\r\n                'validationType': 1\r\n            },\r\n            {\r\n                'componentId': 1,\r\n                'errorMessage': 'resource_service_empty_list',\r\n                'errorResourceTokens': [\r\n                    'wizard_Task_Voting_DefaultAction',\r\n                    'configpanel_tabs_task_tooltips_title_userTaskStep'\r\n                ],\r\n                'internalId': 2,\r\n                'propertyName': 'actions',\r\n                'reference': 'root.nodes[{\"internalId\":2}].children[{\"internalId\":1}].configuration',\r\n                'validationType': 1\r\n            }\r\n        ],\r\n        'componentId': 50001,\r\n        'configuration': {\r\n            'exceptionSettings': {\r\n                'componentId': 50012,\r\n                'logException': true\r\n            },\r\n            'outcomes': [\r\n                {\r\n                    'componentId': 80021,\r\n                    'internalId': 1,\r\n                    'originalTitle': 'Start',\r\n                    'startWorkflow': true,\r\n                    'title': 'Start'\r\n                },\r\n                {\r\n                    'componentId': 80021,\r\n                    'internalId': 2,\r\n                    'originalTitle': 'Dont Start',\r\n                    'title': 'Dont Start'\r\n                }\r\n            ],\r\n            'processDefinitions': [\r\n                {\r\n                    'componentId': 20000,\r\n                    'internalId': 1\r\n                }\r\n            ],\r\n            'processPriority': 1,\r\n            'startRule': {\r\n                'componentId': 80107,\r\n                'statements': [\r\n                    {\r\n                        'IfExpressions': [\r\n                            {\r\n                                'componentId': 80004,\r\n                                'directive': 'k2-group-expression',\r\n                                'expressions': [\r\n                                    {\r\n                                        'componentId': 80000,\r\n                                        'directive': 'k2-simple-expression',\r\n                                        'internalId': 1,\r\n                                        'leftExpression': {\r\n                                            'componentId': 80003,\r\n                                            'directive': 'k2-endpoint',\r\n                                            'value': {\r\n                                                'componentId': 10008\r\n                                            }\r\n                                        },\r\n                                        'logicalOperator': 'equals',\r\n                                        'rightExpression': {\r\n                                            'componentId': 80003,\r\n                                            'directive': 'k2-endpoint',\r\n                                            'value': {\r\n                                                'componentId': 10008\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                ],\r\n                                internalId: 1\r\n                            }\r\n                        ],\r\n                        componentId: 80002,\r\n                        elseStatements: [\r\n                            {\r\n                                componentId: 80006,\r\n                                directive: 'k2-outcome-statement',\r\n                                internalId: 1,\r\n                                linkedOutcomeReferences: [\r\n                                    'root.configuration.outcomes[{\"internalId\":2}]'\r\n                                ]\r\n                            }\r\n                        ],\r\n                        internalId: 1,\r\n                        thenStatements: [\r\n                            {\r\n                                componentId: 80006,\r\n                                directive: 'k2-outcome-statement',\r\n                                internalId: 1,\r\n                                linkedOutcomeReferences: [\r\n                                    'root.configuration.outcomes[{\"internalId\":1}]'\r\n                                ]\r\n                            }\r\n                        ]\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        errors: [\r\n            {\r\n                componentId: 1,\r\n                errorMessage: 'resource_service_empty_list',\r\n                errorResourceTokens: [\r\n                    'wizard_Task_Voting_DefaultAction',\r\n                    'configpanel_tabs_task_tooltips_title_userTaskStep'\r\n                ],\r\n                internalId: 1,\r\n                propertyName: 'actions',\r\n                reference: 'root.nodes[{\"internalId\":2}].children[{\"internalId\":1}].configuration',\r\n                validationType: 1\r\n            },\r\n            {\r\n                componentId: 1,\r\n                errorMessage: 'resource_service_empty_list',\r\n                errorResourceTokens: [\r\n                    'wizard_Task_Voting_DefaultAction',\r\n                    'configpanel_tabs_task_tooltips_title_userTaskStep'\r\n                ],\r\n                internalId: 2,\r\n                propertyName: 'actions',\r\n                reference: 'root.nodes[{\"internalId\":4}].children[{\"internalId\":1}].configuration',\r\n                validationType: 1\r\n            }\r\n        ],\r\n        externalReferenceDefinitions: [\r\n            {\r\n                componentId: 70001,\r\n                internalId: 1,\r\n                name: 'From Address'\r\n            },\r\n            {\r\n                componentId: 70004,\r\n                id: 'bd46cd98-2857-4eae-9f9d-814101d2383e',\r\n                internalId: 2,\r\n                name: 'com.K2.System.Workflow.Form.BasicTask',\r\n                title: 'Basic Task Form'\r\n            }\r\n        ],\r\n        links: [\r\n            {\r\n                componentId: 50002,\r\n                configuration: {\r\n                    componentId: 40013\r\n                },\r\n                fromInternalId: 1,\r\n                internalId: 1,\r\n                systemName: 'DefaultLine',\r\n                toInternalId: 2,\r\n                ui: {\r\n                    fromPortId: 'bottomPorts_1',\r\n                    path: '0,84,0,104,0,112,0,112,0,120,0,140',\r\n                    template: 'DefaultLine',\r\n                    toPortId: 'topPorts_1'\r\n                }\r\n            },\r\n            {\r\n                componentId: 50002,\r\n                configuration: {\r\n                    componentId: 40013\r\n                },\r\n                fromInternalId: 2,\r\n                internalId: 2,\r\n                systemName: 'DefaultLine 1',\r\n                toInternalId: 3,\r\n                ui: {\r\n                    fromPortId: 'bottomPorts_1',\r\n                    path: '0,196,0,216,0,238,0,238,0,260,0,280',\r\n                    toPortId: 'topPorts_1'\r\n                }\r\n            },\r\n            {\r\n                componentId: 50002,\r\n                configuration: {\r\n                    componentId: 40013\r\n                },\r\n                fromInternalId: 3,\r\n                internalId: 3,\r\n                systemName: 'DefaultLine 2',\r\n                toInternalId: 4,\r\n                ui: {\r\n                    fromPortId: 'bottomPorts_1',\r\n                    path: '0,336,0,356,0,392,0,392,0,428,0,448',\r\n                    toPortId: 'topPorts_1'\r\n                }\r\n            },\r\n            {\r\n                componentId: 50002,\r\n                configuration: {\r\n                    componentId: 40013\r\n                },\r\n                fromInternalId: 4,\r\n                internalId: 4,\r\n                systemName: 'DefaultLine 3',\r\n                toInternalId: 5,\r\n                ui: {\r\n                    fromPortId: 'bottomPorts_1',\r\n                    path: '0,504,0,524,0,560,0,560,0,596,0,616',\r\n                    toPortId: 'topPorts_1'\r\n                }\r\n            },\r\n            {\r\n                componentId: 50002,\r\n                configuration: {\r\n                    associatedOutcomeReference: 'root.nodes[{\"internalId\":5}].configuration.outcomes[{\"internalId\":1}]',\r\n                    componentId: 40013\r\n                },\r\n                customTitle: true,\r\n                fromInternalId: 5,\r\n                internalId: 5,\r\n                systemName: 'DefaultLine 4',\r\n                title: 'Path 1',\r\n                toInternalId: 6,\r\n                ui: {\r\n                    fromPortId: 'leftPorts_1',\r\n                    path: '-28,644,-48,644,-154,644,-154,648,-154,652,-154,672',\r\n                    showLabel: true,\r\n                    toPortId: 'topPorts_2'\r\n                }\r\n            },\r\n            {\r\n                componentId: 50002,\r\n                configuration: {\r\n                    associatedOutcomeReference: 'root.nodes[{\"internalId\":5}].configuration.outcomes[{\"internalId\":2}]',\r\n                    componentId: 40013\r\n                },\r\n                customTitle: true,\r\n                fromInternalId: 5,\r\n                internalId: 6,\r\n                systemName: 'DefaultLine 5',\r\n                title: 'Path 2',\r\n                toInternalId: 7,\r\n                ui: {\r\n                    fromPortId: 'rightPorts_1',\r\n                    path: '28,644,48,644,140,644,140,648,140,652,140,672',\r\n                    showLabel: true,\r\n                    toPortId: 'topPorts_1'\r\n                }\r\n            },\r\n            {\r\n                componentId: 50002,\r\n                configuration: {\r\n                    componentId: 40013\r\n                },\r\n                fromInternalId: 6,\r\n                internalId: 7,\r\n                systemName: 'DefaultLine 6',\r\n                toInternalId: 8,\r\n                ui: {\r\n                    fromPortId: 'bottomPorts_1',\r\n                    path: '-168,728,-168,748,-168,812,-108,812,-48,812,-28,812',\r\n                    toPortId: 'leftPorts_1'\r\n                }\r\n            },\r\n            {\r\n                componentId: 50002,\r\n                configuration: {\r\n                    componentId: 40013\r\n                },\r\n                fromInternalId: 7,\r\n                internalId: 8,\r\n                systemName: 'DefaultLine 7',\r\n                toInternalId: 8,\r\n                ui: {\r\n                    fromPortId: 'bottomPorts_2',\r\n                    path: '154,728,154,748,154,812,101,812,48,812,28,812',\r\n                    toPortId: 'rightPorts_1'\r\n                }\r\n            },\r\n            {\r\n                componentId: 50002,\r\n                configuration: {\r\n                    componentId: 40013\r\n                },\r\n                fromInternalId: 8,\r\n                internalId: 9,\r\n                systemName: 'DefaultLine 8',\r\n                toInternalId: 9,\r\n                ui: {\r\n                    fromPortId: 'bottomPorts_1',\r\n                    path: '0,840,0,860,0,868,0,868,0,876,0,896',\r\n                    toPortId: 'topPorts_1'\r\n                }\r\n            }\r\n        ],\r\n        nodes: [\r\n            {\r\n                componentId: 40000,\r\n                configuration: {\r\n                    componentId: 40001,\r\n                    deadline: {\r\n                        actionType: 3,\r\n                        componentId: 30025,\r\n                        expressDays: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressHours: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressMinutes: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressSeconds: {\r\n                            componentId: 10008\r\n                        },\r\n                        noDeadline: true,\r\n                        specificDate: {\r\n                            componentId: 10008\r\n                        },\r\n                        withinWorkingHoursOnly: true\r\n                    },\r\n                    decisionOptionType: 2,\r\n                    exceptionSettings: {\r\n                        componentId: 50012,\r\n                        logException: true\r\n                    },\r\n                    priority: 1\r\n                },\r\n                internalId: 1,\r\n                isStartActivity: true,\r\n                systemName: 'Start',\r\n                title: 'Start',\r\n                ui: {\r\n                    bottomPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'bottomPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'bottomPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'bottomPorts_2'\r\n                        }\r\n                    ],\r\n                    componentId: 40009,\r\n                    leftPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'leftPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'leftPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'leftPorts_2'\r\n                        }\r\n                    ],\r\n                    rightPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'rightPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'rightPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'rightPorts_2'\r\n                        }\r\n                    ],\r\n                    template: 'StartStep',\r\n                    topPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'topPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'topPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'topPorts_2'\r\n                        }\r\n                    ],\r\n                    y: 56\r\n                }\r\n            },\r\n            {\r\n                childErrorInformation: [\r\n                    {\r\n                        componentId: 1,\r\n                        errorMessage: 'resource_service_empty_list',\r\n                        errorResourceTokens: [\r\n                            'wizard_Task_Voting_DefaultAction',\r\n                            'configpanel_tabs_task_tooltips_title_userTaskStep'\r\n                        ],\r\n                        internalId: 2,\r\n                        propertyName: 'actions',\r\n                        reference: 'root.nodes[{\"internalId\":2}].children[{\"internalId\":1}].configuration',\r\n                        validationType: 1\r\n                    }\r\n                ],\r\n                children: [\r\n                    {\r\n                        childErrorInformation: [\r\n                            {\r\n                                componentId: 1,\r\n                                errorMessage: 'resource_service_empty_list',\r\n                                errorResourceTokens: [\r\n                                    'wizard_Task_Voting_DefaultAction',\r\n                                    'configpanel_tabs_task_tooltips_title_userTaskStep'\r\n                                ],\r\n                                propertyName: 'actions',\r\n                                reference: 'root.nodes[{\"internalId\":2}].children[{\"internalId\":1}].configuration',\r\n                                validationType: 1\r\n                            }\r\n                        ],\r\n                        componentId: 30009,\r\n                        configuration: {\r\n                            actionStatementRuleType: 1,\r\n                            allRecipients: true,\r\n                            componentId: 30010,\r\n                            destinationSets: [\r\n                                {\r\n                                    componentId: 80010,\r\n                                    destinationItems: [\r\n                                        {\r\n                                            componentId: 10008,\r\n                                            internalId: 1,\r\n                                            smartFields: [\r\n                                                {\r\n                                                    componentId: 10009,\r\n                                                    customTitle: 'Originator',\r\n                                                    fieldName: 'ProcessOriginatorFQN',\r\n                                                    internalId: 1,\r\n                                                    parentName: 'Originator\\'s',\r\n                                                    title: 'FQN'\r\n                                                }\r\n                                            ],\r\n                                            type: 'User'\r\n                                        }\r\n                                    ],\r\n                                    internalId: 1,\r\n                                    isRecipient: true,\r\n                                    title: 'Originator'\r\n                                }\r\n                            ],\r\n                            destintationRule: {\r\n                                componentId: 80102,\r\n                                statements: [\r\n                                    {\r\n                                        IfExpressions: [\r\n                                            {\r\n                                                componentId: 80004,\r\n                                                directive: 'k2-group-expression',\r\n                                                expressions: [\r\n                                                    {\r\n                                                        componentId: 80000,\r\n                                                        directive: 'k2-simple-expression',\r\n                                                        internalId: 1,\r\n                                                        leftExpression: {\r\n                                                            componentId: 80003,\r\n                                                            directive: 'k2-endpoint',\r\n                                                            value: {\r\n                                                                componentId: 10008\r\n                                                            }\r\n                                                        },\r\n                                                        logicalOperator: 'equals',\r\n                                                        rightExpression: {\r\n                                                            componentId: 80003,\r\n                                                            directive: 'k2-endpoint',\r\n                                                            value: {\r\n                                                                componentId: 10008\r\n                                                            }\r\n                                                        }\r\n                                                    }\r\n                                                ],\r\n                                                internalId: 1\r\n                                            }\r\n                                        ],\r\n                                        componentId: 80012,\r\n                                        elseStatements: [\r\n                                            {\r\n                                                componentId: 30024,\r\n                                                directive: 'k2-destination-set-statement',\r\n                                                internalId: 1\r\n                                            }\r\n                                        ],\r\n                                        internalId: 1,\r\n                                        thenStatements: [\r\n                                            {\r\n                                                componentId: 30024,\r\n                                                directive: 'k2-destination-set-statement',\r\n                                                internalId: 1\r\n                                            }\r\n                                        ]\r\n                                    }\r\n                                ]\r\n                            },\r\n                            emailConfiguration: {\r\n                                bcc: [\r\n                                    {\r\n                                        componentId: 10008,\r\n                                        internalId: 1,\r\n                                        isDecoratedPart: true\r\n                                    }\r\n                                ],\r\n                                body: {\r\n                                    componentId: 10008,\r\n                                    richText: true,\r\n                                    smartFields: [\r\n                                        {\r\n                                            componentId: 10004,\r\n                                            internalId: 9,\r\n                                            text: 'Dear&nbsp;'\r\n                                        },\r\n                                        {\r\n                                            componentId: 10009,\r\n                                            fieldName: 'ActivityInstanceDestUserDisplayName',\r\n                                            internalId: 2,\r\n                                            parentName: 'Task',\r\n                                            title: 'Participant Name'\r\n                                        },\r\n                                        {\r\n                                            componentId: 10004,\r\n                                            internalId: 10,\r\n                                            text: ',<br><br>Use the following link to open the worklist item:<br>'\r\n                                        },\r\n                                        {\r\n                                            assemblyId: 2,\r\n                                            className: 'SourceCode.Workflow.Functions.HTMLHelper',\r\n                                            componentId: 10002,\r\n                                            functionName: 'CreateHyperlink',\r\n                                            internalId: 8,\r\n                                            methodReturnType: 'System.String',\r\n                                            parameters: [\r\n                                                {\r\n                                                    componentId: 10017,\r\n                                                    internalId: 1,\r\n                                                    parameterType: 'System.String',\r\n                                                    title: 'DisplayName',\r\n                                                    value: {\r\n                                                        componentId: 10008,\r\n                                                        smartFields: [\r\n                                                            {\r\n                                                                componentId: 10004,\r\n                                                                internalId: 1,\r\n                                                                text: 'Click to open worklist item'\r\n                                                            }\r\n                                                        ]\r\n                                                    }\r\n                                                },\r\n                                                {\r\n                                                    componentId: 10017,\r\n                                                    internalId: 2,\r\n                                                    parameterType: 'System.String',\r\n                                                    title: 'URL',\r\n                                                    value: {\r\n                                                        componentId: 10008,\r\n                                                        smartFields: [\r\n                                                            {\r\n                                                                componentId: 10009,\r\n                                                                fieldName: 'WorkFlowItemContextData',\r\n                                                                internalId: 1,\r\n                                                                parentName: 'Task',\r\n                                                                title: 'Worklist Item Link'\r\n                                                            }\r\n                                                        ]\r\n                                                    }\r\n                                                }\r\n                                            ],\r\n                                            returnType: 1,\r\n                                            title: 'Worklist Item Link'\r\n                                        }\r\n                                    ]\r\n                                },\r\n                                cc: [\r\n                                    {\r\n                                        componentId: 10008,\r\n                                        internalId: 1,\r\n                                        isDecoratedPart: true\r\n                                    }\r\n                                ],\r\n                                componentId: 30006,\r\n                                exceptionSettings: {\r\n                                    componentId: 50012,\r\n                                    logException: true\r\n                                },\r\n                                from: {\r\n                                    componentId: 10008,\r\n                                    smartFields: [\r\n                                        {\r\n                                            componentId: 10001,\r\n                                            environmentFieldReference: 'root.externalReferenceDefinitions[{\"internalId\":1}]',\r\n                                            internalId: 1,\r\n                                            title: 'From Address'\r\n                                        }\r\n                                    ]\r\n                                },\r\n                                subject: {\r\n                                    componentId: 10008\r\n                                }\r\n                            },\r\n                            errorInformation: [\r\n                                {\r\n                                    componentId: 1,\r\n                                    errorMessage: 'resource_service_empty_list',\r\n                                    errorResourceTokens: [\r\n                                        'wizard_Task_Voting_DefaultAction',\r\n                                        'configpanel_tabs_task_tooltips_title_userTaskStep'\r\n                                    ],\r\n                                    propertyName: 'actions',\r\n                                    reference: 'root.nodes[{\"internalId\":2}].children[{\"internalId\":1}].configuration',\r\n                                    validationType: 1\r\n                                }\r\n                            ],\r\n                            exceptionSettings: {\r\n                                componentId: 50012,\r\n                                logException: true\r\n                            },\r\n                            formConfiguration: {\r\n                                componentId: 30030,\r\n                                parameters: [\r\n                                    {\r\n                                        componentId: 30018,\r\n                                        internalId: 1,\r\n                                        name: {\r\n                                            componentId: 10008,\r\n                                            smartFields: [\r\n                                                {\r\n                                                    componentId: 10004,\r\n                                                    customTitle: 'Serial Number',\r\n                                                    internalId: 1,\r\n                                                    text: 'SN'\r\n                                                }\r\n                                            ],\r\n                                            type: 'tworows'\r\n                                        },\r\n                                        value: {\r\n                                            componentId: 10008,\r\n                                            smartFields: [\r\n                                                {\r\n                                                    componentId: 10009,\r\n                                                    fieldName: 'SerialNo',\r\n                                                    internalId: 1,\r\n                                                    parentName: 'Task',\r\n                                                    title: 'Serial Number'\r\n                                                }\r\n                                            ]\r\n                                        }\r\n                                    },\r\n                                    {\r\n                                        componentId: 30018,\r\n                                        internalId: 2,\r\n                                        name: {\r\n                                            componentId: 10008,\r\n                                            smartFields: [\r\n                                                {\r\n                                                    componentId: 10004,\r\n                                                    customTitle: 'Content Title',\r\n                                                    internalId: 1,\r\n                                                    text: '_title'\r\n                                                }\r\n                                            ],\r\n                                            type: 'tworows'\r\n                                        },\r\n                                        value: {\r\n                                            componentId: 10008\r\n                                        }\r\n                                    },\r\n                                    {\r\n                                        componentId: 30018,\r\n                                        internalId: 3,\r\n                                        name: {\r\n                                            componentId: 10008,\r\n                                            smartFields: [\r\n                                                {\r\n                                                    componentId: 10004,\r\n                                                    customTitle: 'Content URL',\r\n                                                    internalId: 1,\r\n                                                    text: '_url'\r\n                                                }\r\n                                            ],\r\n                                            type: 'tworows'\r\n                                        },\r\n                                        value: {\r\n                                            componentId: 10008\r\n                                        }\r\n                                    },\r\n                                    {\r\n                                        componentId: 30018,\r\n                                        internalId: 4,\r\n                                        name: {\r\n                                            componentId: 10008,\r\n                                            smartFields: [\r\n                                                {\r\n                                                    componentId: 10004,\r\n                                                    customTitle: 'Embed Content on the Form',\r\n                                                    internalId: 1,\r\n                                                    text: '_embed'\r\n                                                }\r\n                                            ],\r\n                                            type: 'tworows'\r\n                                        },\r\n                                        value: {\r\n                                            componentId: 10008\r\n                                        }\r\n                                    }\r\n                                ],\r\n                                url: {\r\n                                    componentId: 10008,\r\n                                    smartFields: [\r\n                                        {\r\n                                            componentId: 10006,\r\n                                            internalId: 1,\r\n                                            smartFormFieldReference: 'root.externalReferenceDefinitions[{\"internalId\":2}]'\r\n                                        }\r\n                                    ]\r\n                                }\r\n                            },\r\n                            instruction: {\r\n                                componentId: 10008,\r\n                                multiLine: true\r\n                            },\r\n                            selectedFormTypeText: 'Basic Task Form',\r\n                            sendNotification: true,\r\n                            slots: {\r\n                                componentId: 10008\r\n                            },\r\n                            timeLine: {\r\n                                componentId: 30025,\r\n                                expressDays: {\r\n                                    componentId: 10008\r\n                                },\r\n                                expressHours: {\r\n                                    componentId: 10008\r\n                                },\r\n                                expressMinutes: {\r\n                                    componentId: 10008\r\n                                },\r\n                                expressSeconds: {\r\n                                    componentId: 10008\r\n                                },\r\n                                isDefaultWorkingHours: true,\r\n                                noDeadline: true,\r\n                                specificDate: {\r\n                                    componentId: 10008\r\n                                },\r\n                                withinWorkingHoursOnly: true\r\n                            },\r\n                            useStandardTemplate: true,\r\n                            votingResolveGroupsToIndividuals: true\r\n                        },\r\n                        internalId: 1,\r\n                        systemName: 'Task',\r\n                        title: 'Task',\r\n                        ui: {\r\n                            icon: 'userTaskStep',\r\n                            template: 'DefaultStep'\r\n                        },\r\n                        wizardId: 3000\r\n                    }\r\n                ],\r\n                componentId: 40000,\r\n                configuration: {\r\n                    componentId: 40001,\r\n                    datafields: [\r\n                        {\r\n                            componentId: 50000,\r\n                            hidden: true,\r\n                            internalId: 1,\r\n                            isEmptyValue: true,\r\n                            scope: 3,\r\n                            title: 'Action Result',\r\n                            type: 6\r\n                        }\r\n                    ],\r\n                    deadline: {\r\n                        actionType: 3,\r\n                        componentId: 30025,\r\n                        dynamicWorkingHours: {\r\n                            componentId: 10008\r\n                        },\r\n                        expireOnDeadline: true,\r\n                        expressDays: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressHours: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressMinutes: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressSeconds: {\r\n                            componentId: 10008\r\n                        },\r\n                        noDeadline: true,\r\n                        specificDate: {\r\n                            componentId: 10008\r\n                        },\r\n                        withinWorkingHoursOnly: true\r\n                    },\r\n                    decisionOptionType: 2,\r\n                    exceptionSettings: {\r\n                        componentId: 50012,\r\n                        logException: true\r\n                    },\r\n                    priority: 1\r\n                },\r\n                internalId: 2,\r\n                systemName: 'Task',\r\n                title: 'Task',\r\n                ui: {\r\n                    bottomPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'bottomPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            outgoingLinkReferences: [\r\n                                'root.links[{\"internalId\":2}]'\r\n                            ],\r\n                            portId: 'bottomPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'bottomPorts_2'\r\n                        }\r\n                    ],\r\n                    componentId: 40009,\r\n                    icon: 'userTaskStep',\r\n                    labelY: 0.16835937499999432,\r\n                    leftPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'leftPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'leftPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'leftPorts_2'\r\n                        }\r\n                    ],\r\n                    rightPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'rightPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'rightPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'rightPorts_2'\r\n                        }\r\n                    ],\r\n                    showLabel: true,\r\n                    template: 'DefaultStep',\r\n                    topPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'topPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            incomingLinkReferences: [\r\n                                'root.links[{\"internalId\":1}]'\r\n                            ],\r\n                            internalId: 2,\r\n                            portId: 'topPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'topPorts_2'\r\n                        }\r\n                    ],\r\n                    y: 168\r\n                }\r\n            },\r\n            {\r\n                children: [\r\n                    {\r\n                        componentId: 30004,\r\n                        configuration: {\r\n                            body: {\r\n                                componentId: 10008,\r\n                                richText: true\r\n                            },\r\n                            componentId: 30006,\r\n                            exceptionSettings: {\r\n                                componentId: 50012,\r\n                                logException: true\r\n                            },\r\n                            from: {\r\n                                componentId: 10008,\r\n                                smartFields: [\r\n                                    {\r\n                                        componentId: 10001,\r\n                                        environmentFieldReference: 'root.externalReferenceDefinitions[{\"internalId\":1}]',\r\n                                        internalId: 1,\r\n                                        title: 'From Address'\r\n                                    }\r\n                                ]\r\n                            },\r\n                            subject: {\r\n                                componentId: 10008\r\n                            },\r\n                            to: [\r\n                                {\r\n                                    componentId: 10008,\r\n                                    internalId: 1,\r\n                                    isDecoratedPart: true,\r\n                                    smartFields: [\r\n                                        {\r\n                                            componentId: 10009,\r\n                                            customTitle: 'Originator',\r\n                                            fieldName: 'ProcessOriginatorEmail',\r\n                                            internalId: 1,\r\n                                            parentName: 'Originator\\'s',\r\n                                            title: 'Email'\r\n                                        }\r\n                                    ]\r\n                                }\r\n                            ]\r\n                        },\r\n                        internalId: 1,\r\n                        systemName: 'Send Email',\r\n                        title: 'Send Email',\r\n                        ui: {\r\n                            icon: 'emailStep',\r\n                            template: 'DefaultStep'\r\n                        },\r\n                        wizardId: 3001\r\n                    }\r\n                ],\r\n                componentId: 40000,\r\n                configuration: {\r\n                    componentId: 40001,\r\n                    deadline: {\r\n                        actionType: 3,\r\n                        componentId: 30025,\r\n                        expressDays: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressHours: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressMinutes: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressSeconds: {\r\n                            componentId: 10008\r\n                        },\r\n                        noDeadline: true,\r\n                        specificDate: {\r\n                            componentId: 10008\r\n                        },\r\n                        withinWorkingHoursOnly: true\r\n                    },\r\n                    decisionOptionType: 2,\r\n                    exceptionSettings: {\r\n                        componentId: 50012,\r\n                        logException: true\r\n                    },\r\n                    priority: 1\r\n                },\r\n                internalId: 3,\r\n                systemName: 'Send Email',\r\n                title: 'Send Email',\r\n                ui: {\r\n                    bottomPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'bottomPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            outgoingLinkReferences: [\r\n                                'root.links[{\"internalId\":3}]'\r\n                            ],\r\n                            portId: 'bottomPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'bottomPorts_2'\r\n                        }\r\n                    ],\r\n                    componentId: 40009,\r\n                    icon: 'emailStep',\r\n                    labelY: 0.16835937500002274,\r\n                    leftPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'leftPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'leftPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'leftPorts_2'\r\n                        }\r\n                    ],\r\n                    rightPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'rightPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'rightPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'rightPorts_2'\r\n                        }\r\n                    ],\r\n                    showLabel: true,\r\n                    template: 'DefaultStep',\r\n                    topPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'topPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            incomingLinkReferences: [\r\n                                'root.links[{\"internalId\":2}]'\r\n                            ],\r\n                            internalId: 2,\r\n                            portId: 'topPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'topPorts_2'\r\n                        }\r\n                    ],\r\n                    y: 308\r\n                }\r\n            },\r\n            {\r\n                childErrorInformation: [\r\n                    {\r\n                        componentId: 1,\r\n                        errorMessage: 'resource_service_empty_list',\r\n                        errorResourceTokens: [\r\n                            'wizard_Task_Voting_DefaultAction',\r\n                            'configpanel_tabs_task_tooltips_title_userTaskStep'\r\n                        ],\r\n                        internalId: 1,\r\n                        propertyName: 'actions',\r\n                        reference: 'root.nodes[{\"internalId\":4}].children[{\"internalId\":1}].configuration',\r\n                        validationType: 1\r\n                    }\r\n                ],\r\n                children: [\r\n                    {\r\n                        childErrorInformation: [\r\n                            {\r\n                                componentId: 1,\r\n                                errorMessage: 'resource_service_empty_list',\r\n                                errorResourceTokens: [\r\n                                    'wizard_Task_Voting_DefaultAction',\r\n                                    'configpanel_tabs_task_tooltips_title_userTaskStep'\r\n                                ],\r\n                                propertyName: 'actions',\r\n                                reference: 'root.nodes[{\"internalId\":4}].children[{\"internalId\":1}].configuration',\r\n                                validationType: 1\r\n                            }\r\n                        ],\r\n                        componentId: 30009,\r\n                        configuration: {\r\n                            actionStatementRuleType: 1,\r\n                            allRecipients: true,\r\n                            componentId: 30010,\r\n                            destinationSets: [\r\n                                {\r\n                                    componentId: 80010,\r\n                                    destinationItems: [\r\n                                        {\r\n                                            componentId: 10008,\r\n                                            internalId: 1,\r\n                                            smartFields: [\r\n                                                {\r\n                                                    componentId: 10009,\r\n                                                    customTitle: 'Originator',\r\n                                                    fieldName: 'ProcessOriginatorFQN',\r\n                                                    internalId: 1,\r\n                                                    parentName: 'Originator\\'s',\r\n                                                    title: 'FQN'\r\n                                                }\r\n                                            ],\r\n                                            type: 'User'\r\n                                        }\r\n                                    ],\r\n                                    internalId: 1,\r\n                                    isRecipient: true,\r\n                                    title: 'Originator'\r\n                                }\r\n                            ],\r\n                            destintationRule: {\r\n                                componentId: 80102,\r\n                                statements: [\r\n                                    {\r\n                                        IfExpressions: [\r\n                                            {\r\n                                                componentId: 80004,\r\n                                                directive: 'k2-group-expression',\r\n                                                expressions: [\r\n                                                    {\r\n                                                        componentId: 80000,\r\n                                                        directive: 'k2-simple-expression',\r\n                                                        internalId: 1,\r\n                                                        leftExpression: {\r\n                                                            componentId: 80003,\r\n                                                            directive: 'k2-endpoint',\r\n                                                            value: {\r\n                                                                componentId: 10008\r\n                                                            }\r\n                                                        },\r\n                                                        logicalOperator: 'equals',\r\n                                                        rightExpression: {\r\n                                                            componentId: 80003,\r\n                                                            directive: 'k2-endpoint',\r\n                                                            value: {\r\n                                                                componentId: 10008\r\n                                                            }\r\n                                                        }\r\n                                                    }\r\n                                                ],\r\n                                                internalId: 1\r\n                                            }\r\n                                        ],\r\n                                        componentId: 80012,\r\n                                        elseStatements: [\r\n                                            {\r\n                                                componentId: 30024,\r\n                                                directive: 'k2-destination-set-statement',\r\n                                                internalId: 1\r\n                                            }\r\n                                        ],\r\n                                        internalId: 1,\r\n                                        thenStatements: [\r\n                                            {\r\n                                                componentId: 30024,\r\n                                                directive: 'k2-destination-set-statement',\r\n                                                internalId: 1\r\n                                            }\r\n                                        ]\r\n                                    }\r\n                                ]\r\n                            },\r\n                            emailConfiguration: {\r\n                                bcc: [\r\n                                    {\r\n                                        componentId: 10008,\r\n                                        internalId: 1,\r\n                                        isDecoratedPart: true\r\n                                    }\r\n                                ],\r\n                                body: {\r\n                                    componentId: 10008,\r\n                                    richText: true,\r\n                                    smartFields: [\r\n                                        {\r\n                                            componentId: 10004,\r\n                                            internalId: 9,\r\n                                            text: 'Dear&nbsp;'\r\n                                        },\r\n                                        {\r\n                                            componentId: 10009,\r\n                                            fieldName: 'ActivityInstanceDestUserDisplayName',\r\n                                            internalId: 2,\r\n                                            parentName: 'Task',\r\n                                            title: 'Participant Name'\r\n                                        },\r\n                                        {\r\n                                            componentId: 10004,\r\n                                            internalId: 10,\r\n                                            text: ',<br><br>Use the following link to open the worklist item:<br>'\r\n                                        },\r\n                                        {\r\n                                            assemblyId: 2,\r\n                                            className: 'SourceCode.Workflow.Functions.HTMLHelper',\r\n                                            componentId: 10002,\r\n                                            functionName: 'CreateHyperlink',\r\n                                            internalId: 8,\r\n                                            methodReturnType: 'System.String',\r\n                                            parameters: [\r\n                                                {\r\n                                                    componentId: 10017,\r\n                                                    internalId: 1,\r\n                                                    parameterType: 'System.String',\r\n                                                    title: 'DisplayName',\r\n                                                    value: {\r\n                                                        componentId: 10008,\r\n                                                        smartFields: [\r\n                                                            {\r\n                                                                componentId: 10004,\r\n                                                                internalId: 1,\r\n                                                                text: 'Click to open worklist item'\r\n                                                            }\r\n                                                        ]\r\n                                                    }\r\n                                                },\r\n                                                {\r\n                                                    componentId: 10017,\r\n                                                    internalId: 2,\r\n                                                    parameterType: 'System.String',\r\n                                                    title: 'URL',\r\n                                                    value: {\r\n                                                        componentId: 10008,\r\n                                                        smartFields: [\r\n                                                            {\r\n                                                                componentId: 10009,\r\n                                                                fieldName: 'WorkFlowItemContextData',\r\n                                                                internalId: 1,\r\n                                                                parentName: 'Task',\r\n                                                                title: 'Worklist Item Link'\r\n                                                            }\r\n                                                        ]\r\n                                                    }\r\n                                                }\r\n                                            ],\r\n                                            returnType: 1,\r\n                                            title: 'Worklist Item Link'\r\n                                        }\r\n                                    ]\r\n                                },\r\n                                cc: [\r\n                                    {\r\n                                        componentId: 10008,\r\n                                        internalId: 1,\r\n                                        isDecoratedPart: true\r\n                                    }\r\n                                ],\r\n                                componentId: 30006,\r\n                                exceptionSettings: {\r\n                                    componentId: 50012,\r\n                                    logException: true\r\n                                },\r\n                                from: {\r\n                                    componentId: 10008,\r\n                                    smartFields: [\r\n                                        {\r\n                                            componentId: 10001,\r\n                                            environmentFieldReference: 'root.externalReferenceDefinitions[{\"internalId\":1}]',\r\n                                            internalId: 1,\r\n                                            title: 'From Address'\r\n                                        }\r\n                                    ]\r\n                                },\r\n                                subject: {\r\n                                    componentId: 10008\r\n                                }\r\n                            },\r\n                            errorInformation: [\r\n                                {\r\n                                    componentId: 1,\r\n                                    errorMessage: 'resource_service_empty_list',\r\n                                    errorResourceTokens: [\r\n                                        'wizard_Task_Voting_DefaultAction',\r\n                                        'configpanel_tabs_task_tooltips_title_userTaskStep'\r\n                                    ],\r\n                                    propertyName: 'actions',\r\n                                    reference: 'root.nodes[{\"internalId\":4}].children[{\"internalId\":1}].configuration',\r\n                                    validationType: 1\r\n                                }\r\n                            ],\r\n                            exceptionSettings: {\r\n                                componentId: 50012,\r\n                                logException: true\r\n                            },\r\n                            formConfiguration: {\r\n                                componentId: 30030,\r\n                                parameters: [\r\n                                    {\r\n                                        componentId: 30018,\r\n                                        internalId: 1,\r\n                                        name: {\r\n                                            componentId: 10008,\r\n                                            smartFields: [\r\n                                                {\r\n                                                    componentId: 10004,\r\n                                                    customTitle: 'Serial Number',\r\n                                                    internalId: 1,\r\n                                                    text: 'SN'\r\n                                                }\r\n                                            ],\r\n                                            type: 'tworows'\r\n                                        },\r\n                                        value: {\r\n                                            componentId: 10008,\r\n                                            smartFields: [\r\n                                                {\r\n                                                    componentId: 10009,\r\n                                                    fieldName: 'SerialNo',\r\n                                                    internalId: 1,\r\n                                                    parentName: 'Task',\r\n                                                    title: 'Serial Number'\r\n                                                }\r\n                                            ]\r\n                                        }\r\n                                    },\r\n                                    {\r\n                                        componentId: 30018,\r\n                                        internalId: 2,\r\n                                        name: {\r\n                                            componentId: 10008,\r\n                                            smartFields: [\r\n                                                {\r\n                                                    componentId: 10004,\r\n                                                    customTitle: 'Content Title',\r\n                                                    internalId: 1,\r\n                                                    text: '_title'\r\n                                                }\r\n                                            ],\r\n                                            type: 'tworows'\r\n                                        },\r\n                                        value: {\r\n                                            componentId: 10008\r\n                                        }\r\n                                    },\r\n                                    {\r\n                                        componentId: 30018,\r\n                                        internalId: 3,\r\n                                        name: {\r\n                                            componentId: 10008,\r\n                                            smartFields: [\r\n                                                {\r\n                                                    componentId: 10004,\r\n                                                    customTitle: 'Content URL',\r\n                                                    internalId: 1,\r\n                                                    text: '_url'\r\n                                                }\r\n                                            ],\r\n                                            type: 'tworows'\r\n                                        },\r\n                                        value: {\r\n                                            componentId: 10008\r\n                                        }\r\n                                    },\r\n                                    {\r\n                                        componentId: 30018,\r\n                                        internalId: 4,\r\n                                        name: {\r\n                                            componentId: 10008,\r\n                                            smartFields: [\r\n                                                {\r\n                                                    componentId: 10004,\r\n                                                    customTitle: 'Embed Content on the Form',\r\n                                                    internalId: 1,\r\n                                                    text: '_embed'\r\n                                                }\r\n                                            ],\r\n                                            type: 'tworows'\r\n                                        },\r\n                                        value: {\r\n                                            componentId: 10008\r\n                                        }\r\n                                    }\r\n                                ],\r\n                                url: {\r\n                                    componentId: 10008,\r\n                                    smartFields: [\r\n                                        {\r\n                                            componentId: 10006,\r\n                                            internalId: 1,\r\n                                            smartFormFieldReference: 'root.externalReferenceDefinitions[{\"internalId\":2}]'\r\n                                        }\r\n                                    ]\r\n                                }\r\n                            },\r\n                            instruction: {\r\n                                componentId: 10008,\r\n                                multiLine: true\r\n                            },\r\n                            selectedFormTypeText: 'Basic Task Form',\r\n                            sendNotification: true,\r\n                            slots: {\r\n                                componentId: 10008\r\n                            },\r\n                            timeLine: {\r\n                                componentId: 30025,\r\n                                expressDays: {\r\n                                    componentId: 10008\r\n                                },\r\n                                expressHours: {\r\n                                    componentId: 10008\r\n                                },\r\n                                expressMinutes: {\r\n                                    componentId: 10008\r\n                                },\r\n                                expressSeconds: {\r\n                                    componentId: 10008\r\n                                },\r\n                                isDefaultWorkingHours: true,\r\n                                noDeadline: true,\r\n                                specificDate: {\r\n                                    componentId: 10008\r\n                                },\r\n                                withinWorkingHoursOnly: true\r\n                            },\r\n                            useStandardTemplate: true,\r\n                            votingResolveGroupsToIndividuals: true\r\n                        },\r\n                        internalId: 1,\r\n                        systemName: 'Task',\r\n                        title: 'Task',\r\n                        ui: {\r\n                            icon: 'userTaskStep',\r\n                            template: 'DefaultStep'\r\n                        },\r\n                        wizardId: 3000\r\n                    }\r\n                ],\r\n                componentId: 40000,\r\n                configuration: {\r\n                    componentId: 40001,\r\n                    datafields: [\r\n                        {\r\n                            componentId: 50000,\r\n                            hidden: true,\r\n                            internalId: 1,\r\n                            isEmptyValue: true,\r\n                            scope: 3,\r\n                            title: 'Action Result',\r\n                            type: 6\r\n                        }\r\n                    ],\r\n                    deadline: {\r\n                        actionType: 3,\r\n                        componentId: 30025,\r\n                        dynamicWorkingHours: {\r\n                            componentId: 10008\r\n                        },\r\n                        expireOnDeadline: true,\r\n                        expressDays: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressHours: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressMinutes: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressSeconds: {\r\n                            componentId: 10008\r\n                        },\r\n                        noDeadline: true,\r\n                        specificDate: {\r\n                            componentId: 10008\r\n                        },\r\n                        withinWorkingHoursOnly: true\r\n                    },\r\n                    decisionOptionType: 2,\r\n                    exceptionSettings: {\r\n                        componentId: 50012,\r\n                        logException: true\r\n                    },\r\n                    priority: 1\r\n                },\r\n                internalId: 4,\r\n                systemName: 'Task 1',\r\n                title: 'Task',\r\n                ui: {\r\n                    bottomPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'bottomPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            outgoingLinkReferences: [\r\n                                'root.links[{\"internalId\":4}]'\r\n                            ],\r\n                            portId: 'bottomPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'bottomPorts_2'\r\n                        }\r\n                    ],\r\n                    componentId: 40009,\r\n                    icon: 'userTaskStep',\r\n                    labelY: 0.16835937500002274,\r\n                    leftPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'leftPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'leftPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'leftPorts_2'\r\n                        }\r\n                    ],\r\n                    rightPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'rightPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'rightPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'rightPorts_2'\r\n                        }\r\n                    ],\r\n                    showLabel: true,\r\n                    template: 'DefaultStep',\r\n                    topPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'topPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            incomingLinkReferences: [\r\n                                'root.links[{\"internalId\":3}]'\r\n                            ],\r\n                            internalId: 2,\r\n                            portId: 'topPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'topPorts_2'\r\n                        }\r\n                    ],\r\n                    y: 476\r\n                }\r\n            },\r\n            {\r\n                componentId: 40007,\r\n                configuration: {\r\n                    componentId: 40008,\r\n                    deadline: {\r\n                        actionType: 3,\r\n                        componentId: 30025,\r\n                        expressDays: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressHours: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressMinutes: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressSeconds: {\r\n                            componentId: 10008\r\n                        },\r\n                        noDeadline: true,\r\n                        specificDate: {\r\n                            componentId: 10008\r\n                        },\r\n                        withinWorkingHoursOnly: true\r\n                    },\r\n                    decisionOptionType: 2,\r\n                    exceptionSettings: {\r\n                        componentId: 50012,\r\n                        logException: true\r\n                    },\r\n                    outcomes: [\r\n                        {\r\n                            componentId: 30020,\r\n                            internalId: 1,\r\n                            originalTitle: 'Path 1',\r\n                            title: 'Path 1'\r\n                        },\r\n                        {\r\n                            componentId: 30020,\r\n                            internalId: 2,\r\n                            originalTitle: 'Path 2',\r\n                            title: 'Path 2'\r\n                        }\r\n                    ],\r\n                    outcomesEventReference: 'root.nodes[{\"internalId\":4}].children[{\"internalId\":1}]',\r\n                    priority: 1\r\n                },\r\n                internalId: 5,\r\n                systemName: 'Split',\r\n                title: 'Split',\r\n                ui: {\r\n                    bottomPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'bottomPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'bottomPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'bottomPorts_2'\r\n                        }\r\n                    ],\r\n                    componentId: 40009,\r\n                    icon: 'splitStep',\r\n                    leftPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'leftPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            labelRightAligned: true,\r\n                            labelX: -36,\r\n                            outcomeReference: 'root.nodes[{\"internalId\":5}].configuration.outcomes[{\"internalId\":1}]',\r\n                            outgoingLinkReferences: [\r\n                                'root.links[{\"internalId\":5}]'\r\n                            ],\r\n                            portId: 'leftPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'leftPorts_2'\r\n                        }\r\n                    ],\r\n                    rightPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'rightPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            labelX: 36,\r\n                            outcomeReference: 'root.nodes[{\"internalId\":5}].configuration.outcomes[{\"internalId\":2}]',\r\n                            outgoingLinkReferences: [\r\n                                'root.links[{\"internalId\":6}]'\r\n                            ],\r\n                            portId: 'rightPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'rightPorts_2'\r\n                        }\r\n                    ],\r\n                    template: 'SplitStep',\r\n                    topPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'topPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            incomingLinkReferences: [\r\n                                'root.links[{\"internalId\":4}]'\r\n                            ],\r\n                            internalId: 2,\r\n                            portId: 'topPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'topPorts_2'\r\n                        }\r\n                    ],\r\n                    y: 644\r\n                }\r\n            },\r\n            {\r\n                children: [\r\n                    {\r\n                        componentId: 30004,\r\n                        configuration: {\r\n                            body: {\r\n                                componentId: 10008,\r\n                                richText: true\r\n                            },\r\n                            componentId: 30006,\r\n                            exceptionSettings: {\r\n                                componentId: 50012,\r\n                                logException: true\r\n                            },\r\n                            from: {\r\n                                componentId: 10008,\r\n                                smartFields: [\r\n                                    {\r\n                                        componentId: 10001,\r\n                                        environmentFieldReference: 'root.externalReferenceDefinitions[{\"internalId\":1}]',\r\n                                        internalId: 1,\r\n                                        title: 'From Address'\r\n                                    }\r\n                                ]\r\n                            },\r\n                            subject: {\r\n                                componentId: 10008\r\n                            },\r\n                            to: [\r\n                                {\r\n                                    componentId: 10008,\r\n                                    internalId: 1,\r\n                                    isDecoratedPart: true,\r\n                                    smartFields: [\r\n                                        {\r\n                                            componentId: 10009,\r\n                                            customTitle: 'Originator',\r\n                                            fieldName: 'ProcessOriginatorEmail',\r\n                                            internalId: 1,\r\n                                            parentName: 'Originator\\'s',\r\n                                            title: 'Email'\r\n                                        }\r\n                                    ]\r\n                                }\r\n                            ]\r\n                        },\r\n                        internalId: 1,\r\n                        systemName: 'Send Email',\r\n                        title: 'Send Email',\r\n                        ui: {\r\n                            icon: 'emailStep',\r\n                            template: 'DefaultStep'\r\n                        },\r\n                        wizardId: 3001\r\n                    }\r\n                ],\r\n                componentId: 40000,\r\n                configuration: {\r\n                    componentId: 40001,\r\n                    deadline: {\r\n                        actionType: 3,\r\n                        componentId: 30025,\r\n                        expressDays: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressHours: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressMinutes: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressSeconds: {\r\n                            componentId: 10008\r\n                        },\r\n                        noDeadline: true,\r\n                        specificDate: {\r\n                            componentId: 10008\r\n                        },\r\n                        withinWorkingHoursOnly: true\r\n                    },\r\n                    decisionOptionType: 2,\r\n                    exceptionSettings: {\r\n                        componentId: 50012,\r\n                        logException: true\r\n                    },\r\n                    priority: 1\r\n                },\r\n                internalId: 6,\r\n                systemName: 'Send Email 1',\r\n                title: 'Send Email',\r\n                ui: {\r\n                    bottomPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'bottomPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            outgoingLinkReferences: [\r\n                                'root.links[{\"internalId\":7}]'\r\n                            ],\r\n                            portId: 'bottomPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'bottomPorts_2'\r\n                        }\r\n                    ],\r\n                    componentId: 40009,\r\n                    icon: 'emailStep',\r\n                    labelY: 0.16835937500002274,\r\n                    leftPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'leftPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'leftPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'leftPorts_2'\r\n                        }\r\n                    ],\r\n                    rightPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'rightPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'rightPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'rightPorts_2'\r\n                        }\r\n                    ],\r\n                    showLabel: true,\r\n                    template: 'DefaultStep',\r\n                    topPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'topPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'topPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            incomingLinkReferences: [\r\n                                'root.links[{\"internalId\":5}]'\r\n                            ],\r\n                            internalId: 3,\r\n                            portId: 'topPorts_2'\r\n                        }\r\n                    ],\r\n                    x: -168,\r\n                    y: 700\r\n                }\r\n            },\r\n            {\r\n                children: [\r\n                    {\r\n                        componentId: 30004,\r\n                        configuration: {\r\n                            body: {\r\n                                componentId: 10008,\r\n                                richText: true\r\n                            },\r\n                            componentId: 30006,\r\n                            exceptionSettings: {\r\n                                componentId: 50012,\r\n                                logException: true\r\n                            },\r\n                            from: {\r\n                                componentId: 10008,\r\n                                smartFields: [\r\n                                    {\r\n                                        componentId: 10001,\r\n                                        environmentFieldReference: 'root.externalReferenceDefinitions[{\"internalId\":1}]',\r\n                                        internalId: 1,\r\n                                        title: 'From Address'\r\n                                    }\r\n                                ]\r\n                            },\r\n                            subject: {\r\n                                componentId: 10008\r\n                            },\r\n                            to: [\r\n                                {\r\n                                    componentId: 10008,\r\n                                    internalId: 1,\r\n                                    isDecoratedPart: true,\r\n                                    smartFields: [\r\n                                        {\r\n                                            componentId: 10009,\r\n                                            customTitle: 'Originator',\r\n                                            fieldName: 'ProcessOriginatorEmail',\r\n                                            internalId: 1,\r\n                                            parentName: 'Originator\\'s',\r\n                                            title: 'Email'\r\n                                        }\r\n                                    ]\r\n                                }\r\n                            ]\r\n                        },\r\n                        internalId: 1,\r\n                        systemName: 'Send Email',\r\n                        title: 'Send Email',\r\n                        ui: {\r\n                            icon: 'emailStep',\r\n                            template: 'DefaultStep'\r\n                        },\r\n                        wizardId: 3001\r\n                    }\r\n                ],\r\n                componentId: 40000,\r\n                configuration: {\r\n                    componentId: 40001,\r\n                    deadline: {\r\n                        actionType: 3,\r\n                        componentId: 30025,\r\n                        expressDays: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressHours: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressMinutes: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressSeconds: {\r\n                            componentId: 10008\r\n                        },\r\n                        noDeadline: true,\r\n                        specificDate: {\r\n                            componentId: 10008\r\n                        },\r\n                        withinWorkingHoursOnly: true\r\n                    },\r\n                    decisionOptionType: 2,\r\n                    exceptionSettings: {\r\n                        componentId: 50012,\r\n                        logException: true\r\n                    },\r\n                    priority: 1\r\n                },\r\n                internalId: 7,\r\n                systemName: 'Send Email 2',\r\n                title: 'Send Email',\r\n                ui: {\r\n                    bottomPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'bottomPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'bottomPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            outgoingLinkReferences: [\r\n                                'root.links[{\"internalId\":8}]'\r\n                            ],\r\n                            portId: 'bottomPorts_2'\r\n                        }\r\n                    ],\r\n                    componentId: 40009,\r\n                    icon: 'emailStep',\r\n                    labelY: 0.16835937500002274,\r\n                    leftPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'leftPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'leftPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'leftPorts_2'\r\n                        }\r\n                    ],\r\n                    rightPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'rightPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'rightPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'rightPorts_2'\r\n                        }\r\n                    ],\r\n                    showLabel: true,\r\n                    template: 'DefaultStep',\r\n                    topPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'topPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            incomingLinkReferences: [\r\n                                'root.links[{\"internalId\":6}]'\r\n                            ],\r\n                            internalId: 2,\r\n                            portId: 'topPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'topPorts_2'\r\n                        }\r\n                    ],\r\n                    x: 140,\r\n                    y: 700\r\n                }\r\n            },\r\n            {\r\n                componentId: 40010,\r\n                configuration: {\r\n                    checkWaitForAll: true,\r\n                    componentId: 40011,\r\n                    deadline: {\r\n                        actionType: 3,\r\n                        componentId: 30025,\r\n                        expressDays: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressHours: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressMinutes: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressSeconds: {\r\n                            componentId: 10008\r\n                        },\r\n                        noDeadline: true,\r\n                        specificDate: {\r\n                            componentId: 10008\r\n                        },\r\n                        withinWorkingHoursOnly: true\r\n                    },\r\n                    decisionOptionType: 2,\r\n                    exceptionSettings: {\r\n                        componentId: 50012,\r\n                        logException: true\r\n                    },\r\n                    priority: 1,\r\n                    selectedSplitStep: {\r\n                        componentId: 10008,\r\n                        smartFields: [\r\n                            {\r\n                                componentId: 10004,\r\n                                internalId: 1,\r\n                                text: 'Split',\r\n                                title: 'Split'\r\n                            }\r\n                        ]\r\n                    },\r\n                    selectedSplitStepReference: 'root.nodes[{\"internalId\":5}]'\r\n                },\r\n                internalId: 8,\r\n                systemName: 'Merge',\r\n                title: 'Merge',\r\n                ui: {\r\n                    bottomPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'bottomPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            outgoingLinkReferences: [\r\n                                'root.links[{\"internalId\":9}]'\r\n                            ],\r\n                            portId: 'bottomPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'bottomPorts_2'\r\n                        }\r\n                    ],\r\n                    componentId: 40009,\r\n                    icon: 'mergeStep',\r\n                    leftPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'leftPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            incomingLinkReferences: [\r\n                                'root.links[{\"internalId\":7}]'\r\n                            ],\r\n                            internalId: 2,\r\n                            portId: 'leftPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'leftPorts_2'\r\n                        }\r\n                    ],\r\n                    rightPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'rightPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            incomingLinkReferences: [\r\n                                'root.links[{\"internalId\":8}]'\r\n                            ],\r\n                            internalId: 2,\r\n                            portId: 'rightPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'rightPorts_2'\r\n                        }\r\n                    ],\r\n                    template: 'MergeStep',\r\n                    topPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'topPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'topPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'topPorts_2'\r\n                        }\r\n                    ],\r\n                    y: 812\r\n                }\r\n            },\r\n            {\r\n                componentId: 40003,\r\n                configuration: {\r\n                    componentId: 40004,\r\n                    deadline: {\r\n                        actionType: 3,\r\n                        componentId: 30025,\r\n                        expressDays: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressHours: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressMinutes: {\r\n                            componentId: 10008\r\n                        },\r\n                        expressSeconds: {\r\n                            componentId: 10008\r\n                        },\r\n                        noDeadline: true,\r\n                        specificDate: {\r\n                            componentId: 10008\r\n                        },\r\n                        withinWorkingHoursOnly: true\r\n                    },\r\n                    decisionOptionType: 2,\r\n                    endConfig: 1,\r\n                    exceptionSettings: {\r\n                        componentId: 50012,\r\n                        logException: true\r\n                    },\r\n                    priority: 1\r\n                },\r\n                internalId: 9,\r\n                systemName: 'End',\r\n                title: 'End',\r\n                ui: {\r\n                    bottomPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'bottomPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'bottomPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'bottomPorts_2'\r\n                        }\r\n                    ],\r\n                    componentId: 40009,\r\n                    icon: 'endStep',\r\n                    labelY: 0.16835937500002274,\r\n                    leftPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'leftPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'leftPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'leftPorts_2'\r\n                        }\r\n                    ],\r\n                    rightPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'rightPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 2,\r\n                            portId: 'rightPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'rightPorts_2'\r\n                        }\r\n                    ],\r\n                    template: 'EndStep',\r\n                    topPorts: [\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 1,\r\n                            portId: 'topPorts_0'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            incomingLinkReferences: [\r\n                                'root.links[{\"internalId\":9}]'\r\n                            ],\r\n                            internalId: 2,\r\n                            portId: 'topPorts_1'\r\n                        },\r\n                        {\r\n                            componentId: 40012,\r\n                            internalId: 3,\r\n                            portId: 'topPorts_2'\r\n                        }\r\n                    ],\r\n                    y: 924\r\n                }\r\n            }\r\n        ],\r\n        title: 'Workflow Two',\r\n        trackedReferences: [\r\n            {\r\n                componentId: 70000,\r\n                internalId: 1,\r\n                references: [\r\n                    'root.configuration.startRule.statements[{\"internalId\":1}].thenStatements[{\"internalId\":1}].linkedOutcomeReferences'\r\n                ],\r\n                trackedObjectDefinitionPath: 'root.configuration.outcomes[{\"internalId\":1}]'\r\n            },\r\n            {\r\n                componentId: 70000,\r\n                internalId: 2,\r\n                references: [\r\n                    'root.configuration.startRule.statements[{\"internalId\":1}].elseStatements[{\"internalId\":1}].linkedOutcomeReferences'\r\n                ],\r\n                trackedObjectDefinitionPath: 'root.configuration.outcomes[{\"internalId\":2}]'\r\n            },\r\n            {\r\n                componentId: 70000,\r\n                internalId: 3,\r\n                references: [\r\n                    'root.nodes[{\"internalId\":2}].children[{\"internalId\":1}].configuration.formConfiguration.url.smartFields[{\"internalId\":1}].smartFormFieldReference',\r\n                    'root.nodes[{\"internalId\":4}].children[{\"internalId\":1}].configuration.formConfiguration.url.smartFields[{\"internalId\":1}].smartFormFieldReference'\r\n                ],\r\n                trackedObjectDefinitionPath: 'root.externalReferenceDefinitions[{\"internalId\":2}]'\r\n            },\r\n            {\r\n                componentId: 70000,\r\n                internalId: 4,\r\n                references: [\r\n                    'root.nodes[{\"internalId\":2}].children[{\"internalId\":1}].configuration.emailConfiguration.from.smartFields[{\"internalId\":1}].environmentFieldReference',\r\n                    'root.nodes[{\"internalId\":3}].children[{\"internalId\":1}].configuration.from.smartFields[{\"internalId\":1}].environmentFieldReference',\r\n                    'root.nodes[{\"internalId\":4}].children[{\"internalId\":1}].configuration.emailConfiguration.from.smartFields[{\"internalId\":1}].environmentFieldReference',\r\n                    'root.nodes[{\"internalId\":6}].children[{\"internalId\":1}].configuration.from.smartFields[{\"internalId\":1}].environmentFieldReference',\r\n                    'root.nodes[{\"internalId\":7}].children[{\"internalId\":1}].configuration.from.smartFields[{\"internalId\":1}].environmentFieldReference'\r\n                ],\r\n                trackedObjectDefinitionPath: 'root.externalReferenceDefinitions[{\"internalId\":1}]'\r\n            },\r\n            {\r\n                componentId: 70000,\r\n                internalId: 5,\r\n                references: [\r\n                    'root.links[{\"internalId\":5}].configuration.associatedOutcomeReference',\r\n                    'root.nodes[{\"internalId\":5}].ui.leftPorts[{\"internalId\":2}].outcomeReference'\r\n                ],\r\n                trackedObjectDefinitionPath: 'root.nodes[{\"internalId\":5}].configuration.outcomes[{\"internalId\":1}]'\r\n            },\r\n            {\r\n                componentId: 70000,\r\n                internalId: 6,\r\n                references: [\r\n                    'root.links[{\"internalId\":6}].configuration.associatedOutcomeReference',\r\n                    'root.nodes[{\"internalId\":5}].ui.rightPorts[{\"internalId\":2}].outcomeReference'\r\n                ],\r\n                trackedObjectDefinitionPath: 'root.nodes[{\"internalId\":5}].configuration.outcomes[{\"internalId\":2}]'\r\n            },\r\n            {\r\n                componentId: 70000,\r\n                internalId: 7,\r\n                references: [\r\n                    'root.nodes[{\"internalId\":5}].configuration.outcomesEventReference'\r\n                ],\r\n                trackedObjectDefinitionPath: 'root.nodes[{\"internalId\":4}].children[{\"internalId\":1}]'\r\n            },\r\n            {\r\n                componentId: 70000,\r\n                internalId: 8,\r\n                references: [\r\n                    'root.nodes[{\"internalId\":8}].configuration.selectedSplitStepReference'\r\n                ],\r\n                trackedObjectDefinitionPath: 'root.nodes[{\"internalId\":5}]'\r\n            }\r\n        ]\r\n    };\r\n    (process as any).findItem = () => null;\r\n\r\n    return process;\r\n\r\n}\r\n","/**\r\n * Enum to define what action should be taken on an escalation\r\n */\r\nexport enum DeadlineActionType {\r\n\r\n    /**\r\n     * Represents a escalation of none\r\n     */\r\n    None = 0,\r\n\r\n    /**\r\n     * Represents a default escalation action\r\n     */\r\n    DefaultActivityEscalation = 1,\r\n\r\n    /**\r\n     * Represents an email escalationaction\r\n     */\r\n    EmailEscalationAction = 2,\r\n\r\n    /**\r\n     * Represents an expire acticity escalation\r\n     */\r\n    ExpireActivityEscalationAction = 3,\r\n\r\n    /**\r\n     * Represents a goto activity escalation\r\n     */\r\n    GotoActivityEscalationAction = 4,\r\n\r\n    /**\r\n     * Represents a redirect escalation\r\n     */\r\n    RedirectEscalationAction = 5,\r\n\r\n    /**\r\n     * Represents a SmartObject escalation\r\n     */\r\n    SmartObjectEscalationAction = 6,\r\n\r\n}\r\n","/**\r\n * Enum to define what action should be taken on an escalation UI.\r\n */\r\nexport enum ReminderActionType {\r\n\r\n    /**\r\n     * Represents the ON dropdown item.\r\n     */\r\n    On = 1,\r\n\r\n    /**\r\n     * Represents the AFTER dropdown item.\r\n     */\r\n    After = 2,\r\n\r\n    /**\r\n     * Represents the BEFORE dropdown item.\r\n     */\r\n    Before = 3,\r\n\r\n}\r\n","\r\n\r\n/**\r\n * This enum defines the priority levels of a process.\r\n */\r\nexport enum ProcessPriorityTypes {\r\n\r\n    /**\r\n     * Represents a high priority.\r\n     */\r\n    high = 0,\r\n\r\n    /**\r\n     * Represents a medium priority.\r\n     */\r\n    med = 1,\r\n\r\n    /**\r\n     * Represent a low priority.\r\n     */\r\n    low = 2,\r\n\r\n}"],"names":[],"sourceRoot":"webpack:///"}